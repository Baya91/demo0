(function(x,T){typeof exports=="object"&&typeof module=="object"?module.exports=T():typeof define=="function"&&define.amd?define([],T):typeof exports=="object"?exports.AFRAME=T():x.AFRAME=T()})(self,()=>(()=>{var x={6793:M=>{var E=Object.prototype.toString;M.exports=function(e){return e.BYTES_PER_ELEMENT&&E.call(e.buffer)==="[object ArrayBuffer]"||Array.isArray(e)}},3205:M=>{M.exports=function(E,e){return typeof E=="number"?E:typeof e=="number"?e:0}},6717:(M,E)=>{"use strict";E.byteLength=function(V){var z=A(V),H=z[0],G=z[1];return 3*(H+G)/4-G},E.toByteArray=function(V){var z,H,G=A(V),$=G[0],k=G[1],K=new N(function(he,ue,ve){return 3*(ue+ve)/4-ve}(0,$,k)),Z=0,ee=k>0?$-4:$;for(H=0;H<ee;H+=4)z=B[V.charCodeAt(H)]<<18|B[V.charCodeAt(H+1)]<<12|B[V.charCodeAt(H+2)]<<6|B[V.charCodeAt(H+3)],K[Z++]=z>>16&255,K[Z++]=z>>8&255,K[Z++]=255&z;return k===2&&(z=B[V.charCodeAt(H)]<<2|B[V.charCodeAt(H+1)]>>4,K[Z++]=255&z),k===1&&(z=B[V.charCodeAt(H)]<<10|B[V.charCodeAt(H+1)]<<4|B[V.charCodeAt(H+2)]>>2,K[Z++]=z>>8&255,K[Z++]=255&z),K},E.fromByteArray=function(V){for(var z,H=V.length,G=H%3,$=[],k=16383,K=0,Z=H-G;K<Z;K+=k)$.push(C(V,K,K+k>Z?Z:K+k));return G===1?(z=V[H-1],$.push(e[z>>2]+e[z<<4&63]+"==")):G===2&&(z=(V[H-2]<<8)+V[H-1],$.push(e[z>>10]+e[z>>4&63]+e[z<<2&63]+"=")),$.join("")};for(var e=[],B=[],N=typeof Uint8Array<"u"?Uint8Array:Array,Q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P=0;P<64;++P)e[P]=Q[P],B[Q.charCodeAt(P)]=P;function A(V){var z=V.length;if(z%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var H=V.indexOf("=");return H===-1&&(H=z),[H,H===z?0:4-H%4]}function C(V,z,H){for(var G,$,k=[],K=z;K<H;K+=3)G=(V[K]<<16&16711680)+(V[K+1]<<8&65280)+(255&V[K+2]),k.push(e[($=G)>>18&63]+e[$>>12&63]+e[$>>6&63]+e[63&$]);return k.join("")}B[45]=62,B[95]=63},5286:(M,E,e)=>{var B=e(5851).lW;M.exports=function(N,Q){if(B.isBuffer(N)&&B.isBuffer(Q)){if(typeof N.equals=="function")return N.equals(Q);if(N.length!==Q.length)return!1;for(var P=0;P<N.length;P++)if(N[P]!==Q[P])return!1;return!0}}},5851:(M,E,e)=>{"use strict";const B=e(6717),N=e(9350),Q=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;E.lW=C,E.h2=50;const P=2147483647;function A(fe){if(fe>P)throw new RangeError('The value "'+fe+'" is invalid for option "size"');const Ee=new Uint8Array(fe);return Object.setPrototypeOf(Ee,C.prototype),Ee}function C(fe,Ee,_e){if(typeof fe=="number"){if(typeof Ee=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return H(fe)}return V(fe,Ee,_e)}function V(fe,Ee,_e){if(typeof fe=="string")return function(vt,Yt){if(typeof Yt=="string"&&Yt!==""||(Yt="utf8"),!C.isEncoding(Yt))throw new TypeError("Unknown encoding: "+Yt);const zi=0|K(vt,Yt);let cr=A(zi);const qr=cr.write(vt,Yt);return qr!==zi&&(cr=cr.slice(0,qr)),cr}(fe,Ee);if(ArrayBuffer.isView(fe))return function(vt){if(Hn(vt,Uint8Array)){const Yt=new Uint8Array(vt);return $(Yt.buffer,Yt.byteOffset,Yt.byteLength)}return G(vt)}(fe);if(fe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof fe);if(Hn(fe,ArrayBuffer)||fe&&Hn(fe.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Hn(fe,SharedArrayBuffer)||fe&&Hn(fe.buffer,SharedArrayBuffer)))return $(fe,Ee,_e);if(typeof fe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const et=fe.valueOf&&fe.valueOf();if(et!=null&&et!==fe)return C.from(et,Ee,_e);const dt=function(vt){if(C.isBuffer(vt)){const Yt=0|k(vt.length),zi=A(Yt);return zi.length===0||vt.copy(zi,0,0,Yt),zi}return vt.length!==void 0?typeof vt.length!="number"||Z0(vt.length)?A(0):G(vt):vt.type==="Buffer"&&Array.isArray(vt.data)?G(vt.data):void 0}(fe);if(dt)return dt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof fe[Symbol.toPrimitive]=="function")return C.from(fe[Symbol.toPrimitive]("string"),Ee,_e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof fe)}function z(fe){if(typeof fe!="number")throw new TypeError('"size" argument must be of type number');if(fe<0)throw new RangeError('The value "'+fe+'" is invalid for option "size"')}function H(fe){return z(fe),A(fe<0?0:0|k(fe))}function G(fe){const Ee=fe.length<0?0:0|k(fe.length),_e=A(Ee);for(let et=0;et<Ee;et+=1)_e[et]=255&fe[et];return _e}function $(fe,Ee,_e){if(Ee<0||fe.byteLength<Ee)throw new RangeError('"offset" is outside of buffer bounds');if(fe.byteLength<Ee+(_e||0))throw new RangeError('"length" is outside of buffer bounds');let et;return et=Ee===void 0&&_e===void 0?new Uint8Array(fe):_e===void 0?new Uint8Array(fe,Ee):new Uint8Array(fe,Ee,_e),Object.setPrototypeOf(et,C.prototype),et}function k(fe){if(fe>=P)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+P.toString(16)+" bytes");return 0|fe}function K(fe,Ee){if(C.isBuffer(fe))return fe.length;if(ArrayBuffer.isView(fe)||Hn(fe,ArrayBuffer))return fe.byteLength;if(typeof fe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof fe);const _e=fe.length,et=arguments.length>2&&arguments[2]===!0;if(!et&&_e===0)return 0;let dt=!1;for(;;)switch(Ee){case"ascii":case"latin1":case"binary":return _e;case"utf8":case"utf-8":return J0(fe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*_e;case"hex":return _e>>>1;case"base64":return as(fe).length;default:if(dt)return et?-1:J0(fe).length;Ee=(""+Ee).toLowerCase(),dt=!0}}function Z(fe,Ee,_e){let et=!1;if((Ee===void 0||Ee<0)&&(Ee=0),Ee>this.length||((_e===void 0||_e>this.length)&&(_e=this.length),_e<=0)||(_e>>>=0)<=(Ee>>>=0))return"";for(fe||(fe="utf8");;)switch(fe){case"hex":return Mt(this,Ee,_e);case"utf8":case"utf-8":return Re(this,Ee,_e);case"ascii":return ot(this,Ee,_e);case"latin1":case"binary":return Je(this,Ee,_e);case"base64":return Ce(this,Ee,_e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Zt(this,Ee,_e);default:if(et)throw new TypeError("Unknown encoding: "+fe);fe=(fe+"").toLowerCase(),et=!0}}function ee(fe,Ee,_e){const et=fe[Ee];fe[Ee]=fe[_e],fe[_e]=et}function he(fe,Ee,_e,et,dt){if(fe.length===0)return-1;if(typeof _e=="string"?(et=_e,_e=0):_e>2147483647?_e=2147483647:_e<-2147483648&&(_e=-2147483648),Z0(_e=+_e)&&(_e=dt?0:fe.length-1),_e<0&&(_e=fe.length+_e),_e>=fe.length){if(dt)return-1;_e=fe.length-1}else if(_e<0){if(!dt)return-1;_e=0}if(typeof Ee=="string"&&(Ee=C.from(Ee,et)),C.isBuffer(Ee))return Ee.length===0?-1:ue(fe,Ee,_e,et,dt);if(typeof Ee=="number")return Ee&=255,typeof Uint8Array.prototype.indexOf=="function"?dt?Uint8Array.prototype.indexOf.call(fe,Ee,_e):Uint8Array.prototype.lastIndexOf.call(fe,Ee,_e):ue(fe,[Ee],_e,et,dt);throw new TypeError("val must be string, number or Buffer")}function ue(fe,Ee,_e,et,dt){let vt,Yt=1,zi=fe.length,cr=Ee.length;if(et!==void 0&&((et=String(et).toLowerCase())==="ucs2"||et==="ucs-2"||et==="utf16le"||et==="utf-16le")){if(fe.length<2||Ee.length<2)return-1;Yt=2,zi/=2,cr/=2,_e/=2}function qr(ur,Nr){return Yt===1?ur[Nr]:ur.readUInt16BE(Nr*Yt)}if(dt){let ur=-1;for(vt=_e;vt<zi;vt++)if(qr(fe,vt)===qr(Ee,ur===-1?0:vt-ur)){if(ur===-1&&(ur=vt),vt-ur+1===cr)return ur*Yt}else ur!==-1&&(vt-=vt-ur),ur=-1}else for(_e+cr>zi&&(_e=zi-cr),vt=_e;vt>=0;vt--){let ur=!0;for(let Nr=0;Nr<cr;Nr++)if(qr(fe,vt+Nr)!==qr(Ee,Nr)){ur=!1;break}if(ur)return vt}return-1}function ve(fe,Ee,_e,et){_e=Number(_e)||0;const dt=fe.length-_e;et?(et=Number(et))>dt&&(et=dt):et=dt;const vt=Ee.length;let Yt;for(et>vt/2&&(et=vt/2),Yt=0;Yt<et;++Yt){const zi=parseInt(Ee.substr(2*Yt,2),16);if(Z0(zi))return Yt;fe[_e+Yt]=zi}return Yt}function be(fe,Ee,_e,et){return R0(J0(Ee,fe.length-_e),fe,_e,et)}function Te(fe,Ee,_e,et){return R0(function(dt){const vt=[];for(let Yt=0;Yt<dt.length;++Yt)vt.push(255&dt.charCodeAt(Yt));return vt}(Ee),fe,_e,et)}function ye(fe,Ee,_e,et){return R0(as(Ee),fe,_e,et)}function De(fe,Ee,_e,et){return R0(function(dt,vt){let Yt,zi,cr;const qr=[];for(let ur=0;ur<dt.length&&!((vt-=2)<0);++ur)Yt=dt.charCodeAt(ur),zi=Yt>>8,cr=Yt%256,qr.push(cr),qr.push(zi);return qr}(Ee,fe.length-_e),fe,_e,et)}function Ce(fe,Ee,_e){return Ee===0&&_e===fe.length?B.fromByteArray(fe):B.fromByteArray(fe.slice(Ee,_e))}function Re(fe,Ee,_e){_e=Math.min(fe.length,_e);const et=[];let dt=Ee;for(;dt<_e;){const vt=fe[dt];let Yt=null,zi=vt>239?4:vt>223?3:vt>191?2:1;if(dt+zi<=_e){let cr,qr,ur,Nr;switch(zi){case 1:vt<128&&(Yt=vt);break;case 2:cr=fe[dt+1],(192&cr)==128&&(Nr=(31&vt)<<6|63&cr,Nr>127&&(Yt=Nr));break;case 3:cr=fe[dt+1],qr=fe[dt+2],(192&cr)==128&&(192&qr)==128&&(Nr=(15&vt)<<12|(63&cr)<<6|63&qr,Nr>2047&&(Nr<55296||Nr>57343)&&(Yt=Nr));break;case 4:cr=fe[dt+1],qr=fe[dt+2],ur=fe[dt+3],(192&cr)==128&&(192&qr)==128&&(192&ur)==128&&(Nr=(15&vt)<<18|(63&cr)<<12|(63&qr)<<6|63&ur,Nr>65535&&Nr<1114112&&(Yt=Nr))}}Yt===null?(Yt=65533,zi=1):Yt>65535&&(Yt-=65536,et.push(Yt>>>10&1023|55296),Yt=56320|1023&Yt),et.push(Yt),dt+=zi}return function(vt){const Yt=vt.length;if(Yt<=Qe)return String.fromCharCode.apply(String,vt);let zi="",cr=0;for(;cr<Yt;)zi+=String.fromCharCode.apply(String,vt.slice(cr,cr+=Qe));return zi}(et)}C.TYPED_ARRAY_SUPPORT=function(){try{const fe=new Uint8Array(1),Ee={foo:function(){return 42}};return Object.setPrototypeOf(Ee,Uint8Array.prototype),Object.setPrototypeOf(fe,Ee),fe.foo()===42}catch{return!1}}(),C.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(C.prototype,"parent",{enumerable:!0,get:function(){if(C.isBuffer(this))return this.buffer}}),Object.defineProperty(C.prototype,"offset",{enumerable:!0,get:function(){if(C.isBuffer(this))return this.byteOffset}}),C.poolSize=8192,C.from=function(fe,Ee,_e){return V(fe,Ee,_e)},Object.setPrototypeOf(C.prototype,Uint8Array.prototype),Object.setPrototypeOf(C,Uint8Array),C.alloc=function(fe,Ee,_e){return function(et,dt,vt){return z(et),et<=0?A(et):dt!==void 0?typeof vt=="string"?A(et).fill(dt,vt):A(et).fill(dt):A(et)}(fe,Ee,_e)},C.allocUnsafe=function(fe){return H(fe)},C.allocUnsafeSlow=function(fe){return H(fe)},C.isBuffer=function(fe){return fe!=null&&fe._isBuffer===!0&&fe!==C.prototype},C.compare=function(fe,Ee){if(Hn(fe,Uint8Array)&&(fe=C.from(fe,fe.offset,fe.byteLength)),Hn(Ee,Uint8Array)&&(Ee=C.from(Ee,Ee.offset,Ee.byteLength)),!C.isBuffer(fe)||!C.isBuffer(Ee))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(fe===Ee)return 0;let _e=fe.length,et=Ee.length;for(let dt=0,vt=Math.min(_e,et);dt<vt;++dt)if(fe[dt]!==Ee[dt]){_e=fe[dt],et=Ee[dt];break}return _e<et?-1:et<_e?1:0},C.isEncoding=function(fe){switch(String(fe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},C.concat=function(fe,Ee){if(!Array.isArray(fe))throw new TypeError('"list" argument must be an Array of Buffers');if(fe.length===0)return C.alloc(0);let _e;if(Ee===void 0)for(Ee=0,_e=0;_e<fe.length;++_e)Ee+=fe[_e].length;const et=C.allocUnsafe(Ee);let dt=0;for(_e=0;_e<fe.length;++_e){let vt=fe[_e];if(Hn(vt,Uint8Array))dt+vt.length>et.length?(C.isBuffer(vt)||(vt=C.from(vt)),vt.copy(et,dt)):Uint8Array.prototype.set.call(et,vt,dt);else{if(!C.isBuffer(vt))throw new TypeError('"list" argument must be an Array of Buffers');vt.copy(et,dt)}dt+=vt.length}return et},C.byteLength=K,C.prototype._isBuffer=!0,C.prototype.swap16=function(){const fe=this.length;if(fe%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Ee=0;Ee<fe;Ee+=2)ee(this,Ee,Ee+1);return this},C.prototype.swap32=function(){const fe=this.length;if(fe%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Ee=0;Ee<fe;Ee+=4)ee(this,Ee,Ee+3),ee(this,Ee+1,Ee+2);return this},C.prototype.swap64=function(){const fe=this.length;if(fe%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Ee=0;Ee<fe;Ee+=8)ee(this,Ee,Ee+7),ee(this,Ee+1,Ee+6),ee(this,Ee+2,Ee+5),ee(this,Ee+3,Ee+4);return this},C.prototype.toString=function(){const fe=this.length;return fe===0?"":arguments.length===0?Re(this,0,fe):Z.apply(this,arguments)},C.prototype.toLocaleString=C.prototype.toString,C.prototype.equals=function(fe){if(!C.isBuffer(fe))throw new TypeError("Argument must be a Buffer");return this===fe||C.compare(this,fe)===0},C.prototype.inspect=function(){let fe="";const Ee=E.h2;return fe=this.toString("hex",0,Ee).replace(/(.{2})/g,"$1 ").trim(),this.length>Ee&&(fe+=" ... "),"<Buffer "+fe+">"},Q&&(C.prototype[Q]=C.prototype.inspect),C.prototype.compare=function(fe,Ee,_e,et,dt){if(Hn(fe,Uint8Array)&&(fe=C.from(fe,fe.offset,fe.byteLength)),!C.isBuffer(fe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof fe);if(Ee===void 0&&(Ee=0),_e===void 0&&(_e=fe?fe.length:0),et===void 0&&(et=0),dt===void 0&&(dt=this.length),Ee<0||_e>fe.length||et<0||dt>this.length)throw new RangeError("out of range index");if(et>=dt&&Ee>=_e)return 0;if(et>=dt)return-1;if(Ee>=_e)return 1;if(this===fe)return 0;let vt=(dt>>>=0)-(et>>>=0),Yt=(_e>>>=0)-(Ee>>>=0);const zi=Math.min(vt,Yt),cr=this.slice(et,dt),qr=fe.slice(Ee,_e);for(let ur=0;ur<zi;++ur)if(cr[ur]!==qr[ur]){vt=cr[ur],Yt=qr[ur];break}return vt<Yt?-1:Yt<vt?1:0},C.prototype.includes=function(fe,Ee,_e){return this.indexOf(fe,Ee,_e)!==-1},C.prototype.indexOf=function(fe,Ee,_e){return he(this,fe,Ee,_e,!0)},C.prototype.lastIndexOf=function(fe,Ee,_e){return he(this,fe,Ee,_e,!1)},C.prototype.write=function(fe,Ee,_e,et){if(Ee===void 0)et="utf8",_e=this.length,Ee=0;else if(_e===void 0&&typeof Ee=="string")et=Ee,_e=this.length,Ee=0;else{if(!isFinite(Ee))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Ee>>>=0,isFinite(_e)?(_e>>>=0,et===void 0&&(et="utf8")):(et=_e,_e=void 0)}const dt=this.length-Ee;if((_e===void 0||_e>dt)&&(_e=dt),fe.length>0&&(_e<0||Ee<0)||Ee>this.length)throw new RangeError("Attempt to write outside buffer bounds");et||(et="utf8");let vt=!1;for(;;)switch(et){case"hex":return ve(this,fe,Ee,_e);case"utf8":case"utf-8":return be(this,fe,Ee,_e);case"ascii":case"latin1":case"binary":return Te(this,fe,Ee,_e);case"base64":return ye(this,fe,Ee,_e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return De(this,fe,Ee,_e);default:if(vt)throw new TypeError("Unknown encoding: "+et);et=(""+et).toLowerCase(),vt=!0}},C.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const Qe=4096;function ot(fe,Ee,_e){let et="";_e=Math.min(fe.length,_e);for(let dt=Ee;dt<_e;++dt)et+=String.fromCharCode(127&fe[dt]);return et}function Je(fe,Ee,_e){let et="";_e=Math.min(fe.length,_e);for(let dt=Ee;dt<_e;++dt)et+=String.fromCharCode(fe[dt]);return et}function Mt(fe,Ee,_e){const et=fe.length;(!Ee||Ee<0)&&(Ee=0),(!_e||_e<0||_e>et)&&(_e=et);let dt="";for(let vt=Ee;vt<_e;++vt)dt+=ls[fe[vt]];return dt}function Zt(fe,Ee,_e){const et=fe.slice(Ee,_e);let dt="";for(let vt=0;vt<et.length-1;vt+=2)dt+=String.fromCharCode(et[vt]+256*et[vt+1]);return dt}function kt(fe,Ee,_e){if(fe%1!=0||fe<0)throw new RangeError("offset is not uint");if(fe+Ee>_e)throw new RangeError("Trying to access beyond buffer length")}function si(fe,Ee,_e,et,dt,vt){if(!C.isBuffer(fe))throw new TypeError('"buffer" argument must be a Buffer instance');if(Ee>dt||Ee<vt)throw new RangeError('"value" argument is out of bounds');if(_e+et>fe.length)throw new RangeError("Index out of range")}function _i(fe,Ee,_e,et,dt){K0(Ee,et,dt,fe,_e,7);let vt=Number(Ee&BigInt(4294967295));fe[_e++]=vt,vt>>=8,fe[_e++]=vt,vt>>=8,fe[_e++]=vt,vt>>=8,fe[_e++]=vt;let Yt=Number(Ee>>BigInt(32)&BigInt(4294967295));return fe[_e++]=Yt,Yt>>=8,fe[_e++]=Yt,Yt>>=8,fe[_e++]=Yt,Yt>>=8,fe[_e++]=Yt,_e}function Ri(fe,Ee,_e,et,dt){K0(Ee,et,dt,fe,_e,7);let vt=Number(Ee&BigInt(4294967295));fe[_e+7]=vt,vt>>=8,fe[_e+6]=vt,vt>>=8,fe[_e+5]=vt,vt>>=8,fe[_e+4]=vt;let Yt=Number(Ee>>BigInt(32)&BigInt(4294967295));return fe[_e+3]=Yt,Yt>>=8,fe[_e+2]=Yt,Yt>>=8,fe[_e+1]=Yt,Yt>>=8,fe[_e]=Yt,_e+8}function er(fe,Ee,_e,et,dt,vt){if(_e+et>fe.length)throw new RangeError("Index out of range");if(_e<0)throw new RangeError("Index out of range")}function Ki(fe,Ee,_e,et,dt){return Ee=+Ee,_e>>>=0,dt||er(fe,0,_e,4),N.write(fe,Ee,_e,et,23,4),_e+4}function p0(fe,Ee,_e,et,dt){return Ee=+Ee,_e>>>=0,dt||er(fe,0,_e,8),N.write(fe,Ee,_e,et,52,8),_e+8}C.prototype.slice=function(fe,Ee){const _e=this.length;(fe=~~fe)<0?(fe+=_e)<0&&(fe=0):fe>_e&&(fe=_e),(Ee=Ee===void 0?_e:~~Ee)<0?(Ee+=_e)<0&&(Ee=0):Ee>_e&&(Ee=_e),Ee<fe&&(Ee=fe);const et=this.subarray(fe,Ee);return Object.setPrototypeOf(et,C.prototype),et},C.prototype.readUintLE=C.prototype.readUIntLE=function(fe,Ee,_e){fe>>>=0,Ee>>>=0,_e||kt(fe,Ee,this.length);let et=this[fe],dt=1,vt=0;for(;++vt<Ee&&(dt*=256);)et+=this[fe+vt]*dt;return et},C.prototype.readUintBE=C.prototype.readUIntBE=function(fe,Ee,_e){fe>>>=0,Ee>>>=0,_e||kt(fe,Ee,this.length);let et=this[fe+--Ee],dt=1;for(;Ee>0&&(dt*=256);)et+=this[fe+--Ee]*dt;return et},C.prototype.readUint8=C.prototype.readUInt8=function(fe,Ee){return fe>>>=0,Ee||kt(fe,1,this.length),this[fe]},C.prototype.readUint16LE=C.prototype.readUInt16LE=function(fe,Ee){return fe>>>=0,Ee||kt(fe,2,this.length),this[fe]|this[fe+1]<<8},C.prototype.readUint16BE=C.prototype.readUInt16BE=function(fe,Ee){return fe>>>=0,Ee||kt(fe,2,this.length),this[fe]<<8|this[fe+1]},C.prototype.readUint32LE=C.prototype.readUInt32LE=function(fe,Ee){return fe>>>=0,Ee||kt(fe,4,this.length),(this[fe]|this[fe+1]<<8|this[fe+2]<<16)+16777216*this[fe+3]},C.prototype.readUint32BE=C.prototype.readUInt32BE=function(fe,Ee){return fe>>>=0,Ee||kt(fe,4,this.length),16777216*this[fe]+(this[fe+1]<<16|this[fe+2]<<8|this[fe+3])},C.prototype.readBigUInt64LE=tn(function(fe){I0(fe>>>=0,"offset");const Ee=this[fe],_e=this[fe+7];Ee!==void 0&&_e!==void 0||A0(fe,this.length-8);const et=Ee+256*this[++fe]+65536*this[++fe]+this[++fe]*2**24,dt=this[++fe]+256*this[++fe]+65536*this[++fe]+_e*2**24;return BigInt(et)+(BigInt(dt)<<BigInt(32))}),C.prototype.readBigUInt64BE=tn(function(fe){I0(fe>>>=0,"offset");const Ee=this[fe],_e=this[fe+7];Ee!==void 0&&_e!==void 0||A0(fe,this.length-8);const et=Ee*2**24+65536*this[++fe]+256*this[++fe]+this[++fe],dt=this[++fe]*2**24+65536*this[++fe]+256*this[++fe]+_e;return(BigInt(et)<<BigInt(32))+BigInt(dt)}),C.prototype.readIntLE=function(fe,Ee,_e){fe>>>=0,Ee>>>=0,_e||kt(fe,Ee,this.length);let et=this[fe],dt=1,vt=0;for(;++vt<Ee&&(dt*=256);)et+=this[fe+vt]*dt;return dt*=128,et>=dt&&(et-=Math.pow(2,8*Ee)),et},C.prototype.readIntBE=function(fe,Ee,_e){fe>>>=0,Ee>>>=0,_e||kt(fe,Ee,this.length);let et=Ee,dt=1,vt=this[fe+--et];for(;et>0&&(dt*=256);)vt+=this[fe+--et]*dt;return dt*=128,vt>=dt&&(vt-=Math.pow(2,8*Ee)),vt},C.prototype.readInt8=function(fe,Ee){return fe>>>=0,Ee||kt(fe,1,this.length),128&this[fe]?-1*(255-this[fe]+1):this[fe]},C.prototype.readInt16LE=function(fe,Ee){fe>>>=0,Ee||kt(fe,2,this.length);const _e=this[fe]|this[fe+1]<<8;return 32768&_e?4294901760|_e:_e},C.prototype.readInt16BE=function(fe,Ee){fe>>>=0,Ee||kt(fe,2,this.length);const _e=this[fe+1]|this[fe]<<8;return 32768&_e?4294901760|_e:_e},C.prototype.readInt32LE=function(fe,Ee){return fe>>>=0,Ee||kt(fe,4,this.length),this[fe]|this[fe+1]<<8|this[fe+2]<<16|this[fe+3]<<24},C.prototype.readInt32BE=function(fe,Ee){return fe>>>=0,Ee||kt(fe,4,this.length),this[fe]<<24|this[fe+1]<<16|this[fe+2]<<8|this[fe+3]},C.prototype.readBigInt64LE=tn(function(fe){I0(fe>>>=0,"offset");const Ee=this[fe],_e=this[fe+7];Ee!==void 0&&_e!==void 0||A0(fe,this.length-8);const et=this[fe+4]+256*this[fe+5]+65536*this[fe+6]+(_e<<24);return(BigInt(et)<<BigInt(32))+BigInt(Ee+256*this[++fe]+65536*this[++fe]+this[++fe]*16777216)}),C.prototype.readBigInt64BE=tn(function(fe){I0(fe>>>=0,"offset");const Ee=this[fe],_e=this[fe+7];Ee!==void 0&&_e!==void 0||A0(fe,this.length-8);const et=(Ee<<24)+65536*this[++fe]+256*this[++fe]+this[++fe];return(BigInt(et)<<BigInt(32))+BigInt(this[++fe]*16777216+65536*this[++fe]+256*this[++fe]+_e)}),C.prototype.readFloatLE=function(fe,Ee){return fe>>>=0,Ee||kt(fe,4,this.length),N.read(this,fe,!0,23,4)},C.prototype.readFloatBE=function(fe,Ee){return fe>>>=0,Ee||kt(fe,4,this.length),N.read(this,fe,!1,23,4)},C.prototype.readDoubleLE=function(fe,Ee){return fe>>>=0,Ee||kt(fe,8,this.length),N.read(this,fe,!0,52,8)},C.prototype.readDoubleBE=function(fe,Ee){return fe>>>=0,Ee||kt(fe,8,this.length),N.read(this,fe,!1,52,8)},C.prototype.writeUintLE=C.prototype.writeUIntLE=function(fe,Ee,_e,et){fe=+fe,Ee>>>=0,_e>>>=0,et||si(this,fe,Ee,_e,Math.pow(2,8*_e)-1,0);let dt=1,vt=0;for(this[Ee]=255&fe;++vt<_e&&(dt*=256);)this[Ee+vt]=fe/dt&255;return Ee+_e},C.prototype.writeUintBE=C.prototype.writeUIntBE=function(fe,Ee,_e,et){fe=+fe,Ee>>>=0,_e>>>=0,et||si(this,fe,Ee,_e,Math.pow(2,8*_e)-1,0);let dt=_e-1,vt=1;for(this[Ee+dt]=255&fe;--dt>=0&&(vt*=256);)this[Ee+dt]=fe/vt&255;return Ee+_e},C.prototype.writeUint8=C.prototype.writeUInt8=function(fe,Ee,_e){return fe=+fe,Ee>>>=0,_e||si(this,fe,Ee,1,255,0),this[Ee]=255&fe,Ee+1},C.prototype.writeUint16LE=C.prototype.writeUInt16LE=function(fe,Ee,_e){return fe=+fe,Ee>>>=0,_e||si(this,fe,Ee,2,65535,0),this[Ee]=255&fe,this[Ee+1]=fe>>>8,Ee+2},C.prototype.writeUint16BE=C.prototype.writeUInt16BE=function(fe,Ee,_e){return fe=+fe,Ee>>>=0,_e||si(this,fe,Ee,2,65535,0),this[Ee]=fe>>>8,this[Ee+1]=255&fe,Ee+2},C.prototype.writeUint32LE=C.prototype.writeUInt32LE=function(fe,Ee,_e){return fe=+fe,Ee>>>=0,_e||si(this,fe,Ee,4,4294967295,0),this[Ee+3]=fe>>>24,this[Ee+2]=fe>>>16,this[Ee+1]=fe>>>8,this[Ee]=255&fe,Ee+4},C.prototype.writeUint32BE=C.prototype.writeUInt32BE=function(fe,Ee,_e){return fe=+fe,Ee>>>=0,_e||si(this,fe,Ee,4,4294967295,0),this[Ee]=fe>>>24,this[Ee+1]=fe>>>16,this[Ee+2]=fe>>>8,this[Ee+3]=255&fe,Ee+4},C.prototype.writeBigUInt64LE=tn(function(fe,Ee=0){return _i(this,fe,Ee,BigInt(0),BigInt("0xffffffffffffffff"))}),C.prototype.writeBigUInt64BE=tn(function(fe,Ee=0){return Ri(this,fe,Ee,BigInt(0),BigInt("0xffffffffffffffff"))}),C.prototype.writeIntLE=function(fe,Ee,_e,et){if(fe=+fe,Ee>>>=0,!et){const zi=Math.pow(2,8*_e-1);si(this,fe,Ee,_e,zi-1,-zi)}let dt=0,vt=1,Yt=0;for(this[Ee]=255&fe;++dt<_e&&(vt*=256);)fe<0&&Yt===0&&this[Ee+dt-1]!==0&&(Yt=1),this[Ee+dt]=(fe/vt>>0)-Yt&255;return Ee+_e},C.prototype.writeIntBE=function(fe,Ee,_e,et){if(fe=+fe,Ee>>>=0,!et){const zi=Math.pow(2,8*_e-1);si(this,fe,Ee,_e,zi-1,-zi)}let dt=_e-1,vt=1,Yt=0;for(this[Ee+dt]=255&fe;--dt>=0&&(vt*=256);)fe<0&&Yt===0&&this[Ee+dt+1]!==0&&(Yt=1),this[Ee+dt]=(fe/vt>>0)-Yt&255;return Ee+_e},C.prototype.writeInt8=function(fe,Ee,_e){return fe=+fe,Ee>>>=0,_e||si(this,fe,Ee,1,127,-128),fe<0&&(fe=255+fe+1),this[Ee]=255&fe,Ee+1},C.prototype.writeInt16LE=function(fe,Ee,_e){return fe=+fe,Ee>>>=0,_e||si(this,fe,Ee,2,32767,-32768),this[Ee]=255&fe,this[Ee+1]=fe>>>8,Ee+2},C.prototype.writeInt16BE=function(fe,Ee,_e){return fe=+fe,Ee>>>=0,_e||si(this,fe,Ee,2,32767,-32768),this[Ee]=fe>>>8,this[Ee+1]=255&fe,Ee+2},C.prototype.writeInt32LE=function(fe,Ee,_e){return fe=+fe,Ee>>>=0,_e||si(this,fe,Ee,4,2147483647,-2147483648),this[Ee]=255&fe,this[Ee+1]=fe>>>8,this[Ee+2]=fe>>>16,this[Ee+3]=fe>>>24,Ee+4},C.prototype.writeInt32BE=function(fe,Ee,_e){return fe=+fe,Ee>>>=0,_e||si(this,fe,Ee,4,2147483647,-2147483648),fe<0&&(fe=4294967295+fe+1),this[Ee]=fe>>>24,this[Ee+1]=fe>>>16,this[Ee+2]=fe>>>8,this[Ee+3]=255&fe,Ee+4},C.prototype.writeBigInt64LE=tn(function(fe,Ee=0){return _i(this,fe,Ee,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),C.prototype.writeBigInt64BE=tn(function(fe,Ee=0){return Ri(this,fe,Ee,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),C.prototype.writeFloatLE=function(fe,Ee,_e){return Ki(this,fe,Ee,!0,_e)},C.prototype.writeFloatBE=function(fe,Ee,_e){return Ki(this,fe,Ee,!1,_e)},C.prototype.writeDoubleLE=function(fe,Ee,_e){return p0(this,fe,Ee,!0,_e)},C.prototype.writeDoubleBE=function(fe,Ee,_e){return p0(this,fe,Ee,!1,_e)},C.prototype.copy=function(fe,Ee,_e,et){if(!C.isBuffer(fe))throw new TypeError("argument should be a Buffer");if(_e||(_e=0),et||et===0||(et=this.length),Ee>=fe.length&&(Ee=fe.length),Ee||(Ee=0),et>0&&et<_e&&(et=_e),et===_e||fe.length===0||this.length===0)return 0;if(Ee<0)throw new RangeError("targetStart out of bounds");if(_e<0||_e>=this.length)throw new RangeError("Index out of range");if(et<0)throw new RangeError("sourceEnd out of bounds");et>this.length&&(et=this.length),fe.length-Ee<et-_e&&(et=fe.length-Ee+_e);const dt=et-_e;return this===fe&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Ee,_e,et):Uint8Array.prototype.set.call(fe,this.subarray(_e,et),Ee),dt},C.prototype.fill=function(fe,Ee,_e,et){if(typeof fe=="string"){if(typeof Ee=="string"?(et=Ee,Ee=0,_e=this.length):typeof _e=="string"&&(et=_e,_e=this.length),et!==void 0&&typeof et!="string")throw new TypeError("encoding must be a string");if(typeof et=="string"&&!C.isEncoding(et))throw new TypeError("Unknown encoding: "+et);if(fe.length===1){const vt=fe.charCodeAt(0);(et==="utf8"&&vt<128||et==="latin1")&&(fe=vt)}}else typeof fe=="number"?fe&=255:typeof fe=="boolean"&&(fe=Number(fe));if(Ee<0||this.length<Ee||this.length<_e)throw new RangeError("Out of range index");if(_e<=Ee)return this;let dt;if(Ee>>>=0,_e=_e===void 0?this.length:_e>>>0,fe||(fe=0),typeof fe=="number")for(dt=Ee;dt<_e;++dt)this[dt]=fe;else{const vt=C.isBuffer(fe)?fe:C.from(fe,et),Yt=vt.length;if(Yt===0)throw new TypeError('The value "'+fe+'" is invalid for argument "value"');for(dt=0;dt<_e-Ee;++dt)this[dt+Ee]=vt[dt%Yt]}return this};const ln={};function Ur(fe,Ee,_e){ln[fe]=class extends _e{constructor(){super(),Object.defineProperty(this,"message",{value:Ee.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${fe}]`,this.stack,delete this.name}get code(){return fe}set code(et){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:et,writable:!0})}toString(){return`${this.name} [${fe}]: ${this.message}`}}}function tr(fe){let Ee="",_e=fe.length;const et=fe[0]==="-"?1:0;for(;_e>=et+4;_e-=3)Ee=`_${fe.slice(_e-3,_e)}${Ee}`;return`${fe.slice(0,_e)}${Ee}`}function K0(fe,Ee,_e,et,dt,vt){if(fe>_e||fe<Ee){const Yt=typeof Ee=="bigint"?"n":"";let zi;throw zi=vt>3?Ee===0||Ee===BigInt(0)?`>= 0${Yt} and < 2${Yt} ** ${8*(vt+1)}${Yt}`:`>= -(2${Yt} ** ${8*(vt+1)-1}${Yt}) and < 2 ** ${8*(vt+1)-1}${Yt}`:`>= ${Ee}${Yt} and <= ${_e}${Yt}`,new ln.ERR_OUT_OF_RANGE("value",zi,fe)}(function(Yt,zi,cr){I0(zi,"offset"),Yt[zi]!==void 0&&Yt[zi+cr]!==void 0||A0(zi,Yt.length-(cr+1))})(et,dt,vt)}function I0(fe,Ee){if(typeof fe!="number")throw new ln.ERR_INVALID_ARG_TYPE(Ee,"number",fe)}function A0(fe,Ee,_e){throw Math.floor(fe)!==fe?(I0(fe,_e),new ln.ERR_OUT_OF_RANGE(_e||"offset","an integer",fe)):Ee<0?new ln.ERR_BUFFER_OUT_OF_BOUNDS:new ln.ERR_OUT_OF_RANGE(_e||"offset",`>= ${_e?1:0} and <= ${Ee}`,fe)}Ur("ERR_BUFFER_OUT_OF_BOUNDS",function(fe){return fe?`${fe} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ur("ERR_INVALID_ARG_TYPE",function(fe,Ee){return`The "${fe}" argument must be of type number. Received type ${typeof Ee}`},TypeError),Ur("ERR_OUT_OF_RANGE",function(fe,Ee,_e){let et=`The value of "${fe}" is out of range.`,dt=_e;return Number.isInteger(_e)&&Math.abs(_e)>4294967296?dt=tr(String(_e)):typeof _e=="bigint"&&(dt=String(_e),(_e>BigInt(2)**BigInt(32)||_e<-(BigInt(2)**BigInt(32)))&&(dt=tr(dt)),dt+="n"),et+=` It must be ${Ee}. Received ${dt}`,et},RangeError);const os=/[^+/0-9A-Za-z-_]/g;function J0(fe,Ee){let _e;Ee=Ee||1/0;const et=fe.length;let dt=null;const vt=[];for(let Yt=0;Yt<et;++Yt){if(_e=fe.charCodeAt(Yt),_e>55295&&_e<57344){if(!dt){if(_e>56319){(Ee-=3)>-1&&vt.push(239,191,189);continue}if(Yt+1===et){(Ee-=3)>-1&&vt.push(239,191,189);continue}dt=_e;continue}if(_e<56320){(Ee-=3)>-1&&vt.push(239,191,189),dt=_e;continue}_e=65536+(dt-55296<<10|_e-56320)}else dt&&(Ee-=3)>-1&&vt.push(239,191,189);if(dt=null,_e<128){if((Ee-=1)<0)break;vt.push(_e)}else if(_e<2048){if((Ee-=2)<0)break;vt.push(_e>>6|192,63&_e|128)}else if(_e<65536){if((Ee-=3)<0)break;vt.push(_e>>12|224,_e>>6&63|128,63&_e|128)}else{if(!(_e<1114112))throw new Error("Invalid code point");if((Ee-=4)<0)break;vt.push(_e>>18|240,_e>>12&63|128,_e>>6&63|128,63&_e|128)}}return vt}function as(fe){return B.toByteArray(function(Ee){if((Ee=(Ee=Ee.split("=")[0]).trim().replace(os,"")).length<2)return"";for(;Ee.length%4!=0;)Ee+="=";return Ee}(fe))}function R0(fe,Ee,_e,et){let dt;for(dt=0;dt<et&&!(dt+_e>=Ee.length||dt>=fe.length);++dt)Ee[dt+_e]=fe[dt];return dt}function Hn(fe,Ee){return fe instanceof Ee||fe!=null&&fe.constructor!=null&&fe.constructor.name!=null&&fe.constructor.name===Ee.name}function Z0(fe){return fe!=fe}const ls=function(){const fe="0123456789abcdef",Ee=new Array(256);for(let _e=0;_e<16;++_e){const et=16*_e;for(let dt=0;dt<16;++dt)Ee[et+dt]=fe[_e]+fe[dt]}return Ee}();function tn(fe){return typeof BigInt>"u"?Oe:fe}function Oe(){throw new Error("BigInt not supported")}},7705:M=>{"use strict";M.exports=function(E){var e=[];return e.toString=function(){return this.map(function(B){var N="",Q=B[5]!==void 0;return B[4]&&(N+="@supports (".concat(B[4],") {")),B[2]&&(N+="@media ".concat(B[2]," {")),Q&&(N+="@layer".concat(B[5].length>0?" ".concat(B[5]):""," {")),N+=E(B),Q&&(N+="}"),B[2]&&(N+="}"),B[4]&&(N+="}"),N}).join("")},e.i=function(B,N,Q,P,A){typeof B=="string"&&(B=[[null,B,void 0]]);var C={};if(Q)for(var V=0;V<this.length;V++){var z=this[V][0];z!=null&&(C[z]=!0)}for(var H=0;H<B.length;H++){var G=[].concat(B[H]);Q&&C[G[0]]||(A!==void 0&&(G[5]===void 0||(G[1]="@layer".concat(G[5].length>0?" ".concat(G[5]):""," {").concat(G[1],"}")),G[5]=A),N&&(G[2]&&(G[1]="@media ".concat(G[2]," {").concat(G[1],"}")),G[2]=N),P&&(G[4]?(G[1]="@supports (".concat(G[4],") {").concat(G[1],"}"),G[4]=P):G[4]="".concat(P)),e.push(G))}},e}},6742:M=>{"use strict";M.exports=function(E,e){return e||(e={}),E&&(E=String(E.__esModule?E.default:E),/^['"].*['"]$/.test(E)&&(E=E.slice(1,-1)),e.hash&&(E+=e.hash),/["'() \t\n]|(%20)/.test(E)||e.needQuotes?'"'.concat(E.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):E)}},4216:M=>{"use strict";M.exports=function(E){var e=E[1],B=E[3];if(!B)return e;if(typeof btoa=="function"){var N=btoa(unescape(encodeURIComponent(JSON.stringify(B)))),Q="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(N),P="/*# ".concat(Q," */");return[e].concat([P]).join(`
`)}return[e].join(`
`)}},2849:(M,E,e)=>{E.formatArgs=function(N){if(N[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+N[0]+(this.useColors?"%c ":" ")+"+"+M.exports.humanize(this.diff),!this.useColors)return;const Q="color: "+this.color;N.splice(1,0,Q,"color: inherit");let P=0,A=0;N[0].replace(/%[a-zA-Z%]/g,C=>{C!=="%%"&&(P++,C==="%c"&&(A=P))}),N.splice(A,0,Q)},E.save=function(N){try{N?E.storage.setItem("debug",N):E.storage.removeItem("debug")}catch{}},E.load=function(){let N;try{N=E.storage.getItem("debug")}catch{}return!N&&typeof process<"u"&&"env"in process&&(N=process.env.DEBUG),N},E.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer"&&!window.process.__nwjs)||(typeof navigator>"u"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},E.storage=function(){try{return localStorage}catch{}}(),E.destroy=(()=>{let N=!1;return()=>{N||(N=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),E.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],E.log=console.debug||console.log||(()=>{}),M.exports=e(6180)(E);const{formatters:B}=M.exports;B.j=function(N){try{return JSON.stringify(N)}catch(Q){return"[UnexpectedJSONParseError]: "+Q.message}}},6180:(M,E,e)=>{M.exports=function(B){function N(A){let C,V,z,H=null;function G(...$){if(!G.enabled)return;const k=G,K=Number(new Date),Z=K-(C||K);k.diff=Z,k.prev=C,k.curr=K,C=K,$[0]=N.coerce($[0]),typeof $[0]!="string"&&$.unshift("%O");let ee=0;$[0]=$[0].replace(/%([a-zA-Z%])/g,(he,ue)=>{if(he==="%%")return"%";ee++;const ve=N.formatters[ue];if(typeof ve=="function"){const be=$[ee];he=ve.call(k,be),$.splice(ee,1),ee--}return he}),N.formatArgs.call(k,$),(k.log||N.log).apply(k,$)}return G.namespace=A,G.useColors=N.useColors(),G.color=N.selectColor(A),G.extend=Q,G.destroy=N.destroy,Object.defineProperty(G,"enabled",{enumerable:!0,configurable:!1,get:()=>H!==null?H:(V!==N.namespaces&&(V=N.namespaces,z=N.enabled(A)),z),set:$=>{H=$}}),typeof N.init=="function"&&N.init(G),G}function Q(A,C){const V=N(this.namespace+(C===void 0?":":C)+A);return V.log=this.log,V}function P(A){return A.toString().substring(2,A.toString().length-2).replace(/\.\*\?$/,"*")}return N.debug=N,N.default=N,N.coerce=function(A){return A instanceof Error?A.stack||A.message:A},N.disable=function(){const A=[...N.names.map(P),...N.skips.map(P).map(C=>"-"+C)].join(",");return N.enable(""),A},N.enable=function(A){let C;N.save(A),N.namespaces=A,N.names=[],N.skips=[];const V=(typeof A=="string"?A:"").split(/[\s,]+/),z=V.length;for(C=0;C<z;C++)V[C]&&((A=V[C].replace(/\*/g,".*?"))[0]==="-"?N.skips.push(new RegExp("^"+A.slice(1)+"$")):N.names.push(new RegExp("^"+A+"$")))},N.enabled=function(A){if(A[A.length-1]==="*")return!0;let C,V;for(C=0,V=N.skips.length;C<V;C++)if(N.skips[C].test(A))return!1;for(C=0,V=N.names.length;C<V;C++)if(N.names[C].test(A))return!0;return!1},N.humanize=e(5440),N.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(B).forEach(A=>{N[A]=B[A]}),N.names=[],N.skips=[],N.formatters={},N.selectColor=function(A){let C=0;for(let V=0;V<A.length;V++)C=(C<<5)-C+A.charCodeAt(V),C|=0;return N.colors[Math.abs(C)%N.colors.length]},N.enable(N.load()),N}},1900:(M,E,e)=>{"use strict";var B=e(445),N=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;function P(C,V,z){var H=V[z];if(H!=null){if(N.call(C,z)&&(C[z]===void 0||C[z]===null))throw new TypeError("Cannot convert undefined or null to object ("+z+")");N.call(C,z)&&B(H)?C[z]=A(Object(C[z]),V[z]):C[z]=H}}function A(C,V){if(C===V)return C;for(var z in V=Object(V))N.call(V,z)&&P(C,V,z);if(Object.getOwnPropertySymbols)for(var H=Object.getOwnPropertySymbols(V),G=0;G<H.length;G++)Q.call(V,H[G])&&P(C,V,H[G]);return C}M.exports=function(C){C=function(z){if(z==null)throw new TypeError("Sources cannot be null or undefined");return Object(z)}(C);for(var V=1;V<arguments.length;V++)A(C,arguments[V]);return C}},4666:M=>{M.exports=function(E){switch(E){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},1192:(M,E,e)=>{var B;B=typeof window<"u"?window:e.g!==void 0?e.g:typeof self<"u"?self:{},M.exports=B},9350:(M,E)=>{E.read=function(e,B,N,Q,P){var A,C,V=8*P-Q-1,z=(1<<V)-1,H=z>>1,G=-7,$=N?P-1:0,k=N?-1:1,K=e[B+$];for($+=k,A=K&(1<<-G)-1,K>>=-G,G+=V;G>0;A=256*A+e[B+$],$+=k,G-=8);for(C=A&(1<<-G)-1,A>>=-G,G+=Q;G>0;C=256*C+e[B+$],$+=k,G-=8);if(A===0)A=1-H;else{if(A===z)return C?NaN:1/0*(K?-1:1);C+=Math.pow(2,Q),A-=H}return(K?-1:1)*C*Math.pow(2,A-Q)},E.write=function(e,B,N,Q,P,A){var C,V,z,H=8*A-P-1,G=(1<<H)-1,$=G>>1,k=P===23?Math.pow(2,-24)-Math.pow(2,-77):0,K=Q?0:A-1,Z=Q?1:-1,ee=B<0||B===0&&1/B<0?1:0;for(B=Math.abs(B),isNaN(B)||B===1/0?(V=isNaN(B)?1:0,C=G):(C=Math.floor(Math.log(B)/Math.LN2),B*(z=Math.pow(2,-C))<1&&(C--,z*=2),(B+=C+$>=1?k/z:k*Math.pow(2,1-$))*z>=2&&(C++,z/=2),C+$>=G?(V=0,C=G):C+$>=1?(V=(B*z-1)*Math.pow(2,P),C+=$):(V=B*Math.pow(2,$-1)*Math.pow(2,P),C=0));P>=8;e[N+K]=255&V,K+=Z,V/=256,P-=8);for(C=C<<P|V,H+=P;H>0;e[N+K]=255&C,K+=Z,C/=256,H-=8);e[N+K-Z]|=128*ee}},1826:M=>{function E(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}M.exports=function(e){return e!=null&&(E(e)||function(B){return typeof B.readFloatLE=="function"&&typeof B.slice=="function"&&E(B.slice(0,0))}(e)||!!e._isBuffer)}},6534:M=>{M.exports=function(e){if(!e)return!1;var B=E.call(e);return B==="[object Function]"||typeof e=="function"&&B!=="[object RegExp]"||typeof window<"u"&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var E=Object.prototype.toString},445:M=>{"use strict";M.exports=function(E){var e=typeof E;return E!==null&&(e==="object"||e==="function")}},7510:(M,E,e)=>{var B=e(9443),N=e(2786),Q=e(3205),P=["x","e","a","o","n","s","r","c","u","m","v","w","z"],A=["m","w"],C=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],V=9,z=32;function H(Z){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(Z)}function G(Z){return new Function(["return function "+Z+"() {","  return this._"+Z,"}"].join(`
`))()}function $(Z,ee){if(!Z.chars||Z.chars.length===0)return null;var he=K(Z.chars,ee);return he>=0?Z.chars[he]:null}function k(Z,ee,he){if(!Z.kernings||Z.kernings.length===0)return 0;for(var ue=Z.kernings,ve=0;ve<ue.length;ve++){var be=ue[ve];if(be.first===ee&&be.second===he)return be.amount}return 0}function K(Z,ee,he){for(var ue=he=he||0;ue<Z.length;ue++)if(Z[ue].id===ee)return ue;return-1}M.exports=function(Z){return new H(Z)},H.prototype.update=function(Z){if(Z=N({measure:this._measure},Z),this._opt=Z,this._opt.tabSize=Q(this._opt.tabSize,4),!Z.font)throw new Error("must provide a valid bitmap font");var ee=this.glyphs,he=Z.text||"",ue=Z.font;this._setupSpaceGlyphs(ue);var ve=B.lines(he,Z),be=Z.width||0;ee.length=0;var Te=ve.reduce(function(kt,si){return Math.max(kt,si.width,be)},0),ye=0,De=0,Ce=Q(Z.lineHeight,ue.common.lineHeight),Re=ue.common.base,Qe=Ce-Re,ot=Z.letterSpacing||0,Je=Ce*ve.length-Qe,Mt=function(kt){return kt==="center"?1:kt==="right"?2:0}(this._opt.align);De-=Je,this._width=Te,this._height=Je,this._descender=Ce-Re,this._baseline=Re,this._xHeight=function(kt){for(var si=0;si<P.length;si++){var _i=P[si].charCodeAt(0),Ri=K(kt.chars,_i);if(Ri>=0)return kt.chars[Ri].height}return 0}(ue),this._capHeight=function(kt){for(var si=0;si<C.length;si++){var _i=C[si].charCodeAt(0),Ri=K(kt.chars,_i);if(Ri>=0)return kt.chars[Ri].height}return 0}(ue),this._lineHeight=Ce,this._ascender=Ce-Qe-this._xHeight;var Zt=this;ve.forEach(function(kt,si){for(var _i,Ri=kt.start,er=kt.end,Ki=kt.width,p0=Ri;p0<er;p0++){var ln=he.charCodeAt(p0),Ur=Zt.getGlyph(ue,ln);if(Ur){_i&&(ye+=k(ue,_i.id,Ur.id));var tr=ye;Mt===1?tr+=(Te-Ki)/2:Mt===2&&(tr+=Te-Ki),ee.push({position:[tr,De],data:Ur,index:p0,line:si}),ye+=Ur.xadvance+ot,_i=Ur}}De+=Ce,ye=0}),this._linesTotal=ve.length},H.prototype._setupSpaceGlyphs=function(Z){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,Z.chars&&Z.chars.length!==0){var ee=$(Z,z)||function(ue){for(var ve=0;ve<A.length;ve++){var be=A[ve].charCodeAt(0),Te=K(ue.chars,be);if(Te>=0)return ue.chars[Te]}return 0}(Z)||Z.chars[0],he=this._opt.tabSize*ee.xadvance;this._fallbackSpaceGlyph=ee,this._fallbackTabGlyph=N(ee,{x:0,y:0,xadvance:he,id:V,xoffset:0,yoffset:0,width:0,height:0})}},H.prototype.getGlyph=function(Z,ee){return $(Z,ee)||(ee===V?this._fallbackTabGlyph:ee===z?this._fallbackSpaceGlyph:null)},H.prototype.computeMetrics=function(Z,ee,he,ue){var ve,be=this._opt.letterSpacing||0,Te=this._opt.font,ye=0,De=0,Ce=0;if(!Te.chars||Te.chars.length===0)return{start:ee,end:ee,width:0};he=Math.min(Z.length,he);for(var Re=ee;Re<he;Re++){var Qe,ot=Z.charCodeAt(Re);if(Qe=this.getGlyph(Te,ot)){Qe.xoffset;var Je=(ye+=ve?k(Te,ve.id,Qe.id):0)+Qe.xadvance+be,Mt=ye+Qe.width;if(Mt>=ue||Je>=ue)break;ye=Je,De=Mt,ve=Qe}Ce++}return ve&&(De+=ve.xoffset),{start:ee,end:ee+Ce,width:De}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach(function(Z){Object.defineProperty(H.prototype,Z,{get:G(Z),configurable:!0})})},1880:(M,E,e)=>{var B=e(5851).lW,N=e(7377),Q=function(){},P=e(5551),A=e(7096),C=e(1683),V=e(7804),z=e(2786),H=self.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest;M.exports=function(G,$){$=typeof $=="function"?$:Q,typeof G=="string"?G={uri:G}:G||(G={}),G.binary&&(G=function(k){if(H)return z(k,{responseType:"arraybuffer"});if(self.XMLHttpRequest===void 0)throw new Error("your browser does not support XHR loading");var K=new self.XMLHttpRequest;return K.overrideMimeType("text/plain; charset=x-user-defined"),z({xhr:K},k)}(G)),N(G,function(k,K,Z){if(k)return $(k);if(!/^2/.test(K.statusCode))return $(new Error("http status code: "+K.statusCode));if(!Z)return $(new Error("no body result"));var ee,he,ue=!1;if(ee=Z,Object.prototype.toString.call(ee)==="[object ArrayBuffer]"){var ve=new Uint8Array(Z);Z=B.from(ve,"binary")}V(Z)&&(ue=!0,typeof Z=="string"&&(Z=B.from(Z,"binary"))),ue||(B.isBuffer(Z)&&(Z=Z.toString(G.encoding)),Z=Z.trim());try{var be=K.headers["content-type"];he=ue?C(Z):/json/.test(be)||Z.charAt(0)==="{"?JSON.parse(Z):/xml/.test(be)||Z.charAt(0)==="<"?A(Z):P(Z)}catch(Te){$(new Error("error parsing font "+Te.message)),$=Q}$(null,he)})}},7804:(M,E,e)=>{var B=e(5851).lW,N=e(5286),Q=B.from([66,77,70,3]);M.exports=function(P){return typeof P=="string"?P.substring(0,3)==="BMF":P.length>4&&N(P.slice(0,4),Q)}},5440:M=>{var E=1e3,e=60*E,B=60*e,N=24*B;function Q(P,A,C,V){var z=A>=1.5*C;return Math.round(P/C)+" "+V+(z?"s":"")}M.exports=function(P,A){A=A||{};var C,V,z=typeof P;if(z==="string"&&P.length>0)return function(H){if(!((H=String(H)).length>100)){var G=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(H);if(G){var $=parseFloat(G[1]);switch((G[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*$;case"weeks":case"week":case"w":return 6048e5*$;case"days":case"day":case"d":return $*N;case"hours":case"hour":case"hrs":case"hr":case"h":return $*B;case"minutes":case"minute":case"mins":case"min":case"m":return $*e;case"seconds":case"second":case"secs":case"sec":case"s":return $*E;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return $;default:return}}}}(P);if(z==="number"&&isFinite(P))return A.long?(C=P,(V=Math.abs(C))>=N?Q(C,V,N,"day"):V>=B?Q(C,V,B,"hour"):V>=e?Q(C,V,e,"minute"):V>=E?Q(C,V,E,"second"):C+" ms"):function(H){var G=Math.abs(H);return G>=N?Math.round(H/N)+"d":G>=B?Math.round(H/B)+"h":G>=e?Math.round(H/e)+"m":G>=E?Math.round(H/E)+"s":H+"ms"}(P);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(P))}},5551:M=>{function E(B,N){if(!(B=B.replace(/\t+/g," ").trim()))return null;var Q=B.indexOf(" ");if(Q===-1)throw new Error("no named row at line "+N);var P=B.substring(0,Q);B=(B=(B=(B=B.substring(Q+1)).replace(/letter=[\'\"]\S+[\'\"]/gi,"")).split("=")).map(function(H){return H.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var A=[],C=0;C<B.length;C++){var V=B[C];C===0?A.push({key:V[0],data:""}):C===B.length-1?A[A.length-1].data=e(V[0]):(A[A.length-1].data=e(V[0]),A.push({key:V[1],data:""}))}var z={key:P,data:{}};return A.forEach(function(H){z.data[H.key]=H.data}),z}function e(B){return B&&B.length!==0?B.indexOf('"')===0||B.indexOf("'")===0?B.substring(1,B.length-1):B.indexOf(",")!==-1?function(N){return N.split(",").map(function(Q){return parseInt(Q,10)})}(B):parseInt(B,10):""}M.exports=function(B){if(!B)throw new Error("no data provided");var N={pages:[],chars:[],kernings:[]},Q=(B=B.toString().trim()).split(/\r\n?|\n/g);if(Q.length===0)throw new Error("no data in BMFont file");for(var P=0;P<Q.length;P++){var A=E(Q[P],P);if(A)if(A.key==="page"){if(typeof A.data.id!="number")throw new Error("malformed file at line "+P+" -- needs page id=N");if(typeof A.data.file!="string")throw new Error("malformed file at line "+P+' -- needs page file="path"');N.pages[A.data.id]=A.data.file}else A.key==="chars"||A.key==="kernings"||(A.key==="char"?N.chars.push(A.data):A.key==="kerning"?N.kernings.push(A.data):N[A.key]=A.data)}return N}},1683:M=>{var E=[66,77,70];function e(N,Q,P){if(P>Q.length-1)return 0;var A=Q.readUInt8(P++),C=Q.readInt32LE(P);switch(P+=4,A){case 1:N.info=function(V,z){var H={};H.size=V.readInt16LE(z);var G=V.readUInt8(z+2);return H.smooth=G>>7&1,H.unicode=G>>6&1,H.italic=G>>5&1,H.bold=G>>4&1,G>>3&1&&(H.fixedHeight=1),H.charset=V.readUInt8(z+3)||"",H.stretchH=V.readUInt16LE(z+4),H.aa=V.readUInt8(z+6),H.padding=[V.readInt8(z+7),V.readInt8(z+8),V.readInt8(z+9),V.readInt8(z+10)],H.spacing=[V.readInt8(z+11),V.readInt8(z+12)],H.outline=V.readUInt8(z+13),H.face=function($,k){return B($,k).toString("utf8")}(V,z+14),H}(Q,P);break;case 2:N.common=function(V,z){var H={};return H.lineHeight=V.readUInt16LE(z),H.base=V.readUInt16LE(z+2),H.scaleW=V.readUInt16LE(z+4),H.scaleH=V.readUInt16LE(z+6),H.pages=V.readUInt16LE(z+8),V.readUInt8(z+10),H.packed=0,H.alphaChnl=V.readUInt8(z+11),H.redChnl=V.readUInt8(z+12),H.greenChnl=V.readUInt8(z+13),H.blueChnl=V.readUInt8(z+14),H}(Q,P);break;case 3:N.pages=function(V,z,H){for(var G=[],$=B(V,z),k=$.length+1,K=H/k,Z=0;Z<K;Z++)G[Z]=V.slice(z,z+$.length).toString("utf8"),z+=k;return G}(Q,P,C);break;case 4:N.chars=function(V,z,H){for(var G=[],$=H/20,k=0;k<$;k++){var K={},Z=20*k;K.id=V.readUInt32LE(z+0+Z),K.x=V.readUInt16LE(z+4+Z),K.y=V.readUInt16LE(z+6+Z),K.width=V.readUInt16LE(z+8+Z),K.height=V.readUInt16LE(z+10+Z),K.xoffset=V.readInt16LE(z+12+Z),K.yoffset=V.readInt16LE(z+14+Z),K.xadvance=V.readInt16LE(z+16+Z),K.page=V.readUInt8(z+18+Z),K.chnl=V.readUInt8(z+19+Z),G[k]=K}return G}(Q,P,C);break;case 5:N.kernings=function(V,z,H){for(var G=[],$=H/10,k=0;k<$;k++){var K={},Z=10*k;K.first=V.readUInt32LE(z+0+Z),K.second=V.readUInt32LE(z+4+Z),K.amount=V.readInt16LE(z+8+Z),G[k]=K}return G}(Q,P,C)}return 5+C}function B(N,Q){for(var P=Q;P<N.length&&N[P]!==0;P++);return N.slice(Q,P)}M.exports=function(N){if(N.length<6)throw new Error("invalid buffer length for BMFont");var Q=E.every(function(V,z){return N.readUInt8(z)===V});if(!Q)throw new Error("BMFont missing BMF byte header");var P=3;if(N.readUInt8(P++)>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var A={kernings:[],chars:[]},C=0;C<5;C++)P+=e(A,N,P);return A}},7096:(M,E,e)=>{var B=e(3102),N=e(6774),Q={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};function P(A){var C=function(V){for(var z=[],H=0;H<V.attributes.length;H++)z.push(V.attributes[H]);return z}(A);return C.reduce(function(V,z){var H;return V[H=z.nodeName,Q[H.toLowerCase()]||H]=z.nodeValue,V},{})}M.exports=function(A){A=A.toString();var C=N(A),V={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(Z){var ee=C.getElementsByTagName(Z)[0];ee&&(V[Z]=B(P(ee)))});var z=C.getElementsByTagName("pages")[0];if(!z)throw new Error("malformed file -- no <pages> element");for(var H=z.getElementsByTagName("page"),G=0;G<H.length;G++){var $=H[G],k=parseInt($.getAttribute("id"),10),K=$.getAttribute("file");if(isNaN(k))throw new Error('malformed file -- page "id" attribute is NaN');if(!K)throw new Error('malformed file -- needs page "file" attribute');V.pages[parseInt(k,10)]=K}return["chars","kernings"].forEach(function(Z){var ee=C.getElementsByTagName(Z)[0];if(ee)for(var he=Z.substring(0,Z.length-1),ue=ee.getElementsByTagName(he),ve=0;ve<ue.length;ve++){var be=ue[ve];V[Z].push(B(P(be)))}}),V}},3102:M=>{var E="chasrset";M.exports=function(e){for(var B in E in e&&(e.charset=e[E],delete e[E]),e)B!=="face"&&B!=="charset"&&(e[B]=B==="padding"||B==="spacing"?e[B].split(",").map(function(N){return parseInt(N,10)}):parseInt(e[B],10));return e}},9069:M=>{var E=function(e){return e.replace(/^\s+|\s+$/g,"")};M.exports=function(e){if(!e)return{};for(var B,N={},Q=E(e).split(`
`),P=0;P<Q.length;P++){var A=Q[P],C=A.indexOf(":"),V=E(A.slice(0,C)).toLowerCase(),z=E(A.slice(C+1));N[V]===void 0?N[V]=z:(B=N[V],Object.prototype.toString.call(B)==="[object Array]"?N[V].push(z):N[V]=[N[V],z])}return N}},4502:(M,E,e)=>{var B=e(4666),N=e(6793),Q=e(1826),P=[0,2,3],A=[2,1,3];M.exports=function(C,V){C&&(N(C)||Q(C))||(V=C||{},C=null);for(var z=typeof(V=typeof V=="number"?{count:V}:V||{}).type=="string"?V.type:"uint16",H=typeof V.count=="number"?V.count:1,G=V.start||0,$=V.clockwise!==!1?P:A,k=$[0],K=$[1],Z=$[2],ee=6*H,he=C||new(B(z))(ee),ue=0,ve=0;ue<ee;ue+=6,ve+=4){var be=ue+G;he[be+0]=ve+0,he[be+1]=ve+1,he[be+2]=ve+2,he[be+3]=ve+k,he[be+4]=ve+K,he[be+5]=ve+Z}return he}},2446:(M,E,e)=>{"use strict";e.d(E,{Z:()=>yn});var B={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},N={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},Q=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],P={CSS:{},springs:{}};function A(He,Ke,pt){return Math.min(Math.max(He,Ke),pt)}function C(He,Ke){return He.indexOf(Ke)>-1}function V(He,Ke){return He.apply(null,Ke)}var z=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,H=/^rgb/,G=/^hsl/,$={arr:function(He){return Array.isArray(He)},obj:function(He){return C(Object.prototype.toString.call(He),"Object")},pth:function(He){return $.obj(He)&&He.hasOwnProperty("totalLength")},svg:function(He){return He instanceof SVGElement},inp:function(He){return He instanceof HTMLInputElement},dom:function(He){return He.nodeType||$.svg(He)},str:function(He){return typeof He=="string"},fnc:function(He){return typeof He=="function"},und:function(He){return He===void 0},hex:function(He){return z.test(He)},rgb:function(He){return H.test(He)},hsl:function(He){return G.test(He)},col:function(He){return $.hex(He)||$.rgb(He)||$.hsl(He)},key:function(He){return!B.hasOwnProperty(He)&&!N.hasOwnProperty(He)&&He!=="targets"&&He!=="keyframes"}},k=/\(([^)]+)\)/;function K(He){var Ke=k.exec(He);return Ke?Ke[1].split(",").map(function(pt){return parseFloat(pt)}):[]}function Z(He,Ke){var pt=K(He),Xt=A($.und(pt[0])?1:pt[0],.1,100),Kt=A($.und(pt[1])?100:pt[1],.1,100),Bt=A($.und(pt[2])?10:pt[2],.1,100),ti=A($.und(pt[3])?0:pt[3],.1,100),Wt=Math.sqrt(Kt/Xt),ui=Bt/(2*Math.sqrt(Kt*Xt)),Ut=ui<1?Wt*Math.sqrt(1-ui*ui):0,st=ui<1?(ui*Wt-ti)/Ut:-ti+Wt;function dr(Di){var Mi=Ke?Ke*Di/1e3:Di;return Mi=ui<1?Math.exp(-Mi*ui*Wt)*(1*Math.cos(Ut*Mi)+st*Math.sin(Ut*Mi)):(1+st*Mi)*Math.exp(-Mi*Wt),Di===0||Di===1?Di:1-Mi}return Ke?dr:function(){var Di=P.springs[He];if(Di)return Di;for(var Mi=.16666666666666666,Ir=0,Vi=0;;)if(dr(Ir+=Mi)===1){if(++Vi>=16)break}else Vi=0;var _r=Ir*Mi*1e3;return P.springs[He]=_r,_r}}function ee(He,Ke){He===void 0&&(He=1),Ke===void 0&&(Ke=.5);var pt=A(He,1,10),Xt=A(Ke,.1,2);return function(Kt){return Kt===0||Kt===1?Kt:-pt*Math.pow(2,10*(Kt-1))*Math.sin((Kt-1-Xt/(2*Math.PI)*Math.asin(1/pt))*(2*Math.PI)/Xt)}}function he(He){return He===void 0&&(He=10),function(Ke){return Math.round(Ke*He)*(1/He)}}var ue=function(){var He=.1;function Ke(ti,Wt){return 1-3*Wt+3*ti}function pt(ti,Wt){return 3*Wt-6*ti}function Xt(ti){return 3*ti}function Kt(ti,Wt,ui){return((Ke(Wt,ui)*ti+pt(Wt,ui))*ti+Xt(Wt))*ti}function Bt(ti,Wt,ui){return 3*Ke(Wt,ui)*ti*ti+2*pt(Wt,ui)*ti+Xt(Wt)}return function(ti,Wt,ui,Ut){if(0<=ti&&ti<=1&&0<=ui&&ui<=1){var st=new Float32Array(11);if(ti!==Wt||ui!==Ut)for(var dr=0;dr<11;++dr)st[dr]=Kt(dr*He,ti,ui);return function(Di){return ti===Wt&&ui===Ut||Di===0||Di===1?Di:Kt(function(Mi){for(var Ir=0,Vi=1;Vi!==10&&st[Vi]<=Mi;++Vi)Ir+=He;--Vi;var _r=Ir+(Mi-st[Vi])/(st[Vi+1]-st[Vi])*He,Li=Bt(_r,ti,ui);return Li>=.001?function(wi,Ji,Qr,ki){for(var Hr=0;Hr<4;++Hr){var Xr=Bt(Ji,Qr,ki);if(Xr===0)return Ji;Ji-=(Kt(Ji,Qr,ki)-wi)/Xr}return Ji}(Mi,_r,ti,ui):Li===0?_r:function(wi,Ji,Qr,ki,Hr){var Xr,Yr,gr=0;do(Xr=Kt(Yr=Ji+(Qr-Ji)/2,ki,Hr)-wi)>0?Qr=Yr:Ji=Yr;while(Math.abs(Xr)>1e-7&&++gr<10);return Yr}(Mi,Ir,Ir+He,ti,ui)}(Di),Wt,Ut)}}}}(),ve=function(){var He=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back","Elastic"],Ke={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],ee],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(ti,Wt){return function(ui){return 1-ee(ti,Wt)(1-ui)}}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(ti,Wt){return function(ui){return ui<.5?ee(ti,Wt)(2*ui)/2:1-ee(ti,Wt)(-2*ui+2)/2}}]},pt={linear:[.25,.25,.75,.75]};for(var Xt in Ke)for(var Kt=0,Bt=Ke[Xt].length;Kt<Bt;Kt++)pt["ease"+Xt+He[Kt]]=Ke[Xt][Kt];return pt}();function be(He,Ke){if($.fnc(He))return He;var pt=He.split("(")[0],Xt=ve[pt],Kt=K(He);switch(pt){case"spring":return Z(He,Ke);case"cubicBezier":return V(ue,Kt);case"steps":return V(he,Kt);default:return $.fnc(Xt)?V(Xt,Kt):V(ue,Xt)}}function Te(He){try{return document.querySelectorAll(He)}catch{return}}var ye=[];function De(He,Ke){for(var pt=ye,Xt=He.length,Kt=arguments.length>=2?arguments[1]:void 0,Bt=0;Bt<Xt;Bt++)if(Bt in He){var ti=He[Bt];Ke.call(Kt,ti,Bt,He)&&pt.push(ti)}return(ye=He).length=0,pt}function Ce(He,Ke){Ke||(Ke=[]);for(var pt=0,Xt=He.length;pt<Xt;pt++){var Kt=He[pt];Array.isArray(Kt)?Ce(Kt,Ke):Ke.push(Kt)}return Ke}function Re(He){return $.arr(He)?He:($.str(He)&&(He=Te(He)||He),He instanceof NodeList||He instanceof HTMLCollection?[].slice.call(He):[He])}function Qe(He,Ke){return He.some(function(pt){return pt===Ke})}function ot(He){var Ke={};for(var pt in He)Ke[pt]=He[pt];return Ke}function Je(He,Ke){var pt=ot(He);for(var Xt in He)pt[Xt]=Ke.hasOwnProperty(Xt)?Ke[Xt]:He[Xt];return pt}function Mt(He,Ke){var pt=ot(He);for(var Xt in Ke)pt[Xt]=$.und(He[Xt])?Ke[Xt]:He[Xt];return pt}var Zt=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g,kt=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,si=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,_i=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g,Ri=/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g,er=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/;function Ki(He){var Ke=er.exec(He);if(Ke)return Ke[2]}function p0(He,Ke){return $.fnc(He)?He(Ke.target,Ke.id,Ke.total):He}function ln(He,Ke){return He.getAttribute(Ke)}function Ur(He,Ke,pt){if(Qe([pt,"deg","rad","turn"],Ki(Ke)))return Ke;var Xt=P.CSS[Ke+pt];if(!$.und(Xt))return Xt;var Kt=document.createElement(He.tagName),Bt=He.parentNode&&He.parentNode!==document?He.parentNode:document.body;Bt.appendChild(Kt),Kt.style.position="absolute",Kt.style.width=100+pt;var ti=100/Kt.offsetWidth;Bt.removeChild(Kt);var Wt=ti*parseFloat(Ke);return P.CSS[Ke+pt]=Wt,Wt}function tr(He,Ke,pt){if(Ke in He.style){var Xt=Ke.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Kt=He.style[Ke]||getComputedStyle(He).getPropertyValue(Xt)||"0";return pt?Ur(He,Kt,pt):Kt}}function K0(He,Ke){return $.dom(He)&&!$.inp(He)&&(ln(He,Ke)||$.svg(He)&&He[Ke])?"attribute":$.dom(He)&&Qe(Q,Ke)?"transform":$.dom(He)&&Ke!=="transform"&&tr(He,Ke)?"css":He[Ke]!=null?"object":void 0}var I0=/(\w+)\(([^)]*)\)/g;function A0(He){if($.dom(He)){for(var Ke,pt=He.style.transform||"",Xt=new Map;Ke=I0.exec(pt);)Xt.set(Ke[1],Ke[2]);return Xt}}function os(He,Ke,pt,Xt){switch(K0(He,Ke)){case"transform":return function(Kt,Bt,ti,Wt){var ui=C(Bt,"scale")?1:0+function(st){return C(st,"translate")||st==="perspective"?"px":C(st,"rotate")||C(st,"skew")?"deg":void 0}(Bt),Ut=A0(Kt).get(Bt)||ui;return ti&&(ti.transforms.list.set(Bt,Ut),ti.transforms.last=Bt),Wt?Ur(Kt,Ut,Wt):Ut}(He,Ke,Xt,pt);case"css":return tr(He,Ke,pt);case"attribute":return ln(He,Ke);default:return He[Ke]||0}}var J0=/^(\*=|\+=|-=)/;function as(He,Ke){var pt=J0.exec(He);if(!pt)return He;var Xt=Ki(He)||0,Kt=parseFloat(Ke),Bt=parseFloat(He.replace(pt[0],""));switch(pt[0][0]){case"+":return Kt+Bt+Xt;case"-":return Kt-Bt+Xt;case"*":return Kt*Bt+Xt}}var R0=/\s/g;function Hn(He,Ke){if($.col(He))return function(Kt){return $.rgb(Kt)?(Bt=Kt,(ti=Zt.exec(Bt))?"rgba("+ti[1]+",1)":Bt):$.hex(Kt)?function(Wt){var ui=Wt.replace(kt,function(st,dr,Di,Mi){return dr+dr+Di+Di+Mi+Mi}),Ut=si.exec(ui);return"rgba("+parseInt(Ut[1],16)+","+parseInt(Ut[2],16)+","+parseInt(Ut[3],16)+",1)"}(Kt):$.hsl(Kt)?function(Wt){var ui,Ut,st,dr=_i.exec(Wt)||Ri.exec(Wt),Di=parseInt(dr[1],10)/360,Mi=parseInt(dr[2],10)/100,Ir=parseInt(dr[3],10)/100,Vi=dr[4]||1;function _r(Ji,Qr,ki){return ki<0&&(ki+=1),ki>1&&(ki-=1),ki<.16666666666666666?Ji+6*(Qr-Ji)*ki:ki<.5?Qr:ki<.6666666666666666?Ji+(Qr-Ji)*(.6666666666666666-ki)*6:Ji}if(Mi==0)ui=Ut=st=Ir;else{var Li=Ir<.5?Ir*(1+Mi):Ir+Mi-Ir*Mi,wi=2*Ir-Li;ui=_r(wi,Li,Di+.3333333333333333),Ut=_r(wi,Li,Di),st=_r(wi,Li,Di-.3333333333333333)}return"rgba("+255*ui+","+255*Ut+","+255*st+","+Vi+")"}(Kt):void 0;var Bt,ti}(He);var pt=Ki(He),Xt=pt?He.substr(0,He.length-pt.length):He;return Ke&&!R0.test(He)?Xt+Ke:Xt}function Z0(He,Ke){return Math.sqrt(Math.pow(Ke.x-He.x,2)+Math.pow(Ke.y-He.y,2))}function ls(He){for(var Ke,pt=He.points,Xt=0,Kt=0;Kt<pt.numberOfItems;Kt++){var Bt=pt.getItem(Kt);Kt>0&&(Xt+=Z0(Ke,Bt)),Ke=Bt}return Xt}function tn(He){if(He.getTotalLength)return He.getTotalLength();switch(He.tagName.toLowerCase()){case"circle":return function(Ke){return 2*Math.PI*ln(Ke,"r")}(He);case"rect":return function(Ke){return 2*ln(Ke,"width")+2*ln(Ke,"height")}(He);case"line":return function(Ke){return Z0({x:ln(Ke,"x1"),y:ln(Ke,"y1")},{x:ln(Ke,"x2"),y:ln(Ke,"y2")})}(He);case"polyline":return ls(He);case"polygon":return function(Ke){var pt=Ke.points;return ls(Ke)+Z0(pt.getItem(pt.numberOfItems-1),pt.getItem(0))}(He)}}function Oe(He,Ke){var pt=Ke||{},Xt=pt.el||function(Ut){for(var st=Ut.parentNode;$.svg(st)&&(st=st.parentNode,$.svg(st.parentNode)););return st}(He),Kt=Xt.getBoundingClientRect(),Bt=ln(Xt,"viewBox"),ti=Kt.width,Wt=Kt.height,ui=pt.viewBox||(Bt?Bt.split(" "):[0,0,ti,Wt]);return{el:Xt,viewBox:ui,x:ui[0]/1,y:ui[1]/1,w:ti/ui[2],h:Wt/ui[3]}}function fe(He,Ke){function pt(Wt){Wt===void 0&&(Wt=0);var ui=Ke+Wt>=1?Ke+Wt:0;return He.el.getPointAtLength(ui)}var Xt=Oe(He.el,He.svg),Kt=pt(),Bt=pt(-1),ti=pt(1);switch(He.property){case"x":return(Kt.x-Xt.x)*Xt.w;case"y":return(Kt.y-Xt.y)*Xt.h;case"angle":return 180*Math.atan2(ti.y-Bt.y,ti.x-Bt.x)/Math.PI}}var Ee=/-?\d*\.?\d+/g;function _e(He,Ke){var pt=Hn($.pth(He)?He.totalLength:He,Ke)+"";return{original:pt,numbers:pt.match(Ee)?pt.match(Ee).map(Number):[0],strings:$.str(He)||Ke?pt.split(Ee):[]}}function et(He){return De(He?Ce($.arr(He)?He.map(Re):Re(He)):[],function(Ke,pt,Xt){return Xt.indexOf(Ke)===pt})}function dt(He){var Ke=et(He);return Ke.map(function(pt,Xt){return{target:pt,id:Xt,total:Ke.length,transforms:{list:A0(pt)}}})}var vt=/^spring/;function Yt(He,Ke){var pt=ot(Ke);if(vt.test(pt.easing)&&(pt.duration=Z(pt.easing)),$.arr(He)){var Xt=He.length;Xt!==2||$.obj(He[0])?$.fnc(Ke.duration)||(pt.duration=Ke.duration/Xt):He={value:He}}var Kt=$.arr(He)?He:[He];return Kt.map(function(Bt,ti){var Wt=$.obj(Bt)&&!$.pth(Bt)?Bt:{value:Bt};return $.und(Wt.delay)&&(Wt.delay=ti?0:Ke.delay),$.und(Wt.endDelay)&&(Wt.endDelay=ti===Kt.length-1?Ke.endDelay:0),Wt}).map(function(Bt){return Mt(Bt,pt)})}var zi={css:function(He,Ke,pt){return He.style[Ke]=pt},attribute:function(He,Ke,pt){return He.setAttribute(Ke,pt)},object:function(He,Ke,pt){return He[Ke]=pt},transform:function(He,Ke,pt,Xt,Kt){if(Xt.list.set(Ke,pt),Ke===Xt.last||Kt){var Bt="";Xt.list.forEach(function(ti,Wt){Bt+=Wt+"("+ti+") "}),He.style.transform=Bt}}};function cr(He,Ke){for(var pt=dt(He),Xt=0,Kt=pt.length;Xt<Kt;Xt++){var Bt=pt[Xt];for(var ti in Ke){var Wt=p0(Ke[ti],Bt),ui=Bt.target,Ut=Ki(Wt),st=os(ui,ti,Ut,Bt),dr=as(Hn(Wt,Ut||Ki(st)),st),Di=K0(ui,ti);zi[Di](ui,ti,dr,Bt.transforms,!0)}}}function qr(He,Ke){return De(Ce(He.map(function(pt){return Ke.map(function(Xt){return function(Kt,Bt){var ti=K0(Kt.target,Bt.name);if(ti){var Wt=function(Ut,st){var dr;return Ut.tweens.map(function(Di){var Mi=function(Hr,Xr){var Yr={};for(var gr in Hr){var ir=p0(Hr[gr],Xr);$.arr(ir)&&(ir=ir.map(function(Fn){return p0(Fn,Xr)})).length===1&&(ir=ir[0]),Yr[gr]=ir}return Yr.duration=parseFloat(Yr.duration),Yr.delay=parseFloat(Yr.delay),Yr}(Di,st),Ir=Mi.value,Vi=$.arr(Ir)?Ir[1]:Ir,_r=Ki(Vi),Li=os(st.target,Ut.name,_r,st),wi=dr?dr.to.original:Li,Ji=$.arr(Ir)?Ir[0]:wi,Qr=Ki(Ji)||Ki(Li),ki=_r||Qr;return $.und(Vi)&&(Vi=wi),Mi.from=_e(Ji,ki),Mi.to=_e(as(Vi,Ji),ki),Mi.start=dr?dr.end:0,Mi.end=Mi.start+Mi.delay+Mi.duration+Mi.endDelay,Mi.easing=be(Mi.easing,Mi.duration),Mi.isPath=$.pth(Ir),Mi.isColor=$.col(Mi.from.original),Mi.isColor&&(Mi.round=1),dr=Mi,Mi})}(Bt,Kt),ui=Wt[Wt.length-1];return{type:ti,property:Bt.name,animatable:Kt,tweens:Wt,duration:ui.end,delay:Wt[0].delay,endDelay:ui.endDelay}}}(pt,Xt)})})),function(pt){return!$.und(pt)})}function ur(He,Ke){var pt=He.length,Xt=function(Bt){return Bt.timelineOffset?Bt.timelineOffset:0},Kt={};return Kt.duration=pt?Math.max.apply(Math,He.map(function(Bt){return Xt(Bt)+Bt.duration})):Ke.duration,Kt.delay=pt?Math.min.apply(Math,He.map(function(Bt){return Xt(Bt)+Bt.delay})):Ke.delay,Kt.endDelay=pt?Kt.duration-Math.max.apply(Math,He.map(function(Bt){return Xt(Bt)+Bt.duration-Bt.endDelay})):Ke.endDelay,Kt}var Nr,Is=0,rn=[],Pn=[],cs=function(){function He(){Nr=requestAnimationFrame(Ke)}function Ke(pt){var Xt=rn.length;if(Xt){for(var Kt=0;Kt<Xt;){var Bt=rn[Kt];if(Bt.paused){var ti=rn.indexOf(Bt);ti>-1&&(rn.splice(ti,1),Xt=rn.length)}else Bt.tick(pt);Kt++}He()}else Nr=cancelAnimationFrame(Nr)}return He}();function Tr(He){He===void 0&&(He={});var Ke,pt=0,Xt=0,Kt=0,Bt=0,ti=null;function Wt(){return window.Promise&&new Promise(function(Li){return ti=Li})}var ui=Wt(),Ut=function(Li){var wi=Je(B,Li),Ji=Je(N,Li),Qr=function(gr,ir){var Fn=[],$0=ir.keyframes;for(var zr in $0&&(ir=Mt(function(r0){for(var m0=De(Ce(r0.map(function(Vn){return Object.keys(Vn)})),function(Vn){return $.key(Vn)}).reduce(function(Vn,g0){return Vn.indexOf(g0)<0&&Vn.push(g0),Vn},[]),D0={},n0=function(Vn){var g0=m0[Vn];D0[g0]=r0.map(function(L0){var s0={};for(var v0 in L0)$.key(v0)?v0==g0&&(s0.value=L0[v0]):s0[v0]=L0[v0];return s0})},x0=0;x0<m0.length;x0++)n0(x0);return D0}($0),ir)),ir)$.key(zr)&&Fn.push({name:zr,tweens:Yt(ir[zr],gr)});return Fn}(Ji,Li),ki=dt(Li.targets),Hr=qr(ki,Qr),Xr=ur(Hr,Ji),Yr=Is;return Is++,Mt(wi,{id:Yr,children:[],animatables:ki,animations:Hr,duration:Xr.duration,delay:Xr.delay,endDelay:Xr.endDelay})}(He);function st(){Ut.reversed=!Ut.reversed;for(var Li=0,wi=Ke.length;Li<wi;Li++)Ke[Li].reversed=Ut.reversed}function dr(Li){return Ut.reversed?Ut.duration-Li:Li}function Di(){pt=0,Xt=dr(Ut.currentTime)*(1/Tr.speed)}function Mi(Li,wi){wi&&wi.seek(Li-wi.timelineOffset)}function Ir(Li){for(var wi=0,Ji=Ut.animations,Qr=Ji.length;wi<Qr;){var ki=Ji[wi],Hr=ki.animatable,Xr=ki.tweens,Yr=Xr.length-1,gr=Xr[Yr];Yr&&(gr=De(Xr,function(Pr){return Li<Pr.end})[0]||gr);for(var ir=A(Li-gr.start-gr.delay,0,gr.duration)/gr.duration,Fn=isNaN(ir)?1:gr.easing(ir),$0=gr.to.strings,zr=gr.round,r0=[],m0=gr.to.numbers.length,D0=void 0,n0=0;n0<m0;n0++){var x0=void 0,Vn=gr.to.numbers[n0],g0=gr.from.numbers[n0]||0;x0=gr.isPath?fe(gr.value,Fn*Vn):g0+Fn*(Vn-g0),zr&&(gr.isColor&&n0>2||(x0=Math.round(x0*zr)/zr)),r0.push(x0)}var L0=$0.length;if(L0){D0=$0[0];for(var s0=0;s0<L0;s0++){$0[s0];var v0=$0[s0+1],hs=r0[s0];isNaN(hs)||(D0+=v0?hs+v0:hs+" ")}}else D0=r0[0];zi[ki.type](Hr.target,ki.property,D0,Hr.transforms),ki.currentValue=D0,wi++}}function Vi(Li){Ut[Li]&&!Ut.passThrough&&Ut[Li](Ut)}function _r(Li){var wi=Ut.duration,Ji=Ut.delay,Qr=wi-Ut.endDelay,ki=dr(Li);Ut.progress=A(ki/wi*100,0,100),Ut.reversePlayback=ki<Ut.currentTime,Ke&&function(Hr){if(Ut.reversePlayback)for(var Xr=Bt;Xr--;)Mi(Hr,Ke[Xr]);else for(var Yr=0;Yr<Bt;Yr++)Mi(Hr,Ke[Yr])}(ki),!Ut.began&&Ut.currentTime>0&&(Ut.began=!0,Vi("begin"),Vi("loopBegin")),ki<=Ji&&Ut.currentTime!==0&&Ir(0),(ki>=Qr&&Ut.currentTime!==wi||!wi)&&Ir(wi),ki>Ji&&ki<Qr?(Ut.changeBegan||(Ut.changeBegan=!0,Ut.changeCompleted=!1,Vi("changeBegin")),Vi("change"),Ir(ki)):Ut.changeBegan&&(Ut.changeCompleted=!0,Ut.changeBegan=!1,Vi("changeComplete")),Ut.currentTime=A(ki,0,wi),Ut.began&&Vi("update"),Li>=wi&&(Xt=0,Ut.remaining&&Ut.remaining!==!0&&Ut.remaining--,Ut.remaining?(pt=Kt,Vi("loopComplete"),Vi("loopBegin"),Ut.direction==="alternate"&&st()):(Ut.paused=!0,Ut.completed||(Ut.completed=!0,Vi("loopComplete"),Vi("complete"),"Promise"in window&&(ti(),ui=Wt()))))}return Ut.reset=function(){var Li=Ut.direction;Ut.passThrough=!1,Ut.currentTime=0,Ut.progress=0,Ut.paused=!0,Ut.began=!1,Ut.changeBegan=!1,Ut.completed=!1,Ut.changeCompleted=!1,Ut.reversePlayback=!1,Ut.reversed=Li==="reverse",Ut.remaining=Ut.loop,Ke=Ut.children;for(var wi=Bt=Ke.length;wi--;)Ut.children[wi].reset();(Ut.reversed&&Ut.loop!==!0||Li==="alternate"&&Ut.loop===1)&&Ut.remaining++,Ir(0)},Ut.set=function(Li,wi){return cr(Li,wi),Ut},Ut.tick=function(Li){Kt=Li,pt||(pt=Kt),_r((Kt+(Xt-pt))*Tr.speed)},Ut.seek=function(Li){_r(dr(Li))},Ut.pause=function(){Ut.paused=!0,Di()},Ut.play=function(){Ut.paused&&(Ut.paused=!1,rn.push(Ut),Di(),Nr||cs())},Ut.reverse=function(){st(),Di()},Ut.restart=function(){Ut.reset(),Ut.play()},Ut.finished=ui,Ut.reset(),Ut.autoplay&&Ut.play(),Ut}function B0(He,Ke){for(var pt=Ke.length;pt--;)Qe(He,Ke[pt].animatable.target)&&Ke.splice(pt,1)}document.addEventListener("visibilitychange",function(){if(document.hidden){for(var He=0,Ke=rn.length;He<Ke;He++)activeInstance[He].pause();Pn=rn.slice(0),rn=[]}else for(var pt=0,Xt=Pn.length;pt<Xt;pt++)Pn[pt].play()}),Tr.version="3.0.0",Tr.speed=1,Tr.running=rn,Tr.remove=function(He){for(var Ke=et(He),pt=rn.length;pt--;){var Xt=rn[pt],Kt=Xt.animations,Bt=Xt.children;B0(Ke,Kt);for(var ti=Bt.length;ti--;){var Wt=Bt[ti],ui=Wt.animations;B0(Ke,ui),ui.length||Wt.children.length||Bt.splice(ti,1)}Kt.length||Bt.length||Xt.pause()}},Tr.get=os,Tr.set=cr,Tr.convertPx=Ur,Tr.path=function(He,Ke){var pt=$.str(He)?Te(He)[0]:He,Xt=Ke||100;return function(Kt){return{property:Kt,el:pt,svg:Oe(pt),totalLength:tn(pt)*(Xt/100)}}},Tr.setDashoffset=function(He){var Ke=tn(He);return He.setAttribute("stroke-dasharray",Ke),Ke},Tr.stagger=function(He,Ke){Ke===void 0&&(Ke={});var pt=Ke.direction||"normal",Xt=Ke.easing?be(Ke.easing):null,Kt=Ke.grid,Bt=Ke.axis,ti=Ke.from||0,Wt=ti==="first",ui=ti==="center",Ut=ti==="last",st=$.arr(He),dr=parseFloat(st?He[0]:He),Di=st?parseFloat(He[1]):0,Mi=Ki(st?He[1]:He)||0,Ir=Ke.start||0+(st?dr:0),Vi=[],_r=0;return function(Li,wi,Ji){if(Wt&&(ti=0),ui&&(ti=(Ji-1)/2),Ut&&(ti=Ji-1),!Vi.length){for(var Qr=0;Qr<Ji;Qr++){if(Kt){var ki=ui?(Kt[0]-1)/2:ti%Kt[0],Hr=ui?(Kt[1]-1)/2:Math.floor(ti/Kt[0]),Xr=ki-Qr%Kt[0],Yr=Hr-Math.floor(Qr/Kt[0]),gr=Math.sqrt(Xr*Xr+Yr*Yr);Bt==="x"&&(gr=-Xr),Bt==="y"&&(gr=-Yr),Vi.push(gr)}else Vi.push(Math.abs(ti-Qr));_r=Math.max.apply(Math,Vi)}Xt&&(Vi=Vi.map(function(ir){return Xt(ir/_r)*_r})),pt==="reverse"&&(Vi=Vi.map(function(ir){return Bt?ir<0?-1*ir:-ir:Math.abs(_r-ir)}))}return Ir+(st?(Di-dr)/_r:dr)*(Math.round(100*Vi[wi])/100)+Mi}},Tr.timeline=function(He){He===void 0&&(He={});var Ke=Tr(He);return Ke.duration=0,Ke.add=function(pt,Xt){var Kt=rn.indexOf(Ke),Bt=Ke.children;function ti(Di){Di.passThrough=!0}Kt>-1&&rn.splice(Kt,1);for(var Wt=0;Wt<Bt.length;Wt++)ti(Bt[Wt]);var ui=Mt(pt,Je(N,He));ui.targets=ui.targets||He.targets;var Ut=Ke.duration;ui.autoplay=!1,ui.direction=Ke.direction,ui.timelineOffset=$.und(Xt)?Ut:as(Xt,Ut),ti(Ke),Ke.seek(ui.timelineOffset);var st=Tr(ui);ti(st),Bt.push(st);var dr=ur(Bt,He);return Ke.delay=dr.delay,Ke.endDelay=dr.endDelay,Ke.duration=dr.duration,Ke.seek(0),Ke.reset(),Ke.autoplay&&Ke.play(),Ke},Ke},Tr.easing=be,Tr.penner=ve,Tr.random=function(He,Ke){return Math.floor(Math.random()*(Ke-He+1))+He};const yn=Tr},6559:(M,E,e)=>{var B=e(7510),N=e(4502),Q=e(83),P=e(2259);M.exports=function(C){return new A(C)};class A extends THREE.BufferGeometry{constructor(V){super(),typeof V=="string"&&(V={text:V}),this._opt=Object.assign({},V),V&&this.update(V)}update(V){if(typeof V=="string"&&(V={text:V}),!(V=Object.assign({},this._opt,V)).font)throw new TypeError("must specify a { font } in options");this.layout=B(V);var z=V.flipY!==!1,H=V.font,G=H.common.scaleW,$=H.common.scaleH,k=this.layout.glyphs.filter(function(ue){var ve=ue.data;return ve.width*ve.height>0});this.visibleGlyphs=k;var K=Q.positions(k),Z=Q.uvs(k,G,$,z),ee=N([],{clockwise:!0,type:"uint16",count:k.length});if(this.setIndex(ee),this.setAttribute("position",new THREE.BufferAttribute(K,2)),this.setAttribute("uv",new THREE.BufferAttribute(Z,2)),!V.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(V.multipage){var he=Q.pages(k);this.setAttribute("page",new THREE.BufferAttribute(he,1))}this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere()}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new THREE.Sphere);var V=this.attributes.position.array,z=this.attributes.position.itemSize;if(!V||!z||V.length<2)return this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0);P.computeSphere(V,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new THREE.Box3);var V=this.boundingBox,z=this.attributes.position.array,H=this.attributes.position.itemSize;!z||!H||z.length<2?V.makeEmpty():P.computeBox(z,V)}}},2259:M=>{var E={min:[0,0],max:[0,0]};function e(B){var N=B.length/2;E.min[0]=B[0],E.min[1]=B[1],E.max[0]=B[0],E.max[1]=B[1];for(var Q=0;Q<N;Q++){var P=B[2*Q+0],A=B[2*Q+1];E.min[0]=Math.min(P,E.min[0]),E.min[1]=Math.min(A,E.min[1]),E.max[0]=Math.max(P,E.max[0]),E.max[1]=Math.max(A,E.max[1])}}M.exports.computeBox=function(B,N){e(B),N.min.set(E.min[0],E.min[1],0),N.max.set(E.max[0],E.max[1],0)},M.exports.computeSphere=function(B,N){e(B);var Q=E.min[0],P=E.min[1],A=E.max[0]-Q,C=E.max[1]-P,V=Math.sqrt(A*A+C*C);N.center.set(Q+A/2,P+C/2,0),N.radius=V/2}},83:M=>{M.exports.pages=function(E){var e=new Float32Array(4*E.length*1),B=0;return E.forEach(function(N){var Q=N.data.page||0;e[B++]=Q,e[B++]=Q,e[B++]=Q,e[B++]=Q}),e},M.exports.uvs=function(E,e,B,N){var Q=new Float32Array(4*E.length*2),P=0;return E.forEach(function(A){var C=A.data,V=C.x+C.width,z=C.y+C.height,H=C.x/e,G=C.y/B,$=V/e,k=z/B;N&&(G=(B-C.y)/B,k=(B-z)/B),Q[P++]=H,Q[P++]=G,Q[P++]=H,Q[P++]=k,Q[P++]=$,Q[P++]=k,Q[P++]=$,Q[P++]=G}),Q},M.exports.positions=function(E){var e=new Float32Array(4*E.length*2),B=0;return E.forEach(function(N){var Q=N.data,P=N.position[0]+Q.xoffset,A=N.position[1]+Q.yoffset,C=Q.width,V=Q.height;e[B++]=P,e[B++]=A,e[B++]=P,e[B++]=A+V,e[B++]=P+C,e[B++]=A+V,e[B++]=P+C,e[B++]=A}),e}},5542:function(M,E,e){M.exports=function(){"use strict";var B=typeof window<"u"?window:e.g!==void 0?e.g:typeof self<"u"?self:{},N,Q=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},P=function(k,K){for(var Z=0,ee=k.length;Z<ee;Z++)K[Z]=k[Z]},A=function(k,K){for(var Z in K)K.hasOwnProperty(Z)&&(k[Z]=K[Z]);return k},C=function(k,K){return k(K={exports:{}},K.exports),K.exports}(function(k,K){k.exports=function(){var Z,ee,he,ue=function(oe,ge){if(!(oe instanceof ge))throw new TypeError("Cannot call a class as a function")},ve=function(){function oe(ge,Me){for(var Ie=0;Ie<Me.length;Ie++){var Ue=Me[Ie];Ue.enumerable=Ue.enumerable||!1,Ue.configurable=!0,"value"in Ue&&(Ue.writable=!0),Object.defineProperty(ge,Ue.key,Ue)}}return function(ge,Me,Ie){return Me&&oe(ge.prototype,Me),Ie&&oe(ge,Ie),ge}}(),be=function(){function oe(ge,Me){var Ie=[],Ue=!0,Xe=!1,Ct=void 0;try{for(var yt,$t=ge[Symbol.iterator]();!(Ue=(yt=$t.next()).done)&&(Ie.push(yt.value),!Me||Ie.length!==Me);Ue=!0);}catch(xt){Xe=!0,Ct=xt}finally{try{!Ue&&$t.return&&$t.return()}finally{if(Xe)throw Ct}}return Ie}return function(ge,Me){if(Array.isArray(ge))return ge;if(Symbol.iterator in Object(ge))return oe(ge,Me);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Te=.001,ye=1,De=function(oe,ge){return"data:"+oe+","+encodeURIComponent(ge)},Ce=function(oe,ge,Me){return oe+(ge-oe)*Me},Re=function(){var oe=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return oe}}(),Qe=function(){var oe=navigator.userAgent.indexOf("Version")!==-1&&navigator.userAgent.indexOf("Android")!==-1&&navigator.userAgent.indexOf("Chrome")!==-1;return function(){return oe}}(),ot=function(){var oe=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return oe}}(),Je=function(){var oe=navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return oe}}(),Mt=(Z=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),ee=Z?parseInt(Z[1],10):null,function(){return ee}),Zt=function(){var oe=!1;return oe=Re()&&ot()&&navigator.userAgent.indexOf("13_4")!==-1,function(){return oe}}(),kt=function(){var oe=!1;if(Mt()===65){var ge=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(ge){var Me=ge[1].split("."),Ie=be(Me,4),Ue=(Ie[0],Ie[1],Ie[2]),Xe=Ie[3];oe=parseInt(Ue,10)===3325&&parseInt(Xe,10)<148}}return function(){return oe}}(),si=function(){var oe=navigator.userAgent.indexOf("R7 Build")!==-1;return function(){return oe}}(),_i=function(){var oe=window.orientation==90||window.orientation==-90;return si()?!oe:oe},Ri=function(oe){return!(isNaN(oe)||oe<=Te||oe>ye)},er=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},Ki=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},p0=function(oe){if(Qe())return!1;if(oe.requestFullscreen)oe.requestFullscreen();else if(oe.webkitRequestFullscreen)oe.webkitRequestFullscreen();else if(oe.mozRequestFullScreen)oe.mozRequestFullScreen();else{if(!oe.msRequestFullscreen)return!1;oe.msRequestFullscreen()}return!0},ln=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},Ur=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},tr=function(oe,ge,Me,Ie){var Ue=oe.createShader(oe.VERTEX_SHADER);oe.shaderSource(Ue,ge),oe.compileShader(Ue);var Xe=oe.createShader(oe.FRAGMENT_SHADER);oe.shaderSource(Xe,Me),oe.compileShader(Xe);var Ct=oe.createProgram();for(var yt in oe.attachShader(Ct,Ue),oe.attachShader(Ct,Xe),Ie)oe.bindAttribLocation(Ct,Ie[yt],yt);return oe.linkProgram(Ct),oe.deleteShader(Ue),oe.deleteShader(Xe),Ct},K0=function(oe,ge){for(var Me={},Ie=oe.getProgramParameter(ge,oe.ACTIVE_UNIFORMS),Ue="",Xe=0;Xe<Ie;Xe++)Me[Ue=oe.getActiveUniform(ge,Xe).name.replace("[0]","")]=oe.getUniformLocation(ge,Ue);return Me},I0=function(oe,ge,Me,Ie,Ue,Xe,Ct){var yt=1/(ge-Me),$t=1/(Ie-Ue),xt=1/(Xe-Ct);return oe[0]=-2*yt,oe[1]=0,oe[2]=0,oe[3]=0,oe[4]=0,oe[5]=-2*$t,oe[6]=0,oe[7]=0,oe[8]=0,oe[9]=0,oe[10]=2*xt,oe[11]=0,oe[12]=(ge+Me)*yt,oe[13]=(Ue+Ie)*$t,oe[14]=(Ct+Xe)*xt,oe[15]=1,oe},A0=function(){var oe,ge=!1;return oe=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(oe)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(oe.substr(0,4)))&&(ge=!0),ge},os=function(oe,ge){for(var Me in ge)ge.hasOwnProperty(Me)&&(oe[Me]=ge[Me]);return oe},J0=function(oe){if(Re()){var ge=oe.style.width,Me=oe.style.height;oe.style.width=parseInt(ge)+1+"px",oe.style.height=parseInt(Me)+"px",setTimeout(function(){oe.style.width=ge,oe.style.height=Me},100)}window.canvas=oe},as=function(){var oe=Math.PI/180,ge=.25*Math.PI;function Me(xt,_t,bi,Bi){var Wi=Math.tan(_t?_t.upDegrees*oe:ge),qi=Math.tan(_t?_t.downDegrees*oe:ge),Zi=Math.tan(_t?_t.leftDegrees*oe:ge),rr=Math.tan(_t?_t.rightDegrees*oe:ge),vr=2/(Zi+rr),di=2/(Wi+qi);return xt[0]=vr,xt[1]=0,xt[2]=0,xt[3]=0,xt[4]=0,xt[5]=di,xt[6]=0,xt[7]=0,xt[8]=-(Zi-rr)*vr*.5,xt[9]=(Wi-qi)*di*.5,xt[10]=Bi/(bi-Bi),xt[11]=-1,xt[12]=0,xt[13]=0,xt[14]=Bi*bi/(bi-Bi),xt[15]=0,xt}function Ie(xt,_t,bi){var Bi=_t[0],Wi=_t[1],qi=_t[2],Zi=_t[3],rr=Bi+Bi,vr=Wi+Wi,di=qi+qi,wn=Bi*rr,nn=Bi*vr,On=Bi*di,o0=Wi*vr,E0=Wi*di,bn=qi*di,Tn=Zi*rr,sn=Zi*vr,a0=Zi*di;return xt[0]=1-(o0+bn),xt[1]=nn+a0,xt[2]=On-sn,xt[3]=0,xt[4]=nn-a0,xt[5]=1-(wn+bn),xt[6]=E0+Tn,xt[7]=0,xt[8]=On+sn,xt[9]=E0-Tn,xt[10]=1-(wn+o0),xt[11]=0,xt[12]=bi[0],xt[13]=bi[1],xt[14]=bi[2],xt[15]=1,xt}function Ue(xt,_t,bi){var Bi,Wi,qi,Zi,rr,vr,di,wn,nn,On,o0,E0,bn=bi[0],Tn=bi[1],sn=bi[2];return _t===xt?(xt[12]=_t[0]*bn+_t[4]*Tn+_t[8]*sn+_t[12],xt[13]=_t[1]*bn+_t[5]*Tn+_t[9]*sn+_t[13],xt[14]=_t[2]*bn+_t[6]*Tn+_t[10]*sn+_t[14],xt[15]=_t[3]*bn+_t[7]*Tn+_t[11]*sn+_t[15]):(Bi=_t[0],Wi=_t[1],qi=_t[2],Zi=_t[3],rr=_t[4],vr=_t[5],di=_t[6],wn=_t[7],nn=_t[8],On=_t[9],o0=_t[10],E0=_t[11],xt[0]=Bi,xt[1]=Wi,xt[2]=qi,xt[3]=Zi,xt[4]=rr,xt[5]=vr,xt[6]=di,xt[7]=wn,xt[8]=nn,xt[9]=On,xt[10]=o0,xt[11]=E0,xt[12]=Bi*bn+rr*Tn+nn*sn+_t[12],xt[13]=Wi*bn+vr*Tn+On*sn+_t[13],xt[14]=qi*bn+di*Tn+o0*sn+_t[14],xt[15]=Zi*bn+wn*Tn+E0*sn+_t[15]),xt}function Xe(xt,_t){var bi=_t[0],Bi=_t[1],Wi=_t[2],qi=_t[3],Zi=_t[4],rr=_t[5],vr=_t[6],di=_t[7],wn=_t[8],nn=_t[9],On=_t[10],o0=_t[11],E0=_t[12],bn=_t[13],Tn=_t[14],sn=_t[15],a0=bi*rr-Bi*Zi,Rs=bi*vr-Wi*Zi,_0=bi*di-qi*Zi,M0=Bi*vr-Wi*rr,us=Bi*di-qi*rr,Bs=Wi*di-qi*vr,Ds=wn*bn-nn*E0,Xs=wn*Tn-On*E0,Ls=wn*sn-o0*E0,ds=nn*Tn-On*bn,Ys=nn*sn-o0*bn,Ks=On*sn-o0*Tn,Kr=a0*Ks-Rs*Ys+_0*ds+M0*Ls-us*Xs+Bs*Ds;return Kr?(Kr=1/Kr,xt[0]=(rr*Ks-vr*Ys+di*ds)*Kr,xt[1]=(Wi*Ys-Bi*Ks-qi*ds)*Kr,xt[2]=(bn*Bs-Tn*us+sn*M0)*Kr,xt[3]=(On*us-nn*Bs-o0*M0)*Kr,xt[4]=(vr*Ls-Zi*Ks-di*Xs)*Kr,xt[5]=(bi*Ks-Wi*Ls+qi*Xs)*Kr,xt[6]=(Tn*_0-E0*Bs-sn*Rs)*Kr,xt[7]=(wn*Bs-On*_0+o0*Rs)*Kr,xt[8]=(Zi*Ys-rr*Ls+di*Ds)*Kr,xt[9]=(Bi*Ls-bi*Ys-qi*Ds)*Kr,xt[10]=(E0*us-bn*_0+sn*a0)*Kr,xt[11]=(nn*_0-wn*us-o0*a0)*Kr,xt[12]=(rr*Xs-Zi*ds-vr*Ds)*Kr,xt[13]=(bi*ds-Bi*Xs+Wi*Ds)*Kr,xt[14]=(bn*Rs-E0*M0-Tn*a0)*Kr,xt[15]=(wn*M0-nn*Rs+On*a0)*Kr,xt):null}var Ct=new Float32Array([0,0,0,1]),yt=new Float32Array([0,0,0]);function $t(xt,_t,bi,Bi,Wi,qi){Me(xt,Bi||null,qi.depthNear,qi.depthFar),Ie(_t,bi.orientation||Ct,bi.position||yt),Wi&&Ue(_t,_t,Wi),Xe(_t,_t)}return function(xt,_t,bi){return!(!xt||!_t||(xt.pose=_t,xt.timestamp=_t.timestamp,$t(xt.leftProjectionMatrix,xt.leftViewMatrix,_t,bi._getFieldOfView("left"),bi._getEyeOffset("left"),bi),$t(xt.rightProjectionMatrix,xt.rightViewMatrix,_t,bi._getFieldOfView("right"),bi._getEyeOffset("right"),bi),0))}}(),R0=function(){var oe=window.self!==window.top,ge=Hn(document.referrer),Me=Hn(window.location.href);return oe&&ge!==Me},Hn=function(oe){var ge,Me=oe.indexOf("://");ge=Me!==-1?Me+3:0;var Ie=oe.indexOf("/",ge);return Ie===-1&&(Ie=oe.length),oe.substring(0,Ie)},Z0=function(oe){return oe.w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*Math.acos(oe.w)},ls=(he={},function(oe,ge){he[oe]===void 0&&(console.warn("webvr-polyfill: "+ge),he[oe]=!0)}),tn=function(oe,ge){ls(oe,oe+" has been deprecated. This may not work on native WebVR displays. "+(ge?"Please use "+ge+" instead.":""))};function Oe(oe,ge,Me){if(ge){for(var Ie=[],Ue=null,Xe=0;Xe<ge.length;++Xe)switch(Ct=ge[Xe]){case oe.TEXTURE_BINDING_2D:case oe.TEXTURE_BINDING_CUBE_MAP:if(($t=ge[++Xe])<oe.TEXTURE0||$t>oe.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),Ie.push(null,null);break}Ue||(Ue=oe.getParameter(oe.ACTIVE_TEXTURE)),oe.activeTexture($t),Ie.push(oe.getParameter(Ct),null);break;case oe.ACTIVE_TEXTURE:Ue=oe.getParameter(oe.ACTIVE_TEXTURE),Ie.push(null);break;default:Ie.push(oe.getParameter(Ct))}for(Me(oe),Xe=0;Xe<ge.length;++Xe){var Ct=ge[Xe],yt=Ie[Xe];switch(Ct){case oe.ACTIVE_TEXTURE:break;case oe.ARRAY_BUFFER_BINDING:oe.bindBuffer(oe.ARRAY_BUFFER,yt);break;case oe.COLOR_CLEAR_VALUE:oe.clearColor(yt[0],yt[1],yt[2],yt[3]);break;case oe.COLOR_WRITEMASK:oe.colorMask(yt[0],yt[1],yt[2],yt[3]);break;case oe.CURRENT_PROGRAM:oe.useProgram(yt);break;case oe.ELEMENT_ARRAY_BUFFER_BINDING:oe.bindBuffer(oe.ELEMENT_ARRAY_BUFFER,yt);break;case oe.FRAMEBUFFER_BINDING:oe.bindFramebuffer(oe.FRAMEBUFFER,yt);break;case oe.RENDERBUFFER_BINDING:oe.bindRenderbuffer(oe.RENDERBUFFER,yt);break;case oe.TEXTURE_BINDING_2D:if(($t=ge[++Xe])<oe.TEXTURE0||$t>oe.TEXTURE31)break;oe.activeTexture($t),oe.bindTexture(oe.TEXTURE_2D,yt);break;case oe.TEXTURE_BINDING_CUBE_MAP:var $t;if(($t=ge[++Xe])<oe.TEXTURE0||$t>oe.TEXTURE31)break;oe.activeTexture($t),oe.bindTexture(oe.TEXTURE_CUBE_MAP,yt);break;case oe.VIEWPORT:oe.viewport(yt[0],yt[1],yt[2],yt[3]);break;case oe.BLEND:case oe.CULL_FACE:case oe.DEPTH_TEST:case oe.SCISSOR_TEST:case oe.STENCIL_TEST:yt?oe.enable(Ct):oe.disable(Ct);break;default:console.log("No GL restore behavior for 0x"+Ct.toString(16))}Ue&&oe.activeTexture(Ue)}}else Me(oe)}var fe=Oe,Ee=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join(`
`),_e=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join(`
`);function et(oe,ge,Me,Ie){this.gl=oe,this.cardboardUI=ge,this.bufferScale=Me,this.dirtySubmitFrameBindings=Ie,this.ctxAttribs=oe.getContextAttributes(),this.instanceExt=oe.getExtension("ANGLE_instanced_arrays"),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=oe.drawingBufferWidth,this.bufferHeight=oe.drawingBufferHeight,this.realBindFramebuffer=oe.bindFramebuffer,this.realEnable=oe.enable,this.realDisable=oe.disable,this.realColorMask=oe.colorMask,this.realClearColor=oe.clearColor,this.realViewport=oe.viewport,Re()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(oe.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(oe.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=tr(oe,Ee,_e,this.attribs),this.uniforms=K0(oe,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=oe.createBuffer(),this.indexBuffer=oe.createBuffer(),this.indexCount=0,this.renderTarget=oe.createTexture(),this.framebuffer=oe.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=oe.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=oe.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=oe.createRenderbuffer()),this.patch(),this.onResize()}et.prototype.destroy=function(){var oe=this.gl;this.unpatch(),oe.deleteProgram(this.program),oe.deleteBuffer(this.vertexBuffer),oe.deleteBuffer(this.indexBuffer),oe.deleteTexture(this.renderTarget),oe.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&oe.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&oe.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&oe.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},et.prototype.onResize=function(){var oe=this.gl,ge=this,Me=[oe.RENDERBUFFER_BINDING,oe.TEXTURE_BINDING_2D,oe.TEXTURE0];fe(oe,Me,function(Ie){ge.realBindFramebuffer.call(Ie,Ie.FRAMEBUFFER,null),ge.scissorTest&&ge.realDisable.call(Ie,Ie.SCISSOR_TEST),ge.realColorMask.call(Ie,!0,!0,!0,!0),ge.realViewport.call(Ie,0,0,Ie.drawingBufferWidth,Ie.drawingBufferHeight),ge.realClearColor.call(Ie,0,0,0,1),Ie.clear(Ie.COLOR_BUFFER_BIT),ge.realBindFramebuffer.call(Ie,Ie.FRAMEBUFFER,ge.framebuffer),Ie.bindTexture(Ie.TEXTURE_2D,ge.renderTarget),Ie.texImage2D(Ie.TEXTURE_2D,0,ge.ctxAttribs.alpha?Ie.RGBA:Ie.RGB,ge.bufferWidth,ge.bufferHeight,0,ge.ctxAttribs.alpha?Ie.RGBA:Ie.RGB,Ie.UNSIGNED_BYTE,null),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_MAG_FILTER,Ie.LINEAR),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_MIN_FILTER,Ie.LINEAR),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_WRAP_S,Ie.CLAMP_TO_EDGE),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_WRAP_T,Ie.CLAMP_TO_EDGE),Ie.framebufferTexture2D(Ie.FRAMEBUFFER,Ie.COLOR_ATTACHMENT0,Ie.TEXTURE_2D,ge.renderTarget,0),ge.ctxAttribs.depth&&ge.ctxAttribs.stencil?(Ie.bindRenderbuffer(Ie.RENDERBUFFER,ge.depthStencilBuffer),Ie.renderbufferStorage(Ie.RENDERBUFFER,Ie.DEPTH_STENCIL,ge.bufferWidth,ge.bufferHeight),Ie.framebufferRenderbuffer(Ie.FRAMEBUFFER,Ie.DEPTH_STENCIL_ATTACHMENT,Ie.RENDERBUFFER,ge.depthStencilBuffer)):ge.ctxAttribs.depth?(Ie.bindRenderbuffer(Ie.RENDERBUFFER,ge.depthBuffer),Ie.renderbufferStorage(Ie.RENDERBUFFER,Ie.DEPTH_COMPONENT16,ge.bufferWidth,ge.bufferHeight),Ie.framebufferRenderbuffer(Ie.FRAMEBUFFER,Ie.DEPTH_ATTACHMENT,Ie.RENDERBUFFER,ge.depthBuffer)):ge.ctxAttribs.stencil&&(Ie.bindRenderbuffer(Ie.RENDERBUFFER,ge.stencilBuffer),Ie.renderbufferStorage(Ie.RENDERBUFFER,Ie.STENCIL_INDEX8,ge.bufferWidth,ge.bufferHeight),Ie.framebufferRenderbuffer(Ie.FRAMEBUFFER,Ie.STENCIL_ATTACHMENT,Ie.RENDERBUFFER,ge.stencilBuffer)),!Ie.checkFramebufferStatus(Ie.FRAMEBUFFER)===Ie.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),ge.realBindFramebuffer.call(Ie,Ie.FRAMEBUFFER,ge.lastBoundFramebuffer),ge.scissorTest&&ge.realEnable.call(Ie,Ie.SCISSOR_TEST),ge.realColorMask.apply(Ie,ge.colorMask),ge.realViewport.apply(Ie,ge.viewport),ge.realClearColor.apply(Ie,ge.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},et.prototype.patch=function(){if(!this.isPatched){var oe=this,ge=this.gl.canvas,Me=this.gl;Re()||(ge.width=er()*this.bufferScale,ge.height=Ki()*this.bufferScale,Object.defineProperty(ge,"width",{configurable:!0,enumerable:!0,get:function(){return oe.bufferWidth},set:function(Ie){oe.bufferWidth=Ie,oe.realCanvasWidth.set.call(ge,Ie),oe.onResize()}}),Object.defineProperty(ge,"height",{configurable:!0,enumerable:!0,get:function(){return oe.bufferHeight},set:function(Ie){oe.bufferHeight=Ie,oe.realCanvasHeight.set.call(ge,Ie),oe.onResize()}})),this.lastBoundFramebuffer=Me.getParameter(Me.FRAMEBUFFER_BINDING),this.lastBoundFramebuffer==null&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(Me.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(Ie,Ue){oe.lastBoundFramebuffer=Ue||oe.framebuffer,oe.realBindFramebuffer.call(Me,Ie,oe.lastBoundFramebuffer)},this.cullFace=Me.getParameter(Me.CULL_FACE),this.depthTest=Me.getParameter(Me.DEPTH_TEST),this.blend=Me.getParameter(Me.BLEND),this.scissorTest=Me.getParameter(Me.SCISSOR_TEST),this.stencilTest=Me.getParameter(Me.STENCIL_TEST),Me.enable=function(Ie){switch(Ie){case Me.CULL_FACE:oe.cullFace=!0;break;case Me.DEPTH_TEST:oe.depthTest=!0;break;case Me.BLEND:oe.blend=!0;break;case Me.SCISSOR_TEST:oe.scissorTest=!0;break;case Me.STENCIL_TEST:oe.stencilTest=!0}oe.realEnable.call(Me,Ie)},Me.disable=function(Ie){switch(Ie){case Me.CULL_FACE:oe.cullFace=!1;break;case Me.DEPTH_TEST:oe.depthTest=!1;break;case Me.BLEND:oe.blend=!1;break;case Me.SCISSOR_TEST:oe.scissorTest=!1;break;case Me.STENCIL_TEST:oe.stencilTest=!1}oe.realDisable.call(Me,Ie)},this.colorMask=Me.getParameter(Me.COLOR_WRITEMASK),Me.colorMask=function(Ie,Ue,Xe,Ct){oe.colorMask[0]=Ie,oe.colorMask[1]=Ue,oe.colorMask[2]=Xe,oe.colorMask[3]=Ct,oe.realColorMask.call(Me,Ie,Ue,Xe,Ct)},this.clearColor=Me.getParameter(Me.COLOR_CLEAR_VALUE),Me.clearColor=function(Ie,Ue,Xe,Ct){oe.clearColor[0]=Ie,oe.clearColor[1]=Ue,oe.clearColor[2]=Xe,oe.clearColor[3]=Ct,oe.realClearColor.call(Me,Ie,Ue,Xe,Ct)},this.viewport=Me.getParameter(Me.VIEWPORT),Me.viewport=function(Ie,Ue,Xe,Ct){oe.viewport[0]=Ie,oe.viewport[1]=Ue,oe.viewport[2]=Xe,oe.viewport[3]=Ct,oe.realViewport.call(Me,Ie,Ue,Xe,Ct)},this.isPatched=!0,J0(ge)}},et.prototype.unpatch=function(){if(this.isPatched){var oe=this.gl,ge=this.gl.canvas;Re()||(Object.defineProperty(ge,"width",this.realCanvasWidth),Object.defineProperty(ge,"height",this.realCanvasHeight)),ge.width=this.bufferWidth,ge.height=this.bufferHeight,oe.bindFramebuffer=this.realBindFramebuffer,oe.enable=this.realEnable,oe.disable=this.realDisable,oe.colorMask=this.realColorMask,oe.clearColor=this.realClearColor,oe.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&oe.bindFramebuffer(oe.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){J0(ge)},1)}},et.prototype.setTextureBounds=function(oe,ge){oe||(oe=[0,0,.5,1]),ge||(ge=[.5,0,.5,1]),this.viewportOffsetScale[0]=oe[0],this.viewportOffsetScale[1]=oe[1],this.viewportOffsetScale[2]=oe[2],this.viewportOffsetScale[3]=oe[3],this.viewportOffsetScale[4]=ge[0],this.viewportOffsetScale[5]=ge[1],this.viewportOffsetScale[6]=ge[2],this.viewportOffsetScale[7]=ge[3]},et.prototype.submitFrame=function(){var oe=this.gl,ge=this,Me=[];if(this.dirtySubmitFrameBindings||Me.push(oe.CURRENT_PROGRAM,oe.ARRAY_BUFFER_BINDING,oe.ELEMENT_ARRAY_BUFFER_BINDING,oe.TEXTURE_BINDING_2D,oe.TEXTURE0),fe(oe,Me,function(Ue){ge.realBindFramebuffer.call(Ue,Ue.FRAMEBUFFER,null);var Xe=0,Ct=0;ge.instanceExt&&(Xe=Ue.getVertexAttrib(ge.attribs.position,ge.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),Ct=Ue.getVertexAttrib(ge.attribs.texCoord,ge.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE)),ge.cullFace&&ge.realDisable.call(Ue,Ue.CULL_FACE),ge.depthTest&&ge.realDisable.call(Ue,Ue.DEPTH_TEST),ge.blend&&ge.realDisable.call(Ue,Ue.BLEND),ge.scissorTest&&ge.realDisable.call(Ue,Ue.SCISSOR_TEST),ge.stencilTest&&ge.realDisable.call(Ue,Ue.STENCIL_TEST),ge.realColorMask.call(Ue,!0,!0,!0,!0),ge.realViewport.call(Ue,0,0,Ue.drawingBufferWidth,Ue.drawingBufferHeight),(ge.ctxAttribs.alpha||Re())&&(ge.realClearColor.call(Ue,0,0,0,1),Ue.clear(Ue.COLOR_BUFFER_BIT)),Ue.useProgram(ge.program),Ue.bindBuffer(Ue.ELEMENT_ARRAY_BUFFER,ge.indexBuffer),Ue.bindBuffer(Ue.ARRAY_BUFFER,ge.vertexBuffer),Ue.enableVertexAttribArray(ge.attribs.position),Ue.enableVertexAttribArray(ge.attribs.texCoord),Ue.vertexAttribPointer(ge.attribs.position,2,Ue.FLOAT,!1,20,0),Ue.vertexAttribPointer(ge.attribs.texCoord,3,Ue.FLOAT,!1,20,8),ge.instanceExt&&(Xe!=0&&ge.instanceExt.vertexAttribDivisorANGLE(ge.attribs.position,0),Ct!=0&&ge.instanceExt.vertexAttribDivisorANGLE(ge.attribs.texCoord,0)),Ue.activeTexture(Ue.TEXTURE0),Ue.uniform1i(ge.uniforms.diffuse,0),Ue.bindTexture(Ue.TEXTURE_2D,ge.renderTarget),Ue.uniform4fv(ge.uniforms.viewportOffsetScale,ge.viewportOffsetScale),Ue.drawElements(Ue.TRIANGLES,ge.indexCount,Ue.UNSIGNED_SHORT,0),ge.cardboardUI&&ge.cardboardUI.renderNoState(),ge.realBindFramebuffer.call(ge.gl,Ue.FRAMEBUFFER,ge.framebuffer),ge.ctxAttribs.preserveDrawingBuffer||(ge.realClearColor.call(Ue,0,0,0,0),Ue.clear(Ue.COLOR_BUFFER_BIT)),ge.dirtySubmitFrameBindings||ge.realBindFramebuffer.call(Ue,Ue.FRAMEBUFFER,ge.lastBoundFramebuffer),ge.cullFace&&ge.realEnable.call(Ue,Ue.CULL_FACE),ge.depthTest&&ge.realEnable.call(Ue,Ue.DEPTH_TEST),ge.blend&&ge.realEnable.call(Ue,Ue.BLEND),ge.scissorTest&&ge.realEnable.call(Ue,Ue.SCISSOR_TEST),ge.stencilTest&&ge.realEnable.call(Ue,Ue.STENCIL_TEST),ge.realColorMask.apply(Ue,ge.colorMask),ge.realViewport.apply(Ue,ge.viewport),!ge.ctxAttribs.alpha&&ge.ctxAttribs.preserveDrawingBuffer||ge.realClearColor.apply(Ue,ge.clearColor),ge.instanceExt&&(Xe!=0&&ge.instanceExt.vertexAttribDivisorANGLE(ge.attribs.position,Xe),Ct!=0&&ge.instanceExt.vertexAttribDivisorANGLE(ge.attribs.texCoord,Ct))}),Re()){var Ie=oe.canvas;Ie.width==ge.bufferWidth&&Ie.height==ge.bufferHeight||(ge.bufferWidth=Ie.width,ge.bufferHeight=Ie.height,ge.onResize())}},et.prototype.updateDeviceInfo=function(oe){var ge=this.gl,Me=this,Ie=[ge.ARRAY_BUFFER_BINDING,ge.ELEMENT_ARRAY_BUFFER_BINDING];fe(ge,Ie,function(Ue){var Xe=Me.computeMeshVertices_(Me.meshWidth,Me.meshHeight,oe);if(Ue.bindBuffer(Ue.ARRAY_BUFFER,Me.vertexBuffer),Ue.bufferData(Ue.ARRAY_BUFFER,Xe,Ue.STATIC_DRAW),!Me.indexCount){var Ct=Me.computeMeshIndices_(Me.meshWidth,Me.meshHeight);Ue.bindBuffer(Ue.ELEMENT_ARRAY_BUFFER,Me.indexBuffer),Ue.bufferData(Ue.ELEMENT_ARRAY_BUFFER,Ct,Ue.STATIC_DRAW),Me.indexCount=Ct.length}})},et.prototype.computeMeshVertices_=function(oe,ge,Me){for(var Ie=new Float32Array(2*oe*ge*5),Ue=Me.getLeftEyeVisibleTanAngles(),Xe=Me.getLeftEyeNoLensTanAngles(),Ct=Me.getLeftEyeVisibleScreenRect(Xe),yt=0,$t=0;$t<2;$t++){for(var xt=0;xt<ge;xt++)for(var _t=0;_t<oe;_t++,yt++){var bi=_t/(oe-1),Bi=xt/(ge-1),Wi=bi,qi=Bi,Zi=Ce(Ue[0],Ue[2],bi),rr=Ce(Ue[3],Ue[1],Bi),vr=Math.sqrt(Zi*Zi+rr*rr),di=Me.distortion.distortInverse(vr),wn=rr*di/vr;bi=(Zi*di/vr-Xe[0])/(Xe[2]-Xe[0]),Bi=(wn-Xe[3])/(Xe[1]-Xe[3]),bi=2*(Ct.x+bi*Ct.width-.5),Bi=2*(Ct.y+Bi*Ct.height-.5),Ie[5*yt+0]=bi,Ie[5*yt+1]=Bi,Ie[5*yt+2]=Wi,Ie[5*yt+3]=qi,Ie[5*yt+4]=$t}var nn=Ue[2]-Ue[0];Ue[0]=-(nn+Ue[0]),Ue[2]=nn-Ue[2],nn=Xe[2]-Xe[0],Xe[0]=-(nn+Xe[0]),Xe[2]=nn-Xe[2],Ct.x=1-(Ct.x+Ct.width)}return Ie},et.prototype.computeMeshIndices_=function(oe,ge){for(var Me=new Uint16Array(2*(oe-1)*(ge-1)*6),Ie=oe/2,Ue=ge/2,Xe=0,Ct=0,yt=0;yt<2;yt++)for(var $t=0;$t<ge;$t++)for(var xt=0;xt<oe;xt++,Xe++)xt!=0&&$t!=0&&(xt<=Ie==$t<=Ue?(Me[Ct++]=Xe,Me[Ct++]=Xe-oe-1,Me[Ct++]=Xe-oe,Me[Ct++]=Xe-oe-1,Me[Ct++]=Xe,Me[Ct++]=Xe-1):(Me[Ct++]=Xe-1,Me[Ct++]=Xe-oe,Me[Ct++]=Xe,Me[Ct++]=Xe-oe,Me[Ct++]=Xe-1,Me[Ct++]=Xe-oe-1));return Me},et.prototype.getOwnPropertyDescriptor_=function(oe,ge){var Me=Object.getOwnPropertyDescriptor(oe,ge);return Me.get!==void 0&&Me.set!==void 0||(Me.configurable=!0,Me.enumerable=!0,Me.get=function(){return this.getAttribute(ge)},Me.set=function(Ie){this.setAttribute(ge,Ie)}),Me};var dt=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join(`
`),vt=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join(`
`),Yt=Math.PI/180,zi=60,cr=12,qr=20,ur=1,Nr=.75,Is=.3125,rn=4,Pn=28,cs=1.5;function Tr(oe){this.gl=oe,this.attribs={position:0},this.program=tr(oe,dt,vt,this.attribs),this.uniforms=K0(oe,this.program),this.vertexBuffer=oe.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function B0(oe){this.coefficients=oe}Tr.prototype.destroy=function(){var oe=this.gl;this.listener&&oe.canvas.removeEventListener("click",this.listener,!1),oe.deleteProgram(this.program),oe.deleteBuffer(this.vertexBuffer)},Tr.prototype.listen=function(oe,ge){var Me=this.gl.canvas;this.listener=function(Ie){var Ue=Me.clientWidth/2,Xe=Pn*cs;Ie.clientX>Ue-Xe&&Ie.clientX<Ue+Xe&&Ie.clientY>Me.clientHeight-Xe?oe(Ie):Ie.clientX<Xe&&Ie.clientY<Xe&&ge(Ie)},Me.addEventListener("click",this.listener,!1)},Tr.prototype.onResize=function(){var oe=this.gl,ge=this,Me=[oe.ARRAY_BUFFER_BINDING];fe(oe,Me,function(Ie){var Ue=[],Xe=Ie.drawingBufferWidth/2,Ct=Math.max(screen.width,screen.height)*window.devicePixelRatio,yt=Ie.drawingBufferWidth/Ct*window.devicePixelRatio,$t=rn*yt/2,xt=Pn*cs*yt,_t=Pn*yt/2,bi=(Pn*cs-Pn)*yt;function Bi(vr,di){var wn=(90-vr)*Yt,nn=Math.cos(wn),On=Math.sin(wn);Ue.push(Is*nn*_t+Xe,Is*On*_t+_t),Ue.push(di*nn*_t+Xe,di*On*_t+_t)}Ue.push(Xe-$t,xt),Ue.push(Xe-$t,Ie.drawingBufferHeight),Ue.push(Xe+$t,xt),Ue.push(Xe+$t,Ie.drawingBufferHeight),ge.gearOffset=Ue.length/2;for(var Wi=0;Wi<=6;Wi++){var qi=Wi*zi;Bi(qi,ur),Bi(qi+cr,ur),Bi(qi+qr,Nr),Bi(qi+(zi-qr),Nr),Bi(qi+(zi-cr),ur)}function Zi(vr,di){Ue.push(bi+vr,Ie.drawingBufferHeight-bi-di)}ge.gearVertexCount=Ue.length/2-ge.gearOffset,ge.arrowOffset=Ue.length/2;var rr=$t/Math.sin(45*Yt);Zi(0,_t),Zi(_t,0),Zi(_t+rr,rr),Zi(rr,_t+rr),Zi(rr,_t-rr),Zi(0,_t),Zi(_t,2*_t),Zi(_t+rr,2*_t-rr),Zi(rr,_t-rr),Zi(0,_t),Zi(rr,_t-$t),Zi(Pn*yt,_t-$t),Zi(rr,_t+$t),Zi(Pn*yt,_t+$t),ge.arrowVertexCount=Ue.length/2-ge.arrowOffset,Ie.bindBuffer(Ie.ARRAY_BUFFER,ge.vertexBuffer),Ie.bufferData(Ie.ARRAY_BUFFER,new Float32Array(Ue),Ie.STATIC_DRAW)})},Tr.prototype.render=function(){var oe=this.gl,ge=this,Me=[oe.CULL_FACE,oe.DEPTH_TEST,oe.BLEND,oe.SCISSOR_TEST,oe.STENCIL_TEST,oe.COLOR_WRITEMASK,oe.VIEWPORT,oe.CURRENT_PROGRAM,oe.ARRAY_BUFFER_BINDING];fe(oe,Me,function(Ie){Ie.disable(Ie.CULL_FACE),Ie.disable(Ie.DEPTH_TEST),Ie.disable(Ie.BLEND),Ie.disable(Ie.SCISSOR_TEST),Ie.disable(Ie.STENCIL_TEST),Ie.colorMask(!0,!0,!0,!0),Ie.viewport(0,0,Ie.drawingBufferWidth,Ie.drawingBufferHeight),ge.renderNoState()})},Tr.prototype.renderNoState=function(){var oe=this.gl;oe.useProgram(this.program),oe.bindBuffer(oe.ARRAY_BUFFER,this.vertexBuffer),oe.enableVertexAttribArray(this.attribs.position),oe.vertexAttribPointer(this.attribs.position,2,oe.FLOAT,!1,8,0),oe.uniform4f(this.uniforms.color,1,1,1,1),I0(this.projMat,0,oe.drawingBufferWidth,0,oe.drawingBufferHeight,.1,1024),oe.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),oe.drawArrays(oe.TRIANGLE_STRIP,0,4),oe.drawArrays(oe.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),oe.drawArrays(oe.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},B0.prototype.distortInverse=function(oe){for(var ge=0,Me=1,Ie=oe-this.distort(ge);Math.abs(Me-ge)>1e-4;){var Ue=oe-this.distort(Me),Xe=Me-Ue*((Me-ge)/(Ue-Ie));ge=Me,Me=Xe,Ie=Ue}return Me},B0.prototype.distort=function(oe){for(var ge=oe*oe,Me=0,Ie=0;Ie<this.coefficients.length;Ie++)Me=ge*(Me+this.coefficients[Ie]);return(Me+1)*oe};var yn=Math.PI/180,He=180/Math.PI,Ke=function(oe,ge,Me){this.x=oe||0,this.y=ge||0,this.z=Me||0};Ke.prototype={constructor:Ke,set:function(oe,ge,Me){return this.x=oe,this.y=ge,this.z=Me,this},copy:function(oe){return this.x=oe.x,this.y=oe.y,this.z=oe.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var oe=this.length();if(oe!==0){var ge=1/oe;this.multiplyScalar(ge)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(oe){this.x*=oe,this.y*=oe,this.z*=oe},applyQuaternion:function(oe){var ge=this.x,Me=this.y,Ie=this.z,Ue=oe.x,Xe=oe.y,Ct=oe.z,yt=oe.w,$t=yt*ge+Xe*Ie-Ct*Me,xt=yt*Me+Ct*ge-Ue*Ie,_t=yt*Ie+Ue*Me-Xe*ge,bi=-Ue*ge-Xe*Me-Ct*Ie;return this.x=$t*yt+bi*-Ue+xt*-Ct-_t*-Xe,this.y=xt*yt+bi*-Xe+_t*-Ue-$t*-Ct,this.z=_t*yt+bi*-Ct+$t*-Xe-xt*-Ue,this},dot:function(oe){return this.x*oe.x+this.y*oe.y+this.z*oe.z},crossVectors:function(oe,ge){var Me=oe.x,Ie=oe.y,Ue=oe.z,Xe=ge.x,Ct=ge.y,yt=ge.z;return this.x=Ie*yt-Ue*Ct,this.y=Ue*Xe-Me*yt,this.z=Me*Ct-Ie*Xe,this}};var pt,Xt,Kt,Bt=function(oe,ge,Me,Ie){this.x=oe||0,this.y=ge||0,this.z=Me||0,this.w=Ie!==void 0?Ie:1};function ti(oe){this.width=oe.width||er(),this.height=oe.height||Ki(),this.widthMeters=oe.widthMeters,this.heightMeters=oe.heightMeters,this.bevelMeters=oe.bevelMeters}Bt.prototype={constructor:Bt,set:function(oe,ge,Me,Ie){return this.x=oe,this.y=ge,this.z=Me,this.w=Ie,this},copy:function(oe){return this.x=oe.x,this.y=oe.y,this.z=oe.z,this.w=oe.w,this},setFromEulerXYZ:function(oe,ge,Me){var Ie=Math.cos(oe/2),Ue=Math.cos(ge/2),Xe=Math.cos(Me/2),Ct=Math.sin(oe/2),yt=Math.sin(ge/2),$t=Math.sin(Me/2);return this.x=Ct*Ue*Xe+Ie*yt*$t,this.y=Ie*yt*Xe-Ct*Ue*$t,this.z=Ie*Ue*$t+Ct*yt*Xe,this.w=Ie*Ue*Xe-Ct*yt*$t,this},setFromEulerYXZ:function(oe,ge,Me){var Ie=Math.cos(oe/2),Ue=Math.cos(ge/2),Xe=Math.cos(Me/2),Ct=Math.sin(oe/2),yt=Math.sin(ge/2),$t=Math.sin(Me/2);return this.x=Ct*Ue*Xe+Ie*yt*$t,this.y=Ie*yt*Xe-Ct*Ue*$t,this.z=Ie*Ue*$t-Ct*yt*Xe,this.w=Ie*Ue*Xe+Ct*yt*$t,this},setFromAxisAngle:function(oe,ge){var Me=ge/2,Ie=Math.sin(Me);return this.x=oe.x*Ie,this.y=oe.y*Ie,this.z=oe.z*Ie,this.w=Math.cos(Me),this},multiply:function(oe){return this.multiplyQuaternions(this,oe)},multiplyQuaternions:function(oe,ge){var Me=oe.x,Ie=oe.y,Ue=oe.z,Xe=oe.w,Ct=ge.x,yt=ge.y,$t=ge.z,xt=ge.w;return this.x=Me*xt+Xe*Ct+Ie*$t-Ue*yt,this.y=Ie*xt+Xe*yt+Ue*Ct-Me*$t,this.z=Ue*xt+Xe*$t+Me*yt-Ie*Ct,this.w=Xe*xt-Me*Ct-Ie*yt-Ue*$t,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var oe=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return oe===0?(this.x=0,this.y=0,this.z=0,this.w=1):(oe=1/oe,this.x=this.x*oe,this.y=this.y*oe,this.z=this.z*oe,this.w=this.w*oe),this},slerp:function(oe,ge){if(ge===0)return this;if(ge===1)return this.copy(oe);var Me=this.x,Ie=this.y,Ue=this.z,Xe=this.w,Ct=Xe*oe.w+Me*oe.x+Ie*oe.y+Ue*oe.z;if(Ct<0?(this.w=-oe.w,this.x=-oe.x,this.y=-oe.y,this.z=-oe.z,Ct=-Ct):this.copy(oe),Ct>=1)return this.w=Xe,this.x=Me,this.y=Ie,this.z=Ue,this;var yt=Math.acos(Ct),$t=Math.sqrt(1-Ct*Ct);if(Math.abs($t)<.001)return this.w=.5*(Xe+this.w),this.x=.5*(Me+this.x),this.y=.5*(Ie+this.y),this.z=.5*(Ue+this.z),this;var xt=Math.sin((1-ge)*yt)/$t,_t=Math.sin(ge*yt)/$t;return this.w=Xe*xt+this.w*_t,this.x=Me*xt+this.x*_t,this.y=Ie*xt+this.y*_t,this.z=Ue*xt+this.z*_t,this},setFromUnitVectors:(Kt=1e-6,function(oe,ge){return pt===void 0&&(pt=new Ke),(Xt=oe.dot(ge)+1)<Kt?(Xt=0,Math.abs(oe.x)>Math.abs(oe.z)?pt.set(-oe.y,oe.x,0):pt.set(0,-oe.z,oe.y)):pt.crossVectors(oe,ge),this.x=pt.x,this.y=pt.y,this.z=pt.z,this.w=Xt,this.normalize(),this})};var Wt=new ti({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),ui=new ti({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),Ut={CardboardV1:new dr({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new dr({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function st(oe,ge){this.viewer=Ut.CardboardV2,this.updateDeviceParams(oe),this.distortion=new B0(this.viewer.distortionCoefficients);for(var Me=0;Me<ge.length;Me++){var Ie=ge[Me];Ut[Ie.id]=new dr(Ie)}}function dr(oe){this.id=oe.id,this.label=oe.label,this.fov=oe.fov,this.interLensDistance=oe.interLensDistance,this.baselineLensDistance=oe.baselineLensDistance,this.screenLensDistance=oe.screenLensDistance,this.distortionCoefficients=oe.distortionCoefficients,this.inverseCoefficients=oe.inverseCoefficients}st.prototype.updateDeviceParams=function(oe){this.device=this.determineDevice_(oe)||this.device},st.prototype.getDevice=function(){return this.device},st.prototype.setViewer=function(oe){this.viewer=oe,this.distortion=new B0(this.viewer.distortionCoefficients)},st.prototype.determineDevice_=function(oe){if(!oe)return Re()?(console.warn("Using fallback iOS device measurements."),ui):(console.warn("Using fallback Android device measurements."),Wt);var ge=.0254,Me=ge/oe.xdpi,Ie=ge/oe.ydpi;return new ti({widthMeters:Me*er(),heightMeters:Ie*Ki(),bevelMeters:.001*oe.bevelMm})},st.prototype.getDistortedFieldOfViewLeftEye=function(){var oe=this.viewer,ge=this.device,Me=this.distortion,Ie=oe.screenLensDistance,Ue=(ge.widthMeters-oe.interLensDistance)/2,Xe=oe.interLensDistance/2,Ct=oe.baselineLensDistance-ge.bevelMeters,yt=ge.heightMeters-Ct,$t=He*Math.atan(Me.distort(Ue/Ie)),xt=He*Math.atan(Me.distort(Xe/Ie)),_t=He*Math.atan(Me.distort(Ct/Ie)),bi=He*Math.atan(Me.distort(yt/Ie));return{leftDegrees:Math.min($t,oe.fov),rightDegrees:Math.min(xt,oe.fov),downDegrees:Math.min(_t,oe.fov),upDegrees:Math.min(bi,oe.fov)}},st.prototype.getLeftEyeVisibleTanAngles=function(){var oe=this.viewer,ge=this.device,Me=this.distortion,Ie=Math.tan(-yn*oe.fov),Ue=Math.tan(yn*oe.fov),Xe=Math.tan(yn*oe.fov),Ct=Math.tan(-yn*oe.fov),yt=ge.widthMeters/4,$t=ge.heightMeters/2,xt=oe.baselineLensDistance-ge.bevelMeters-$t,_t=oe.interLensDistance/2-yt,bi=-xt,Bi=oe.screenLensDistance,Wi=Me.distort((_t-yt)/Bi),qi=Me.distort((bi+$t)/Bi),Zi=Me.distort((_t+yt)/Bi),rr=Me.distort((bi-$t)/Bi),vr=new Float32Array(4);return vr[0]=Math.max(Ie,Wi),vr[1]=Math.min(Ue,qi),vr[2]=Math.min(Xe,Zi),vr[3]=Math.max(Ct,rr),vr},st.prototype.getLeftEyeNoLensTanAngles=function(){var oe=this.viewer,ge=this.device,Me=this.distortion,Ie=new Float32Array(4),Ue=Me.distortInverse(Math.tan(-yn*oe.fov)),Xe=Me.distortInverse(Math.tan(yn*oe.fov)),Ct=Me.distortInverse(Math.tan(yn*oe.fov)),yt=Me.distortInverse(Math.tan(-yn*oe.fov)),$t=ge.widthMeters/4,xt=ge.heightMeters/2,_t=oe.baselineLensDistance-ge.bevelMeters-xt,bi=oe.interLensDistance/2-$t,Bi=-_t,Wi=oe.screenLensDistance,qi=(bi-$t)/Wi,Zi=(Bi+xt)/Wi,rr=(bi+$t)/Wi,vr=(Bi-xt)/Wi;return Ie[0]=Math.max(Ue,qi),Ie[1]=Math.min(Xe,Zi),Ie[2]=Math.min(Ct,rr),Ie[3]=Math.max(yt,vr),Ie},st.prototype.getLeftEyeVisibleScreenRect=function(oe){var ge=this.viewer,Me=this.device,Ie=ge.screenLensDistance,Ue=(Me.widthMeters-ge.interLensDistance)/2,Xe=ge.baselineLensDistance-Me.bevelMeters,Ct=(oe[0]*Ie+Ue)/Me.widthMeters,yt=(oe[1]*Ie+Xe)/Me.heightMeters,$t=(oe[2]*Ie+Ue)/Me.widthMeters,xt=(oe[3]*Ie+Xe)/Me.heightMeters;return{x:Ct,y:xt,width:$t-Ct,height:yt-xt}},st.prototype.getFieldOfViewLeftEye=function(oe){return oe?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},st.prototype.getFieldOfViewRightEye=function(oe){var ge=this.getFieldOfViewLeftEye(oe);return{leftDegrees:ge.rightDegrees,rightDegrees:ge.leftDegrees,upDegrees:ge.upDegrees,downDegrees:ge.downDegrees}},st.prototype.getUndistortedFieldOfViewLeftEye=function(){var oe=this.getUndistortedParams_();return{leftDegrees:He*Math.atan(oe.outerDist),rightDegrees:He*Math.atan(oe.innerDist),downDegrees:He*Math.atan(oe.bottomDist),upDegrees:He*Math.atan(oe.topDist)}},st.prototype.getUndistortedViewportLeftEye=function(){var oe=this.getUndistortedParams_(),ge=this.viewer,Me=this.device,Ie=ge.screenLensDistance,Ue=Me.widthMeters/Ie,Xe=Me.heightMeters/Ie,Ct=Me.width/Ue,yt=Me.height/Xe,$t=Math.round((oe.eyePosX-oe.outerDist)*Ct),xt=Math.round((oe.eyePosY-oe.bottomDist)*yt);return{x:$t,y:xt,width:Math.round((oe.eyePosX+oe.innerDist)*Ct)-$t,height:Math.round((oe.eyePosY+oe.topDist)*yt)-xt}},st.prototype.getUndistortedParams_=function(){var oe=this.viewer,ge=this.device,Me=this.distortion,Ie=oe.screenLensDistance,Ue=oe.interLensDistance/2/Ie,Xe=ge.widthMeters/Ie,Ct=ge.heightMeters/Ie,yt=Xe/2-Ue,$t=(oe.baselineLensDistance-ge.bevelMeters)/Ie,xt=oe.fov,_t=Me.distortInverse(Math.tan(yn*xt)),bi=Math.min(yt,_t),Bi=Math.min(Ue,_t),Wi=Math.min($t,_t);return{outerDist:bi,innerDist:Bi,topDist:Math.min(Ct-$t,_t),bottomDist:Wi,eyePosX:yt,eyePosY:$t}},st.Viewers=Ut;var Di={format:1,last_updated:"2019-11-09T17:36:14Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X00PD/*"},{ua:"ASUS_X00PD"}],dpi:245,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X008D/*"},{ua:"ASUS_X008D"}],dpi:282,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2 XL/*"},{ua:"Pixel 2 XL"}],dpi:537.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3 XL/*"},{ua:"Pixel 3 XL"}],dpi:[558.5,553.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3/*"},{ua:"Pixel 3"}],dpi:442.4,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2/*"},{ua:"Pixel 2"}],dpi:441,bw:3,ac:500},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/BLN-L24/*"},{ua:"HONORBLN-L24"}],dpi:480,bw:4,ac:500},{type:"android",rules:[{mdmh:"Huawei/*/BKL-L09/*"},{ua:"BKL-L09"}],dpi:403,bw:3.47,ac:500},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1001/*"},{ua:"ONE E1001"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1003/*"},{ua:"ONE E1003"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2001/*"},{ua:"ONE A2001"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2003/*"},{ua:"ONE A2003"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3000/*"},{ua:"ONEPLUS A3000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3003/*"},{ua:"ONEPLUS A3003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3010/*"},{ua:"ONEPLUS A3010"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6000/*"},{ua:"ONEPLUS A6000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6003/*"},{ua:"ONEPLUS A6003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6010/*"},{ua:"ONEPLUS A6010"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6013/*"},{ua:"ONEPLUS A6013"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955F/*"},{ua:"SM-G955F"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G960F/*"},{ua:"SM-G960F"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9600/*"},{ua:"SM-G9600"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960T/*"},{ua:"SM-G960T"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960N/*"},{ua:"SM-G960N"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960U/*"},{ua:"SM-G960U"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9608/*"},{ua:"SM-G9608"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960FD/*"},{ua:"SM-G960FD"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960W/*"},{ua:"SM-G960W"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G965F/*"},{ua:"SM-G965F"}],dpi:529,bw:2,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/EML-L29/*"},{ua:"EML-L29"}],dpi:428,bw:3.45,ac:500},{type:"android",rules:[{mdmh:"Nokia/*/Nokia 7.1/*"},{ua:"Nokia 7.1"}],dpi:[432,431.9],bw:3,ac:500},{type:"ios",rules:[{res:[1242,2688]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G570M/*"},{ua:"SM-G570M"}],dpi:320,bw:3.684,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G970F/*"},{ua:"SM-G970F"}],dpi:438,bw:2.281,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G973F/*"},{ua:"SM-G973F"}],dpi:550,bw:2.002,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G975F/*"},{ua:"SM-G975F"}],dpi:522,bw:2.054,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G977F/*"},{ua:"SM-G977F"}],dpi:505,bw:2.334,ac:500},{type:"ios",rules:[{res:[828,1792]}],dpi:326,bw:5,ac:500}]};function Mi(oe,ge){if(this.dpdb=Di,this.recalculateDeviceParams_(),oe){this.onDeviceParamsUpdated=ge;var Me=new XMLHttpRequest,Ie=this;Me.open("GET",oe,!0),Me.addEventListener("load",function(){Ie.loading=!1,Me.status>=200&&Me.status<=299?(Ie.dpdb=JSON.parse(Me.response),Ie.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),Me.send()}}function Ir(oe){this.xdpi=oe.xdpi,this.ydpi=oe.ydpi,this.bevelMm=oe.bevelMm}function Vi(oe,ge){this.set(oe,ge)}function _r(oe,ge){this.kFilter=oe,this.isDebug=ge,this.currentAccelMeasurement=new Vi,this.currentGyroMeasurement=new Vi,this.previousGyroMeasurement=new Vi,Re()?this.filterQ=new Bt(-1,0,0,1):this.filterQ=new Bt(1,0,0,1),this.previousFilterQ=new Bt,this.previousFilterQ.copy(this.filterQ),this.accelQ=new Bt,this.isOrientationInitialized=!1,this.estimatedGravity=new Ke,this.measuredGravity=new Ke,this.gyroIntegralQ=new Bt}function Li(oe,ge){this.predictionTimeS=oe,this.isDebug=ge,this.previousQ=new Bt,this.previousTimestampS=null,this.deltaQ=new Bt,this.outQ=new Bt}function wi(oe,ge,Me,Ie){this.yawOnly=Me,this.accelerometer=new Ke,this.gyroscope=new Ke,this.filter=new _r(oe,Ie),this.posePredictor=new Li(ge,Ie),this.isFirefoxAndroid=Je(),this.isIOS=Re();var Ue=Mt();this.isDeviceMotionInRadians=!this.isIOS&&Ue&&Ue<66,this.isWithoutDeviceMotion=kt()||Zt(),this.filterToWorldQ=new Bt,Re()?this.filterToWorldQ.setFromAxisAngle(new Ke(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new Ke(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new Bt,this.worldToScreenQ=new Bt,this.originalPoseAdjustQ=new Bt,this.originalPoseAdjustQ.setFromAxisAngle(new Ke(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),_i()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new Bt,this.orientationOut_=new Float32Array(4),this.start()}Mi.prototype.getDeviceParams=function(){return this.deviceParams},Mi.prototype.recalculateDeviceParams_=function(){var oe=this.calcDeviceParams_();oe?(this.deviceParams=oe,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},Mi.prototype.calcDeviceParams_=function(){var oe=this.dpdb;if(!oe)return console.error("DPDB not available."),null;if(oe.format!=1)return console.error("DPDB has unexpected format version."),null;if(!oe.devices||!oe.devices.length)return console.error("DPDB does not have a devices section."),null;var ge=navigator.userAgent||navigator.vendor||window.opera,Me=er(),Ie=Ki();if(!oe.devices)return console.error("DPDB has no devices section."),null;for(var Ue=0;Ue<oe.devices.length;Ue++){var Xe=oe.devices[Ue];if(Xe.rules)if(Xe.type=="ios"||Xe.type=="android"){if(Re()==(Xe.type=="ios")){for(var Ct=!1,yt=0;yt<Xe.rules.length;yt++){var $t=Xe.rules[yt];if(this.ruleMatches_($t,ge,Me,Ie)){Ct=!0;break}}if(Ct)return new Ir({xdpi:Xe.dpi[0]||Xe.dpi,ydpi:Xe.dpi[1]||Xe.dpi,bevelMm:Xe.bw})}}else console.warn("Device["+Ue+"] has invalid type.");else console.warn("Device["+Ue+"] has no rules section.")}return console.warn("No DPDB device match."),null},Mi.prototype.ruleMatches_=function(oe,ge,Me,Ie){if(!oe.ua&&!oe.res||(oe.ua&&oe.ua.substring(0,2)==="SM"&&(oe.ua=oe.ua.substring(0,7)),oe.ua&&ge.indexOf(oe.ua)<0))return!1;if(oe.res){if(!oe.res[0]||!oe.res[1])return!1;var Ue=oe.res[0],Xe=oe.res[1];if(Math.min(Me,Ie)!=Math.min(Ue,Xe)||Math.max(Me,Ie)!=Math.max(Ue,Xe))return!1}return!0},Vi.prototype.set=function(oe,ge){this.sample=oe,this.timestampS=ge},Vi.prototype.copy=function(oe){this.set(oe.sample,oe.timestampS)},_r.prototype.addAccelMeasurement=function(oe,ge){this.currentAccelMeasurement.set(oe,ge)},_r.prototype.addGyroMeasurement=function(oe,ge){this.currentGyroMeasurement.set(oe,ge);var Me=ge-this.previousGyroMeasurement.timestampS;Ri(Me)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},_r.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var oe=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,ge=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,oe);this.gyroIntegralQ.multiply(ge),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(ge);var Me=new Bt;Me.copy(this.filterQ),Me.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(Me),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var Ie=new Bt;Ie.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),Ie.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",He*Z0(Ie),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var Ue=new Bt;Ue.copy(this.filterQ),Ue.multiply(Ie),this.filterQ.slerp(Ue,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},_r.prototype.getOrientation=function(){return this.filterQ},_r.prototype.accelToQuaternion_=function(oe){var ge=new Ke;ge.copy(oe),ge.normalize();var Me=new Bt;return Me.setFromUnitVectors(new Ke(0,0,-1),ge),Me.inverse(),Me},_r.prototype.gyroToQuaternionDelta_=function(oe,ge){var Me=new Bt,Ie=new Ke;return Ie.copy(oe),Ie.normalize(),Me.setFromAxisAngle(Ie,oe.length()*ge),Me},Li.prototype.getPrediction=function(oe,ge,Me){if(!this.previousTimestampS)return this.previousQ.copy(oe),this.previousTimestampS=Me,oe;var Ie=new Ke;Ie.copy(ge),Ie.normalize();var Ue=ge.length();if(Ue<20*yn)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(He*Ue).toFixed(1)),this.outQ.copy(oe),this.previousQ.copy(oe),this.outQ;var Xe=Ue*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(Ie,Xe),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(oe),this.previousTimestampS=Me,this.outQ},wi.prototype.getPosition=function(){return null},wi.prototype.getOrientation=function(){var oe=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ)return this.deviceOrientationFixQ=this.deviceOrientationFixQ||(Me=new Bt().setFromAxisAngle(new Ke(0,0,-1),0),Ie=new Bt,window.orientation===-90?Ie.setFromAxisAngle(new Ke(0,1,0),Math.PI/-2):Ie.setFromAxisAngle(new Ke(0,1,0),Math.PI/2),Me.multiply(Ie)),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((ge=new Bt).setFromAxisAngle(new Ke(1,0,0),-Math.PI/2),ge),oe=this._deviceOrientationQ,(Ue=new Bt).copy(oe),Ue.multiply(this.deviceOrientationFilterToWorldQ),Ue.multiply(this.resetQ),Ue.multiply(this.worldToScreenQ),Ue.multiplyQuaternions(this.deviceOrientationFixQ,Ue),this.yawOnly&&(Ue.x=0,Ue.z=0,Ue.normalize()),this.orientationOut_[0]=Ue.x,this.orientationOut_[1]=Ue.y,this.orientationOut_[2]=Ue.z,this.orientationOut_[3]=Ue.w,this.orientationOut_;var ge,Me,Ie,Ue,Xe=this.filter.getOrientation();return oe=this.posePredictor.getPrediction(Xe,this.gyroscope,this.previousTimestampS),(Ue=new Bt).copy(this.filterToWorldQ),Ue.multiply(this.resetQ),Ue.multiply(oe),Ue.multiply(this.worldToScreenQ),this.yawOnly&&(Ue.x=0,Ue.z=0,Ue.normalize()),this.orientationOut_[0]=Ue.x,this.orientationOut_[1]=Ue.y,this.orientationOut_[2]=Ue.z,this.orientationOut_[3]=Ue.w,this.orientationOut_},wi.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),_i()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},wi.prototype.onDeviceOrientation_=function(oe){this._deviceOrientationQ=this._deviceOrientationQ||new Bt;var ge=oe.alpha,Me=oe.beta,Ie=oe.gamma;ge=(ge||0)*Math.PI/180,Me=(Me||0)*Math.PI/180,Ie=(Ie||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(Me,ge,-Ie)},wi.prototype.onDeviceMotion_=function(oe){this.updateDeviceMotion_(oe)},wi.prototype.updateDeviceMotion_=function(oe){var ge=oe.accelerationIncludingGravity,Me=oe.rotationRate,Ie=oe.timeStamp/1e3,Ue=Ie-this.previousTimestampS;return Ue<0?(ls("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=Ie)):Ue<=Te||Ue>ye?(ls("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=Ie)):(this.accelerometer.set(-ge.x,-ge.y,-ge.z),Me&&(si()?this.gyroscope.set(-Me.beta,Me.alpha,Me.gamma):this.gyroscope.set(Me.alpha,Me.beta,Me.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,Ie)),this.filter.addAccelMeasurement(this.accelerometer,Ie),void(this.previousTimestampS=Ie))},wi.prototype.onOrientationChange_=function(oe){this.setScreenTransform_()},wi.prototype.onMessage_=function(oe){var ge=oe.data;ge&&ge.type&&ge.type.toLowerCase()==="devicemotion"&&this.updateDeviceMotion_(ge.deviceMotionEvent)},wi.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new Ke(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new Ke(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},wi.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),Re()&&R0()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},wi.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var Ji=60,Qr=new Ke(1,0,0),ki=new Ke(0,0,1),Hr=new Bt;Hr.setFromAxisAngle(Qr,-Math.PI/2),Hr.multiply(new Bt().setFromAxisAngle(ki,Math.PI/2));var Xr=function(){function oe(ge){ue(this,oe),this.config=ge,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new Bt,this._outQ=new Bt,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this.init()}return ve(oe,[{key:"init",value:function(){var ge=null;try{(ge=new RelativeOrientationSensor({frequency:Ji,referenceFrame:"screen"})).addEventListener("error",this._onSensorError)}catch(Me){this.errors.push(Me),Me.name==="SecurityError"?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):Me.name==="ReferenceError"?this.useDeviceMotion():console.error(Me)}ge&&(this.api="sensor",this.sensor=ge,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start())}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new wi(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var ge=this.sensor.quaternion;this._sensorQ.set(ge[0],ge[1],ge[2],ge[3]);var Me=this._outQ;return Me.copy(Hr),Me.multiply(this._sensorQ),this.config.YAW_ONLY&&(Me.x=Me.z=0,Me.normalize()),this._out[0]=Me.x,this._out[1]=Me.y,this._out[2]=Me.z,this._out[3]=Me.w,this._out}},{key:"_onSensorError",value:function(ge){this.errors.push(ge.error),ge.error.name==="NotAllowedError"?console.error("Permission to access sensor was denied"):ge.error.name==="NotReadableError"?console.error("Sensor could not be read"):console.error(ge.error),this.useDeviceMotion()}},{key:"_onSensorRead",value:function(){}}]),oe}(),Yr="<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>";function gr(){this.loadIcon_();var oe=document.createElement("div");(Xe=oe.style).position="fixed",Xe.top=0,Xe.right=0,Xe.bottom=0,Xe.left=0,Xe.backgroundColor="gray",Xe.fontFamily="sans-serif",Xe.zIndex=1e6;var ge=document.createElement("img");ge.src=this.icon,(Xe=ge.style).marginLeft="25%",Xe.marginTop="25%",Xe.width="50%",oe.appendChild(ge);var Me=document.createElement("div");(Xe=Me.style).textAlign="center",Xe.fontSize="16px",Xe.lineHeight="24px",Xe.margin="24px 25%",Xe.width="50%",Me.innerHTML="Place your phone into your Cardboard viewer.",oe.appendChild(Me);var Ie=document.createElement("div");(Xe=Ie.style).backgroundColor="#CFD8DC",Xe.position="fixed",Xe.bottom=0,Xe.width="100%",Xe.height="48px",Xe.padding="14px 24px",Xe.boxSizing="border-box",Xe.color="#656A6B",oe.appendChild(Ie);var Ue=document.createElement("div");Ue.style.float="left",Ue.innerHTML="No Cardboard viewer?";var Xe,Ct=document.createElement("a");Ct.href="https://www.google.com/get/cardboard/get-cardboard/",Ct.innerHTML="get one",Ct.target="_blank",(Xe=Ct.style).float="right",Xe.fontWeight=600,Xe.textTransform="uppercase",Xe.borderLeft="1px solid gray",Xe.paddingLeft="24px",Xe.textDecoration="none",Xe.color="#656A6B",Ie.appendChild(Ue),Ie.appendChild(Ct),this.overlay=oe,this.text=Me,this.hide()}gr.prototype.show=function(oe){oe||this.overlay.parentElement?oe&&(this.overlay.parentElement&&this.overlay.parentElement!=oe&&this.overlay.parentElement.removeChild(this.overlay),oe.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var ge=this.overlay.querySelector("img").style;_i()?(ge.width="20%",ge.marginLeft="40%",ge.marginTop="3%"):(ge.width="50%",ge.marginLeft="25%",ge.marginTop="25%")},gr.prototype.hide=function(){this.overlay.style.display="none"},gr.prototype.showTemporarily=function(oe,ge){this.show(ge),this.timer=setTimeout(this.hide.bind(this),oe)},gr.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},gr.prototype.update=function(){this.disableShowTemporarily(),!_i()&&A0()?this.show():this.hide()},gr.prototype.loadIcon_=function(){this.icon=De("image/svg+xml",Yr)};var ir="CardboardV1",Fn="WEBVR_CARDBOARD_VIEWER",$0="webvr-polyfill-viewer-selector";function zr(oe){try{this.selectedKey=localStorage.getItem(Fn)}catch(ge){console.error("Failed to load viewer profile: %s",ge)}this.selectedKey||(this.selectedKey=oe||ir),this.dialog=this.createDialog_(st.Viewers),this.root=null,this.onChangeCallbacks_=[]}function r0(oe){return oe&&oe.__esModule&&Object.prototype.hasOwnProperty.call(oe,"default")?oe.default:oe}function m0(oe,ge){return oe(ge={exports:{}},ge.exports),ge.exports}zr.prototype.show=function(oe){this.root=oe,oe.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},zr.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},zr.prototype.getCurrentViewer=function(){return st.Viewers[this.selectedKey]},zr.prototype.getSelectedKey_=function(){var oe=this.dialog.querySelector("input[name=field]:checked");return oe?oe.id:null},zr.prototype.onChange=function(oe){this.onChangeCallbacks_.push(oe)},zr.prototype.fireOnChange_=function(oe){for(var ge=0;ge<this.onChangeCallbacks_.length;ge++)this.onChangeCallbacks_[ge](oe)},zr.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),this.selectedKey&&st.Viewers[this.selectedKey]){this.fireOnChange_(st.Viewers[this.selectedKey]);try{localStorage.setItem(Fn,this.selectedKey)}catch(oe){console.error("Failed to save viewer profile: %s",oe)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},zr.prototype.createDialog_=function(oe){var ge=document.createElement("div");ge.classList.add($0),ge.style.display="none";var Me=document.createElement("div");(Xe=Me.style).position="fixed",Xe.left=0,Xe.top=0,Xe.width="100%",Xe.height="100%",Xe.background="rgba(0, 0, 0, 0.3)",Me.addEventListener("click",this.hide.bind(this));var Ie=280,Ue=document.createElement("div"),Xe=Ue.style;for(var Ct in Xe.boxSizing="border-box",Xe.position="fixed",Xe.top="24px",Xe.left="50%",Xe.marginLeft=-Ie/2+"px",Xe.width=Ie+"px",Xe.padding="24px",Xe.overflow="hidden",Xe.background="#fafafa",Xe.fontFamily="'Roboto', sans-serif",Xe.boxShadow="0px 5px 20px #666",Ue.appendChild(this.createH1_("Select your viewer")),oe)Ue.appendChild(this.createChoice_(Ct,oe[Ct].label));return Ue.appendChild(this.createButton_("Save",this.onSave_.bind(this))),ge.appendChild(Me),ge.appendChild(Ue),ge},zr.prototype.createH1_=function(oe){var ge=document.createElement("h1"),Me=ge.style;return Me.color="black",Me.fontSize="20px",Me.fontWeight="bold",Me.marginTop=0,Me.marginBottom="24px",ge.innerHTML=oe,ge},zr.prototype.createChoice_=function(oe,ge){var Me=document.createElement("div");Me.style.marginTop="8px",Me.style.color="black";var Ie=document.createElement("input");Ie.style.fontSize="30px",Ie.setAttribute("id",oe),Ie.setAttribute("type","radio"),Ie.setAttribute("value",oe),Ie.setAttribute("name","field");var Ue=document.createElement("label");return Ue.style.marginLeft="4px",Ue.setAttribute("for",oe),Ue.innerHTML=ge,Me.appendChild(Ie),Me.appendChild(Ue),Me},zr.prototype.createButton_=function(oe,ge){var Me=document.createElement("button");Me.innerHTML=oe;var Ie=Me.style;return Ie.float="right",Ie.textTransform="uppercase",Ie.color="#1094f7",Ie.fontSize="14px",Ie.letterSpacing=0,Ie.border=0,Ie.background="none",Ie.marginTop="16px",Me.addEventListener("click",ge),Me},typeof window<"u"||B!==void 0||typeof self<"u";var D0=m0(function(oe,ge){(function(Me,Ie){oe.exports=Ie()})(0,function(){return function(Me){var Ie={};function Ue(Xe){if(Ie[Xe])return Ie[Xe].exports;var Ct=Ie[Xe]={i:Xe,l:!1,exports:{}};return Me[Xe].call(Ct.exports,Ct,Ct.exports,Ue),Ct.l=!0,Ct.exports}return Ue.m=Me,Ue.c=Ie,Ue.d=function(Xe,Ct,yt){Ue.o(Xe,Ct)||Object.defineProperty(Xe,Ct,{configurable:!1,enumerable:!0,get:yt})},Ue.n=function(Xe){var Ct=Xe&&Xe.__esModule?function(){return Xe.default}:function(){return Xe};return Ue.d(Ct,"a",Ct),Ct},Ue.o=function(Xe,Ct){return Object.prototype.hasOwnProperty.call(Xe,Ct)},Ue.p="",Ue(Ue.s=0)}([function(Me,Ie,Ue){var Xe=function(){function _t(bi,Bi){for(var Wi=0;Wi<Bi.length;Wi++){var qi=Bi[Wi];qi.enumerable=qi.enumerable||!1,qi.configurable=!0,"value"in qi&&(qi.writable=!0),Object.defineProperty(bi,qi.key,qi)}}return function(bi,Bi,Wi){return Bi&&_t(bi.prototype,Bi),Wi&&_t(bi,Wi),bi}}();function Ct(_t,bi){if(!(_t instanceof bi))throw new TypeError("Cannot call a class as a function")}var yt=Ue(1),$t=typeof navigator<"u"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,xt=function(){function _t(){Ct(this,_t),$t?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",yt),this.noSleepVideo.addEventListener("timeupdate",function(bi){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}.bind(this)))}return Xe(_t,[{key:"enable",value:function(){$t?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.href="/",window.setTimeout(window.stop,0)},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){$t?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),_t}();Me.exports=xt},function(Me,Ie,Ue){Me.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])})}),n0=r0(D0),x0=1e3,Vn=[0,0,.5,1],g0=[.5,0,.5,1],L0=window.requestAnimationFrame,s0=window.cancelAnimationFrame;function v0(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null}function hs(oe){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:oe.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:oe.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:oe.canPresent},maxLayers:{writable:!1,enumerable:!0,value:oe.maxLayers},hasOrientation:{enumerable:!0,get:function(){return tn("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),oe.hasOrientation}}})}function Pr(oe){var ge=!("wakelock"in(oe=oe||{}))||oe.wakelock;this.isPolyfilled=!0,this.displayId=x0++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return tn("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new hs({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,ge&&A0()&&(this.wakelock_=new n0)}Pr.prototype.getFrameData=function(oe){return as(oe,this._getPose(),this)},Pr.prototype.getPose=function(){return tn("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},Pr.prototype.resetPose=function(){return tn("VRDisplay.prototype.resetPose"),this._resetPose()},Pr.prototype.getImmediatePose=function(){return tn("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},Pr.prototype.requestAnimationFrame=function(oe){return L0(oe)},Pr.prototype.cancelAnimationFrame=function(oe){return s0(oe)},Pr.prototype.wrapForFullscreen=function(oe){if(Re())return oe;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var ge=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",ge.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==oe)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=oe,this.originalParent_=oe.parentElement,this.originalParent_||document.body.appendChild(oe),!this.fullscreenWrapper_.parentElement){var Me=this.fullscreenElement_.parentElement;Me.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),Me.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var Ie=this;function Ue(){if(Ie.fullscreenElement_){var Xe=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];Ie.fullscreenElement_.setAttribute("style",Xe.join("; ")+";")}}return Ue(),this.fullscreenWrapper_},Pr.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var oe=this.fullscreenElement_;this.fullscreenElementCachedStyle_?oe.setAttribute("style",this.fullscreenElementCachedStyle_):oe.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var ge=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(oe),this.originalParent_===ge?ge.insertBefore(oe,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(oe),ge.removeChild(this.fullscreenWrapper_),oe}},Pr.prototype.requestPresent=function(oe){var ge=this.isPresenting,Me=this;return oe instanceof Array||(tn("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),oe=[oe]),new Promise(function(Ie,Ue){if(Me.capabilities.canPresent)if(oe.length==0||oe.length>Me.capabilities.maxLayers)Ue(new Error("Invalid number of layers."));else{var Xe=oe[0];if(Xe.source){var Ct=Xe.leftBounds||Vn,yt=Xe.rightBounds||g0;if(ge){var $t=Me.layer_;$t.source!==Xe.source&&($t.source=Xe.source);for(var xt=0;xt<4;xt++)$t.leftBounds[xt]=Ct[xt],$t.rightBounds[xt]=yt[xt];return Me.wrapForFullscreen(Me.layer_.source),Me.updatePresent_(),void Ie()}if(Me.layer_={predistorted:Xe.predistorted,source:Xe.source,leftBounds:Ct.slice(0),rightBounds:yt.slice(0)},Me.waitingForPresent_=!1,Me.layer_&&Me.layer_.source){var _t=Me.wrapForFullscreen(Me.layer_.source),bi=function(){var Wi=Ur();Me.isPresenting=_t===Wi,Me.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(qi){console.error("screen.orientation.lock() failed due to",qi.message)}),Me.waitingForPresent_=!1,Me.beginPresent_(),Ie()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),Me.removeFullscreenWrapper(),Me.disableWakeLock(),Me.endPresent_(),Me.removeFullscreenListeners_()),Me.fireVRDisplayPresentChange_()},Bi=function(){Me.waitingForPresent_&&(Me.removeFullscreenWrapper(),Me.removeFullscreenListeners_(),Me.disableWakeLock(),Me.waitingForPresent_=!1,Me.isPresenting=!1,Ue(new Error("Unable to present.")))};Me.addFullscreenListeners_(_t,bi,Bi),p0(_t)?(Me.enableWakeLock(),Me.waitingForPresent_=!0):(Re()||Qe())&&(Me.enableWakeLock(),Me.isPresenting=!0,Me.beginPresent_(),Me.fireVRDisplayPresentChange_(),Ie())}Me.waitingForPresent_||Re()||(ln(),Ue(new Error("Unable to present.")))}else Ie()}else Ue(new Error("VRDisplay is not capable of presenting."))})},Pr.prototype.exitPresent=function(){var oe=this.isPresenting,ge=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise(function(Me,Ie){oe?(!ln()&&Re()&&(ge.endPresent_(),ge.fireVRDisplayPresentChange_()),Qe()&&(ge.removeFullscreenWrapper(),ge.removeFullscreenListeners_(),ge.endPresent_(),ge.fireVRDisplayPresentChange_()),Me()):Ie(new Error("Was not presenting to VRDisplay."))})},Pr.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},Pr.prototype.fireVRDisplayPresentChange_=function(){var oe=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(oe)},Pr.prototype.fireVRDisplayConnect_=function(){var oe=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(oe)},Pr.prototype.addFullscreenListeners_=function(oe,ge,Me){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=oe,this.fullscreenChangeHandler_=ge,this.fullscreenErrorHandler_=Me,ge&&(document.fullscreenEnabled?oe.addEventListener("fullscreenchange",ge,!1):document.webkitFullscreenEnabled?oe.addEventListener("webkitfullscreenchange",ge,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",ge,!1):document.msFullscreenEnabled&&oe.addEventListener("msfullscreenchange",ge,!1)),Me&&(document.fullscreenEnabled?oe.addEventListener("fullscreenerror",Me,!1):document.webkitFullscreenEnabled?oe.addEventListener("webkitfullscreenerror",Me,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",Me,!1):document.msFullscreenEnabled&&oe.addEventListener("msfullscreenerror",Me,!1))},Pr.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var oe=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var ge=this.fullscreenChangeHandler_;oe.removeEventListener("fullscreenchange",ge,!1),oe.removeEventListener("webkitfullscreenchange",ge,!1),document.removeEventListener("mozfullscreenchange",ge,!1),oe.removeEventListener("msfullscreenchange",ge,!1)}if(this.fullscreenErrorHandler_){var Me=this.fullscreenErrorHandler_;oe.removeEventListener("fullscreenerror",Me,!1),oe.removeEventListener("webkitfullscreenerror",Me,!1),document.removeEventListener("mozfullscreenerror",Me,!1),oe.removeEventListener("msfullscreenerror",Me,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},Pr.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},Pr.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},Pr.prototype.beginPresent_=function(){},Pr.prototype.endPresent_=function(){},Pr.prototype.submitFrame=function(oe){},Pr.prototype.getEyeParameters=function(oe){return null};var La={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},po={LEFT:"left",RIGHT:"right"};function hn(oe){var ge=os({},La);oe=os(ge,oe||{}),Pr.call(this,{wakelock:oe.MOBILE_WAKE_LOCK}),this.config=oe,this.displayName="Cardboard VRDisplay",this.capabilities=new hs({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new Xr(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new Mi(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new st(this.dpdb_.getDeviceParams(),oe.ADDITIONAL_VIEWERS),this.viewerSelector_=new zr(oe.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new gr),Re()&&window.addEventListener("resize",this.onResize_.bind(this))}return hn.prototype=Object.create(Pr.prototype),hn.prototype._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},hn.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},hn.prototype._getFieldOfView=function(oe){var ge;if(oe==po.LEFT)ge=this.deviceInfo_.getFieldOfViewLeftEye();else{if(oe!=po.RIGHT)return console.error("Invalid eye provided: %s",oe),null;ge=this.deviceInfo_.getFieldOfViewRightEye()}return ge},hn.prototype._getEyeOffset=function(oe){var ge;if(oe==po.LEFT)ge=[.5*-this.deviceInfo_.viewer.interLensDistance,0,0];else{if(oe!=po.RIGHT)return console.error("Invalid eye provided: %s",oe),null;ge=[.5*this.deviceInfo_.viewer.interLensDistance,0,0]}return ge},hn.prototype.getEyeParameters=function(oe){var ge=this._getEyeOffset(oe),Me=this._getFieldOfView(oe),Ie={offset:ge,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(Ie,"fieldOfView",{enumerable:!0,get:function(){return tn("VRFieldOfView","VRFrameData's projection matrices"),Me}}),Ie},hn.prototype.onDeviceParamsUpdated_=function(oe){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(oe),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},hn.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},hn.prototype.beginPresent_=function(){var oe=this.layer_.source.getContext("webgl");oe||(oe=this.layer_.source.getContext("experimental-webgl")),oe||(oe=this.layer_.source.getContext("webgl2")),oe&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(oe.canvas.width=er()*this.bufferScale_,oe.canvas.height=Ki()*this.bufferScale_,this.cardboardUI_=new Tr(oe)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new Tr(oe)),this.distorter_=new et(oe,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen(function(ge){this.viewerSelector_.show(this.layer_.source.parentElement),ge.stopPropagation(),ge.preventDefault()}.bind(this),function(ge){this.exitPresent(),ge.stopPropagation(),ge.preventDefault()}.bind(this)),this.rotateInstructions_&&(_i()&&A0()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},hn.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},hn.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},hn.prototype.submitFrame=function(oe){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var ge=this.layer_.source.getContext("webgl");ge||(ge=this.layer_.source.getContext("experimental-webgl")),ge||(ge=this.layer_.source.getContext("webgl2"));var Me=ge.canvas;Me.width==this.lastWidth&&Me.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=Me.width,this.lastHeight=Me.height,this.cardboardUI_.render()}},hn.prototype.onOrientationChange_=function(oe){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},hn.prototype.onResize_=function(oe){if(this.layer_){var ge=this.layer_.source.getContext("webgl");ge||(ge=this.layer_.source.getContext("experimental-webgl")),ge||(ge=this.layer_.source.getContext("webgl2"));var Me=["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"];ge.canvas.setAttribute("style",Me.join("; ")+";"),J0(ge.canvas)}},hn.prototype.onViewerChanged_=function(oe){this.deviceInfo_.setViewer(oe),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},hn.prototype.fireVRDisplayDeviceParamsChange_=function(){var oe=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(oe)},hn.VRFrameData=v0,hn.VRDisplay=Pr,hn}()}),V=(N=C)&&N.__esModule&&Object.prototype.hasOwnProperty.call(N,"default")?N.default:N,z={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",PROVIDE_MOBILE_VRDISPLAY:!0,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function H(k){this.config=A(A({},z),k),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in navigator,this.native={},this.native.getVRDisplays=navigator.getVRDisplays,this.native.VRFrameData=window.VRFrameData,this.native.VRDisplay=window.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&Q())&&(this.enable(),this.getVRDisplays().then(function(K){K&&K[0]&&K[0].fireVRDisplayConnect_&&K[0].fireVRDisplayConnect_()}))}H.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(Q()){var k=new V({ADDITIONAL_VIEWERS:this.config.ADDITIONAL_VIEWERS,DEFAULT_VIEWER:this.config.DEFAULT_VIEWER,MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(k)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays},H.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var k=this.native.VRFrameData,K=new this.native.VRFrameData,Z=this.native.VRDisplay.prototype.getFrameData;window.VRDisplay.prototype.getFrameData=function(ee){ee instanceof k?Z.call(this,ee):(Z.call(this,K),ee.pose=K.pose,P(K.leftProjectionMatrix,ee.leftProjectionMatrix),P(K.rightProjectionMatrix,ee.rightProjectionMatrix),P(K.leftViewMatrix,ee.leftViewMatrix),P(K.rightViewMatrix,ee.rightViewMatrix))}}navigator.getVRDisplays=this.getVRDisplays.bind(this),window.VRDisplay=V.VRDisplay,window.VRFrameData=V.VRFrameData},H.prototype.getVRDisplays=function(){var k=this;return this.config,this.hasNative?this.native.getVRDisplays.call(navigator).then(function(K){return K.length>0?K:k.getPolyfillDisplays()}):Promise.resolve(this.getPolyfillDisplays())},H.version="0.10.12",H.VRFrameData=V.VRFrameData,H.VRDisplay=V.VRDisplay;var G=Object.freeze({default:H}),$=G&&H||G;return B!==void 0&&B.window&&(B.document||(B.document=B.window.document),B.navigator||(B.navigator=B.window.navigator)),$}()},9443:M=>{var E=/\n/,e=/\s/;function B(P,A,C,V){var z=P.indexOf(A,C);return z===-1||z>V?V:z}function N(P){return e.test(P)}function Q(P,A,C,V){return{start:A,end:A+Math.min(V,C-A)}}M.exports=function(P,A){return M.exports.lines(P,A).map(function(C){return P.substring(C.start,C.end)}).join(`
`)},M.exports.lines=function(P,A){if((A=A||{}).width===0&&A.mode!=="nowrap")return[];P=P||"";var C=typeof A.width=="number"?A.width:Number.MAX_VALUE,V=Math.max(0,A.start||0),z=typeof A.end=="number"?A.end:P.length,H=A.mode,G=A.measure||Q;return H==="pre"?function($,k,K,Z,ee){for(var he=[],ue=K,ve=K;ve<Z&&ve<k.length;ve++){var be=k.charAt(ve),Te=E.test(be);if(Te||ve===Z-1){var ye=$(k,ue,Te?ve:ve+1,ee);he.push(ye),ue=ve+1}}return he}(G,P,V,z,C):function($,k,K,Z,ee,he){var ue=[],ve=ee;for(he==="nowrap"&&(ve=Number.MAX_VALUE);K<Z&&K<k.length;){for(var be=B(k,`
`,K,Z);K<be&&N(k.charAt(K));)K++;var Te=$(k,K,be,ve),ye=K+(Te.end-Te.start),De=ye+1;if(ye<be){for(;ye>K&&!N(k.charAt(ye));)ye--;if(ye===K)De>K+1&&De--,ye=De;else for(De=ye;ye>K&&N(k.charAt(ye-1));)ye--}if(ye>=K){var Ce=$(k,K,ye,ve);ue.push(Ce)}K=De}return ue}(G,P,V,z,C,H)}},7377:(M,E,e)=>{"use strict";var B=e(1192),N=e(6534),Q=e(9069),P=e(2786);function A(z,H,G){var $=z;return N(H)?(G=H,typeof z=="string"&&($={uri:z})):$=P(H,{uri:z}),$.callback=G,$}function C(z,H,G){return V(H=A(z,H,G))}function V(z){if(z.callback===void 0)throw new Error("callback argument missing");var H=!1,G=function(Qe,ot,Je){H||(H=!0,z.callback(Qe,ot,Je))};function $(){var Qe=void 0;if(Qe=he.response?he.response:he.responseText||function(ot){try{if(ot.responseType==="document")return ot.responseXML;var Je=ot.responseXML&&ot.responseXML.documentElement.nodeName==="parsererror";if(ot.responseType===""&&!Je)return ot.responseXML}catch{}return null}(he),Ce)try{Qe=JSON.parse(Qe)}catch{}return Qe}function k(Qe){return clearTimeout(ue),Qe instanceof Error||(Qe=new Error(""+(Qe||"Unknown XMLHttpRequest Error"))),Qe.statusCode=0,G(Qe,Re)}function K(){if(!ee){var Qe;clearTimeout(ue),Qe=z.useXDR&&he.status===void 0?200:he.status===1223?204:he.status;var ot=Re,Je=null;return Qe!==0?(ot={body:$(),statusCode:Qe,method:be,headers:{},url:ve,rawRequest:he},he.getAllResponseHeaders&&(ot.headers=Q(he.getAllResponseHeaders()))):Je=new Error("Internal XMLHttpRequest Error"),G(Je,ot,ot.body)}}var Z,ee,he=z.xhr||null;he||(he=z.cors||z.useXDR?new C.XDomainRequest:new C.XMLHttpRequest);var ue,ve=he.url=z.uri||z.url,be=he.method=z.method||"GET",Te=z.body||z.data,ye=he.headers=z.headers||{},De=!!z.sync,Ce=!1,Re={body:void 0,headers:{},statusCode:0,method:be,url:ve,rawRequest:he};if("json"in z&&z.json!==!1&&(Ce=!0,ye.accept||ye.Accept||(ye.Accept="application/json"),be!=="GET"&&be!=="HEAD"&&(ye["content-type"]||ye["Content-Type"]||(ye["Content-Type"]="application/json"),Te=JSON.stringify(z.json===!0?Te:z.json))),he.onreadystatechange=function(){he.readyState===4&&setTimeout(K,0)},he.onload=K,he.onerror=k,he.onprogress=function(){},he.onabort=function(){ee=!0},he.ontimeout=k,he.open(be,ve,!De,z.username,z.password),De||(he.withCredentials=!!z.withCredentials),!De&&z.timeout>0&&(ue=setTimeout(function(){if(!ee){ee=!0,he.abort("timeout");var Qe=new Error("XMLHttpRequest timeout");Qe.code="ETIMEDOUT",k(Qe)}},z.timeout)),he.setRequestHeader)for(Z in ye)ye.hasOwnProperty(Z)&&he.setRequestHeader(Z,ye[Z]);else if(z.headers&&!function(Qe){for(var ot in Qe)if(Qe.hasOwnProperty(ot))return!1;return!0}(z.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in z&&(he.responseType=z.responseType),"beforeSend"in z&&typeof z.beforeSend=="function"&&z.beforeSend(he),he.send(Te||null),he}M.exports=C,M.exports.default=C,C.XMLHttpRequest=B.XMLHttpRequest||function(){},C.XDomainRequest="withCredentials"in new C.XMLHttpRequest?C.XMLHttpRequest:B.XDomainRequest,function(z,H){for(var G=0;G<z.length;G++)H(z[G])}(["get","put","post","patch","head","delete"],function(z){C[z==="delete"?"del":z]=function(H,G,$){return(G=A(H,G,$)).method=z.toUpperCase(),V(G)}})},6774:M=>{M.exports=self.DOMParser!==void 0?function(E){return new self.DOMParser().parseFromString(E,"application/xml")}:self.ActiveXObject!==void 0&&new self.ActiveXObject("Microsoft.XMLDOM")?function(E){var e=new self.ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(E),e}:function(E){var e=document.createElement("div");return e.innerHTML=E,e}},2786:M=>{M.exports=function(){for(var e={},B=0;B<arguments.length;B++){var N=arguments[B];for(var Q in N)E.call(N,Q)&&(e[Q]=N[Q])}return e};var E=Object.prototype.hasOwnProperty},9715:(M,E,e)=>{var B=e(3515).registerComponent,N=e(8903).debug("components:anchored:warn");M.exports.Component=B("anchored",{schema:{persistent:{default:!1}},init:function(){var Q=this.el.sceneEl.getAttribute("webxr"),P=Q.optionalFeatures;P.indexOf("anchors")===-1&&(P.push("anchors"),this.el.sceneEl.setAttribute("webxr",Q)),this.auxQuaternion=new THREE.Quaternion,this.onEnterVR=this.onEnterVR.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR)},onEnterVR:function(){this.anchor=void 0,this.requestPersistentAnchorPending=this.data.persistent,this.requestAnchorPending=!this.data.persistent},tick:function(){var Q,P,A,C=this.el.sceneEl,V=C.renderer.xr,z=this.el.object3D;(C.is("ar-mode")||C.is("vr-mode"))&&(!this.anchor&&this.requestPersistentAnchorPending&&this.restorePersistentAnchor(),!this.anchor&&this.requestAnchorPending&&this.createAnchor(),this.anchor&&(Q=C.frame,P=V.getReferenceSpace(),A=Q.getPose(this.anchor.anchorSpace,P),z.matrix.elements=A.transform.matrix,z.matrix.decompose(z.position,z.rotation,z.scale)))},createAnchor:async function(Q,P){var A,C,V,z,H=this.el.sceneEl,G=H.renderer.xr,$=this.el.object3D;Q=Q||$.position,P=P||this.auxQuaternion.setFromEuler($.rotation),function(k){var K=k.renderer.xr.getSession();return K&&K.restorePersistentAnchor}(H)?(this.anchor&&this.deleteAnchor(),A=H.frame,C=G.getReferenceSpace(),V=new XRRigidTransform({x:Q.x,y:Q.y,z:Q.z},{x:P.x,y:P.y,z:P.z,w:P.w}),this.requestAnchorPending=!1,z=await A.createAnchor(V,C),this.data.persistent&&(this.el.id?(this.persistentHandle=await z.requestPersistentHandle(),localStorage.setItem(this.el.id,this.persistentHandle)):N("The anchor won't be persisted because the entity has no assigned id.")),H.object3D.attach(this.el.object3D),this.anchor=z):N("This browser doesn't support the WebXR anchors module")},restorePersistentAnchor:async function(){var Q,P=this.el.sceneEl.renderer.xr.getSession(),A=P.persistentAnchors;if(this.requestPersistentAnchorPending=!1,!this.el.id)return N("The entity associated to the persistent anchor cannot be retrieved because it doesn't have an assigned id."),void(this.requestAnchorPending=!0);if(A){Q=localStorage.getItem(this.el.id);for(var C=0;C<A.length;++C)if(Q===A[C]){this.anchor=await P.restorePersistentAnchor(A[C]),this.anchor&&(this.persistentHandle=A[C]);break}this.anchor||(this.requestAnchorPending=!0)}else this.requestPersistentAnchorPending=!0},deleteAnchor:function(){var Q,P=this.anchor;P&&(Q=this.el.sceneEl.renderer.xr.getSession(),P.delete(),this.el.sceneEl.object3D.add(this.el.object3D),this.persistentHandle&&Q.deletePersistentAnchor(this.persistentHandle),this.anchor=void 0)}})},4649:(M,E,e)=>{var B=e(2446).Z,N=e(3515).components,Q=e(3515).registerComponent,P=e(2666),A=e(8903),C=new P.Color,V=new P.Color,z=A.entity.getComponentProperty,H=A.entity.setComponentProperty,G={},$="color",k="rotation",K="components";function Z(ye){ye.x=P.MathUtils.degToRad(ye.x),ye.y=P.MathUtils.degToRad(ye.y),ye.z=P.MathUtils.degToRad(ye.z)}function ee(ye,De,Ce){var Re;for(Re=0;Re<De.length;Re++)ye.addEventListener(De[Re],Ce)}function he(ye,De,Ce){var Re;for(Re=0;Re<De.length;Re++)ye.removeEventListener(De[Re],Ce)}function ue(ye,De){var Ce,Re,Qe;for(Re=be(De),Qe=ye,Ce=0;Ce<Re.length;Ce++)Qe=Qe[Re[Ce]];if(Qe===void 0)throw console.log(ye),new Error("[animation] property ("+De+") could not be found");return Qe}function ve(ye,De,Ce,Re){var Qe,ot,Je,Mt;for(De.startsWith("object3D.rotation")&&(Ce=P.MathUtils.degToRad(Ce)),ot=be(De),Mt=ye,Qe=0;Qe<ot.length-1;Qe++)Mt=Mt[ot[Qe]];Je=ot[ot.length-1],Re!==$?Mt[Je]=Ce:"r"in Mt[Je]?(Mt[Je].r=Ce.r,Mt[Je].g=Ce.g,Mt[Je].b=Ce.b):(Mt[Je].x=Ce.r,Mt[Je].y=Ce.g,Mt[Je].z=Ce.b)}function be(ye){return ye in G||(G[ye]=ye.split(".")),G[ye]}function Te(ye){return ye.isRawProperty||ye.property.startsWith(K)||ye.property.startsWith("object3D")}M.exports.Component=Q("animation",{schema:{autoplay:{default:!0},delay:{default:0},dir:{default:""},dur:{default:1e3},easing:{default:"easeInQuad"},elasticity:{default:400},enabled:{default:!0},from:{default:""},loop:{default:0,parse:function(ye){return ye===!0||ye==="true"||ye!==!1&&ye!=="false"&&parseInt(ye,10)}},property:{default:""},startEvents:{type:"array"},pauseEvents:{type:"array"},resumeEvents:{type:"array"},round:{default:!1},to:{default:""},type:{default:""},isRawProperty:{default:!1}},multiple:!0,init:function(){var ye=this;this.eventDetail={name:this.attrName},this.time=0,this.animation=null,this.animationIsPlaying=!1,this.onStartEvent=this.onStartEvent.bind(this),this.beginAnimation=this.beginAnimation.bind(this),this.pauseAnimation=this.pauseAnimation.bind(this),this.resumeAnimation=this.resumeAnimation.bind(this),this.fromColor={},this.toColor={},this.targets={},this.targetsArray=[],this.updateConfigForDefault=this.updateConfigForDefault.bind(this),this.updateConfigForRawColor=this.updateConfigForRawColor.bind(this),this.config={complete:function(){ye.animationIsPlaying=!1,ye.el.emit("animationcomplete",ye.eventDetail,!1),ye.id&&ye.el.emit("animationcomplete__"+ye.id,ye.eventDetail,!1)}}},update:function(ye){var De=this.config,Ce=this.data;this.animationIsPlaying=!1,this.data.enabled&&Ce.property&&(De.autoplay=!1,De.direction=Ce.dir,De.duration=Ce.dur,De.easing=Ce.easing,De.elasticity=Ce.elasticity,De.loop=Ce.loop,De.round=Ce.round,this.createAndStartAnimation())},tick:function(ye,De){this.animationIsPlaying&&(this.time+=De,this.animation.tick(this.time))},remove:function(){this.pauseAnimation(),this.removeEventListeners()},pause:function(){this.paused=!0,this.pausedWasPlaying=this.animationIsPlaying,this.pauseAnimation(),this.removeEventListeners()},play:function(){this.paused&&(this.paused=!1,this.addEventListeners(),this.pausedWasPlaying&&(this.resumeAnimation(),this.pausedWasPlaying=!1))},createAndStartAnimation:function(){var ye=this.data;this.updateConfig(),this.animationIsPlaying=!1,this.animation=B(this.config),this.animation.began=!0,this.removeEventListeners(),this.addEventListeners(),!ye.autoplay||ye.startEvents&&ye.startEvents.length||(ye.delay?setTimeout(this.beginAnimation,ye.delay):this.beginAnimation())},beginAnimation:function(){this.updateConfig(),this.animation.began=!0,this.time=0,this.animationIsPlaying=!0,this.stopRelatedAnimations(),this.el.emit("animationbegin",this.eventDetail,!1)},pauseAnimation:function(){this.animationIsPlaying=!1},resumeAnimation:function(){this.animationIsPlaying=!0},onStartEvent:function(){this.data.enabled&&(this.updateConfig(),this.animation&&this.animation.pause(),this.animation=B(this.config),this.data.delay?setTimeout(this.beginAnimation,this.data.delay):this.beginAnimation())},updateConfigForRawColor:function(){var ye,De,Ce,Re=this.config,Qe=this.data,ot=this.el;if(!this.waitComponentInitRawProperty(this.updateConfigForRawColor)){for(De in ye=Qe.from===""?ue(ot,Qe.property):Qe.from,Ce=Qe.to,this.setColorConfig(ye,Ce),ye=this.fromColor,Ce=this.toColor,this.targetsArray.length=0,this.targetsArray.push(ye),Re.targets=this.targetsArray,Ce)Re[De]=Ce[De];var Je;Re.update=(Je={},function(Mt){var Zt;(Zt=Mt.animatables[0].target).r===Je.r&&Zt.g===Je.g&&Zt.b===Je.b||ve(ot,Qe.property,Zt,Qe.type)})}},updateConfigForDefault:function(){var ye,De,Ce,Re,Qe=this.config,ot=this.data,Je=this.el;this.waitComponentInitRawProperty(this.updateConfigForDefault)||(ye=ot.from===""?Te(ot)?ue(Je,ot.property):z(Je,ot.property):ot.from,Ce=ot.to,isNaN(ye||Ce)?(ye=ye&&ye.toString(),Ce=Ce&&Ce.toString()):(ye=parseFloat(ye),Ce=parseFloat(Ce)),(De=ot.to==="true"||ot.to==="false"||ot.to===!0||ot.to===!1)&&(ye=ot.from==="true"||ot.from===!0?1:0,Ce=ot.to==="true"||ot.to===!0?1:0),this.targets.aframeProperty=ye,Qe.targets=this.targets,Qe.aframeProperty=Ce,Qe.update=function(Mt){var Zt;(Zt=Mt.animatables[0].target.aframeProperty)!==Re&&(Re=Zt,De&&(Zt=Zt>=1),Te(ot)?ve(Je,ot.property,Zt,ot.type):H(Je,ot.property,Zt))})},updateConfigForVector:function(){var ye,De,Ce,Re,Qe=this.config,ot=this.data,Je=this.el;for(ye in De=ot.from!==""?A.coordinates.parse(ot.from):z(Je,ot.property),Ce=A.coordinates.parse(ot.to),ot.property===k&&(Z(De),Z(Ce)),this.targetsArray.length=0,this.targetsArray.push(De),Qe.targets=this.targetsArray,Ce)Qe[ye]=Ce[ye];ot.property!=="position"&&ot.property!==k&&ot.property!=="scale"?Qe.update=function(){var Mt={};return function(Zt){var kt=Zt.animatables[0].target;kt.x===Mt.x&&kt.y===Mt.y&&kt.z===Mt.z||(Mt.x=kt.x,Mt.y=kt.y,Mt.z=kt.z,H(Je,ot.property,kt))}}():Qe.update=(Re={},function(Mt){var Zt=Mt.animatables[0].target;Zt.x===Re.x&&Zt.y===Re.y&&Zt.z===Re.z||(Re.x=Zt.x,Re.y=Zt.y,Re.z=Zt.z,Je.object3D[ot.property].set(Zt.x,Zt.y,Zt.z))})},updateConfig:function(){var ye,De,Ce,Re,Qe,ot,Je;De=this.el,Ce=this.data.property,Qe=(ot=Ce.split("."))[0],Je=ot[1],ye=(Re=De.components[Qe]||N[Qe])?Je&&!Re.schema[Je]?null:Je?Re.schema[Je].type:Re.schema.type:null,Te(this.data)&&this.data.type===$?this.updateConfigForRawColor():ye==="vec2"||ye==="vec3"||ye==="vec4"?this.updateConfigForVector():this.updateConfigForDefault()},waitComponentInitRawProperty:function(ye){var De,Ce=this.data,Re=this.el,Qe=this;return Ce.from===""&&!!Ce.property.startsWith(K)&&(De=be(Ce.property)[1],!Re.components[De]&&(Re.addEventListener("componentinitialized",function ot(Je){Je.detail.name===De&&(ye(),Qe.animation=B(Qe.config),Re.removeEventListener("componentinitialized",ot))}),!0))},stopRelatedAnimations:function(){var ye,De;for(De in this.el.components)ye=this.el.components[De],De!==this.attrName&&ye.name==="animation"&&ye.animationIsPlaying&&ye.data.property===this.data.property&&(ye.animationIsPlaying=!1)},addEventListeners:function(){var ye=this.data,De=this.el;ee(De,ye.startEvents,this.onStartEvent),ee(De,ye.pauseEvents,this.pauseAnimation),ee(De,ye.resumeEvents,this.resumeAnimation)},removeEventListeners:function(){var ye=this.data,De=this.el;he(De,ye.startEvents,this.onStartEvent),he(De,ye.pauseEvents,this.pauseAnimation),he(De,ye.resumeEvents,this.resumeAnimation)},setColorConfig:function(ye,De){C.set(ye),V.set(De),ye=this.fromColor,De=this.toColor,ye.r=C.r,ye.g=C.g,ye.b=C.b,De.r=V.r,De.g=V.g,De.b=V.b}})},9541:(M,E,e)=>{var B=e(3515).registerComponent,N=e(2666);M.exports.Component=B("camera",{schema:{active:{default:!0},far:{default:1e4},fov:{default:80,min:0},near:{default:.005,min:0},spectator:{default:!1},zoom:{default:1,min:0}},init:function(){var Q,P=this.el;Q=this.camera=new N.PerspectiveCamera,P.setObject3D("camera",Q)},update:function(Q){var P=this.data,A=this.camera;A.aspect=P.aspect||window.innerWidth/window.innerHeight,A.far=P.far,A.fov=P.fov,A.near=P.near,A.zoom=P.zoom,A.updateProjectionMatrix(),this.updateActiveCamera(Q),this.updateSpectatorCamera(Q)},updateActiveCamera:function(Q){var P=this.data,A=this.el,C=this.system;Q&&Q.active===P.active||P.spectator||(P.active&&C.activeCameraEl!==A?C.setActiveCamera(A):P.active||C.activeCameraEl!==A||C.disableActiveCamera())},updateSpectatorCamera:function(Q){var P=this.data,A=this.el,C=this.system;Q&&Q.spectator===P.spectator||(P.spectator&&C.spectatorCameraEl!==A?C.setSpectatorCamera(A):P.spectator||C.spectatorCameraEl!==A||C.disableSpectatorCamera())},remove:function(){this.el.removeObject3D("camera")}})},57:(M,E,e)=>{var B,N,Q,P,A=e(3515).registerComponent,C=e(8903),V="click",z="mouseup",H="cursor-fusing",G="cursor-hovering",$="cursor-hovered",k={DOWN:["mousedown","touchstart"],UP:["mouseup","touchend"]},K={DOWN:["selectstart"],UP:["selectend"]},Z="a-mouse-cursor-hover";M.exports.Component=A("cursor",{dependencies:["raycaster"],schema:{downEvents:{default:[]},fuse:{default:C.device.isMobile()},fuseTimeout:{default:1500,min:0},mouseCursorStylesEnabled:{default:!0},upEvents:{default:[]},rayOrigin:{default:"entity",oneOf:["mouse","entity","xrselect"]}},after:["tracked-controls"],multiple:!0,init:function(){var ee=this;this.fuseTimeout=void 0,this.cursorDownEl=null,this.intersectedEl=null,this.canvasBounds=document.body.getBoundingClientRect(),this.isCursorDown=!1,this.activeXRInput=null,this.updateCanvasBounds=C.debounce(function(){ee.canvasBounds=ee.el.sceneEl.canvas.getBoundingClientRect()},500),this.eventDetail={},this.intersectedEventDetail={cursorEl:this.el},this.onCursorDown=this.onCursorDown.bind(this),this.onCursorUp=this.onCursorUp.bind(this),this.onIntersection=this.onIntersection.bind(this),this.onIntersectionCleared=this.onIntersectionCleared.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onEnterVR=this.onEnterVR.bind(this)},update:function(ee){this.data.rayOrigin!==ee.rayOrigin&&this.updateMouseEventListeners()},tick:function(){var ee=this.el.sceneEl.frame,he=this.activeXRInput;this.data.rayOrigin==="xrselect"&&ee&&he&&this.onMouseMove({frame:ee,inputSource:he,type:"fakeselectevent"})},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){var ee=this.el;ee.removeState(G),ee.removeState(H),clearTimeout(this.fuseTimeout),this.intersectedEl&&this.intersectedEl.removeState($),this.removeEventListeners()},addEventListeners:function(){var ee,he=this.data,ue=this.el,ve=this;function be(){ee=ue.sceneEl.canvas,he.downEvents.length||he.upEvents.length||(k.DOWN.forEach(function(Te){ee.addEventListener(Te,ve.onCursorDown,{passive:!1})}),k.UP.forEach(function(Te){ee.addEventListener(Te,ve.onCursorUp,{passive:!1})}))}(ee=ue.sceneEl.canvas)?be():ue.sceneEl.addEventListener("render-target-loaded",be),he.downEvents.forEach(function(Te){ue.addEventListener(Te,ve.onCursorDown)}),he.upEvents.forEach(function(Te){ue.addEventListener(Te,ve.onCursorUp)}),ue.addEventListener("raycaster-intersection",this.onIntersection),ue.addEventListener("raycaster-closest-entity-changed",this.onIntersection),ue.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),ue.sceneEl.addEventListener("rendererresize",this.updateCanvasBounds),ue.sceneEl.addEventListener("enter-vr",this.onEnterVR),window.addEventListener("resize",this.updateCanvasBounds),window.addEventListener("scroll",this.updateCanvasBounds),this.updateMouseEventListeners()},removeEventListeners:function(){var ee,he=this.data,ue=this.el,ve=this;!(ee=ue.sceneEl.canvas)||he.downEvents.length||he.upEvents.length||(k.DOWN.forEach(function(be){ee.removeEventListener(be,ve.onCursorDown)}),k.UP.forEach(function(be){ee.removeEventListener(be,ve.onCursorUp)})),he.downEvents.forEach(function(be){ue.removeEventListener(be,ve.onCursorDown)}),he.upEvents.forEach(function(be){ue.removeEventListener(be,ve.onCursorUp)}),ue.removeEventListener("raycaster-intersection",this.onIntersection),ue.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),ee.removeEventListener("mousemove",this.onMouseMove),ee.removeEventListener("touchstart",this.onMouseMove),ee.removeEventListener("touchmove",this.onMouseMove),ue.sceneEl.removeEventListener("rendererresize",this.updateCanvasBounds),ue.sceneEl.removeEventListener("enter-vr",this.onEnterVR),window.removeEventListener("resize",this.updateCanvasBounds),window.removeEventListener("scroll",this.updateCanvasBounds)},updateMouseEventListeners:function(){var ee,he=this.el;(ee=he.sceneEl.canvas).removeEventListener("mousemove",this.onMouseMove),ee.removeEventListener("touchmove",this.onMouseMove),he.setAttribute("raycaster","useWorldCoordinates",!1),this.data.rayOrigin==="mouse"&&(ee.addEventListener("mousemove",this.onMouseMove),ee.addEventListener("touchmove",this.onMouseMove,{passive:!1}),he.setAttribute("raycaster","useWorldCoordinates",!0),this.updateCanvasBounds())},onMouseMove:(B=new THREE.Vector3,N=new THREE.Vector2,Q=new THREE.Vector3,P={origin:Q,direction:B},function(ee){var he,ue,ve,be,Te,ye,De,Ce=this.canvasBounds,Re=this.el.sceneEl.camera;Re.parent.updateMatrixWorld(),he=(ue=ee.type==="touchmove"||ee.type==="touchstart"?ee.touches.item(0):ee).clientX-Ce.left,ve=ue.clientY-Ce.top,N.x=he/Ce.width*2-1,N.y=-ve/Ce.height*2+1,this.data.rayOrigin!=="xrselect"||ee.type!=="selectstart"&&ee.type!=="fakeselectevent"?ee.type==="fakeselectout"?(B.set(0,1,0),Q.set(0,9999,0)):Re&&Re.isPerspectiveCamera?(Q.setFromMatrixPosition(Re.matrixWorld),B.set(N.x,N.y,.5).unproject(Re).sub(Q).normalize()):Re&&Re.isOrthographicCamera?(Q.set(N.x,N.y,(Re.near+Re.far)/(Re.near-Re.far)).unproject(Re),B.set(0,0,-1).transformDirection(Re.matrixWorld)):console.error("AFRAME.Raycaster: Unsupported camera type: "+Re.type):(be=ee.frame,Te=ee.inputSource,ye=this.el.renderer.xr.getReferenceSpace(),De=be.getPose(Te.targetRaySpace,ye).transform,B.set(0,0,-1),B.applyQuaternion(De.orientation),Q.copy(De.position)),this.el.setAttribute("raycaster",P),ee.type==="touchmove"&&ee.preventDefault()}),onCursorDown:function(ee){this.isCursorDown=!0,this.data.rayOrigin==="mouse"&&ee.type==="touchstart"&&(this.onMouseMove(ee),this.el.components.raycaster.checkIntersections(),ee.preventDefault()),this.data.rayOrigin==="xrselect"&&ee.type==="selectstart"&&(this.activeXRInput=ee.inputSource,this.onMouseMove(ee),this.el.components.raycaster.checkIntersections(),this.el.components.raycaster.intersectedEls.length&&this.el.sceneEl.components["ar-hit-test"]!==void 0&&this.el.sceneEl.getAttribute("ar-hit-test").enabled&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!1),this.reenableARHitTest=!0)),this.twoWayEmit("mousedown",ee),this.cursorDownEl=this.intersectedEl},onCursorUp:function(ee){if(this.isCursorDown){this.isCursorDown=!1;var he=this.data;this.twoWayEmit(z,ee),this.reenableARHitTest===!0&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!0),this.reenableARHitTest=void 0),this.cursorDownEl&&this.cursorDownEl!==this.intersectedEl&&(this.intersectedEventDetail.intersection=null,this.cursorDownEl.emit(z,this.intersectedEventDetail)),he.fuse&&he.rayOrigin!=="mouse"&&he.rayOrigin!=="xrselect"||!this.intersectedEl||this.cursorDownEl!==this.intersectedEl||this.twoWayEmit(V,ee),he.rayOrigin==="xrselect"&&this.activeXRInput===ee.inputSource&&this.onMouseMove({type:"fakeselectout"}),this.activeXRInput=null,this.cursorDownEl=null,ee.type==="touchend"&&ee.preventDefault()}},onIntersection:function(ee){var he,ue,ve,be,Te=this.el;ue=ee.detail.els[0]===Te?1:0,be=ee.detail.intersections[ue],(ve=ee.detail.els[ue])&&this.intersectedEl!==ve&&(this.intersectedEl&&(he=this.el.components.raycaster.getIntersection(this.intersectedEl))&&he.distance<=be.distance||(this.clearCurrentIntersection(!0),this.setIntersection(ve,be)))},onIntersectionCleared:function(ee){ee.detail.clearedEls.indexOf(this.intersectedEl)!==-1&&this.clearCurrentIntersection()},onEnterVR:function(){this.clearCurrentIntersection(!0);var ee=this.el.sceneEl.xrSession,he=this;ee&&this.data.rayOrigin!=="mouse"&&(K.DOWN.forEach(function(ue){ee.addEventListener(ue,he.onCursorDown)}),K.UP.forEach(function(ue){ee.addEventListener(ue,he.onCursorUp)}))},setIntersection:function(ee,he){var ue=this.el,ve=this.data,be=this;this.intersectedEl!==ee&&(this.intersectedEl=ee,ue.addState(G),ee.addState($),this.twoWayEmit("mouseenter"),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.add(Z),ve.fuseTimeout!==0&&ve.fuse&&ve.rayOrigin!=="xrselect"&&ve.rayOrigin!=="mouse"&&(ue.addState(H),this.twoWayEmit("fusing"),this.fuseTimeout=setTimeout(function(){ue.removeState(H),be.twoWayEmit(V)},ve.fuseTimeout)))},clearCurrentIntersection:function(ee){var he,ue,ve=this.el;this.intersectedEl&&(this.intersectedEl.removeState($),ve.removeState(G),ve.removeState(H),this.twoWayEmit("mouseleave"),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.remove(Z),this.intersectedEl=null,clearTimeout(this.fuseTimeout),ee!==!0&&(ue=this.el.components.raycaster.intersections).length!==0&&(he=ue[ue[0].object.el===ve?1:0])&&this.setIntersection(he.object.el,he))},twoWayEmit:function(ee,he){var ue,ve=this.el,be=this.intersectedEl;function Te(ye,De){he instanceof MouseEvent?ye.mouseEvent=he:typeof TouchEvent<"u"&&he instanceof TouchEvent&&(ye.touchEvent=he)}ue=this.el.components.raycaster.getIntersection(be),this.eventDetail.intersectedEl=be,this.eventDetail.intersection=ue,Te(this.eventDetail),ve.emit(ee,this.eventDetail),be&&(this.intersectedEventDetail.intersection=ue,Te(this.intersectedEventDetail),be.emit(ee,this.intersectedEventDetail))}})},9577:(M,E,e)=>{var B=e(3515).registerComponent,N=e(6600),Q=N.checkControllerPresentAndSetup,P=N.emitIfAxesChanged,A=N.onButtonEvent,C="generic";M.exports.Component=B("generic-tracked-controller-controls",{schema:{hand:{default:""},defaultModel:{default:!0},defaultModelColor:{default:"gray"},orientationOffset:{type:"vec3"},disabled:{default:!1}},after:["tracked-controls"],mapping:{axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick"]},bindMethods:function(){this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var V=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(z){A(z.detail.id,"down",V)},this.onButtonUp=function(z){A(z.detail.id,"up",V)},this.onButtonTouchStart=function(z){A(z.detail.id,"touchstart",V)},this.onButtonTouchEnd=function(z){A(z.detail.id,"touchend",V)},this.controllerPresent=!1,this.wasControllerConnected=!1,this.lastControllerCheck=0,this.bindMethods(),this.el.addEventListener("controllerconnected",function(z){z.detail.name!==V.name&&(V.wasControllerConnected=!0,V.removeEventListeners(),V.removeControllersUpdateListener())})},addEventListeners:function(){var V=this.el;V.addEventListener("buttonchanged",this.onButtonChanged),V.addEventListener("buttondown",this.onButtonDown),V.addEventListener("buttonup",this.onButtonUp),V.addEventListener("touchstart",this.onButtonTouchStart),V.addEventListener("touchend",this.onButtonTouchEnd),V.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var V=this.el;V.removeEventListener("buttonchanged",this.onButtonChanged),V.removeEventListener("buttondown",this.onButtonDown),V.removeEventListener("buttonup",this.onButtonUp),V.removeEventListener("touchstart",this.onButtonTouchStart),V.removeEventListener("touchend",this.onButtonTouchEnd),V.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var V=this.data,z=V.hand?V.hand:void 0;Q(this,C,{hand:z,iterateControllerProfiles:!0})},play:function(){this.wasControllerConnected||(this.checkIfControllerPresent(),this.addControllersUpdateListener())},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var V=this.el,z=this.data;this.el.components["tracked-controls"]?this.removeEventListeners():(V.setAttribute("tracked-controls",{hand:z.hand,idPrefix:C,orientationOffset:z.orientationOffset,iterateControllerProfiles:!0}),this.data.defaultModel&&this.initDefaultModel())},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.wasControllerConnected&&this.checkIfControllerPresent()},onButtonChanged:function(V){var z=this.mapping.buttons[V.detail.id];z&&this.el.emit(z+"changed",V.detail.state)},onAxisMoved:function(V){P(this,this.mapping.axes,V)},initDefaultModel:function(){var V=this.modelEl=document.createElement("a-entity");V.setAttribute("geometry",{primitive:"sphere",radius:.03}),V.setAttribute("material",{color:this.data.color}),this.el.appendChild(V),this.el.emit("controllermodelready",{name:"generic-tracked-controller-controls",model:this.modelEl,rayOrigin:{origin:{x:0,y:0,z:-.01},direction:{x:0,y:0,z:-1}}})}})},2503:(M,E,e)=>{var B=e(4863).xZ,N=e(4863).ib,Q=e(3515).registerComponent,P=e(2666),A=new P.BufferGeometry;M.exports.Component=Q("geometry",{schema:{buffer:{default:!0},primitive:{default:"box",oneOf:N,schemaChange:!0},skipCache:{default:!1}},init:function(){this.geometry=null},update:function(C){var V,z=this.data,H=this.el,G=this.system;this.geometry&&(G.unuseGeometry(C),this.geometry=null),this.geometry=G.getOrCreateGeometry(z),(V=H.getObject3D("mesh"))?V.geometry=this.geometry:((V=new P.Mesh).geometry=this.geometry,this.el.getAttribute("material")||(V.material=new P.MeshStandardMaterial({color:16777215*Math.random(),metalness:0,roughness:.5})),H.setObject3D("mesh",V))},remove:function(){this.system.unuseGeometry(this.data),this.el.getObject3D("mesh").geometry=A,this.geometry=null},updateSchema:function(C){var V=this.oldData&&this.oldData.primitive,z=C.primitive,H=B[z]&&B[z].schema;if(!H)throw new Error("Unknown geometry schema `"+z+"`");V&&V===z||this.extendSchema(H)}})},3647:(M,E,e)=>{var B=e(3515).registerComponent,N=e(2666),Q=e(8903).debug("components:gltf-model:warn");M.exports.Component=B("gltf-model",{schema:{type:"model"},init:function(){var P=this,A=this.system.getDRACOLoader(),C=this.system.getMeshoptDecoder(),V=this.system.getKTX2Loader();this.model=null,this.loader=new N.GLTFLoader,A&&this.loader.setDRACOLoader(A),this.ready=C?C.then(function(z){P.loader.setMeshoptDecoder(z)}):Promise.resolve(),V&&this.loader.setKTX2Loader(V)},update:function(){var P=this,A=this.el,C=this.data;C&&(this.remove(),this.ready.then(function(){P.loader.load(C,function(V){P.model=V.scene||V.scenes[0],P.model.animations=V.animations,A.setObject3D("mesh",P.model),A.emit("model-loaded",{format:"gltf",model:P.model})},void 0,function(V){var z=V&&V.message?V.message:"Failed to load glTF model";Q(z),A.emit("model-error",{format:"gltf",src:C})})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},3924:(M,E,e)=>{(0,e(3515).registerComponent)("grabbable",{init:function(){this.el.setAttribute("obb-collider","centerModel: true")}})},2346:(M,E,e)=>{var B=e(3515).registerComponent,N=e(8309).AFRAME_CDN_ROOT,Q={toonLeft:N+"controllers/hands/leftHand.glb",toonRight:N+"controllers/hands/rightHand.glb",lowPolyLeft:N+"controllers/hands/leftHandLow.glb",lowPolyRight:N+"controllers/hands/rightHandLow.glb",highPolyLeft:N+"controllers/hands/leftHandHigh.glb",highPolyRight:N+"controllers/hands/rightHandHigh.glb"},P="Point",A="Fist",C="Thumb Up",V={};function z(H,G){var $;if(H)return($=V[H])==="grip"?$+(G?"close":"open"):$==="point"?$+(G?"up":"down"):$==="pointing"||$==="pistol"?$+(G?"start":"end"):void 0}V[A]="grip",V[C]="pistol",V[P]="pointing",M.exports.Component=B("hand-controls",{schema:{color:{default:"white",type:"color"},hand:{default:"left"},handModelStyle:{default:"lowPoly",oneOf:["lowPoly","highPoly","toon"]}},after:["tracked-controls"],init:function(){var H=this,G=this.el;this.pressedButtons={},this.touchedButtons={},this.loader=new THREE.GLTFLoader,this.loader.setCrossOrigin("anonymous"),this.onGripDown=function(){H.handleButton("grip","down")},this.onGripUp=function(){H.handleButton("grip","up")},this.onTrackpadDown=function(){H.handleButton("trackpad","down")},this.onTrackpadUp=function(){H.handleButton("trackpad","up")},this.onTrackpadTouchStart=function(){H.handleButton("trackpad","touchstart")},this.onTrackpadTouchEnd=function(){H.handleButton("trackpad","touchend")},this.onTriggerDown=function(){H.handleButton("trigger","down")},this.onTriggerUp=function(){H.handleButton("trigger","up")},this.onTriggerTouchStart=function(){H.handleButton("trigger","touchstart")},this.onTriggerTouchEnd=function(){H.handleButton("trigger","touchend")},this.onGripTouchStart=function(){H.handleButton("grip","touchstart")},this.onGripTouchEnd=function(){H.handleButton("grip","touchend")},this.onThumbstickDown=function(){H.handleButton("thumbstick","down")},this.onThumbstickUp=function(){H.handleButton("thumbstick","up")},this.onAorXTouchStart=function(){H.handleButton("AorX","touchstart")},this.onAorXTouchEnd=function(){H.handleButton("AorX","touchend")},this.onBorYTouchStart=function(){H.handleButton("BorY","touchstart")},this.onBorYTouchEnd=function(){H.handleButton("BorY","touchend")},this.onSurfaceTouchStart=function(){H.handleButton("surface","touchstart")},this.onSurfaceTouchEnd=function(){H.handleButton("surface","touchend")},this.onControllerConnected=this.onControllerConnected.bind(this),this.onControllerDisconnected=this.onControllerDisconnected.bind(this),G.addEventListener("controllerconnected",this.onControllerConnected),G.addEventListener("controllerdisconnected",this.onControllerDisconnected),G.object3D.visible=!1},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(H,G){var $=this.el.getObject3D("mesh");$&&$.mixer&&$.mixer.update(G/1e3)},onControllerConnected:function(){this.el.object3D.visible=!0},onControllerDisconnected:function(){this.el.object3D.visible=!1},addEventListeners:function(){var H=this.el;H.addEventListener("gripdown",this.onGripDown),H.addEventListener("gripup",this.onGripUp),H.addEventListener("trackpaddown",this.onTrackpadDown),H.addEventListener("trackpadup",this.onTrackpadUp),H.addEventListener("trackpadtouchstart",this.onTrackpadTouchStart),H.addEventListener("trackpadtouchend",this.onTrackpadTouchEnd),H.addEventListener("triggerdown",this.onTriggerDown),H.addEventListener("triggerup",this.onTriggerUp),H.addEventListener("triggertouchstart",this.onTriggerTouchStart),H.addEventListener("triggertouchend",this.onTriggerTouchEnd),H.addEventListener("griptouchstart",this.onGripTouchStart),H.addEventListener("griptouchend",this.onGripTouchEnd),H.addEventListener("thumbstickdown",this.onThumbstickDown),H.addEventListener("thumbstickup",this.onThumbstickUp),H.addEventListener("abuttontouchstart",this.onAorXTouchStart),H.addEventListener("abuttontouchend",this.onAorXTouchEnd),H.addEventListener("bbuttontouchstart",this.onBorYTouchStart),H.addEventListener("bbuttontouchend",this.onBorYTouchEnd),H.addEventListener("xbuttontouchstart",this.onAorXTouchStart),H.addEventListener("xbuttontouchend",this.onAorXTouchEnd),H.addEventListener("ybuttontouchstart",this.onBorYTouchStart),H.addEventListener("ybuttontouchend",this.onBorYTouchEnd),H.addEventListener("surfacetouchstart",this.onSurfaceTouchStart),H.addEventListener("surfacetouchend",this.onSurfaceTouchEnd)},removeEventListeners:function(){var H=this.el;H.removeEventListener("gripdown",this.onGripDown),H.removeEventListener("gripup",this.onGripUp),H.removeEventListener("trackpaddown",this.onTrackpadDown),H.removeEventListener("trackpadup",this.onTrackpadUp),H.removeEventListener("trackpadtouchstart",this.onTrackpadTouchStart),H.removeEventListener("trackpadtouchend",this.onTrackpadTouchEnd),H.removeEventListener("triggerdown",this.onTriggerDown),H.removeEventListener("triggerup",this.onTriggerUp),H.removeEventListener("triggertouchstart",this.onTriggerTouchStart),H.removeEventListener("triggertouchend",this.onTriggerTouchEnd),H.removeEventListener("griptouchstart",this.onGripTouchStart),H.removeEventListener("griptouchend",this.onGripTouchEnd),H.removeEventListener("thumbstickdown",this.onThumbstickDown),H.removeEventListener("thumbstickup",this.onThumbstickUp),H.removeEventListener("abuttontouchstart",this.onAorXTouchStart),H.removeEventListener("abuttontouchend",this.onAorXTouchEnd),H.removeEventListener("bbuttontouchstart",this.onBorYTouchStart),H.removeEventListener("bbuttontouchend",this.onBorYTouchEnd),H.removeEventListener("xbuttontouchstart",this.onAorXTouchStart),H.removeEventListener("xbuttontouchend",this.onAorXTouchEnd),H.removeEventListener("ybuttontouchstart",this.onBorYTouchStart),H.removeEventListener("ybuttontouchend",this.onBorYTouchEnd),H.removeEventListener("surfacetouchstart",this.onSurfaceTouchStart),H.removeEventListener("surfacetouchend",this.onSurfaceTouchEnd)},update:function(H){var G,$=this.el,k=this.data.hand,K=this.data.handModelStyle,Z=this.data.color,ee=this;if(G={hand:k,model:!1},k!==H){var he=Q[K+k.charAt(0).toUpperCase()+k.slice(1)];this.loader.load(he,function(ue){var ve=ue.scene.children[0],be=k==="left"?Math.PI/2:-Math.PI/2,Te=$.sceneEl.hasWebXR?-Math.PI/2:0;ve.mixer=new THREE.AnimationMixer(ve),ee.clips=ue.animations,$.setObject3D("mesh",ve),ve.traverse(function(ye){ye.isMesh&&(ye.material.color=new THREE.Color(Z))}),ve.position.set(0,0,0),ve.rotation.set(Te,0,be),$.setAttribute("magicleap-controls",G),$.setAttribute("vive-controls",G),$.setAttribute("oculus-touch-controls",G),$.setAttribute("pico-controls",G),$.setAttribute("windows-motion-controls",G),$.setAttribute("hp-mixed-reality-controls",G)})}},remove:function(){this.el.removeObject3D("mesh")},handleButton:function(H,G){var $,k=G==="down",K=G==="touchstart";if(G.indexOf("touch")===0){if(K===this.touchedButtons[H])return;this.touchedButtons[H]=K}else{if(k===this.pressedButtons[H])return;this.pressedButtons[H]=k}$=this.gesture,this.gesture=this.determineGesture(),this.gesture!==$&&(this.animateGesture(this.gesture,$),this.emitGestureEvents(this.gesture,$))},determineGesture:function(){var H,G,$,k=this.pressedButtons.grip,K=this.pressedButtons.surface||this.touchedButtons.surface,Z=this.pressedButtons.trackpad||this.touchedButtons.trackpad,ee=this.pressedButtons.trigger||this.touchedButtons.trigger,he=this.touchedButtons.AorX||this.touchedButtons.BorY;return G=this.el.components["tracked-controls"],($=G&&G.controller)&&($.id&&$.id.indexOf("OpenVR ")===0||$.profiles&&$.profiles[0]&&$.profiles[0]==="htc-vive")?k||ee?H=A:Z&&(H=P):k?H=K||he||Z?ee?A:P:ee?C:"Point + Thumb":ee&&(H="Hold"),H},getClip:function(H){var G,$;for($=0;$<this.clips.length;$++)if((G=this.clips[$]).name===H)return G},animateGesture:function(H,G){H?this.playAnimation(H||"Open",G,!1):this.playAnimation(G,G,!0)},emitGestureEvents:function(H,G){var $,k=this.el;G!==H&&(($=z(G,!1))&&k.emit($),($=z(H,!0))&&k.emit($))},playAnimation:function(H,G,$){var k,K,Z=this.el.getObject3D("mesh");if(Z){if(k=this.getClip(H),K=Z.mixer.clipAction(k),$)return K.paused=!1,void(K.timeScale=-1);if(K.clampWhenFinished=!0,K.loop=THREE.LoopOnce,K.repetitions=0,K.timeScale=1,K.time=0,K.weight=1,!G)return Z.mixer.stopAllAction(),void K.play();k=this.getClip(G),K.reset(),K.play(),Z.mixer.clipAction(k).crossFadeTo(K,.15,!0)}}})},6655:(M,E,e)=>{var B,N=e(3515).registerComponent,Q=e(1956).F,P=e(6600).checkControllerPresentAndSetup,A=e(8309).AFRAME_CDN_ROOT,C=A+"controllers/oculus-hands/v4/left.glb",V=A+"controllers/oculus-hands/v4/right.glb",z=["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"];M.exports.Component=N("hand-tracking-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},modelStyle:{default:"mesh",oneOf:["dots","mesh"]},modelColor:{default:"white"},modelOpacity:{default:1}},after:["tracked-controls"],bindMethods:function(){this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this)},addEventListeners:function(){this.el.addEventListener("model-loaded",this.onModelLoaded);for(var H=0;H<this.jointEls.length;++H)this.jointEls[H].object3D.visible=!0},removeEventListeners:function(){this.el.removeEventListener("model-loaded",this.onModelLoaded);for(var H=0;H<this.jointEls.length;++H)this.jointEls[H].object3D.visible=!1},init:function(){var H=this.el.sceneEl,G=H.getAttribute("webxr"),$=G.optionalFeatures;$.indexOf("hand-tracking")===-1&&($.push("hand-tracking"),H.setAttribute("webxr",G)),this.wristObject3D=new THREE.Object3D,this.el.sceneEl.object3D.add(this.wristObject3D),this.onModelLoaded=this.onModelLoaded.bind(this),this.onChildAttached=this.onChildAttached.bind(this),this.jointEls=[],this.controllerPresent=!1,this.isPinched=!1,this.pinchEventDetail={position:new THREE.Vector3,wristRotation:new THREE.Quaternion},this.indexTipPosition=new THREE.Vector3,this.hasPoses=!1,this.jointPoses=new Float32Array(16*z.length),this.jointRadii=new Float32Array(z.length),this.bindMethods(),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.updateReferenceSpace),this.el.sceneEl.addEventListener("exit-vr",this.updateReferenceSpace),this.el.addEventListener("child-attached",this.onChildAttached),this.el.object3D.visible=!1,this.wristObject3D.visible=!1},onChildAttached:function(H){this.addChildEntity(H.detail.el)},update:function(){this.updateModelMaterial()},updateModelMaterial:function(){var H=this.jointEls,G=this.skinnedMesh,$=this.data.modelOpacity!==1;G&&(this.skinnedMesh.material.color.set(this.data.modelColor),this.skinnedMesh.material.transparent=$,this.skinnedMesh.material.opacity=this.data.modelOpacity);for(var k=0;k<H.length;k++)H[k].setAttribute("material",{color:this.data.modelColor,transparent:$,opacity:this.data.modelOpacity})},updateReferenceSpace:function(){var H=this,G=this.el.sceneEl.xrSession;if(this.referenceSpace=void 0,G){var $=H.el.sceneEl.systems.webxr.sessionReferenceSpaceType;G.requestReferenceSpace($).then(function(k){H.referenceSpace=k}).catch(function(k){throw H.el.sceneEl.systems.webxr.warnIfFeatureNotRequested($,"tracked-controls-webxr uses reference space "+$),k})}},checkIfControllerPresent:function(){var H=this.data,G=H.hand?H.hand:void 0;P(this,"",{hand:G,iterateControllerProfiles:!0,handTracking:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},tick:function(){var H=this.el.sceneEl,G=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,$=H.frame,k=this.el.components["tracked-controls-webxr"],K=this.referenceSpace;G&&$&&K&&k&&(this.hasPoses=!1,G.hand&&(this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),this.hasPoses=$.fillPoses(G.hand.values(),K,this.jointPoses)&&$.fillJointRadii(G.hand.values(),this.jointRadii),this.updateHandModel(),this.detectGesture(),this.updateWristObject()))},updateWristObject:(B=new THREE.Matrix4,function(){var H=this.wristObject3D;H&&this.hasPoses&&(B.fromArray(this.jointPoses,0),H.position.setFromMatrixPosition(B),H.quaternion.setFromRotationMatrix(B))}),updateHandModel:function(){this.data.modelStyle==="dots"&&this.updateHandDotsModel(),this.data.modelStyle==="mesh"&&this.updateHandMeshModel()},getBone:function(H){for(var G=this.bones,$=0;$<G.length;$++)if(G[$].name===H)return G[$];return null},updateHandMeshModel:function(){var H=new THREE.Matrix4;return function(){var G=0,$=this.jointPoses,k=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller;if(k&&this.mesh&&(this.mesh.visible=!1,this.hasPoses))for(var K of k.hand.values()){var Z=this.getBone(K.jointName);Z!=null&&(this.mesh.visible=!0,H.fromArray($,16*G),Z.position.setFromMatrixPosition(H),Z.quaternion.setFromRotationMatrix(H)),G++}}}(),updateHandDotsModel:function(){for(var H,G,$=this.jointPoses,k=this.jointRadii,K=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,Z=0;Z<K.hand.size;Z++)G=(H=this.jointEls[Z]).object3D,H.object3D.visible=this.hasPoses,this.hasPoses&&(G.matrix.fromArray($,16*Z),G.matrix.decompose(G.position,G.rotation,G.scale),H.setAttribute("scale",{x:k[Z],y:k[Z],z:k[Z]}))},detectGesture:function(){this.detectPinch()},detectPinch:function(){var H=new THREE.Vector3,G=new THREE.Matrix4;return function(){var $=this.indexTipPosition,k=this.pinchEventDetail;if(this.hasPoses){H.setFromMatrixPosition(G.fromArray(this.jointPoses,64)),$.setFromMatrixPosition(G.fromArray(this.jointPoses,144)),k.wristRotation.setFromRotationMatrix(G.fromArray(this.jointPoses,0));var K=$.distanceTo(H);K<.015&&this.isPinched===!1&&(this.isPinched=!0,this.pinchDistance=K,k.position.copy($).add(H).multiplyScalar(.5),this.el.emit("pinchstarted",k)),K>this.pinchDistance+.1*this.pinchDistance&&this.isPinched===!0&&(this.isPinched=!1,k.position.copy($).add(H).multiplyScalar(.5),this.el.emit("pinchended",k)),this.isPinched&&(k.position.copy($).add(H).multiplyScalar(.5),this.el.emit("pinchmoved",k))}}}(),pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var H=this.el,G=this.data;H.setAttribute("tracked-controls",{id:"",hand:G.hand,iterateControllerProfiles:!0,handTrackingEnabled:!0}),this.mesh?this.mesh!==H.getObject3D("mesh")&&H.setObject3D("mesh",this.mesh):this.initDefaultModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){var H,G=this.el;this.checkIfControllerPresent(),H=G.components["tracked-controls"]&&G.components["tracked-controls"].controller,this.mesh&&H&&H.hand&&H.hand instanceof XRHand&&G.setObject3D("mesh",this.mesh)},initDefaultModel:function(){var H=this.data;H.modelStyle==="dots"&&this.initDotsModel(),H.modelStyle==="mesh"&&this.initMeshHandModel(),this.el.object3D.visible=!0,this.wristObject3D.visible=!0},initDotsModel:function(){if(this.jointEls.length===0){for(var H=0;H<z.length;++H){var G=this.jointEl=document.createElement("a-entity");G.setAttribute("geometry",{primitive:"sphere",radius:1}),G.object3D.visible=!1,this.el.appendChild(G),this.jointEls.push(G)}this.updateModelMaterial()}},initMeshHandModel:function(){var H=this.data.hand==="left"?C:V;this.el.setAttribute("gltf-model",H)},onModelLoaded:function(){var H=this.mesh=this.el.getObject3D("mesh").children[0],G=this.skinnedMesh=H.getObjectByProperty("type","SkinnedMesh");this.skinnedMesh&&(this.bones=G.skeleton.bones,this.el.removeObject3D("mesh"),H.position.set(0,0,0),H.rotation.set(0,0,0),G.frustumCulled=!1,G.material=new THREE.MeshStandardMaterial,this.updateModelMaterial(),this.setupChildrenEntities(),this.el.setObject3D("mesh",H))},setupChildrenEntities:function(){for(var H=this.el.children,G=0;G<H.length;++G)H[G]instanceof Q&&this.addChildEntity(H[G])},addChildEntity:function(H){H instanceof Q&&this.wristObject3D.add(H.object3D)}})},5290:(M,E,e)=>{var B=e(3515).registerComponent,N=e(2666);B("hand-tracking-grab-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},color:{type:"color",default:"white"},hoverColor:{type:"color",default:"#538df1"},hoverEnabled:{default:!1}},init:function(){var Q,P=this.el,A=this.data;Q=A.hand==="right"?"components.hand-tracking-controls.bones.3":"components.hand-tracking-controls.bones.21",P.setAttribute("hand-tracking-controls",{hand:A.hand}),P.setAttribute("obb-collider",{trackedObject3D:Q,size:.04}),this.auxMatrix=new N.Matrix4,this.auxQuaternion=new N.Quaternion,this.auxQuaternion2=new N.Quaternion,this.auxVector=new N.Vector3,this.auxVector2=new N.Vector3,this.grabbingObjectPosition=new N.Vector3,this.grabbedObjectPosition=new N.Vector3,this.grabbedObjectPositionDelta=new N.Vector3,this.grabDeltaPosition=new N.Vector3,this.grabInitialRotation=new N.Quaternion,this.onCollisionStarted=this.onCollisionStarted.bind(this),this.el.addEventListener("obbcollisionstarted",this.onCollisionStarted),this.onCollisionEnded=this.onCollisionEnded.bind(this),this.el.addEventListener("obbcollisionended",this.onCollisionEnded),this.onPinchStarted=this.onPinchStarted.bind(this),this.el.addEventListener("pinchstarted",this.onPinchStarted),this.onPinchEnded=this.onPinchEnded.bind(this),this.el.addEventListener("pinchended",this.onPinchEnded),this.onPinchMoved=this.onPinchMoved.bind(this),this.el.addEventListener("pinchmoved",this.onPinchMoved)},transferEntityOwnership:function(){for(var Q,P=this.el.sceneEl.querySelectorAll("[hand-tracking-grab-controls]"),A=0;A<P.length;++A)(Q=P[A].components["hand-tracking-grab-controls"])!==this&&this.grabbedEl&&this.grabbedEl===Q.grabbedEl&&Q.releaseGrabbedEntity();return!1},onCollisionStarted:function(Q){var P=Q.detail.withEl;this.collidedEl||P.getAttribute("grabbable")&&(this.collidedEl=P,this.grabbingObject3D=Q.detail.trackedObject3D,this.data.hoverEnabled&&this.el.setAttribute("hand-tracking-controls","modelColor",this.data.hoverColor))},onCollisionEnded:function(){this.collidedEl=void 0,this.grabbedEl||(this.grabbingObject3D=void 0,this.data.hoverEnabled&&this.el.setAttribute("hand-tracking-controls","modelColor",this.data.color))},onPinchStarted:function(Q){this.collidedEl&&(this.pinchPosition=Q.detail.position,this.wristRotation=Q.detail.wristRotation,this.grabbedEl=this.collidedEl,this.transferEntityOwnership(),this.grab())},onPinchEnded:function(){this.releaseGrabbedEntity()},onPinchMoved:function(Q){this.wristRotation=Q.detail.wristRotation},releaseGrabbedEntity:function(){var Q=this.grabbedEl;Q&&(Q.object3D.updateMatrixWorld=this.originalUpdateMatrixWorld,Q.object3D.matrixAutoUpdate=!0,Q.object3D.matrixWorldAutoUpdate=!0,Q.object3D.matrixWorld.decompose(this.auxVector,this.auxQuaternion,this.auxVector2),Q.object3D.position.copy(this.auxVector),Q.object3D.quaternion.copy(this.auxQuaternion),this.el.emit("grabended",{grabbedEl:Q}),this.grabbedEl=void 0)},grab:function(){var Q,P=this.grabbedEl;Q=P.object3D.getWorldPosition(this.grabbedObjectPosition),this.grabDeltaPosition.copy(Q).sub(this.pinchPosition),this.grabInitialRotation.copy(this.auxQuaternion.copy(this.wristRotation).invert()),this.originalUpdateMatrixWorld=P.object3D.updateMatrixWorld,P.object3D.updateMatrixWorld=function(){},P.object3D.updateMatrixWorldChildren=function(A){for(var C=this.children,V=0,z=C.length;V<z;V++){var H=C[V];H.matrixWorldAutoUpdate!==!0&&A!==!0||H.updateMatrixWorld(!0)}},P.object3D.matrixAutoUpdate=!1,P.object3D.matrixWorldAutoUpdate=!1,this.el.emit("grabstarted",{grabbedEl:P})},tock:function(){var Q,P=this.auxMatrix,A=this.auxQuaternion,C=this.auxQuaternion2,V=this.grabbedEl;V&&((Q=V.object3D).getWorldQuaternion(C),Q.matrixWorld.identity(),P.identity(),P.makeTranslation(this.pinchPosition),Q.matrixWorld.multiply(P),P.identity(),P.makeRotationFromQuaternion(A.copy(this.wristRotation).multiply(this.grabInitialRotation)),Q.matrixWorld.multiply(P),P.identity(),P.makeTranslation(this.grabDeltaPosition),Q.matrixWorld.multiply(P),P.identity(),P.makeRotationFromQuaternion(C),Q.matrixWorld.multiply(P),P.makeScale(V.object3D.scale.x,V.object3D.scale.y,V.object3D.scale.z),Q.matrixWorld.multiply(P),Q.updateMatrixWorldChildren())}})},4228:(M,E,e)=>{var B=e(3515).registerComponent;M.exports.Component=B("hide-on-enter-ar",{init:function(){var N=this;this.el.sceneEl.addEventListener("enter-vr",function(){N.el.sceneEl.is("ar-mode")&&(N.el.object3D.visible=!1)}),this.el.sceneEl.addEventListener("exit-vr",function(){N.el.object3D.visible=!0})}})},8463:(M,E,e)=>{var B=e(3515).registerComponent;M.exports.Component=B("hide-on-enter-vr",{init:function(){var N=this;this.el.sceneEl.addEventListener("enter-vr",function(){N.el.sceneEl.is("vr-mode")&&(N.el.object3D.visible=!1)}),this.el.sceneEl.addEventListener("exit-vr",function(){N.el.object3D.visible=!0})}})},9359:(M,E,e)=>{var B=e(3515).registerComponent,N=e(2666),Q=e(6600),P=Q.checkControllerPresentAndSetup,A=Q.emitIfAxesChanged,C=Q.onButtonEvent,V="hp-mixed-reality",z=e(8309).AFRAME_CDN_ROOT+"controllers/hp/mixed-reality/",H={x:0,y:0,z:.06},G={_x:Math.PI/4,_y:0,_z:0,_order:"XYZ"};M.exports.Component=B("hp-mixed-reality-controls",{schema:{hand:{default:"none"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:{left:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton"]},right:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton"]}},init:function(){var $=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(k){C(k.detail.id,"down",$,$.data.hand)},this.onButtonUp=function(k){C(k.detail.id,"up",$,$.data.hand)},this.onButtonTouchEnd=function(k){C(k.detail.id,"touchend",$,$.data.hand)},this.onButtonTouchStart=function(k){C(k.detail.id,"touchstart",$,$.data.hand)},this.previousButtonValues={},this.bindMethods()},update:function(){var $=this.data;this.controllerIndex=$.hand==="right"?0:$.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var $=this.el;$.addEventListener("buttonchanged",this.onButtonChanged),$.addEventListener("buttondown",this.onButtonDown),$.addEventListener("buttonup",this.onButtonUp),$.addEventListener("touchstart",this.onButtonTouchStart),$.addEventListener("touchend",this.onButtonTouchEnd),$.addEventListener("axismove",this.onAxisMoved),$.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var $=this.el;$.removeEventListener("buttonchanged",this.onButtonChanged),$.removeEventListener("buttondown",this.onButtonDown),$.removeEventListener("buttonup",this.onButtonUp),$.removeEventListener("touchstart",this.onButtonTouchStart),$.removeEventListener("touchend",this.onButtonTouchEnd),$.removeEventListener("axismove",this.onAxisMoved),$.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var $=this.data;P(this,V,{index:this.controllerIndex,hand:$.hand})},injectTrackedControls:function(){var $=this.el,k=this.data;$.setAttribute("tracked-controls",{idPrefix:V,hand:k.hand,controller:this.controllerIndex,orientationOffset:k.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",z+this.data.hand+".glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function($){var k,K=this.mapping[this.data.hand].buttons[$.detail.id];K&&(K==="trigger"&&(k=$.detail.state.value,console.log("analog value of trigger press: "+k)),this.el.emit(K+"changed",$.detail.state))},onModelLoaded:function($){var k=$.detail.model;this.data.model&&(k.position.copy(H),k.rotation.copy(G),this.el.emit("controllermodelready",{name:"hp-mixed-reality-controls",model:this.data.model,rayOrigin:new N.Vector3(0,0,0)}))},onAxisMoved:function($){A(this,this.mapping.axes,$)}})},8686:(M,E,e)=>{e(4649),e(9715),e(9541),e(57),e(2503),e(9577),e(3647),e(3924),e(6655),e(5290),e(2346),e(4228),e(8463),e(9359),e(1714),e(7152),e(4893),e(9234),e(109),e(7479),e(240),e(9115),e(5921),e(4269),e(9536),e(5569),e(8497),e(4854),e(7454),e(4914),e(3689),e(1684),e(5538),e(6957),e(2761),e(1125),e(8666),e(8057),e(3798),e(8367),e(9507),e(6296),e(7872),e(3431),e(2819),e(1135),e(4046),e(1277),e(3969),e(3638),e(7445),e(4310),e(7579),e(5670),e(467),e(5834),e(3807)},7152:(M,E,e)=>{var B=e(3515).registerComponent,N=e(8903);B("laser-controls",{schema:{hand:{default:"right"},model:{default:!0},defaultModelColor:{type:"color",default:"grey"}},init:function(){var Q=this.config,P=this.data,A=this.el,C=this,V={hand:P.hand,model:P.model};function z(H){var G=Q[H.detail.name];if(G){var $=N.extend({showLine:!0},G.raycaster||{});H.detail.rayOrigin&&($.origin=H.detail.rayOrigin.origin,$.direction=H.detail.rayOrigin.direction,$.showLine=!0),H.detail.rayOrigin||!C.modelReady?A.setAttribute("raycaster",$):A.setAttribute("raycaster","showLine",!0),A.setAttribute("cursor",N.extend({fuse:!1},G.cursor))}}A.setAttribute("hp-mixed-reality-controls",V),A.setAttribute("magicleap-controls",V),A.setAttribute("oculus-go-controls",V),A.setAttribute("oculus-touch-controls",V),A.setAttribute("pico-controls",V),A.setAttribute("valve-index-controls",V),A.setAttribute("vive-controls",V),A.setAttribute("vive-focus-controls",V),A.setAttribute("windows-motion-controls",V),A.setAttribute("generic-tracked-controller-controls",{hand:V.hand}),A.addEventListener("controllerconnected",z),A.addEventListener("controllerdisconnected",function(H){Q[H.detail.name]&&A.setAttribute("raycaster","showLine",!1)}),A.addEventListener("controllermodelready",function(H){z(H),C.modelReady=!0})},config:{"generic-tracked-controller-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"hp-mixed-reality-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"magicleap-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"oculus-go-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"oculus-touch-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"pico-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"valve-index-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-focus-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"windows-motion-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{showLine:!1}}}})},1714:(M,E,e)=>{var B=e(3515).registerComponent,N=e(8903).debug("components:layer:warn");M.exports.Component=B("layer",{schema:{type:{default:"quad",oneOf:["quad","monocubemap","stereocubemap"]},src:{type:"map"},rotateCubemap:{default:!1},width:{default:0},height:{default:0}},init:function(){var Q=this.el.sceneEl.renderer.getContext();this.quaternion=new THREE.Quaternion,this.position=new THREE.Vector3,this.bindMethods(),this.needsRedraw=!1,this.frameBuffer=Q.createFramebuffer();var P=this.el.sceneEl.getAttribute("webxr"),A=P.requiredFeatures;A.indexOf("layers")===-1&&(A.push("layers"),this.el.sceneEl.setAttribute("webxr",P)),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR),this.el.sceneEl.addEventListener("exit-vr",this.onExitVR)},bindMethods:function(){this.onRequestedReferenceSpace=this.onRequestedReferenceSpace.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this)},update:function(Q){this.data.src!==Q.src&&this.updateSrc()},updateSrc:function(){var Q=this.data.type;this.texture=void 0,Q!=="quad"?Q!=="monocubemap"&&Q!=="stereocubemap"||this.loadCubeMapImages():this.loadQuadImage()},loadCubeMapImages:function(){var Q,P=this.xrGLFactory,A=this.el.sceneEl.frame,C=this.data.src,V=this.data.type;this.visibilityChanged=!1,this.layer&&(V!=="monocubemap"&&V!=="stereocubemap"||(C.complete?this.pendingCubeMapUpdate=!1:this.pendingCubeMapUpdate=!0,this.loadingScreen?this.loadingScreen=!1:this.loadingScreen=!0,V==="monocubemap"?(Q=P.getSubImage(this.layer,A),this.loadCubeMapImage(Q.colorTexture,C,0)):(Q=P.getSubImage(this.layer,A,"left"),this.loadCubeMapImage(Q.colorTexture,C,0),Q=P.getSubImage(this.layer,A,"right"),this.loadCubeMapImage(Q.colorTexture,C,6))))},loadQuadImage:function(){var Q=this.data.src,P=this;this.el.sceneEl.systems.material.loadTexture(Q,{src:Q},function(A){P.el.sceneEl.renderer.initTexture(A),P.texture=A,Q.tagName==="VIDEO"&&setTimeout(function(){P.textureIsVideo=!0},1e3),P.layer&&(P.layer.height=P.data.height/2||P.texture.image.height/1e3,P.layer.width=P.data.width/2||P.texture.image.width/1e3,P.needsRedraw=!0),P.updateQuadPanel()})},preGenerateCubeMapTextures:function(Q,P){this.data.type==="monocubemap"?this.generateCubeMapTextures(Q,0,P):(this.generateCubeMapTextures(Q,0,P),this.generateCubeMapTextures(Q,6,P))},generateCubeMapTextures:function(Q,P,A){for(var C,V,z=this.data,H=this.cubeFaceSize,G=Math.min(Q.width,Q.height),$=[],k=0;k<6;k++){var K=document.createElement("CANVAS");K.width=K.height=H;var Z=K.getContext("2d");z.rotateCubemap&&(k!==2&&k!==3||(Z.save(),Z.translate(H,H),Z.rotate(Math.PI))),Z.drawImage(Q,(k+P)*G,0,G,G,0,0,H,H),Z.restore(),A&&A(),$.push(K)}return z.rotateCubemap&&(C=$[0],V=$[1],$[0]=V,$[1]=C,C=$[4],V=$[5],$[4]=V,$[5]=C),A&&A(),$},loadCubeMapImage:function(Q,P,A){var C,V=this.el.sceneEl.renderer.getContext();V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,!1),V.bindTexture(V.TEXTURE_CUBE_MAP,Q),C=!P.complete||this.loadingScreen?this.loadingScreenImages:this.generateCubeMapTextures(P,A);var z=0;C.forEach(function(H,G){V.texSubImage2D(V.TEXTURE_CUBE_MAP_POSITIVE_X+G,0,0,0,V.RGBA,V.UNSIGNED_BYTE,H),z=V.getError()}),z!==0&&console.log("renderingError, WebGL Error Code: "+z),V.bindTexture(V.TEXTURE_CUBE_MAP,null)},tick:function(){this.el.sceneEl.xrSession&&(this.layer||!this.el.sceneEl.is("vr-mode")&&!this.el.sceneEl.is("ar-mode")||this.initLayer(),this.updateTransform(),this.data.src.complete&&(this.pendingCubeMapUpdate||this.loadingScreen||this.visibilityChanged)&&this.loadCubeMapImages(),(this.needsRedraw||this.layer.needsRedraw||this.textureIsVideo)&&(this.data.type==="quad"&&this.draw(),this.needsRedraw=!1))},initLayer:function(){var Q=this,P=this.data.type;this.el.sceneEl.xrSession.onvisibilitychange=function(A){Q.visibilityChanged=A.session.visibilityState!=="hidden"},P!=="quad"?P!=="monocubemap"&&P!=="stereocubemap"||this.initCubeMapLayer():this.initQuadLayer()},initQuadLayer:function(){var Q=this.el.sceneEl,P=Q.renderer.getContext(),A=this.xrGLFactory=new XRWebGLBinding(Q.xrSession,P);this.texture&&(this.layer=A.createQuadLayer({space:this.referenceSpace,viewPixelHeight:2048,viewPixelWidth:2048,height:this.data.height/2||this.texture.image.height/1e3,width:this.data.width/2||this.texture.image.width/1e3}),this.initLoadingScreenImages(),Q.renderer.xr.addLayer(this.layer))},initCubeMapLayer:function(){var Q=this.data.src,P=this.el.sceneEl,A=P.renderer.getContext(),C=A.getParameter(A.MAX_CUBE_MAP_TEXTURE_SIZE),V=this.cubeFaceSize=Math.min(C,Math.min(Q.width,Q.height)),z=this.xrGLFactory=new XRWebGLBinding(P.xrSession,A);this.layer=z.createCubeLayer({space:this.referenceSpace,viewPixelWidth:V,viewPixelHeight:V,layout:this.data.type==="monocubemap"?"mono":"stereo",isStatic:!1}),this.initLoadingScreenImages(),this.loadCubeMapImages(),P.renderer.xr.addLayer(this.layer)},initLoadingScreenImages:function(){for(var Q=this.cubeFaceSize,P=this.loadingScreenImages=[],A=0;A<6;A++){var C=document.createElement("CANVAS");C.width=C.height=Q;var V=C.getContext("2d");C.width=C.height=Q,V.fillStyle="black",V.fillRect(0,0,Q,Q),A!==2&&A!==3&&(V.translate(Q,0),V.scale(-1,1),V.fillStyle="white",V.font="30px Arial",V.fillText("Loading",Q/2,Q/2)),P.push(C)}},destroyLayer:function(){this.layer&&(this.el.sceneEl.renderer.xr.removeLayer(this.layer),this.layer.destroy(),this.layer=void 0)},toggleCompositorLayer:function(){this.enableCompositorLayer(!this.layerEnabled)},enableCompositorLayer:function(Q){this.layerEnabled=Q,this.quadPanelEl.object3D.visible=!this.layerEnabled},updateQuadPanel:function(){var Q=this.quadPanelEl;this.quadPanelEl||(Q=this.quadPanelEl=document.createElement("a-entity"),this.el.appendChild(Q)),Q.setAttribute("material",{shader:"flat",src:this.data.src,transparent:!0}),Q.setAttribute("geometry",{primitive:"plane",height:this.data.height||this.texture.image.height/1e3,width:this.data.width||this.texture.image.height/1e3})},draw:function(){var Q=this.el.sceneEl,P=this.el.sceneEl.renderer.getContext(),A=this.xrGLFactory.getSubImage(this.layer,Q.frame),C=Q.renderer.properties.get(this.texture).__webglTexture,V=P.getParameter(P.FRAMEBUFFER_BINDING);P.viewport(A.viewport.x,A.viewport.y,A.viewport.width,A.viewport.height),P.bindFramebuffer(P.FRAMEBUFFER,this.frameBuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,A.colorTexture,0),function(z,H,G,$){var k=z.createFramebuffer(),K=G.viewport.x,Z=G.viewport.y,ee=G.viewport.x+G.viewport.width,he=G.viewport.y+G.viewport.height;$.tagName==="VIDEO"&&(z.bindTexture(z.TEXTURE_2D,H),z.texSubImage2D(z.TEXTURE_2D,0,0,0,$.width,$.height,z.RGB,z.UNSIGNED_BYTE,$)),z.bindFramebuffer(z.READ_FRAMEBUFFER,k),z.framebufferTexture2D(z.READ_FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_2D,H,0),z.readBuffer(z.COLOR_ATTACHMENT0),z.blitFramebuffer(0,0,$.width,$.height,K,Z,ee,he,z.COLOR_BUFFER_BIT,z.NEAREST),z.bindFramebuffer(z.READ_FRAMEBUFFER,null),z.deleteFramebuffer(k)}(P,C,A,this.data.src),P.bindFramebuffer(P.FRAMEBUFFER,V)},updateTransform:function(){var Q=this.el,P=this.position,A=this.quaternion;Q.object3D.updateMatrixWorld(),P.setFromMatrixPosition(Q.object3D.matrixWorld),A.setFromRotationMatrix(Q.object3D.matrixWorld),this.layerEnabled||P.set(0,0,1e8),this.layer.transform=new XRRigidTransform(P,A)},onEnterVR:function(){var Q=this.el.sceneEl,P=Q.xrSession;Q.hasWebXR&&XRWebGLBinding&&P?(P.requestReferenceSpace("local-floor").then(this.onRequestedReferenceSpace),this.layerEnabled=!0,this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!1),this.data.src.play&&this.data.src.play()):N("The layer component requires WebXR and the layers API enabled")},onExitVR:function(){this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!0),this.destroyLayer()},onRequestedReferenceSpace:function(Q){this.referenceSpace=Q}})},4893:(M,E,e)=>{var B,N,Q,P,A,C,V=e(8903),z=V.diff,H=e(4219),G=e(3515).registerComponent,$=e(2666),k=e(3437),K=$.MathUtils.degToRad,Z=H("components:light:warn"),ee=new $.CubeTextureLoader,he={};M.exports.Component=G("light",{schema:{angle:{default:60,if:{type:["spot"]}},color:{type:"color",if:{type:["ambient","directional","hemisphere","point","spot"]}},envMap:{default:"",if:{type:["probe"]}},groundColor:{type:"color",if:{type:["hemisphere"]}},decay:{default:1,if:{type:["point","spot"]}},distance:{default:0,min:0,if:{type:["point","spot"]}},intensity:{default:1,min:0,if:{type:["ambient","directional","hemisphere","point","spot","probe"]}},penumbra:{default:0,min:0,max:1,if:{type:["spot"]}},type:{default:"directional",oneOf:["ambient","directional","hemisphere","point","spot","probe"],schemaChange:!0},target:{type:"selector",if:{type:["spot","directional"]}},castShadow:{default:!1,if:{type:["point","spot","directional"]}},shadowBias:{default:0,if:{castShadow:!0}},shadowCameraFar:{default:500,if:{castShadow:!0}},shadowCameraFov:{default:90,if:{castShadow:!0}},shadowCameraNear:{default:.5,if:{castShadow:!0}},shadowCameraTop:{default:5,if:{castShadow:!0}},shadowCameraRight:{default:5,if:{castShadow:!0}},shadowCameraBottom:{default:-5,if:{castShadow:!0}},shadowCameraLeft:{default:-5,if:{castShadow:!0}},shadowCameraVisible:{default:!1,if:{castShadow:!0}},shadowCameraAutomatic:{default:"",if:{type:["directional"]}},shadowMapHeight:{default:512,if:{castShadow:!0}},shadowMapWidth:{default:512,if:{castShadow:!0}},shadowRadius:{default:1,if:{castShadow:!0}}},init:function(){var ue=this.el;this.light=null,this.defaultTarget=null,this.system.registerLight(ue)},update:function(ue){var ve=this.data,be=z(ve,ue),Te=this.light,ye=this;if(!Te||"type"in be)this.setLight(this.data),this.updateShadow();else{var De=!1;Object.keys(be).forEach(function(Ce){var Re=ve[Ce];switch(Ce){case"color":Te.color.set(Re);break;case"groundColor":Te.groundColor.set(Re);break;case"angle":Te.angle=K(Re);break;case"target":Re===null?ve.type!=="spot"&&ve.type!=="directional"||(Te.target=ye.defaultTarget):Re.hasLoaded?ye.onSetTarget(Re,Te):Re.addEventListener("loaded",ye.onSetTarget.bind(ye,Re,Te));break;case"envMap":ye.updateProbeMap(ve,Te);break;case"castShadow":case"shadowBias":case"shadowCameraFar":case"shadowCameraFov":case"shadowCameraNear":case"shadowCameraTop":case"shadowCameraRight":case"shadowCameraBottom":case"shadowCameraLeft":case"shadowCameraVisible":case"shadowMapHeight":case"shadowMapWidth":case"shadowRadius":De||(ye.updateShadow(),De=!0);break;case"shadowCameraAutomatic":ve.shadowCameraAutomatic?ye.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(ve.shadowCameraAutomatic)):ye.shadowCameraAutomaticEls=[];break;default:Te[Ce]=Re}})}},tick:(B=new $.Box3,N=new $.Vector3,Q=new $.Vector3,P=new $.Matrix4,A=new $.Sphere,C=new $.Vector3,function(){if(this.data.type==="directional"&&this.light.shadow&&this.light.shadow.camera instanceof $.OrthographicCamera&&this.shadowCameraAutomaticEls.length){var ue=this.light.shadow.camera;ue.getWorldDirection(N),ue.getWorldPosition(Q),P.copy(ue.matrixWorld),P.invert(),ue.near=1,ue.left=1e5,ue.right=-1e5,ue.top=-1e5,ue.bottom=1e5,this.shadowCameraAutomaticEls.forEach(function(ve){B.setFromObject(ve.object3D),B.getBoundingSphere(A);var be=k.distanceOfPointFromPlane(Q,N,A.center),Te=k.nearestPointInPlane(Q,N,A.center,C).applyMatrix4(P);ue.near=Math.min(-be-A.radius-1,ue.near),ue.left=Math.min(-A.radius+Te.x,ue.left),ue.right=Math.max(A.radius+Te.x,ue.right),ue.top=Math.max(A.radius+Te.y,ue.top),ue.bottom=Math.min(-A.radius+Te.y,ue.bottom)}),ue.updateProjectionMatrix()}}),setLight:function(ue){var ve=this.el,be=this.getLight(ue);be&&(this.light&&ve.removeObject3D("light"),this.light=be,this.light.el=ve,ve.setObject3D("light",this.light),ue.type!=="spot"&&ue.type!=="directional"&&ue.type!=="hemisphere"||ve.getObject3D("light").translateY(-1),ue.type==="spot"&&(ve.setObject3D("light-target",this.defaultTarget),ve.getObject3D("light-target").position.set(0,0,-1)),ue.shadowCameraAutomatic?this.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(ue.shadowCameraAutomatic)):this.shadowCameraAutomaticEls=[])},updateShadow:function(){var ue=this.el,ve=this.data,be=this.light;be.castShadow=ve.castShadow;var Te=ue.getObject3D("cameraHelper");if(ve.shadowCameraVisible&&!Te?ue.setObject3D("cameraHelper",new $.CameraHelper(be.shadow.camera)):!ve.shadowCameraVisible&&Te&&ue.removeObject3D("cameraHelper"),!ve.castShadow)return be;be.shadow.bias=ve.shadowBias,be.shadow.radius=ve.shadowRadius,be.shadow.mapSize.height=ve.shadowMapHeight,be.shadow.mapSize.width=ve.shadowMapWidth,be.shadow.camera.near=ve.shadowCameraNear,be.shadow.camera.far=ve.shadowCameraFar,be.shadow.camera instanceof $.OrthographicCamera?(be.shadow.camera.top=ve.shadowCameraTop,be.shadow.camera.right=ve.shadowCameraRight,be.shadow.camera.bottom=ve.shadowCameraBottom,be.shadow.camera.left=ve.shadowCameraLeft):be.shadow.camera.fov=ve.shadowCameraFov,be.shadow.camera.updateProjectionMatrix(),Te&&Te.update()},getLight:function(ue){var ve=ue.angle,be=new $.Color(ue.color);be=be.getHex();var Te=ue.decay,ye=ue.distance,De=new $.Color(ue.groundColor);De=De.getHex();var Ce=ue.intensity,Re=ue.type,Qe=ue.target,ot=null;switch(Re.toLowerCase()){case"ambient":return new $.AmbientLight(be,Ce);case"directional":return ot=new $.DirectionalLight(be,Ce),this.defaultTarget=ot.target,Qe&&(Qe.hasLoaded?this.onSetTarget(Qe,ot):Qe.addEventListener("loaded",this.onSetTarget.bind(this,Qe,ot))),ot;case"hemisphere":return new $.HemisphereLight(be,De,Ce);case"point":return new $.PointLight(be,Ce,ye,Te);case"spot":return ot=new $.SpotLight(be,Ce,ye,K(ve),ue.penumbra,Te),this.defaultTarget=ot.target,Qe&&(Qe.hasLoaded?this.onSetTarget(Qe,ot):Qe.addEventListener("loaded",this.onSetTarget.bind(this,Qe,ot))),ot;case"probe":return ot=new $.LightProbe,this.updateProbeMap(ue,ot),ot;default:Z("%s is not a valid light type. Choose from ambient, directional, hemisphere, point, spot.",Re)}},updateProbeMap:function(ue,ve){ue.envMap||ve.copy(new $.LightProbe),he[ue.envMap]instanceof window.Promise&&he[ue.envMap].then(function(be){ve.copy(be)}),he[ue.envMap]instanceof $.LightProbe&&ve.copy(he[ue.envMap]),he[ue.envMap]=new window.Promise(function(be){V.srcLoader.validateCubemapSrc(ue.envMap,function(Te){ee.load(Te,function(ye){var De=$.LightProbeGenerator.fromCubeTexture(ye);he[ue.envMap]=De,ve.copy(De)})})})},onSetTarget:function(ue,ve){ve.target=ue.object3D},remove:function(){var ue=this.el;ue.removeObject3D("light"),ue.getObject3D("cameraHelper")&&ue.removeObject3D("cameraHelper")}})},9234:(M,E,e)=>{var B=e(3515).registerComponent;function N(Q,P){return!(!Q||!P)&&Q.x===P.x&&Q.y===P.y&&Q.z===P.z}M.exports.Component=B("line",{schema:{start:{type:"vec3",default:{x:0,y:0,z:0}},end:{type:"vec3",default:{x:0,y:0,z:0}},color:{type:"color",default:"#74BEC1"},opacity:{type:"number",default:1},visible:{default:!0}},multiple:!0,init:function(){var Q,P,A=this.data;P=this.material=new THREE.LineBasicMaterial({color:A.color,opacity:A.opacity,transparent:A.opacity<1,visible:A.visible}),(Q=this.geometry=new THREE.BufferGeometry).setAttribute("position",new THREE.BufferAttribute(new Float32Array(6),3)),this.line=new THREE.Line(Q,P),this.el.setObject3D(this.attrName,this.line)},update:function(Q){var P=this.data,A=this.geometry,C=!1,V=this.material,z=A.attributes.position.array;N(P.start,Q.start)||(z[0]=P.start.x,z[1]=P.start.y,z[2]=P.start.z,C=!0),N(P.end,Q.end)||(z[3]=P.end.x,z[4]=P.end.y,z[5]=P.end.z,C=!0),C&&(A.attributes.position.needsUpdate=!0,A.computeBoundingSphere()),V.color.setStyle(P.color),V.opacity=P.opacity,V.transparent=P.opacity<1,V.visible=P.visible},remove:function(){this.el.removeObject3D(this.attrName,this.line)}})},109:(M,E,e)=>{var B,N,Q,P,A,C,V,z,H=e(3515).registerComponent,G=e(9644).registerShader,$=e(2666);M.exports.Component=H("link",{schema:{backgroundColor:{default:"red",type:"color"},borderColor:{default:"white",type:"color"},highlighted:{default:!1},highlightedColor:{default:"#24CAFF",type:"color"},href:{default:""},image:{type:"asset"},on:{default:"click"},peekMode:{default:!1},title:{default:""},titleColor:{default:"white",type:"color"},visualAspectEnabled:{default:!1}},init:function(){this.navigate=this.navigate.bind(this),this.previousQuaternion=void 0,this.quaternionClone=new $.Quaternion,this.hiddenEls=[]},update:function(k){var K,Z,ee=this.data,he=this.el;ee.visualAspectEnabled&&(this.initVisualAspect(),K=ee.highlighted?ee.highlightedColor:ee.backgroundColor,Z=ee.highlighted?ee.highlightedColor:ee.borderColor,he.setAttribute("material","backgroundColor",K),he.setAttribute("material","strokeColor",Z),ee.on!==k.on&&this.updateEventListener(),k.peekMode!==void 0&&ee.peekMode!==k.peekMode&&this.updatePeekMode(),ee.image&&k.image!==ee.image&&he.setAttribute("material","pano",typeof ee.image=="string"?ee.image:ee.image.src))},updatePeekMode:function(){var k=this.el,K=this.sphereEl;this.data.peekMode?(this.hideAll(),k.getObject3D("mesh").visible=!1,K.setAttribute("visible",!0)):(this.showAll(),k.getObject3D("mesh").visible=!0,K.setAttribute("visible",!1))},play:function(){this.updateEventListener()},pause:function(){this.removeEventListener()},updateEventListener:function(){var k=this.el;k.isPlaying&&(this.removeEventListener(),k.addEventListener(this.data.on,this.navigate))},removeEventListener:function(){var k=this.data.on;k&&this.el.removeEventListener(k,this.navigate)},initVisualAspect:function(){var k,K,Z,ee=this.el;this.data.visualAspectEnabled&&!this.visualAspectInitialized&&(Z=this.textEl=this.textEl||document.createElement("a-entity"),K=this.sphereEl=this.sphereEl||document.createElement("a-entity"),k=this.semiSphereEl=this.semiSphereEl||document.createElement("a-entity"),ee.setAttribute("geometry",{primitive:"circle",radius:1,segments:64}),ee.setAttribute("material",{shader:"portal",pano:this.data.image,side:"double"}),Z.setAttribute("text",{color:this.data.titleColor,align:"center",font:"kelsonsans",value:this.data.title||this.data.href,width:4}),Z.setAttribute("position","0 1.5 0"),ee.appendChild(Z),k.setAttribute("geometry",{primitive:"sphere",radius:1,phiStart:0,segmentsWidth:64,segmentsHeight:64,phiLength:180,thetaStart:0,thetaLength:360}),k.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),k.setAttribute("rotation","0 180 0"),k.setAttribute("position","0 0 0"),k.setAttribute("visible",!1),ee.appendChild(k),K.setAttribute("geometry",{primitive:"sphere",radius:10,segmentsWidth:64,segmentsHeight:64}),K.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),K.setAttribute("visible",!1),ee.appendChild(K),this.visualAspectInitialized=!0)},navigate:function(){window.location=this.data.href},tick:(A=new $.Vector3,C=new $.Vector3,V=new $.Quaternion,z=new $.Vector3,function(){var k,K,Z=this.el,ee=Z.object3D,he=Z.sceneEl.camera,ue=this.textEl;if(this.data.visualAspectEnabled)if(ee.updateMatrixWorld(),he.parent.updateMatrixWorld(),he.updateMatrixWorld(),ee.matrix.decompose(C,V,z),C.setFromMatrixPosition(ee.matrixWorld),A.setFromMatrixPosition(he.matrixWorld),(K=C.distanceTo(A))>20)this.previousQuaternion||(this.quaternionClone.copy(V),this.previousQuaternion=this.quaternionClone),ee.lookAt(A);else{if(k=this.calculateCameraPortalOrientation(),K<.5){if(this.semiSphereEl.getAttribute("visible")===!0)return;ue.setAttribute("text","width",1.5),k<=0?(ue.setAttribute("position","0 0 0.75"),ue.setAttribute("rotation","0 180 0"),this.semiSphereEl.setAttribute("rotation","0 0 0")):(ue.setAttribute("position","0 0 -0.75"),ue.setAttribute("rotation","0 0 0"),this.semiSphereEl.setAttribute("rotation","0 180 0")),Z.getObject3D("mesh").visible=!1,this.semiSphereEl.setAttribute("visible",!0),this.peekCameraPortalOrientation=k}else k<=0?ue.setAttribute("rotation","0 180 0"):ue.setAttribute("rotation","0 0 0"),ue.setAttribute("text","width",5),ue.setAttribute("position","0 1.5 0"),Z.getObject3D("mesh").visible=!0,this.semiSphereEl.setAttribute("visible",!1),this.peekCameraPortalOrientation=void 0;this.previousQuaternion&&(ee.quaternion.copy(this.previousQuaternion),this.previousQuaternion=void 0)}}),hideAll:function(){var k=this.el,K=this.hiddenEls,Z=this;K.length>0||k.sceneEl.object3D.traverse(function(ee){ee&&ee.el&&ee.el.hasAttribute("link-controls")||ee.el&&ee!==k.sceneEl.object3D&&ee.el!==k&&ee.el!==Z.sphereEl&&ee.el!==k.sceneEl.cameraEl&&ee.el.getAttribute("visible")!==!1&&ee.el!==Z.textEl&&ee.el!==Z.semiSphereEl&&(ee.el.setAttribute("visible",!1),K.push(ee.el))})},showAll:function(){this.hiddenEls.forEach(function(k){k.setAttribute("visible",!0)}),this.hiddenEls=[]},calculateCameraPortalOrientation:(B=new $.Matrix4,N=new $.Vector3,Q=new $.Vector3(0,0,1),P=new $.Vector3(0,0,0),function(){var k=this.el,K=k.sceneEl.camera;return N.set(0,0,0),Q.set(0,0,1),P.set(0,0,0),k.object3D.matrixWorld.extractRotation(B),Q.applyMatrix4(B),k.object3D.updateMatrixWorld(),k.object3D.localToWorld(P),K.parent.parent.updateMatrixWorld(),K.parent.updateMatrixWorld(),K.updateMatrixWorld(),K.localToWorld(N),N.sub(P).normalize(),Q.normalize(),Math.sign(Q.dot(N))}),remove:function(){this.removeEventListener()}}),G("portal",{schema:{borderEnabled:{default:1,type:"int",is:"uniform"},backgroundColor:{default:"red",type:"color",is:"uniform"},pano:{type:"map",is:"uniform"},strokeColor:{default:"white",type:"color",is:"uniform"}},vertexShader:["vec3 portalPosition;","varying vec3 vWorldPosition;","varying float vDistanceToCenter;","varying float vDistance;","void main() {","vDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);","portalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;","vDistance = length(portalPosition - cameraPosition);","vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join(`
`),fragmentShader:["#define RECIPROCAL_PI2 0.15915494","uniform sampler2D pano;","uniform vec3 strokeColor;","uniform vec3 backgroundColor;","uniform float borderEnabled;","varying float vDistanceToCenter;","varying float vDistance;","varying vec3 vWorldPosition;","void main() {","vec3 direction = normalize(vWorldPosition - cameraPosition);","vec2 sampleUV;","float borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);","sampleUV.y = clamp(direction.y * 0.5  + 0.5, 0.0, 1.0);","sampleUV.x = atan(direction.z, -direction.x) * -RECIPROCAL_PI2 + 0.5;","if (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {","gl_FragColor = vec4(strokeColor, 1.0);","} else {","gl_FragColor = mix(texture2D(pano, sampleUV), vec4(backgroundColor, 1.0), clamp(pow((vDistance / 15.0), 2.0), 0.0, 1.0));","}","}"].join(`
`)})},7479:(M,E,e)=>{var B=e(3515).registerComponent,N=e(2666),Q=e(8903),P=Math.PI/2;M.exports.Component=B("look-controls",{dependencies:["position","rotation"],schema:{enabled:{default:!0},magicWindowTrackingEnabled:{default:!0},pointerLockEnabled:{default:!1},reverseMouseDrag:{default:!1},reverseTouchDrag:{default:!1},touchEnabled:{default:!0},mouseEnabled:{default:!0}},init:function(){this.deltaYaw=0,this.previousHMDPosition=new N.Vector3,this.hmdQuaternion=new N.Quaternion,this.magicWindowAbsoluteEuler=new N.Euler,this.magicWindowDeltaEuler=new N.Euler,this.position=new N.Vector3,this.magicWindowObject=new N.Object3D,this.rotation={},this.deltaRotation={},this.savedPose=null,this.pointerLocked=!1,this.setupMouseControls(),this.bindMethods(),this.previousMouseEvent={},this.setupMagicWindowControls(),this.savedPose={position:new N.Vector3,rotation:new N.Euler},(this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode"))&&this.onEnterVR()},setupMagicWindowControls:function(){var A,C=this.data;(Q.device.isMobile()||Q.device.isMobileDeviceRequestingDesktopSite())&&(A=this.magicWindowControls=new N.DeviceOrientationControls(this.magicWindowObject),typeof DeviceOrientationEvent<"u"&&DeviceOrientationEvent.requestPermission&&(A.enabled=!1,this.el.sceneEl.components["device-orientation-permission-ui"].permissionGranted?A.enabled=C.magicWindowTrackingEnabled:this.el.sceneEl.addEventListener("deviceorientationpermissiongranted",function(){A.enabled=C.magicWindowTrackingEnabled})))},update:function(A){var C=this.data;C.enabled!==A.enabled&&this.updateGrabCursor(C.enabled),A&&!C.magicWindowTrackingEnabled&&A.magicWindowTrackingEnabled&&(this.magicWindowAbsoluteEuler.set(0,0,0),this.magicWindowDeltaEuler.set(0,0,0)),this.magicWindowControls&&(this.magicWindowControls.enabled=C.magicWindowTrackingEnabled),A&&!C.pointerLockEnabled!==A.pointerLockEnabled&&(this.removeEventListeners(),this.addEventListeners(),this.pointerLocked&&this.exitPointerLock())},tick:function(A){this.data.enabled&&this.updateOrientation()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},remove:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},bindMethods:function(){this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this),this.onPointerLockChange=this.onPointerLockChange.bind(this),this.onPointerLockError=this.onPointerLockError.bind(this)},setupMouseControls:function(){this.mouseDown=!1,this.pitchObject=new N.Object3D,this.yawObject=new N.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject)},addEventListeners:function(){var A=this.el.sceneEl,C=A.canvas;C?(C.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1),C.addEventListener("touchstart",this.onTouchStart,{passive:!0}),window.addEventListener("touchmove",this.onTouchMove,{passive:!0}),window.addEventListener("touchend",this.onTouchEnd,{passive:!0}),A.addEventListener("enter-vr",this.onEnterVR),A.addEventListener("exit-vr",this.onExitVR),this.data.pointerLockEnabled&&(document.addEventListener("pointerlockchange",this.onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.addEventListener("pointerlockerror",this.onPointerLockError,!1))):A.addEventListener("render-target-loaded",this.addEventListeners.bind(this))},removeEventListeners:function(){var A=this.el.sceneEl,C=A&&A.canvas;C&&(C.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),C.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),A.removeEventListener("enter-vr",this.onEnterVR),A.removeEventListener("exit-vr",this.onExitVR),document.removeEventListener("pointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("pointerlockerror",this.onPointerLockError,!1))},updateOrientation:function(){var A=this.el.object3D,C=this.pitchObject,V=this.yawObject,z=this.el.sceneEl;(z.is("vr-mode")||z.is("ar-mode"))&&z.checkHeadsetConnected()||(this.updateMagicWindowOrientation(),A.rotation.x=this.magicWindowDeltaEuler.x+C.rotation.x,A.rotation.y=this.magicWindowDeltaEuler.y+V.rotation.y,A.rotation.z=this.magicWindowDeltaEuler.z)},updateMagicWindowOrientation:function(){var A=this.magicWindowAbsoluteEuler,C=this.magicWindowDeltaEuler;this.magicWindowControls&&this.magicWindowControls.enabled&&(this.magicWindowControls.update(),A.setFromQuaternion(this.magicWindowObject.quaternion,"YXZ"),this.previousMagicWindowYaw||A.y===0||(this.previousMagicWindowYaw=A.y),this.previousMagicWindowYaw&&(C.x=A.x,C.y+=A.y-this.previousMagicWindowYaw,C.z=A.z,this.previousMagicWindowYaw=A.y))},onMouseMove:function(A){var C,V,z,H=this.pitchObject,G=this.previousMouseEvent,$=this.yawObject;this.data.enabled&&(this.mouseDown||this.pointerLocked)&&(this.pointerLocked?(V=A.movementX||A.mozMovementX||0,z=A.movementY||A.mozMovementY||0):(V=A.screenX-G.screenX,z=A.screenY-G.screenY),this.previousMouseEvent.screenX=A.screenX,this.previousMouseEvent.screenY=A.screenY,C=this.data.reverseMouseDrag?1:-1,$.rotation.y+=.002*V*C,H.rotation.x+=.002*z*C,H.rotation.x=Math.max(-P,Math.min(P,H.rotation.x)))},onMouseDown:function(A){var C=this.el.sceneEl;if(this.data.enabled&&this.data.mouseEnabled&&(!C.is("vr-mode")&&!C.is("ar-mode")||!C.checkHeadsetConnected())&&A.button===0){var V=C&&C.canvas;this.mouseDown=!0,this.previousMouseEvent.screenX=A.screenX,this.previousMouseEvent.screenY=A.screenY,this.showGrabbingCursor(),this.data.pointerLockEnabled&&!this.pointerLocked&&(V.requestPointerLock?V.requestPointerLock():V.mozRequestPointerLock&&V.mozRequestPointerLock())}},showGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor="grabbing"},hideGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor=""},onMouseUp:function(){this.mouseDown=!1,this.hideGrabbingCursor()},onTouchStart:function(A){A.touches.length!==1||!this.data.touchEnabled||this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode")||(this.touchStart={x:A.touches[0].pageX,y:A.touches[0].pageY},this.touchStarted=!0)},onTouchMove:function(A){var C,V,z=this.el.sceneEl.canvas,H=this.yawObject;this.touchStarted&&this.data.touchEnabled&&(V=2*Math.PI*(A.touches[0].pageX-this.touchStart.x)/z.clientWidth,C=this.data.reverseTouchDrag?1:-1,H.rotation.y-=.5*V*C,this.touchStart={x:A.touches[0].pageX,y:A.touches[0].pageY})},onTouchEnd:function(){this.touchStarted=!1},onEnterVR:function(){var A=this.el.sceneEl;A.checkHeadsetConnected()&&(this.saveCameraPose(),this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),A.hasWebXR&&(this.el.object3D.matrixAutoUpdate=!1,this.el.object3D.updateMatrix()))},onExitVR:function(){this.el.sceneEl.checkHeadsetConnected()&&(this.restoreCameraPose(),this.previousHMDPosition.set(0,0,0),this.el.object3D.matrixAutoUpdate=!0)},onPointerLockChange:function(){this.pointerLocked=!(!document.pointerLockElement&&!document.mozPointerLockElement)},onPointerLockError:function(){this.pointerLocked=!1},exitPointerLock:function(){document.exitPointerLock(),this.pointerLocked=!1},updateGrabCursor:function(A){var C=this.el.sceneEl;function V(){C.canvas.classList.add("a-grab-cursor")}function z(){C.canvas.classList.remove("a-grab-cursor")}C.canvas?A?V():z():A?C.addEventListener("render-target-loaded",V):C.addEventListener("render-target-loaded",z)},saveCameraPose:function(){var A=this.el;this.savedPose.position.copy(A.object3D.position),this.savedPose.rotation.copy(A.object3D.rotation),this.hasSavedPose=!0},restoreCameraPose:function(){var A=this.el,C=this.savedPose;this.hasSavedPose&&(A.object3D.position.copy(C.position),A.object3D.rotation.copy(C.rotation),this.hasSavedPose=!1)}})},240:(M,E,e)=>{var B=e(3515).registerComponent,N=e(6600),Q=N.checkControllerPresentAndSetup,P=N.emitIfAxesChanged,A=N.onButtonEvent,C="magicleap-one",V=e(8309).AFRAME_CDN_ROOT+"controllers/magicleap/magicleap-one-controller.glb";M.exports.Component=B("magicleap-controls",{schema:{hand:{default:"none"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:{axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","menu"]},init:function(){var z=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(H){A(H.detail.id,"down",z)},this.onButtonUp=function(H){A(H.detail.id,"up",z)},this.onButtonTouchEnd=function(H){A(H.detail.id,"touchend",z)},this.onButtonTouchStart=function(H){A(H.detail.id,"touchstart",z)},this.previousButtonValues={},this.bindMethods()},update:function(){var z=this.data;this.controllerIndex=z.hand==="right"?0:z.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var z=this.el;z.addEventListener("buttonchanged",this.onButtonChanged),z.addEventListener("buttondown",this.onButtonDown),z.addEventListener("buttonup",this.onButtonUp),z.addEventListener("touchstart",this.onButtonTouchStart),z.addEventListener("touchend",this.onButtonTouchEnd),z.addEventListener("axismove",this.onAxisMoved),z.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var z=this.el;z.removeEventListener("buttonchanged",this.onButtonChanged),z.removeEventListener("buttondown",this.onButtonDown),z.removeEventListener("buttonup",this.onButtonUp),z.removeEventListener("touchstart",this.onButtonTouchStart),z.removeEventListener("touchend",this.onButtonTouchEnd),z.removeEventListener("axismove",this.onAxisMoved),z.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var z=this.data;Q(this,C,{index:this.controllerIndex,hand:z.hand})},injectTrackedControls:function(){var z=this.el,H=this.data;z.setAttribute("tracked-controls",{idPrefix:C,hand:H.hand,controller:this.controllerIndex,orientationOffset:H.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",V)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(z){var H,G=this.mapping.buttons[z.detail.id];G&&(G==="trigger"&&(H=z.detail.state.value,console.log("analog value of trigger press: "+H)),this.el.emit(G+"changed",z.detail.state))},onModelLoaded:function(z){z.detail.model.scale.set(.01,.01,.01)},onAxisMoved:function(z){P(this,this.mapping.axes,z)},updateModel:function(z,H){},setButtonColor:function(z,H){}})},9115:(M,E,e)=>{var B=e(8903),N=e(3515),Q=e(2666),P=e(9644),A=B.debug("components:material:error"),C=N.registerComponent,V=P.shaders,z=P.shaderNames;function H(G,$){G.dispose(),$.unregisterMaterial(G),Object.keys(G).filter(function(k){return G[k]&&G[k].isTexture}).forEach(function(k){G[k].dispose()})}M.exports.Component=C("material",{schema:{alphaTest:{default:0,min:0,max:1},depthTest:{default:!0},depthWrite:{default:!0},flatShading:{default:!1},npot:{default:!1},offset:{type:"vec2",default:{x:0,y:0}},opacity:{default:1,min:0,max:1},repeat:{type:"vec2",default:{x:1,y:1}},shader:{default:"standard",oneOf:z,schemaChange:!0},side:{default:"front",oneOf:["front","back","double"]},transparent:{default:!1},vertexColorsEnabled:{default:!1},visible:{default:!0},blending:{default:"normal",oneOf:["none","normal","additive","subtractive","multiply"]},dithering:{default:!0},anisotropy:{default:0,min:0}},init:function(){this.material=null},update:function(G){var $=this.data;this.shader&&$.shader===G.shader||this.updateShader($.shader),this.shader.update(this.data),this.updateMaterial(G)},updateSchema:function(G){var $,k,K,Z;k=G&&G.shader,$=this.oldData&&this.oldData.shader,(K=V[Z=k||$]&&V[Z].schema)||A("Unknown shader schema "+Z),$&&k===$||(this.extendSchema(K),this.updateBehavior())},updateBehavior:function(){var G,$,k=this.el.sceneEl,K=this.schema,Z=this;function ee(he,ue){var ve;for(ve in $)$[ve]=he;Z.shader.update($)}for(G in this.tick=void 0,$={},K)K[G].type==="time"&&(this.tick=ee,$[G]=!0);k&&(this.tick?k.addBehavior(this):k.removeBehavior(this))},updateShader:function(G){var $,k=this.data,K=V[G]&&V[G].Shader;if(!K)throw new Error("Unknown shader "+G);($=this.shader=new K).el=this.el,$.init(k),this.setMaterial($.material),this.updateSchema(k)},updateMaterial:function(G){var $,k=this.data,K=this.material;for($ in K.alphaTest=k.alphaTest,K.depthTest=k.depthTest!==!1,K.depthWrite=k.depthWrite!==!1,K.opacity=k.opacity,K.flatShading=k.flatShading,K.side=function(Z){switch(Z){case"back":return Q.BackSide;case"double":return Q.DoubleSide;default:return Q.FrontSide}}(k.side),K.transparent=k.transparent!==!1||k.opacity<1,K.vertexColors=k.vertexColorsEnabled,K.visible=k.visible,K.blending=function(Z){switch(Z){case"none":return Q.NoBlending;case"additive":return Q.AdditiveBlending;case"subtractive":return Q.SubtractiveBlending;case"multiply":return Q.MultiplyBlending;default:return Q.NormalBlending}}(k.blending),K.dithering=k.dithering,G)break;!$||G.alphaTest===k.alphaTest&&G.side===k.side&&G.vertexColorsEnabled===k.vertexColorsEnabled||(K.needsUpdate=!0)},remove:function(){var G=new Q.MeshBasicMaterial,$=this.material,k=this.el.getObject3D("mesh");k&&(k.material=G),H($,this.system)},setMaterial:function(G){var $,k=this.el,K=this.system;this.material&&H(this.material,K),this.material=G,K.registerMaterial(G),($=k.getObject3D("mesh"))?$.material=G:k.addEventListener("object3dset",function Z(ee){ee.detail.type==="mesh"&&ee.target===k&&(k.getObject3D("mesh").material=G,k.removeEventListener("object3dset",Z))})}})},5921:(M,E,e)=>{var B,N,Q,P,A,C=e(3515).registerComponent,V=e(2666);C("obb-collider",{schema:{size:{default:0},trackedObject3D:{default:""},minimumColliderDimension:{default:.02},centerModel:{default:!1}},init:function(){this.previousScale=new V.Vector3().copy(this.el.object3D.scale),this.auxEuler=new V.Euler,this.boundingBox=new V.Box3,this.boundingBoxSize=new V.Vector3,this.updateCollider=this.updateCollider.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.updateBoundingBox=this.updateBoundingBox.bind(this),this.el.addEventListener("model-loaded",this.onModelLoaded),this.updateCollider(),this.system.addCollider(this.el)},remove:function(){this.system.removeCollider(this.el)},update:function(){this.data.trackedObject3D&&(this.trackedObject3DPath=this.data.trackedObject3D.split("."))},onModelLoaded:function(){this.data.centerModel&&this.centerModel(),this.updateCollider()},centerModel:function(){var z,H=this.el,G=H.components["gltf-model"]&&H.components["gltf-model"].model;G&&(this.el.removeObject3D("mesh"),z=new V.Box3().setFromObject(G).getCenter(new V.Vector3),G.position.x+=G.position.x-z.x,G.position.y+=G.position.y-z.y,G.position.z+=G.position.z-z.z,this.el.setObject3D("mesh",G))},updateCollider:function(){var z=this.el,H=this.boundingBoxSize,G=this.aabb=this.aabb||new V.OBB;this.obb=this.obb||new V.OBB,z.hasLoaded?(this.updateBoundingBox(),G.halfSize.copy(H).multiplyScalar(.5),this.el.sceneEl.systems["obb-collider"].data.showColliders&&this.showCollider()):z.addEventListener("loaded",this.updateCollider)},showCollider:function(){this.updateColliderMesh(),this.renderColliderMesh.visible=!0},updateColliderMesh:function(){var z=this.renderColliderMesh,H=this.boundingBoxSize;z?(z.geometry.dispose(),z.geometry=new V.BoxGeometry(H.x,H.y,H.z)):this.initColliderMesh()},hideCollider:function(){this.renderColliderMesh&&(this.renderColliderMesh.visible=!1)},initColliderMesh:function(){var z,H,G;z=this.boundingBoxSize,H=this.renderColliderGeometry=new V.BoxGeometry(z.x,z.y,z.z),(G=this.renderColliderMesh=new V.Mesh(H,new V.MeshLambertMaterial({color:65280,side:V.DoubleSide}))).matrixAutoUpdate=!1,G.matrixWorldAutoUpdate=!1,G.updateMatrixWorld=function(){},this.el.sceneEl.object3D.add(G)},updateBoundingBox:(B=new V.Vector3,N=new V.Vector3,Q=new V.Quaternion,P=new V.Quaternion,A=new V.Matrix4,function(){var z=this.auxEuler,H=this.boundingBox,G=this.data.size,$=this.trackedObject3D||this.el.object3D,k=this.boundingBoxSize,K=this.data.minimumColliderDimension;if(G)return this.boundingBoxSize.x=G,this.boundingBoxSize.y=G,void(this.boundingBoxSize.z=G);z.copy($.rotation),$.rotation.set(0,0,0),$.parent.matrixWorld.decompose(B,Q,N),A.compose(B,P,N),$.parent.matrixWorld.copy(A),H.setFromObject($,!0),H.getSize(k),k.x=k.x<K?K:k.x,k.y=k.y<K?K:k.y,k.z=k.z<K?K:k.z,$.parent.matrixWorld.compose(B,Q,N),this.el.object3D.rotation.copy(z)}),checkTrackedObject:function(){var z,H=this.trackedObject3DPath;if(H&&H.length&&!this.trackedObject3D){z=this.el;for(var G=0;G<H.length&&(z=z[H[G]]);G++);z&&(this.trackedObject3D=z,this.updateCollider())}return this.trackedObject3D},tick:function(){var z=new V.Vector3,H=new V.Vector3,G=new V.Quaternion,$=new V.Matrix4;return function(){var k=this.obb,K=this.renderColliderMesh,Z=this.checkTrackedObject()||this.el.object3D;Z&&(Z.updateMatrix(),Z.updateMatrixWorld(!0),Z.matrixWorld.decompose(z,G,H),(Math.abs(H.x-this.previousScale.x)>1e-4||Math.abs(H.y-this.previousScale.y)>1e-4||Math.abs(H.z-this.previousScale.z)>1e-4)&&this.updateCollider(),this.previousScale.copy(H),H.set(1,1,1),$.compose(z,G,H),K&&K.matrixWorld.copy($),k.copy(this.aabb),k.applyMatrix4($))}}()})},4269:(M,E,e)=>{var B=e(4219),N=e(3515).registerComponent,Q=e(2666),P=B("components:obj-model:warn");M.exports.Component=N("obj-model",{schema:{mtl:{type:"model"},obj:{type:"model"}},init:function(){var A=this;this.model=null,this.objLoader=new Q.OBJLoader,this.mtlLoader=new Q.MTLLoader(this.objLoader.manager),this.mtlLoader.crossOrigin="",this.el.addEventListener("componentinitialized",function(C){A.model&&C.detail.name==="material"&&A.applyMaterial()})},update:function(){var A=this.data;A.obj&&(this.resetMesh(),this.loadObj(A.obj,A.mtl))},remove:function(){this.resetMesh()},resetMesh:function(){this.model&&this.el.removeObject3D("mesh")},loadObj:function(A,C){var V=this,z=this.el,H=this.mtlLoader,G=this.objLoader,$=this.el.sceneEl.systems.renderer,k=C.substr(0,C.lastIndexOf("/")+1);if(C)return z.hasAttribute("material")&&P("Material component properties are ignored when a .MTL is provided"),H.setResourcePath(k),void H.load(C,function(K){K.preload(),G.setMaterials(K),G.load(A,function(Z){V.model=Z,V.model.traverse(function(ee){if(ee.isMesh){var he=ee.material;he.map&&$.applyColorCorrection(he.map),he.emissiveMap&&$.applyColorCorrection(he.emissiveMap)}}),z.setObject3D("mesh",Z),z.emit("model-loaded",{format:"obj",model:Z})})});G.load(A,function(K){V.model=K,V.applyMaterial(),z.setObject3D("mesh",K),z.emit("model-loaded",{format:"obj",model:K})})},applyMaterial:function(){var A=this.el.components.material;A&&this.model.traverse(function(C){C instanceof Q.Mesh&&(C.material=A.material)})}})},9536:(M,E,e)=>{var B=e(3515).registerComponent,N=e(6600),Q=N.checkControllerPresentAndSetup,P=N.emitIfAxesChanged,A=N.onButtonEvent,C=e(8903).device.isWebXRAvailable,V=e(8309).AFRAME_CDN_ROOT+"controllers/oculus/go/oculus-go-controller.gltf",z=C?"oculus-go":"Oculus Go",H=C?{axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad"]}:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]};M.exports.Component=B("oculus-go-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#FFFFFF"},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:H,bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var G=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function($){A($.detail.id,"down",G)},this.onButtonUp=function($){A($.detail.id,"up",G)},this.onButtonTouchStart=function($){A($.detail.id,"touchstart",G)},this.onButtonTouchEnd=function($){A($.detail.id,"touchend",G)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var G=this.el;G.addEventListener("buttonchanged",this.onButtonChanged),G.addEventListener("buttondown",this.onButtonDown),G.addEventListener("buttonup",this.onButtonUp),G.addEventListener("touchstart",this.onButtonTouchStart),G.addEventListener("touchend",this.onButtonTouchEnd),G.addEventListener("model-loaded",this.onModelLoaded),G.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var G=this.el;G.removeEventListener("buttonchanged",this.onButtonChanged),G.removeEventListener("buttondown",this.onButtonDown),G.removeEventListener("buttonup",this.onButtonUp),G.removeEventListener("touchstart",this.onButtonTouchStart),G.removeEventListener("touchend",this.onButtonTouchEnd),G.removeEventListener("model-loaded",this.onModelLoaded),G.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){Q(this,z,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var G=this.el,$=this.data;G.setAttribute("tracked-controls",{armModel:$.armModel,hand:$.hand,idPrefix:z,orientationOffset:$.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",V)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(G){var $,k=G.detail.model;G.target===this.el&&this.data.model&&(($=this.buttonMeshes={}).trigger=k.getObjectByName("oculus_go_button_trigger"),$.trackpad=k.getObjectByName("oculus_go_touchpad"),$.touchpad=k.getObjectByName("oculus_go_touchpad"))},onButtonChanged:function(G){var $=this.mapping.buttons[G.detail.id];$&&this.el.emit($+"changed",G.detail.state)},onAxisMoved:function(G){P(this,this.mapping.axes,G)},updateModel:function(G,$){this.data.model&&this.updateButtonModel(G,$)},updateButtonModel:function(G,$){var k=this.buttonMeshes;if(k&&k[G]){var K;switch($){case"down":K=this.data.buttonHighlightColor;break;case"touchstart":K=this.data.buttonTouchedColor;break;default:K=this.data.buttonColor}k[G].material.color.set(K)}}})},5569:(M,E,e)=>{var B=e(3515).registerComponent,N=e(2666),Q=e(6600),P=Q.checkControllerPresentAndSetup,A=Q.emitIfAxesChanged,C=Q.onButtonEvent,V=e(8903).device.isWebXRAvailable,z="oculus-touch",H=V?z:"Oculus Touch",G=e(8309).AFRAME_CDN_ROOT,$=G+"controllers/oculus/oculus-touch-controller-",k=G+"controllers/meta/",K={left:{modelUrl:$+"left.gltf",rayOrigin:{origin:{x:.008,y:-.01,z:0},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new N.Vector3(-.005,.003,-.055),modelPivotRotation:new N.Euler(0,0,0)},right:{modelUrl:$+"right.gltf",rayOrigin:{origin:{x:-.008,y:-.01,z:0},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new N.Vector3(.005,.003,-.055),modelPivotRotation:new N.Euler(0,0,0)}},Z={left:{modelUrl:$+"left.gltf",rayOrigin:{origin:{x:.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new N.Vector3(-.005,.036,-.037),modelPivotRotation:new N.Euler(Math.PI/4.5,0,0)},right:{modelUrl:$+"right.gltf",rayOrigin:{origin:{x:-.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new N.Vector3(.005,.036,-.037),modelPivotRotation:new N.Euler(Math.PI/4.5,0,0)}},ee="oculus-touch",he={"oculus-touch":V?Z:K,"oculus-touch-v2":{left:{modelUrl:$+"gen2-left.gltf",rayOrigin:{origin:{x:-.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new N.Vector3(0,-.007,-.021),modelPivotRotation:new N.Euler(-Math.PI/4,0,0)},right:{modelUrl:$+"gen2-right.gltf",rayOrigin:{origin:{x:.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new N.Vector3(0,-.007,-.021),modelPivotRotation:new N.Euler(-Math.PI/4,0,0)}},"oculus-touch-v3":{left:{modelUrl:$+"v3-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new N.Vector3(0,0,0),modelPivotRotation:new N.Euler(0,0,0)},right:{modelUrl:$+"v3-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new N.Vector3(0,0,0),modelPivotRotation:new N.Euler(0,0,0)}},"meta-quest-touch-pro":{left:{modelUrl:k+"quest-touch-pro-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new N.Vector3(0,0,0),modelPivotRotation:new N.Euler(0,0,0)},right:{modelUrl:k+"quest-touch-pro-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new N.Vector3(0,0,0),modelPivotRotation:new N.Euler(0,0,0)}},"meta-quest-touch-plus":{left:{modelUrl:k+"quest-touch-plus-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new N.Vector3(0,0,0),modelPivotRotation:new N.Euler(0,0,0)},right:{modelUrl:k+"quest-touch-plus-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new N.Vector3(0,0,0),modelPivotRotation:new N.Euler(0,0,0)}}},ue=V?{left:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton","surface"]}}:{left:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","abutton","bbutton","surface"]}};function ve(be){be.traverse(function(Te){var ye;Te.type==="Mesh"&&(ye=Te.material.clone(),be.originalColor=Te.material.color,Te.material.dispose(),Te.material=ye)})}M.exports.Component=B("oculus-touch-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#999"},buttonTouchColor:{type:"color",default:"#8AB"},buttonHighlightColor:{type:"color",default:"#2DF"},model:{default:!0},controllerType:{default:"auto",oneOf:["auto","oculus-touch","oculus-touch-v2","oculus-touch-v3"]},orientationOffset:{type:"vec3",default:{x:43,y:0,z:0}}},after:["tracked-controls"],mapping:ue,bindMethods:function(){this.onButtonChanged=this.onButtonChanged.bind(this),this.onThumbstickMoved=this.onThumbstickMoved.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var be=this;this.onButtonDown=function(Te){C(Te.detail.id,"down",be,be.data.hand)},this.onButtonUp=function(Te){C(Te.detail.id,"up",be,be.data.hand)},this.onButtonTouchStart=function(Te){C(Te.detail.id,"touchstart",be,be.data.hand)},this.onButtonTouchEnd=function(Te){C(Te.detail.id,"touchend",be,be.data.hand)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.triggerEuler=new N.Euler},addEventListeners:function(){var be=this.el;be.addEventListener("buttonchanged",this.onButtonChanged),be.addEventListener("buttondown",this.onButtonDown),be.addEventListener("buttonup",this.onButtonUp),be.addEventListener("touchstart",this.onButtonTouchStart),be.addEventListener("touchend",this.onButtonTouchEnd),be.addEventListener("axismove",this.onAxisMoved),be.addEventListener("model-loaded",this.onModelLoaded),be.addEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var be=this.el;be.removeEventListener("buttonchanged",this.onButtonChanged),be.removeEventListener("buttondown",this.onButtonDown),be.removeEventListener("buttonup",this.onButtonUp),be.removeEventListener("touchstart",this.onButtonTouchStart),be.removeEventListener("touchend",this.onButtonTouchEnd),be.removeEventListener("axismove",this.onAxisMoved),be.removeEventListener("model-loaded",this.onModelLoaded),be.removeEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){P(this,H,{hand:this.data.hand,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},loadModel:function(be){var Te,ye=this.data;if(ye.model)if(this.controllerObject3D)this.el.setObject3D("mesh",this.controllerObject3D);else{if(this.displayModel=he[ye.controllerType]||he[ee],ye.controllerType==="auto"){var De=this.el.sceneEl.systems["tracked-controls-webvr"];if(De&&De.vrDisplay){var Ce=De.vrDisplay.displayName;/^Oculus Quest$/.test(Ce)&&(this.displayModel=he["oculus-touch-v2"])}else{Te=ee;for(var Re=Object.keys(he),Qe=0;Qe<be.profiles.length;Qe++)if(Re.indexOf(be.profiles[Qe])!==-1){Te=be.profiles[Qe];break}this.displayModel=he[Te]}}var ot=this.displayModel[ye.hand].modelUrl;this.isTouchV3orPROorPlus=this.displayModel===he["oculus-touch-v3"]||this.displayModel===he["meta-quest-touch-pro"]||this.displayModel===he["meta-quest-touch-plus"],this.el.setAttribute("gltf-model",ot)}},injectTrackedControls:function(be){var Te=this.data,ye=z,De=Te.hand==="right"?"Oculus Touch (Right)":"Oculus Touch (Left)",Ce=V?ye:De;this.el.setAttribute("tracked-controls",{id:Ce,hand:Te.hand,orientationOffset:Te.orientationOffset,handTrackingEnabled:!1,iterateControllerProfiles:!0,space:"gripSpace"}),this.loadModel(be)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(be){var Te=this.mapping[this.data.hand].buttons[be.detail.id];if(Te){if(this.isTouchV3orPROorPlus)this.onButtonChangedV3orPROorPlus(be);else{var ye,De=this.buttonMeshes;Te!=="trigger"&&Te!=="grip"||(ye=be.detail.state.value),De&&(Te==="trigger"&&De.trigger&&(De.trigger.rotation.x=this.originalXRotationTrigger-ye*(Math.PI/26)),Te==="grip"&&De.grip&&(ye*=this.data.hand==="left"?-1:1,De.grip.position.x=this.originalXPositionGrip+.004*ye))}this.el.emit(Te+"changed",be.detail.state)}},onButtonChangedV3orPROorPlus:function(be){var Te,ye=this.mapping[this.data.hand].buttons[be.detail.id],De=this.buttonObjects;De&&De[ye]&&(Te=be.detail.state.value,De[ye].quaternion.slerpQuaternions(this.buttonRanges[ye].min.quaternion,this.buttonRanges[ye].max.quaternion,Te),De[ye].position.lerpVectors(this.buttonRanges[ye].min.position,this.buttonRanges[ye].max.position,Te))},onModelLoaded:function(be){if(be.target===this.el&&this.data.model){if(this.isTouchV3orPROorPlus)this.onTouchV3orPROorPlusModelLoaded(be);else{var Te,ye=this.controllerObject3D=be.detail.model;(Te=this.buttonMeshes={}).grip=ye.getObjectByName("buttonHand"),this.originalXPositionGrip=Te.grip&&Te.grip.position.x,Te.trigger=ye.getObjectByName("buttonTrigger"),this.originalXRotationTrigger=Te.trigger&&Te.trigger.rotation.x,Te.thumbstick=ye.getObjectByName("stick"),Te.xbutton=ye.getObjectByName("buttonX"),Te.abutton=ye.getObjectByName("buttonA"),Te.ybutton=ye.getObjectByName("buttonY"),Te.bbutton=ye.getObjectByName("buttonB")}for(var De in this.buttonMeshes)this.buttonMeshes[De]&&ve(this.buttonMeshes[De]);this.applyOffset(be.detail.model),this.el.emit("controllermodelready",{name:"oculus-touch-controls",model:this.data.model,rayOrigin:this.displayModel[this.data.hand].rayOrigin})}},applyOffset:function(be){be.position.copy(this.displayModel[this.data.hand].modelPivotOffset),be.rotation.copy(this.displayModel[this.data.hand].modelPivotRotation)},onTouchV3orPROorPlusModelLoaded:function(be){var Te=this.controllerObject3D=be.detail.model,ye=this.buttonObjects={},De=this.buttonMeshes={},Ce=this.buttonRanges={};De.grip=Te.getObjectByName("squeeze"),ye.grip=Te.getObjectByName("xr_standard_squeeze_pressed_value"),Ce.grip={min:Te.getObjectByName("xr_standard_squeeze_pressed_min"),max:Te.getObjectByName("xr_standard_squeeze_pressed_max")},ye.grip.minX=ye.grip.position.x,De.thumbstick=Te.getObjectByName("thumbstick"),ye.thumbstick=Te.getObjectByName("xr_standard_thumbstick_pressed_value"),Ce.thumbstick={min:Te.getObjectByName("xr_standard_thumbstick_pressed_min"),max:Te.getObjectByName("xr_standard_thumbstick_pressed_max")},ye.thumbstickXAxis=Te.getObjectByName("xr_standard_thumbstick_xaxis_pressed_value"),Ce.thumbstickXAxis={min:Te.getObjectByName("xr_standard_thumbstick_xaxis_pressed_min"),max:Te.getObjectByName("xr_standard_thumbstick_xaxis_pressed_max")},ye.thumbstickYAxis=Te.getObjectByName("xr_standard_thumbstick_yaxis_pressed_value"),Ce.thumbstickYAxis={min:Te.getObjectByName("xr_standard_thumbstick_yaxis_pressed_min"),max:Te.getObjectByName("xr_standard_thumbstick_yaxis_pressed_max")},De.trigger=Te.getObjectByName("trigger"),ye.trigger=Te.getObjectByName("xr_standard_trigger_pressed_value"),Ce.trigger={min:Te.getObjectByName("xr_standard_trigger_pressed_min"),max:Te.getObjectByName("xr_standard_trigger_pressed_max")},Ce.trigger.diff={x:Math.abs(Ce.trigger.max.rotation.x)-Math.abs(Ce.trigger.min.rotation.x),y:Math.abs(Ce.trigger.max.rotation.y)-Math.abs(Ce.trigger.min.rotation.y),z:Math.abs(Ce.trigger.max.rotation.z)-Math.abs(Ce.trigger.min.rotation.z)};var Re=this.data.hand==="left"?"x":"a",Qe=this.data.hand==="left"?"y":"b",ot=Re+"button",Je=Qe+"button";De[ot]=Te.getObjectByName(Re+"_button"),ye[ot]=Te.getObjectByName(Re+"_button_pressed_value"),Ce[ot]={min:Te.getObjectByName(Re+"_button_pressed_min"),max:Te.getObjectByName(Re+"_button_pressed_max")},De[Je]=Te.getObjectByName(Qe+"_button"),ye[Je]=Te.getObjectByName(Qe+"_button_pressed_value"),Ce[Je]={min:Te.getObjectByName(Qe+"_button_pressed_min"),max:Te.getObjectByName(Qe+"_button_pressed_max")}},onAxisMoved:function(be){A(this,this.mapping[this.data.hand].axes,be)},onThumbstickMoved:function(be){if(this.buttonMeshes&&this.buttonMeshes.thumbstick)if(this.isTouchV3orPROorPlus)this.updateThumbstickTouchV3orPROorPlus(be);else for(var Te in be.detail)this.buttonObjects.thumbstick.rotation[this.axisMap[Te]]=this.buttonRanges.thumbstick.originalRotation[this.axisMap[Te]]-Math.PI/8*be.detail[Te]*(Te==="y"||this.data.hand==="right"?-1:1)},axisMap:{y:"x",x:"z"},updateThumbstickTouchV3orPROorPlus:function(be){var Te=(be.detail.x+1)/2;this.buttonObjects.thumbstickXAxis.quaternion.slerpQuaternions(this.buttonRanges.thumbstickXAxis.min.quaternion,this.buttonRanges.thumbstickXAxis.max.quaternion,Te);var ye=(be.detail.y+1)/2;this.buttonObjects.thumbstickYAxis.quaternion.slerpQuaternions(this.buttonRanges.thumbstickYAxis.min.quaternion,this.buttonRanges.thumbstickYAxis.max.quaternion,ye)},updateModel:function(be,Te){this.data.model&&this.updateButtonModel(be,Te)},updateButtonModel:function(be,Te){var ye,De=this.buttonMeshes;De&&De[be]&&(ye=Te==="up"||Te==="touchend"?De[be].originalColor||this.data.buttonColor:Te==="touchstart"?this.data.buttonTouchColor:this.data.buttonHighlightColor,De[be].material.color.set(ye))}})},8497:(M,E,e)=>{var B=e(3515).registerComponent,N=e(2666),Q=e(6600),P=Q.checkControllerPresentAndSetup,A=Q.emitIfAxesChanged,C=Q.onButtonEvent,V="pico-4",z=e(8309).AFRAME_CDN_ROOT+"controllers/pico/pico4/";M.exports.Component=B("pico-controls",{schema:{hand:{default:"none"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:{left:{axes:{touchpad:[2,3]},buttons:["trigger","squeeze","none","thumbstick","xbutton","ybutton"]},right:{axes:{touchpad:[2,3]},buttons:["trigger","squeeze","none","thumbstick","abutton","bbutton"]}},init:function(){var H=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(G){C(G.detail.id,"down",H,H.data.hand)},this.onButtonUp=function(G){C(G.detail.id,"up",H,H.data.hand)},this.onButtonTouchEnd=function(G){C(G.detail.id,"touchend",H,H.data.hand)},this.onButtonTouchStart=function(G){C(G.detail.id,"touchstart",H,H.data.hand)},this.bindMethods()},update:function(){var H=this.data;this.controllerIndex=H.hand==="right"?0:H.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var H=this.el;H.addEventListener("buttonchanged",this.onButtonChanged),H.addEventListener("buttondown",this.onButtonDown),H.addEventListener("buttonup",this.onButtonUp),H.addEventListener("touchstart",this.onButtonTouchStart),H.addEventListener("touchend",this.onButtonTouchEnd),H.addEventListener("axismove",this.onAxisMoved),H.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var H=this.el;H.removeEventListener("buttonchanged",this.onButtonChanged),H.removeEventListener("buttondown",this.onButtonDown),H.removeEventListener("buttonup",this.onButtonUp),H.removeEventListener("touchstart",this.onButtonTouchStart),H.removeEventListener("touchend",this.onButtonTouchEnd),H.removeEventListener("axismove",this.onAxisMoved),H.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var H=this.data;P(this,V,{index:this.controllerIndex,hand:H.hand})},injectTrackedControls:function(){var H=this.el,G=this.data;H.setAttribute("tracked-controls",{idPrefix:V,hand:G.hand,controller:this.controllerIndex,orientationOffset:G.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",z+this.data.hand+".glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(H){var G,$=this.mapping[this.data.hand].buttons[H.detail.id];$&&($==="trigger"&&(G=H.detail.state.value,console.log("analog value of trigger press: "+G)),this.el.emit($+"changed",H.detail.state))},onModelLoaded:function(H){H.target===this.el&&this.data.model&&this.el.emit("controllermodelready",{name:"pico-controls",model:this.data.model,rayOrigin:new N.Vector3(0,0,0)})},onAxisMoved:function(H){A(this,this.mapping.axes,H)}})},4854:(M,E,e)=>{var B=e(3515).registerComponent;M.exports.Component=B("position",{schema:{type:"vec3"},update:function(){var N=this.el.object3D,Q=this.data;N.position.set(Q.x,Q.y,Q.z)},remove:function(){this.el.object3D.position.set(0,0,0)}})},7454:(M,E,e)=>{var B,N,Q=e(3515).registerComponent,P=e(2666),A=e(8903).debug("components:raycaster:warn"),C=/^[\w\s-.,[\]#]*$/,V={childList:!0,attributes:!0,subtree:!0},z="raycaster-intersected-cleared",H="raycaster-intersection-cleared";function G($,k){var K;for($.length=k.length,K=0;K<k.length;K++)$[K]=k[K]}M.exports.Component=Q("raycaster",{schema:{autoRefresh:{default:!0},direction:{type:"vec3",default:{x:0,y:0,z:-1}},enabled:{default:!0},far:{default:1e3},interval:{default:0},near:{default:0},objects:{default:""},origin:{type:"vec3"},showLine:{default:!1},lineColor:{default:"white"},lineOpacity:{default:1},useWorldCoordinates:{default:!1}},multiple:!0,init:function(){this.clearedIntersectedEls=[],this.unitLineEndVec3=new P.Vector3,this.intersectedEls=[],this.intersections=[],this.newIntersectedEls=[],this.newIntersections=[],this.objects=[],this.prevCheckTime=void 0,this.prevIntersectedEls=[],this.rawIntersections=[],this.raycaster=new P.Raycaster,this.updateOriginDirection(),this.setDirty=this.setDirty.bind(this),this.updateLine=this.updateLine.bind(this),this.observer=new MutationObserver(this.setDirty),this.dirty=!0,this.lineEndVec3=new P.Vector3,this.otherLineEndVec3=new P.Vector3,this.lineData={end:this.lineEndVec3},this.getIntersection=this.getIntersection.bind(this),this.intersectedDetail={el:this.el,getIntersection:this.getIntersection},this.intersectedClearedDetail={el:this.el},this.intersectionClearedDetail={clearedEls:this.clearedIntersectedEls},this.intersectionDetail={}},update:function($){var k=this.data,K=this.el,Z=this.raycaster;Z.far=k.far,Z.near=k.near,!k.showLine||k.far===$.far&&k.origin===$.origin&&k.direction===$.direction&&$.showLine||(this.unitLineEndVec3.copy(k.direction).normalize(),this.drawLine()),!k.showLine&&$.showLine&&K.removeAttribute("line"),k.objects===$.objects||C.test(k.objects)||A('[raycaster] Selector "'+k.objects+'" may not update automatically with DOM changes.'),k.objects||A('[raycaster] For performance, please define raycaster.objects when using raycaster or cursor components to whitelist which entities to intersect with. e.g., raycaster="objects: [data-raycastable]".'),k.autoRefresh!==$.autoRefresh&&K.isPlaying&&(k.autoRefresh?this.addEventListeners():this.removeEventListeners()),$.enabled&&!k.enabled&&this.clearAllIntersections(),this.setDirty()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.data.showLine&&this.el.removeAttribute("line"),this.clearAllIntersections()},addEventListeners:function(){this.data.autoRefresh&&(this.observer.observe(this.el.sceneEl,V),this.el.sceneEl.addEventListener("object3dset",this.setDirty),this.el.sceneEl.addEventListener("object3dremove",this.setDirty))},removeEventListeners:function(){this.observer.disconnect(),this.el.sceneEl.removeEventListener("object3dset",this.setDirty),this.el.sceneEl.removeEventListener("object3dremove",this.setDirty)},setDirty:function(){this.dirty=!0},refreshObjects:function(){var $,k=this.data;$=k.objects?this.el.sceneEl.querySelectorAll(k.objects):this.el.sceneEl.querySelectorAll("*"),this.objects=this.flattenObject3DMaps($),this.dirty=!1},tock:function($){var k=this.data,K=this.prevCheckTime;k.enabled&&(K&&$-K<k.interval||(this.prevCheckTime=$,this.checkIntersections()))},checkIntersections:function(){var $,k,K=this.clearedIntersectedEls,Z=this.el,ee=this.data,he=this.intersectedEls,ue=this.intersections,ve=this.newIntersectedEls,be=this.newIntersections,Te=this.prevIntersectedEls,ye=this.rawIntersections;for(this.dirty&&this.refreshObjects(),G(this.prevIntersectedEls,this.intersectedEls),this.updateOriginDirection(),ye.length=0,this.raycaster.intersectObjects(this.objects,!0,ye),ue.length=0,he.length=0,$=0;$<ye.length;$++)k=ye[$],ee.showLine&&k.object===Z.getObject3D("line")||k.object.el&&(ue.push(k),he.push(k.object.el));for(be.length=0,ve.length=0,$=0;$<ue.length;$++)Te.indexOf(ue[$].object.el)===-1&&(be.push(ue[$]),ve.push(ue[$].object.el));for(K.length=0,$=0;$<Te.length;$++)he.indexOf(Te[$])===-1&&(Te[$].emit(z,this.intersectedClearedDetail),K.push(Te[$]));for(K.length&&Z.emit(H,this.intersectionClearedDetail),$=0;$<ve.length;$++)ve[$].emit("raycaster-intersected",this.intersectedDetail);be.length&&(this.intersectionDetail.els=ve,this.intersectionDetail.intersections=be,Z.emit("raycaster-intersection",this.intersectionDetail)),(Te.length===0&&ue.length>0||Te.length>0&&ue.length===0||Te.length&&ue.length&&Te[0]!==ue[0].object.el)&&(this.intersectionDetail.els=this.intersectedEls,this.intersectionDetail.intersections=ue,Z.emit("raycaster-closest-entity-changed",this.intersectionDetail)),ee.showLine&&setTimeout(this.updateLine)},updateLine:function(){var $,k=this.el,K=this.intersections;K.length&&($=K[0].object.el===k&&K[1]?K[1].distance:K[0].distance),this.drawLine($)},getIntersection:function($){var k,K;for(k=0;k<this.intersections.length;k++)if((K=this.intersections[k]).object.el===$)return K;return null},updateOriginDirection:(B=new P.Vector3,N=new P.Vector3,function(){var $=this.el,k=this.data;k.useWorldCoordinates?this.raycaster.set(k.origin,k.direction):($.object3D.updateMatrixWorld(),N.setFromMatrixPosition($.object3D.matrixWorld),k.origin.x===0&&k.origin.y===0&&k.origin.z===0||(N=$.object3D.localToWorld(N.copy(k.origin))),B.copy(k.direction).transformDirection($.object3D.matrixWorld).normalize(),this.raycaster.set(N,B))}),drawLine:function($){var k,K=this.data,Z=this.el;k=this.lineData.end===this.lineEndVec3?this.otherLineEndVec3:this.lineEndVec3,$===void 0&&($=K.far===1/0?1e3:K.far),this.lineData.start=K.origin,this.lineData.end=k.copy(this.unitLineEndVec3).multiplyScalar($).add(K.origin),this.lineData.color=K.lineColor,this.lineData.opacity=K.lineOpacity,Z.setAttribute("line",this.lineData)},flattenObject3DMaps:function($){var k,K,Z=this.objects,ee=this.el.sceneEl.object3D;function he(ve){return ve.parent?he(ve.parent):ve===ee}for(Z.length=0,K=0;K<$.length;K++){var ue=$[K];if(ue.isEntity&&ue.object3D&&he(ue.object3D))for(k in ue.object3DMap)Z.push(ue.getObject3D(k))}return Z},clearAllIntersections:function(){var $;for($=0;$<this.intersectedEls.length;$++)this.intersectedEls[$].emit(z,this.intersectedClearedDetail);G(this.clearedIntersectedEls,this.intersectedEls),this.intersectedEls.length=0,this.intersections.length=0,this.el.emit(H,this.intersectionClearedDetail)}})},4914:(M,E,e)=>{var B=e(2666).MathUtils.degToRad,N=e(3515).registerComponent;M.exports.Component=N("rotation",{schema:{type:"vec3"},update:function(){var Q=this.data;this.el.object3D.rotation.set(B(Q.x),B(Q.y),B(Q.z),"YXZ")},remove:function(){this.el.object3D.rotation.set(0,0,0)}})},3689:(M,E,e)=>{var B=e(3515).registerComponent;M.exports.Component=B("scale",{schema:{type:"vec3",default:{x:1,y:1,z:1}},update:function(){var N=this.data;this.el.object3D.scale.set(N.x,N.y,N.z)},remove:function(){this.el.object3D.scale.set(1,1,1)}})},3431:(M,E,e)=>{var B,N,Q,P=e(3515).registerComponent,A=e(2666),C=(B=new A.Quaternion,N=new A.Vector3,function(H,G,$){G.position.copy(H.transform.position),G.quaternion.copy(H.transform.orientation),N.copy($),B.copy(H.transform.orientation),N.applyQuaternion(B),G.position.sub(N)});function V(H,G){this.renderer=H,this.xrHitTestSource=null,H.xr.addEventListener("sessionend",function(){this.xrHitTestSource=null}.bind(this)),H.xr.addEventListener("sessionstart",function(){this.sessionStart(G)}.bind(this)),this.renderer.xr.isPresenting&&this.sessionStart(G)}function z(H){console.warn(H.message),console.warn('Cannot requestHitTestSource Are you missing: webxr="optionalFeatures: hit-test;" from <a-scene>?')}C.tempFakePose={transform:{orientation:new A.Quaternion,position:new A.Vector3}},V.prototype.previousFrameAnchors=new Set,V.prototype.anchorToObject3D=new Map,V.prototype.sessionStart=function(H){this.session=this.renderer.xr.getSession(),"requestHitTestSource"in this.session?H.space?this.session.requestHitTestSource(H).then(function(G){this.xrHitTestSource=G}.bind(this)).catch(z):H.profile&&this.session.requestHitTestSourceForTransientInput(H).then(function(G){this.xrHitTestSource=G,this.transient=!0}.bind(this)).catch(z):z({message:"No requestHitTestSource on the session."})},V.prototype.anchorFromLastHitTestResult=function(H,G){var $=this.lastHitTest;if($){var k={object3D:H,offset:G};Array.from(this.anchorToObject3D.entries()).forEach(function(K){var Z=K[1].object3D,ee=K[0];Z===H&&(this.anchorToObject3D.delete(ee),ee.delete())}.bind(this)),$.createAnchor&&$.createAnchor().then(function(K){this.anchorToObject3D.set(K,k)}.bind(this)).catch(function(K){console.warn(K.message),console.warn('Cannot create anchor, are you missing: webxr="optionalFeatures: anchors;" from <a-scene>?')})}},V.prototype.doHit=function(H){if(this.renderer.xr.isPresenting){var G,$,k=this.renderer.xr.getReferenceSpace(),K=H.getViewerPose(k);return this.xrHitTestSource&&K?this.transient?(G=H.getHitTestResultsForTransientInput(this.xrHitTestSource)).length>0&&($=G[0].results).length>0&&(this.lastHitTest=$[0],$[0].getPose(k)):(G=H.getHitTestResults(this.xrHitTestSource)).length>0&&(this.lastHitTest=G[0],G[0].getPose(k)):void 0}},V.updateAnchorPoses=function(H,G){var $=H.trackedAnchors||V.prototype.previousFrameAnchors;V.prototype.previousFrameAnchors.forEach(function(k){$.has(k)||V.prototype.anchorToObject3D.delete(k)}),$.forEach(function(k){var K,Z,ee,he;try{K=H.getPose(k.anchorSpace,G)}catch{}if(K){if(!(Z=V.prototype.anchorToObject3D.get(k)))return;ee=Z.offset,he=Z.object3D,C(K,he,ee)}})},M.exports.Component=P("ar-hit-test",{schema:{target:{type:"selector"},enabled:{default:!0},src:{default:"data:image/webp;base64,UklGRkQHAABXRUJQVlA4WAoAAAAQAAAA/wEA/wEAQUxQSL0DAAARDzD/ERGCjrY9sYYFfgo6aa1kJ7K0w9Lo3AadLSVeFxevQwj5kuM8RfR/Atw/C0+ozB/oUBrloFZs6ElSW88j1KA4yExNWQaqRZquIDF0JYmlq0hAuUDTFu66tng3teW7pa3cQf1V1edvur54M/Slm6Wv3Gx9zw0MXlQLntcsBN6wkHjTQuYtC4W3LTw8mGRVG57TbAROtxHfZNhInGkjc5aNwtk2Hg6Mvki14k+NkZzCwQgCxalcAv3kddRTPI1DcUrXId1FLf1uHpzaQz4tquhZVLlKesbVpqKeTj0n0F5PpXDlFN9UqmhalL/ImuZFo6KmToWLoKlddMprqlS8cKovBvHo2kTiFV2LN4msaxKZl3QNiair8xYRdDWivIvXVXmbcMqJ51UebZuFXxZt6xd4laxtciqRtA3Cv0nU1t+kEUFbI8JvCa+tvkm3FDlO/W+OR99+kWEp/YYo+tYfTVnf/K8cE/F///3vv//993eeL+a+uvjawLcX3xjYvJotBFY3kVjTRGFtE+BU2AiMbiQyhpHMWEYeBozAH5qNBYRDB5KBCaTDBKKBAZTDBoKBDjwHAN5ABeCJBsAZcAAC0YHHxAYSMYBiYgGZWEA2MYFCbCCZGAAIANFEB+AnYgMQTDQAYSJ2AN5EBZAm4gDgTDgAeSIu4DGygTIRN1CMLOCZiACykQlg4jsAycgA8AO+BxCNdJyDkcbwRirDGXGnx8w+FDPrkM3MQ9JQZMYhiiwV/RDMtIM3U1/DmXHUo+IR2kSR2ToWkQ1NIn2qf2J8LCqJKiDUiSADHY3whirhdHgZ94HKaR97PhE+twEUJUFoAcgyTct8hfSxSkShASDKdMJ/ritKHwgyQ0sD4D/miCxU5SbhOOUDTnZpccCjYP/i0bZ/8bAgtVGEoGapWIQXyzKVKLwgNJFk2rtMIgoNRJlOZF7SNSSyUEeQmbxBFKEmtYjEe8S8zOZ1AkJVCmS88FJOtF40Ksg4oUaFiygk3C8qlTVNyl8UTevCUdAE2t14PfVqU1FPp57TopKeQZWromddTQp6QOfTOEQt/ZDuipZ11w/wOiqO8dRORcc6BQEkDQMClaHcn5wV9yLbxsNZNgpn2sicYSNxuo34Js1G4FQbnuNsOPa28PCWhcKbFjJvWEi8ZiHwqgXPcxbc5db33Cx95WboSzddX7yp+vyN0+eul7ZyN7Xlu64t3jVt4c5pc4JLV5EYupJE0xUknC4nOjVlmaYpyLit53HCQ0+ScnqceNcS5dzUkd0/CwMAVlA4IGADAAAQXwCdASoAAgACP8ne6Wy/tjCpqJ/IA/A5CWlu4XYBG/Pz8AfwD8APz//f3v8E1fuHZnxKYACtfuHZnxKYACrYTb5mOslhxu843ecbvON3nG7zjd3a0VCn7G1MABVxwH/Xd25gAK1+4dmfEpe2+PHhQaj75++riG6FuYACtfuHZnxKYACRrK3q9xO8Ss3uWKnMhs/rDF1hi6wxdYYusMXWGI5QRcCFDZog5OgqNlse1NDuz/UoFa/cOzPiUwAEsAOK4/nu5eZHK2tlXxJfNYlMABWv3Dsz4bvNJ5YA/LtxJ38SmAArX7h2Z8Sk5vdZUYv7mZPiUwAFa/cOzPh21s5OgZxf1mfEpemRyFr/rM+JS9noA/LtxJ38SmAAlUJIotzAASn6TjdhK+D3Dsz4dyvB7h2Z8O2tnJ0DOL+sz4lL2nKLT4lL/+iSLOocxq639w7M34MNZdm55uJ8v8ra2cpVZnxKTq2F3PN/cNksAfl24k7+JTAASqrD37h2Z7b1W+VtbOUqsz4lJ1bC7nm/uGyWAPy7cSd/EpgAJVVh79w7M9t6rfK2tnKVWZ8Sk6thdzzf3DZLAH5duJO/iUwAEqqw9+4dme29VvlbWzlKrM+JSdWwu55v7hslgD8u3EnfxKYACVVYe/cOzPbeq3ytrZylVme0kYJ8557FLerqFrzIbPrrf3DZLAH5duJO/iUvaVMS9BoaF4p7pSDFTP1XMyfElelrM0DOL+sz4eBJ13nV1OppBGPuKb4YzXQgq9uH19uS/0+JS9t9fr6ZUlQBelDG6GMgq97otb5QMPJwtKyBTbFp8Sl7b6/X0ykkawEOsgdiE6Fi0vb/Eve6xkwsmug0Z4nGNHQO8839bpTsjpz7SWIJxKagvd1QWMa6FYT1KEw3j4XDT6vJ9Xk+nyfT5Pq8n1eEmk5dinMM/9Fcfz4Z3Dsz3KD2dw7LxBRxKrqUUGQPH/7zxr1KIfNpLEJ0MZB2ITM/0Z2EFoh12NlXnEcpYcbvON3nG7zjd5xu84vfcNIAAP7+y8ceyzbVxkakPYY4lcr72fqOnDwipv+yxC71wAADBrjKnAAAAAAAAAAAAAAw7oNGHttqWONcoFN/2WIDc2pa6WVFtFYROlsaMaTXdcOjXHz93+YxAglKa4AAAAA=",type:"map"},type:{default:"footprint",oneOf:["footprint","map"]},footprintDepth:{default:.1},mapSize:{type:"vec2",default:{x:.5,y:.5}}},sceneOnly:!0,init:function(){this.hitTest=null,this.imageDataArray=new Uint8ClampedArray(1048576),this.imageData=new ImageData(this.imageDataArray,512,512),this.textureCache=new Map,this.orthoCam=new A.OrthographicCamera,this.orthoCam.layers.set(21),this.textureTarget=new A.WebGLRenderTarget(512,512,{}),this.basicMaterial=new A.MeshBasicMaterial({color:0,side:A.DoubleSide}),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.canvas.width=512,this.canvas.height=512,this.canvasTexture=new A.CanvasTexture(this.canvas,{alpha:!0}),this.canvasTexture.flipY=!1;var H=this.el.getAttribute("webxr"),G=H.optionalFeatures;G.includes("hit-test")&&G.includes("anchors")||(G.push("hit-test"),G.push("anchors"),this.el.setAttribute("webxr",H)),this.el.sceneEl.renderer.xr.addEventListener("sessionend",function(){this.hitTest=null}.bind(this)),this.el.sceneEl.renderer.xr.addEventListener("sessionstart",function(){if(this.el.is("ar-mode")){var $=this.el.sceneEl.renderer,k=this.session=$.xr.getSession();this.hasPosedOnce=!1,this.bboxMesh.visible=!1,Q||(Q=new Map),k.requestReferenceSpace("viewer").then(function(ee){this.hitTest=new V($,{space:ee}),Q.set(ee,this.hitTest),this.el.emit("ar-hit-test-start")}.bind(this));var K="generic-touchscreen",Z=new V($,{profile:K});k.addEventListener("selectstart",function(ee){if(this.data.enabled===!0){var he=ee.inputSource;this.bboxMesh.visible=!0,this.hasPosedOnce===!0&&(this.el.emit("ar-hit-test-select-start",{inputSource:he,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion}),he.profiles[0]===K?this.hitTest=Z:(this.hitTest=Q.get(he)||new V($,{space:he.targetRaySpace}),Q.set(he,this.hitTest)))}}.bind(this)),k.addEventListener("selectend",function(ee){if(this.hitTest&&this.data.enabled===!0){var he,ue=ee.inputSource;this.hasPosedOnce===!0&&(this.bboxMesh.visible=!1,this.data.target&&(he=this.data.target.object3D)&&(C.tempFakePose.transform.position.copy(this.bboxMesh.position),C.tempFakePose.transform.orientation.copy(this.bboxMesh.quaternion),C(C.tempFakePose,he,this.bboxOffset),he.visible=!0,this.hitTest.anchorFromLastHitTestResult(he,this.bboxOffset)),this.el.emit("ar-hit-test-select",{inputSource:ue,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion})),this.hitTest=null}else this.hitTest=null}.bind(this))}}.bind(this)),this.bboxOffset=new A.Vector3,this.update=this.update.bind(this),this.makeBBox()},update:function(){this.data.enabled===!1&&(this.hitTest=null,this.bboxMesh.visible=!1),this.data.target&&(this.data.target.object3D?(this.data.target.addEventListener("model-loaded",this.update),this.data.target.object3D.layers.enable(21),this.data.target.object3D.traverse(function(H){H.layers.enable(21)})):this.data.target.addEventListener("loaded",this.update,{once:!0})),this.bboxNeedsUpdate=!0},makeBBox:function(){var H=new A.PlaneGeometry(1,1),G=new A.MeshBasicMaterial({transparent:!0,color:16777215});H.rotateX(-Math.PI/2),H.rotateY(-Math.PI/2),this.bbox=new A.Box3,this.bboxMesh=new A.Mesh(H,G),this.el.setObject3D("ar-hit-test",this.bboxMesh),this.bboxMesh.visible=!1},updateFootprint:function(){var H,G,$,k=this.el.sceneEl.renderer,K=k.xr.enabled;this.bboxMesh.material.map=this.canvasTexture,this.bboxMesh.material.needsUpdate=!0,this.orthoCam.rotation.set(-Math.PI/2,0,-Math.PI/2),this.orthoCam.position.copy(this.bboxMesh.position),this.orthoCam.position.y-=this.bboxMesh.scale.y/2,this.orthoCam.near=.1,this.orthoCam.far=this.orthoCam.near+this.data.footprintDepth*this.bboxMesh.scale.y,this.orthoCam.position.y+=this.orthoCam.far,this.orthoCam.right=this.bboxMesh.scale.z/2,this.orthoCam.left=-this.bboxMesh.scale.z/2,this.orthoCam.top=this.bboxMesh.scale.x/2,this.orthoCam.bottom=-this.bboxMesh.scale.x/2,this.orthoCam.updateProjectionMatrix(),G=k.getRenderTarget(),k.setRenderTarget(this.textureTarget),k.xr.enabled=!1,$=this.el.object3D.background,this.el.object3D.overrideMaterial=this.basicMaterial,this.el.object3D.background=null,k.render(this.el.object3D,this.orthoCam),this.el.object3D.background=$,this.el.object3D.overrideMaterial=null,k.xr.enabled=K,k.setRenderTarget(G),k.readRenderTargetPixels(this.textureTarget,0,0,512,512,this.imageDataArray),this.context.putImageData(this.imageData,0,0),this.context.shadowColor="white",this.context.shadowBlur=10,this.context.drawImage(this.canvas,0,0),H=this.context.getImageData(0,0,512,512);for(var Z=0;Z<262144;Z++)H.data[4*Z+3]!==0&&H.data[4*Z+3]!==255&&(H.data[4*Z+3]=128);this.context.putImageData(H,0,0),this.canvasTexture.needsUpdate=!0},tick:function(){var H,G,$=this.el.sceneEl.frame,k=this.el.sceneEl.renderer;$&&V.updateAnchorPoses($,k.xr.getReferenceSpace()),this.bboxNeedsUpdate&&(this.bboxNeedsUpdate=!1,this.data.target&&this.data.type!=="map"||(this.textureCache.has(this.data.src)?G=this.textureCache.get(this.data.src):(G=new A.TextureLoader().load(this.data.src),this.textureCache.set(this.data.src,G)),this.bboxMesh.material.map=G,this.bboxMesh.material.needsUpdate=!0),this.data.target&&this.data.target.object3D?(this.bbox.setFromObject(this.data.target.object3D),this.bbox.getCenter(this.bboxMesh.position),this.bbox.getSize(this.bboxMesh.scale),this.data.type==="footprint"&&(this.bboxMesh.scale.x*=1.04,this.bboxMesh.scale.z*=1.04,this.updateFootprint()),this.bboxMesh.position.y-=this.bboxMesh.scale.y/2,this.bboxOffset.copy(this.bboxMesh.position),this.bboxOffset.sub(this.data.target.object3D.position)):this.bboxMesh.scale.set(this.data.mapSize.x,1,this.data.mapSize.y)),this.hitTest&&(H=this.hitTest.doHit($))&&(this.hasPosedOnce!==!0&&(this.hasPosedOnce=!0,this.el.emit("ar-hit-test-achieved")),this.bboxMesh.visible=!0,this.bboxMesh.position.copy(H.transform.position),this.bboxMesh.quaternion.copy(H.transform.orientation))}})},2819:(M,E,e)=>{var B=e(3515).registerComponent;M.exports.Component=B("background",{schema:{color:{type:"color",default:"black"},transparent:{default:!1}},sceneOnly:!0,update:function(){var N=this.data,Q=this.el.object3D;N.transparent?Q.background=null:Q.background=new THREE.Color(N.color)},remove:function(){this.el.object3D.background=null}})},1135:(M,E,e)=>{var B=e(3515).registerComponent;M.exports.Component=B("debug",{schema:{default:!0},sceneOnly:!0})},4046:(M,E,e)=>{var B=e(3515).registerComponent,N=e(8309),Q="a-dialog-buttons-container",P="a-dialog-button";function A(C,V){var z,H,G,$;return(z=document.createElement("div")).classList.add("a-modal"),z.setAttribute(N.AFRAME_INJECTED,""),(H=document.createElement("div")).className="a-dialog",H.setAttribute(N.AFRAME_INJECTED,""),z.appendChild(H),(G=document.createElement("div")).classList.add("a-dialog-text-container"),H.appendChild(G),($=document.createElement("div")).classList.add("a-dialog-text"),$.innerHTML=C,G.appendChild($),H.appendChild(V),z}M.exports.Component=B("device-orientation-permission-ui",{schema:{enabled:{default:!0},deviceMotionMessage:{default:"This immersive website requires access to your device motion sensors."},httpsMessage:{default:"Access this site over HTTPS to enter VR mode and grant access to the device sensors."},denyButtonText:{default:"Deny"},allowButtonText:{default:"Allow"},cancelButtonText:{default:"Cancel"}},sceneOnly:!0,init:function(){var C=this;this.data.enabled&&(window.isSecureContext||this.showHTTPAlert(),typeof DeviceOrientationEvent<"u"&&DeviceOrientationEvent.requestPermission?(this.onDeviceMotionDialogAllowClicked=this.onDeviceMotionDialogAllowClicked.bind(this),this.onDeviceMotionDialogDenyClicked=this.onDeviceMotionDialogDenyClicked.bind(this),DeviceOrientationEvent.requestPermission().then(function(){C.el.emit("deviceorientationpermissiongranted"),C.permissionGranted=!0}).catch(function(){var V,z,H,G,$,k,K,Z;C.devicePermissionDialogEl=(V=C.data.denyButtonText,z=C.data.allowButtonText,H=C.data.deviceMotionMessage,G=C.onDeviceMotionDialogAllowClicked,$=C.onDeviceMotionDialogDenyClicked,(k=document.createElement("div")).classList.add(Q),(K=document.createElement("button")).classList.add(P,"a-dialog-deny-button"),K.setAttribute(N.AFRAME_INJECTED,""),K.innerHTML=V,k.appendChild(K),(Z=document.createElement("button")).classList.add(P,"a-dialog-allow-button"),Z.setAttribute(N.AFRAME_INJECTED,""),Z.innerHTML=z,k.appendChild(Z),Z.addEventListener("click",function(ee){ee.stopPropagation(),G()}),K.addEventListener("click",function(ee){ee.stopPropagation(),$()}),A(H,k)),C.el.appendChild(C.devicePermissionDialogEl)})):this.permissionGranted=!0)},remove:function(){this.devicePermissionDialogEl&&this.el.removeChild(this.devicePermissionDialogEl)},onDeviceMotionDialogDenyClicked:function(){this.remove()},showHTTPAlert:function(){var C,V,z,H,G,$=this,k=(C=$.data.cancelButtonText,V=$.data.httpsMessage,z=function(){$.el.removeChild(k)},(H=document.createElement("div")).classList.add(Q),(G=document.createElement("button")).classList.add(P,"a-dialog-ok-button"),G.setAttribute(N.AFRAME_INJECTED,""),G.innerHTML=C,H.appendChild(G),G.addEventListener("click",function(K){K.stopPropagation(),z()}),A(V,H));this.el.appendChild(k)},onDeviceMotionDialogAllowClicked:function(){var C=this;this.el.emit("deviceorientationpermissionrequested"),DeviceOrientationEvent.requestPermission().then(function(V){V==="granted"?(C.el.emit("deviceorientationpermissiongranted"),C.permissionGranted=!0):C.el.emit("deviceorientationpermissionrejected"),C.remove()}).catch(console.error)}})},1277:(M,E,e)=>{var B=e(3515).registerComponent;M.exports.Component=B("embedded",{dependencies:["xr-mode-ui"],schema:{default:!0},sceneOnly:!0,update:function(){var N=this.el,Q=N.querySelector(".a-enter-vr");this.data===!0?(Q&&Q.classList.add("embedded"),N.removeFullScreenStyles()):(Q&&Q.classList.remove("embedded"),N.addFullScreenStyles())}})},3638:(M,E,e)=>{var B=e(3515).registerComponent,N=e(2666);e(4219)("components:fog:warn"),M.exports.Component=B("fog",{schema:{color:{type:"color",default:"#000"},density:{default:25e-5},far:{default:1e3,min:0},near:{default:1,min:0},type:{default:"linear",oneOf:["linear","exponential"]}},sceneOnly:!0,update:function(){var Q=this.data,P=this.el,A=this.el.object3D.fog;A&&Q.type===A.name?Object.keys(this.schema).forEach(function(C){var V=Q[C];C==="color"&&(V=new N.Color(V)),A[C]=V}):P.object3D.fog=function(C){var V;return(V=C.type==="exponential"?new N.FogExp2(C.color,C.density):new N.Fog(C.color,C.near,C.far)).name=C.type,V}(Q)},remove:function(){var Q=this.el;this.el.object3D.fog&&(Q.object3D.fog=null)}})},3969:(M,E,e)=>{var B,N=e(8309).AFRAME_INJECTED,Q=e(4147),P=e(3515).registerComponent,A=e(8903),C="https://unpkg.com/aframe-inspector@"+((B=Q.version.split("."))[2]="x",B.join(".")+"/dist/aframe-inspector.min.js");M.exports.Component=P("inspector",{schema:{url:{default:C}},sceneOnly:!0,init:function(){this.firstPlay=!0,this.onKeydown=this.onKeydown.bind(this),this.onMessage=this.onMessage.bind(this),this.initOverlay(),window.addEventListener("keydown",this.onKeydown),window.addEventListener("message",this.onMessage)},play:function(){var V;this.firstPlay&&(V=A.getUrlParameter("inspector"))!=="false"&&V&&(this.openInspector(),this.firstPlay=!1)},initOverlay:function(){this.loadingMessageEl=document.createElement("div"),this.loadingMessageEl.classList.add("a-inspector-loader"),this.loadingMessageEl.innerHTML='Loading Inspector<span class="dots"><span>.</span><span>.</span><span>.</span></span>'},remove:function(){this.removeEventListeners()},onKeydown:function(V){V.keyCode===73&&(V.ctrlKey&&V.altKey||V.getModifierState("AltGraph"))&&this.openInspector()},showLoader:function(){document.body.appendChild(this.loadingMessageEl)},hideLoader:function(){document.body.removeChild(this.loadingMessageEl)},onMessage:function(V){V.data==="INJECT_AFRAME_INSPECTOR"&&this.openInspector()},openInspector:function(V){var z,H=this;AFRAME.INSPECTOR||AFRAME.inspectorInjected?AFRAME.INSPECTOR.open(V):(this.showLoader(),(z=document.createElement("script")).src=this.data.url,z.setAttribute("data-name","aframe-inspector"),z.setAttribute(N,""),z.onload=function(){AFRAME.INSPECTOR.open(V),H.hideLoader(),H.removeEventListeners()},z.onerror=function(){H.loadingMessageEl.innerHTML="Error loading Inspector"},document.head.appendChild(z),AFRAME.inspectorInjected=!0)},removeEventListeners:function(){window.removeEventListener("keydown",this.onKeydown),window.removeEventListener("message",this.onMessage)}})},7445:(M,E,e)=>{var B=e(3515).registerComponent,N=e(8903).shouldCaptureKeyEvent;M.exports.Component=B("keyboard-shortcuts",{schema:{enterVR:{default:!0},exitVR:{default:!0}},sceneOnly:!0,init:function(){this.onKeyup=this.onKeyup.bind(this)},update:function(Q){var P=this.data;this.enterVREnabled=P.enterVR},play:function(){window.addEventListener("keyup",this.onKeyup,!1)},pause:function(){window.removeEventListener("keyup",this.onKeyup)},onKeyup:function(Q){var P=this.el;N(Q)&&(this.enterVREnabled&&Q.keyCode===70&&P.enterVR(),this.enterVREnabled&&Q.keyCode===27&&P.exitVR())}})},4310:(M,E,e)=>{var B=e(4219),N=e(3515).registerComponent,Q=B("components:pool:warn");M.exports.Component=N("pool",{schema:{container:{default:""},mixin:{default:""},size:{default:0},dynamic:{default:!1}},sceneOnly:!0,multiple:!0,initPool:function(){var P;for(this.availableEls=[],this.usedEls=[],this.data.mixin||Q("No mixin provided for pool component."),this.data.container&&(this.container=document.querySelector(this.data.container),this.container||Q("Container "+this.data.container+" not found.")),this.container=this.container||this.el,P=0;P<this.data.size;++P)this.createEntity()},update:function(P){var A=this.data;P.mixin===A.mixin&&P.size===A.size||this.initPool()},createEntity:function(){var P;(P=document.createElement("a-entity")).play=this.wrapPlay(P.play),P.setAttribute("mixin",this.data.mixin),P.object3D.visible=!1,P.pause(),this.container.appendChild(P),this.availableEls.push(P);var A=this.usedEls;P.addEventListener("loaded",function(){A.indexOf(P)===-1&&(P.object3DParent=P.object3D.parent,P.object3D.parent.remove(P.object3D))})},wrapPlay:function(P){var A=this.usedEls;return function(){A.indexOf(this)!==-1&&P.call(this)}},requestEntity:function(){var P;if(this.availableEls.length===0){if(this.data.dynamic===!1)return void Q("Requested entity from empty pool: "+this.attrName);Q("Requested entity from empty pool. This pool is dynamic and will resize automatically. You might want to increase its initial size: "+this.attrName),this.createEntity()}return P=this.availableEls.shift(),this.usedEls.push(P),P.object3DParent&&(P.object3DParent.add(P.object3D),this.updateRaycasters()),P.object3D.visible=!0,P},returnEntity:function(P){var A=this.usedEls.indexOf(P);if(A!==-1)return this.usedEls.splice(A,1),this.availableEls.push(P),P.object3DParent=P.object3D.parent,P.object3D.parent.remove(P.object3D),this.updateRaycasters(),P.object3D.visible=!1,P.pause(),P;Q("The returned entity was not previously pooled from "+this.attrName)},updateRaycasters:function(){document.querySelectorAll("[raycaster]").forEach(function(P){P.components.raycaster.setDirty()})}})},7579:(M,E,e)=>{var B,N=e(3515).registerComponent,Q=e(2666);M.exports.Component=N("real-world-meshing",{schema:{filterLabels:{type:"array"},meshesEnabled:{default:!0},meshMixin:{default:!0},planesEnabled:{default:!0},planeMixin:{default:""}},sceneOnly:!0,init:function(){var P=this.el.getAttribute("webxr"),A=P.requiredFeatures;A.indexOf("mesh-detection")===-1&&(A.push("mesh-detection"),this.el.setAttribute("webxr",P)),A.indexOf("plane-detection")===-1&&(A.push("plane-detection"),this.el.setAttribute("webxr",P)),this.meshEntities=[],this.initWorldMeshEntity=this.initWorldMeshEntity.bind(this)},tick:function(){this.el.is("ar-mode")&&(this.detectMeshes(),this.updateMeshes())},detectMeshes:function(){var P,A,C,V=this.data,z=this.el,H=(z.renderer.xr,this.meshEntities),G=!1,$=[],k=this.data.filterLabels;P=(C=z.frame).detectedMeshes,A=C.detectedPlanes;for(var K=0;K<H.length;K++)H[K].present=!1;if(V.meshesEnabled){for(var Z of P.values())if(!k.length||k.indexOf(Z.semanticLabel)!==-1){for(K=0;K<H.length;K++)if(Z===H[K].mesh){G=!0,H[K].present=!0,H[K].lastChangedTime<Z.lastChangedTime&&this.updateMeshGeometry(H[K].el,Z),H[K].lastChangedTime=Z.lastChangedTime;break}G||$.push(Z),G=!1}}if(V.planesEnabled){for(Z of A.values())if(!k.length||k.indexOf(Z.semanticLabel)!==-1){for(K=0;K<H.length;K++)if(Z===H[K].mesh){G=!0,H[K].present=!0,H[K].lastChangedTime<Z.lastChangedTime&&this.updateMeshGeometry(H[K].el,Z),H[K].lastChangedTime=Z.lastChangedTime;break}G||$.push(Z),G=!1}}this.deleteMeshes(),this.createNewMeshes($)},updateMeshes:(B=new Q.Matrix4,function(){for(var P,A,C,V=this.el,z=V.frame,H=this.meshEntities,G=V.renderer.xr.getReferenceSpace(),$=0;$<H.length;$++)C=H[$].mesh.meshSpace||H[$].mesh.planeSpace,P=z.getPose(C,G),(A=H[$].el).hasLoaded&&(B.fromArray(P.transform.matrix),B.decompose(A.object3D.position,A.object3D.quaternion,A.object3D.scale))}),deleteMeshes:function(){for(var P=this.meshEntities,A=[],C=0;C<P.length;C++)P[C].present?A.push(P[C]):this.el.removeChild(P[C]);this.meshEntities=A},createNewMeshes:function(P){for(var A,C=0;C<P.length;C++)A=document.createElement("a-entity"),this.meshEntities.push({mesh:P[C],el:A}),A.addEventListener("loaded",this.initWorldMeshEntity),this.el.appendChild(A)},initMeshGeometry:function(P){var A,C,V;if(P instanceof XRPlane){C=new Q.Shape,V=P.polygon;for(var z=0;z<V.length;++z)z===0?C.moveTo(V[z].x,V[z].z):C.lineTo(V[z].x,V[z].z);return(A=new Q.ShapeGeometry(C)).rotateX(Math.PI/2),A}return(A=new Q.BufferGeometry).setAttribute("position",new Q.BufferAttribute(P.vertices,3)),A.setIndex(new Q.BufferAttribute(P.indices,1)),A},initWorldMeshEntity:function(P){for(var A,C,V,z=P.target,H=this.meshEntities,G=0;G<H.length;G++)if(H[G].el===z){V=H[G];break}A=this.initMeshGeometry(V.mesh),C=new Q.Mesh(A,new Q.MeshBasicMaterial({color:16777215*Math.random(),side:Q.DoubleSide})),z.setObject3D("mesh",C),V.mesh instanceof XRPlane&&this.data.planeMixin?z.setAttribute("mixin",this.data.planeMixin):this.data.meshMixin&&z.setAttribute("mixin",this.data.meshMixin),z.setAttribute("data-world-mesh",V.mesh.semanticLabel)},updateMeshGeometry:function(P,A){var C=P.getObject3D("mesh");C.geometry.dispose(),C.geometry=this.initMeshGeometry(A)}})},5670:(M,E,e)=>{var B=e(3515).registerComponent;M.exports.Component=B("reflection",{schema:{directionalLight:{type:"selector"}},sceneOnly:!0,init:function(){var N=this;this.cubeRenderTarget=new THREE.WebGLCubeRenderTarget(16),this.cubeCamera=new THREE.CubeCamera(.1,1e3,this.cubeRenderTarget),this.lightingEstimationTexture=new THREE.WebGLCubeRenderTarget(16).texture,this.needsVREnvironmentUpdate=!0;var Q=this.el.getAttribute("webxr"),P=Q.optionalFeatures;P.includes("light-estimation")||(P.push("light-estimation"),this.el.setAttribute("webxr",Q)),this.el.addEventListener("enter-vr",function(){N.el.is("ar-mode")&&N.el.renderer.xr.getSession().requestLightProbe&&N.startLightProbe()}),this.el.addEventListener("exit-vr",function(){N.xrLightProbe&&N.stopLightProbe()}),this.el.object3D.environment=this.cubeRenderTarget.texture},stopLightProbe:function(){this.xrLightProbe=null,this.probeLight&&(this.probeLight.components.light.light.intensity=0),this.needsVREnvironmentUpdate=!0,this.el.object3D.environment=this.cubeRenderTarget.texture},startLightProbe:function(){this.needsLightProbeUpdate=!0},setupLightProbe:function(){var N=this.el.renderer,Q=N.xr.getSession(),P=this,A=N.getContext();if(!this.probeLight){var C=document.createElement("a-light");C.setAttribute("type","probe"),C.setAttribute("intensity",0),this.el.appendChild(C),this.probeLight=C}switch(Q.preferredReflectionFormat){case"srgba8":A.getExtension("EXT_sRGB");break;case"rgba16f":A.getExtension("OES_texture_half_float")}this.glBinding=new XRWebGLBinding(Q,A),A.getExtension("EXT_sRGB"),A.getExtension("OES_texture_half_float"),Q.requestLightProbe().then(function(V){P.xrLightProbe=V,V.addEventListener("reflectionchange",P.updateXRCubeMap.bind(P))}).catch(function(V){console.warn("Lighting estimation not supported: "+V.message),console.warn('Are you missing: webxr="optionalFeatures: light-estimation;" from <a-scene>?')})},updateXRCubeMap:function(){var N=this.el.renderer,Q=this.glBinding.getReflectionCubeMap(this.xrLightProbe);Q&&(N.properties.get(this.lightingEstimationTexture).__webglTexture=Q,this.lightingEstimationTexture.needsPMREMUpdate=!0,this.el.object3D.environment=this.lightingEstimationTexture)},tick:function(){var N=this.el.object3D,Q=this.el.renderer,P=this.el.frame;if(P&&this.xrLightProbe){var A=P.getLightEstimate(this.xrLightProbe);A&&function(C,V,z,H){var G=Math.max(C.primaryLightIntensity.x,Math.max(C.primaryLightIntensity.y,C.primaryLightIntensity.z));V.sh.fromArray(C.sphericalHarmonicsCoefficients),V.intensity=1,z&&(z.color.setRGB(C.primaryLightIntensity.x/G,C.primaryLightIntensity.y/G,C.primaryLightIntensity.z/G),z.intensity=G,H.copy(C.primaryLightDirection))}(A,this.probeLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.object3D.position)}this.needsVREnvironmentUpdate&&(N.environment=null,this.needsVREnvironmentUpdate=!1,this.cubeCamera.position.set(0,1.6,0),this.cubeCamera.update(Q,N),N.environment=this.cubeRenderTarget.texture),this.needsLightProbeUpdate&&P&&(this.setupLightProbe(),this.needsLightProbeUpdate=!1)},remove:function(){this.el.object3D.environment=null,this.probeLight&&this.el.removeChild(this.probeLight)}})},467:(M,E,e)=>{var B=e(3515).registerComponent,N=e(2666),Q=["attribute vec3 position;","attribute vec2 uv;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUv;","void main()  {","  vUv = vec2( 1.- uv.x, uv.y );","  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),P=["precision mediump float;","uniform samplerCube map;","varying vec2 vUv;","#define M_PI 3.141592653589793238462643383279","void main() {","  vec2 uv = vUv;","  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;","  float latitude = uv.y * M_PI;","  vec3 dir = vec3(","    - sin( longitude ) * sin( latitude ),","    cos( latitude ),","    - cos( longitude ) * sin( latitude )","  );","  normalize( dir );","  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );","}"].join(`
`);M.exports.Component=B("screenshot",{schema:{width:{default:4096},height:{default:2048},camera:{type:"selector"}},sceneOnly:!0,setup:function(){var A=this.el;if(!this.canvas){var C=A.renderer.getContext();C&&(this.cubeMapSize=C.getParameter(C.MAX_CUBE_MAP_TEXTURE_SIZE),this.material=new N.RawShaderMaterial({uniforms:{map:{type:"t",value:null}},vertexShader:Q,fragmentShader:P,side:N.DoubleSide}),this.quad=new N.Mesh(new N.PlaneGeometry(1,1),this.material),this.quad.visible=!1,this.camera=new N.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),A.object3D.add(this.quad),this.onKeyDown=this.onKeyDown.bind(this))}},getRenderTarget:function(A,C){return new N.WebGLRenderTarget(A,C,{colorSpace:this.el.sceneEl.renderer.outputColorSpace,minFilter:N.LinearFilter,magFilter:N.LinearFilter,wrapS:N.ClampToEdgeWrapping,wrapT:N.ClampToEdgeWrapping,format:N.RGBAFormat,type:N.UnsignedByteType})},resize:function(A,C){this.quad.scale.set(A,C,1),this.camera.left=-1*A/2,this.camera.right=A/2,this.camera.top=C/2,this.camera.bottom=-1*C/2,this.camera.updateProjectionMatrix(),this.canvas.width=A,this.canvas.height=C},play:function(){window.addEventListener("keydown",this.onKeyDown)},onKeyDown:function(A){var C=A.keyCode===83&&A.ctrlKey&&A.altKey;if(this.data&&C){var V=A.shiftKey?"equirectangular":"perspective";this.capture(V)}},setCapture:function(A){var C,V,z,H,G=this.el;return A==="perspective"?(this.quad.visible=!1,V=this.data.camera&&this.data.camera.components.camera.camera||G.camera,C={width:this.data.width,height:this.data.height}):(V=this.camera,H=new N.WebGLCubeRenderTarget(Math.min(this.cubeMapSize,2048),{format:N.RGBFormat,generateMipmaps:!0,minFilter:N.LinearMipmapLinearFilter,colorSpace:N.SRGBColorSpace}),z=new N.CubeCamera(G.camera.near,G.camera.far,H),G.camera.getWorldPosition(z.position),G.camera.getWorldQuaternion(z.quaternion),z.update(G.renderer,G.object3D),this.quad.material.uniforms.map.value=z.renderTarget.texture,C={width:this.data.width,height:this.data.height},this.quad.visible=!0),{camera:V,size:C,projection:A}},capture:function(A){var C,V=this.el.renderer.xr.enabled,z=this.el.renderer;this.setup(),z.xr.enabled=!1,C=this.setCapture(A),this.renderCapture(C.camera,C.size,C.projection),this.saveCapture(),z.xr.enabled=V},getCanvas:function(A){var C=this.el.renderer.xr.enabled,V=this.el.renderer;this.setup();var z=this.setCapture(A);return V.xr.enabled=!1,this.renderCapture(z.camera,z.size,z.projection),V.xr.enabled=C,this.canvas},renderCapture:function(A,C,V){var z,H,G,$=this.el.renderer.autoClear,k=this.el,K=k.renderer;H=this.getRenderTarget(C.width,C.height),G=new Uint8Array(4*C.width*C.height),this.resize(C.width,C.height),K.autoClear=!0,K.clear(),K.setRenderTarget(H),K.render(k.object3D,A),K.autoClear=$,K.readRenderTargetPixels(H,0,0,C.width,C.height,G),K.setRenderTarget(null),V==="perspective"&&(G=this.flipPixelsVertically(G,C.width,C.height)),z=new ImageData(new Uint8ClampedArray(G),C.width,C.height),this.quad.visible=!1,this.ctx.putImageData(z,0,0)},flipPixelsVertically:function(A,C,V){for(var z=A.slice(0),H=0;H<C;++H)for(var G=0;G<V;++G)z[4*H+G*C*4]=A[4*H+(V-G)*C*4],z[4*H+1+G*C*4]=A[4*H+1+(V-G)*C*4],z[4*H+2+G*C*4]=A[4*H+2+(V-G)*C*4],z[4*H+3+G*C*4]=A[4*H+3+(V-G)*C*4];return z},saveCapture:function(){this.canvas.toBlob(function(A){var C="screenshot-"+document.title.toLowerCase()+"-"+Date.now()+".png",V=document.createElement("a"),z=URL.createObjectURL(A);V.href=z,V.setAttribute("download",C),V.innerHTML="downloading...",V.style.display="none",document.body.appendChild(V),setTimeout(function(){V.click(),document.body.removeChild(V)},1)},"image/png")}})},5834:(M,E,e)=>{var B=e(3515).registerComponent,N=e(1326),Q=e(8903);e(9625),e(1543);var P=window.aframeStats,A="a-hidden",C=window.threeStats;M.exports.Component=B("stats",{schema:{default:!0},sceneOnly:!0,init:function(){var V=this.el;Q.getUrlParameter("stats")!=="false"&&(this.stats=function(z){var H=new C(z.renderer),G=new P(z),$=z.isMobile?[]:[H,G];return new N({css:[],values:{fps:{caption:"fps",below:30}},groups:[{caption:"Framerate",values:["fps","raf"]}],plugins:$})}(V),this.statsEl=document.querySelector(".rs-base"),this.hideBound=this.hide.bind(this),this.showBound=this.show.bind(this),V.addEventListener("enter-vr",this.hideBound),V.addEventListener("exit-vr",this.showBound))},update:function(){if(this.stats)return this.data?this.show():this.hide()},remove:function(){this.el.removeEventListener("enter-vr",this.hideBound),this.el.removeEventListener("exit-vr",this.showBound),this.statsEl&&this.statsEl.parentNode.removeChild(this.statsEl)},tick:function(){var V=this.stats;V&&(V("rAF").tick(),V("FPS").frame(),V().update())},hide:function(){this.statsEl.classList.add(A)},show:function(){this.statsEl.classList.remove(A)}})},3807:(M,E,e)=>{var B=e(3515).registerComponent,N=e(8309),Q=e(8903),P="a-hidden";function A(C){C.addEventListener("touchstart",function(){C.classList.remove("resethover")},{passive:!0}),C.addEventListener("touchend",function(){C.classList.add("resethover")},{passive:!0})}M.exports.Component=B("xr-mode-ui",{dependencies:["canvas"],schema:{enabled:{default:!0},cardboardModeEnabled:{default:!1},enterVRButton:{default:""},enterVREnabled:{default:!0},enterARButton:{default:""},enterAREnabled:{default:!0},XRMode:{default:"vr",oneOf:["vr","ar","xr"]}},sceneOnly:!0,init:function(){var C=this,V=this.el;Q.getUrlParameter("ui")!=="false"&&(this.insideLoader=!1,this.enterVREl=null,this.enterAREl=null,this.orientationModalEl=null,this.bindMethods(),V.addEventListener("enter-vr",this.updateEnterInterfaces),V.addEventListener("exit-vr",this.updateEnterInterfaces),V.addEventListener("update-vr-devices",this.updateEnterInterfaces),window.addEventListener("message",function(z){z.data.type==="loaderReady"&&(C.insideLoader=!0,C.remove())}),window.addEventListener("orientationchange",this.toggleOrientationModalIfNeeded))},bindMethods:function(){this.onEnterVRButtonClick=this.onEnterVRButtonClick.bind(this),this.onEnterARButtonClick=this.onEnterARButtonClick.bind(this),this.onModalClick=this.onModalClick.bind(this),this.toggleOrientationModalIfNeeded=this.toggleOrientationModalIfNeeded.bind(this),this.updateEnterInterfaces=this.updateEnterInterfaces.bind(this)},onModalClick:function(){this.el.exitVR()},onEnterVRButtonClick:function(){this.el.enterVR()},onEnterARButtonClick:function(){this.el.enterAR()},update:function(){var C,V,z,H=this.data,G=this.el;if(!H.enabled||this.insideLoader||Q.getUrlParameter("ui")==="false")return this.remove();this.enterVREl||this.enterAREl||this.orientationModalEl||(this.enterVREl||!H.enterVREnabled||H.XRMode!=="xr"&&H.XRMode!=="vr"||(H.enterVRButton?(this.enterVREl=document.querySelector(H.enterVRButton),this.enterVREl.addEventListener("click",this.onEnterVRButtonClick)):(this.enterVREl=(C=this.onEnterVRButtonClick,(z=document.createElement("div")).classList.add("a-enter-vr"),z.setAttribute(N.AFRAME_INJECTED,""),(V=document.createElement("button")).className="a-enter-vr-button",V.setAttribute("title","Enter VR mode with a headset or fullscreen without"),V.setAttribute(N.AFRAME_INJECTED,""),Q.device.isMobile()&&A(V),z.appendChild(V),V.addEventListener("click",function($){C(),$.stopPropagation()}),z),G.appendChild(this.enterVREl))),this.enterAREl||!H.enterAREnabled||H.XRMode!=="xr"&&H.XRMode!=="ar"||(H.enterARButton?(this.enterAREl=document.querySelector(H.enterARButton),this.enterAREl.addEventListener("click",this.onEnterARButtonClick)):(this.enterAREl=function($,k){var K,Z;return(Z=document.createElement("div")).classList.add("a-enter-ar"),k&&Z.classList.add("xr"),Z.setAttribute(N.AFRAME_INJECTED,""),(K=document.createElement("button")).className="a-enter-ar-button",K.setAttribute("title","Enter AR mode with a headset or handheld device."),K.setAttribute(N.AFRAME_INJECTED,""),Q.device.isMobile()&&A(K),Z.appendChild(K),K.addEventListener("click",function(ee){$(),ee.stopPropagation()}),Z}(this.onEnterARButtonClick,H.XRMode==="xr"),G.appendChild(this.enterAREl))),this.orientationModalEl=function($){var k=document.createElement("div");k.className="a-orientation-modal",k.classList.add(P),k.setAttribute(N.AFRAME_INJECTED,"");var K=document.createElement("button");return K.setAttribute(N.AFRAME_INJECTED,""),K.innerHTML="Exit VR",K.addEventListener("click",$),k.appendChild(K),k}(this.onModalClick),G.appendChild(this.orientationModalEl),this.updateEnterInterfaces())},remove:function(){[this.enterVREl,this.enterAREl,this.orientationModalEl].forEach(function(C){C&&C.parentNode&&C.parentNode.removeChild(C)}),this.enterVREl=void 0,this.enterAREl=void 0,this.orientationModalEl=void 0},updateEnterInterfaces:function(){this.toggleEnterVRButtonIfNeeded(),this.toggleEnterARButtonIfNeeded(),this.toggleOrientationModalIfNeeded()},toggleEnterVRButtonIfNeeded:function(){var C=this.el;this.enterVREl&&(C.is("vr-mode")||(C.isMobile||Q.device.isMobileDeviceRequestingDesktopSite())&&!this.data.cardboardModeEnabled&&!Q.device.checkVRSupport()?this.enterVREl.classList.add(P):(Q.device.checkVRSupport()||this.enterVREl.classList.add("fullscreen"),this.enterVREl.classList.remove(P),C.enterVR(!1,!0)))},toggleEnterARButtonIfNeeded:function(){var C=this.el;this.enterAREl&&(C.is("vr-mode")||!Q.device.checkARSupport()?this.enterAREl.classList.add(P):(this.enterAREl.classList.remove(P),C.enterVR(!0,!0)))},toggleOrientationModalIfNeeded:function(){var C=this.el,V=this.orientationModalEl;V&&C.isMobile&&(!Q.device.isLandscape()&&C.is("vr-mode")?V.classList.remove(P):V.classList.add(P))}})},1684:(M,E,e)=>{var B=e(3515),N=e(2666),Q=B.registerComponent;M.exports.Component=Q("shadow",{schema:{cast:{default:!0},receive:{default:!0}},init:function(){this.onMeshChanged=this.update.bind(this),this.el.addEventListener("object3dset",this.onMeshChanged),this.system.setShadowMapEnabled(!0)},update:function(){var P=this.data;this.updateDescendants(P.cast,P.receive)},remove:function(){this.el.removeEventListener("object3dset",this.onMeshChanged),this.updateDescendants(!1,!1)},updateDescendants:function(P,A){var C=this.el.sceneEl;this.el.object3D.traverse(function(V){if(V instanceof N.Mesh&&(V.castShadow=P,V.receiveShadow=A,C.hasLoaded&&V.material))for(var z=Array.isArray(V.material)?V.material:[V.material],H=0;H<z.length;H++)z[H].needsUpdate=!0})}})},5538:(M,E,e)=>{var B=e(3515).registerComponent,N=e(4219),Q=e(2666),P=N("components:sound:warn");M.exports.Component=B("sound",{schema:{autoplay:{default:!1},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},loop:{default:!1},loopStart:{default:0},loopEnd:{default:0},maxDistance:{default:1e4},on:{default:""},poolSize:{default:1},positional:{default:!0},refDistance:{default:1},rolloffFactor:{default:1},src:{type:"audio"},volume:{default:1}},multiple:!0,init:function(){var A=this;this.listener=null,this.audioLoader=new Q.AudioLoader,this.pool=new Q.Group,this.loaded=!1,this.mustPlay=!1,this.playSoundBound=function(){A.playSound()}},update:function(A){var C,V,z=this.data,H=z.src!==A.src;if(H){if(!z.src)return;this.setupSound()}for(C=0;C<this.pool.children.length;C++)V=this.pool.children[C],z.positional&&(V.setDistanceModel(z.distanceModel),V.setMaxDistance(z.maxDistance),V.setRefDistance(z.refDistance),V.setRolloffFactor(z.rolloffFactor)),V.setLoop(z.loop),V.setLoopStart(z.loopStart),z.loopStart!==0&&z.loopEnd===0?V.setLoopEnd(V.buffer.duration):V.setLoopEnd(z.loopEnd),V.setVolume(z.volume),V.isPaused=!1;if(z.on!==A.on&&this.updateEventListener(A.on),H){var G=this;this.loaded=!1,this.audioLoader.load(z.src,function($){for(C=0;C<G.pool.children.length;C++)(V=G.pool.children[C]).setBuffer($);G.loaded=!0,Q.Cache.remove(z.src),(G.data.autoplay||G.mustPlay)&&G.playSound(G.processSound),G.el.emit("sound-loaded",G.evtDetail,!1)})}},pause:function(){this.stopSound(),this.removeEventListener()},play:function(){this.data.autoplay&&this.playSound(),this.updateEventListener()},remove:function(){var A;this.removeEventListener(),this.el.getObject3D(this.attrName)&&this.el.removeObject3D(this.attrName);try{for(A=0;A<this.pool.children.length;A++)this.pool.children[A].disconnect()}catch{P("Audio source not properly disconnected")}},updateEventListener:function(A){var C=this.el;A&&C.removeEventListener(A,this.playSoundBound),C.addEventListener(this.data.on,this.playSoundBound)},removeEventListener:function(){this.el.removeEventListener(this.data.on,this.playSoundBound)},setupSound:function(){var A,C,V=this.el,z=V.sceneEl,H=this;this.pool.children.length>0&&(this.stopSound(),V.removeObject3D("sound"));var G=this.listener=z.audioListener||new Q.AudioListener;for(z.audioListener=G,z.camera&&z.camera.add(G),z.addEventListener("camera-set-active",function($){$.detail.cameraEl.getObject3D("camera").add(G)}),this.pool=new Q.Group,A=0;A<this.data.poolSize;A++)C=this.data.positional?new Q.PositionalAudio(G):new Q.Audio(G),this.pool.add(C);for(V.setObject3D(this.attrName,this.pool),A=0;A<this.pool.children.length;A++)(C=this.pool.children[A]).onEnded=function(){this.isPlaying=!1,H.el.emit("sound-ended",H.evtDetail,!1)}},pauseSound:function(){var A,C;for(this.isPlaying=!1,A=0;A<this.pool.children.length;A++)(C=this.pool.children[A]).source&&C.source.buffer&&C.isPlaying&&!C.isPaused&&(C.isPaused=!0,C.pause())},playSound:function(A){var C,V,z;if(!this.loaded)return P("Sound not loaded yet. It will be played once it finished loading"),this.mustPlay=!0,void(this.processSound=A);for(C=!1,this.isPlaying=!0,V=0;V<this.pool.children.length;V++)(z=this.pool.children[V]).isPlaying||!z.buffer||C||(A&&A(z),z.play(),z.isPaused=!1,C=!0);C?(this.mustPlay=!1,this.processSound=void 0):P("All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute.",this.el)},stopSound:function(){var A,C;for(this.isPlaying=!1,A=0;A<this.pool.children.length;A++){if(!(C=this.pool.children[A]).source||!C.source.buffer)return;C.stop()}}})},6957:(M,E,e)=>{var B=e(6559),N=e(1880),Q=e(3515).registerComponent,P=e(9644),A=e(2666),C=e(8903),V=C.debug("components:text:error"),z=P.shaders,H=C.debug("components:text:warn"),G=e(8309).AFRAME_CDN_ROOT+"fonts/",$={aileronsemibold:G+"Aileron-Semibold.fnt",dejavu:G+"DejaVu-sdf.fnt",exo2bold:G+"Exo2Bold.fnt",exo2semibold:G+"Exo2SemiBold.fnt",kelsonsans:G+"KelsonSans.fnt",monoid:G+"Monoid.fnt",mozillavr:G+"mozillavr.fnt",roboto:G+"Roboto-msdf.json",sourcecodepro:G+"SourceCodePro.fnt"},k=["roboto"],K="roboto";M.exports.FONTS=$;var Z,ee,he,ue,ve=new function(){var Ce=this.cache={};this.get=function(Re,Qe){return Re in Ce||(Ce[Re]=Qe()),Ce[Re]}},be={},Te={},ye=/^\w+:/;function De(Ce,Re,Qe){return Ce||(.5+Re)*Qe}M.exports.Component=Q("text",{multiple:!0,schema:{align:{type:"string",default:"left",oneOf:["left","right","center"]},alphaTest:{default:.5},anchor:{default:"center",oneOf:["left","right","center","align"]},baseline:{default:"center",oneOf:["top","center","bottom"]},color:{type:"color",default:"#FFF"},font:{type:"string",default:K},fontImage:{type:"string"},height:{type:"number"},letterSpacing:{type:"number",default:0},lineHeight:{type:"number"},negate:{type:"boolean",default:!0},opacity:{type:"number",default:1},shader:{default:"sdf",oneOf:z},side:{default:"front",oneOf:["front","back","double"]},tabSize:{default:4},transparent:{default:!0},value:{type:"string"},whiteSpace:{default:"normal",oneOf:["normal","pre","nowrap"]},width:{type:"number"},wrapCount:{type:"number",default:40},wrapPixels:{type:"number"},xOffset:{type:"number",default:0},yOffset:{type:"number",default:0},zOffset:{type:"number",default:.001}},init:function(){this.shaderData={},this.geometry=B(),this.createOrUpdateMaterial(),this.explicitGeoDimensionsChecked=!1},update:function(Ce){var Re=this.data,Qe=this.currentFont;Te[Re.font]?this.texture=Te[Re.font]:(this.texture=Te[Re.font]=new A.Texture,this.texture.anisotropy=16),this.createOrUpdateMaterial(),Ce.font===Re.font?Qe&&(this.updateGeometry(this.geometry,Qe),this.updateLayout()):this.updateFont()},remove:function(){this.geometry.dispose(),this.geometry=null,this.el.removeObject3D(this.attrName),this.material.dispose(),this.material=null,this.texture.dispose(),this.texture=null,this.shaderObject&&delete this.shaderObject},createOrUpdateMaterial:function(){var Ce,Re,Qe,ot=this.data,Je=this.material,Mt=this.shaderData;if(Qe=ot.shader,k.indexOf(ot.font)!==-1||ot.font.indexOf("-msdf.")>=0?Qe="msdf":ot.font in $&&k.indexOf(ot.font)===-1&&(Qe="sdf"),Ce=(this.shaderObject&&this.shaderObject.name)!==Qe,Mt.alphaTest=ot.alphaTest,Mt.color=ot.color,Mt.map=this.texture,Mt.opacity=ot.opacity,Mt.side=function(Zt){switch(Zt){case"back":return A.FrontSide;case"double":return A.DoubleSide;default:return A.BackSide}}(ot.side),Mt.transparent=ot.transparent,Mt.negate=ot.negate,!Ce)return this.shaderObject.update(Mt),Je.transparent=Mt.transparent,void(Je.side=Mt.side);Re=function(Zt,kt,si){var _i,Ri;return(Ri=new z[kt].Shader).el=Zt,Ri.init(si),Ri.update(si),(_i=Ri.material).transparent=si.transparent,{material:_i,shader:Ri}}(this.el,Qe,Mt),this.material=Re.material,this.shaderObject=Re.shader,this.material.side=Mt.side,this.mesh&&(this.mesh.material=this.material)},updateFont:function(){var Ce,Re=this.data,Qe=this.el,ot=this.geometry,Je=this;Re.font||H("No font specified. Using the default font."),this.mesh&&(this.mesh.visible=!1),Ce=this.lookupFont(Re.font||K)||Re.font,ve.get(Ce,function(){return Mt=Ce,Zt=Re.yOffset,new Promise(function(kt,si){N(Mt,function(_i,Ri){if(_i)return V("Error loading font",Mt),void si(_i);Mt.indexOf("/Roboto-msdf.json")>=0&&(Zt=30),Zt&&Ri.chars.map(function(er){er.yoffset+=Zt}),kt(Ri)})});var Mt,Zt}).then(function(Mt){var Zt;if(Mt.pages.length!==1)throw new Error("Currently only single-page bitmap fonts are supported.");be[Ce]||(Mt.widthFactor=be[Mt]=function(kt){var si=0,_i=0,Ri=0;return kt.chars.map(function(er){si+=er.xadvance,er.id>=48&&er.id<=57&&(Ri++,_i+=er.xadvance)}),Ri?_i/Ri:si/kt.chars.length}(Mt)),Je.currentFont=Mt,Zt=Je.getFontImageSrc(),ve.get(Zt,function(){return kt=Zt,new Promise(function(si,_i){new A.ImageLoader().load(kt,function(Ri){si(Ri)},void 0,function(){V("Error loading font image",kt),_i(null)})});var kt}).then(function(kt){var si=Je.texture;si&&(si.image=kt,si.needsUpdate=!0,Te[Re.font]=si,Je.texture=si,Je.initMesh(),Je.currentFont=Mt,Je.updateGeometry(ot,Mt),Je.updateLayout(),Je.mesh.visible=!0,Qe.emit("textfontset",{font:Re.font,fontObj:Mt}))}).catch(function(kt){V(kt.message),V(kt.stack)})}).catch(function(Mt){V(Mt.message),V(Mt.stack)})},initMesh:function(){this.mesh||(this.mesh=new A.Mesh(this.geometry,this.material),this.el.setObject3D(this.attrName,this.mesh))},getFontImageSrc:function(){if(this.data.fontImage)return this.data.fontImage;var Ce=this.lookupFont(this.data.font||K)||this.data.font,Re=this.currentFont.pages[0];return Re.match(ye)&&Re.indexOf("http")!==0?Ce.replace(/(\.fnt)|(\.json)/,".png"):A.LoaderUtils.extractUrlBase(Ce)+Re},updateLayout:function(){var Ce,Re,Qe,ot,Je,Mt,Zt,kt,si,_i=this.el,Ri=this.data,er=this.geometry,Ki=this.mesh;if(Ki&&er.layout){if(Qe=_i.getAttribute("geometry"),ot=(Mt=(Zt=Ri.width||Qe&&Qe.width||1)/De(Ri.wrapPixels,Ri.wrapCount,this.currentFont.widthFactor))*((Je=er.layout).height+Je.descender),Qe&&Qe.primitive==="plane"&&(this.explicitGeoDimensionsChecked||(this.explicitGeoDimensionsChecked=!0,this.hasExplicitGeoWidth=!!Qe.width,this.hasExplicitGeoHeight=!!Qe.height),this.hasExplicitGeoWidth||_i.setAttribute("geometry","width",Zt),this.hasExplicitGeoHeight||_i.setAttribute("geometry","height",ot)),(Ce=Ri.anchor==="align"?Ri.align:Ri.anchor)==="left")kt=0;else if(Ce==="right")kt=-1*Je.width;else{if(Ce!=="center")throw new TypeError("Invalid text.anchor property value",Ce);kt=-1*Je.width/2}if((Re=Ri.baseline)==="bottom")si=0;else if(Re==="top")si=-1*Je.height+Je.ascender;else{if(Re!=="center")throw new TypeError("Invalid text.baseline property value",Re);si=-1*Je.height/2}Ki.position.x=kt*Mt+Ri.xOffset,Ki.position.y=si*Mt,Ki.position.z=Ri.zOffset,Ki.scale.set(Mt,-1*Mt,Mt)}},lookupFont:function(Ce){return $[Ce]},updateGeometry:(Z={},ee={},he=/\\n/g,ue=/\\t/g,function(Ce,Re){var Qe=this.data;ee.font=Re,ee.lineHeight=Qe.lineHeight&&isFinite(Qe.lineHeight)?Qe.lineHeight:Re.common.lineHeight,ee.text=Qe.value.toString().replace(he,`
`).replace(ue,"	"),ee.width=De(Qe.wrapPixels,Qe.wrapCount,Re.widthFactor),Ce.update(C.extend(Z,Qe,ee))})})},1125:(M,E,e)=>{var B=e(3515).registerComponent,N=e(6600),Q=e(8309).DEFAULT_CAMERA_HEIGHT,P=e(2666),A=e(8309).DEFAULT_HANDEDNESS,C={touches:[]};M.exports.Component=B("tracked-controls-webvr",{schema:{autoHide:{default:!0},controller:{default:0},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},orientationOffset:{type:"vec3"},armModel:{default:!1},headElement:{type:"selector"}},init:function(){this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.changedAxes=[],this.targetControllerNumber=this.data.controller,this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes},this.deltaControllerPosition=new P.Vector3,this.controllerQuaternion=new P.Quaternion,this.controllerEuler=new P.Euler,this.updateGamepad(),this.buttonEventDetails={}},tick:function(V,z){var H=this.el.getObject3D("mesh");H&&H.update&&H.update(z/1e3),this.updateGamepad(),this.updatePose(),this.updateButtons()},defaultUserHeight:function(){return Q},getHeadElement:function(){return this.data.headElement||this.el.sceneEl.camera.el},updateGamepad:function(){var V=this.data,z=N.findMatchingControllerWebVR(this.system.controllers,V.id,V.idPrefix,V.hand,V.controller);this.controller=z,this.el.components["tracked-controls"].controller=z,this.data.autoHide&&(this.el.object3D.visible=!!this.controller)},applyArmModel:function(V){var z,H,G,$,k=this.controller,K=this.controllerEuler,Z=this.controllerQuaternion,ee=this.deltaControllerPosition;H=this.getHeadElement().object3D,$=this.defaultUserHeight(),G=k.pose,z=(k?k.hand:void 0)||A,V.copy(H.position),ee.set(.175*(z==="left"?-1:z==="right"?1:0),-.3,-.03),ee.multiplyScalar($),ee.applyAxisAngle(H.up,H.rotation.y),V.add(ee),ee.set(0,0,-.175),ee.multiplyScalar($),G.orientation?Z.fromArray(G.orientation):Z.copy(H.quaternion),K.setFromQuaternion(Z),K.set(K.x,K.y,0),ee.applyEuler(K),V.add(ee)},updatePose:function(){var V,z,H=this.controller,G=this.data,$=this.el.object3D,k=this.system.vrDisplay;H&&((V=H.pose).position?$.position.fromArray(V.position):G.armModel&&this.applyArmModel($.position),V.orientation&&$.quaternion.fromArray(V.orientation),k&&V.position&&(z=this.el.sceneEl.renderer.xr.getStandingMatrix(),$.matrix.compose($.position,$.quaternion,$.scale),$.matrix.multiplyMatrices(z,$.matrix),$.matrix.decompose($.position,$.quaternion,$.scale)),$.rotateX(this.data.orientationOffset.x*P.MathUtils.DEG2RAD),$.rotateY(this.data.orientationOffset.y*P.MathUtils.DEG2RAD),$.rotateZ(this.data.orientationOffset.z*P.MathUtils.DEG2RAD))},updateButtons:function(){var V,z,H=this.controller;if(H){for(z=0;z<H.buttons.length;++z)this.buttonStates[z]||(this.buttonStates[z]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[z]||(this.buttonEventDetails[z]={id:z,state:this.buttonStates[z]}),V=H.buttons[z],this.handleButton(z,V);this.handleAxes()}},handleButton:function(V,z){return!!(this.handlePress(V,z)|this.handleTouch(V,z)|this.handleValue(V,z))&&(this.el.emit("buttonchanged",this.buttonEventDetails[V],!1),!0)},handleAxes:function(){var V,z=!1,H=this.controller.axes,G=this.axis,$=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),V=0;V<H.length;++V)$.push(G[V]!==H[V]),$[V]&&(z=!0);if(!z)return!1;for(this.axis.splice(0,this.axis.length),V=0;V<H.length;V++)this.axis.push(H[V]);return this.el.emit("axismove",this.axisMoveEventDetail,!1),!0},handlePress:function(V,z){var H,G=this.buttonStates[V];return z.pressed!==G.pressed&&(H=z.pressed?"buttondown":"buttonup",this.el.emit(H,this.buttonEventDetails[V],!1),G.pressed=z.pressed,!0)},handleTouch:function(V,z){var H,G=this.buttonStates[V];return z.touched!==G.touched&&(H=z.touched?"touchstart":"touchend",this.el.emit(H,this.buttonEventDetails[V],!1,C),G.touched=z.touched,!0)},handleValue:function(V,z){var H=this.buttonStates[V];return z.value!==H.value&&(H.value=z.value,!0)}})},8666:(M,E,e)=>{var B=e(6600),N=e(3515).registerComponent;M.exports.Component=N("tracked-controls-webxr",{schema:{id:{type:"string",default:""},hand:{type:"string",default:""},handTrackingEnabled:{default:!1},index:{type:"int",default:-1},iterateControllerProfiles:{default:!1},space:{type:"string",oneOf:["targetRaySpace","gripSpace"],default:"gripSpace"}},init:function(){this.updateController=this.updateController.bind(this),this.buttonEventDetails={},this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.changedAxes=[],this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes}},update:function(){this.updateController()},play:function(){var Q=this.el.sceneEl;this.updateController(),Q.addEventListener("controllersupdated",this.updateController)},pause:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.updateController)},isControllerPresent:function(Q){return!(!this.controller||this.controller.gamepad||Q.inputSource.handedness!=="none"&&Q.inputSource.handedness!==this.data.hand)},updateController:function(){this.controller=B.findMatchingControllerWebXR(this.system.controllers,this.data.id,this.data.hand,this.data.index,this.data.iterateControllerProfiles,this.data.handTrackingEnabled),this.el.components["tracked-controls"].controller=this.controller,this.data.autoHide&&(this.el.object3D.visible=!!this.controller)},tick:function(){var Q=this.el.sceneEl,P=this.controller,A=Q.frame;P&&Q.frame&&this.system.referenceSpace&&(P.hand||(this.pose=A.getPose(P[this.data.space],this.system.referenceSpace),this.updatePose(),this.updateButtons()))},updatePose:function(){var Q=this.el.object3D,P=this.pose;P&&(Q.matrix.elements=P.transform.matrix,Q.matrix.decompose(Q.position,Q.rotation,Q.scale))},updateButtons:function(){var Q,P,A,C=this.controller;if(C&&C.gamepad){for(A=C.gamepad,P=0;P<A.buttons.length;++P)this.buttonStates[P]||(this.buttonStates[P]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[P]||(this.buttonEventDetails[P]={id:P,state:this.buttonStates[P]}),Q=A.buttons[P],this.handleButton(P,Q);this.handleAxes()}},handleButton:function(Q,P){return!!(this.handlePress(Q,P)|this.handleTouch(Q,P)|this.handleValue(Q,P))&&(this.el.emit("buttonchanged",this.buttonEventDetails[Q],!1),!0)},handleAxes:function(){var Q,P=!1,A=this.controller.gamepad.axes,C=this.axis,V=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),Q=0;Q<A.length;++Q)V.push(C[Q]!==A[Q]),V[Q]&&(P=!0);if(!P)return!1;for(this.axis.splice(0,this.axis.length),Q=0;Q<A.length;Q++)this.axis.push(A[Q]);return this.el.emit("axismove",this.axisMoveEventDetail,!1),!0},handlePress:function(Q,P){var A,C=this.buttonStates[Q];return P.pressed!==C.pressed&&(A=P.pressed?"buttondown":"buttonup",this.el.emit(A,this.buttonEventDetails[Q],!1),C.pressed=P.pressed,!0)},handleTouch:function(Q,P){var A,C=this.buttonStates[Q];return P.touched!==C.touched&&(A=P.touched?"touchstart":"touchend",this.el.emit(A,this.buttonEventDetails[Q],!1),C.touched=P.touched,!0)},handleValue:function(Q,P){var A=this.buttonStates[Q];return P.value!==A.value&&(A.value=P.value,!0)}})},2761:(M,E,e)=>{var B=e(3515).registerComponent;M.exports.Component=B("tracked-controls",{schema:{autoHide:{default:!0},controller:{default:-1},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},handTrackingEnabled:{default:!1},orientationOffset:{type:"vec3"},armModel:{default:!1},headElement:{type:"selector"},iterateControllerProfiles:{default:!1},space:{type:"string",oneOf:["targetRaySpace","gripSpace"],default:"targetRaySpace"}},after:["tracked-controls-webvr","tracked-controls-webxr"],update:function(){var N=this.data,Q=this.el;Q.sceneEl.hasWebXR?Q.setAttribute("tracked-controls-webxr",{id:N.id,hand:N.hand,index:N.controller,iterateControllerProfiles:N.iterateControllerProfiles,handTrackingEnabled:N.handTrackingEnabled,space:N.space}):Q.setAttribute("tracked-controls-webvr",N)}})},3798:(M,E,e)=>{var B=e(3515).registerComponent,N=e(2666),Q=e(6600),P=Q.checkControllerPresentAndSetup,A=Q.emitIfAxesChanged,C=Q.onButtonEvent,V=e(8309).AFRAME_CDN_ROOT+"controllers/valve/index/valve-index-",z={left:V+"left.glb",right:V+"right.glb"},H="valve",G=e(8903).device.isWebXRAvailable,$={left:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"},right:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"}},k=G?$:{left:{_x:.692295102620542,_y:-.0627618864318427,_z:-.06265893149611756,_order:"XYZ"},right:{_x:.6484021229942998,_y:-.032563619881892894,_z:-.1327973171917482,_order:"XYZ"}},K=G?{left:{x:0,y:-.05,z:.06},right:{x:0,y:-.05,z:.06}}:{left:{x:-.00023692678902063457,y:.04724540367838371,z:-.061959880395271096},right:{x:.002471558599671131,y:.055765208987076195,z:-.061068168708348844}};M.exports.Component=B("valve-index-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},orientationOffset:{type:"vec3"}},after:["tracked-controls"],mapping:{axes:{trackpad:[0,1],thumbstick:[2,3]},buttons:["trigger","grip","trackpad","thumbstick","abutton"]},init:function(){var Z=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(ee){C(ee.detail.id,"down",Z)},this.onButtonUp=function(ee){C(ee.detail.id,"up",Z)},this.onButtonTouchEnd=function(ee){C(ee.detail.id,"touchend",Z)},this.onButtonTouchStart=function(ee){C(ee.detail.id,"touchstart",Z)},this.previousButtonValues={},this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var Z=this.el;Z.addEventListener("buttonchanged",this.onButtonChanged),Z.addEventListener("buttondown",this.onButtonDown),Z.addEventListener("buttonup",this.onButtonUp),Z.addEventListener("touchend",this.onButtonTouchEnd),Z.addEventListener("touchstart",this.onButtonTouchStart),Z.addEventListener("model-loaded",this.onModelLoaded),Z.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var Z=this.el;Z.removeEventListener("buttonchanged",this.onButtonChanged),Z.removeEventListener("buttondown",this.onButtonDown),Z.removeEventListener("buttonup",this.onButtonUp),Z.removeEventListener("touchend",this.onButtonTouchEnd),Z.removeEventListener("touchstart",this.onButtonTouchStart),Z.removeEventListener("model-loaded",this.onModelLoaded),Z.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var Z=this.data,ee=Z.hand==="right"?0:Z.hand==="left"?1:2;P(this,H,{index:ee,iterateControllerProfiles:!0,hand:Z.hand})},injectTrackedControls:function(){var Z=this.el,ee=this.data;Z.setAttribute("tracked-controls",{idPrefix:H,controller:ee.hand==="right"?1:ee.hand==="left"?0:2,hand:ee.hand,orientationOffset:ee.orientationOffset}),this.loadModel()},loadModel:function(){var Z=this.data;Z.model&&this.el.setAttribute("gltf-model",""+z[Z.hand])},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(Z){var ee,he=this.mapping.buttons[Z.detail.id],ue=this.buttonMeshes;he&&(he==="trigger"&&(ee=Z.detail.state.value,ue&&ue.trigger&&(ue.trigger.rotation.x=this.triggerOriginalRotationX-ee*(Math.PI/40))),this.el.emit(he+"changed",Z.detail.state))},onModelLoaded:function(Z){var ee,he=Z.detail.model,ue=this;Z.target===this.el&&this.data.model&&((ee=this.buttonMeshes={}).grip={left:he.getObjectByName("leftgrip"),right:he.getObjectByName("rightgrip")},ee.menu=he.getObjectByName("menubutton"),ee.system=he.getObjectByName("systembutton"),ee.trackpad=he.getObjectByName("touchpad"),ee.trigger=he.getObjectByName("trigger"),this.triggerOriginalRotationX=ee.trigger.rotation.x,Object.keys(ee).forEach(function(ve){ue.setButtonColor(ve,ue.data.buttonColor)}),he.position.copy(K[this.data.hand]),he.rotation.copy(k[this.data.hand]),this.el.emit("controllermodelready",{name:"valve-index-controls",model:this.data.model,rayOrigin:new N.Vector3(0,0,0)}))},onAxisMoved:function(Z){A(this,this.mapping.axes,Z)},updateModel:function(Z,ee){var he;this.data.model&&(ee.indexOf("touch")!==-1||(he=ee==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(Z,he)))},setButtonColor:function(Z,ee){}})},8057:(M,E,e)=>{var B=e(3515).registerComponent;M.exports.Component=B("visible",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data}})},8367:(M,E,e)=>{var B=e(3515).registerComponent,N=e(6600),Q=N.checkControllerPresentAndSetup,P=N.emitIfAxesChanged,A=N.onButtonEvent,C=e(8309).AFRAME_CDN_ROOT,V=C+"controllers/vive/vr_controller_vive.obj",z=C+"controllers/vive/vr_controller_vive.mtl",H=e(8903).device.isWebXRAvailable,G=H?"htc-vive":"OpenVR ",$=H?{axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","none"]}:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger","grip","menu","system"]};M.exports.Component=B("vive-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},orientationOffset:{type:"vec3"}},after:["tracked-controls"],mapping:$,init:function(){var k=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(K){A(K.detail.id,"down",k)},this.onButtonUp=function(K){A(K.detail.id,"up",k)},this.onButtonTouchEnd=function(K){A(K.detail.id,"touchend",k)},this.onButtonTouchStart=function(K){A(K.detail.id,"touchstart",k)},this.previousButtonValues={},this.bindMethods()},update:function(){var k=this.data;this.controllerIndex=k.hand==="right"?0:k.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var k=this.el;k.addEventListener("buttonchanged",this.onButtonChanged),k.addEventListener("buttondown",this.onButtonDown),k.addEventListener("buttonup",this.onButtonUp),k.addEventListener("touchend",this.onButtonTouchEnd),k.addEventListener("touchstart",this.onButtonTouchStart),k.addEventListener("model-loaded",this.onModelLoaded),k.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var k=this.el;k.removeEventListener("buttonchanged",this.onButtonChanged),k.removeEventListener("buttondown",this.onButtonDown),k.removeEventListener("buttonup",this.onButtonUp),k.removeEventListener("touchend",this.onButtonTouchEnd),k.removeEventListener("touchstart",this.onButtonTouchStart),k.removeEventListener("model-loaded",this.onModelLoaded),k.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var k=this.data;Q(this,G,{index:this.controllerIndex,hand:k.hand})},injectTrackedControls:function(){var k=this.el,K=this.data;k.setAttribute("tracked-controls",{idPrefix:G,hand:K.hand,controller:this.controllerIndex,orientationOffset:K.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:V,mtl:z})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(k){var K,Z=this.mapping.buttons[k.detail.id],ee=this.buttonMeshes;Z&&(Z==="trigger"&&(K=k.detail.state.value,ee&&ee.trigger&&(ee.trigger.rotation.x=-K*(Math.PI/12))),this.el.emit(Z+"changed",k.detail.state))},onModelLoaded:function(k){var K,Z=k.detail.model,ee=this;k.target===this.el&&this.data.model&&((K=this.buttonMeshes={}).grip={left:Z.getObjectByName("leftgrip"),right:Z.getObjectByName("rightgrip")},K.menu=Z.getObjectByName("menubutton"),K.system=Z.getObjectByName("systembutton"),K.trackpad=Z.getObjectByName("touchpad"),K.touchpad=Z.getObjectByName("touchpad"),K.trigger=Z.getObjectByName("trigger"),Object.keys(K).forEach(function(he){ee.setButtonColor(he,ee.data.buttonColor)}),Z.position.set(0,-.015,.04))},onAxisMoved:function(k){P(this,this.mapping.axes,k)},updateModel:function(k,K){var Z;this.data.model&&(K.indexOf("touch")!==-1||(Z=K==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(k,Z)))},setButtonColor:function(k,K){var Z=this.buttonMeshes;if(Z)return k==="grip"?(Z.grip.left.material.color.set(K),void Z.grip.right.material.color.set(K)):void Z[k].material.color.set(K)}})},9507:(M,E,e)=>{var B=e(3515).registerComponent,N=e(6600),Q=N.checkControllerPresentAndSetup,P=N.emitIfAxesChanged,A=N.onButtonEvent,C=e(8309).AFRAME_CDN_ROOT+"controllers/vive/focus-controller/focus-controller.gltf",V=e(8903).device.isWebXRAvailable,z=V?"htc-vive-focus":"HTC Vive Focus ",H=V?{axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad","none","menu"]}:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]};M.exports.Component=B("vive-focus-controls",{schema:{hand:{default:""},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},after:["tracked-controls"],mapping:H,bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var G=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function($){A($.detail.id,"down",G)},this.onButtonUp=function($){A($.detail.id,"up",G)},this.onButtonTouchStart=function($){A($.detail.id,"touchstart",G)},this.onButtonTouchEnd=function($){A($.detail.id,"touchend",G)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var G=this.el;G.addEventListener("buttonchanged",this.onButtonChanged),G.addEventListener("buttondown",this.onButtonDown),G.addEventListener("buttonup",this.onButtonUp),G.addEventListener("touchstart",this.onButtonTouchStart),G.addEventListener("touchend",this.onButtonTouchEnd),G.addEventListener("model-loaded",this.onModelLoaded),G.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0,this.addControllersUpdateListener()},removeEventListeners:function(){var G=this.el;G.removeEventListener("buttonchanged",this.onButtonChanged),G.removeEventListener("buttondown",this.onButtonDown),G.removeEventListener("buttonup",this.onButtonUp),G.removeEventListener("touchstart",this.onButtonTouchStart),G.removeEventListener("touchend",this.onButtonTouchEnd),G.removeEventListener("model-loaded",this.onModelLoaded),G.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1,this.removeControllersUpdateListener()},checkIfControllerPresent:function(){Q(this,z,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var G=this.el,$=this.data;G.setAttribute("tracked-controls",{armModel:$.armModel,idPrefix:z,orientationOffset:$.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",C)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(G){var $,k=G.detail.model;G.target===this.el&&this.data.model&&(($=this.buttonMeshes={}).trigger=k.getObjectByName("BumperKey"),$.triggerPressed=k.getObjectByName("BumperKey_Press"),$.triggerPressed&&($.triggerPressed.visible=!1),$.trackpad=k.getObjectByName("TouchPad"),$.trackpadPressed=k.getObjectByName("TouchPad_Press"),$.trackpadPressed&&($.trackpadPressed.visible=!1))},onButtonChanged:function(G){var $=this.mapping.buttons[G.detail.id];$&&this.el.emit($+"changed",G.detail.state)},onAxisMoved:function(G){P(this,this.mapping.axes,G)},updateModel:function(G,$){this.data.model&&this.updateButtonModel(G,$)},updateButtonModel:function(G,$){var k=this.buttonMeshes,K=G+"Pressed";if(k&&k[G]&&k[K]){var Z;switch($){case"down":Z=this.data.buttonHighlightColor;break;case"touchstart":Z=this.data.buttonTouchedColor}Z&&k[K].material.color.set(Z),k[K].visible=!!Z,k[G].visible=!Z}}})},6296:(M,E,e)=>{var B,N,Q=e(8309).keyboardevent.KEYCODE_TO_CODE,P=e(3515).registerComponent,A=e(2666),C=e(8903).shouldCaptureKeyEvent,V=1e-5,z=["KeyW","KeyA","KeyS","KeyD","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"];M.exports.Component=P("wasd-controls",{schema:{acceleration:{default:65},adAxis:{default:"x",oneOf:["x","y","z"]},adEnabled:{default:!0},adInverted:{default:!1},enabled:{default:!0},fly:{default:!1},wsAxis:{default:"z",oneOf:["x","y","z"]},wsEnabled:{default:!0},wsInverted:{default:!1}},after:["look-controls"],init:function(){this.keys={},this.easing=1.1,this.velocity=new A.Vector3,this.onBlur=this.onBlur.bind(this),this.onContextMenu=this.onContextMenu.bind(this),this.onFocus=this.onFocus.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),this.attachVisibilityEventListeners()},tick:function(H,G){var $=this.data,k=this.el,K=this.velocity;(K[$.adAxis]||K[$.wsAxis]||!function(Z){var ee;for(ee in Z)return!1;return!0}(this.keys))&&(G/=1e3,this.updateVelocity(G),(K[$.adAxis]||K[$.wsAxis])&&k.object3D.position.add(this.getMovementVector(G)))},update:function(H){H.adAxis!==this.data.adAxis&&(this.velocity[H.adAxis]=0),H.wsAxis!==this.data.wsAxis&&(this.velocity[H.wsAxis]=0)},remove:function(){this.removeKeyEventListeners(),this.removeVisibilityEventListeners()},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},updateVelocity:function(H){var G,$,k,K,Z,ee=this.data,he=this.keys,ue=this.velocity;if($=ee.adAxis,K=ee.wsAxis,H>.2)return ue[$]=0,void(ue[K]=0);var ve=Math.pow(1/this.easing,60*H);ue[$]!==0&&(ue[$]=ue[$]*ve),ue[K]!==0&&(ue[K]=ue[K]*ve),Math.abs(ue[$])<V&&(ue[$]=0),Math.abs(ue[K])<V&&(ue[K]=0),ee.enabled&&(G=ee.acceleration,ee.adEnabled&&(k=ee.adInverted?-1:1,(he.KeyA||he.ArrowLeft)&&(ue[$]-=k*G*H),(he.KeyD||he.ArrowRight)&&(ue[$]+=k*G*H)),ee.wsEnabled&&(Z=ee.wsInverted?-1:1,(he.KeyW||he.ArrowUp)&&(ue[K]-=Z*G*H),(he.KeyS||he.ArrowDown)&&(ue[K]+=Z*G*H)))},getMovementVector:(B=new A.Vector3(0,0,0),N=new A.Euler(0,0,0,"YXZ"),function(H){var G,$=this.el.getAttribute("rotation"),k=this.velocity;return B.copy(k),B.multiplyScalar(H),$&&(G=this.data.fly?$.x:0,N.set(A.MathUtils.degToRad(G),A.MathUtils.degToRad($.y),0),B.applyEuler(N)),B}),attachVisibilityEventListeners:function(){window.oncontextmenu=this.onContextMenu,window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onContextMenu:function(){for(var H=Object.keys(this.keys),G=0;G<H.length;G++)delete this.keys[H[G]]},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(H){var G;C(H)&&(G=H.code||Q[H.keyCode],z.indexOf(G)!==-1&&(this.keys[G]=!0))},onKeyUp:function(H){var G;G=H.code||Q[H.keyCode],delete this.keys[G]}})},7872:(M,E,e)=>{var B,N=e(3515).registerComponent,Q=e(6600),P=Q.checkControllerPresentAndSetup,A=Q.emitIfAxesChanged,C=Q.onButtonEvent,V=e(8903),z=V.debug("components:windows-motion-controls:debug"),H=V.debug("components:windows-motion-controls:warn"),G=e(8309).DEFAULT_HANDEDNESS,$=e(8309).AFRAME_CDN_ROOT+"controllers/microsoft/",k={left:"left.glb",right:"right.glb",default:"universal.glb"},K=e(8903).device.isWebXRAvailable,Z=/([0-9a-zA-Z]+-[0-9a-zA-Z]+)$/,ee=K?"windows-mixed-reality":"Spatial Controller (Spatial Interaction Source) ",he=K?{axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick","menu"],axisMeshNames:["TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_X","THUMBSTICK_X","THUMBSTICK_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",squeeze:"GRASP",thumbstick:"THUMBSTICK_PRESS",touchpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"}:{axes:{thumbstick:[0,1],trackpad:[2,3]},buttons:["thumbstick","trigger","grip","menu","trackpad"],axisMeshNames:["THUMBSTICK_X","THUMBSTICK_Y","TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",grip:"GRASP",thumbstick:"THUMBSTICK_PRESS",trackpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"};M.exports.Component=N("windows-motion-controls",{schema:{hand:{default:G},pair:{default:0},model:{default:!0},hideDisconnected:{default:!0}},after:["tracked-controls"],mapping:he,bindMethods:function(){this.onModelError=this.onModelError.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var ue=this,ve=this.el;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(be){C(be.detail.id,"down",ue)},this.onButtonUp=function(be){C(be.detail.id,"up",ue)},this.onButtonTouchStart=function(be){C(be.detail.id,"touchstart",ue)},this.onButtonTouchEnd=function(be){C(be.detail.id,"touchend",ue)},this.onControllerConnected=function(){ue.setModelVisibility(!0)},this.onControllerDisconnected=function(){ue.setModelVisibility(!1)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.loadedMeshInfo={buttonMeshes:null,axisMeshes:null},this.rayOrigin={origin:new THREE.Vector3,direction:new THREE.Vector3(0,0,-1),createdFromMesh:!1},ve.addEventListener("controllerconnected",this.onControllerConnected),ve.addEventListener("controllerdisconnected",this.onControllerDisconnected)},addEventListeners:function(){var ue=this.el;ue.addEventListener("buttonchanged",this.onButtonChanged),ue.addEventListener("buttondown",this.onButtonDown),ue.addEventListener("buttonup",this.onButtonUp),ue.addEventListener("touchstart",this.onButtonTouchStart),ue.addEventListener("touchend",this.onButtonTouchEnd),ue.addEventListener("axismove",this.onAxisMoved),ue.addEventListener("model-error",this.onModelError),ue.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var ue=this.el;ue.removeEventListener("buttonchanged",this.onButtonChanged),ue.removeEventListener("buttondown",this.onButtonDown),ue.removeEventListener("buttonup",this.onButtonUp),ue.removeEventListener("touchstart",this.onButtonTouchStart),ue.removeEventListener("touchend",this.onButtonTouchEnd),ue.removeEventListener("axismove",this.onAxisMoved),ue.removeEventListener("model-error",this.onModelError),ue.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){P(this,ee,{hand:this.data.hand,index:this.data.pair,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){if(this.data.model&&!this.rayOrigin.createdFromMesh){var ue=this.createControllerModelUrl();this.loadModel(ue)}else this.modelReady()},createControllerModelUrl:function(ue){var ve=this.el.components["tracked-controls"],be=ve?ve.controller:null,Te="default",ye=this.data.hand;if(be&&!window.hasNativeWebXRImplementation&&(ye=be.hand,!ue)){var De=be.id.match(Z);Te=De&&De[0]||Te}return $+Te+"/"+(k[ye]||k.default)},injectTrackedControls:function(){var ue=this.data;this.el.setAttribute("tracked-controls",{idPrefix:ee,controller:ue.pair,hand:ue.hand,armModel:!1}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelError:function(ue){var ve=this.createControllerModelUrl(!0);ue.detail.src!==ve?(H("Failed to load controller model for device, attempting to load default."),this.loadModel(ve)):H("Failed to load default controller model.")},loadModel:function(ue){this.el.setAttribute("gltf-model","url("+ue+")")},onModelLoaded:function(ue){var ve,be,Te,ye,De=this.controllerModel=ue.detail.model,Ce=this.loadedMeshInfo;if(ue.target===this.el){if(z("Processing model"),Ce.buttonMeshes={},Ce.axisMeshes={},De){for(ve=0;ve<this.mapping.buttons.length;ve++)(be=this.mapping.buttonMeshNames[this.mapping.buttons[ve]])?(Te=De.getObjectByName(be))?(ye={index:ve,value:Re(Te,"VALUE"),pressed:Re(Te,"PRESSED"),unpressed:Re(Te,"UNPRESSED")}).value&&ye.pressed&&ye.unpressed?Ce.buttonMeshes[this.mapping.buttons[ve]]=ye:H("Missing button submesh under mesh with name: "+be+"(VALUE: "+!!ye.value+", PRESSED: "+!!ye.pressed+", UNPRESSED:"+!!ye.unpressed+")"):H("Missing button mesh with name: "+be):z("Skipping unknown button at index: "+ve+" with mapped name: "+this.mapping.buttons[ve]);for(ve=0;ve<this.mapping.axisMeshNames.length;ve++)(be=this.mapping.axisMeshNames[ve])?(Te=De.getObjectByName(be))?(ye={index:ve,value:Re(Te,"VALUE"),min:Re(Te,"MIN"),max:Re(Te,"MAX")}).value&&ye.min&&ye.max?Ce.axisMeshes[ve]=ye:H("Missing axis submesh under mesh with name: "+be+"(VALUE: "+!!ye.value+", MIN: "+!!ye.min+", MAX:"+!!ye.max+")"):H("Missing axis mesh with name: "+be):z("Skipping unknown axis at index: "+ve);this.calculateRayOriginFromMesh(De),this.setModelVisibility()}z("Model load complete.")}function Re(Qe,ot){for(var Je=0,Mt=Qe.children.length;Je<Mt;Je++){var Zt=Qe.children[Je];if(Zt&&Zt.name===ot)return Zt}}},calculateRayOriginFromMesh:(B=new THREE.Quaternion,function(ue){var ve;if(this.rayOrigin.origin.set(0,0,0),this.rayOrigin.direction.set(0,0,-1),this.rayOrigin.createdFromMesh=!0,ve=ue.getObjectByName(this.mapping.pointingPoseMeshName)){var be=ue.parent;be&&(ue.parent=null,ue.updateMatrixWorld(!0),ue.parent=be),ve.getWorldPosition(this.rayOrigin.origin),ve.getWorldQuaternion(B),this.rayOrigin.direction.applyQuaternion(B),be&&ue.updateMatrixWorld(!0)}else z("Mesh does not contain pointing origin data, defaulting to none.");this.modelReady()}),lerpAxisTransform:function(){var ue=new THREE.Quaternion;return function(ve,be){var Te=this.loadedMeshInfo.axisMeshes[ve];if(Te){var ye=Te.min,De=Te.max,Ce=Te.value,Re=.5*be+.5;Ce.setRotationFromQuaternion(ue.copy(ye.quaternion).slerp(De.quaternion,Re)),Ce.position.lerpVectors(ye.position,De.position,Re)}}}(),lerpButtonTransform:function(){var ue=new THREE.Quaternion;return function(ve,be){var Te=this.loadedMeshInfo.buttonMeshes[ve];if(Te){var ye=Te.unpressed,De=Te.pressed,Ce=Te.value;Ce.setRotationFromQuaternion(ue.copy(ye.quaternion).slerp(De.quaternion,be)),Ce.position.lerpVectors(ye.position,De.position,be)}}}(),modelReady:function(){this.el.emit("controllermodelready",{name:"windows-motion-controls",model:this.data.model,rayOrigin:this.rayOrigin})},onButtonChanged:function(ue){var ve=this.mapping.buttons[ue.detail.id];ve&&(this.loadedMeshInfo&&this.loadedMeshInfo.buttonMeshes&&this.lerpButtonTransform(ve,ue.detail.state.value),this.el.emit(ve+"changed",ue.detail.state))},onAxisMoved:function(ue){var ve=this.mapping.axisMeshNames.length;if(this.loadedMeshInfo&&this.loadedMeshInfo.axisMeshes)for(var be=0;be<ve;be++)this.lerpAxisTransform(be,ue.detail.axis[be]||0);A(this,this.mapping.axes,ue)},setModelVisibility:function(ue){var ve=this.el.getObject3D("mesh");this.controllerPresent&&(ue=ue!==void 0?ue:this.modelVisible,this.modelVisible=ue,ve&&(ve.visible=ue))}})},8309:(M,E,e)=>{M.exports={AFRAME_CDN_ROOT:window.AFRAME_CDN_ROOT||"https://cdn.aframe.io/",AFRAME_INJECTED:"aframe-injected",DEFAULT_CAMERA_HEIGHT:1.6,DEFAULT_HANDEDNESS:"right",keyboardevent:e(5065)}},5065:M=>{M.exports={KEYCODE_TO_CODE:{38:"ArrowUp",37:"ArrowLeft",40:"ArrowDown",39:"ArrowRight",87:"KeyW",65:"KeyA",83:"KeyS",68:"KeyD"}}},2385:(M,E,e)=>{var B=e(9721).X,N=e(4219),Q=e(2666),P=new Q.FileLoader,A=N("core:a-assets:warn");function C(G){if(G.hasAttribute("autoplay")||G.getAttribute("preload")==="auto")return new Promise(function($,k){if(G.readyState===4)return $();if(G.error)return k();function K(){for(var Z=0,ee=0;ee<G.buffered.length;ee++)Z+=G.buffered.end(ee)-G.buffered.start(ee);Z>=G.duration&&(G.tagName==="VIDEO"&&Q.Cache.add(G.getAttribute("src"),G),$())}G.addEventListener("loadeddata",K,!1),G.addEventListener("progress",K,!1),G.addEventListener("error",k,!1)})}function V(G){var $=function(k){var K,Z,ee;return k.hasAttribute("crossorigin")||(K=k.getAttribute("src"))!==null&&(K.indexOf("://")===-1||(ee=(Z=K).indexOf("://")>-1?Z.split("/")[2]:Z.split("/")[0]).substring(0,ee.indexOf(":"))===window.location.host)?k:(A('Cross-origin element (e.g., <img>) was requested without `crossorigin` set. A-Frame will re-request the asset with `crossorigin` attribute set. Please set `crossorigin` on the element (e.g., <img crossorigin="anonymous">)',K),k.crossOrigin="anonymous",k.cloneNode(!0))}(G);return $.tagName&&$.tagName.toLowerCase()==="video"&&($.setAttribute("playsinline",""),$.setAttribute("webkit-playsinline","")),$!==G&&(G.parentNode.appendChild($),G.parentNode.removeChild(G)),$}function z(G){var $=H(G),k=$.lastIndexOf(".");return k>=0&&$.slice(k,G.search(/\?|#|$/))===".glb"?"arraybuffer":"text"}function H(G){var $=document.createElement("a");$.href=G;var k=$.search.replace(/^\?/,""),K=G.replace(k,"").replace("?","");return K.substring(K.lastIndexOf("/")+1)}customElements.define("a-assets",class extends B{constructor(){super(),this.isAssets=!0,this.fileLoader=P,this.timeout=null}doConnectedCallback(){var G,$,k,K,Z,ee,he=this,ue=[];if(super.doConnectedCallback(),!this.parentNode.isScene)throw new Error("<a-assets> must be a child of a <a-scene>.");for(Z=this.querySelectorAll("img"),G=0;G<Z.length;G++)K=V(Z[G]),ue.push(new Promise(function(ve,be){Q.Cache.add(Z[G].getAttribute("src"),K),K.complete?ve():(K.onload=ve,K.onerror=be)}));for(k=this.querySelectorAll("audio, video"),G=0;G<k.length;G++)($=V(k[G])).src||$.srcObject||A("Audio/video asset has neither `src` nor `srcObject` attributes."),ue.push(C($));this.getChildren().forEach(function(ve){ve.isAssetItem&&ve.hasAttribute("src")&&ue.push(new Promise(function(be,Te){if(ve.hasLoaded)return be();ve.addEventListener("loaded",be),ve.addEventListener("error",Te)}))}),Promise.allSettled(ue).then(function(){he.timeout!==null&&he.load()}),ee=parseInt(this.getAttribute("timeout"),10)||3e3,this.timeout=setTimeout(function(){he.hasLoaded||(A("Asset loading timed out in",ee,"ms"),he.timeout=null,he.emit("timeout"),he.load())},ee)}disconnectedCallback(){super.disconnectedCallback(),this.timeout&&clearTimeout(this.timeout)}load(){super.load.call(this,null,function(){return!1})}}),customElements.define("a-asset-item",class extends B{constructor(){super(),this.data=null,this.isAssetItem=!0}connectedCallback(){var G=this,$=this.getAttribute("src");P.setResponseType(this.getAttribute("response-type")||z($)),P.load($,function(k){G.data=k,B.prototype.load.call(G)},function(k){G.emit("progress",{loadedBytes:k.loaded,totalBytes:k.total,xhr:k})},function(k){G.emit("error",{xhr:k})})}}),M.exports.inferResponseType=z,M.exports.getFileNameFromURL=H},1397:(M,E,e)=>{var B=e(4219)("core:cubemap:warn");class N extends HTMLElement{constructor(P){return super(P)}onReadyStateChange(){document.readyState==="complete"&&this.doConnectedCallback()}connectedCallback(){document.readyState==="complete"?N.prototype.doConnectedCallback.call(this):document.addEventListener("readystatechange",this.onReadyStateChange.bind(this))}doConnectedCallback(){this.srcs=this.validate()}validate(){var P,A=this.querySelectorAll("[src]"),C=[];if(A.length===6){for(P=0;P<A.length;P++)A[P].tagName==="IMG"?C.push(A[P]):C.push(A[P].getAttribute("src"));return C}B("<a-cubemap> did not contain exactly six elements each with a `src` attribute.")}}customElements.define("a-cubemap",N)},1956:(M,E,e)=>{var B=e(9721).X,N=e(3515).components,Q=e(2666),P=e(8903),A=P.debug("core:a-entity:debug"),C=P.debug("core:a-entity:warn"),V="__",z=["position","rotation","scale","visible"],H={once:!0};class G extends B{constructor(){super(),this.components={},this.initializingComponents={},this.componentsToUpdate={},this.isEntity=!0,this.isPlaying=!1,this.object3D=new Q.Group,this.object3D.rotation.order="YXZ",this.object3D.el=this,this.object3DMap={},this.parentEl=null,this.rotationObj={},this.states=[]}attributeChangedCallback(Z,ee,he){var ue=this.components[Z];super.attributeChangedCallback(),ue&&ue.justInitialized&&he===""?delete ue.justInitialized:(ue||he!==null)&&this.setEntityAttribute(Z,ee,he)}doConnectedCallback(){var Z,ee,he=this;super.doConnectedCallback(),ee=this.sceneEl,this.addToParent(),this.isScene||(ee?!(Z=ee.querySelector("a-assets"))||Z.hasLoaded?this.load():Z.addEventListener("loaded",function(){he.load()}):this.load())}disconnectedCallback(){var Z;if(this.parentEl){for(Z in this.components)this.removeComponent(Z,!1);this.isScene||(this.removeFromParent(),super.disconnectedCallback(),this.object3D.el=null)}}getObject3D(Z){return this.object3DMap[Z]}setObject3D(Z,ee){var he,ue=this;if(!(ee instanceof Q.Object3D))throw new Error("`Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.");(he=this.getObject3D(Z))&&this.object3D.remove(he),ee.el=this,ee.children.length&&ee.traverse(function(ve){ve.el=ue}),this.object3D.add(ee),this.object3DMap[Z]=ee,this.emit("object3dset",{object:ee,type:Z})}removeObject3D(Z){var ee=this.getObject3D(Z);ee?(this.object3D.remove(ee),delete this.object3DMap[Z],this.emit("object3dremove",{type:Z})):C("Tried to remove `Object3D` of type:",Z,"which was not defined.")}getOrCreateObject3D(Z,ee){var he=this.getObject3D(Z);return!he&&ee&&(he=new ee,this.setObject3D(Z,he)),C("`getOrCreateObject3D` has been deprecated. Use `setObject3D()` and `object3dset` event instead."),he}add(Z){if(!Z.object3D)throw new Error("Trying to add an element that doesn't have an `object3D`");this.object3D.add(Z.object3D),this.emit("child-attached",{el:Z})}addToParent(){var Z=this.parentEl=this.parentNode;Z&&Z.add&&!this.attachedToParent&&(Z.add(this),this.attachedToParent=!0)}removeFromParent(){var Z=this.parentEl;this.parentEl.remove(this),this.attachedToParent=!1,this.parentEl=null,Z.emit("child-detached",{el:this})}load(){var Z=this;!this.hasLoaded&&this.parentEl&&super.load.call(this,function(){Z.parentEl&&(Z.updateComponents(),(Z.isScene||Z.parentEl.isPlaying)&&Z.play())})}remove(Z){Z?this.object3D.remove(Z.object3D):this.parentNode.removeChild(this)}getChildEntities(){for(var Z=this.children,ee=[],he=0;he<Z.length;he++){var ue=Z[he];ue instanceof G&&ee.push(ue)}return ee}initComponent(Z,ee,he){var ue,ve,be,Te;Te=(be=P.split(Z,V))[0],ve=be.length>2?be.slice(1).join("__"):be[1],N[Te]&&($(this,Z)||ee!==void 0||he)&&(Z in this.components||(this.initComponentDependencies(Te),ue=new N[Te].Component(this,ee,ve),this.isPlaying&&ue.play(),this.hasAttribute(Z)||(ue.justInitialized=!0,window.HTMLElement.prototype.setAttribute.call(this,Z,"")),A("Component initialized: %s",Z)))}initComponentDependencies(Z){var ee,he;if(N[Z]&&(ee=N[Z].dependencies))for(he=0;he<ee.length;he++)this.initComponent(ee[he],window.HTMLElement.prototype.getAttribute.call(this,ee[he])||void 0,!0)}removeComponent(Z,ee){var he;(he=this.components[Z])&&(he.initialized?(he.pause(),he.remove(),ee&&(he.destroy(),delete this.components[Z],this.hasAttribute(Z)&&window.HTMLElement.prototype.removeAttribute.call(this,Z)),this.emit("componentremoved",he.evtDetail,!1)):this.addEventListener("componentinitialized",function ue(ve){ve.detail.name===Z&&(this.removeComponent(Z,ee),this.removeEventListener("componentinitialized",ue))}))}updateComponents(){var Z,ee,he,ue,ve,be,Te=this.componentsToUpdate;if(this.hasLoaded||this.isLoading){for(he=0;he<this.mixinEls.length;he++)for(ue in this.mixinEls[he].componentCache)k(ue)&&(Te[ue]=!0);if(this.getExtraComponents)for(ue in ee=this.getExtraComponents())k(ue)&&(Te[ue]=!0);for(he=0;he<this.attributes.length;++he)ue=this.attributes[he].name,z.indexOf(ue)===-1&&k(ue)&&(Te[ue]=!0);for(he=0;he<z.length;he++)ue=z[he],this.hasAttribute(ue)&&this.updateComponent(ue,this.getDOMAttribute(ue));for(ue in Te)ve=this.getDOMAttribute(ue),Z=(be=ee&&ee[ue])?be.constructor===Object?P.extend(be,P.styleParser.parse(ve||{})):ve||be:ve,this.updateComponent(ue,Z),delete Te[ue]}}updateComponent(Z,ee,he){var ue=this.components[Z];if(ue)return ee!==null||$(this,Z)?void ue.updateProperties(ee,he):void this.removeComponent(Z,!0);this.initComponent(Z,ee,!1)}removeAttribute(Z,ee){var he=this.components[Z];he&&ee===void 0&&this.removeComponent(Z,!0),he&&ee!==void 0?he.resetProperty(ee):(Z==="mixin"&&this.mixinUpdate(""),window.HTMLElement.prototype.removeAttribute.call(this,Z))}play(){var Z,ee,he;if(!this.isPlaying&&(this.hasLoaded||this.isLoading)){for(he in this.isPlaying=!0,this.components)this.components[he].play();for(Z=this.getChildEntities(),ee=0;ee<Z.length;ee++)Z[ee].play();this.emit("play")}}pause(){var Z,ee,he;if(this.isPlaying){for(he in this.isPlaying=!1,this.components)this.components[he].pause();for(Z=this.getChildEntities(),ee=0;ee<Z.length;ee++)Z[ee].pause();this.emit("pause")}}setEntityAttribute(Z,ee,he){if(N[Z]||this.components[Z])this.updateComponent(Z,he);else if(Z==="mixin"){if(he===this.computedMixinStr)return;this.mixinUpdate(he,ee)}}mixinUpdate(Z,ee,he){var ue,ve,be,Te,ye=G.componentsUpdated,De=this;if(he||(ee=ee||this.getAttribute("mixin")),this.hasLoaded){for(be=this.updateMixins(Z,ee),ye.length=0,Te=0;Te<this.mixinEls.length;Te++)for(ue in this.mixinEls[Te].componentCache)ye.indexOf(ue)===-1&&(this.components[ue]?this.components[ue].handleMixinUpdate():this.initComponent(ue,null),ye.push(ue));for(Te=0;Te<be.oldMixinIds.length;Te++)if(ve=document.getElementById(be.oldMixinIds[Te]))for(ue in ve.componentCache)ye.indexOf(ue)===-1&&this.components[ue]&&(this.getDOMAttribute(ue)?this.components[ue].handleMixinUpdate():this.removeComponent(ue,!0))}else this.addEventListener("loaded-private",function(){De.mixinUpdate(Z,ee,!0)},H)}setAttribute(Z,ee,he){var ue,ve,be,Te,ye,De=G.singlePropUpdate;if(be=(Te=Z.indexOf(V))>0?Z.substring(0,Te):Z,!N[be])return Z==="mixin"&&this.mixinUpdate(ee),void super.setAttribute.call(this,Z,ee);if(!this.components[Z]&&this.hasAttribute(Z)&&this.updateComponent(Z,window.HTMLElement.prototype.getAttribute.call(this,Z)),he!==void 0&&typeof ee=="string"&&ee.length>0&&typeof P.styleParser.parse(ee)=="string"){for(ye in De)delete De[ye];(ue=De)[ee]=he,ve=!1}else ue=ee,ve=he===!0;this.updateComponent(Z,ue,ve),this.sceneEl&&this.sceneEl.getAttribute("debug")&&this.components[Z].flushToDOM()}flushToDOM(Z){var ee,he,ue,ve=this.components,be=this.children;for(ue in ve)ve[ue].flushToDOM();if(Z)for(he=0;he<be.length;++he)(ee=be[he]).flushToDOM&&ee.flushToDOM(Z)}getAttribute(Z){var ee,he,ue,ve;return Z==="position"?this.object3D.position:Z==="rotation"?(he=Q.MathUtils.radToDeg,ue=this.object3D.rotation,(ve=this.rotationObj).x=he(ue.x),ve.y=he(ue.y),ve.z=he(ue.z),ve):Z==="scale"?this.object3D.scale:Z==="visible"?this.object3D.visible:(ee=this.components[Z])?ee.data:window.HTMLElement.prototype.getAttribute.call(this,Z)}getDOMAttribute(Z){var ee=this.components[Z];return ee?ee.attrValue:window.HTMLElement.prototype.getAttribute.call(this,Z)}addState(Z){this.is(Z)||(this.states.push(Z),this.emit("stateadded",Z))}removeState(Z){var ee=this.states.indexOf(Z);ee!==-1&&(this.states.splice(ee,1),this.emit("stateremoved",Z))}is(Z){return this.states.indexOf(Z)!==-1}inspect(){this.sceneEl.components.inspector.openInspector(this)}destroy(){var Z;if(this.parentNode)C("Entity can only be destroyed if detached from scenegraph.");else for(Z in this.components)this.components[Z].destroy()}}function $(K,Z){return!(!K.components[Z]||!K.components[Z].attrValue)||function(ee,he){var ue,ve=!1;for(ue=0;ue<he.length&&!(ve=he[ue].hasAttribute(ee));++ue);return ve}(Z,K.mixinEls)}function k(K){return K.indexOf(V)!==-1&&(K=P.split(K,V)[0]),!!N[K]}G.componentsUpdated=[],G.singlePropUpdate={},customElements.define("a-entity",G),M.exports.F=G},8022:(M,E,e)=>{var B=e(9721).X,N=e(3515).components,Q=e(8903),P=Q.styleParser;customElements.define("a-mixin",class extends B{constructor(){super(),this.componentCache={},this.rawAttributeCache={},this.isMixin=!0}doConnectedCallback(){super.doConnectedCallback(),this.sceneEl=this.closestScene(),this.id=this.getAttribute("id"),this.cacheAttributes(),this.updateEntities(),this.load()}attributeChangedCallback(A,C,V){super.attributeChangedCallback(),this.cacheAttribute(A,V),this.updateEntities()}setAttribute(A,C){window.HTMLElement.prototype.setAttribute.call(this,A,C),this.cacheAttribute(A,C)}cacheAttribute(A,C){var V,z;z=Q.split(A,"__")[0],V=N[z],C===void 0&&(C=window.HTMLElement.prototype.getAttribute.call(this,A)),this.rawAttributeCache[A]=C,V&&(this.componentCache[A]=this.parseComponentAttrValue(V,C))}parseComponentAttrValue(A,C){var V;return typeof C!="string"?C:(A.isSingleProperty?typeof(V=A.schema.parse(C))=="string"&&(V=C):V=P.parse(C),V)}getAttribute(A){return this.componentCache[A]||window.HTMLElement.prototype.getAttribute.call(this,A)}cacheAttributes(){var A,C,V=this.attributes;for(C=0;C<V.length;C++)A=V[C].name,this.cacheAttribute(A)}updateEntities(){var A,C,V;if(this.sceneEl)for(C=this.sceneEl.querySelectorAll("[mixin~="+this.id+"]"),V=0;V<C.length;V++)(A=C[V]).hasLoaded&&!A.isMixin&&A.mixinUpdate(this.id)}})},9721:(M,E,e)=>{var B=e(8903),N=e(5252),Q=B.debug("core:a-node:warn"),P={"a-scene":!0,"a-assets":!0,"a-assets-items":!0,"a-cubemap":!0,"a-mixin":!0,"a-node":!0,"a-entity":!0};function A(V){return V.tagName.toLowerCase()in P||V.isNode}class C extends HTMLElement{constructor(){super(),this.computedMixinStr="",this.hasLoaded=!1,this.isNode=!0,this.mixinEls=[]}connectedCallback(){N.canInitializeElements?this.doConnectedCallback():document.addEventListener("aframeready",this.connectedCallback.bind(this))}doConnectedCallback(){var z;this.sceneEl=this.closestScene(),this.sceneEl||Q("You are attempting to attach <"+this.tagName+"> outside of an A-Frame scene. Append this element to `<a-scene>` instead."),this.hasLoaded=!1,this.emit("nodeready",void 0,!1),this.isMixin||(z=this.getAttribute("mixin"))&&this.updateMixins(z)}attributeChangedCallback(z,H,G){G!==this.computedMixinStr&&(z!=="mixin"||this.isMixin||this.updateMixins(G,H))}closestScene(){for(var z=this;z&&!z.isScene;)z=z.parentElement;return z}closest(z){for(var H=this.matches||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector,G=this;G&&!H.call(G,z);)G=G.parentElement;return G}disconnectedCallback(){this.hasLoaded=!1}load(z,H){var G,$=this;this.hasLoaded||(H=H||A,G=this.getChildren().filter(H).map(function(k){return new Promise(function(K,Z){if(k.hasLoaded)return K();k.addEventListener("loaded",K),k.addEventListener("error",Z)})}),Promise.allSettled(G).then(function(k){k.forEach(function(K){K.status==="rejected"&&Q("Rendering scene with errors on node: ",K.reason.target)}),$.isLoading=!0,$.setupMutationObserver(),z&&z(),$.isLoading=!1,$.hasLoaded=!0,$.emit("loaded-private",void 0,!1),$.emit("loaded",void 0,!1)}))}setupMutationObserver(){var z=this;new MutationObserver(function(H){var G;for(G=0;G<H.length;G++)if(H[G].type==="attributes"){var $=H[G].attributeName,k=window.HTMLElement.prototype.getAttribute.call(z,$),K=H[G].oldValue;z.attributeChangedCallback($,K,k)}}).observe(this,{attributes:!0,attributeOldValue:!0})}getChildren(){return Array.prototype.slice.call(this.children,0)}updateMixins(z,H){var G,$,k,K=C.newMixinIdArray,Z=C.oldMixinIdArray,ee=C.mixinIds;for(K.length=0,Z.length=0,$=z?B.split(z.trim(),/\s+/):K,k=H?B.split(H.trim(),/\s+/):Z,ee.newMixinIds=$,ee.oldMixinIds=k,G=0;G<k.length;G++)$.indexOf(k[G])===-1&&this.unregisterMixin(k[G]);for(this.computedMixinStr="",this.mixinEls.length=0,G=0;G<$.length;G++)this.registerMixin($[G]);return this.computedMixinStr&&(this.computedMixinStr=this.computedMixinStr.trim(),window.HTMLElement.prototype.setAttribute.call(this,"mixin",this.computedMixinStr)),$.length===0&&window.HTMLElement.prototype.removeAttribute.call(this,"mixin"),ee}registerMixin(z){var H,G,$,k=document.getElementById(z);if(k){if($=k.getAttribute("mixin"))for(H=B.split($.trim(),/\s+/),G=0;G<H.length;G++)this.registerMixin(H[G]);this.computedMixinStr=this.computedMixinStr+" "+k.id,this.mixinEls.push(k)}else Q("No mixin was found with id `%s`",z)}setAttribute(z,H){z==="mixin"&&this.updateMixins(H),window.HTMLElement.prototype.setAttribute.call(this,z,H)}unregisterMixin(z){var H,G=this.mixinEls;for(H=0;H<G.length;++H)if(z===G[H].id){G.splice(H,1);break}}emit(z,H,G,$){var k=C.evtData;G===void 0&&(G=!0),k.bubbles=!!G,k.detail=H,$&&(k=B.extend({},$,k)),this.dispatchEvent(new CustomEvent(z,k))}}C.evtData={},C.newMixinIdArray=[],C.oldMixinIdArray=[],C.mixinIds={},customElements.define("a-node",C),M.exports.X=C,M.exports.U=P},3515:(M,E,e)=>{var B=e(5941),N=e(1435),Q=e(365),P=e(8903),A=M.exports.components={},C=B.parseProperty,V=B.process,z=B.isSingleProperty,H=B.stringifyProperties,G=B.stringifyProperty,$=P.styleParser,k=P.debug("core:component:warn"),K=document.currentScript,Z=new RegExp("[A-Z]+"),ee={},he=Object.freeze({}),ue=[],ve={get:function(Ce,Re){return Ce.getComputedPropertyValue(Re)},set:function(Ce,Re,Qe){return Re in Ce.schema?Ce.recomputeProperty(Re,Qe):Qe!==void 0&&Ce.handleUnknownProperty(Re,Qe),!0}},be=M.exports.Component=function(Ce,Re,Qe){var ot=this;if(this.sceneOnly&&!Ce.isScene)throw new Error("Component `"+this.name+"` can only be applied to <a-scene>");if(Qe&&!this.multiple)throw new Error("Trying to initialize multiple components of type `"+this.name+"`. There can only be one component of this type per entity.");this.el=Ce,this.id=Qe,this.attrName=this.name+(Qe?"__"+Qe:""),this.evtDetail={id:this.id,name:this.name},this.initialized=!1,this.el.components[this.attrName]=this,this.objectPool=ee[this.name];var Je=this.events;this.events={},function(Mt,Zt){var kt;for(kt in Zt)Mt.events[kt]=Zt[kt].bind(Mt)}(this,Je),this.attrValue=void 0,this.isObjectBased?(this.data=this.objectPool.use(),P.objectPool.removeUnusedKeys(this.data,this.schema),this.oldData=this.objectPool.use(),P.objectPool.removeUnusedKeys(this.oldData,this.schema),this.attrValueProxy=new Proxy(this,ve)):(this.data=void 0,this.oldData=void 0,this.attrValueProxy=void 0),this.deferUnknownPropertyWarnings=!!this.updateSchema,this.silenceUnknownPropertyWarnings=!1,this.throttledEmitComponentChanged=P.throttleLeadingAndTrailing(function(){Ce.emit("componentchanged",ot.evtDetail,!1)},200),this.updateProperties(Re,!0)};if(be.prototype={schema:{},init:function(){},events:{},update:function(Ce){},updateSchema:void 0,tick:void 0,tock:void 0,play:function(){},pause:function(){},remove:function(){},stringify:function(Ce){var Re=this.schema;return typeof Ce=="string"?Ce:this.isSingleProperty?G(Ce,Re):(Ce=H(Ce,Re),$.stringify(Ce))},flushToDOM:function(Ce){var Re=Ce?this.data:this.attrValue;Re!=null&&window.HTMLElement.prototype.setAttribute.call(this.el,this.attrName,this.stringify(Re))},updateProperties:function(Ce,Re){var Qe=this.el;this.updateData(Ce,Re),(Qe.hasLoaded||Qe.isLoading)&&(this.initialized?this.callUpdateHandler():this.initComponent())},initComponent:function(){var Ce,Re=this.el;Re.initializingComponents[this.name]||(Re.initializingComponents[this.name]=!0,this.init(),this.initialized=!0,delete Re.initializingComponents[this.name],Ce=this.isObjectBased?he:void 0,this.dataChanged=!1,this.storeOldData(),this.update(Ce),Re.isPlaying&&this.play(),Re.emit("componentinitialized",this.evtDetail,!1))},updateData:function(Ce,Re){this.isSingleProperty?this.recomputeProperty(void 0,Ce):(Re?(P.objectPool.clearObject(this.attrValue),this.recomputeData(Ce),this.schemaChangeRequired=!!this.updateSchema):typeof Ce=="string"?$.parse(Ce,this.attrValueProxy):P.extend(this.attrValueProxy,Ce),this.updateSchemaIfNeeded(Ce))},updateSchemaIfNeeded:function(Ce){if(this.schemaChangeRequired&&this.updateSchema)ue.length=0,this.updateSchema(this.data),P.objectPool.removeUnusedKeys(this.data,this.schema),this.silenceUnknownPropertyWarnings=!0,this.recomputeData(Ce),this.silenceUnknownPropertyWarnings=!1,this.schemaChangeRequired=!1;else{for(var Re=0;Re<ue.length;Re++)k("Unknown property `"+ue[Re]+"` for component `"+this.name+"`.");ue.length=0}},callUpdateHandler:function(){if(this.isPositionRotationScale||this.dataChanged){this.dataChanged=!1;var Ce=this.oldData;this.oldDataInUse=!0,this.update(Ce),Ce!==this.oldData&&this.objectPool.recycle(Ce),this.oldDataInUse=!1,this.storeOldData(),this.throttledEmitComponentChanged()}},handleMixinUpdate:function(){this.recomputeData(),this.updateSchemaIfNeeded(),this.callUpdateHandler()},resetProperty:function(Ce){(this.isSingleProperty||Ce in this.schema)&&(Ce?this.attrValue[Ce]=void 0:(this.isObjectBased&&this.objectPool.recycle(this.attrValue),this.attrValue=void 0),this.recomputeProperty(Ce,void 0),this.updateSchemaIfNeeded(),this.callUpdateHandler())},extendSchema:function(Ce){var Re;Re=P.extend({},A[this.name].schema),P.extend(Re,Ce),this.schema=V(Re),this.el.emit("schemachanged",this.evtDetail)},getComputedPropertyValue:function(Ce){var Re=this.el.mixinEls,Qe=this.attrValue&&Ce?this.attrValue[Ce]:this.attrValue;if(Qe!==void 0)return Qe;for(var ot=Re.length-1;ot>=0;ot--){var Je=Re[ot].getAttribute(this.attrName);if(Je!==null&&(!Ce||Ce in Je))return Ce?Je[Ce]:Je}return Ce?this.schema[Ce].default:this.schema.default},recomputeProperty:function(Ce,Re){var Qe=Ce?this.schema[Ce]:this.schema;if(Re!=null){this.attrValue===void 0&&this.isObjectBased&&(this.attrValue=this.objectPool.use());var ot=Ce?this.attrValue[Ce]:this.attrValue;typeof(ot=Qe.isCacheable?C(Re,Qe,ot):Re)=="string"&&(ot=Re===""?void 0:Re),Ce?this.attrValue[Ce]=ot:this.attrValue=ot}this.oldDataInUse&&(this.oldData=this.objectPool.use(),P.objectPool.removeUnusedKeys(this.oldData,this.schema),this.storeOldData(),this.oldDataInUse=!1);var Je=Ce?this.oldData[Ce]:this.oldData,Mt=Ce?this.data[Ce]:this.data,Zt=C(this.getComputedPropertyValue(Ce),Qe,Mt);return Qe.type!=="array"||Ce||(Zt=P.clone(Zt)),Qe.equals(Zt,Je)||(this.dataChanged=!0,Qe.schemaChange&&(this.schemaChangeRequired=!0)),Ce?this.data[Ce]=Zt:this.data=Zt,Zt},handleUnknownProperty:function(Ce,Re){this.attrValue===void 0&&(this.attrValue=this.objectPool.use()),this.attrValue[Ce]=Re,this.silenceUnknownPropertyWarnings||(this.deferUnknownPropertyWarnings?ue.push(Ce):this.silenceUnknownPropertyWarnings||k("Unknown property `"+Ce+"` for component `"+this.name+"`."))},storeOldData:function(){var Ce;if(this.isObjectBased)if(this.isSingleProperty)this.oldData=C(this.data,this.schema,this.oldData);else for(Ce in this.schema)this.data[Ce]!==void 0&&(this.data[Ce]&&typeof this.data[Ce]=="object"?this.oldData[Ce]=C(this.data[Ce],this.schema[Ce],this.oldData[Ce]):this.oldData[Ce]=this.data[Ce]);else this.oldData=this.data},recomputeData:function(Ce){var Re;if(this.isSingleProperty)this.recomputeProperty(void 0,Ce);else{if(Ce&&typeof Ce=="object")for(Re in this.schema)this.attrValueProxy[Re]=Ce[Re];else for(Re in this.schema)this.attrValueProxy[Re]=void 0;for(Re in typeof Ce=="string"&&$.parse(Ce,this.attrValueProxy),this.attrValue)this.attrValue[Re]!==void 0&&ue.indexOf(Re)!==-1&&(Re in this.schema||k("Unknown property `"+Re+"` for component `"+this.name+"`."))}},eventsAttach:function(){var Ce;for(Ce in this.eventsDetach(),this.events)this.el.addEventListener(Ce,this.events[Ce])},eventsDetach:function(){var Ce;for(Ce in this.events)this.el.removeEventListener(Ce,this.events[Ce])},destroy:function(){this.objectPool.recycle(this.attrValue),this.objectPool.recycle(this.data),this.objectPool.recycle(this.oldData),this.attrValue=this.data=this.oldData=this.attrValueProxy=void 0}},window.debug)var Te=M.exports.registrationOrderWarnings={};function ye(Ce){return Ce.tick||Ce.tock}function De(Ce){return Ce&&Ce.constructor===Object&&!(Ce instanceof window.HTMLElement)}M.exports.registerComponent=function(Ce,Re){var Qe,ot,Je,Mt,Zt,kt={};if(document.currentScript&&document.currentScript!==K&&N.forEach(function(_i){_i.hasLoaded||document.currentScript.compareDocumentPosition(_i)!==Node.DOCUMENT_POSITION_FOLLOWING&&(k("The component `"+Ce+"` was registered in a <script> tag after the scene. Component <script> tags in an HTML file should be declared *before* the scene such that the component is available to entities during scene initialization."),window.debug&&(Te[Ce]=!0))}),Z.test(Ce)===!0&&k("The component name `"+Ce+"` contains uppercase characters, but HTML will ignore the capitalization of attribute names. Change the name to be lowercase: `"+Ce.toLowerCase()+"`"),Ce.indexOf("__")!==-1)throw new Error("The component name `"+Ce+"` is not allowed. The sequence __ (double underscore) is reserved to specify an id for multiple components of the same type");if(Object.keys(Re).forEach(function(_i){kt[_i]={value:Re[_i],writable:!0}}),A[Ce])throw new Error("The component `"+Ce+"` has been already registered. Check that you are not loading two versions of the same component or two different components of the same name.");((Qe=function(_i,Ri,er){be.call(this,_i,Ri,er)}).prototype=Object.create(be.prototype,kt)).name=Ce,Qe.prototype.isPositionRotationScale=Ce==="position"||Ce==="rotation"||Ce==="scale",Qe.prototype.constructor=Qe,Qe.prototype.system=Q&&Q.systems[Ce],Qe.prototype.play=(Mt=Qe.prototype.play,function(){var _i=this.el.sceneEl,Ri=this.el.isPlaying&&!this.isPlaying;this.initialized&&Ri&&(Mt.call(this),this.isPlaying=!0,this.eventsAttach(),ye(this)&&_i.addBehavior(this))}),Qe.prototype.pause=(Zt=Qe.prototype.pause,function(){var _i=this.el.sceneEl;this.isPlaying&&(Zt.call(this),this.isPlaying=!1,this.eventsDetach(),ye(this)&&_i.removeBehavior(this))}),ot=P.extend(V(Qe.prototype.schema,Qe.prototype.name)),Qe.prototype.isSingleProperty=Je=z(Qe.prototype.schema),Qe.prototype.isObjectBased=!Je||Je&&(De(ot.default)||De(C(void 0,ot))),ee[Ce]=P.objectPool.createPool(),A[Ce]={Component:Qe,dependencies:Qe.prototype.dependencies,before:Qe.prototype.before,after:Qe.prototype.after,isSingleProperty:Qe.prototype.isSingleProperty,isObjectBased:Qe.prototype.isObjectBased,multiple:Qe.prototype.multiple,sceneOnly:Qe.prototype.sceneOnly,name:Ce,schema:ot,stringify:Qe.prototype.stringify};for(var si=0;si<N.length;si++)N[si].emit("componentregistered",{name:Ce},!1);return Qe}},4863:(M,E,e)=>{var B=e(5941).process,N=M.exports.xZ={},Q=M.exports.ib=[],P=e(2666),A=function(){};A.prototype={schema:{},init:function(C){return this.geometry=new P.BufferGeometry,this.geometry},update:function(C){}},M.exports.dZ=function(C,V){var z,H={};if(Object.keys(V).forEach(function(G){H[G]={value:V[G],writable:!0}}),N[C])throw new Error("The geometry `"+C+"` has been already registered");return((z=function(){A.call(this)}).prototype=Object.create(A.prototype,H)).name=C,z.prototype.constructor=z,N[C]={Geometry:z,schema:B(z.prototype.schema)},Q.push(C),z}},8813:(M,E,e)=>{var B=e(395),N=e(2849)("core:propertyTypes:warn"),Q=M.exports.propertyTypes={},P=/[,> .[\]:]/,A=/url\((.+)\)/;function C(ee,he,ue,ve,be,Te){if(ee in Q)throw new Error("Property type "+ee+" is already registered.");Q[ee]={default:he,parse:ue||H,stringify:ve||G,equals:be||$,isCacheable:Te!==!1}}function V(ee,he){if(!Array.isArray(ee)||!Array.isArray(he))return ee===he;if(ee.length!==he.length)return!1;for(var ue=0;ue<ee.length;ue++)if(ee[ue]!==he[ue])return!1;return!0}function z(ee){var he,ue;return typeof ee!="string"?ee:(ue=ee.match(A))?ue[1]:ee.charAt(0)==="#"?(he=document.getElementById(ee.substring(1)))?he.tagName==="CANVAS"||he.tagName==="VIDEO"||he.tagName==="IMG"?he:he.getAttribute("src"):void N('"'+ee+'" asset not found.'):ee}function H(ee){return ee}function G(ee){return ee===null?"null":ee.toString()}function $(ee,he){return ee===he}function k(ee){return parseInt(ee,10)}function K(ee,he,ue){return B.parse(ee,he,ue)}function Z(ee,he){if(ee===null)return!0;if(typeof ee!="object"||Object.keys(ee).length!==he)return!1;var ue=ee.x,ve=ee.y,be=ee.z,Te=ee.w;return!(typeof ue!="number"||typeof ve!="number"||he>2&&typeof be!="number"||he>3&&typeof Te!="number")}C("audio","",z),C("array",[],function(ee){return Array.isArray(ee)?ee:ee&&typeof ee=="string"?ee.split(",").map(function(he){return he.trim()}):[]},function(ee){return ee.join(", ")},V),C("asset","",z),C("boolean",!1,function(ee){return ee!=="false"&&ee!==!1}),C("color","#FFF"),C("int",0,k),C("number",0,function(ee){return parseFloat(ee,10)}),C("map","",z),C("model","",z),C("selector",null,function(ee){return ee?typeof ee!="string"?ee:ee[0]!=="#"||P.test(ee)?document.querySelector(ee):document.getElementById(ee.substring(1)):null},function(ee){return ee.getAttribute?"#"+ee.getAttribute("id"):G(ee)},$,!1),C("selectorAll",null,function(ee){return ee?typeof ee!="string"?ee:Array.prototype.slice.call(document.querySelectorAll(ee),0):null},function(ee){return ee instanceof Array?ee.map(function(he){return"#"+he.getAttribute("id")}).join(", "):G(ee)},V,!1),C("src","",function(ee){return N("`src` property type is deprecated. Use `asset` instead."),z(ee)}),C("string",""),C("time",0,k),C("vec2",{x:0,y:0},K,B.stringify,B.equals),C("vec3",{x:0,y:0,z:0},K,B.stringify,B.equals),C("vec4",{x:0,y:0,z:0,w:1},K,B.stringify,B.equals),M.exports.registerPropertyType=C,M.exports.isValidDefaultValue=function(ee,he){return(ee!=="audio"||typeof he=="string")&&!(ee==="array"&&!Array.isArray(he))&&(ee!=="asset"||typeof he=="string")&&(ee!=="boolean"||typeof he=="boolean")&&(ee!=="color"||typeof he=="string")&&(ee!=="int"||typeof he=="number")&&(ee!=="number"||typeof he=="number")&&(ee!=="map"||typeof he=="string")&&(ee!=="model"||typeof he=="string")&&(ee!=="selector"||typeof he=="string"||he===null)&&(ee!=="selectorAll"||typeof he=="string"||he===null)&&(ee!=="src"||typeof he=="string")&&(ee!=="string"||typeof he=="string")&&(ee!=="time"||typeof he=="number")&&(ee==="vec2"?Z(he,2):ee==="vec3"?Z(he,3):ee!=="vec4"||Z(he,4))},M.exports.isValidDefaultCoordinate=Z},5252:M=>{function E(){M.exports.canInitializeElements||(M.exports.canInitializeElements=!0,setTimeout(function(){document.dispatchEvent(new CustomEvent("aframeready"))}))}M.exports.canInitializeElements=!1,M.exports.waitForDocumentReadyState=function(){document.readyState!=="complete"?document.addEventListener("readystatechange",function e(){document.readyState==="complete"&&(document.removeEventListener("readystatechange",e),E())}):E()},M.exports.emitReady=E},6450:(M,E,e)=>{var B=e(770).f,N=e(9035),Q=e(4713),P=e(1435),A=e(365).systems,C=e(3515).components,V=e(2666),z=e(8903),H=z.debug("core:a-scene:warn"),G=e(1956).F,$=e(9721).X,k=e(8225),K=z.device.isIOS(),Z=z.device.isMobile(),ee=z.device.isWebXRAvailable;K&&e(9609);class he extends G{constructor(){var ye;super(),(ye=this).clock=new V.Clock,ye.isIOS=K,ye.isMobile=Z,ye.hasWebXR=ee,ye.isAR=!1,ye.isScene=!0,ye.object3D=new V.Scene,ye.object3D.onAfterRender=function(De,Ce,Re){ye.isPlaying&&ye.tock(ye.time,ye.delta,Re)},ye.resize=ye.resize.bind(ye),ye.render=ye.render.bind(ye),ye.systems={},ye.systemNames=[],ye.time=ye.delta=0,ye.usedOfferSession=!1,ye.componentOrder=[],ye.behaviors={},ye.hasLoaded=!1,ye.isPlaying=!1,ye.originalHTML=ye.innerHTML}addFullScreenStyles(){document.documentElement.classList.add("a-fullscreen")}removeFullScreenStyles(){document.documentElement.classList.remove("a-fullscreen")}doConnectedCallback(){var ye=this,De=this.hasAttribute("embedded");this.setAttribute("inspector",""),this.setAttribute("keyboard-shortcuts",""),this.setAttribute("screenshot",""),this.setAttribute("xr-mode-ui",""),this.setAttribute("device-orientation-permission-ui",""),super.doConnectedCallback(),function(Ce){var Re;function Qe(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||Ce.exitVR(),document.activeElement.blur(),document.body.focus()}(Re=document.createElement("canvas")).classList.add("a-canvas"),Re.dataset.aframeCanvas=!0,Ce.appendChild(Re),document.addEventListener("fullscreenchange",Qe),document.addEventListener("mozfullscreenchange",Qe),document.addEventListener("webkitfullscreenchange",Qe),document.addEventListener("MSFullscreenChange",Qe),Re.addEventListener("touchmove",function(ot){ot.preventDefault()},{passive:!1}),Ce.canvas=Re,Ce.emit("render-target-loaded",{target:Re}),setTimeout(Ce.resize.bind(Ce),0)}(this),this.setupRenderer(),Q.setup(this,be),this.resize(),De||this.addFullScreenStyles(),k(this),B(this),N(this),this.onVRPresentChangeBound=this.onVRPresentChange.bind(this),window.addEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),this.enterVRBound=function(){ye.enterVR()},this.exitVRBound=function(){ye.exitVR()},this.exitVRTrueBound=function(){ye.exitVR(!0)},this.pointerRestrictedBound=function(){ye.pointerRestricted()},this.pointerUnrestrictedBound=function(){ye.pointerUnrestricted()},ye.hasWebXR||(window.addEventListener("vrdisplaydeactivate",this.exitVRBound),window.addEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.addEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.addEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound)),window.addEventListener("sessionend",this.resize),this.addEventListener("cameraready",function(){ye.attachedCallbackPostCamera()}),this.initSystems(),this.componentOrder=ue(C,this.componentOrder),this.addEventListener("componentregistered",function(){ye.componentOrder=ue(C,ye.componentOrder)}),this.hasWebXR&&navigator.xr&&navigator.xr.addEventListener&&navigator.xr.addEventListener("sessiongranted",function(){ye.enterVR()})}attachedCallbackPostCamera(){var ye=this;window.addEventListener("load",void 0),window.addEventListener("resize",function(){ye.isIOS?setTimeout(ye.resize,100):ye.resize()}),this.play(),P.push(this)}initSystems(){var ye;for(ye in this.initSystem("camera"),A)ye!=="camera"&&this.initSystem(ye)}initSystem(ye){this.systems[ye]||(this.systems[ye]=new A[ye](this),this.systemNames.push(ye))}disconnectedCallback(){var ye=P.indexOf(this);super.disconnectedCallback(),P.splice(ye,1),window.removeEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),window.removeEventListener("vrdisplayactivate",this.enterVRBound),window.removeEventListener("vrdisplaydeactivate",this.exitVRBound),window.removeEventListener("vrdisplayconnect",this.enterVRBound),window.removeEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.removeEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.removeEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound),window.removeEventListener("sessionend",this.resize),this.renderer.dispose()}addBehavior(ye){var De,Ce,Re=this.behaviors[ye.name];for(Ce in Re||(Re=this.behaviors[ye.name]={tick:{inUse:!1,array:[],markedForRemoval:[]},tock:{inUse:!1,array:[],markedForRemoval:[]}}),Re)if(ye[Ce]){if((De=Re[Ce]).inUse){var Qe=De.markedForRemoval.indexOf(ye);Qe!==-1&&De.markedForRemoval.splice(Qe,1)}De.array.indexOf(ye)===-1&&De.array.push(ye)}}getPointerLockElement(){return document.pointerLockElement}checkHeadsetConnected(){return z.device.checkHeadsetConnected()}enterAR(){var ye;if(!this.hasWebXR)throw ye="Failed to enter AR mode, WebXR not supported.",new Error(ye);if(!z.device.checkARSupport())throw ye="Failed to enter AR, WebXR immersive-ar mode not supported in your browser or device.",new Error(ye);return this.enterVR(!0)}enterVR(ye,De){var Ce,Re,Qe=this,ot=Qe.renderer.xr;if(De&&(!navigator.xr||!navigator.xr.offerSession))return Promise.resolve("OfferSession is not supported.");if(Qe.usedOfferSession&&De)return Promise.resolve("OfferSession was already called.");if(this.is("vr-mode"))return Promise.resolve("Already in VR.");if(this.checkHeadsetConnected()||this.isMobile){var Je=Qe.getAttribute("renderer");if(ot.enabled=!0,this.hasWebXR){this.xrSession&&this.xrSession.removeEventListener("end",this.exitVRBound);var Mt=this.sceneEl.systems.webxr.sessionReferenceSpaceType;ot.setReferenceSpaceType(Mt);var Zt=ye?"immersive-ar":"immersive-vr";return Re=this.sceneEl.systems.webxr.sessionConfiguration,new Promise(function(_i,Ri){var er=De?navigator.xr.offerSession.bind(navigator.xr):navigator.xr.requestSession.bind(navigator.xr);Qe.usedOfferSession|=De,er(Zt,Re).then(function(Ki){De&&(Qe.usedOfferSession=!1),ot.layersEnabled=Re.requiredFeatures.indexOf("layers")!==-1,ot.setSession(Ki).then(function(){ot.setFoveation(Je.foveationLevel),Qe.xrSession=Ki,Qe.systems.renderer.setWebXRFrameRate(Ki),Ki.addEventListener("end",Qe.exitVRBound),si(_i)})},function(Ki){Ri(new Error("Failed to enter "+(Zt==="immersive-ar"?"AR":"VR")+" mode (`requestSession`)",{cause:Ki}))})})}if(Ce=z.device.getVRDisplay(),ot.setDevice(Ce),Ce.isPresenting&&!window.hasNativeWebVRImplementation)return si(),Promise.resolve();var kt={highRefreshRate:Je.highRefreshRate};return Ce.requestPresent([{source:this.canvas,attributes:kt}]).then(si,function(_i){throw Qe.removeState("vr-mode"),_i&&_i.message?new Error("Failed to enter VR mode (`requestPresent`): "+_i.message):new Error("Failed to enter VR mode (`requestPresent`).")})}return si(),Promise.resolve();function si(_i){var Ri,er;window.hasNativeWebVRImplementation&&!window.hasNativeWebXRImplementation&&(Ri=new CustomEvent("vrdisplaypresentchange",{detail:{display:z.device.getVRDisplay()}}),window.dispatchEvent(Ri)),ye?Qe.addState("ar-mode"):Qe.addState("vr-mode"),Qe.emit("enter-vr",{target:Qe}),!Qe.hasWebXR&&Qe.isMobile&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape"),Qe.addFullScreenStyles(),Qe.isMobile||Qe.checkHeadsetConnected()||((er=Qe.canvas).requestFullscreen||er.webkitRequestFullscreen||er.mozRequestFullScreen||er.msRequestFullscreen).apply(er,[{navigationUI:"hide"}]),Qe.resize(),_i&&_i()}}exitVR(){var ye,De=this,Ce=this.renderer.xr;if(!this.is("vr-mode")&&!this.is("ar-mode"))return Promise.resolve("Not in immersive mode.");if(this.checkHeadsetConnected()||this.isMobile){if(Ce.enabled=!1,ye=z.device.getVRDisplay(),this.hasWebXR)this.xrSession.removeEventListener("end",this.exitVRBound),this.xrSession.end().then(function(){},function(){}),this.xrSession=void 0;else if(ye.isPresenting)return ye.exitPresent().then(Re,function(Qe){throw Qe&&Qe.message?new Error("Failed to exit VR mode (`exitPresent`): "+Qe.message):new Error("Failed to exit VR mode (`exitPresent`).")})}else(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen());return Re(),Promise.resolve();function Re(){De.removeState("vr-mode"),De.removeState("ar-mode"),De.isMobile&&screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),De.hasAttribute("embedded")&&De.removeFullScreenStyles(),De.resize(),De.isIOS&&z.forceCanvasResizeSafariMobile(De.canvas),De.renderer.setPixelRatio(window.devicePixelRatio),De.emit("exit-vr",{target:De})}}pointerRestricted(){if(this.canvas){var ye=this.getPointerLockElement();ye&&ye!==this.canvas&&document.exitPointerLock&&document.exitPointerLock(),this.canvas.requestPointerLock&&this.canvas.requestPointerLock()}}pointerUnrestricted(){var ye=this.getPointerLockElement();ye&&ye===this.canvas&&document.exitPointerLock&&document.exitPointerLock()}onVRPresentChange(ye){var De=ye.display||ye.detail.display;De&&De.isPresenting?this.enterVR():this.exitVR()}getAttribute(ye){var De=this.systems[ye];return De?De.data:G.prototype.getAttribute.call(this,ye)}getDOMAttribute(ye){var De=this.systems[ye];return De?De.data:G.prototype.getDOMAttribute.call(this,ye)}setAttribute(ye,De,Ce){if(A[ye]){$.prototype.setAttribute.call(this,ye,De);var Re=this.systems[ye];Re&&Re.updateProperties(De)}else G.prototype.setAttribute.call(this,ye,De,Ce)}removeBehavior(ye){var De,Ce,Re,Qe=this.behaviors[ye.name];for(Ce in Qe)ye[Ce]&&(Re=(De=Qe[Ce]).array.indexOf(ye))!==-1&&(De.inUse?De.markedForRemoval.indexOf(ye)===-1&&De.markedForRemoval.push(ye):(De.array[Re]=De.array[De.array.length-1],De.array.pop()))}resize(){var ye,De,Ce=this.camera,Re=this.canvas,Qe=this.renderer.xr.isPresenting;ye=this.renderer.xr.enabled&&Qe,!Ce||!Re||this.is("vr-mode")&&(this.isMobile||ye)||(De=be(Re,this.getAttribute("embedded")&&!this.is("vr-mode"),this.maxCanvasSize,this.is("vr-mode")),Ce.aspect=De.width/De.height,Ce.updateProjectionMatrix(),this.renderer.setSize(De.width,De.height,!1),this.emit("rendererresize",null,!1))}setupRenderer(){var ye,De,Ce,Re,Qe=this;Re={alpha:!0,antialias:!Z,canvas:this.canvas,logarithmicDepthBuffer:!1,powerPreference:"high-performance"},this.maxCanvasSize={height:-1,width:-1},this.hasAttribute("renderer")&&(Ce=this.getAttribute("renderer"),(De=z.styleParser.parse(Ce)).precision&&(Re.precision=De.precision+"p"),De.antialias&&De.antialias!=="auto"&&(Re.antialias=De.antialias==="true"),De.logarithmicDepthBuffer&&De.logarithmicDepthBuffer!=="auto"&&(Re.logarithmicDepthBuffer=De.logarithmicDepthBuffer==="true"),De.alpha&&(Re.alpha=De.alpha==="true"),De.stencil&&(Re.stencil=De.stencil==="true"),De.multiviewStereo&&(Re.multiviewStereo=De.multiviewStereo==="true"),this.maxCanvasSize={width:De.maxCanvasWidth?parseInt(De.maxCanvasWidth):this.maxCanvasSize.width,height:De.maxCanvasHeight?parseInt(De.maxCanvasHeight):this.maxCanvasSize.height}),(ye=this.renderer=new V.WebGLRenderer(Re)).setPixelRatio(window.devicePixelRatio),this.camera&&ye.xr.setPoseTarget(this.camera.el.object3D),this.addEventListener("camera-set-active",function(){ye.xr.setPoseTarget(Qe.camera.el.object3D)})}play(){var ye=this,De=this;this.renderStarted?G.prototype.play.call(this):(this.addEventListener("loaded",function(){var Ce,Re=this.renderer,Qe=this.renderer.xr;G.prototype.play.call(this),De.renderStarted||(De.resize(),De.renderer&&(window.performance&&window.performance.mark("render-started"),Q.remove(),(Ce=z.device.getVRDisplay())&&Ce.isPresenting&&(Qe.setDevice(Ce),Qe.enabled=!0,De.enterVR()),Re.setAnimationLoop(this.render),De.renderStarted=!0,De.emit("renderstart")))}),setTimeout(function(){G.prototype.load.call(ye)}))}updateComponent(ye){ye in A||G.prototype.updateComponent.apply(this,arguments)}tick(ye,De){var Ce,Re=this.systems;for(this.callComponentBehaviors("tick",ye,De),Ce=0;Ce<this.systemNames.length;Ce++)Re[this.systemNames[Ce]].tick&&Re[this.systemNames[Ce]].tick(ye,De)}tock(ye,De,Ce){var Re,Qe=this.systems;for(this.callComponentBehaviors("tock",ye,De),Re=0;Re<this.systemNames.length;Re++)Qe[this.systemNames[Re]].tock&&Qe[this.systemNames[Re]].tock(ye,De,Ce)}render(ye,De){var Ce=this.renderer;this.frame=De,this.delta=1e3*this.clock.getDelta(),this.time=1e3*this.clock.elapsedTime,this.isPlaying&&this.tick(this.time,this.delta);var Re=null;this.is("ar-mode")&&(Re=this.object3D.background,this.object3D.background=null),Ce.render(this.object3D,this.camera),Re&&(this.object3D.background=Re)}callComponentBehaviors(ye,De,Ce){for(var Re,Qe=0;Qe<this.componentOrder.length;Qe++){var ot=this.behaviors[this.componentOrder[Qe]];if(ot){var Je=ot[ye];for(Je.inUse=!0,Re=0;Re<Je.array.length;Re++)Je.array[Re].isPlaying&&Je.array[Re][ye](De,Ce);for(Je.inUse=!1,Re=0;Re<Je.markedForRemoval.length;Re++)this.removeBehavior(Je.markedForRemoval[Re]);Je.markedForRemoval.length=0}}}}function ue(Te,ye){var De,Ce,Re={},Qe=ye||[];for(Ce in Qe.length=0,Te){var ot=Te[Ce];if(ot!==void 0){var Je=ot.before?ot.before.slice(0):[],Mt=ot.after?ot.after.slice(0):[];Re[Ce]={before:Je,after:Mt,visited:!1,done:!1}}}for(Ce in Re)for(De=0;De<Re[Ce].before.length;De++){var Zt=Re[Ce].before[De];Zt in Re?Re[Zt].after.push(Ce):H("Invalid ordering constraint, no component named `"+Zt+"` referenced by `"+Ce+"`")}function kt(si){if(si in Re&&!Re[si].done)if(Re[si].visited)H("Cycle detected, ignoring one or more before/after constraints. The resulting order might be incorrect");else{Re[si].visited=!0;for(var _i=0;_i<Re[si].after.length;_i++){var Ri=Re[si].after[_i];Ri in Re||H("Invalid before/after constraint, no component named `"+Ri+"` referenced in `"+si+"`"),kt(Ri)}Re[si].done=!0,Qe.push(si)}}for(Ce in Re)Re[Ce].done||kt(Ce);return Qe}function ve(Te,ye){var De,Ce=window.devicePixelRatio;return!ye||ye.width===-1&&ye.height===-1||Te.width*Ce<ye.width&&Te.height*Ce<ye.height||(De=Te.width/Te.height,Te.width*Ce>ye.width&&ye.width!==-1&&(Te.width=Math.round(ye.width/Ce),Te.height=Math.round(ye.width/De/Ce)),Te.height*Ce>ye.height&&ye.height!==-1&&(Te.height=Math.round(ye.height/Ce),Te.width=Math.round(ye.height*De/Ce))),Te}function be(Te,ye,De,Ce){return Te.parentElement?ye?ve({height:Te.parentElement.offsetHeight,width:Te.parentElement.offsetWidth},De):function(Re,Qe){var ot;return ot={height:document.body.offsetHeight,width:document.body.offsetWidth},Qe?ot:ve(ot,Re)}(De,Ce):{height:0,width:0}}customElements.define("a-scene",he),M.exports.Qd=he},4713:(M,E,e)=>{var B,N,Q,P=e(8903).styleParser,A="loading-screen";function C(V){var z=B.hasAttribute("embedded"),H=Q(B.canvas,z,B.maxCanvasSize,B.is("vr-mode"));V.aspect=H.width/H.height,V.updateProjectionMatrix(),B.renderer.setSize(H.width,H.height,!1)}M.exports.setup=function(V,z){Q=z;var H,G,$,k,K,Z,ee,he,ue,ve,be=(B=V).hasAttribute(A)?P.parse(B.getAttribute(A)):void 0,Te=be&&be.dotsColor||"white",ye=be&&be.backgroundColor||"#24CAFF";(be===void 0||be.enabled==="true"||be.enabled===void 0)&&(H=new THREE.Scene,G=new THREE.SphereGeometry(.2,36,18,0,2*Math.PI,0,Math.PI),$=new THREE.MeshBasicMaterial({color:Te}),k=new THREE.Mesh(G,$),K=k.clone(),Z=k.clone(),ee=new THREE.PerspectiveCamera(80,window.innerWidth/window.innerHeight,5e-4,1e4),he=new THREE.Clock,ue=0,ve=function(){B.renderer.render(H,ee),ue=he.getElapsedTime()%4,k.visible=ue>=1,K.visible=ue>=2,Z.visible=ue>=3},H.background=new THREE.Color(ye),H.add(ee),k.position.set(-1,0,-15),K.position.set(0,0,-15),Z.position.set(1,0,-15),ee.add(k),ee.add(K),ee.add(Z),(N=document.createElement("div")).className="a-loader-title",N.innerHTML=document.title,N.style.display="none",B.appendChild(N),setTimeout(function(){B.hasLoaded||(C(ee),N.style.display="block",window.addEventListener("resize",function(){C(ee)}),B.renderer.setAnimationLoop(ve))},200))},M.exports.remove=function(){window.removeEventListener("resize",C),N&&(N.style.display="none")}},770:(M,E,e)=>{var B,N=e(8309),Q=e(8903).extend,P=[C({name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui,viewport-fit=cover"}),C({name:"mobile-web-app-capable",content:"yes"}),C({name:"theme-color",content:"black"})],A=[C({name:"apple-mobile-web-app-capable",content:"yes"}),C({name:"apple-mobile-web-app-status-bar-style",content:"black"}),(B={rel:"apple-touch-icon",href:"https://aframe.io/images/aframe-logo-152.png"},{tagName:"link",attributes:B,exists:function(){return document.querySelector('link[rel="'+B.rel+'"]')}})];function C(V){return{tagName:"meta",attributes:V,exists:function(){return document.querySelector('meta[name="'+V.name+'"]')}}}M.exports.f=function(V){var z,H=document.head,G=H.querySelector("script"),$=[];return P.forEach(k),V.isIOS&&A.forEach(k),$;function k(K){K&&!K.exists()&&(z=function(Z){if(Z&&Z.tagName){var ee=document.createElement(Z.tagName);return ee.setAttribute(N.AFRAME_INJECTED,""),Q(ee,Z.attributes)}}(K),z&&(G?G.parentNode.insertBefore(z,G):H.appendChild(z),$.push(z)))}}},8225:(M,E,e)=>{var B=e(8903).isIframed;function N(Q){if(Q.data&&Q.data.type==="vr")switch(Q.data.data){case"enter":this.enterVR();break;case"exit":this.exitVR()}}M.exports=function(Q){B()&&window.addEventListener("message",N.bind(Q))}},1435:M=>{M.exports=[]},9035:(M,E,e)=>{var B=e(4630);M.exports=function(N){if(N.isMobile){var Q=N.wakelock=new B;N.addEventListener("enter-vr",function(){Q.request()}),N.addEventListener("exit-vr",function(){Q.release()})}}},5941:(M,E,e)=>{var B,N=e(8903),Q=e(8813),P=N.debug,A=Q.isValidDefaultValue,C=Q.propertyTypes,V=P("core:schema:warn");function z(k){return"type"in k?typeof k.type=="string":"default"in k}function H(k,K){var Z,ee,he=k.default,ue=k.type;return k.type?k.type==="bool"?ue="boolean":k.type==="float"&&(ue="number"):ue=he===void 0||typeof he!="boolean"&&typeof he!="number"?Array.isArray(he)?"array":"string":typeof he,(ee=C[ue])||V("Unknown property type for component `"+K+"`: "+ue),Z=!!k.parse,k.parse=k.parse||ee.parse,k.stringify=k.stringify||ee.stringify,k.equals=k.equals||ee.equals,k.isCacheable=k.isCacheable===!0||ee.isCacheable,k.type=ue,"default"in k?Z||A(ue,he)||V("Default value `"+he+"` does not match type `"+ue+"` in component `"+K+"`"):k.default=ee.default,k}function G(k,K,Z){return k!=null&&k!==""||(k=K.default,Array.isArray(k)&&(k=k.slice())),K.parse(k,K.default,Z)}function $(k,K){return typeof k!="object"?k:K&&k!==null?K.stringify(k):JSON.stringify(k)}M.exports.isSingleProperty=z,M.exports.process=function(k,K){var Z;if(z(k))return H(k,K);for(Z in k)k[Z]=H(k[Z],K);return k},M.exports.processPropertyDefinition=H,M.exports.parseProperties=(B=[],function(k,K,Z,ee,he){var ue,ve,be,Te;for(ve in B.length=0,Z?k:K)Z&&k[ve]===void 0||B.push(ve);if(k===null||typeof k!="object")return k;for(ve in k)k[ve]===void 0||K[ve]||he||V("Unknown property `"+ve+"` for component/system `"+ee+"`.");for(ue=0;ue<B.length;ue++){if(be=K[ve=B[ue]],Te=k[ve],!K[ve])return;k[ve]=G(Te,be)}return k}),M.exports.parseProperty=G,M.exports.stringifyProperties=function(k,K){var Z,ee,he,ue,ve={};for(Z in k)ee=K[Z],typeof(ue=he=k[Z])=="object"&&(ue=$(he,ee),ee||V("Unknown component property: "+Z)),ve[Z]=ue;return ve},M.exports.stringifyProperty=$},9644:(M,E,e)=>{var B=e(5941).process,N=M.exports.shaders={},Q=M.exports.shaderNames=[],P=e(2666),A=e(8903),C={array:"v3",color:"v3",int:"i",number:"f",map:"t",time:"f",vec2:"v2",vec3:"v3",vec4:"v4"},V=M.exports.Shader=function(){};V.prototype={schema:{},vertexShader:"void main() {gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}",fragmentShader:"void main() {gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);}",init:function(z){return this.uniforms=this.initUniforms(),this.material=new(this.raw?P.RawShaderMaterial:P.ShaderMaterial)({uniforms:this.uniforms,glslVersion:this.raw||this.glsl3?P.GLSL3:null,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),this.material},initUniforms:function(){var z,H,G=this.schema,$={};for(z in G)G[z].is==="uniform"&&(H=C[G[z].type],$[z]={type:H,value:void 0});return $},update:function(z){var H,G,$=this.schema,k=this.uniforms;for(H in z)if($[H]&&$[H].is==="uniform")if($[H].type!=="map")k[H].value=this.parseValue($[H].type,z[H]),k[H].needsUpdate=!0;else{if(!k[H]||k[H].value===z[H])continue;G="_texture_"+H,this.setMapOnTextureLoad(k,H,G),A.material.updateMapMaterialFromData(G,H,this,z)}},parseValue:function(z,H){var G;switch(z){case"vec2":return new P.Vector2(H.x,H.y);case"vec3":return new P.Vector3(H.x,H.y,H.z);case"vec4":return new P.Vector4(H.x,H.y,H.z,H.w);case"color":return G=new P.Color(H),new P.Vector3(G.r,G.g,G.b);default:return H}},setMapOnTextureLoad:function(z,H,G){var $=this;this.el.addEventListener("materialtextureloaded",function(){z[H].value=$.material[G],z[H].needsUpdate=!0})}},M.exports.registerShader=function(z,H){var G,$={};if(Object.keys(H).forEach(function(k){$[k]={value:H[k],writable:!0}}),N[z])throw new Error("The shader "+z+" has already been registered");return((G=function(){V.call(this)}).prototype=Object.create(V.prototype,$)).name=z,G.prototype.constructor=G,N[z]={Shader:G,schema:B(G.prototype.schema)},Q.push(z),G}},365:(M,E,e)=>{var B=e(3515),N=e(5941),Q=e(8903),P=e(5252),A=N.parseProperties,C=N.parseProperty,V=N.process,z=N.isSingleProperty,H=Q.styleParser,G=M.exports.systems={},$=M.exports.System=function(k){var K=B&&B.components[this.name];this.el=k,this.sceneEl=k,K&&(K.Component.prototype.system=this),this.buildData(),this.init(),this.update({})};$.prototype={schema:{},init:function(){},update:function(k){},updateProperties:function(k){var K=this.data;Object.keys(N).length&&(this.buildData(k),this.update(K))},buildData:function(k){var K=this.schema;Object.keys(K).length&&(k=k||window.HTMLElement.prototype.getAttribute.call(this.sceneEl,this.name),z(K)?this.data=C(k,K):this.data=A(H.parse(k)||{},K,!1,this.name))},tick:void 0,tock:void 0,play:function(){},pause:function(){}},M.exports.registerSystem=function(k,K){var Z,ee,he={},ue=Q.findAllScenes(document);if(Object.keys(K).forEach(function(ve){he[ve]={value:K[ve],writable:!0}}),G[k])throw new Error("The system `"+k+"` has been already registered. Check that you are not loading two versions of the same system or two different systems of the same name.");if(((ee=function(ve){$.call(this,ve)}).prototype=Object.create($.prototype,he)).name=k,ee.prototype.constructor=ee,ee.prototype.schema=Q.extend(V(ee.prototype.schema)),G[k]=ee,P.canInitializeElements)for(Z=0;Z<ue.length;Z++)ue[Z].initSystem(k)}},8168:(M,E,e)=>{e(5927)},5927:(M,E,e)=>{var B=e(3515).registerComponent,N=e(2666),Q=new N.Vector3,P=new N.Vector3;B("pivot",{dependencies:["position"],schema:{type:"vec3"},init:function(){var A=this.data,C=this.el,V=C.object3D.parent,z=C.object3D,H=new N.Group;Q.copy(z.position),P.copy(z.rotation),V.remove(z),H.add(z),V.add(H),C.object3D=H,z.position.set(-1*A.x,-1*A.y,-1*A.z),H.position.set(A.x+Q.x,A.y+Q.y,A.z+Q.z),H.rotation.copy(z.rotation),z.rotation.set(0,0,0)}})},2362:(M,E,e)=>{var B=e(3515).components,N=e(9644).shaders,Q=e(8903),P={};function A(C){var V=C.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();C==="fog"&&(V="material-fog"),C==="visible"&&(V="material-visible"),P[V]="material."+C}Object.keys(B.material.schema).forEach(A),Object.keys(N.standard.schema).forEach(A),M.exports=function(){return{defaultComponents:{material:{}},mappings:Q.extend({},P)}}},9298:(M,E,e)=>{e(2557),e(8341),e(4256),e(1791),e(4106),e(5254),e(2359),e(1829),e(5144),e(1007),e(5390),e(3097),e(9293),e(3280)},5775:(M,E,e)=>{var B=e(9721).U,N=e(1956).F,Q=e(3515).components,P=e(8903),A=P.debug,C=P.entity.setComponentProperty,V=A("extras:primitives:debug"),z=A("extras:primitives:warn"),H=A("extras:primitives:error"),G=M.exports.primitives={};function $(k,K,Z){var ee=P.entity.getComponentPropertyPath(k);ee.constructor===Array?(Z[ee[0]]=Z[ee[0]]||{},Z[ee[0]][ee[1]]=K.trim()):Z[ee]=K.trim()}M.exports.registerPrimitive=function(k,K){if(k=k.toLowerCase(),!B[k]){B[k]=!0,V("Registering <%s>",k),K.defaultAttributes&&z("The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.");var Z=K.mappings||{},ee=class extends N{constructor(){super(),this.defaultComponentsFromPrimitive=K.defaultComponents||K.defaultAttributes||{},this.deprecated=K.deprecated||null,this.deprecatedMappings=K.deprecatedMappings||{},this.mappings=Z,K.deprecated&&console.warn(K.deprecated),this.resolveMappingCollisions()}resolveMappingCollisions(){var he=this.mappings,ue=this;Object.keys(he).forEach(function(ve){var be;ve!==ve.toLowerCase()&&z("Mapping keys should be specified in lower case. The mapping key "+ve+" may not be recognized"),Q[ve]&&(be=he[ve].replace(".","-"),he[be]=he[ve],delete he[ve],console.warn("The primitive "+ue.tagName.toLowerCase()+" has a mapping collision. The attribute "+ve+" has the same name as a registered component and has been renamed to "+be))})}getExtraComponents(){var he,ue,ve,be,Te,ye=this;for(ue=P.clone(this.defaultComponentsFromPrimitive),(Te=this.getAttribute("mixin"))&&(Te=P.split(Te.trim(),/\s+/)).forEach(function(Qe){var ot,Je,Mt=document.getElementById(Qe);if(Mt){var Zt=Mt.rawAttributeCache,kt=Mt.componentCache;for(var si in Zt){if(be=ye.mappings[si])return void $(be,Zt[si],ue);si in kt&&(ue[si]=(ot=ue[si],Je=kt[si],De(ot)?Ce(Je):De(Je)?Ce(ot):Re(ot)&&Re(Je)?P.extendDeep(ot,Je):Ce(Je)))}}}),ve=0;ve<this.attributes.length;ve++)he=this.attributes[ve],(be=this.mappings[he.name])&&$(be,he.value,ue);return ue;function De(Qe){return Qe===void 0}function Ce(Qe){return Re(Qe)?P.extendDeep({},Qe):Qe}function Re(Qe){return Qe!==null&&Qe.constructor===Object}}attributeChangedCallback(he,ue,ve){var be=this.mappings[he];he in this.deprecatedMappings&&console.warn(this.deprecatedMappings[he]),he&&be?C(this,be,ve):super.attributeChangedCallback(he,ue,ve)}};return customElements.define(k,ee),ee.mappings=Z,G[k]=ee,ee}H("Trying to register primitive "+k+" that has been already previously registered")},M.exports.definePrimitive=function(k,K,Z){Z=Z||{},Object.keys(K).map(function(ee){(function(he,ue){var ve=Q[he].schema;Object.keys(ve).map(function(be){var Te=be.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();ue[Te]!==void 0&&(Te=he+"-"+be),ue[Te]=he+"."+be})})(ee,Z)}),M.exports.registerPrimitive(k,P.extendDeep({},null,{defaultComponents:K,mappings:Z}))}},2557:(M,E,e)=>{(0,e(5775).registerPrimitive)("a-camera",{defaultComponents:{camera:{},"look-controls":{},"wasd-controls":{},position:{x:0,y:1.6,z:0}},mappings:{active:"camera.active",far:"camera.far",fov:"camera.fov","look-controls-enabled":"look-controls.enabled",near:"camera.near","pointer-lock-enabled":"look-controls.pointerLockEnabled","wasd-controls-enabled":"wasd-controls.enabled","reverse-mouse-drag":"look-controls.reverseMouseDrag",zoom:"camera.zoom"}})},8341:(M,E,e)=>{var B=e(2362);(0,e(5775).registerPrimitive)("a-cursor",e(8903).extendDeep({},B(),{defaultComponents:{cursor:{},geometry:{primitive:"ring",radiusOuter:.016,radiusInner:.01,segmentsTheta:32},material:{color:"#000",shader:"flat",opacity:.8},position:{x:0,y:0,z:-1}},mappings:{far:"raycaster.far",fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",interval:"raycaster.interval",objects:"raycaster.objects"}}))},4256:(M,E,e)=>{var B=e(2362);(0,e(5775).registerPrimitive)("a-curvedimage",e(8903).extendDeep({},B(),{defaultComponents:{geometry:{height:1,primitive:"cylinder",radius:2,segmentsRadial:48,thetaLength:270,openEnded:!0,thetaStart:0},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0,repeat:"-1 1"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius",segments:"geometry.segmentsRadial",start:"geometry.thetaStart","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",width:"geometry.thetaLength"}}))},1791:(M,E,e)=>{(0,e(5775).registerPrimitive)("a-gltf-model",{mappings:{src:"gltf-model"}})},4106:(M,E,e)=>{var B=e(2362);(0,e(5775).registerPrimitive)("a-image",e(8903).extendDeep({},B(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},5254:(M,E,e)=>{(0,e(5775).registerPrimitive)("a-light",{defaultComponents:{light:{}},mappings:{angle:"light.angle",color:"light.color","ground-color":"light.groundColor",decay:"light.decay",distance:"light.distance",intensity:"light.intensity",penumbra:"light.penumbra",type:"light.type",target:"light.target",envmap:"light.envMap","shadow-camera-automatic":"light.shadowCameraAutomatic"}})},2359:(M,E,e)=>{(0,e(5775).registerPrimitive)("a-link",{defaultComponents:{link:{visualAspectEnabled:!0}},mappings:{href:"link.href",image:"link.image",title:"link.title"}})},1829:(M,E,e)=>{var B=e(2362)();(0,e(5775).registerPrimitive)("a-obj-model",e(8903).extendDeep({},B,{defaultComponents:{"obj-model":{}},mappings:{src:"obj-model.obj",mtl:"obj-model.mtl"}}))},5144:(M,E,e)=>{var B=e(2362),N=e(5775).registerPrimitive,Q=e(8903),P=e(3280);N("a-sky",Q.extendDeep({},B(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",side:"back",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:Q.extendDeep({},P["a-sphere"].mappings)}))},1007:(M,E,e)=>{(0,e(5775).registerPrimitive)("a-sound",{defaultComponents:{sound:{}},mappings:{src:"sound.src",on:"sound.on",autoplay:"sound.autoplay",loop:"sound.loop",volume:"sound.volume"}})},5390:(M,E,e)=>{(0,e(5775).definePrimitive)("a-text",{text:{anchor:"align",width:5}})},3097:(M,E,e)=>{var B=e(2362);(0,e(5775).registerPrimitive)("a-video",e(8903).extendDeep({},B(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},9293:(M,E,e)=>{var B=e(2362);(0,e(5775).registerPrimitive)("a-videosphere",e(8903).extendDeep({},B(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",side:"back",npot:!0},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth"}}))},3280:(M,E,e)=>{var B=e(2362),N=e(4863).xZ,Q=e(4863).ib,P=e(5775).registerPrimitive,A=e(8903),C=M.exports={};function V(z){return z.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}Q.forEach(function(z){var H=N[z],G=V(z),$={};Object.keys(H.schema).forEach(function(Z){$[V(Z)]="geometry."+Z});var k="a-"+G,K=P(k,A.extendDeep({},B(),{defaultComponents:{geometry:{primitive:z}},mappings:$}));C[k]=K})},8328:(M,E,e)=>{var B=e(4863).dZ,N=e(2666);B("box",{schema:{depth:{default:1,min:0},height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"},segmentsDepth:{default:1,min:1,max:20,type:"int"}},init:function(Q){this.geometry=new N.BoxGeometry(Q.width,Q.height,Q.depth,Q.segmentsWidth,Q.segmentsHeight,Q.segmentsDepth)}})},6937:(M,E,e)=>{var B=e(4863).dZ,N=e(2666),Q=N.MathUtils.degToRad;B("circle",{schema:{radius:{default:1,min:0},segments:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(P){this.geometry=new N.CircleGeometry(P.radius,P.segments,Q(P.thetaStart),Q(P.thetaLength))}})},3695:(M,E,e)=>{var B=e(4863).dZ,N=e(2666),Q=N.MathUtils.degToRad;B("cone",{schema:{height:{default:1,min:0},openEnded:{default:!1},radiusBottom:{default:1,min:0},radiusTop:{default:.01,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(P){this.geometry=new N.CylinderGeometry(P.radiusTop,P.radiusBottom,P.height,P.segmentsRadial,P.segmentsHeight,P.openEnded,Q(P.thetaStart),Q(P.thetaLength))}})},1472:(M,E,e)=>{var B=e(4863).dZ,N=e(2666),Q=N.MathUtils.degToRad;B("cylinder",{schema:{height:{default:1,min:0},openEnded:{default:!1},radius:{default:1,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(P){this.geometry=new N.CylinderGeometry(P.radius,P.radius,P.height,P.segmentsRadial,P.segmentsHeight,P.openEnded,Q(P.thetaStart),Q(P.thetaLength))}})},9473:(M,E,e)=>{var B=e(4863).dZ,N=e(2666);B("dodecahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(Q){this.geometry=new N.DodecahedronGeometry(Q.radius,Q.detail)}})},8581:(M,E,e)=>{var B=e(4863).dZ,N=e(2666);B("icosahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(Q){this.geometry=new N.IcosahedronGeometry(Q.radius,Q.detail)}})},763:(M,E,e)=>{e(8328),e(6937),e(3695),e(1472),e(9473),e(8581),e(3210),e(1752),e(377),e(1092),e(9485),e(697),e(7536),e(8018)},3210:(M,E,e)=>{var B=e(4863).dZ,N=e(2666);B("octahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(Q){this.geometry=new N.OctahedronGeometry(Q.radius,Q.detail)}})},1752:(M,E,e)=>{var B=e(4863).dZ,N=e(2666);B("plane",{schema:{height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"}},init:function(Q){this.geometry=new N.PlaneGeometry(Q.width,Q.height,Q.segmentsWidth,Q.segmentsHeight)}})},377:(M,E,e)=>{var B=e(4863).dZ,N=e(2666),Q=N.MathUtils.degToRad;B("ring",{schema:{radiusInner:{default:.8,min:0},radiusOuter:{default:1.2,min:0},segmentsPhi:{default:10,min:1,type:"int"},segmentsTheta:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(P){this.geometry=new N.RingGeometry(P.radiusInner,P.radiusOuter,P.segmentsTheta,P.segmentsPhi,Q(P.thetaStart),Q(P.thetaLength))}})},1092:(M,E,e)=>{var B=e(4863).dZ,N=e(2666),Q=N.MathUtils.degToRad;B("sphere",{schema:{radius:{default:1,min:0},phiLength:{default:360},phiStart:{default:0,min:0},thetaLength:{default:180,min:0},thetaStart:{default:0},segmentsHeight:{default:18,min:2,type:"int"},segmentsWidth:{default:36,min:3,type:"int"}},init:function(P){this.geometry=new N.SphereGeometry(P.radius,P.segmentsWidth,P.segmentsHeight,Q(P.phiStart),Q(P.phiLength),Q(P.thetaStart),Q(P.thetaLength))}})},9485:(M,E,e)=>{var B=e(4863).dZ,N=e(2666);B("tetrahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(Q){this.geometry=new N.TetrahedronGeometry(Q.radius,Q.detail)}})},697:(M,E,e)=>{var B=e(4863).dZ,N=e(2666),Q=N.MathUtils.degToRad;B("torus",{schema:{arc:{default:360},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:36,min:2,type:"int"},segmentsTubular:{default:32,min:3,type:"int"}},init:function(P){this.geometry=new N.TorusGeometry(P.radius,2*P.radiusTubular,P.segmentsRadial,P.segmentsTubular,Q(P.arc))}})},7536:(M,E,e)=>{var B=e(4863).dZ,N=e(2666);B("torusKnot",{schema:{p:{default:2,min:1},q:{default:3,min:1},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:8,min:3,type:"int"},segmentsTubular:{default:100,min:3,type:"int"}},init:function(Q){this.geometry=new N.TorusKnotGeometry(Q.radius,2*Q.radiusTubular,Q.segmentsTubular,Q.segmentsRadial,Q.p,Q.q)}})},8018:(M,E,e)=>{var B=e(4863).dZ,N=e(2666),Q=new N.Quaternion,P=new N.Vector3(0,0,1),A=new N.Vector2,C=new N.Vector2,V=new N.Vector2;B("triangle",{schema:{vertexA:{type:"vec3",default:{x:0,y:.5,z:0}},vertexB:{type:"vec3",default:{x:-.5,y:-.5,z:0}},vertexC:{type:"vec3",default:{x:.5,y:-.5,z:0}}},init:function(z){var H,G,$,k,K,Z,ee,he,ue;($=new N.Triangle).a.set(z.vertexA.x,z.vertexA.y,z.vertexA.z),$.b.set(z.vertexB.x,z.vertexB.y,z.vertexB.z),$.c.set(z.vertexC.x,z.vertexC.y,z.vertexC.z),G=$.getNormal(new N.Vector3),Q.setFromUnitVectors(G,P),k=$.a.clone().applyQuaternion(Q),K=$.b.clone().applyQuaternion(Q),Z=$.c.clone().applyQuaternion(Q),A.set(Math.min(k.x,K.x,Z.x),Math.min(k.y,K.y,Z.y)),C.set(Math.max(k.x,K.x,Z.x),Math.max(k.y,K.y,Z.y)),V.set(0,0).subVectors(C,A),k=new N.Vector2().subVectors(k,A).divide(V),K=new N.Vector2().subVectors(K,A).divide(V),Z=new N.Vector2().subVectors(Z,A).divide(V),H=this.geometry=new N.BufferGeometry,ee=[$.a.x,$.a.y,$.a.z,$.b.x,$.b.y,$.b.z,$.c.x,$.c.y,$.c.z],he=[G.x,G.y,G.z,G.x,G.y,G.z,G.x,G.y,G.z],ue=[k.x,k.y,K.x,K.y,Z.x,Z.y],H.setAttribute("position",new N.Float32BufferAttribute(ee,3)),H.setAttribute("normal",new N.Float32BufferAttribute(he,3)),H.setAttribute("uv",new N.Float32BufferAttribute(ue,2))}})},5579:(M,E,e)=>{if(window.hasNativeWebVRImplementation=!!window.navigator.getVRDisplays||!!window.navigator.getVRDevices,window.hasNativeWebXRImplementation=navigator.xr!==void 0,!window.hasNativeWebXRImplementation&&!window.hasNativeWebVRImplementation){var B=e(6818)(window.navigator.userAgent)?1/window.devicePixelRatio:1,N=e(5542),Q={BUFFER_SCALE:B,CARDBOARD_UI_DISABLED:!0,ROTATE_INSTRUCTIONS_DISABLED:!0,MOBILE_WAKE_LOCK:!!window.cordova};window.webvrpolyfill=new N(Q)}var P=e(8903),A=P.debug,C=A("A-Frame:error"),V=A("A-Frame:warn");window.document.currentScript&&window.document.currentScript.parentNode!==window.document.head&&!window.debug&&V("Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ensure everything for A-Frame is properly registered before they are used from HTML."),window.cordova||window.location.protocol!=="file:"||C("This HTML file is currently being served via the file:// protocol. Assets, textures, and models WILL NOT WORK due to cross-origin policy! Please use a local or hosted server: https://aframe.io/docs/1.4.0/introduction/installation.html#use-a-local-server."),P.device.isBrowserEnvironment&&(e(6924),e(1353));var z=e(6450).Qd,H=e(3515).components,G=e(3515).registerComponent,$=e(4863).dZ,k=e(5775).registerPrimitive,K=e(9644).registerShader,Z=e(365).registerSystem,ee=e(9644).shaders,he=e(365).systems,ue=window.THREE=e(2666),ve=e(5252),be=e(4147);e(8686),e(763),e(8657),e(7758);var Te=e(9721).X,ye=e(1956).F;e(2385),e(1397),e(8022),e(8168),e(9298),console.log("A-Frame Version: 1.6.0 (Date 2024-05-23, Commit #e6c47761)"),console.log("THREE Version (https://github.com/supermedium/three.js):",ue.REVISION),console.log("WebVR Polyfill Version:",be.dependencies["webvr-polyfill"]),window.AFRAME_ASYNC||ve.waitForDocumentReadyState(),M.exports=window.AFRAME={AComponent:e(3515).Component,AEntity:ye,ANode:Te,ANIME:e(2446).Z,AScene:z,components:H,coreComponents:Object.keys(H),geometries:e(4863).xZ,registerComponent:G,registerGeometry:$,registerPrimitive:k,registerShader:K,registerSystem:Z,primitives:{getMeshMixin:e(2362),primitives:e(5775).primitives},scenes:e(1435),schema:e(5941),shaders:ee,systems:he,emitReady:ve.emitReady,THREE:ue,utils:P,version:be.version}},1543:M=>{window.aframeStats=function(E){var e=null,B=E;return{update:function(){var N;e("te").set((N=B.querySelectorAll("*"),Array.prototype.slice.call(N).filter(function(Q){return Q.isEntity}),N.length)),window.performance.getEntriesByName&&e("lt").set(window.performance.getEntriesByName("render-started")[0].startTime.toFixed(0))},start:function(){},end:function(){},attach:function(N){e=N},values:{te:{caption:"Entities"},lt:{caption:"Load Time"}},groups:[{caption:"A-Frame",values:["te","lt"]}],fractions:[]}},M.exports={aframeStats:window.aframeStats}},2666:(M,E,e)=>{var B=e(2956).Z;e.g.THREE=B,e(6898),B.Cache&&(B.Cache.enabled=!0),M.exports=B},7260:(M,E,e)=>{var B=e(9644).registerShader,N=e(2666),Q=e(8903);function P(A,C){return C.color.set(A.color),C.fog=A.fog,C.wireframe=A.wireframe,C.toneMapped=A.toneMapped,C.wireframeLinewidth=A.wireframeLinewidth,C}M.exports.Shader=B("flat",{schema:{color:{type:"color"},fog:{default:!0},height:{default:256},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2},toneMapped:{default:!0}},init:function(A){this.materialData={color:new N.Color},P(A,this.materialData),this.material=new N.MeshBasicMaterial(this.materialData)},update:function(A){this.updateMaterial(A),Q.material.updateMap(this,A)},updateMaterial:function(A){var C;for(C in P(A,this.materialData),this.materialData)this.material[C]=this.materialData[C]}})},8657:(M,E,e)=>{e(7260),e(2653),e(1359),e(2859),e(4047),e(7759)},4047:(M,E,e)=>{var B=e(9644).registerShader,N=e(2666),Q=["#include <common>","#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","out vec2 vUV;","void main(void) {","  vUV = uv;","  #include <begin_vertex>","  #include <project_vertex>","  #include <logdepthbuf_vertex>","  #include <fog_vertex>","}"].join(`
`),P=["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","uniform bool negate;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec3 sampleColor = texture(map, vUV).rgb;","  if (negate) { sampleColor = 1.0 - sampleColor; }","  float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;","  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  // Do modified alpha test.","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  // Do modified alpha test.","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color.xyz, alpha * opacity);","  #include <logdepthbuf_fragment>","  #include <tonemapping_fragment>","  #include <colorspace_fragment>","  #include <fog_fragment>","}"].join(`
`);M.exports.Shader=B("msdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},negate:{type:"boolean",is:"uniform",default:!0},opacity:{type:"number",is:"uniform",default:1}},vertexShader:Q,fragmentShader:P,init:function(){return this.uniforms=N.UniformsUtils.merge([N.UniformsLib.fog,this.initUniforms()]),this.material=new N.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,fog:!0}),this.material}})},1359:(M,E,e)=>{var B=e(9644).registerShader,N=e(2666),Q=e(8903);function P(A,C){switch(C.color.set(A.color),C.specular.set(A.specular),C.emissive.set(A.emissive),C.emissiveIntensity=A.emissiveIntensity,C.fog=A.fog,C.transparent=A.transparent,C.wireframe=A.wireframe,C.wireframeLinewidth=A.wireframeLinewidth,C.shininess=A.shininess,C.flatShading=A.flatShading,C.wireframe=A.wireframe,C.wireframeLinewidth=A.wireframeLinewidth,C.reflectivity=A.reflectivity,C.refractionRatio=A.refractionRatio,A.combine){case"mix":C.combine=N.MixOperation;break;case"multiply":C.combine=N.MultiplyOperation;break;case"add":C.combine=N.AddOperation}return A.normalMap&&(C.normalScale=A.normalScale),A.ambientOcclusionMap&&(C.aoMapIntensity=A.ambientOcclusionMapIntensity),A.bumpMap&&(C.bumpScale=A.bumpMapScale),A.displacementMap&&(C.displacementScale=A.displacementScale,C.displacementBias=A.displacementBias),C}M.exports.Shader=B("phong",{schema:{color:{type:"color"},emissive:{type:"color",default:"black"},emissiveIntensity:{default:1},specular:{type:"color",default:"#111111"},transparent:{default:!1},fog:{default:!0},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},envMap:{default:""},sphericalEnvMap:{type:"map"},shininess:{default:30},flatShading:{default:!1},wireframe:{default:!1},wireframeLinewidth:{default:2},combine:{oneOF:["multiply","mix","add"],default:"mix"},reflectivity:{default:.9},refractionRatio:{default:.98},refract:{default:!1},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},bumpMap:{type:"map"},bumpMapScale:{default:1},bumpTextureOffset:{type:"vec2"},bumpTextureRepeat:{type:"vec2",default:{x:1,y:1}}},init:function(A){this.materialData={color:new N.Color,specular:new N.Color,emissive:new N.Color},P(A,this.materialData),this.material=new N.MeshPhongMaterial(this.materialData);var C=this.el.sceneEl;Object.defineProperty(this.material,"envMap",{get:function(){return this._envMap||C.object3D.environment},set:function(V){this._envMap=V}})},update:function(A){this.updateMaterial(A),Q.material.updateMap(this,A),Q.material.updateDistortionMap("normal",this,A),Q.material.updateDistortionMap("displacement",this,A),Q.material.updateDistortionMap("ambientOcclusion",this,A),Q.material.updateDistortionMap("bump",this,A),Q.material.updateEnvMap(this,A)},updateMaterial:function(A){var C;for(C in P(A,this.materialData),this.materialData)this.material[C]=this.materialData[C]}})},2859:(M,E,e)=>{var B=e(9644).registerShader,N=e(2666),Q=["#include <common>","#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","out vec2 vUV;","void main(void) {","  vUV = uv;","  #include <begin_vertex>","  #include <project_vertex>","  #include <logdepthbuf_vertex>","  #include <fog_vertex>","}"].join(`
`),P=["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","float contour(float width, float value) {","  return smoothstep(0.5 - value, 0.5 + value, width);","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec2 uv = vUV;","  vec4 texColor = texture(map, uv);","  float dist = texColor.a;","  float width = fwidth(dist);","  float alpha = contour(dist, width);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(uv) + dFdy(uv));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * dist;","  }","  if (isBigEnough <= BIG_ENOUGH) {","    vec4 box = vec4 (uv - duv, uv + duv);","    alpha = (alpha + 0.5 * (","      contour(texture(map, box.xy).a, width)","      + contour(texture(map, box.zw).a, width)","      + contour(texture(map, box.xw).a, width)","      + contour(texture(map, box.zy).a, width)","    )) / 3.0;","  }","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color, opacity * alpha);","  #include <logdepthbuf_fragment>","  #include <tonemapping_fragment>","  #include <colorspace_fragment>","  #include <fog_fragment>","}"].join(`
`);M.exports.Shader=B("sdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},vertexShader:Q,fragmentShader:P,init:function(){return this.uniforms=N.UniformsUtils.merge([N.UniformsLib.fog,this.initUniforms()]),this.material=new N.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,fog:!0}),this.material}})},7759:(M,E,e)=>{var B=e(9644).registerShader,N=e(2666);M.exports.Shader=B("shadow",{schema:{opacity:{default:.5},transparent:{default:!0},alphaToCoverage:{default:!0}},init:function(Q){this.material=new N.ShadowMaterial},update:function(Q){this.material.opacity=Q.opacity,this.material.alphaToCoverage=Q.alphaToCoverage,this.material.transparent=Q.transparent}})},2653:(M,E,e)=>{var B=e(9644).registerShader,N=e(2666),Q=e(8903);function P(A,C){return C.color.set(A.color),C.emissive.set(A.emissive),C.emissiveIntensity=A.emissiveIntensity,C.fog=A.fog,C.metalness=A.metalness,C.roughness=A.roughness,C.wireframe=A.wireframe,C.wireframeLinewidth=A.wireframeLinewidth,A.normalMap&&(C.normalScale=A.normalScale),A.ambientOcclusionMap&&(C.aoMapIntensity=A.ambientOcclusionMapIntensity),A.displacementMap&&(C.displacementScale=A.displacementScale,C.displacementBias=A.displacementBias),C}M.exports.Shader=B("standard",{schema:{ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},ambientOcclusionTextureOffset:{type:"vec2"},ambientOcclusionTextureRepeat:{type:"vec2",default:{x:1,y:1}},color:{type:"color"},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},emissive:{type:"color",default:"#000"},emissiveIntensity:{default:1},envMap:{default:""},fog:{default:!0},height:{default:256},metalness:{default:0,min:0,max:1},metalnessMap:{type:"map"},metalnessTextureOffset:{type:"vec2"},metalnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},roughness:{default:.5,min:0,max:1},roughnessMap:{type:"map"},roughnessTextureOffset:{type:"vec2"},roughnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},sphericalEnvMap:{type:"map"},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(A){this.materialData={color:new N.Color,emissive:new N.Color},P(A,this.materialData),this.material=new N.MeshStandardMaterial(this.materialData)},update:function(A){this.updateMaterial(A),Q.material.updateMap(this,A),Q.material.updateDistortionMap("normal",this,A),Q.material.updateDistortionMap("displacement",this,A),Q.material.updateDistortionMap("ambientOcclusion",this,A),Q.material.updateDistortionMap("metalness",this,A),Q.material.updateDistortionMap("roughness",this,A),Q.material.updateEnvMap(this,A)},updateMaterial:function(A){var C,V=this.material;for(C in P(A,this.materialData),this.materialData)V[C]=this.materialData[C]}})},8878:(M,E,e)=>{var B=e(8309),N=e(365).registerSystem,Q="data-aframe-default-camera";M.exports.System=N("camera",{init:function(){this.activeCameraEl=null,this.render=this.render.bind(this),this.unwrapRender=this.unwrapRender.bind(this),this.wrapRender=this.wrapRender.bind(this),this.initialCameraFound=!1,this.numUserCameras=0,this.numUserCamerasChecked=0,this.setupInitialCamera()},setupInitialCamera:function(){var P,A,C=this.sceneEl,V=this;if(!C.camera||C.camera.el.getAttribute("camera").spectator)if((P=C.querySelectorAll("a-camera, :not(a-mixin)[camera]")).length)for(this.numUserCameras=P.length,A=0;A<P.length;A++)P[A].addEventListener("object3dset",function(z){z.detail.type==="camera"&&V.checkUserCamera(this)}),P[A].isNode?P[A].load():P[A].addEventListener("nodeready",function(){this.load()});else this.createDefaultCamera();else C.emit("cameraready",{cameraEl:C.camera.el})},checkUserCamera:function(P){var A,C=this.el.sceneEl;this.numUserCamerasChecked++,this.initialCameraFound||((A=P.getAttribute("camera")).active&&!A.spectator?(this.initialCameraFound=!0,C.camera=P.getObject3D("camera"),C.emit("cameraready",{cameraEl:P})):this.numUserCamerasChecked===this.numUserCameras&&this.createDefaultCamera())},createDefaultCamera:function(){var P,A=this.sceneEl;(P=document.createElement("a-entity")).setAttribute("camera",{active:!0}),P.setAttribute("position",{x:0,y:B.DEFAULT_CAMERA_HEIGHT,z:0}),P.setAttribute("wasd-controls",""),P.setAttribute("look-controls",""),P.setAttribute(B.AFRAME_INJECTED,""),P.addEventListener("object3dset",function(C){C.detail.type==="camera"&&(A.camera=C.detail.object,A.emit("cameraready",{cameraEl:P}))}),A.appendChild(P)},disableActiveCamera:function(){var P;(P=this.sceneEl.querySelectorAll(":not(a-mixin)[camera]"))[P.length-1].setAttribute("camera","active",!0)},setActiveCamera:function(P){var A,C,V,z,H=this.activeCameraEl,G=this.sceneEl;if((z=P.getObject3D("camera"))&&P!==this.activeCameraEl){var $=G.querySelector("["+Q+"]");for(P!==($&&$.querySelector(":not(a-mixin)[camera]"))&&function(k){var K;k.camera&&(K=k.querySelector("["+Q+"]"))&&k.removeChild(K)}(G),this.activeCameraEl=P,this.activeCameraEl.play(),G.camera=z,H&&H.setAttribute("camera","active",!1),C=G.querySelectorAll(":not(a-mixin)[camera]"),V=0;V<C.length;V++)(A=C[V]).isEntity&&P!==A&&(A.setAttribute("camera","active",!1),A.pause());G.emit("camera-set-active",{cameraEl:P})}},setSpectatorCamera:function(P){var A,C=this.spectatorCameraEl,V=this.sceneEl;P.getObject3D("camera")&&P!==this.spectatorCameraEl&&(C&&C.setAttribute("camera","spectator",!1),A=this.spectatorCameraEl=P,V.addEventListener("enter-vr",this.wrapRender),V.addEventListener("exit-vr",this.unwrapRender),A.setAttribute("camera","active",!1),A.play(),V.emit("camera-set-spectator",{cameraEl:P}))},disableSpectatorCamera:function(){this.spectatorCameraEl=void 0},wrapRender:function(){this.spectatorCameraEl&&!this.originalRender&&(this.originalRender=this.sceneEl.renderer.render,this.sceneEl.renderer.render=this.render)},unwrapRender:function(){this.originalRender&&(this.sceneEl.renderer.render=this.originalRender,this.originalRender=void 0)},render:function(P,A){var C,V,z=this.sceneEl;C=z.renderer.xr.enabled,this.originalRender.call(z.renderer,P,A),this.spectatorCameraEl&&!z.isMobile&&C&&(V=this.spectatorCameraEl.components.camera.camera,z.renderer.xr.enabled=!1,this.originalRender.call(z.renderer,P,V),z.renderer.xr.enabled=C)}})},5087:(M,E,e)=>{var B=e(4863).xZ,N=e(365).registerSystem;function Q(P){var A=P.primitive,C=B[A]&&B[A].Geometry,V=new C;if(!C)throw new Error("Unknown geometry `"+A+"`");return V.init(P),V.geometry}M.exports.System=N("geometry",{init:function(){this.cache={},this.cacheCount={}},clearCache:function(){this.cache={},this.cacheCount={}},getOrCreateGeometry:function(P){var A,C,V=this.cache;return P.skipCache?Q(P):(A=V[C=this.hash(P)],function(z,H){z[H]=z[H]===void 0?1:z[H]+1}(this.cacheCount,C),A||(A=Q(P),V[C]=A,A))},unuseGeometry:function(P){var A,C=this.cache,V=this.cacheCount;P.skipCache||C[A=this.hash(P)]&&(function(z,H){z[H]--}(V,A),V[A]>0||(C[A].dispose(),delete C[A],delete V[A]))},hash:function(P){return JSON.stringify(P)}})},2776:(M,E,e)=>{var B=e(365).registerSystem,N=e(2666);M.exports.System=B("gltf-model",{schema:{dracoDecoderPath:{default:"https://www.gstatic.com/draco/versioned/decoders/1.5.6/"},basisTranscoderPath:{default:""},meshoptDecoderPath:{default:""}},init:function(){this.update()},update:function(){var Q,P=this.data.dracoDecoderPath,A=this.data.basisTranscoderPath,C=this.data.meshoptDecoderPath;!this.dracoLoader&&P&&(this.dracoLoader=new N.DRACOLoader,this.dracoLoader.setDecoderPath(P)),!this.ktx2Loader&&A&&(this.ktx2Loader=new N.KTX2Loader,this.ktx2Loader.setTranscoderPath(A).detectSupport(this.el.renderer)),!this.meshoptDecoder&&C&&(this.meshoptDecoder=(Q=C,new Promise(function(V,z){var H=document.createElement("script");document.body.appendChild(H),H.onload=V,H.onerror=z,H.async=!0,H.src=Q})).then(function(){return window.MeshoptDecoder.ready}).then(function(){return window.MeshoptDecoder}))},getDRACOLoader:function(){return this.dracoLoader},getKTX2Loader:function(){return this.ktx2Loader},getMeshoptDecoder:function(){return this.meshoptDecoder}})},7758:(M,E,e)=>{e(8878),e(5087),e(2776),e(7095),e(4829),e(8425),e(730),e(2908),e(7644),e(9060),e(2602)},7095:(M,E,e)=>{var B=e(365).registerSystem,N=e(8309),Q="data-aframe-default-light";M.exports.System=B("light",{schema:{defaultLightsEnabled:{default:!0}},init:function(){this.defaultLights=!1,this.userDefinedLights=!1,this.sceneEl.addEventListener("loaded",this.setupDefaultLights.bind(this))},registerLight:function(P){P.hasAttribute(Q)||(this.removeDefaultLights(),this.userDefinedLights=!0)},removeDefaultLights:function(){var P,A=this.sceneEl;if(this.defaultLights){P=document.querySelectorAll("["+Q+"]");for(var C=0;C<P.length;C++)A.removeChild(P[C]);this.defaultLights=!1}},setupDefaultLights:function(){var P,A,C=this.sceneEl;this.userDefinedLights||this.defaultLights||!this.data.defaultLightsEnabled||((P=document.createElement("a-entity")).setAttribute("light",{color:"#BBB",type:"ambient"}),P.setAttribute(Q,""),P.setAttribute(N.AFRAME_INJECTED,""),C.appendChild(P),(A=document.createElement("a-entity")).setAttribute("light",{color:"#FFF",intensity:.6,castShadow:!0}),A.setAttribute("position",{x:-.5,y:1,z:1}),A.setAttribute(Q,""),A.setAttribute(N.AFRAME_INJECTED,""),C.appendChild(A),this.defaultLights=!0)}})},4829:(M,E,e)=>{var B=e(365).registerSystem,N=e(2666),Q=e(8903),P=e(819).setTextureProperties,A=e(819).createCompatibleTexture,C=Q.debug,V=C("components:texture:error"),z=C("components:texture:warn"),H=new N.ImageLoader;M.exports.System=B("material",{init:function(){this.materials={},this.sourceCache={}},clearTextureSourceCache:function(){this.sourceCache={}},loadTexture:function(G,$,k){this.loadTextureSource(G,function(K){var Z=A(K);P(Z,$),k(Z)})},loadTextureSource:function(G,$){var k=this,K=this.sourceCache,Z=this.hash(G);function ee(he){K[Z]=Promise.resolve(he),K[Z].then($)}K[Z]?K[Z].then($):G.tagName!=="CANVAS"?ee(new Promise(function(he,ue){Q.srcLoader.validateSrc(G,function(ve){k.loadImage(ve,he)},function(ve){k.loadVideo(ve,he)})})):ee(new N.Source(G))},loadCubeMapTexture:function(G,$){var k=this,K=0,Z=new N.CubeTexture;function ee(ue){k.loadTextureSource(G[ue],function(ve){Z.images[ue]=ve,++K==6&&(Z.needsUpdate=!0,$(Z))})}if(Z.colorSpace=N.SRGBColorSpace,G.length===6)for(var he=0;he<G.length;he++)ee(he);else z("Cube map texture requires exactly 6 sources, got only %s sources",G.length)},loadImage:function(G,$){$(typeof G=="string"?function(k){return new Promise(function(K,Z){H.load(k,function(ee){K(new N.Source(ee))},function(){},function(ee){V("`$s` could not be fetched (Error code: %s; Response: %s)",ee.status,ee.statusText)})})}(G):new N.Source(G))},loadVideo:function(G,$){var k;typeof G!="string"&&function(K){K.autoplay=K.hasAttribute("autoplay")&&K.getAttribute("autoplay")!=="false",K.controls=K.hasAttribute("controls")&&K.getAttribute("controls")!=="false",K.getAttribute("loop")==="false"&&K.removeAttribute("loop"),K.getAttribute("preload")==="false"&&(K.preload="none"),K.crossOrigin=K.crossOrigin||"anonymous",K.setAttribute("playsinline",""),K.setAttribute("webkit-playsinline","")}(k=G),k=k||function(K){var Z=document.createElement("video");return Z.setAttribute("playsinline",""),Z.setAttribute("webkit-playsinline",""),Z.autoplay=!0,Z.loop=!0,Z.crossOrigin="anonymous",Z.addEventListener("error",function(){z("`%s` is not a valid video",K)},!0),Z.src=K,Z}(G),$(new N.Source(k))},hash:function(G){return G.tagName&&(G.id||G.src)||G},registerMaterial:function(G){this.materials[G.uuid]=G},unregisterMaterial:function(G){delete this.materials[G.uuid]}})},8425:(M,E,e)=>{(0,e(365).registerSystem)("obb-collider",{schema:{showColliders:{default:!1}},init:function(){this.collisions=[],this.colliderEls=[]},addCollider:function(B){this.colliderEls.push(B),this.data.showColliders?B.components["obb-collider"].showCollider():B.components["obb-collider"].hideCollider(),this.tick=this.detectCollisions},removeCollider:function(B){var N=this.colliderEls,Q=N.indexOf(B);B.components["obb-collider"].hideCollider(),Q>-1&&N.splice(Q,1),N.length===0&&(this.tick=void 0)},registerCollision:function(B,N){var Q=this.collisions,P=!1,A=B.obb,C=N.obb,V=B.renderColliderMesh,z=N.renderColliderMesh;V&&V.material.color.set(16711680),z&&z.material.color.set(16711680);for(var H=0;H<Q.length;H++)if(Q[H].componentA.obb===A&&Q[H].componentB.obb===C||Q[H].componentA.obb===C&&Q[H].componentB.obb===A){P=!0,Q[H].detected=!0;break}P||(Q.push({componentA:B,componentB:N,detected:!0}),B.el.emit("obbcollisionstarted",{trackedObject3D:B.trackedObject3D,withEl:N.el}),N.el.emit("obbcollisionstarted",{trackedObject3D:N.trackedObject3D,withEl:B.el}))},resetCollisions:function(){for(var B=this.collisions,N=0;N<B.length;N++)B[N].detected=!1},clearCollisions:function(){for(var B,N,Q,P,A=this.collisions,C=[],V=0;V<A.length;V++)A[V].detected?C.push(A[V]):(B=A[V].componentA,N=A[V].componentB,Q=B.renderColliderMesh,P=N.renderColliderMesh,Q&&Q.material.color.set(65280),B.el.emit("obbcollisionended",{trackedObject3D:this.trackedObject3D,withEl:N.el}),P&&P.material.color.set(65280),N.el.emit("obbcollisionended",{trackedObject3D:this.trackedObject3D,withEl:B.el}));this.collisions=C},detectCollisions:function(){var B,N,Q,P,A=this.colliderEls;if(!(A.length<2)){this.resetCollisions();for(var C=0;C<A.length;C++)if(Q=A[C].components["obb-collider"],(B=A[C].components["obb-collider"].obb).halfSize.x!==0&&B.halfSize.y!==0&&B.halfSize.z!==0)for(var V=C+1;V<A.length;V++)(N=(P=A[V].components["obb-collider"]).obb).halfSize.x!==0&&N.halfSize.y!==0&&N.halfSize.z!==0&&B.intersectsOBB(N)&&this.registerCollision(Q,P);this.clearCollisions()}}})},730:(M,E,e)=>{var B=e(365).registerSystem,N=e(8903),Q=e(2666),P=(0,N.debug)("components:renderer:warn");function A(z,H){return z.groupOrder!==H.groupOrder?z.groupOrder-H.groupOrder:z.renderOrder!==H.renderOrder?z.renderOrder-H.renderOrder:z.z-H.z}function C(z,H){return z.groupOrder!==H.groupOrder?z.groupOrder-H.groupOrder:z.renderOrder-H.renderOrder}function V(z,H){return z.groupOrder!==H.groupOrder?z.groupOrder-H.groupOrder:z.renderOrder!==H.renderOrder?z.renderOrder-H.renderOrder:H.z-z.z}M.exports.System=B("renderer",{schema:{antialias:{default:"auto",oneOf:["true","false","auto"]},highRefreshRate:{default:N.device.isOculusBrowser()},logarithmicDepthBuffer:{default:"auto",oneOf:["true","false","auto"]},maxCanvasWidth:{default:-1},maxCanvasHeight:{default:-1},multiviewStereo:{default:!1},physicallyCorrectLights:{default:!1},exposure:{default:1,if:{toneMapping:["ACESFilmic","linear","reinhard","cineon"]}},toneMapping:{default:"no",oneOf:["no","ACESFilmic","linear","reinhard","cineon"]},precision:{default:"high",oneOf:["high","medium","low"]},anisotropy:{default:1},sortTransparentObjects:{default:!1},colorManagement:{default:!0},alpha:{default:!0},stencil:{default:!1},foveationLevel:{default:1}},init:function(){var z=this.data,H=this.el,G=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1),$=H.renderer;z.physicallyCorrectLights||($.useLegacyLights=!z.physicallyCorrectLights),$.toneMapping=Q[G+"ToneMapping"],Q.Texture.DEFAULT_ANISOTROPY=z.anisotropy,Q.ColorManagement.enabled=z.colorManagement,$.outputColorSpace=z.colorManagement?Q.SRGBColorSpace:Q.LinearSRGBColorSpace,H.hasAttribute("antialias")&&P('Component `antialias` is deprecated. Use `renderer="antialias: true"` instead.'),H.hasAttribute("logarithmicDepthBuffer")&&P('Component `logarithmicDepthBuffer` is deprecated. Use `renderer="logarithmicDepthBuffer: true"` instead.'),$.sortObjects=!0,$.setOpaqueSort(A)},update:function(){var z=this.data,H=this.el.renderer,G=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1);H.toneMapping=Q[G+"ToneMapping"],H.toneMappingExposure=z.exposure,H.xr.setFoveation(z.foveationLevel),z.sortObjects&&P('`sortObjects` property is deprecated. Use `renderer="sortTransparentObjects: true"` instead.'),z.sortTransparentObjects?H.setTransparentSort(V):H.setTransparentSort(C)},applyColorCorrection:function(z){this.data.colorManagement&&z&&z.isTexture&&z.colorSpace!==Q.SRGBColorSpace&&(z.colorSpace=Q.SRGBColorSpace,z.needsUpdate=!0)},setWebXRFrameRate:function(z){var H,G=this.data,$=z.supportedFrameRates;$&&z.updateTargetFrameRate&&(H=$.includes(90)?G.highRefreshRate?90:72:G.highRefreshRate?72:60,z.updateTargetFrameRate(H).catch(function(k){console.warn("failed to set target frame rate of "+H+". Error info: "+k)}))}}),M.exports.sortFrontToBack=A,M.exports.sortRenderOrderOnly=C,M.exports.sortBackToFront=V},2908:(M,E,e)=>{var B=e(365).registerSystem,N=e(2666),Q={basic:N.BasicShadowMap,pcf:N.PCFShadowMap,pcfsoft:N.PCFSoftShadowMap};M.exports.System=B("shadow",{schema:{enabled:{default:!0},autoUpdate:{default:!0},type:{default:"pcf",oneOf:["basic","pcf","pcfsoft"]}},init:function(){var P=this.sceneEl,A=this.data;this.shadowMapEnabled=!1,P.renderer.shadowMap.type=Q[A.type],P.renderer.shadowMap.autoUpdate=A.autoUpdate},update:function(P){P.enabled!==this.data.enabled&&this.setShadowMapEnabled(this.shadowMapEnabled)},setShadowMapEnabled:function(P){var A=this.sceneEl,C=this.sceneEl.renderer;this.shadowMapEnabled=P;var V=this.data.enabled&&this.shadowMapEnabled;C&&V!==C.shadowMap.enabled&&(C.shadowMap.enabled=V,function(z){z.hasLoaded&&z.object3D.traverse(function(H){if(H.material)for(var G=Array.isArray(H.material)?H.material:[H.material],$=0;$<G.length;$++)G[$].needsUpdate=!0})}(A))}})},7644:(M,E,e)=>{var B=e(365).registerSystem,N=e(8903),Q=N.device.isWebXRAvailable;M.exports.System=B("tracked-controls-webvr",{init:function(){var P=this;this.controllers=[],this.isChrome=navigator.userAgent.indexOf("Chrome")!==-1,this.updateControllerList(),this.throttledUpdateControllerList=N.throttle(this.updateControllerList,500,this),Q||navigator.getVRDisplays&&this.sceneEl.addEventListener("enter-vr",function(){navigator.getVRDisplays().then(function(A){A.length&&(P.vrDisplay=A[0])})})},tick:function(){this.isChrome?this.updateControllerList():this.throttledUpdateControllerList()},updateControllerList:function(){var P,A,C,V,z=this.controllers;if(A=navigator.getGamepads&&navigator.getGamepads()){for(V=z.length,z.length=0,C=0;C<A.length;++C)(P=A[C])&&P.pose&&z.push(P);z.length!==V&&this.el.emit("controllersupdated",void 0,!1)}}})},9060:(M,E,e)=>{var B=e(365).registerSystem,N=e(8903);M.exports.System=B("tracked-controls-webxr",{init:function(){this.controllers=[],this.oldControllers=[],this.oldControllersLength=0,this.throttledUpdateControllerList=N.throttle(this.updateControllerList,500,this),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.addEventListener("enter-vr",this.updateReferenceSpace),this.el.addEventListener("exit-vr",this.updateReferenceSpace)},tick:function(){this.throttledUpdateControllerList()},updateReferenceSpace:function(){var Q=this,P=this.el.xrSession;if(!P)return this.referenceSpace=void 0,this.controllers=[],void(this.oldControllersLength>0&&(this.oldControllersLength=0,this.el.emit("controllersupdated",void 0,!1)));var A=Q.el.sceneEl.systems.webxr.sessionReferenceSpaceType;P.requestReferenceSpace(A).then(function(C){Q.referenceSpace=C}).catch(function(C){throw Q.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(A,'tracked-controls-webxr uses reference space "'+A+'".'),C})},updateControllerList:function(){var Q,P=this.el.xrSession,A=this.oldControllers;if(!P)return this.oldControllersLength===0?void 0:(this.oldControllersLength=0,this.controllers=[],void this.el.emit("controllersupdated",void 0,!1));if(P.inputSources){if(this.controllers=P.inputSources,this.oldControllersLength===this.controllers.length){var C=!0;for(Q=0;Q<this.controllers.length;++Q)if(this.controllers[Q]!==A[Q]||this.controllers[Q].gamepad!==A[Q].gamepad){C=!1;break}if(C)return}for(A.length=0,Q=0;Q<this.controllers.length;Q++)A.push(this.controllers[Q]);this.oldControllersLength=this.controllers.length,this.el.emit("controllersupdated",void 0,!1)}}})},2602:(M,E,e)=>{var B=e(365).registerSystem,N=e(8903).debug("systems:webxr:warn");M.exports.System=B("webxr",{schema:{referenceSpaceType:{type:"string",default:"local-floor"},requiredFeatures:{type:"array",default:["local-floor"]},optionalFeatures:{type:"array",default:["bounded-floor"]},overlayElement:{type:"selector"}},update:function(){var Q=this.data;this.sessionConfiguration={requiredFeatures:Q.requiredFeatures,optionalFeatures:Q.optionalFeatures},this.sessionReferenceSpaceType=Q.referenceSpaceType,Q.overlayElement&&(Q.overlayElement.classList.remove("a-dom-overlay"),Q.optionalFeatures.includes("dom-overlay")||(Q.optionalFeatures.push("dom-overlay"),this.el.setAttribute("webxr",Q)),this.warnIfFeatureNotRequested("dom-overlay"),this.sessionConfiguration.domOverlay={root:Q.overlayElement},Q.overlayElement.classList.add("a-dom-overlay"))},wasFeatureRequested:function(Q){return Q==="viewer"||Q==="local"||!(!this.sessionConfiguration.requiredFeatures.includes(Q)&&!this.sessionConfiguration.optionalFeatures.includes(Q))},warnIfFeatureNotRequested:function(Q,P){this.wasFeatureRequested(Q)||N((P?P+" ":"")+'Please add the feature "'+Q+`" to a-scene's webxr system options in requiredFeatures/optionalFeatures.`)}})},395:(M,E,e)=>{var B=e(4219)("utils:coordinates:warn"),N=["x","y","z","w"],Q=/^\s*((-?\d*\.{0,1}\d+(e-?\d+)?)\s+){2,3}(-?\d*\.{0,1}\d+(e-?\d+)?)\s*$/;M.exports.regex=Q;var P=/\s+/g;function A(V){return Q.test(V)}function C(V){return V!=null&&V.constructor===String?parseFloat(V,10):V}M.exports.parse=function(V,z,H){var G,$,k,K,Z,ee,he,ue,ve=H&&typeof H=="object"?H:{};if(V&&V instanceof Object)return Z=V.x===void 0?z&&z.x:V.x,ee=V.y===void 0?z&&z.y:V.y,he=V.z===void 0?z&&z.z:V.z,ue=V.w===void 0?z&&z.w:V.w,Z!=null&&(ve.x=C(Z)),ee!=null&&(ve.y=C(ee)),he!=null&&(ve.z=C(he)),ue!=null&&(ve.w=C(ue)),ve;if(V==null)return typeof z=="object"?Object.assign(ve,z):z;for(G=V.trim().split(P),K=0;K<N.length;K++)if(k=N[K],G[K])ve[k]=parseFloat(G[K],10);else{if(($=z&&z[k])===void 0)continue;ve[k]=C($)}return ve},M.exports.stringify=function(V){var z;return typeof V!="object"?V:(z=V.x+" "+V.y,V.z!=null&&(z+=" "+V.z),V.w!=null&&(z+=" "+V.w),z)},M.exports.equals=function(V,z){return typeof V!="object"||typeof z!="object"?V===z:V.x===z.x&&V.y===z.y&&V.z===z.z&&V.w===z.w},M.exports.isCoordinates=A,M.exports.isCoordinate=function(V){return B("`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`"),A(V)},M.exports.toVector3=function(V){return new THREE.Vector3(V.x,V.y,V.z)}},4219:(M,E,e)=>{var B=e(2849),N=e(879).isBrowserEnvironment,Q={colors:{debug:"gray",error:"red",info:"gray",warn:"orange"}};B.formatArgs=function(A){if(A[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+A[0]+(this.useColors?"%c ":" "),this.useColors){var C;this.color=(C=function(G){var $=G.split(":");return $[$.length-1]}(this.namespace),Q.colors&&Q.colors[C]||null);var V="color: "+this.color;A.splice(1,0,V,"color: inherit");var z=0,H=0;A[0].replace(/%[a-zA-Z%]/g,function(G){G!=="%%"&&(z++,G==="%c"&&(H=z))}),A.splice(H,0,V)}};var P=function(){try{return window.localStorage}catch{}}();P&&(parseInt(P.logs,10)||P.logs==="true")?B.enable("*"):B.enable("*:error,*:info,*:warn"),N&&(window.logs=B),M.exports=B},879:(M,E,e)=>{var B,N=e(2849)("device:error"),Q=!1,P=!1,A=M.exports.isWebXRAvailable=navigator.xr!==void 0;if(window.addEventListener("vrdisplayactivate",function(be){var Te;A||(Te=document.createElement("canvas"),B=be.display,Te.getContext("webgl",{}),B.requestPresent([{source:Te}]).then(function(){},function(){}))}),A){var C=function(){var be=document.querySelector("a-scene");be?be.hasLoaded?be.components["xr-mode-ui"].updateEnterInterfaces():be.addEventListener("loaded",C):window.addEventListener("DOMContentLoaded",C)},V=function(be){N("WebXR session support error: "+be.message)};navigator.xr.isSessionSupported?(navigator.xr.isSessionSupported("immersive-vr").then(function(be){Q=be,C()}).catch(V),navigator.xr.isSessionSupported("immersive-ar").then(function(be){P=be,C()}).catch(function(){})):navigator.xr.supportsSession?(navigator.xr.supportsSession("immersive-vr").then(function(){Q=!0,C()}).catch(V),navigator.xr.supportsSession("immersive-ar").then(function(){P=!0,C()}).catch(function(){})):N("WebXR has neither isSessionSupported or supportsSession?!")}else navigator.getVRDisplays&&navigator.getVRDisplays().then(function(be){var Te=document.querySelector("a-scene");B=be.length&&be[0],Te&&Te.emit("displayconnected",{vrDisplay:B})});function z(){return B}M.exports.getVRDisplay=z,M.exports.checkHeadsetConnected=function(){return Q||P||!!z()},M.exports.checkARSupport=function(){return P},M.exports.checkVRSupport=function(){return Q};var H,G,$=(G=!1,H=window.navigator.userAgent||window.navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(H)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(H.substr(0,4)))&&(G=!0),(Z()||k()||ve())&&(G=!0),ue()&&(G=!1),function(){return G});function k(be){var Te=be||window.navigator.userAgent;return/Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(Te)||K()}function K(be,Te,ye){var De=be||window.navigator.userAgent,Ce=Te||window.navigator.platform,Re=ye||window.navigator.maxTouchPoints||0;return(Ce==="iPad"||Ce==="MacIntel")&&Re>0&&/Macintosh|Intel|iPad|ipad/i.test(De)&&!window.MSStream}function Z(){return/iPad|iPhone|iPod/.test(window.navigator.platform)}function ee(){return/(OculusBrowser)/i.test(window.navigator.userAgent)}function he(){return/(Mobile VR)/i.test(window.navigator.userAgent)}function ue(){return ee()||he()}function ve(){return/R7 Build/.test(window.navigator.userAgent)}M.exports.isMobile=$,M.exports.isTablet=k,M.exports.isIpad=K,M.exports.isIOS=Z,M.exports.isMobileDeviceRequestingDesktopSite=function(){return!$()&&!ue()&&window.orientation!==void 0},M.exports.isOculusBrowser=ee,M.exports.isFirefoxReality=he,M.exports.isMobileVR=ue,M.exports.isR7=ve,M.exports.isLandscape=function(){var be=window.orientation;return ve()&&(be+=90),be===90||be===-90},M.exports.isBrowserEnvironment=typeof process>"u"||process.browser===!0,M.exports.isNodeEnvironment=!M.exports.isBrowserEnvironment},126:(M,E,e)=>{var B=e(3836).split;function N(Q,P){var A=B(Q,P=P||".");return A.length===1?A[0]:A}M.exports.getComponentPropertyPath=N,M.exports.getComponentProperty=function(Q,P,A){var C;return A=A||".",P.indexOf(A)!==-1?(C=N(P,A)).constructor===String?Q.getAttribute(C):Q.getAttribute(C[0])[C[1]]:Q.getAttribute(P)},M.exports.setComponentProperty=function(Q,P,A,C){var V;C=C||".",P.indexOf(C)===-1?Q.setAttribute(P,A):(V=N(P,C)).constructor===String?Q.setAttribute(V,A):Q.setAttribute(V[0],V[1],A)}},5607:M=>{M.exports=function(E){var e=E.style.width,B=E.style.height;E.style.width=parseInt(e,10)+1+"px",E.style.height=parseInt(B,10)+1+"px",setTimeout(function(){E.style.width=e,E.style.height=B},200)}},8903:(M,E,e)=>{var B=e(4219),N=e(1900),Q=e(879),P=e(3940),A=B("utils:warn");M.exports.bind=function(H){return H.bind.apply(H,Array.prototype.slice.call(arguments,1))},M.exports.coordinates=e(395),M.exports.debug=B,M.exports.device=Q,M.exports.entity=e(126),M.exports.forceCanvasResizeSafariMobile=e(5607),M.exports.material=e(819),M.exports.objectPool=P,M.exports.split=e(3836).split,M.exports.styleParser=e(2498),M.exports.trackedControls=e(6600),M.exports.checkHeadsetConnected=function(){return A("`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`"),Q.checkHeadsetConnected(arguments)},M.exports.isGearVR=M.exports.device.isGearVR=function(){A("`utils.isGearVR` has been deprecated, use `utils.device.isMobileVR`")},M.exports.isIOS=function(){return A("`utils.isIOS` has moved to `utils.device.isIOS`"),Q.isIOS(arguments)},M.exports.isOculusGo=M.exports.device.isOculusGo=function(){A("`utils.isOculusGo` has been deprecated, use `utils.device.isMobileVR`")},M.exports.isMobile=function(){return A("`utils.isMobile has moved to `utils.device.isMobile`"),Q.isMobile(arguments)},M.exports.throttle=function(H,G,$){var k;return $&&(H=H.bind($)),function(){var K=Date.now();(k===void 0||(k===void 0?G:K-k)>=G)&&(k=K,H.apply(null,arguments))}},M.exports.throttleLeadingAndTrailing=function(H,G,$){var k,K,Z;$&&(H=H.bind($));var ee=function(){k=Date.now(),H.apply(this,Z),K=void 0};return function(){var he=Date.now(),ue=k===void 0?G:he-k;ue>=G?(clearTimeout(K),K=void 0,k=he,H.apply(null,arguments)):(K=K||setTimeout(ee,G-ue),Z=arguments)}},M.exports.throttleTick=function(H,G,$){var k;return $&&(H=H.bind($)),function(K,Z){var ee=k===void 0?Z:K-k;(k===void 0||ee>=G)&&(k=K,H(K,ee))}},M.exports.debounce=function(H,G,$){var k;return function(){var K=this,Z=arguments,ee=$&&!k;clearTimeout(k),k=setTimeout(function(){k=null,$||H.apply(K,Z)},G),ee&&H.apply(K,Z)}},M.exports.extend=Object.assign,M.exports.extendDeep=N,M.exports.clone=function(H){return JSON.parse(JSON.stringify(H))};var C,V,z=(C=P.createPool(function(){return[]}),function(H,G){var $,k,K,Z,ee,he;if(H===void 0||G===void 0||H===null||G===null||!(H&&G&&H.constructor===Object&&G.constructor===Object||H.constructor===Array&&G.constructor===Array))return H===G;for($ in k=C.use(),K=C.use(),k.length=0,K.length=0,H)k.push($);for($ in G)K.push($);if(k.length!==K.length)return C.recycle(k),C.recycle(K),!1;for(Z=0;Z<k.length;++Z)if(ee=H[k[Z]],he=G[k[Z]],typeof ee=="object"||typeof he=="object"||Array.isArray(ee)&&Array.isArray(he)){if(ee===he)continue;if(!z(ee,he))return C.recycle(k),C.recycle(K),!1}else if(ee!==he)return C.recycle(k),C.recycle(K),!1;return C.recycle(k),C.recycle(K),!0});M.exports.deepEqual=z,M.exports.diff=(V=[],function(H,G,$){var k,K,Z,ee,he,ue,ve;for(he in ee=$||{},V.length=0,H)V.push(he);if(!G)return ee;for(Z in G)V.indexOf(Z)===-1&&V.push(Z);for(ue=0;ue<V.length;ue++)k=H[he=V[ue]],K=G[he],((ve=k&&K&&k.constructor===Object&&K.constructor===Object)&&!z(k,K)||!ve&&k!==K)&&(ee[he]=K);return ee}),M.exports.shouldCaptureKeyEvent=function(H){return!H.metaKey&&document.activeElement===document.body},M.exports.splitString=function(H,G){G===void 0&&(G=" ");var $=new RegExp(G,"g");return(H=(H||"").replace($,G)).split(G)},M.exports.getElData=function(H,G){G=G||{};var $={};return Object.keys(G).forEach(function(k){H.hasAttribute(k)&&($[k]=H.getAttribute(k))}),$},M.exports.getUrlParameter=function(H){H=H.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var G=new RegExp("[\\?&]"+H+"=([^&#]*)").exec(location.search);return G===null?"":decodeURIComponent(G[1].replace(/\+/g," "))},M.exports.isIframed=function(){return window.top!==window.self},M.exports.findAllScenes=function(H){for(var G=[],$=H.getElementsByTagName("*"),k=0,K=$.length;k<K;k++)$[k].isScene&&G.push($[k]);return G},M.exports.srcLoader=e(6375)},9609:()=>{window.addEventListener("orientationchange",function(){document.documentElement.style.height="initial",setTimeout(function(){document.documentElement.style.height="100%",setTimeout(function(){window.scrollTo(0,1)},500)},500)})},6818:M=>{M.exports=function(E){return/(iphone|ipod|ipad).*os.(7_|8_|9_)/i.test(E)}},819:(M,E,e)=>{var B=e(2666),N=e(6375),Q=e(4219)("utils:material:warn"),P=new Set(["emissiveMap","envMap","map","specularMap"]);function A(G,$){var k=$.offset||{x:0,y:0},K=$.repeat||{x:1,y:1},Z=$.npot||!1,ee=$.anisotropy||B.Texture.DEFAULT_ANISOTROPY,he=G.wrapS,ue=G.wrapT,ve=G.magFilter,be=G.minFilter;Z&&(he=B.ClampToEdgeWrapping,ue=B.ClampToEdgeWrapping,ve=B.LinearFilter,be=B.LinearFilter),K.x===1&&K.y===1||(he=B.RepeatWrapping,ue=B.RepeatWrapping),G.offset.set(k.x,k.y),G.repeat.set(K.x,K.y),G.wrapS===he&&G.wrapT===ue&&G.magFilter===ve&&G.minFilter===be&&G.anisotropy===ee||(G.wrapS=he,G.wrapT=ue,G.magFilter=ve,G.minFilter=be,G.anisotropy=ee,G.needsUpdate=!0)}M.exports.setTextureProperties=A,M.exports.updateMapMaterialFromData=function(G,$,k,K){var Z=k.el,ee=k.material,he=Z.sceneEl.systems.renderer,ue=K[$];if(k.materialSrcs||(k.materialSrcs={}),!ue)return delete k.materialSrcs[G],void ve(null);function ve(be){ee[G]!==be&&(ee[G]&&ee[G].dispose(),ee[G]=be,ee.needsUpdate=!0,V(Z,be))}ue===k.materialSrcs[G]&&ee[G]?A(ee[G],K):(k.materialSrcs[G]=ue,ue instanceof B.Texture?ve(ue):Z.sceneEl.systems.material.loadTextureSource(ue,function(be){if(k.materialSrcs[G]===ue){var Te=ee[G];!Te||be!==null&&z(Te,be)||(Te=null),!Te&&be&&(Te=H(be)),Te&&(Te.source!==be&&(Te.source=be,Te.needsUpdate=!0),P.has(G)&&he.applyColorCorrection(Te),A(Te,K)),ve(Te)}}))},M.exports.updateMap=function(G,$){return M.exports.updateMapMaterialFromData("map","src",G,$)},M.exports.updateDistortionMap=function(G,$,k){var K=G;G==="ambientOcclusion"&&(K="ao");var Z={};return Z.src=k[G+"Map"],Z.offset=k[G+"TextureOffset"],Z.repeat=k[G+"TextureRepeat"],Z.wrap=k[G+"TextureWrap"],M.exports.updateMapMaterialFromData(K+"Map","src",$,Z)};var C={};function V(G,$){function k(){G.emit("materialvideoloadeddata",{src:$.image,texture:$})}function K(){G.emit("materialvideoended",{src:$.image,texture:$})}$&&(G.emit("materialtextureloaded",{src:$.image,texture:$}),$.image&&$.image.tagName==="VIDEO"&&($.image.addEventListener("loadeddata",k),$.image.addEventListener("ended",K),$.addEventListener("dispose",function(){$.image.removeEventListener("loadeddata",k),$.image.removeEventListener("ended",K)})))}function z(G,$){return $.data instanceof HTMLCanvasElement?G.isCanvasTexture:$.data instanceof HTMLVideoElement?G.isVideoTexture&&G.source===$:G.isTexture&&!G.isCanvasTexture&&!G.isVideoTexture}function H(G){var $;return($=G.data instanceof HTMLCanvasElement?new B.CanvasTexture:G.data instanceof HTMLVideoElement?new B.VideoTexture(G.data):new B.Texture).source=G,$.needsUpdate=!0,$}M.exports.updateEnvMap=function(G,$){var k=G.material,K=G.el,Z="envMap",ee=$.envMap,he=$.sphericalEnvMap,ue=$.refract;if(he&&(ee=he,Q("`sphericalEnvMap` property is deprecated, using spherical map as equirectangular map instead. Use `envMap` property with a CubeMap or Equirectangular image instead.")),G.materialSrcs||(G.materialSrcs={}),!ee)return delete G.materialSrcs[Z],k.envMap=null,void(k.needsUpdate=!0);function ve(be){G.materialSrcs[Z]===ee&&(k.envMap=be,k.needsUpdate=!0,V(K,be))}G.materialSrcs[Z]=ee,C[ee]?C[ee].then(ve):C[ee]=new Promise(function(be){N.validateEnvMapSrc(ee,function(Te){K.sceneEl.systems.material.loadCubeMapTexture(Te,function(ye){ye.mapping=ue?B.CubeRefractionMapping:B.CubeReflectionMapping,ve(ye),be(ye)})},function(Te){K.sceneEl.systems.material.loadTexture(Te,{src:Te},function(ye){ye.mapping=ue?B.EquirectangularRefractionMapping:B.EquirectangularReflectionMapping,ve(ye),be(ye)})})})},M.exports.handleTextureEvents=V,M.exports.isCompatibleTexture=z,M.exports.createCompatibleTexture=H},3437:M=>{function E(e,B,N){return(B.dot(e)-B.dot(N))/B.length()}M.exports.distanceOfPointFromPlane=E,M.exports.nearestPointInPlane=function(e,B,N,Q){var P=E(e,B,N);return Q.copy(B),Q.multiplyScalar(P),Q.add(N),Q}},3940:M=>{var E=Object.freeze(Object.create(null));function e(){return{}}function B(N){var Q;if(N&&N.constructor===Object)for(Q in N)N[Q]=void 0}M.exports.createPool=function(N){var Q=[],P=null;function A(C){var V,z;if((C=C===void 0?Q.length:C)>0&&P==null&&(P=0),C>0)for(V=Q.length,Q.length+=Number(C),z=V;z<Q.length;z++)Q[z]=N();return Q.length}return N=N||e,{grow:A,pool:Q,recycle:function(C){C instanceof Object&&(P!==null&&P!==-1?Q[--P]=C:Q[Q.length]=C)},size:function(){return Q.length},use:function(){var C;return P!==null&&P!==Q.length||A(Q.length||5),C=Q[P],Q[P++]=E,B(C),C}}},M.exports.clearObject=B,M.exports.removeUnusedKeys=function(N,Q){var P;if(N&&N.constructor===Object)for(P in N)P in Q||delete N[P]}},3836:M=>{var E;M.exports.split=(E={},function(e,B){return B in E||(E[B]={}),e in E[B]||(E[B][e]=e.split(B)),E[B][e]})},6375:(M,E,e)=>{var B=e(4219)("utils:src-loader:warn");function N(C,V,z){(function(H,G){var $;H.tagName?G(H.tagName==="IMG"):(($=new XMLHttpRequest).open("HEAD",H),$.addEventListener("load",function(k){var K;$.status>=200&&$.status<300?(K=$.getResponseHeader("Content-Type"))==null?A(H,G):K.startsWith("image")?G(!0):G(!1):A(H,G),$.abort()}),$.send())})(C,function(H){H?V(C):z(C)})}function Q(C,V,z){var H,G,$,k="",K=[];if(typeof C=="string"){let ee=function(he){K.push(he),K.length===6&&V(K)};var Z=ee;for(G=0;G<5;G++)k+="(url\\((?:[^\\)]+)\\),\\s*)";if(k+="(url\\((?:[^\\)]+)\\)\\s*)",$=C.match(new RegExp(k))){for(G=1;G<7;G++)N(P($[G]),ee);return}if(!C.startsWith("#"))return void N(P(C)||C,z)}if(H=C.tagName?C:function(ee){try{var he=document.querySelector(ee);return he||B('No element was found matching the selector: "%s"',ee),he}catch{return void B('"%s" is not a valid selector',ee)}}(C))return H.tagName==="A-CUBEMAP"&&H.srcs?V(H.srcs):H.tagName==="IMG"?z(H):void B('Selector "%s" does not point to <a-cubemap> or <img>',C)}function P(C){var V=C.match(/url\((.+)\)/);if(V)return V[1]}function A(C,V){var z=new Image;z.addEventListener("load",function(){V(!0)}),z.addEventListener("error",function(){V(!1)}),z.src=C}M.exports={parseUrl:P,validateSrc:N,validateCubemapSrc:function(C,V){return Q(C,V,function(){B("Expected cubemap but got image")})},validateEnvMapSrc:Q}},2498:M=>{var E=/-([a-z])/g;function e(A){return A.replace(E,P)}M.exports.parse=function(A,C){var V;return typeof A!="string"?A:(V=function(z,H){var G,$,k,K,Z,ee;for(H=H||{},G=Q(z),$=0;$<G.length;$++)(k=G[$])&&(K=k.indexOf(":"),Z=k.substr(0,K).trim(),ee=k.substr(K+1).trim(),H[e(Z)]=ee);return H}(A,C),V[""]?A:V)},M.exports.stringify=function(A){return typeof A=="string"?A:function(C){var V,z=0,H=0,G="";for(V in C)z++;for(V in C)G+=V+": "+C[V],H<z-1&&(G+="; "),H++;return G}(A)},M.exports.toCamelCase=e;var B,N,Q=(B=[],N=/url\([^)]+$/,function(A){var C,V="",z=0;for(B.length=0;z<A.length;)(C=A.indexOf(";",z))===-1&&(C=A.length),V+=A.substring(z,C),N.test(V)?(V+=";",z=C+1):(B.push(V.trim()),V="",z=C+1);return B});function P(A){return A[1].toUpperCase()}},6600:(M,E,e)=>{var B=e(8309).DEFAULT_HANDEDNESS,N=["x","y","z","w"],Q=2;function P(z,H,G){var $,k,K=z.el.sceneEl,Z=G.index||0;return!!(H&&(k=K&&K.systems["tracked-controls-webvr"])&&($=k.controllers).length&&C($,null,H,G.hand,Z))}function A(z,H,G){var $,k=z.el.sceneEl,K=k&&k.systems["tracked-controls-webxr"];return!!K&&!(!($=K.controllers)||!$.length)&&V($,H,G.hand,G.index,G.iterateControllerProfiles,G.handTracking)}function C(z,H,G,$,k){var K,Z,ee=0;for(Z=0;Z<z.length;Z++)if(K=z[Z],(!G||K.id.startsWith(G))&&(G||K.id===H)&&(!$||!K.hand||$===K.hand)){if(!$||K.hand||ee===Q*k+($===B?0:1))return K;++ee}}function V(z,H,G,$,k,K){var Z,ee,he,ue,ve=!1;for(Z=0;Z<z.length;Z++){if(ue=(he=z[Z]).profiles,K)ve=he.hand;else if(k)for(ee=0;ee<ue.length&&!(ve=ue[ee].startsWith(H));ee++);else ve=ue.length>0&&ue[0].startsWith(H);if(ve){if(he.handedness==="right"||he.handedness==="left"){if(he.handedness===G)return z[Z]}else if(Z===$)return z[Z]}}}M.exports.checkControllerPresentAndSetup=function(z,H,G){var $,k,K=z.el,Z=K.sceneEl.hasWebXR;if(k=!!($=(Z?A:P)(z,H,G)),!z.controllerPresent||z.controllerEventsActive||Z||z.addEventListeners(),k===z.controllerPresent)return k;z.controllerPresent=k,k?(z.addEventListeners(),z.injectTrackedControls($),K.emit("controllerconnected",{name:z.name,component:z})):(z.removeEventListeners(),K.emit("controllerdisconnected",{name:z.name,component:z}))},M.exports.isControllerPresentWebVR=P,M.exports.isControllerPresentWebXR=A,M.exports.findMatchingControllerWebVR=C,M.exports.findMatchingControllerWebXR=V,M.exports.emitIfAxesChanged=function(z,H,G){var $,k,K,Z,ee;for(k in H){for($=H[k],K=!1,ee=0;ee<$.length;ee++)G.detail.changed[$[ee]]&&(K=!0);if(K){for(Z={},ee=0;ee<$.length;ee++)Z[N[ee]]=G.detail.axis[$[ee]];z.el.emit(k+"moved",Z)}}},M.exports.onButtonEvent=function(z,H,G,$){var k=($?G.mapping[$]:G.mapping).buttons[z];G.el.emit(k+H),G.updateModel&&G.updateModel(k,H)}},6898:()=>{THREE.DeviceOrientationControls=function(M){var E=this;this.object=M,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var e,B,N,Q,P=function(V){E.deviceOrientation=V},A=function(){E.screenOrientation=window.orientation||0},C=(e=new THREE.Vector3(0,0,1),B=new THREE.Euler,N=new THREE.Quaternion,Q=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5)),function(V,z,H,G,$){B.set(H,z,-G,"YXZ"),V.setFromEuler(B),V.multiply(Q),V.multiply(N.setFromAxisAngle(e,-$))});this.connect=function(){A(),window.addEventListener("orientationchange",A,!1),window.addEventListener("deviceorientation",P,!1),E.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",A,!1),window.removeEventListener("deviceorientation",P,!1),E.enabled=!1},this.update=function(){if(E.enabled!==!1){var V=E.deviceOrientation;if(V){var z=V.alpha?THREE.MathUtils.degToRad(V.alpha)+E.alphaOffset:0,H=V.beta?THREE.MathUtils.degToRad(V.beta):0,G=V.gamma?THREE.MathUtils.degToRad(V.gamma):0,$=E.screenOrientation?THREE.MathUtils.degToRad(E.screenOrientation):0;C(E.object.quaternion,z,H,G,$)}}},this.dispose=function(){E.disconnect()},this.connect()}},9625:M=>{window.glStats=function(){var E=null,e=0,B=0,N=0,Q=0,P=0,A=0,C=0;function V(z,H){return function(){H.apply(this,arguments),z.apply(this,arguments)}}return WebGLRenderingContext.prototype.drawArrays=V(WebGLRenderingContext.prototype.drawArrays,function(){e++,arguments[0]==this.POINTS?A+=arguments[2]:P+=arguments[2]}),WebGLRenderingContext.prototype.drawElements=V(WebGLRenderingContext.prototype.drawElements,function(){B++,Q+=arguments[1]/3,P+=arguments[1]}),WebGLRenderingContext.prototype.useProgram=V(WebGLRenderingContext.prototype.useProgram,function(){N++}),WebGLRenderingContext.prototype.bindTexture=V(WebGLRenderingContext.prototype.bindTexture,function(){C++}),{update:function(){E("allcalls").set(e+B),E("drawElements").set(B),E("drawArrays").set(e),E("bindTexture").set(C),E("useProgram").set(N),E("glfaces").set(Q),E("glvertices").set(P),E("glpoints").set(A)},start:function(){e=0,B=0,N=0,Q=0,P=0,A=0,C=0},end:function(){},attach:function(z){E=z},values:{allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},groups:[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],fractions:[{base:"allcalls",steps:["drawelements","drawarrays"]}]}},window.threeStats=function(E){var e=null;return{update:function(){e("renderer.info.memory.geometries").set(E.info.memory.geometries),e("renderer.info.programs").set(E.info.programs.length),e("renderer.info.memory.textures").set(E.info.memory.textures),e("renderer.info.render.calls").set(E.info.render.calls),e("renderer.info.render.triangles").set(E.info.render.triangles),e("renderer.info.render.points").set(E.info.render.points)},start:function(){},end:function(){},attach:function(B){e=B},values:{"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.triangles":{caption:"Triangles",over:1e3},"renderer.info.render.points":{caption:"Points"}},groups:[{caption:"Three.js - Memory",values:["renderer.info.memory.geometries","renderer.info.programs","renderer.info.memory.textures"]},{caption:"Three.js - Render",values:["renderer.info.render.calls","renderer.info.render.triangles","renderer.info.render.points"]}],fractions:[]}},window.BrowserStats=function(){var E=null,e=0,B=0;window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),performance.memory.totalJSHeapSize===0&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var N=Math.log(1024);function Q(P){var A=Math.floor(Math.log(P)/N);return Math.round(100*P/Math.pow(1024,A))/100}return{update:function(){e=Q(performance.memory.usedJSHeapSize),B=Q(performance.memory.totalJSHeapSize),E("memory").set(e),E("total").set(B)},start:function(){e=0},end:function(){},attach:function(P){E=P},values:{memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},groups:[{caption:"Browser",values:["memory","total"]}],fractions:[{base:"total",steps:["memory"]}]}},M.exports={glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats}},1326:M=>{"use strict";(function(){"performance"in window==0&&(window.performance={});var E=window.performance;if("now"in E==0){var e=Date.now();E.timing&&E.timing.navigationStart&&(e=E.timing.navigationStart),E.now=function(){return Date.now()-e}}E.mark||(E.mark=function(){}),E.measure||(E.measure=function(){})})(),window.rStats=function(E){function e(Z,ee){for(var he=Object.keys(Z),ue=0,ve=he.length;ue<ve;ue++)ee(he[ue])}var B=E||{},N=B.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],Q=(B.CSSPath?B.CSSPath:"")+"rStats.css";(B.css||["https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",Q]).forEach(function(Z){var ee,he;ee=Z,(he=document.createElement("link")).href=ee,he.rel="stylesheet",he.type="text/css",document.getElementsByTagName("head")[0].appendChild(he)}),B.values||(B.values={});var P,A,C=10,V=200,z={};function H(Z,ee,he){var ue=he||{},ve=document.createElement("canvas"),be=ve.getContext("2d"),Te=0,ye=0,De=ue.color?ue.color:"#666666",Ce=document.createElement("canvas"),Re=Ce.getContext("2d");Ce.width=1,Ce.height=2*C,Re.fillStyle="#444444",Re.fillRect(0,0,1,2*C),Re.fillStyle=De,Re.fillRect(0,C,1,C),Re.fillStyle="#ffffff",Re.globalAlpha=.5,Re.fillRect(0,C,1,1),Re.globalAlpha=1;var Qe=document.createElement("canvas"),ot=Qe.getContext("2d");return Qe.width=1,Qe.height=2*C,ot.fillStyle="#444444",ot.fillRect(0,0,1,2*C),ot.fillStyle="#b70000",ot.fillRect(0,C,1,C),ot.globalAlpha=.5,ot.fillStyle="#ffffff",ot.fillRect(0,C,1,1),ot.globalAlpha=1,ve.width=V,ve.height=C,ve.style.width=ve.width+"px",ve.style.height=ve.height+"px",ve.className="rs-canvas",Z.appendChild(ve),be.fillStyle="#444444",be.fillRect(0,0,ve.width,ve.height),{draw:function(Je,Mt){(ye+=.1*(Je-ye))>(Te*=.99)&&(Te=ye),be.drawImage(ve,1,0,ve.width-1,ve.height,0,0,ve.width-1,ve.height),Mt?be.drawImage(Qe,ve.width-1,ve.height-ye*ve.height/Te-C):be.drawImage(Ce,ve.width-1,ve.height-ye*ve.height/Te-C)}}}function G(Z,ee){var he=document.createElement("canvas"),ue=he.getContext("2d");return he.width=V,he.height=C*ee,he.style.width=he.width+"px",he.style.height=he.height+"px",he.className="rs-canvas",Z.appendChild(he),ue.fillStyle="#444444",ue.fillRect(0,0,he.width,he.height),{draw:function(ve){ue.drawImage(he,1,0,he.width-1,he.height,0,0,he.width-1,he.height);var be=0;e(ve,function(Te){var ye=ve[Te]*he.height;ue.fillStyle=N[Te],ue.fillRect(he.width-1,be,1,ye),be+=ye})}}}function $(Z,ee){var he,ue=Z,ve=0,be=0,Te=0,ye=0,De=performance.now(),Ce=0,Re=document.createElement("div"),Qe=document.createElement("span"),ot=document.createElement("div"),Je=document.createTextNode(""),Mt=B?B.values[ue.toLowerCase()]:null,Zt=new H(Re,ue,Mt),kt=!1;function si(er){if(Mt&&Mt.average){ye+=er,Ce++;var Ki=performance.now();Ki-De>=(Mt.avgMs||1e3)&&(Te=ye/Ce,ye=0,De=Ki,Ce=0)}}function _i(){he=performance.now(),B.userTimingAPI&&performance.mark(ue+"-start"),kt=!0}function Ri(){ve=performance.now()-he,B.userTimingAPI&&(performance.mark(ue+"-end"),kt&&performance.measure(ue,ue+"-start",ue+"-end")),si(ve)}return Qe.className="rs-counter-id",Qe.textContent=Mt&&Mt.caption?Mt.caption:ue,ot.className="rs-counter-value",ot.appendChild(Je),Re.appendChild(Qe),Re.appendChild(ot),ee?ee.div.appendChild(Re):A.appendChild(Re),he=performance.now(),{set:function(er){si(ve=er)},start:_i,tick:function(){Ri(),_i()},end:Ri,frame:function(){var er=performance.now(),Ki=er-he;be++,Ki>1e3&&(ve=Mt&&Mt.interpolate===!1?be:1e3*be/Ki,be=0,he=er,si(ve))},value:function(){return ve},draw:function(){var er=Mt&&Mt.average?Te:ve;Je.nodeValue=Math.round(100*er)/100;var Ki=Mt&&(Mt.below&&ve<Mt.below||Mt.over&&ve>Mt.over);Zt.draw(ve,Ki),Re.className=Ki?"rs-counter-base alarm":"rs-counter-base"}}}function k(Z){var ee=Z.toLowerCase();if(ee===void 0&&(ee="default"),z[ee])return z[ee];var he=null;B&&B.groups&&e(B.groups,function(ve){var be=B.groups[parseInt(ve,10)];he||be.values.indexOf(ee.toLowerCase())===-1||(he=be)});var ue=new $(ee,he);return z[ee]=ue,ue}function K(){e(B.plugins,function(Z){B.plugins[Z].update()}),e(z,function(Z){z[Z].draw()}),B&&B.fractions&&e(B.fractions,function(Z){var ee=B.fractions[parseInt(Z,10)],he=[],ue=z[ee.base.toLowerCase()];ue&&(ue=ue.value(),e(B.fractions[Z].steps,function(ve){var be=B.fractions[Z].steps[parseInt(ve,10)].toLowerCase(),Te=z[be];Te&&he.push(Te.value()/ue)})),ee.graph.draw(he)})}return function(){if(B.plugins){B.values||(B.values={}),B.groups||(B.groups=[]),B.fractions||(B.fractions=[]);for(var Z=0;Z<B.plugins.length;Z++)B.plugins[Z].attach(k),e(B.plugins[Z].values,function(ee){B.values[ee]=B.plugins[Z].values[ee]}),B.groups=B.groups.concat(B.plugins[Z].groups),B.fractions=B.fractions.concat(B.plugins[Z].fractions)}else B.plugins={};(P=document.createElement("div")).className="rs-base",(A=document.createElement("div")).className="rs-container",A.style.height="auto",P.appendChild(A),document.body.appendChild(P),B&&(B.groups&&e(B.groups,function(ee){var he=B.groups[parseInt(ee,10)],ue=document.createElement("div");ue.className="rs-group",he.div=ue;var ve=document.createElement("h1");ve.textContent=he.caption,ve.addEventListener("click",function(be){this.classList.toggle("hidden"),be.preventDefault()}.bind(ue)),A.appendChild(ve),A.appendChild(ue)}),B.fractions&&e(B.fractions,function(ee){var he=B.fractions[parseInt(ee,10)],ue=document.createElement("div");ue.className="rs-fraction";var ve=document.createElement("div");ve.className="rs-legend";var be=0;e(B.fractions[ee].steps,function(ye){var De=document.createElement("p");De.textContent=B.fractions[ee].steps[ye],De.style.color=N[be],ve.appendChild(De),be++}),ue.appendChild(ve),ue.style.height=be*C+"px",he.div=ue;var Te=new G(ue,be);he.graph=Te,A.appendChild(ue)}))}(),function(Z){return Z?k(Z):{element:P,update:K}}},M.exports=window.rStats},1347:M=>{var E={base64:function(e,B){return"data:"+e+";base64,"+B},isMobile:function(){var e,B=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(B=!0),B},isIOS:function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},isIFrame:function(){try{return window.self!==window.top}catch{return!0}},appendQueryParameter:function(e,B,N){var Q=e.indexOf("?")<0?"?":"&";return e+(Q+B+"=")+N},getQueryParameter:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var B=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return B===null?"":decodeURIComponent(B[1].replace(/\+/g," "))},isLandscapeMode:function(){return window.orientation==90||window.orientation==-90}};M.exports=E},4630:(M,E,e)=>{var B,N=e(1347);M.exports=(B=navigator.userAgent||navigator.vendor||window.opera).match(/iPhone/i)||B.match(/iPod/i)?function(){var Q=null;this.request=function(){Q||(Q=setInterval(function(){window.location.href="/",setTimeout(window.stop,0)},15e3))},this.release=function(){Q&&(clearInterval(Q),Q=null)}}:function(){var Q=document.createElement("video");Q.addEventListener("ended",function(){Q.play()}),this.request=function(){Q.paused&&(Q.src=N.base64("video/webm","GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw=="),Q.play())},this.release=function(){Q.pause(),Q.src=""}}},1248:(M,E,e)=>{"use strict";e.d(E,{Z:()=>ve});var B=e(4216),N=e.n(B),Q=e(7705),P=e.n(Q),A=e(6742),C=e.n(A),V=new URL(e(3646),e.b),z=new URL(e(7513),e.b),H=new URL(e(5059),e.b),G=new URL(e(576),e.b),$=new URL(e(5581),e.b),k=P()(N()),K=C()(V),Z=C()(z),ee=C()(H),he=C()(G),ue=C()($);k.push([M.id,`/* .a-fullscreen means not embedded. */
html.a-fullscreen {
  bottom: 0;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
}

html.a-fullscreen body {
  height: 100%;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100%;
}

/* Class is removed when doing <a-scene embedded>. */
html.a-fullscreen .a-canvas {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
}

html:not(.a-fullscreen) .a-enter-vr,
html:not(.a-fullscreen) .a-enter-ar {
  right: 5px;
  bottom: 5px;
}

html:not(.a-fullscreen) .a-enter-ar {
  right: 60px;
}

/* In chrome mobile the user agent stylesheet set it to white  */
:-webkit-full-screen {
  background-color: transparent;
}

.a-hidden {
  display: none !important;
}

.a-canvas {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.a-canvas.a-grab-cursor:hover {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

canvas.a-canvas.a-mouse-cursor-hover:hover {
  cursor: pointer;
}

.a-inspector-loader {
  background-color: #ed3160;
  position: fixed;
  left: 3px;
  top: 3px;
  padding: 6px 10px;
  color: #fff;
  text-decoration: none;
  font-size: 12px;
  font-family: Roboto,sans-serif;
  text-align: center;
  z-index: 99999;
  width: 204px;
}

/* Inspector loader animation */
@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

.a-inspector-loader .dots span {
  animation: dots-1 2s infinite steps(1);
  -webkit-animation: dots-1 2s infinite steps(1);
}

.a-inspector-loader .dots span:first-child + span {
  animation-name: dots-2;
  -webkit-animation-name: dots-2;
}

.a-inspector-loader .dots span:first-child + span + span {
  animation-name: dots-3;
  -webkit-animation-name: dots-3;
}

a-scene {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
}

a-assets,
a-scene video,
a-scene img,
a-scene audio {
  display: none;
}

.a-enter-vr-modal,
.a-orientation-modal {
  font-family: Consolas, Andale Mono, Courier New, monospace;
}

.a-enter-vr-modal a {
  border-bottom: 1px solid #fff;
  padding: 2px 0;
  text-decoration: none;
  transition: .1s color ease-in;
}

.a-enter-vr-modal a:hover {
  background-color: #fff;
  color: #111;
  padding: 2px 4px;
  position: relative;
  left: -4px;
}

.a-enter-vr,
.a-enter-ar {
  font-family: sans-serif, monospace;
  font-size: 13px;
  width: 100%;
  font-weight: 200;
  line-height: 16px;
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.a-enter-ar.xr {
  right: 90px;
}

.a-enter-vr-button,
.a-enter-vr-modal,
.a-enter-vr-modal a {
  color: #fff;
  user-select: none;
  outline: none;
}

.a-enter-vr-button {
  background: rgba(0, 0, 0, 0.35) url(`+K+`) 50% 50% no-repeat;
}

.a-enter-ar-button {
  background: rgba(0, 0, 0, 0.20) url(`+Z+`) 50% 50% no-repeat;
}

.a-enter-vr.fullscreen .a-enter-vr-button {
  background-image: url(`+ee+`);
}

.a-enter-vr-button,
.a-enter-ar-button {
  background-size: 90% 90%;
  border: 0;
  bottom: 0;
  cursor: pointer;
  min-width: 58px;
  min-height: 34px;
  /* 1.74418604651 */
  /*
    In order to keep the aspect ratio when resizing
    padding-top percentages are relative to the containing block's width.
    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio
  */
  padding-right: 0;
  padding-top: 0;
  position: absolute;
  right: 0;
  transition: background-color .05s ease;
  -webkit-transition: background-color .05s ease;
  z-index: 9999;
  border-radius: 8px;
  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */
}

.a-enter-ar-button {
  background-size: 100% 90%;
  border-radius: 7px;
}

.a-enter-ar-button:active,
.a-enter-ar-button:hover,
.a-enter-vr-button:active,
.a-enter-vr-button:hover {
  background-color: #ef2d5e;
}

.a-enter-vr-button.resethover {
  background-color: rgba(0, 0, 0, 0.35);
}

.a-enter-vr-modal {
  background-color: #666;
  border-radius: 0;
  display: none;
  min-height: 32px;
  margin-right: 70px;
  padding: 9px;
  width: 280px;
  right: 2%;
  position: absolute;
}

.a-enter-vr-modal:after {
  border-bottom: 10px solid transparent;
  border-left: 10px solid #666;
  border-top: 10px solid transparent;
  display: inline-block;
  content: '';
  position: absolute;
  right: -5px;
  top: 5px;
  width: 0;
  height: 0;
}

.a-enter-vr-modal p,
.a-enter-vr-modal a {
  display: inline;
}

.a-enter-vr-modal p {
  margin: 0;
}

.a-enter-vr-modal p:after {
  content: ' ';
}

.a-orientation-modal {
  background: rgba(244, 244, 244, 1) url(`+he+`) center no-repeat;
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-orientation-modal:after {
  color: #666;
  content: "Insert phone into Cardboard holder.";
  display: block;
  position: absolute;
  text-align: center;
  top: 70%;
  transform: translateY(-70%);
  width: 100%;
}

.a-orientation-modal button {
  background: url(`+ue+`) no-repeat;
  border: none;
  height: 50px;
  text-indent: -9999px;
  width: 50px;
}

.a-loader-title {
  background-color: rgba(0, 0, 0, 0.6);
  font-family: sans-serif, monospace;
  text-align: center;
  font-size: 20px;
  height: 50px;
  font-weight: 300;
  line-height: 50px;
  position: absolute;
  right: 0px;
  left: 0px;
  top: 0px;
  color: white;
}

.a-modal {
  position: absolute;
  background: rgba(0, 0, 0, 0.60);
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-dialog {
  position: relative;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 199995;
  width: 300px;
  height: 200px;
  background-size: contain;
  background-color: white;
  font-family: sans-serif, monospace;
  font-size: 20px;
  border-radius: 3px;
  padding: 6px;
}

.a-dialog-text-container {
  width: 100%;
  height: 70%;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  align-content: center;
  flex-direction: column;
}

.a-dialog-text {
  display: inline-block;
  font-weight: normal;
  font-size: 14pt;
  margin: 8px;
}

.a-dialog-buttons-container {
  display: inline-flex;
  align-self: flex-end;
  width: 100%;
  height: 30%;
}

.a-dialog-button {
  cursor: pointer;
  align-self: center;
  opacity: 0.9;
  height: 80%;
  width: 50%;
  font-size: 12pt;
  margin: 4px;
  border-radius: 2px;
  text-align:center;
  border: none;
  display: inline-block;
  -webkit-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);
  user-select: none;
}

.a-dialog-permission-button:hover {
  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);
}

.a-dialog-allow-button {
  background-color: #00ceff;
}

.a-dialog-deny-button {
  background-color: #ff005b;
}

.a-dialog-ok-button {
  background-color: #00ceff;
  width: 100%;
}

.a-dom-overlay:not(.a-no-style) {
  overflow: hidden;
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  padding: 1em;
}

.a-dom-overlay:not(.a-no-style)>* {
  pointer-events: auto;
}
`,"",{version:3,sources:["webpack://./src/style/aframe.css"],names:[],mappings:"AAAA,sCAAsC;AACtC;EACE,SAAS;EACT,OAAO;EACP,eAAe;EACf,QAAQ;EACR,MAAM;AACR;;AAEA;EACE,YAAY;EACZ,SAAS;EACT,gBAAgB;EAChB,UAAU;EACV,WAAW;AACb;;AAEA,oDAAoD;AACpD;EACE,sBAAsB;EACtB,uBAAuB;EACvB,iBAAiB;EACjB,kBAAkB;EAClB,mBAAmB;EACnB,oBAAoB;EACpB,0BAA0B;AAC5B;;AAEA;;EAEE,UAAU;EACV,WAAW;AACb;;AAEA;EACE,WAAW;AACb;;AAEA,gEAAgE;AAChE;EACE,6BAA6B;AAC/B;;AAEA;EACE,wBAAwB;AAC1B;;AAEA;EACE,YAAY;EACZ,OAAO;EACP,kBAAkB;EAClB,MAAM;EACN,WAAW;AACb;;AAEA;EACE,YAAY;EACZ,iBAAiB;EACjB,oBAAoB;AACtB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,yBAAyB;EACzB,eAAe;EACf,SAAS;EACT,QAAQ;EACR,iBAAiB;EACjB,WAAW;EACX,qBAAqB;EACrB,eAAe;EACf,8BAA8B;EAC9B,kBAAkB;EAClB,cAAc;EACd,YAAY;AACd;;AAEA,+BAA+B;AAC/B,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AACrE,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AACrE,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;;AAErE;EACE,sCAAsC;EACtC,8CAA8C;AAChD;;AAEA;EACE,sBAAsB;EACtB,8BAA8B;AAChC;;AAEA;EACE,sBAAsB;EACtB,8BAA8B;AAChC;;AAEA;EACE,cAAc;EACd,kBAAkB;EAClB,YAAY;EACZ,WAAW;AACb;;AAEA;;;;EAIE,aAAa;AACf;;AAEA;;EAEE,0DAA0D;AAC5D;;AAEA;EACE,6BAA6B;EAC7B,cAAc;EACd,qBAAqB;EACrB,6BAA6B;AAC/B;;AAEA;EACE,sBAAsB;EACtB,WAAW;EACX,gBAAgB;EAChB,kBAAkB;EAClB,UAAU;AACZ;;AAEA;;EAEE,kCAAkC;EAClC,eAAe;EACf,WAAW;EACX,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;EAClB,WAAW;EACX,YAAY;AACd;;AAEA;EACE,WAAW;AACb;;AAEA;;;EAGE,WAAW;EACX,iBAAiB;EACjB,aAAa;AACf;;AAEA;EACE,yFAA4qB;AAC9qB;;AAEA;EACE,yFAAkzB;AACpzB;;AAEA;EACE,yDAA2qK;AAC7qK;;AAEA;;EAEE,wBAAwB;EACxB,SAAS;EACT,SAAS;EACT,eAAe;EACf,eAAe;EACf,gBAAgB;EAChB,kBAAkB;EAClB;;;;GAIC;EACD,gBAAgB;EAChB,cAAc;EACd,kBAAkB;EAClB,QAAQ;EACR,sCAAsC;EACtC,8CAA8C;EAC9C,aAAa;EACb,kBAAkB;EAClB,0BAA0B,EAAE,8CAA8C;AAC5E;;AAEA;EACE,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;;;;EAIE,yBAAyB;AAC3B;;AAEA;EACE,qCAAqC;AACvC;;AAEA;EACE,sBAAsB;EACtB,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,kBAAkB;EAClB,YAAY;EACZ,YAAY;EACZ,SAAS;EACT,kBAAkB;AACpB;;AAEA;EACE,qCAAqC;EACrC,4BAA4B;EAC5B,kCAAkC;EAClC,qBAAqB;EACrB,WAAW;EACX,kBAAkB;EAClB,WAAW;EACX,QAAQ;EACR,QAAQ;EACR,SAAS;AACX;;AAEA;;EAEE,eAAe;AACjB;;AAEA;EACE,SAAS;AACX;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,2FAAivF;EACjvF,wBAAwB;EACxB,SAAS;EACT,eAAe;EACf,gBAAgB;EAChB,OAAO;EACP,iBAAiB;EACjB,QAAQ;EACR,eAAe;EACf,MAAM;EACN,gBAAgB;AAClB;;AAEA;EACE,WAAW;EACX,8CAA8C;EAC9C,cAAc;EACd,kBAAkB;EAClB,kBAAkB;EAClB,QAAQ;EACR,2BAA2B;EAC3B,WAAW;AACb;;AAEA;EACE,6DAA25B;EAC35B,YAAY;EACZ,YAAY;EACZ,oBAAoB;EACpB,WAAW;AACb;;AAEA;EACE,oCAAoC;EACpC,kCAAkC;EAClC,kBAAkB;EAClB,eAAe;EACf,YAAY;EACZ,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;EAClB,UAAU;EACV,SAAS;EACT,QAAQ;EACR,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,+BAA+B;EAC/B,wBAAwB;EACxB,SAAS;EACT,eAAe;EACf,gBAAgB;EAChB,OAAO;EACP,iBAAiB;EACjB,QAAQ;EACR,eAAe;EACf,MAAM;EACN,gBAAgB;AAClB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,QAAQ;EACR,gCAAgC;EAChC,eAAe;EACf,YAAY;EACZ,aAAa;EACb,wBAAwB;EACxB,uBAAuB;EACvB,kCAAkC;EAClC,eAAe;EACf,kBAAkB;EAClB,YAAY;AACd;;AAEA;EACE,WAAW;EACX,WAAW;EACX,sBAAsB;EACtB,aAAa;EACb,uBAAuB;EACvB,qBAAqB;EACrB,sBAAsB;AACxB;;AAEA;EACE,qBAAqB;EACrB,mBAAmB;EACnB,eAAe;EACf,WAAW;AACb;;AAEA;EACE,oBAAoB;EACpB,oBAAoB;EACpB,WAAW;EACX,WAAW;AACb;;AAEA;EACE,eAAe;EACf,kBAAkB;EAClB,YAAY;EACZ,WAAW;EACX,UAAU;EACV,eAAe;EACf,WAAW;EACX,kBAAkB;EAClB,iBAAiB;EACjB,YAAY;EACZ,qBAAqB;EACrB,yCAAyC;EACzC,iCAAiC;EACjC,wEAAwE;EACxE,iBAAiB;AACnB;;AAEA;EACE,mEAAmE;AACrE;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;EACzB,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,kBAAkB;EAClB,oBAAoB;EACpB,sBAAsB;EACtB,SAAS;EACT,OAAO;EACP,QAAQ;EACR,MAAM;EACN,YAAY;AACd;;AAEA;EACE,oBAAoB;AACtB",sourcesContent:[`/* .a-fullscreen means not embedded. */
html.a-fullscreen {
  bottom: 0;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
}

html.a-fullscreen body {
  height: 100%;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100%;
}

/* Class is removed when doing <a-scene embedded>. */
html.a-fullscreen .a-canvas {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
}

html:not(.a-fullscreen) .a-enter-vr,
html:not(.a-fullscreen) .a-enter-ar {
  right: 5px;
  bottom: 5px;
}

html:not(.a-fullscreen) .a-enter-ar {
  right: 60px;
}

/* In chrome mobile the user agent stylesheet set it to white  */
:-webkit-full-screen {
  background-color: transparent;
}

.a-hidden {
  display: none !important;
}

.a-canvas {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.a-canvas.a-grab-cursor:hover {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

canvas.a-canvas.a-mouse-cursor-hover:hover {
  cursor: pointer;
}

.a-inspector-loader {
  background-color: #ed3160;
  position: fixed;
  left: 3px;
  top: 3px;
  padding: 6px 10px;
  color: #fff;
  text-decoration: none;
  font-size: 12px;
  font-family: Roboto,sans-serif;
  text-align: center;
  z-index: 99999;
  width: 204px;
}

/* Inspector loader animation */
@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

.a-inspector-loader .dots span {
  animation: dots-1 2s infinite steps(1);
  -webkit-animation: dots-1 2s infinite steps(1);
}

.a-inspector-loader .dots span:first-child + span {
  animation-name: dots-2;
  -webkit-animation-name: dots-2;
}

.a-inspector-loader .dots span:first-child + span + span {
  animation-name: dots-3;
  -webkit-animation-name: dots-3;
}

a-scene {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
}

a-assets,
a-scene video,
a-scene img,
a-scene audio {
  display: none;
}

.a-enter-vr-modal,
.a-orientation-modal {
  font-family: Consolas, Andale Mono, Courier New, monospace;
}

.a-enter-vr-modal a {
  border-bottom: 1px solid #fff;
  padding: 2px 0;
  text-decoration: none;
  transition: .1s color ease-in;
}

.a-enter-vr-modal a:hover {
  background-color: #fff;
  color: #111;
  padding: 2px 4px;
  position: relative;
  left: -4px;
}

.a-enter-vr,
.a-enter-ar {
  font-family: sans-serif, monospace;
  font-size: 13px;
  width: 100%;
  font-weight: 200;
  line-height: 16px;
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.a-enter-ar.xr {
  right: 90px;
}

.a-enter-vr-button,
.a-enter-vr-modal,
.a-enter-vr-modal a {
  color: #fff;
  user-select: none;
  outline: none;
}

.a-enter-vr-button {
  background: rgba(0, 0, 0, 0.35) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z' fill='%23fff'/%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat;
}

.a-enter-ar-button {
  background: rgba(0, 0, 0, 0.20) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z' fill='%23fff'/%3E%3Cpath d='M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z' fill='%23fff'/%3E%3Cpath d='M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat;
}

.a-enter-vr.fullscreen .a-enter-vr-button {
  background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8' standalone='no'%3F%3E%3Csvg width='108' height='62' viewBox='0 0 108 62' version='1.1' id='svg320' sodipodi:docname='fullscreen-aframe.svg' xml:space='preserve' inkscape:version='1.2.1 (9c6d41e  2022-07-14)' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:cc='http://creativecommons.org/ns%23' xmlns:dc='http://purl.org/dc/elements/1.1/'%3E%3Cdefs id='defs324' /%3E%3Csodipodi:namedview id='namedview322' pagecolor='%23ffffff' bordercolor='%23000000' borderopacity='0.25' inkscape:showpageshadow='2' inkscape:pageopacity='0.0' inkscape:pagecheckerboard='0' inkscape:deskcolor='%23d1d1d1' showgrid='false' inkscape:zoom='3.8064516' inkscape:cx='91.423729' inkscape:cy='-1.4449153' inkscape:window-width='1440' inkscape:window-height='847' inkscape:window-x='32' inkscape:window-y='25' inkscape:window-maximized='0' inkscape:current-layer='svg320' /%3E%3Ctitle id='title312'%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z' fill='%23fff' id='path314' style='fill:%23ffffff' /%3E%3Cg id='g356' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g358' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g360' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g362' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g364' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g366' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g368' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g370' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g372' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g374' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g376' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g378' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g380' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g382' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g384' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cmetadata id='metadata561'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d='m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4' id='path596' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4' id='path598' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4' id='path600' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616' id='path602' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3C/svg%3E");
}

.a-enter-vr-button,
.a-enter-ar-button {
  background-size: 90% 90%;
  border: 0;
  bottom: 0;
  cursor: pointer;
  min-width: 58px;
  min-height: 34px;
  /* 1.74418604651 */
  /*
    In order to keep the aspect ratio when resizing
    padding-top percentages are relative to the containing block's width.
    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio
  */
  padding-right: 0;
  padding-top: 0;
  position: absolute;
  right: 0;
  transition: background-color .05s ease;
  -webkit-transition: background-color .05s ease;
  z-index: 9999;
  border-radius: 8px;
  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */
}

.a-enter-ar-button {
  background-size: 100% 90%;
  border-radius: 7px;
}

.a-enter-ar-button:active,
.a-enter-ar-button:hover,
.a-enter-vr-button:active,
.a-enter-vr-button:hover {
  background-color: #ef2d5e;
}

.a-enter-vr-button.resethover {
  background-color: rgba(0, 0, 0, 0.35);
}

.a-enter-vr-modal {
  background-color: #666;
  border-radius: 0;
  display: none;
  min-height: 32px;
  margin-right: 70px;
  padding: 9px;
  width: 280px;
  right: 2%;
  position: absolute;
}

.a-enter-vr-modal:after {
  border-bottom: 10px solid transparent;
  border-left: 10px solid #666;
  border-top: 10px solid transparent;
  display: inline-block;
  content: '';
  position: absolute;
  right: -5px;
  top: 5px;
  width: 0;
  height: 0;
}

.a-enter-vr-modal p,
.a-enter-vr-modal a {
  display: inline;
}

.a-enter-vr-modal p {
  margin: 0;
}

.a-enter-vr-modal p:after {
  content: ' ';
}

.a-orientation-modal {
  background: rgba(244, 244, 244, 1) url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center no-repeat;
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-orientation-modal:after {
  color: #666;
  content: "Insert phone into Cardboard holder.";
  display: block;
  position: absolute;
  text-align: center;
  top: 70%;
  transform: translateY(-70%);
  width: 100%;
}

.a-orientation-modal button {
  background: url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;
  border: none;
  height: 50px;
  text-indent: -9999px;
  width: 50px;
}

.a-loader-title {
  background-color: rgba(0, 0, 0, 0.6);
  font-family: sans-serif, monospace;
  text-align: center;
  font-size: 20px;
  height: 50px;
  font-weight: 300;
  line-height: 50px;
  position: absolute;
  right: 0px;
  left: 0px;
  top: 0px;
  color: white;
}

.a-modal {
  position: absolute;
  background: rgba(0, 0, 0, 0.60);
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-dialog {
  position: relative;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 199995;
  width: 300px;
  height: 200px;
  background-size: contain;
  background-color: white;
  font-family: sans-serif, monospace;
  font-size: 20px;
  border-radius: 3px;
  padding: 6px;
}

.a-dialog-text-container {
  width: 100%;
  height: 70%;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  align-content: center;
  flex-direction: column;
}

.a-dialog-text {
  display: inline-block;
  font-weight: normal;
  font-size: 14pt;
  margin: 8px;
}

.a-dialog-buttons-container {
  display: inline-flex;
  align-self: flex-end;
  width: 100%;
  height: 30%;
}

.a-dialog-button {
  cursor: pointer;
  align-self: center;
  opacity: 0.9;
  height: 80%;
  width: 50%;
  font-size: 12pt;
  margin: 4px;
  border-radius: 2px;
  text-align:center;
  border: none;
  display: inline-block;
  -webkit-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);
  user-select: none;
}

.a-dialog-permission-button:hover {
  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);
}

.a-dialog-allow-button {
  background-color: #00ceff;
}

.a-dialog-deny-button {
  background-color: #ff005b;
}

.a-dialog-ok-button {
  background-color: #00ceff;
  width: 100%;
}

.a-dom-overlay:not(.a-no-style) {
  overflow: hidden;
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  padding: 1em;
}

.a-dom-overlay:not(.a-no-style)>* {
  pointer-events: auto;
}
`],sourceRoot:""}]);const ve=k},7098:(M,E,e)=>{"use strict";e.d(E,{Z:()=>A});var B=e(4216),N=e.n(B),Q=e(7705),P=e.n(Q)()(N());P.push([M.id,`.rs-base {
  background-color: #333;
  color: #fafafa;
  border-radius: 0;
  font: 10px monospace;
  left: 5px;
  line-height: 1em;
  opacity: 0.85;
  overflow: hidden;
  padding: 10px;
  position: fixed;
  top: 5px;
  width: 300px;
  z-index: 10000;
}

.rs-base div.hidden {
  display: none;
}

.rs-base h1 {
  color: #fff;
  cursor: pointer;
  font-size: 1.4em;
  font-weight: 300;
  margin: 0 0 5px;
  padding: 0;
}

.rs-group {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
  margin-bottom: 5px;
}

.rs-group:last-child {
  margin-bottom: 0;
}

.rs-counter-base {
  align-items: center;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  height: 10px;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  margin: 2px 0;
}

.rs-counter-base.alarm {
  color: #b70000;
  text-shadow: 0 0 0 #b70000,
               0 0 1px #fff,
               0 0 1px #fff,
               0 0 2px #fff,
               0 0 2px #fff,
               0 0 3px #fff,
               0 0 3px #fff,
               0 0 4px #fff,
               0 0 4px #fff;
}

.rs-counter-id {
  font-weight: 300;
  -webkit-box-ordinal-group: 0;
  -webkit-order: 0;
  order: 0;
  width: 54px;
}

.rs-counter-value {
  font-weight: 300;
  -webkit-box-ordinal-group: 1;
  -webkit-order: 1;
  order: 1;
  text-align: right;
  width: 35px;
}

.rs-canvas {
  -webkit-box-ordinal-group: 2;
  -webkit-order: 2;
  order: 2;
}

@media (min-width: 480px) {
  .rs-base {
    left: 20px;
    top: 20px;
  }
}
`,"",{version:3,sources:["webpack://./src/style/rStats.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,cAAc;EACd,gBAAgB;EAChB,oBAAoB;EACpB,SAAS;EACT,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,aAAa;EACb,eAAe;EACf,QAAQ;EACR,YAAY;EACZ,cAAc;AAChB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,WAAW;EACX,eAAe;EACf,gBAAgB;EAChB,gBAAgB;EAChB,eAAe;EACf,UAAU;AACZ;;AAEA;EACE,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,sCAAsC;EACtC,8BAA8B;EAC9B,kBAAkB;AACpB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,mBAAmB;EACnB,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,YAAY;EACZ,sCAAsC;EACtC,8BAA8B;EAC9B,aAAa;AACf;;AAEA;EACE,cAAc;EACd;;;;;;;;2BAQyB;AAC3B;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,iBAAiB;EACjB,WAAW;AACb;;AAEA;EACE,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;AACV;;AAEA;EACE;IACE,UAAU;IACV,SAAS;EACX;AACF",sourcesContent:[`.rs-base {
  background-color: #333;
  color: #fafafa;
  border-radius: 0;
  font: 10px monospace;
  left: 5px;
  line-height: 1em;
  opacity: 0.85;
  overflow: hidden;
  padding: 10px;
  position: fixed;
  top: 5px;
  width: 300px;
  z-index: 10000;
}

.rs-base div.hidden {
  display: none;
}

.rs-base h1 {
  color: #fff;
  cursor: pointer;
  font-size: 1.4em;
  font-weight: 300;
  margin: 0 0 5px;
  padding: 0;
}

.rs-group {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
  margin-bottom: 5px;
}

.rs-group:last-child {
  margin-bottom: 0;
}

.rs-counter-base {
  align-items: center;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  height: 10px;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  margin: 2px 0;
}

.rs-counter-base.alarm {
  color: #b70000;
  text-shadow: 0 0 0 #b70000,
               0 0 1px #fff,
               0 0 1px #fff,
               0 0 2px #fff,
               0 0 2px #fff,
               0 0 3px #fff,
               0 0 3px #fff,
               0 0 4px #fff,
               0 0 4px #fff;
}

.rs-counter-id {
  font-weight: 300;
  -webkit-box-ordinal-group: 0;
  -webkit-order: 0;
  order: 0;
  width: 54px;
}

.rs-counter-value {
  font-weight: 300;
  -webkit-box-ordinal-group: 1;
  -webkit-order: 1;
  order: 1;
  text-align: right;
  width: 35px;
}

.rs-canvas {
  -webkit-box-ordinal-group: 2;
  -webkit-order: 2;
  order: 2;
}

@media (min-width: 480px) {
  .rs-base {
    left: 20px;
    top: 20px;
  }
}
`],sourceRoot:""}]);const A=P},6924:(M,E,e)=>{"use strict";e.r(E),e.d(E,{default:()=>ee});var B=e(3379),N=e.n(B),Q=e(7795),P=e.n(Q),A=e(569),C=e.n(A),V=e(3565),z=e.n(V),H=e(9216),G=e.n(H),$=e(4589),k=e.n($),K=e(1248),Z={};Z.styleTagTransform=k(),Z.setAttributes=z(),Z.insert=C().bind(null,"head"),Z.domAPI=P(),Z.insertStyleElement=G(),N()(K.Z,Z);const ee=K.Z&&K.Z.locals?K.Z.locals:void 0},1353:(M,E,e)=>{"use strict";e.r(E),e.d(E,{default:()=>ee});var B=e(3379),N=e.n(B),Q=e(7795),P=e.n(Q),A=e(569),C=e.n(A),V=e(3565),z=e.n(V),H=e(9216),G=e.n(H),$=e(4589),k=e.n($),K=e(7098),Z={};Z.styleTagTransform=k(),Z.setAttributes=z(),Z.insert=C().bind(null,"head"),Z.domAPI=P(),Z.insertStyleElement=G(),N()(K.Z,Z);const ee=K.Z&&K.Z.locals?K.Z.locals:void 0},3379:M=>{"use strict";var E=[];function e(Q){for(var P=-1,A=0;A<E.length;A++)if(E[A].identifier===Q){P=A;break}return P}function B(Q,P){for(var A={},C=[],V=0;V<Q.length;V++){var z=Q[V],H=P.base?z[0]+P.base:z[0],G=A[H]||0,$="".concat(H," ").concat(G);A[H]=G+1;var k=e($),K={css:z[1],media:z[2],sourceMap:z[3],supports:z[4],layer:z[5]};if(k!==-1)E[k].references++,E[k].updater(K);else{var Z=N(K,P);P.byIndex=V,E.splice(V,0,{identifier:$,updater:Z,references:1})}C.push($)}return C}function N(Q,P){var A=P.domAPI(P);return A.update(Q),function(C){if(C){if(C.css===Q.css&&C.media===Q.media&&C.sourceMap===Q.sourceMap&&C.supports===Q.supports&&C.layer===Q.layer)return;A.update(Q=C)}else A.remove()}}M.exports=function(Q,P){var A=B(Q=Q||[],P=P||{});return function(C){C=C||[];for(var V=0;V<A.length;V++){var z=e(A[V]);E[z].references--}for(var H=B(C,P),G=0;G<A.length;G++){var $=e(A[G]);E[$].references===0&&(E[$].updater(),E.splice($,1))}A=H}}},569:M=>{"use strict";var E={};M.exports=function(e,B){var N=function(Q){if(E[Q]===void 0){var P=document.querySelector(Q);if(window.HTMLIFrameElement&&P instanceof window.HTMLIFrameElement)try{P=P.contentDocument.head}catch{P=null}E[Q]=P}return E[Q]}(e);if(!N)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");N.appendChild(B)}},9216:M=>{"use strict";M.exports=function(E){var e=document.createElement("style");return E.setAttributes(e,E.attributes),E.insert(e,E.options),e}},3565:(M,E,e)=>{"use strict";M.exports=function(B){var N=e.nc;N&&B.setAttribute("nonce",N)}},7795:M=>{"use strict";M.exports=function(E){if(typeof document>"u")return{update:function(){},remove:function(){}};var e=E.insertStyleElement(E);return{update:function(B){(function(N,Q,P){var A="";P.supports&&(A+="@supports (".concat(P.supports,") {")),P.media&&(A+="@media ".concat(P.media," {"));var C=P.layer!==void 0;C&&(A+="@layer".concat(P.layer.length>0?" ".concat(P.layer):""," {")),A+=P.css,C&&(A+="}"),P.media&&(A+="}"),P.supports&&(A+="}");var V=P.sourceMap;V&&typeof btoa<"u"&&(A+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(V))))," */")),Q.styleTagTransform(A,N,Q.options)})(e,E,B)},remove:function(){(function(B){if(B.parentNode===null)return!1;B.parentNode.removeChild(B)})(e)}}}},4589:M=>{"use strict";M.exports=function(E,e){if(e.styleSheet)e.styleSheet.cssText=E;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(E))}}},5059:M=>{"use strict";M.exports="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E"},7513:M=>{"use strict";M.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},3646:M=>{"use strict";M.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},5581:M=>{"use strict";M.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E"},576:M=>{"use strict";M.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E"},2956:(M,E,e)=>{"use strict";e.d(E,{Z:()=>Wm});var B={};e.r(B),e.d(B,{ACESFilmicToneMapping:()=>Yt,AddEquation:()=>Ce,AddOperation:()=>Ee,AdditiveAnimationBlendMode:()=>Ds,AdditiveBlending:()=>be,AgXToneMapping:()=>cr,AlphaFormat:()=>Yr,AlwaysCompare:()=>Bc,AlwaysDepth:()=>J0,AlwaysStencilFunc:()=>xl,AmbientLight:()=>Uf,AnimationAction:()=>ep,AnimationClip:()=>wl,AnimationLoader:()=>Zp,AnimationMixer:()=>EA,AnimationObjectGroup:()=>gA,AnimationUtils:()=>Yp,ArcCurve:()=>p1,ArrayCamera:()=>ic,ArrowHelper:()=>HA,AttachedBindMode:()=>ur,Audio:()=>Zf,AudioAnalyser:()=>dA,AudioContext:()=>Nd,AudioListener:()=>cA,AudioLoader:()=>oA,AxesHelper:()=>zA,BackSide:()=>ee,BasicDepthPacking:()=>Ys,BasicShadowMap:()=>G,BatchedMesh:()=>Wh,Bone:()=>an,BooleanKeyframeTrack:()=>m1,Box2:()=>SA,Box3:()=>Xn,Box3Helper:()=>UA,BoxGeometry:()=>no,BoxHelper:()=>NA,BufferAttribute:()=>nr,BufferGeometry:()=>Xi,BufferGeometryLoader:()=>zf,ByteType:()=>Mi,Cache:()=>Qo,Camera:()=>X1,CameraHelper:()=>kA,CanvasTexture:()=>Cd,CapsuleGeometry:()=>ae,CatmullRomCurve3:()=>t,CineonToneMapping:()=>vt,CircleGeometry:()=>se,ClampToEdgeWrapping:()=>He,Clock:()=>Yf,Color:()=>Jt,ColorKeyframeTrack:()=>Td,ColorManagement:()=>Fr,CompressedArrayTexture:()=>pc,CompressedCubeTexture:()=>Zh,CompressedTexture:()=>_a,CompressedTextureLoader:()=>$p,ConeGeometry:()=>U,ConstantAlphaFactor:()=>I0,ConstantColorFactor:()=>tr,CubeCamera:()=>Ql,CubeReflectionMapping:()=>rn,CubeRefractionMapping:()=>Pn,CubeTexture:()=>t1,CubeTextureLoader:()=>jp,CubeUVReflectionMapping:()=>B0,CubicBezierCurve:()=>f,CubicBezierCurve3:()=>g,CubicInterpolant:()=>Df,CullFaceBack:()=>V,CullFaceFront:()=>z,CullFaceFrontBack:()=>H,CullFaceNone:()=>C,Curve:()=>C0,CurvePath:()=>W,CustomBlending:()=>De,CustomToneMapping:()=>zi,CylinderGeometry:()=>X,Cylindrical:()=>MA,Data3DTexture:()=>L1,DataArrayTexture:()=>gn,DataTexture:()=>Gr,DataTextureLoader:()=>eA,DataUtils:()=>H1,DecrementStencilOp:()=>_u,DecrementWrapStencilOp:()=>Su,DefaultLoadingManager:()=>Rd,DepthFormat:()=>zr,DepthStencilFormat:()=>r0,DepthTexture:()=>Yl,DetachedBindMode:()=>Nr,DirectionalLight:()=>kd,DirectionalLightHelper:()=>OA,DiscreteInterpolant:()=>Lf,DisplayP3ColorSpace:()=>Pa,DodecahedronGeometry:()=>We,DoubleSide:()=>he,DstAlphaFactor:()=>er,DstColorFactor:()=>p0,DynamicCopyUsage:()=>Qu,DynamicDrawUsage:()=>Pu,DynamicReadUsage:()=>ku,EdgesGeometry:()=>Qt,EllipseCurve:()=>z0,EqualCompare:()=>Sc,EqualDepth:()=>Hn,EqualStencilFunc:()=>mf,EquirectangularReflectionMapping:()=>cs,EquirectangularRefractionMapping:()=>Tr,Euler:()=>k0,EventDispatcher:()=>P0,ExtrudeGeometry:()=>$h,FileLoader:()=>f0,Float16BufferAttribute:()=>xo,Float32BufferAttribute:()=>vi,FloatType:()=>wi,Fog:()=>rl,FogExp2:()=>il,FramebufferTexture:()=>El,FrontSide:()=>Z,Frustum:()=>r1,GLBufferAttribute:()=>CA,GLSL1:()=>zu,GLSL3:()=>Ml,GreaterCompare:()=>Tc,GreaterDepth:()=>ls,GreaterEqualCompare:()=>Rc,GreaterEqualDepth:()=>Z0,GreaterEqualStencilFunc:()=>Lu,GreaterStencilFunc:()=>Bu,GridHelper:()=>PA,Group:()=>Y0,HalfFloatType:()=>Ji,HemisphereLight:()=>Ff,HemisphereLightHelper:()=>LA,IcosahedronGeometry:()=>jh,ImageBitmapLoader:()=>Wf,ImageLoader:()=>Ec,ImageUtils:()=>Nc,IncrementStencilOp:()=>xu,IncrementWrapStencilOp:()=>Mu,InstancedBufferAttribute:()=>bs,InstancedBufferGeometry:()=>Hf,InstancedInterleavedBuffer:()=>bA,InstancedMesh:()=>cc,Int16BufferAttribute:()=>Jc,Int32BufferAttribute:()=>ju,Int8BufferAttribute:()=>Zu,IntType:()=>_r,InterleavedBuffer:()=>Lo,InterleavedBufferAttribute:()=>u0,Interpolant:()=>yl,InterpolateDiscrete:()=>sn,InterpolateLinear:()=>a0,InterpolateSmooth:()=>Rs,InvertStencilOp:()=>Tu,KeepStencilOp:()=>Ao,KeyframeTrack:()=>zs,LOD:()=>Uh,LatheGeometry:()=>ie,Layers:()=>bo,LessCompare:()=>Mc,LessDepth:()=>as,LessEqualCompare:()=>_l,LessEqualDepth:()=>R0,LessEqualStencilFunc:()=>Ru,LessStencilFunc:()=>Af,Light:()=>Sa,LightProbe:()=>au,Line:()=>Hs,Line3:()=>TA,LineBasicMaterial:()=>Un,LineCurve:()=>y,LineCurve3:()=>_,LineDashedMaterial:()=>If,LineLoop:()=>dc,LineSegments:()=>Zn,LinearDisplayP3ColorSpace:()=>Yo,LinearFilter:()=>Wt,LinearInterpolant:()=>Sd,LinearMipMapLinearFilter:()=>dr,LinearMipMapNearestFilter:()=>Ut,LinearMipmapLinearFilter:()=>st,LinearMipmapNearestFilter:()=>ui,LinearSRGBColorSpace:()=>Cn,LinearToneMapping:()=>et,LinearTransfer:()=>Fa,Loader:()=>jn,LoaderUtils:()=>zo,LoadingManager:()=>Id,LoopOnce:()=>E0,LoopPingPong:()=>Tn,LoopRepeat:()=>bn,LuminanceAlphaFormat:()=>$0,LuminanceFormat:()=>Fn,MOUSE:()=>P,Material:()=>en,MaterialLoader:()=>lu,MathUtils:()=>Ha,Matrix3:()=>$i,Matrix4:()=>Ii,MaxEquation:()=>Je,Mesh:()=>cn,MeshBasicMaterial:()=>U0,MeshDepthMaterial:()=>jl,MeshDistanceMaterial:()=>ec,MeshLambertMaterial:()=>Sf,MeshMatcapMaterial:()=>Tf,MeshNormalMaterial:()=>Mf,MeshPhongMaterial:()=>ou,MeshPhysicalMaterial:()=>Cs,MeshStandardMaterial:()=>vc,MeshToonMaterial:()=>_f,MinEquation:()=>ot,MirroredRepeatWrapping:()=>Ke,MixOperation:()=>fe,MultiplyBlending:()=>ye,MultiplyOperation:()=>Oe,NearestFilter:()=>pt,NearestMipMapLinearFilter:()=>ti,NearestMipMapNearestFilter:()=>Kt,NearestMipmapLinearFilter:()=>Bt,NearestMipmapNearestFilter:()=>Xt,NeutralToneMapping:()=>qr,NeverCompare:()=>_c,NeverDepth:()=>os,NeverStencilFunc:()=>Iu,NoBlending:()=>ue,NoColorSpace:()=>j0,NoToneMapping:()=>_e,NormalAnimationBlendMode:()=>Bs,NormalBlending:()=>ve,NotEqualCompare:()=>Ic,NotEqualDepth:()=>tn,NotEqualStencilFunc:()=>Du,NumberKeyframeTrack:()=>g1,Object3D:()=>yr,ObjectLoader:()=>nA,ObjectSpaceNormalMap:()=>xc,OctahedronGeometry:()=>mc,OneFactor:()=>Zt,OneMinusConstantAlphaFactor:()=>A0,OneMinusConstantColorFactor:()=>K0,OneMinusDstAlphaFactor:()=>Ki,OneMinusDstColorFactor:()=>ln,OneMinusSrcAlphaFactor:()=>Ri,OneMinusSrcColorFactor:()=>si,OrthographicCamera:()=>ua,P3Primaries:()=>ka,PCFShadowMap:()=>$,PCFSoftShadowMap:()=>k,PMREMGenerator:()=>ql,Path:()=>q,PerspectiveCamera:()=>Rn,Plane:()=>ns,PlaneGeometry:()=>ca,PlaneHelper:()=>QA,PointLight:()=>Od,PointLightHelper:()=>BA,Points:()=>No,PointsMaterial:()=>Bn,PolarGridHelper:()=>FA,PolyhedronGeometry:()=>Ae,PositionalAudio:()=>uA,PropertyBinding:()=>Br,PropertyMixer:()=>jf,QuadraticBezierCurve:()=>R,QuadraticBezierCurve3:()=>F,Quaternion:()=>qn,QuaternionKeyframeTrack:()=>Ma,QuaternionLinearInterpolant:()=>Pf,RED_GREEN_RGTC2_Format:()=>On,RED_RGTC1_Format:()=>wn,REVISION:()=>Q,RGBADepthPacking:()=>Ks,RGBAFormat:()=>ir,RGBAIntegerFormat:()=>Vn,RGBA_ASTC_10x10_Format:()=>Wi,RGBA_ASTC_10x5_Format:()=>_t,RGBA_ASTC_10x6_Format:()=>bi,RGBA_ASTC_10x8_Format:()=>Bi,RGBA_ASTC_12x10_Format:()=>qi,RGBA_ASTC_12x12_Format:()=>Zi,RGBA_ASTC_4x4_Format:()=>Me,RGBA_ASTC_5x4_Format:()=>Ie,RGBA_ASTC_5x5_Format:()=>Ue,RGBA_ASTC_6x5_Format:()=>Xe,RGBA_ASTC_6x6_Format:()=>Ct,RGBA_ASTC_8x5_Format:()=>yt,RGBA_ASTC_8x6_Format:()=>$t,RGBA_ASTC_8x8_Format:()=>xt,RGBA_BPTC_Format:()=>rr,RGBA_ETC2_EAC_Format:()=>ge,RGBA_PVRTC_2BPPV1_Format:()=>po,RGBA_PVRTC_4BPPV1_Format:()=>La,RGBA_S3TC_DXT1_Format:()=>L0,RGBA_S3TC_DXT3_Format:()=>s0,RGBA_S3TC_DXT5_Format:()=>v0,RGBFormat:()=>gr,RGB_BPTC_SIGNED_Format:()=>vr,RGB_BPTC_UNSIGNED_Format:()=>di,RGB_ETC1_Format:()=>hn,RGB_ETC2_Format:()=>oe,RGB_PVRTC_2BPPV1_Format:()=>Pr,RGB_PVRTC_4BPPV1_Format:()=>hs,RGB_S3TC_DXT1_Format:()=>g0,RGFormat:()=>n0,RGIntegerFormat:()=>x0,RawShaderMaterial:()=>xf,Ray:()=>ts,Raycaster:()=>xA,Rec709Primaries:()=>Oa,RectAreaLight:()=>Qf,RedFormat:()=>m0,RedIntegerFormat:()=>D0,ReinhardToneMapping:()=>dt,RenderTarget:()=>Hc,RepeatWrapping:()=>yn,ReplaceStencilOp:()=>Cu,ReverseSubtractEquation:()=>Qe,RingGeometry:()=>eu,SIGNED_RED_GREEN_RGTC2_Format:()=>o0,SIGNED_RED_RGTC1_Format:()=>nn,SRGBColorSpace:()=>An,SRGBTransfer:()=>jr,Scene:()=>nc,ShaderChunk:()=>lr,ShaderLib:()=>q0,ShaderMaterial:()=>Q0,ShadowMaterial:()=>Cf,Shape:()=>Et,ShapeGeometry:()=>tu,ShapePath:()=>GA,ShapeUtils:()=>ho,ShortType:()=>Ir,Skeleton:()=>dl,SkeletonHelper:()=>RA,SkinnedMesh:()=>gt,Source:()=>Js,Sphere:()=>Yn,SphereGeometry:()=>gc,Spherical:()=>_A,SphericalHarmonics3:()=>bl,SplineCurve:()=>ne,SpotLight:()=>Pd,SpotLightHelper:()=>IA,Sprite:()=>kh,SpriteMaterial:()=>sc,SrcAlphaFactor:()=>_i,SrcAlphaSaturateFactor:()=>Ur,SrcColorFactor:()=>kt,StaticCopyUsage:()=>Uu,StaticDrawUsage:()=>Na,StaticReadUsage:()=>Ou,StereoCamera:()=>aA,StreamCopyUsage:()=>Hu,StreamDrawUsage:()=>Fu,StreamReadUsage:()=>Nu,StringKeyframeTrack:()=>v1,SubtractEquation:()=>Re,SubtractiveBlending:()=>Te,TOUCH:()=>A,TangentSpaceNormalMap:()=>Kr,TetrahedronGeometry:()=>iu,Texture:()=>on,TextureLoader:()=>Bd,TorusGeometry:()=>ru,TorusKnotGeometry:()=>nu,Triangle:()=>N0,TriangleFanDrawMode:()=>ds,TriangleStripDrawMode:()=>Ls,TrianglesDrawMode:()=>Xs,TubeGeometry:()=>su,UVMapping:()=>Is,Uint16BufferAttribute:()=>kl,Uint32BufferAttribute:()=>z1,Uint8BufferAttribute:()=>$u,Uint8ClampedBufferAttribute:()=>Za,Uniform:()=>Hd,UniformsGroup:()=>wA,UniformsLib:()=>ci,UniformsUtils:()=>ft,UnsignedByteType:()=>Di,UnsignedInt248Type:()=>Hr,UnsignedInt5999Type:()=>Xr,UnsignedIntType:()=>Li,UnsignedShort4444Type:()=>Qr,UnsignedShort5551Type:()=>ki,UnsignedShortType:()=>Vi,VSMShadowMap:()=>K,Vector2:()=>zt,Vector3:()=>Le,Vector4:()=>Rr,VectorKeyframeTrack:()=>E1,VideoTexture:()=>Jh,WebGL3DRenderTarget:()=>qu,WebGLArrayRenderTarget:()=>Wu,WebGLCoordinateSystem:()=>ps,WebGLCubeRenderTarget:()=>Fi,WebGLMultipleRenderTargets:()=>VA,WebGLRenderTarget:()=>Wn,WebGLRenderer:()=>md,WebGLUtils:()=>tc,WebGPUCoordinateSystem:()=>Ua,WireframeGeometry:()=>yf,WrapAroundEnding:()=>us,ZeroCurvatureEnding:()=>_0,ZeroFactor:()=>Mt,ZeroSlopeEnding:()=>M0,ZeroStencilOp:()=>bu,createCanvasElement:()=>Pc});var N={};e.r(N),e.d(N,{computeMikkTSpaceTangents:()=>qA,computeMorphedAttributes:()=>jA,deepCloneAttribute:()=>YA,deinterleaveAttribute:()=>mu,deinterleaveGeometry:()=>JA,estimateBytesUsed:()=>ZA,interleaveAttributes:()=>KA,mergeAttributes:()=>qd,mergeGeometries:()=>XA,mergeGroups:()=>em,mergeVertices:()=>$A,toCreasedNormals:()=>tm,toTrianglesDrawMode:()=>Xd});const Q="164",P={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},A={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},C=0,V=1,z=2,H=3,G=0,$=1,k=2,K=3,Z=0,ee=1,he=2,ue=0,ve=1,be=2,Te=3,ye=4,De=5,Ce=100,Re=101,Qe=102,ot=103,Je=104,Mt=200,Zt=201,kt=202,si=203,_i=204,Ri=205,er=206,Ki=207,p0=208,ln=209,Ur=210,tr=211,K0=212,I0=213,A0=214,os=0,J0=1,as=2,R0=3,Hn=4,Z0=5,ls=6,tn=7,Oe=0,fe=1,Ee=2,_e=0,et=1,dt=2,vt=3,Yt=4,zi=5,cr=6,qr=7,ur="attached",Nr="detached",Is=300,rn=301,Pn=302,cs=303,Tr=304,B0=306,yn=1e3,He=1001,Ke=1002,pt=1003,Xt=1004,Kt=1004,Bt=1005,ti=1005,Wt=1006,ui=1007,Ut=1007,st=1008,dr=1008,Di=1009,Mi=1010,Ir=1011,Vi=1012,_r=1013,Li=1014,wi=1015,Ji=1016,Qr=1017,ki=1018,Hr=1020,Xr=35902,Yr=1021,gr=1022,ir=1023,Fn=1024,$0=1025,zr=1026,r0=1027,m0=1028,D0=1029,n0=1030,x0=1031,Vn=1033,g0=33776,L0=33777,s0=33778,v0=33779,hs=35840,Pr=35841,La=35842,po=35843,hn=36196,oe=37492,ge=37496,Me=37808,Ie=37809,Ue=37810,Xe=37811,Ct=37812,yt=37813,$t=37814,xt=37815,_t=37816,bi=37817,Bi=37818,Wi=37819,qi=37820,Zi=37821,rr=36492,vr=36494,di=36495,wn=36283,nn=36284,On=36285,o0=36286,E0=2200,bn=2201,Tn=2202,sn=2300,a0=2301,Rs=2302,_0=2400,M0=2401,us=2402,Bs=2500,Ds=2501,Xs=0,Ls=1,ds=2,Ys=3200,Ks=3201,Kr=0,xc=1,j0="",An="srgb",Cn="srgb-linear",Pa="display-p3",Yo="display-p3-linear",Fa="linear",jr="srgb",Oa="rec709",ka="p3",bu=0,Ao=7680,Cu=7681,xu=7682,_u=7683,Mu=34055,Su=34056,Tu=5386,Iu=512,Af=513,mf=514,Ru=515,Bu=516,Du=517,Lu=518,xl=519,_c=512,Mc=513,Sc=514,_l=515,Tc=516,Ic=517,Rc=518,Bc=519,Na=35044,Pu=35048,Fu=35040,Ou=35045,ku=35049,Nu=35041,Uu=35046,Qu=35050,Hu=35042,zu="100",Ml="300 es",ps=2e3,Ua=2001;class P0{addEventListener(n,u){this._listeners===void 0&&(this._listeners={});const p=this._listeners;p[n]===void 0&&(p[n]=[]),p[n].indexOf(u)===-1&&p[n].push(u)}hasEventListener(n,u){if(this._listeners===void 0)return!1;const p=this._listeners;return p[n]!==void 0&&p[n].indexOf(u)!==-1}removeEventListener(n,u){if(this._listeners===void 0)return;const p=this._listeners[n];if(p!==void 0){const m=p.indexOf(u);m!==-1&&p.splice(m,1)}}dispatchEvent(n){if(this._listeners===void 0)return;const u=this._listeners[n.type];if(u!==void 0){n.target=this;const p=u.slice(0);for(let m=0,v=p.length;m<v;m++)p[m].call(this,n);n.target=null}}}const l0=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Dc=1234567;const mo=Math.PI/180,Ko=180/Math.PI;function F0(){const b=4294967295*Math.random()|0,n=4294967295*Math.random()|0,u=4294967295*Math.random()|0,p=4294967295*Math.random()|0;return(l0[255&b]+l0[b>>8&255]+l0[b>>16&255]+l0[b>>24&255]+"-"+l0[255&n]+l0[n>>8&255]+"-"+l0[n>>16&15|64]+l0[n>>24&255]+"-"+l0[63&u|128]+l0[u>>8&255]+"-"+l0[u>>16&255]+l0[u>>24&255]+l0[255&p]+l0[p>>8&255]+l0[p>>16&255]+l0[p>>24&255]).toLowerCase()}function mn(b,n,u){return Math.max(n,Math.min(u,b))}function Sl(b,n){return(b%n+n)%n}function Qa(b,n,u){return(1-u)*b+u*n}function y0(b,n){switch(n.constructor){case Float32Array:return b;case Uint32Array:return b/4294967295;case Uint16Array:return b/65535;case Uint8Array:return b/255;case Int32Array:return Math.max(b/2147483647,-1);case Int16Array:return Math.max(b/32767,-1);case Int8Array:return Math.max(b/127,-1);default:throw new Error("Invalid component type.")}}function ar(b,n){switch(n.constructor){case Float32Array:return b;case Uint32Array:return Math.round(4294967295*b);case Uint16Array:return Math.round(65535*b);case Uint8Array:return Math.round(255*b);case Int32Array:return Math.round(2147483647*b);case Int16Array:return Math.round(32767*b);case Int8Array:return Math.round(127*b);default:throw new Error("Invalid component type.")}}const Ha={DEG2RAD:mo,RAD2DEG:Ko,generateUUID:F0,clamp:mn,euclideanModulo:Sl,mapLinear:function(b,n,u,p,m){return p+(b-n)*(m-p)/(u-n)},inverseLerp:function(b,n,u){return b!==n?(u-b)/(n-b):0},lerp:Qa,damp:function(b,n,u,p){return Qa(b,n,1-Math.exp(-u*p))},pingpong:function(b,n=1){return n-Math.abs(Sl(b,2*n)-n)},smoothstep:function(b,n,u){return b<=n?0:b>=u?1:(b=(b-n)/(u-n))*b*(3-2*b)},smootherstep:function(b,n,u){return b<=n?0:b>=u?1:(b=(b-n)/(u-n))*b*b*(b*(6*b-15)+10)},randInt:function(b,n){return b+Math.floor(Math.random()*(n-b+1))},randFloat:function(b,n){return b+Math.random()*(n-b)},randFloatSpread:function(b){return b*(.5-Math.random())},seededRandom:function(b){b!==void 0&&(Dc=b);let n=Dc+=1831565813;return n=Math.imul(n^n>>>15,1|n),n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296},degToRad:function(b){return b*mo},radToDeg:function(b){return b*Ko},isPowerOfTwo:function(b){return(b&b-1)==0&&b!==0},ceilPowerOfTwo:function(b){return Math.pow(2,Math.ceil(Math.log(b)/Math.LN2))},floorPowerOfTwo:function(b){return Math.pow(2,Math.floor(Math.log(b)/Math.LN2))},setQuaternionFromProperEuler:function(b,n,u,p,m){const v=Math.cos,w=Math.sin,S=v(u/2),I=w(u/2),D=v((n+p)/2),L=w((n+p)/2),Y=v((n-p)/2),j=w((n-p)/2),te=v((p-n)/2),re=w((p-n)/2);switch(m){case"XYX":b.set(S*L,I*Y,I*j,S*D);break;case"YZY":b.set(I*j,S*L,I*Y,S*D);break;case"ZXZ":b.set(I*Y,I*j,S*L,S*D);break;case"XZX":b.set(S*L,I*re,I*te,S*D);break;case"YXY":b.set(I*te,S*L,I*re,S*D);break;case"ZYZ":b.set(I*re,I*te,S*L,S*D);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+m)}},normalize:ar,denormalize:y0};class zt{constructor(n=0,u=0){zt.prototype.isVector2=!0,this.x=n,this.y=u}get width(){return this.x}set width(n){this.x=n}get height(){return this.y}set height(n){this.y=n}set(n,u){return this.x=n,this.y=u,this}setScalar(n){return this.x=n,this.y=n,this}setX(n){return this.x=n,this}setY(n){return this.y=n,this}setComponent(n,u){switch(n){case 0:this.x=u;break;case 1:this.y=u;break;default:throw new Error("index is out of range: "+n)}return this}getComponent(n){switch(n){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+n)}}clone(){return new this.constructor(this.x,this.y)}copy(n){return this.x=n.x,this.y=n.y,this}add(n){return this.x+=n.x,this.y+=n.y,this}addScalar(n){return this.x+=n,this.y+=n,this}addVectors(n,u){return this.x=n.x+u.x,this.y=n.y+u.y,this}addScaledVector(n,u){return this.x+=n.x*u,this.y+=n.y*u,this}sub(n){return this.x-=n.x,this.y-=n.y,this}subScalar(n){return this.x-=n,this.y-=n,this}subVectors(n,u){return this.x=n.x-u.x,this.y=n.y-u.y,this}multiply(n){return this.x*=n.x,this.y*=n.y,this}multiplyScalar(n){return this.x*=n,this.y*=n,this}divide(n){return this.x/=n.x,this.y/=n.y,this}divideScalar(n){return this.multiplyScalar(1/n)}applyMatrix3(n){const u=this.x,p=this.y,m=n.elements;return this.x=m[0]*u+m[3]*p+m[6],this.y=m[1]*u+m[4]*p+m[7],this}min(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this}max(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this}clamp(n,u){return this.x=Math.max(n.x,Math.min(u.x,this.x)),this.y=Math.max(n.y,Math.min(u.y,this.y)),this}clampScalar(n,u){return this.x=Math.max(n,Math.min(u,this.x)),this.y=Math.max(n,Math.min(u,this.y)),this}clampLength(n,u){const p=this.length();return this.divideScalar(p||1).multiplyScalar(Math.max(n,Math.min(u,p)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(n){return this.x*n.x+this.y*n.y}cross(n){return this.x*n.y-this.y*n.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(n){const u=Math.sqrt(this.lengthSq()*n.lengthSq());if(u===0)return Math.PI/2;const p=this.dot(n)/u;return Math.acos(mn(p,-1,1))}distanceTo(n){return Math.sqrt(this.distanceToSquared(n))}distanceToSquared(n){const u=this.x-n.x,p=this.y-n.y;return u*u+p*p}manhattanDistanceTo(n){return Math.abs(this.x-n.x)+Math.abs(this.y-n.y)}setLength(n){return this.normalize().multiplyScalar(n)}lerp(n,u){return this.x+=(n.x-this.x)*u,this.y+=(n.y-this.y)*u,this}lerpVectors(n,u,p){return this.x=n.x+(u.x-n.x)*p,this.y=n.y+(u.y-n.y)*p,this}equals(n){return n.x===this.x&&n.y===this.y}fromArray(n,u=0){return this.x=n[u],this.y=n[u+1],this}toArray(n=[],u=0){return n[u]=this.x,n[u+1]=this.y,n}fromBufferAttribute(n,u){return this.x=n.getX(u),this.y=n.getY(u),this}rotateAround(n,u){const p=Math.cos(u),m=Math.sin(u),v=this.x-n.x,w=this.y-n.y;return this.x=v*p-w*m+n.x,this.y=v*m+w*p+n.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class $i{constructor(n,u,p,m,v,w,S,I,D){$i.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],n!==void 0&&this.set(n,u,p,m,v,w,S,I,D)}set(n,u,p,m,v,w,S,I,D){const L=this.elements;return L[0]=n,L[1]=m,L[2]=S,L[3]=u,L[4]=v,L[5]=I,L[6]=p,L[7]=w,L[8]=D,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(n){const u=this.elements,p=n.elements;return u[0]=p[0],u[1]=p[1],u[2]=p[2],u[3]=p[3],u[4]=p[4],u[5]=p[5],u[6]=p[6],u[7]=p[7],u[8]=p[8],this}extractBasis(n,u,p){return n.setFromMatrix3Column(this,0),u.setFromMatrix3Column(this,1),p.setFromMatrix3Column(this,2),this}setFromMatrix4(n){const u=n.elements;return this.set(u[0],u[4],u[8],u[1],u[5],u[9],u[2],u[6],u[10]),this}multiply(n){return this.multiplyMatrices(this,n)}premultiply(n){return this.multiplyMatrices(n,this)}multiplyMatrices(n,u){const p=n.elements,m=u.elements,v=this.elements,w=p[0],S=p[3],I=p[6],D=p[1],L=p[4],Y=p[7],j=p[2],te=p[5],re=p[8],ce=m[0],le=m[3],de=m[6],pe=m[1],me=m[4],we=m[7],Fe=m[2],Be=m[5],ke=m[8];return v[0]=w*ce+S*pe+I*Fe,v[3]=w*le+S*me+I*Be,v[6]=w*de+S*we+I*ke,v[1]=D*ce+L*pe+Y*Fe,v[4]=D*le+L*me+Y*Be,v[7]=D*de+L*we+Y*ke,v[2]=j*ce+te*pe+re*Fe,v[5]=j*le+te*me+re*Be,v[8]=j*de+te*we+re*ke,this}multiplyScalar(n){const u=this.elements;return u[0]*=n,u[3]*=n,u[6]*=n,u[1]*=n,u[4]*=n,u[7]*=n,u[2]*=n,u[5]*=n,u[8]*=n,this}determinant(){const n=this.elements,u=n[0],p=n[1],m=n[2],v=n[3],w=n[4],S=n[5],I=n[6],D=n[7],L=n[8];return u*w*L-u*S*D-p*v*L+p*S*I+m*v*D-m*w*I}invert(){const n=this.elements,u=n[0],p=n[1],m=n[2],v=n[3],w=n[4],S=n[5],I=n[6],D=n[7],L=n[8],Y=L*w-S*D,j=S*I-L*v,te=D*v-w*I,re=u*Y+p*j+m*te;if(re===0)return this.set(0,0,0,0,0,0,0,0,0);const ce=1/re;return n[0]=Y*ce,n[1]=(m*D-L*p)*ce,n[2]=(S*p-m*w)*ce,n[3]=j*ce,n[4]=(L*u-m*I)*ce,n[5]=(m*v-S*u)*ce,n[6]=te*ce,n[7]=(p*I-D*u)*ce,n[8]=(w*u-p*v)*ce,this}transpose(){let n;const u=this.elements;return n=u[1],u[1]=u[3],u[3]=n,n=u[2],u[2]=u[6],u[6]=n,n=u[5],u[5]=u[7],u[7]=n,this}getNormalMatrix(n){return this.setFromMatrix4(n).invert().transpose()}transposeIntoArray(n){const u=this.elements;return n[0]=u[0],n[1]=u[3],n[2]=u[6],n[3]=u[1],n[4]=u[4],n[5]=u[7],n[6]=u[2],n[7]=u[5],n[8]=u[8],this}setUvTransform(n,u,p,m,v,w,S){const I=Math.cos(v),D=Math.sin(v);return this.set(p*I,p*D,-p*(I*w+D*S)+w+n,-m*D,m*I,-m*(-D*w+I*S)+S+u,0,0,1),this}scale(n,u){return this.premultiply(Tl.makeScale(n,u)),this}rotate(n){return this.premultiply(Tl.makeRotation(-n)),this}translate(n,u){return this.premultiply(Tl.makeTranslation(n,u)),this}makeTranslation(n,u){return n.isVector2?this.set(1,0,n.x,0,1,n.y,0,0,1):this.set(1,0,n,0,1,u,0,0,1),this}makeRotation(n){const u=Math.cos(n),p=Math.sin(n);return this.set(u,-p,0,p,u,0,0,0,1),this}makeScale(n,u){return this.set(n,0,0,0,u,0,0,0,1),this}equals(n){const u=this.elements,p=n.elements;for(let m=0;m<9;m++)if(u[m]!==p[m])return!1;return!0}fromArray(n,u=0){for(let p=0;p<9;p++)this.elements[p]=n[p+u];return this}toArray(n=[],u=0){const p=this.elements;return n[u]=p[0],n[u+1]=p[1],n[u+2]=p[2],n[u+3]=p[3],n[u+4]=p[4],n[u+5]=p[5],n[u+6]=p[6],n[u+7]=p[7],n[u+8]=p[8],n}clone(){return new this.constructor().fromArray(this.elements)}}const Tl=new $i;function Lc(b){for(let n=b.length-1;n>=0;--n)if(b[n]>=65535)return!0;return!1}const Gu={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Jo(b,n){return new Gu[b](n)}function za(b){return document.createElementNS("http://www.w3.org/1999/xhtml",b)}function Pc(){const b=za("canvas");return b.style.display="block",b}const Fc={};function Il(b){b in Fc||(Fc[b]=!0,console.warn(b))}const Oc=new $i().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),kc=new $i().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),B1={[Cn]:{transfer:Fa,primaries:Oa,toReference:b=>b,fromReference:b=>b},[An]:{transfer:jr,primaries:Oa,toReference:b=>b.convertSRGBToLinear(),fromReference:b=>b.convertLinearToSRGB()},[Yo]:{transfer:Fa,primaries:ka,toReference:b=>b.applyMatrix3(kc),fromReference:b=>b.applyMatrix3(Oc)},[Pa]:{transfer:jr,primaries:ka,toReference:b=>b.convertSRGBToLinear().applyMatrix3(kc),fromReference:b=>b.applyMatrix3(Oc).convertLinearToSRGB()}},Vu=new Set([Cn,Yo]),Fr={enabled:!0,_workingColorSpace:Cn,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(b){if(!Vu.has(b))throw new Error(`Unsupported working color space, "${b}".`);this._workingColorSpace=b},convert:function(b,n,u){if(this.enabled===!1||n===u||!n||!u)return b;const p=B1[n].toReference;return(0,B1[u].fromReference)(p(b))},fromWorkingColorSpace:function(b,n){return this.convert(b,this._workingColorSpace,n)},toWorkingColorSpace:function(b,n){return this.convert(b,n,this._workingColorSpace)},getPrimaries:function(b){return B1[b].primaries},getTransfer:function(b){return b===j0?Fa:B1[b].transfer}};function go(b){return b<.04045?.0773993808*b:Math.pow(.9478672986*b+.0521327014,2.4)}function Rl(b){return b<.0031308?12.92*b:1.055*Math.pow(b,.41666)-.055}let Zo;class Nc{static getDataURL(n){if(/^data:/i.test(n.src)||typeof HTMLCanvasElement>"u")return n.src;let u;if(n instanceof HTMLCanvasElement)u=n;else{Zo===void 0&&(Zo=za("canvas")),Zo.width=n.width,Zo.height=n.height;const p=Zo.getContext("2d");n instanceof ImageData?p.putImageData(n,0,0):p.drawImage(n,0,0,n.width,n.height),u=Zo}return u.width>2048||u.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",n),u.toDataURL("image/jpeg",.6)):u.toDataURL("image/png")}static sRGBToLinear(n){if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap){const u=za("canvas");u.width=n.width,u.height=n.height;const p=u.getContext("2d");p.drawImage(n,0,0,n.width,n.height);const m=p.getImageData(0,0,n.width,n.height),v=m.data;for(let w=0;w<v.length;w++)v[w]=255*go(v[w]/255);return p.putImageData(m,0,0),u}if(n.data){const u=n.data.slice(0);for(let p=0;p<u.length;p++)u instanceof Uint8Array||u instanceof Uint8ClampedArray?u[p]=Math.floor(255*go(u[p]/255)):u[p]=go(u[p]);return{data:u,width:n.width,height:n.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),n}}let Uc=0;class Js{constructor(n=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Uc++}),this.uuid=F0(),this.data=n,this.dataReady=!0,this.version=0}set needsUpdate(n){n===!0&&this.version++}toJSON(n){const u=n===void 0||typeof n=="string";if(!u&&n.images[this.uuid]!==void 0)return n.images[this.uuid];const p={uuid:this.uuid,url:""},m=this.data;if(m!==null){let v;if(Array.isArray(m)){v=[];for(let w=0,S=m.length;w<S;w++)m[w].isDataTexture?v.push(D1(m[w].image)):v.push(D1(m[w]))}else v=D1(m);p.url=v}return u||(n.images[this.uuid]=p),p}}function D1(b){return typeof HTMLImageElement<"u"&&b instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&b instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&b instanceof ImageBitmap?Nc.getDataURL(b):b.data?{data:Array.from(b.data),width:b.width,height:b.height,type:b.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Qc=0;class on extends P0{constructor(n=on.DEFAULT_IMAGE,u=on.DEFAULT_MAPPING,p=He,m=He,v=Wt,w=st,S=ir,I=Di,D=on.DEFAULT_ANISOTROPY,L=j0){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Qc++}),this.uuid=F0(),this.name="",this.source=new Js(n),this.mipmaps=[],this.mapping=u,this.channel=0,this.wrapS=p,this.wrapT=m,this.magFilter=v,this.minFilter=w,this.anisotropy=D,this.format=S,this.internalFormat=null,this.type=I,this.offset=new zt(0,0),this.repeat=new zt(1,1),this.center=new zt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new $i,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=L,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(n=null){this.source.data=n}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(n){return this.name=n.name,this.source=n.source,this.mipmaps=n.mipmaps.slice(0),this.mapping=n.mapping,this.channel=n.channel,this.wrapS=n.wrapS,this.wrapT=n.wrapT,this.magFilter=n.magFilter,this.minFilter=n.minFilter,this.anisotropy=n.anisotropy,this.format=n.format,this.internalFormat=n.internalFormat,this.type=n.type,this.offset.copy(n.offset),this.repeat.copy(n.repeat),this.center.copy(n.center),this.rotation=n.rotation,this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrix.copy(n.matrix),this.generateMipmaps=n.generateMipmaps,this.premultiplyAlpha=n.premultiplyAlpha,this.flipY=n.flipY,this.unpackAlignment=n.unpackAlignment,this.colorSpace=n.colorSpace,this.userData=JSON.parse(JSON.stringify(n.userData)),this.needsUpdate=!0,this}toJSON(n){const u=n===void 0||typeof n=="string";if(!u&&n.textures[this.uuid]!==void 0)return n.textures[this.uuid];const p={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(n).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(p.userData=this.userData),u||(n.textures[this.uuid]=p),p}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(n){if(this.mapping!==Is)return n;if(n.applyMatrix3(this.matrix),n.x<0||n.x>1)switch(this.wrapS){case yn:n.x=n.x-Math.floor(n.x);break;case He:n.x=n.x<0?0:1;break;case Ke:Math.abs(Math.floor(n.x)%2)===1?n.x=Math.ceil(n.x)-n.x:n.x=n.x-Math.floor(n.x)}if(n.y<0||n.y>1)switch(this.wrapT){case yn:n.y=n.y-Math.floor(n.y);break;case He:n.y=n.y<0?0:1;break;case Ke:Math.abs(Math.floor(n.y)%2)===1?n.y=Math.ceil(n.y)-n.y:n.y=n.y-Math.floor(n.y)}return this.flipY&&(n.y=1-n.y),n}set needsUpdate(n){n===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(n){n===!0&&this.pmremVersion++}}on.DEFAULT_IMAGE=null,on.DEFAULT_MAPPING=Is,on.DEFAULT_ANISOTROPY=1;class Rr{constructor(n=0,u=0,p=0,m=1){Rr.prototype.isVector4=!0,this.x=n,this.y=u,this.z=p,this.w=m}get width(){return this.z}set width(n){this.z=n}get height(){return this.w}set height(n){this.w=n}set(n,u,p,m){return this.x=n,this.y=u,this.z=p,this.w=m,this}setScalar(n){return this.x=n,this.y=n,this.z=n,this.w=n,this}setX(n){return this.x=n,this}setY(n){return this.y=n,this}setZ(n){return this.z=n,this}setW(n){return this.w=n,this}setComponent(n,u){switch(n){case 0:this.x=u;break;case 1:this.y=u;break;case 2:this.z=u;break;case 3:this.w=u;break;default:throw new Error("index is out of range: "+n)}return this}getComponent(n){switch(n){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+n)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(n){return this.x=n.x,this.y=n.y,this.z=n.z,this.w=n.w!==void 0?n.w:1,this}add(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z,this.w+=n.w,this}addScalar(n){return this.x+=n,this.y+=n,this.z+=n,this.w+=n,this}addVectors(n,u){return this.x=n.x+u.x,this.y=n.y+u.y,this.z=n.z+u.z,this.w=n.w+u.w,this}addScaledVector(n,u){return this.x+=n.x*u,this.y+=n.y*u,this.z+=n.z*u,this.w+=n.w*u,this}sub(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z,this.w-=n.w,this}subScalar(n){return this.x-=n,this.y-=n,this.z-=n,this.w-=n,this}subVectors(n,u){return this.x=n.x-u.x,this.y=n.y-u.y,this.z=n.z-u.z,this.w=n.w-u.w,this}multiply(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z,this.w*=n.w,this}multiplyScalar(n){return this.x*=n,this.y*=n,this.z*=n,this.w*=n,this}applyMatrix4(n){const u=this.x,p=this.y,m=this.z,v=this.w,w=n.elements;return this.x=w[0]*u+w[4]*p+w[8]*m+w[12]*v,this.y=w[1]*u+w[5]*p+w[9]*m+w[13]*v,this.z=w[2]*u+w[6]*p+w[10]*m+w[14]*v,this.w=w[3]*u+w[7]*p+w[11]*m+w[15]*v,this}divideScalar(n){return this.multiplyScalar(1/n)}setAxisAngleFromQuaternion(n){this.w=2*Math.acos(n.w);const u=Math.sqrt(1-n.w*n.w);return u<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=n.x/u,this.y=n.y/u,this.z=n.z/u),this}setAxisAngleFromRotationMatrix(n){let u,p,m,v;const I=n.elements,D=I[0],L=I[4],Y=I[8],j=I[1],te=I[5],re=I[9],ce=I[2],le=I[6],de=I[10];if(Math.abs(L-j)<.01&&Math.abs(Y-ce)<.01&&Math.abs(re-le)<.01){if(Math.abs(L+j)<.1&&Math.abs(Y+ce)<.1&&Math.abs(re+le)<.1&&Math.abs(D+te+de-3)<.1)return this.set(1,0,0,0),this;u=Math.PI;const me=(D+1)/2,we=(te+1)/2,Fe=(de+1)/2,Be=(L+j)/4,ke=(Y+ce)/4,ze=(re+le)/4;return me>we&&me>Fe?me<.01?(p=0,m=.707106781,v=.707106781):(p=Math.sqrt(me),m=Be/p,v=ke/p):we>Fe?we<.01?(p=.707106781,m=0,v=.707106781):(m=Math.sqrt(we),p=Be/m,v=ze/m):Fe<.01?(p=.707106781,m=.707106781,v=0):(v=Math.sqrt(Fe),p=ke/v,m=ze/v),this.set(p,m,v,u),this}let pe=Math.sqrt((le-re)*(le-re)+(Y-ce)*(Y-ce)+(j-L)*(j-L));return Math.abs(pe)<.001&&(pe=1),this.x=(le-re)/pe,this.y=(Y-ce)/pe,this.z=(j-L)/pe,this.w=Math.acos((D+te+de-1)/2),this}min(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this.z=Math.min(this.z,n.z),this.w=Math.min(this.w,n.w),this}max(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this.z=Math.max(this.z,n.z),this.w=Math.max(this.w,n.w),this}clamp(n,u){return this.x=Math.max(n.x,Math.min(u.x,this.x)),this.y=Math.max(n.y,Math.min(u.y,this.y)),this.z=Math.max(n.z,Math.min(u.z,this.z)),this.w=Math.max(n.w,Math.min(u.w,this.w)),this}clampScalar(n,u){return this.x=Math.max(n,Math.min(u,this.x)),this.y=Math.max(n,Math.min(u,this.y)),this.z=Math.max(n,Math.min(u,this.z)),this.w=Math.max(n,Math.min(u,this.w)),this}clampLength(n,u){const p=this.length();return this.divideScalar(p||1).multiplyScalar(Math.max(n,Math.min(u,p)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(n){return this.x*n.x+this.y*n.y+this.z*n.z+this.w*n.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(n){return this.normalize().multiplyScalar(n)}lerp(n,u){return this.x+=(n.x-this.x)*u,this.y+=(n.y-this.y)*u,this.z+=(n.z-this.z)*u,this.w+=(n.w-this.w)*u,this}lerpVectors(n,u,p){return this.x=n.x+(u.x-n.x)*p,this.y=n.y+(u.y-n.y)*p,this.z=n.z+(u.z-n.z)*p,this.w=n.w+(u.w-n.w)*p,this}equals(n){return n.x===this.x&&n.y===this.y&&n.z===this.z&&n.w===this.w}fromArray(n,u=0){return this.x=n[u],this.y=n[u+1],this.z=n[u+2],this.w=n[u+3],this}toArray(n=[],u=0){return n[u]=this.x,n[u+1]=this.y,n[u+2]=this.z,n[u+3]=this.w,n}fromBufferAttribute(n,u){return this.x=n.getX(u),this.y=n.getY(u),this.z=n.getZ(u),this.w=n.getW(u),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Hc extends P0{constructor(n=1,u=1,p={}){super(),this.isRenderTarget=!0,this.width=n,this.height=u,this.depth=1,this.scissor=new Rr(0,0,n,u),this.scissorTest=!1,this.viewport=new Rr(0,0,n,u);const m={width:n,height:u,depth:1};p=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Wt,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},p);const v=new on(m,p.mapping,p.wrapS,p.wrapT,p.magFilter,p.minFilter,p.format,p.type,p.anisotropy,p.colorSpace);v.flipY=!1,v.generateMipmaps=p.generateMipmaps,v.internalFormat=p.internalFormat,this.textures=[];const w=p.count;for(let S=0;S<w;S++)this.textures[S]=v.clone(),this.textures[S].isRenderTargetTexture=!0;this.depthBuffer=p.depthBuffer,this.stencilBuffer=p.stencilBuffer,this.resolveDepthBuffer=p.resolveDepthBuffer,this.resolveStencilBuffer=p.resolveStencilBuffer,this.depthTexture=p.depthTexture,this.samples=p.samples}get texture(){return this.textures[0]}set texture(n){this.textures[0]=n}setSize(n,u,p=1){if(this.width!==n||this.height!==u||this.depth!==p){this.width=n,this.height=u,this.depth=p;for(let m=0,v=this.textures.length;m<v;m++)this.textures[m].image.width=n,this.textures[m].image.height=u,this.textures[m].image.depth=p;this.dispose()}this.viewport.set(0,0,n,u),this.scissor.set(0,0,n,u)}clone(){return new this.constructor().copy(this)}copy(n){this.width=n.width,this.height=n.height,this.depth=n.depth,this.scissor.copy(n.scissor),this.scissorTest=n.scissorTest,this.viewport.copy(n.viewport),this.textures.length=0;for(let p=0,m=n.textures.length;p<m;p++)this.textures[p]=n.textures[p].clone(),this.textures[p].isRenderTargetTexture=!0;const u=Object.assign({},n.texture.image);return this.texture.source=new Js(u),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,n.depthTexture!==null&&(this.depthTexture=n.depthTexture.clone()),this.samples=n.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Wn extends Hc{constructor(n=1,u=1,p={}){super(n,u,p),this.isWebGLRenderTarget=!0}}class gn extends on{constructor(n=null,u=1,p=1,m=1){super(null),this.isDataArrayTexture=!0,this.image={data:n,width:u,height:p,depth:m},this.magFilter=pt,this.minFilter=pt,this.wrapR=He,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Wu extends Wn{constructor(n=1,u=1,p=1,m={}){super(n,u,m),this.isWebGLArrayRenderTarget=!0,this.depth=p,this.texture=new gn(null,n,u,p),this.texture.isRenderTargetTexture=!0}}class L1 extends on{constructor(n=null,u=1,p=1,m=1){super(null),this.isData3DTexture=!0,this.image={data:n,width:u,height:p,depth:m},this.magFilter=pt,this.minFilter=pt,this.wrapR=He,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class qu extends Wn{constructor(n=1,u=1,p=1,m={}){super(n,u,m),this.isWebGL3DRenderTarget=!0,this.depth=p,this.texture=new L1(null,n,u,p),this.texture.isRenderTargetTexture=!0}}class qn{constructor(n=0,u=0,p=0,m=1){this.isQuaternion=!0,this._x=n,this._y=u,this._z=p,this._w=m}static slerpFlat(n,u,p,m,v,w,S){let I=p[m+0],D=p[m+1],L=p[m+2],Y=p[m+3];const j=v[w+0],te=v[w+1],re=v[w+2],ce=v[w+3];if(S===0)return n[u+0]=I,n[u+1]=D,n[u+2]=L,void(n[u+3]=Y);if(S===1)return n[u+0]=j,n[u+1]=te,n[u+2]=re,void(n[u+3]=ce);if(Y!==ce||I!==j||D!==te||L!==re){let le=1-S;const de=I*j+D*te+L*re+Y*ce,pe=de>=0?1:-1,me=1-de*de;if(me>Number.EPSILON){const Fe=Math.sqrt(me),Be=Math.atan2(Fe,de*pe);le=Math.sin(le*Be)/Fe,S=Math.sin(S*Be)/Fe}const we=S*pe;if(I=I*le+j*we,D=D*le+te*we,L=L*le+re*we,Y=Y*le+ce*we,le===1-S){const Fe=1/Math.sqrt(I*I+D*D+L*L+Y*Y);I*=Fe,D*=Fe,L*=Fe,Y*=Fe}}n[u]=I,n[u+1]=D,n[u+2]=L,n[u+3]=Y}static multiplyQuaternionsFlat(n,u,p,m,v,w){const S=p[m],I=p[m+1],D=p[m+2],L=p[m+3],Y=v[w],j=v[w+1],te=v[w+2],re=v[w+3];return n[u]=S*re+L*Y+I*te-D*j,n[u+1]=I*re+L*j+D*Y-S*te,n[u+2]=D*re+L*te+S*j-I*Y,n[u+3]=L*re-S*Y-I*j-D*te,n}get x(){return this._x}set x(n){this._x=n,this._onChangeCallback()}get y(){return this._y}set y(n){this._y=n,this._onChangeCallback()}get z(){return this._z}set z(n){this._z=n,this._onChangeCallback()}get w(){return this._w}set w(n){this._w=n,this._onChangeCallback()}set(n,u,p,m){return this._x=n,this._y=u,this._z=p,this._w=m,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(n){return this._x=n.x,this._y=n.y,this._z=n.z,this._w=n.w,this._onChangeCallback(),this}setFromEuler(n,u=!0){const p=n._x,m=n._y,v=n._z,w=n._order,S=Math.cos,I=Math.sin,D=S(p/2),L=S(m/2),Y=S(v/2),j=I(p/2),te=I(m/2),re=I(v/2);switch(w){case"XYZ":this._x=j*L*Y+D*te*re,this._y=D*te*Y-j*L*re,this._z=D*L*re+j*te*Y,this._w=D*L*Y-j*te*re;break;case"YXZ":this._x=j*L*Y+D*te*re,this._y=D*te*Y-j*L*re,this._z=D*L*re-j*te*Y,this._w=D*L*Y+j*te*re;break;case"ZXY":this._x=j*L*Y-D*te*re,this._y=D*te*Y+j*L*re,this._z=D*L*re+j*te*Y,this._w=D*L*Y-j*te*re;break;case"ZYX":this._x=j*L*Y-D*te*re,this._y=D*te*Y+j*L*re,this._z=D*L*re-j*te*Y,this._w=D*L*Y+j*te*re;break;case"YZX":this._x=j*L*Y+D*te*re,this._y=D*te*Y+j*L*re,this._z=D*L*re-j*te*Y,this._w=D*L*Y-j*te*re;break;case"XZY":this._x=j*L*Y-D*te*re,this._y=D*te*Y-j*L*re,this._z=D*L*re+j*te*Y,this._w=D*L*Y+j*te*re;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+w)}return u===!0&&this._onChangeCallback(),this}setFromAxisAngle(n,u){const p=u/2,m=Math.sin(p);return this._x=n.x*m,this._y=n.y*m,this._z=n.z*m,this._w=Math.cos(p),this._onChangeCallback(),this}setFromRotationMatrix(n){const u=n.elements,p=u[0],m=u[4],v=u[8],w=u[1],S=u[5],I=u[9],D=u[2],L=u[6],Y=u[10],j=p+S+Y;if(j>0){const te=.5/Math.sqrt(j+1);this._w=.25/te,this._x=(L-I)*te,this._y=(v-D)*te,this._z=(w-m)*te}else if(p>S&&p>Y){const te=2*Math.sqrt(1+p-S-Y);this._w=(L-I)/te,this._x=.25*te,this._y=(m+w)/te,this._z=(v+D)/te}else if(S>Y){const te=2*Math.sqrt(1+S-p-Y);this._w=(v-D)/te,this._x=(m+w)/te,this._y=.25*te,this._z=(I+L)/te}else{const te=2*Math.sqrt(1+Y-p-S);this._w=(w-m)/te,this._x=(v+D)/te,this._y=(I+L)/te,this._z=.25*te}return this._onChangeCallback(),this}setFromUnitVectors(n,u){let p=n.dot(u)+1;return p<Number.EPSILON?(p=0,Math.abs(n.x)>Math.abs(n.z)?(this._x=-n.y,this._y=n.x,this._z=0,this._w=p):(this._x=0,this._y=-n.z,this._z=n.y,this._w=p)):(this._x=n.y*u.z-n.z*u.y,this._y=n.z*u.x-n.x*u.z,this._z=n.x*u.y-n.y*u.x,this._w=p),this.normalize()}angleTo(n){return 2*Math.acos(Math.abs(mn(this.dot(n),-1,1)))}rotateTowards(n,u){const p=this.angleTo(n);if(p===0)return this;const m=Math.min(1,u/p);return this.slerp(n,m),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(n){return this._x*n._x+this._y*n._y+this._z*n._z+this._w*n._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let n=this.length();return n===0?(this._x=0,this._y=0,this._z=0,this._w=1):(n=1/n,this._x=this._x*n,this._y=this._y*n,this._z=this._z*n,this._w=this._w*n),this._onChangeCallback(),this}multiply(n){return this.multiplyQuaternions(this,n)}premultiply(n){return this.multiplyQuaternions(n,this)}multiplyQuaternions(n,u){const p=n._x,m=n._y,v=n._z,w=n._w,S=u._x,I=u._y,D=u._z,L=u._w;return this._x=p*L+w*S+m*D-v*I,this._y=m*L+w*I+v*S-p*D,this._z=v*L+w*D+p*I-m*S,this._w=w*L-p*S-m*I-v*D,this._onChangeCallback(),this}slerp(n,u){if(u===0)return this;if(u===1)return this.copy(n);const p=this._x,m=this._y,v=this._z,w=this._w;let S=w*n._w+p*n._x+m*n._y+v*n._z;if(S<0?(this._w=-n._w,this._x=-n._x,this._y=-n._y,this._z=-n._z,S=-S):this.copy(n),S>=1)return this._w=w,this._x=p,this._y=m,this._z=v,this;const I=1-S*S;if(I<=Number.EPSILON){const te=1-u;return this._w=te*w+u*this._w,this._x=te*p+u*this._x,this._y=te*m+u*this._y,this._z=te*v+u*this._z,this.normalize(),this}const D=Math.sqrt(I),L=Math.atan2(D,S),Y=Math.sin((1-u)*L)/D,j=Math.sin(u*L)/D;return this._w=w*Y+this._w*j,this._x=p*Y+this._x*j,this._y=m*Y+this._y*j,this._z=v*Y+this._z*j,this._onChangeCallback(),this}slerpQuaternions(n,u,p){return this.copy(n).slerp(u,p)}random(){const n=2*Math.PI*Math.random(),u=2*Math.PI*Math.random(),p=Math.random(),m=Math.sqrt(1-p),v=Math.sqrt(p);return this.set(m*Math.sin(n),m*Math.cos(n),v*Math.sin(u),v*Math.cos(u))}equals(n){return n._x===this._x&&n._y===this._y&&n._z===this._z&&n._w===this._w}fromArray(n,u=0){return this._x=n[u],this._y=n[u+1],this._z=n[u+2],this._w=n[u+3],this._onChangeCallback(),this}toArray(n=[],u=0){return n[u]=this._x,n[u+1]=this._y,n[u+2]=this._z,n[u+3]=this._w,n}fromBufferAttribute(n,u){return this._x=n.getX(u),this._y=n.getY(u),this._z=n.getZ(u),this._w=n.getW(u),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(n){return this._onChangeCallback=n,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Le{constructor(n=0,u=0,p=0){Le.prototype.isVector3=!0,this.x=n,this.y=u,this.z=p}set(n,u,p){return p===void 0&&(p=this.z),this.x=n,this.y=u,this.z=p,this}setScalar(n){return this.x=n,this.y=n,this.z=n,this}setX(n){return this.x=n,this}setY(n){return this.y=n,this}setZ(n){return this.z=n,this}setComponent(n,u){switch(n){case 0:this.x=u;break;case 1:this.y=u;break;case 2:this.z=u;break;default:throw new Error("index is out of range: "+n)}return this}getComponent(n){switch(n){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+n)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(n){return this.x=n.x,this.y=n.y,this.z=n.z,this}add(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z,this}addScalar(n){return this.x+=n,this.y+=n,this.z+=n,this}addVectors(n,u){return this.x=n.x+u.x,this.y=n.y+u.y,this.z=n.z+u.z,this}addScaledVector(n,u){return this.x+=n.x*u,this.y+=n.y*u,this.z+=n.z*u,this}sub(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z,this}subScalar(n){return this.x-=n,this.y-=n,this.z-=n,this}subVectors(n,u){return this.x=n.x-u.x,this.y=n.y-u.y,this.z=n.z-u.z,this}multiply(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z,this}multiplyScalar(n){return this.x*=n,this.y*=n,this.z*=n,this}multiplyVectors(n,u){return this.x=n.x*u.x,this.y=n.y*u.y,this.z=n.z*u.z,this}applyEuler(n){return this.applyQuaternion(Gc.setFromEuler(n))}applyAxisAngle(n,u){return this.applyQuaternion(Gc.setFromAxisAngle(n,u))}applyMatrix3(n){const u=this.x,p=this.y,m=this.z,v=n.elements;return this.x=v[0]*u+v[3]*p+v[6]*m,this.y=v[1]*u+v[4]*p+v[7]*m,this.z=v[2]*u+v[5]*p+v[8]*m,this}applyNormalMatrix(n){return this.applyMatrix3(n).normalize()}applyMatrix4(n){const u=this.x,p=this.y,m=this.z,v=n.elements,w=1/(v[3]*u+v[7]*p+v[11]*m+v[15]);return this.x=(v[0]*u+v[4]*p+v[8]*m+v[12])*w,this.y=(v[1]*u+v[5]*p+v[9]*m+v[13])*w,this.z=(v[2]*u+v[6]*p+v[10]*m+v[14])*w,this}applyQuaternion(n){const u=this.x,p=this.y,m=this.z,v=n.x,w=n.y,S=n.z,I=n.w,D=2*(w*m-S*p),L=2*(S*u-v*m),Y=2*(v*p-w*u);return this.x=u+I*D+w*Y-S*L,this.y=p+I*L+S*D-v*Y,this.z=m+I*Y+v*L-w*D,this}project(n){return this.applyMatrix4(n.matrixWorldInverse).applyMatrix4(n.projectionMatrix)}unproject(n){return this.applyMatrix4(n.projectionMatrixInverse).applyMatrix4(n.matrixWorld)}transformDirection(n){const u=this.x,p=this.y,m=this.z,v=n.elements;return this.x=v[0]*u+v[4]*p+v[8]*m,this.y=v[1]*u+v[5]*p+v[9]*m,this.z=v[2]*u+v[6]*p+v[10]*m,this.normalize()}divide(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z,this}divideScalar(n){return this.multiplyScalar(1/n)}min(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this.z=Math.min(this.z,n.z),this}max(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this.z=Math.max(this.z,n.z),this}clamp(n,u){return this.x=Math.max(n.x,Math.min(u.x,this.x)),this.y=Math.max(n.y,Math.min(u.y,this.y)),this.z=Math.max(n.z,Math.min(u.z,this.z)),this}clampScalar(n,u){return this.x=Math.max(n,Math.min(u,this.x)),this.y=Math.max(n,Math.min(u,this.y)),this.z=Math.max(n,Math.min(u,this.z)),this}clampLength(n,u){const p=this.length();return this.divideScalar(p||1).multiplyScalar(Math.max(n,Math.min(u,p)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(n){return this.x*n.x+this.y*n.y+this.z*n.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(n){return this.normalize().multiplyScalar(n)}lerp(n,u){return this.x+=(n.x-this.x)*u,this.y+=(n.y-this.y)*u,this.z+=(n.z-this.z)*u,this}lerpVectors(n,u,p){return this.x=n.x+(u.x-n.x)*p,this.y=n.y+(u.y-n.y)*p,this.z=n.z+(u.z-n.z)*p,this}cross(n){return this.crossVectors(this,n)}crossVectors(n,u){const p=n.x,m=n.y,v=n.z,w=u.x,S=u.y,I=u.z;return this.x=m*I-v*S,this.y=v*w-p*I,this.z=p*S-m*w,this}projectOnVector(n){const u=n.lengthSq();if(u===0)return this.set(0,0,0);const p=n.dot(this)/u;return this.copy(n).multiplyScalar(p)}projectOnPlane(n){return zc.copy(this).projectOnVector(n),this.sub(zc)}reflect(n){return this.sub(zc.copy(n).multiplyScalar(2*this.dot(n)))}angleTo(n){const u=Math.sqrt(this.lengthSq()*n.lengthSq());if(u===0)return Math.PI/2;const p=this.dot(n)/u;return Math.acos(mn(p,-1,1))}distanceTo(n){return Math.sqrt(this.distanceToSquared(n))}distanceToSquared(n){const u=this.x-n.x,p=this.y-n.y,m=this.z-n.z;return u*u+p*p+m*m}manhattanDistanceTo(n){return Math.abs(this.x-n.x)+Math.abs(this.y-n.y)+Math.abs(this.z-n.z)}setFromSpherical(n){return this.setFromSphericalCoords(n.radius,n.phi,n.theta)}setFromSphericalCoords(n,u,p){const m=Math.sin(u)*n;return this.x=m*Math.sin(p),this.y=Math.cos(u)*n,this.z=m*Math.cos(p),this}setFromCylindrical(n){return this.setFromCylindricalCoords(n.radius,n.theta,n.y)}setFromCylindricalCoords(n,u,p){return this.x=n*Math.sin(u),this.y=p,this.z=n*Math.cos(u),this}setFromMatrixPosition(n){const u=n.elements;return this.x=u[12],this.y=u[13],this.z=u[14],this}setFromMatrixScale(n){const u=this.setFromMatrixColumn(n,0).length(),p=this.setFromMatrixColumn(n,1).length(),m=this.setFromMatrixColumn(n,2).length();return this.x=u,this.y=p,this.z=m,this}setFromMatrixColumn(n,u){return this.fromArray(n.elements,4*u)}setFromMatrix3Column(n,u){return this.fromArray(n.elements,3*u)}setFromEuler(n){return this.x=n._x,this.y=n._y,this.z=n._z,this}setFromColor(n){return this.x=n.r,this.y=n.g,this.z=n.b,this}equals(n){return n.x===this.x&&n.y===this.y&&n.z===this.z}fromArray(n,u=0){return this.x=n[u],this.y=n[u+1],this.z=n[u+2],this}toArray(n=[],u=0){return n[u]=this.x,n[u+1]=this.y,n[u+2]=this.z,n}fromBufferAttribute(n,u){return this.x=n.getX(u),this.y=n.getY(u),this.z=n.getZ(u),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const n=Math.random()*Math.PI*2,u=2*Math.random()-1,p=Math.sqrt(1-u*u);return this.x=p*Math.cos(n),this.y=u,this.z=p*Math.sin(n),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const zc=new Le,Gc=new qn;class Xn{constructor(n=new Le(1/0,1/0,1/0),u=new Le(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=n,this.max=u}set(n,u){return this.min.copy(n),this.max.copy(u),this}setFromArray(n){this.makeEmpty();for(let u=0,p=n.length;u<p;u+=3)this.expandByPoint(es.fromArray(n,u));return this}setFromBufferAttribute(n){this.makeEmpty();for(let u=0,p=n.count;u<p;u++)this.expandByPoint(es.fromBufferAttribute(n,u));return this}setFromPoints(n){this.makeEmpty();for(let u=0,p=n.length;u<p;u++)this.expandByPoint(n[u]);return this}setFromCenterAndSize(n,u){const p=es.copy(u).multiplyScalar(.5);return this.min.copy(n).sub(p),this.max.copy(n).add(p),this}setFromObject(n,u=!1){return this.makeEmpty(),this.expandByObject(n,u)}clone(){return new this.constructor().copy(this)}copy(n){return this.min.copy(n.min),this.max.copy(n.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(n){return this.isEmpty()?n.set(0,0,0):n.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(n){return this.isEmpty()?n.set(0,0,0):n.subVectors(this.max,this.min)}expandByPoint(n){return this.min.min(n),this.max.max(n),this}expandByVector(n){return this.min.sub(n),this.max.add(n),this}expandByScalar(n){return this.min.addScalar(-n),this.max.addScalar(n),this}expandByObject(n,u=!1){n.updateWorldMatrix(!1,!1);const p=n.geometry;if(p!==void 0){const v=p.getAttribute("position");if(u===!0&&v!==void 0&&n.isInstancedMesh!==!0)for(let w=0,S=v.count;w<S;w++)n.isMesh===!0?n.getVertexPosition(w,es):es.fromBufferAttribute(v,w),es.applyMatrix4(n.matrixWorld),this.expandByPoint(es);else n.boundingBox!==void 0?(n.boundingBox===null&&n.computeBoundingBox(),P1.copy(n.boundingBox)):(p.boundingBox===null&&p.computeBoundingBox(),P1.copy(p.boundingBox)),P1.applyMatrix4(n.matrixWorld),this.union(P1)}const m=n.children;for(let v=0,w=m.length;v<w;v++)this.expandByObject(m[v],u);return this}containsPoint(n){return!(n.x<this.min.x||n.x>this.max.x||n.y<this.min.y||n.y>this.max.y||n.z<this.min.z||n.z>this.max.z)}containsBox(n){return this.min.x<=n.min.x&&n.max.x<=this.max.x&&this.min.y<=n.min.y&&n.max.y<=this.max.y&&this.min.z<=n.min.z&&n.max.z<=this.max.z}getParameter(n,u){return u.set((n.x-this.min.x)/(this.max.x-this.min.x),(n.y-this.min.y)/(this.max.y-this.min.y),(n.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(n){return!(n.max.x<this.min.x||n.min.x>this.max.x||n.max.y<this.min.y||n.min.y>this.max.y||n.max.z<this.min.z||n.min.z>this.max.z)}intersectsSphere(n){return this.clampPoint(n.center,es),es.distanceToSquared(n.center)<=n.radius*n.radius}intersectsPlane(n){let u,p;return n.normal.x>0?(u=n.normal.x*this.min.x,p=n.normal.x*this.max.x):(u=n.normal.x*this.max.x,p=n.normal.x*this.min.x),n.normal.y>0?(u+=n.normal.y*this.min.y,p+=n.normal.y*this.max.y):(u+=n.normal.y*this.max.y,p+=n.normal.y*this.min.y),n.normal.z>0?(u+=n.normal.z*this.min.z,p+=n.normal.z*this.max.z):(u+=n.normal.z*this.max.z,p+=n.normal.z*this.min.z),u<=-n.constant&&p>=-n.constant}intersectsTriangle(n){if(this.isEmpty())return!1;this.getCenter(Ga),Va.subVectors(this.max,Ga),$o.subVectors(n.a,Ga),jo.subVectors(n.b,Ga),ea.subVectors(n.c,Ga),Zs.subVectors(jo,$o),As.subVectors(ea,jo),vo.subVectors($o,ea);let u=[0,-Zs.z,Zs.y,0,-As.z,As.y,0,-vo.z,vo.y,Zs.z,0,-Zs.x,As.z,0,-As.x,vo.z,0,-vo.x,-Zs.y,Zs.x,0,-As.y,As.x,0,-vo.y,vo.x,0];return!!Wa(u,$o,jo,ea,Va)&&(u=[1,0,0,0,1,0,0,0,1],!!Wa(u,$o,jo,ea,Va)&&(F1.crossVectors(Zs,As),u=[F1.x,F1.y,F1.z],Wa(u,$o,jo,ea,Va)))}clampPoint(n,u){return u.copy(n).clamp(this.min,this.max)}distanceToPoint(n){return this.clampPoint(n,es).distanceTo(n)}getBoundingSphere(n){return this.isEmpty()?n.makeEmpty():(this.getCenter(n.center),n.radius=.5*this.getSize(es).length()),n}intersect(n){return this.min.max(n.min),this.max.min(n.max),this.isEmpty()&&this.makeEmpty(),this}union(n){return this.min.min(n.min),this.max.max(n.max),this}applyMatrix4(n){return this.isEmpty()||(Ps[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(n),Ps[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(n),Ps[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(n),Ps[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(n),Ps[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(n),Ps[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(n),Ps[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(n),Ps[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(n),this.setFromPoints(Ps)),this}translate(n){return this.min.add(n),this.max.add(n),this}equals(n){return n.min.equals(this.min)&&n.max.equals(this.max)}}const Ps=[new Le,new Le,new Le,new Le,new Le,new Le,new Le,new Le],es=new Le,P1=new Xn,$o=new Le,jo=new Le,ea=new Le,Zs=new Le,As=new Le,vo=new Le,Ga=new Le,Va=new Le,F1=new Le,Eo=new Le;function Wa(b,n,u,p,m){for(let v=0,w=b.length-3;v<=w;v+=3){Eo.fromArray(b,v);const S=m.x*Math.abs(Eo.x)+m.y*Math.abs(Eo.y)+m.z*Math.abs(Eo.z),I=n.dot(Eo),D=u.dot(Eo),L=p.dot(Eo);if(Math.max(-Math.max(I,D,L),Math.min(I,D,L))>S)return!1}return!0}const Xu=new Xn,yo=new Le,ta=new Le;class Yn{constructor(n=new Le,u=-1){this.isSphere=!0,this.center=n,this.radius=u}set(n,u){return this.center.copy(n),this.radius=u,this}setFromPoints(n,u){const p=this.center;u!==void 0?p.copy(u):Xu.setFromPoints(n).getCenter(p);let m=0;for(let v=0,w=n.length;v<w;v++)m=Math.max(m,p.distanceToSquared(n[v]));return this.radius=Math.sqrt(m),this}copy(n){return this.center.copy(n.center),this.radius=n.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(n){return n.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(n){return n.distanceTo(this.center)-this.radius}intersectsSphere(n){const u=this.radius+n.radius;return n.center.distanceToSquared(this.center)<=u*u}intersectsBox(n){return n.intersectsSphere(this)}intersectsPlane(n){return Math.abs(n.distanceToPoint(this.center))<=this.radius}clampPoint(n,u){const p=this.center.distanceToSquared(n);return u.copy(n),p>this.radius*this.radius&&(u.sub(this.center).normalize(),u.multiplyScalar(this.radius).add(this.center)),u}getBoundingBox(n){return this.isEmpty()?(n.makeEmpty(),n):(n.set(this.center,this.center),n.expandByScalar(this.radius),n)}applyMatrix4(n){return this.center.applyMatrix4(n),this.radius=this.radius*n.getMaxScaleOnAxis(),this}translate(n){return this.center.add(n),this}expandByPoint(n){if(this.isEmpty())return this.center.copy(n),this.radius=0,this;yo.subVectors(n,this.center);const u=yo.lengthSq();if(u>this.radius*this.radius){const p=Math.sqrt(u),m=.5*(p-this.radius);this.center.addScaledVector(yo,m/p),this.radius+=m}return this}union(n){return n.isEmpty()?this:this.isEmpty()?(this.copy(n),this):(this.center.equals(n.center)===!0?this.radius=Math.max(this.radius,n.radius):(ta.subVectors(n.center,this.center).setLength(n.radius),this.expandByPoint(yo.copy(n.center).add(ta)),this.expandByPoint(yo.copy(n.center).sub(ta))),this)}equals(n){return n.center.equals(this.center)&&n.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Fs=new Le,Bl=new Le,O1=new Le,$s=new Le,Dl=new Le,ms=new Le,Or=new Le;class ts{constructor(n=new Le,u=new Le(0,0,-1)){this.origin=n,this.direction=u}set(n,u){return this.origin.copy(n),this.direction.copy(u),this}copy(n){return this.origin.copy(n.origin),this.direction.copy(n.direction),this}at(n,u){return u.copy(this.origin).addScaledVector(this.direction,n)}lookAt(n){return this.direction.copy(n).sub(this.origin).normalize(),this}recast(n){return this.origin.copy(this.at(n,Fs)),this}closestPointToPoint(n,u){u.subVectors(n,this.origin);const p=u.dot(this.direction);return p<0?u.copy(this.origin):u.copy(this.origin).addScaledVector(this.direction,p)}distanceToPoint(n){return Math.sqrt(this.distanceSqToPoint(n))}distanceSqToPoint(n){const u=Fs.subVectors(n,this.origin).dot(this.direction);return u<0?this.origin.distanceToSquared(n):(Fs.copy(this.origin).addScaledVector(this.direction,u),Fs.distanceToSquared(n))}distanceSqToSegment(n,u,p,m){Bl.copy(n).add(u).multiplyScalar(.5),O1.copy(u).sub(n).normalize(),$s.copy(this.origin).sub(Bl);const v=.5*n.distanceTo(u),w=-this.direction.dot(O1),S=$s.dot(this.direction),I=-$s.dot(O1),D=$s.lengthSq(),L=Math.abs(1-w*w);let Y,j,te,re;if(L>0)if(Y=w*I-S,j=w*S-I,re=v*L,Y>=0)if(j>=-re)if(j<=re){const ce=1/L;Y*=ce,j*=ce,te=Y*(Y+w*j+2*S)+j*(w*Y+j+2*I)+D}else j=v,Y=Math.max(0,-(w*j+S)),te=-Y*Y+j*(j+2*I)+D;else j=-v,Y=Math.max(0,-(w*j+S)),te=-Y*Y+j*(j+2*I)+D;else j<=-re?(Y=Math.max(0,-(-w*v+S)),j=Y>0?-v:Math.min(Math.max(-v,-I),v),te=-Y*Y+j*(j+2*I)+D):j<=re?(Y=0,j=Math.min(Math.max(-v,-I),v),te=j*(j+2*I)+D):(Y=Math.max(0,-(w*v+S)),j=Y>0?v:Math.min(Math.max(-v,-I),v),te=-Y*Y+j*(j+2*I)+D);else j=w>0?-v:v,Y=Math.max(0,-(w*j+S)),te=-Y*Y+j*(j+2*I)+D;return p&&p.copy(this.origin).addScaledVector(this.direction,Y),m&&m.copy(Bl).addScaledVector(O1,j),te}intersectSphere(n,u){Fs.subVectors(n.center,this.origin);const p=Fs.dot(this.direction),m=Fs.dot(Fs)-p*p,v=n.radius*n.radius;if(m>v)return null;const w=Math.sqrt(v-m),S=p-w,I=p+w;return I<0?null:S<0?this.at(I,u):this.at(S,u)}intersectsSphere(n){return this.distanceSqToPoint(n.center)<=n.radius*n.radius}distanceToPlane(n){const u=n.normal.dot(this.direction);if(u===0)return n.distanceToPoint(this.origin)===0?0:null;const p=-(this.origin.dot(n.normal)+n.constant)/u;return p>=0?p:null}intersectPlane(n,u){const p=this.distanceToPlane(n);return p===null?null:this.at(p,u)}intersectsPlane(n){const u=n.distanceToPoint(this.origin);return u===0||n.normal.dot(this.direction)*u<0}intersectBox(n,u){let p,m,v,w,S,I;const D=1/this.direction.x,L=1/this.direction.y,Y=1/this.direction.z,j=this.origin;return D>=0?(p=(n.min.x-j.x)*D,m=(n.max.x-j.x)*D):(p=(n.max.x-j.x)*D,m=(n.min.x-j.x)*D),L>=0?(v=(n.min.y-j.y)*L,w=(n.max.y-j.y)*L):(v=(n.max.y-j.y)*L,w=(n.min.y-j.y)*L),p>w||v>m?null:((v>p||isNaN(p))&&(p=v),(w<m||isNaN(m))&&(m=w),Y>=0?(S=(n.min.z-j.z)*Y,I=(n.max.z-j.z)*Y):(S=(n.max.z-j.z)*Y,I=(n.min.z-j.z)*Y),p>I||S>m?null:((S>p||p!=p)&&(p=S),(I<m||m!=m)&&(m=I),m<0?null:this.at(p>=0?p:m,u)))}intersectsBox(n){return this.intersectBox(n,Fs)!==null}intersectTriangle(n,u,p,m,v){Dl.subVectors(u,n),ms.subVectors(p,n),Or.crossVectors(Dl,ms);let w,S=this.direction.dot(Or);if(S>0){if(m)return null;w=1}else{if(!(S<0))return null;w=-1,S=-S}$s.subVectors(this.origin,n);const I=w*this.direction.dot(ms.crossVectors($s,ms));if(I<0)return null;const D=w*this.direction.dot(Dl.cross($s));if(D<0||I+D>S)return null;const L=-w*$s.dot(Or);return L<0?null:this.at(L/S,v)}applyMatrix4(n){return this.origin.applyMatrix4(n),this.direction.transformDirection(n),this}equals(n){return n.origin.equals(this.origin)&&n.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ii{constructor(n,u,p,m,v,w,S,I,D,L,Y,j,te,re,ce,le){Ii.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n!==void 0&&this.set(n,u,p,m,v,w,S,I,D,L,Y,j,te,re,ce,le)}set(n,u,p,m,v,w,S,I,D,L,Y,j,te,re,ce,le){const de=this.elements;return de[0]=n,de[4]=u,de[8]=p,de[12]=m,de[1]=v,de[5]=w,de[9]=S,de[13]=I,de[2]=D,de[6]=L,de[10]=Y,de[14]=j,de[3]=te,de[7]=re,de[11]=ce,de[15]=le,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ii().fromArray(this.elements)}copy(n){const u=this.elements,p=n.elements;return u[0]=p[0],u[1]=p[1],u[2]=p[2],u[3]=p[3],u[4]=p[4],u[5]=p[5],u[6]=p[6],u[7]=p[7],u[8]=p[8],u[9]=p[9],u[10]=p[10],u[11]=p[11],u[12]=p[12],u[13]=p[13],u[14]=p[14],u[15]=p[15],this}copyPosition(n){const u=this.elements,p=n.elements;return u[12]=p[12],u[13]=p[13],u[14]=p[14],this}setFromMatrix3(n){const u=n.elements;return this.set(u[0],u[3],u[6],0,u[1],u[4],u[7],0,u[2],u[5],u[8],0,0,0,0,1),this}extractBasis(n,u,p){return n.setFromMatrixColumn(this,0),u.setFromMatrixColumn(this,1),p.setFromMatrixColumn(this,2),this}makeBasis(n,u,p){return this.set(n.x,u.x,p.x,0,n.y,u.y,p.y,0,n.z,u.z,p.z,0,0,0,0,1),this}extractRotation(n){const u=this.elements,p=n.elements,m=1/ia.setFromMatrixColumn(n,0).length(),v=1/ia.setFromMatrixColumn(n,1).length(),w=1/ia.setFromMatrixColumn(n,2).length();return u[0]=p[0]*m,u[1]=p[1]*m,u[2]=p[2]*m,u[3]=0,u[4]=p[4]*v,u[5]=p[5]*v,u[6]=p[6]*v,u[7]=0,u[8]=p[8]*w,u[9]=p[9]*w,u[10]=p[10]*w,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,this}makeRotationFromEuler(n){const u=this.elements,p=n.x,m=n.y,v=n.z,w=Math.cos(p),S=Math.sin(p),I=Math.cos(m),D=Math.sin(m),L=Math.cos(v),Y=Math.sin(v);if(n.order==="XYZ"){const j=w*L,te=w*Y,re=S*L,ce=S*Y;u[0]=I*L,u[4]=-I*Y,u[8]=D,u[1]=te+re*D,u[5]=j-ce*D,u[9]=-S*I,u[2]=ce-j*D,u[6]=re+te*D,u[10]=w*I}else if(n.order==="YXZ"){const j=I*L,te=I*Y,re=D*L,ce=D*Y;u[0]=j+ce*S,u[4]=re*S-te,u[8]=w*D,u[1]=w*Y,u[5]=w*L,u[9]=-S,u[2]=te*S-re,u[6]=ce+j*S,u[10]=w*I}else if(n.order==="ZXY"){const j=I*L,te=I*Y,re=D*L,ce=D*Y;u[0]=j-ce*S,u[4]=-w*Y,u[8]=re+te*S,u[1]=te+re*S,u[5]=w*L,u[9]=ce-j*S,u[2]=-w*D,u[6]=S,u[10]=w*I}else if(n.order==="ZYX"){const j=w*L,te=w*Y,re=S*L,ce=S*Y;u[0]=I*L,u[4]=re*D-te,u[8]=j*D+ce,u[1]=I*Y,u[5]=ce*D+j,u[9]=te*D-re,u[2]=-D,u[6]=S*I,u[10]=w*I}else if(n.order==="YZX"){const j=w*I,te=w*D,re=S*I,ce=S*D;u[0]=I*L,u[4]=ce-j*Y,u[8]=re*Y+te,u[1]=Y,u[5]=w*L,u[9]=-S*L,u[2]=-D*L,u[6]=te*Y+re,u[10]=j-ce*Y}else if(n.order==="XZY"){const j=w*I,te=w*D,re=S*I,ce=S*D;u[0]=I*L,u[4]=-Y,u[8]=D*L,u[1]=j*Y+ce,u[5]=w*L,u[9]=te*Y-re,u[2]=re*Y-te,u[6]=S*L,u[10]=ce*Y+j}return u[3]=0,u[7]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,this}makeRotationFromQuaternion(n){return this.compose(fr,n,wo)}lookAt(n,u,p){const m=this.elements;return O0.subVectors(n,u),O0.lengthSq()===0&&(O0.z=1),O0.normalize(),js.crossVectors(p,O0),js.lengthSq()===0&&(Math.abs(p.z)===1?O0.x+=1e-4:O0.z+=1e-4,O0.normalize(),js.crossVectors(p,O0)),js.normalize(),qa.crossVectors(O0,js),m[0]=js.x,m[4]=qa.x,m[8]=O0.x,m[1]=js.y,m[5]=qa.y,m[9]=O0.y,m[2]=js.z,m[6]=qa.z,m[10]=O0.z,this}multiply(n){return this.multiplyMatrices(this,n)}premultiply(n){return this.multiplyMatrices(n,this)}multiplyMatrices(n,u){const p=n.elements,m=u.elements,v=this.elements,w=p[0],S=p[4],I=p[8],D=p[12],L=p[1],Y=p[5],j=p[9],te=p[13],re=p[2],ce=p[6],le=p[10],de=p[14],pe=p[3],me=p[7],we=p[11],Fe=p[15],Be=m[0],ke=m[4],ze=m[8],tt=m[12],rt=m[1],$e=m[5],ht=m[9],ut=m[13],at=m[2],Dt=m[6],It=m[10],Ot=m[14],Tt=m[3],Ai=m[7],yi=m[11],ni=m[15];return v[0]=w*Be+S*rt+I*at+D*Tt,v[4]=w*ke+S*$e+I*Dt+D*Ai,v[8]=w*ze+S*ht+I*It+D*yi,v[12]=w*tt+S*ut+I*Ot+D*ni,v[1]=L*Be+Y*rt+j*at+te*Tt,v[5]=L*ke+Y*$e+j*Dt+te*Ai,v[9]=L*ze+Y*ht+j*It+te*yi,v[13]=L*tt+Y*ut+j*Ot+te*ni,v[2]=re*Be+ce*rt+le*at+de*Tt,v[6]=re*ke+ce*$e+le*Dt+de*Ai,v[10]=re*ze+ce*ht+le*It+de*yi,v[14]=re*tt+ce*ut+le*Ot+de*ni,v[3]=pe*Be+me*rt+we*at+Fe*Tt,v[7]=pe*ke+me*$e+we*Dt+Fe*Ai,v[11]=pe*ze+me*ht+we*It+Fe*yi,v[15]=pe*tt+me*ut+we*Ot+Fe*ni,this}multiplyScalar(n){const u=this.elements;return u[0]*=n,u[4]*=n,u[8]*=n,u[12]*=n,u[1]*=n,u[5]*=n,u[9]*=n,u[13]*=n,u[2]*=n,u[6]*=n,u[10]*=n,u[14]*=n,u[3]*=n,u[7]*=n,u[11]*=n,u[15]*=n,this}determinant(){const n=this.elements,u=n[0],p=n[4],m=n[8],v=n[12],w=n[1],S=n[5],I=n[9],D=n[13],L=n[2],Y=n[6],j=n[10],te=n[14];return n[3]*(+v*I*Y-m*D*Y-v*S*j+p*D*j+m*S*te-p*I*te)+n[7]*(+u*I*te-u*D*j+v*w*j-m*w*te+m*D*L-v*I*L)+n[11]*(+u*D*Y-u*S*te-v*w*Y+p*w*te+v*S*L-p*D*L)+n[15]*(-m*S*L-u*I*Y+u*S*j+m*w*Y-p*w*j+p*I*L)}transpose(){const n=this.elements;let u;return u=n[1],n[1]=n[4],n[4]=u,u=n[2],n[2]=n[8],n[8]=u,u=n[6],n[6]=n[9],n[9]=u,u=n[3],n[3]=n[12],n[12]=u,u=n[7],n[7]=n[13],n[13]=u,u=n[11],n[11]=n[14],n[14]=u,this}setPosition(n,u,p){const m=this.elements;return n.isVector3?(m[12]=n.x,m[13]=n.y,m[14]=n.z):(m[12]=n,m[13]=u,m[14]=p),this}invert(){const n=this.elements,u=n[0],p=n[1],m=n[2],v=n[3],w=n[4],S=n[5],I=n[6],D=n[7],L=n[8],Y=n[9],j=n[10],te=n[11],re=n[12],ce=n[13],le=n[14],de=n[15],pe=Y*le*D-ce*j*D+ce*I*te-S*le*te-Y*I*de+S*j*de,me=re*j*D-L*le*D-re*I*te+w*le*te+L*I*de-w*j*de,we=L*ce*D-re*Y*D+re*S*te-w*ce*te-L*S*de+w*Y*de,Fe=re*Y*I-L*ce*I-re*S*j+w*ce*j+L*S*le-w*Y*le,Be=u*pe+p*me+m*we+v*Fe;if(Be===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const ke=1/Be;return n[0]=pe*ke,n[1]=(ce*j*v-Y*le*v-ce*m*te+p*le*te+Y*m*de-p*j*de)*ke,n[2]=(S*le*v-ce*I*v+ce*m*D-p*le*D-S*m*de+p*I*de)*ke,n[3]=(Y*I*v-S*j*v-Y*m*D+p*j*D+S*m*te-p*I*te)*ke,n[4]=me*ke,n[5]=(L*le*v-re*j*v+re*m*te-u*le*te-L*m*de+u*j*de)*ke,n[6]=(re*I*v-w*le*v-re*m*D+u*le*D+w*m*de-u*I*de)*ke,n[7]=(w*j*v-L*I*v+L*m*D-u*j*D-w*m*te+u*I*te)*ke,n[8]=we*ke,n[9]=(re*Y*v-L*ce*v-re*p*te+u*ce*te+L*p*de-u*Y*de)*ke,n[10]=(w*ce*v-re*S*v+re*p*D-u*ce*D-w*p*de+u*S*de)*ke,n[11]=(L*S*v-w*Y*v-L*p*D+u*Y*D+w*p*te-u*S*te)*ke,n[12]=Fe*ke,n[13]=(L*ce*m-re*Y*m+re*p*j-u*ce*j-L*p*le+u*Y*le)*ke,n[14]=(re*S*m-w*ce*m-re*p*I+u*ce*I+w*p*le-u*S*le)*ke,n[15]=(w*Y*m-L*S*m+L*p*I-u*Y*I-w*p*j+u*S*j)*ke,this}scale(n){const u=this.elements,p=n.x,m=n.y,v=n.z;return u[0]*=p,u[4]*=m,u[8]*=v,u[1]*=p,u[5]*=m,u[9]*=v,u[2]*=p,u[6]*=m,u[10]*=v,u[3]*=p,u[7]*=m,u[11]*=v,this}getMaxScaleOnAxis(){const n=this.elements,u=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],p=n[4]*n[4]+n[5]*n[5]+n[6]*n[6],m=n[8]*n[8]+n[9]*n[9]+n[10]*n[10];return Math.sqrt(Math.max(u,p,m))}makeTranslation(n,u,p){return n.isVector3?this.set(1,0,0,n.x,0,1,0,n.y,0,0,1,n.z,0,0,0,1):this.set(1,0,0,n,0,1,0,u,0,0,1,p,0,0,0,1),this}makeRotationX(n){const u=Math.cos(n),p=Math.sin(n);return this.set(1,0,0,0,0,u,-p,0,0,p,u,0,0,0,0,1),this}makeRotationY(n){const u=Math.cos(n),p=Math.sin(n);return this.set(u,0,p,0,0,1,0,0,-p,0,u,0,0,0,0,1),this}makeRotationZ(n){const u=Math.cos(n),p=Math.sin(n);return this.set(u,-p,0,0,p,u,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(n,u){const p=Math.cos(u),m=Math.sin(u),v=1-p,w=n.x,S=n.y,I=n.z,D=v*w,L=v*S;return this.set(D*w+p,D*S-m*I,D*I+m*S,0,D*S+m*I,L*S+p,L*I-m*w,0,D*I-m*S,L*I+m*w,v*I*I+p,0,0,0,0,1),this}makeScale(n,u,p){return this.set(n,0,0,0,0,u,0,0,0,0,p,0,0,0,0,1),this}makeShear(n,u,p,m,v,w){return this.set(1,p,v,0,n,1,w,0,u,m,1,0,0,0,0,1),this}compose(n,u,p){const m=this.elements,v=u._x,w=u._y,S=u._z,I=u._w,D=v+v,L=w+w,Y=S+S,j=v*D,te=v*L,re=v*Y,ce=w*L,le=w*Y,de=S*Y,pe=I*D,me=I*L,we=I*Y,Fe=p.x,Be=p.y,ke=p.z;return m[0]=(1-(ce+de))*Fe,m[1]=(te+we)*Fe,m[2]=(re-me)*Fe,m[3]=0,m[4]=(te-we)*Be,m[5]=(1-(j+de))*Be,m[6]=(le+pe)*Be,m[7]=0,m[8]=(re+me)*ke,m[9]=(le-pe)*ke,m[10]=(1-(j+ce))*ke,m[11]=0,m[12]=n.x,m[13]=n.y,m[14]=n.z,m[15]=1,this}decompose(n,u,p){const m=this.elements;let v=ia.set(m[0],m[1],m[2]).length();const w=ia.set(m[4],m[5],m[6]).length(),S=ia.set(m[8],m[9],m[10]).length();this.determinant()<0&&(v=-v),n.x=m[12],n.y=m[13],n.z=m[14],vn.copy(this);const I=1/v,D=1/w,L=1/S;return vn.elements[0]*=I,vn.elements[1]*=I,vn.elements[2]*=I,vn.elements[4]*=D,vn.elements[5]*=D,vn.elements[6]*=D,vn.elements[8]*=L,vn.elements[9]*=L,vn.elements[10]*=L,u.setFromRotationMatrix(vn),p.x=v,p.y=w,p.z=S,this}makePerspective(n,u,p,m,v,w,S=ps){const I=this.elements,D=2*v/(u-n),L=2*v/(p-m),Y=(u+n)/(u-n),j=(p+m)/(p-m);let te,re;if(S===ps)te=-(w+v)/(w-v),re=-2*w*v/(w-v);else{if(S!==Ua)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+S);te=-w/(w-v),re=-w*v/(w-v)}return I[0]=D,I[4]=0,I[8]=Y,I[12]=0,I[1]=0,I[5]=L,I[9]=j,I[13]=0,I[2]=0,I[6]=0,I[10]=te,I[14]=re,I[3]=0,I[7]=0,I[11]=-1,I[15]=0,this}makeOrthographic(n,u,p,m,v,w,S=ps){const I=this.elements,D=1/(u-n),L=1/(p-m),Y=1/(w-v),j=(u+n)*D,te=(p+m)*L;let re,ce;if(S===ps)re=(w+v)*Y,ce=-2*Y;else{if(S!==Ua)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+S);re=v*Y,ce=-1*Y}return I[0]=2*D,I[4]=0,I[8]=0,I[12]=-j,I[1]=0,I[5]=2*L,I[9]=0,I[13]=-te,I[2]=0,I[6]=0,I[10]=ce,I[14]=-re,I[3]=0,I[7]=0,I[11]=0,I[15]=1,this}equals(n){const u=this.elements,p=n.elements;for(let m=0;m<16;m++)if(u[m]!==p[m])return!1;return!0}fromArray(n,u=0){for(let p=0;p<16;p++)this.elements[p]=n[p+u];return this}toArray(n=[],u=0){const p=this.elements;return n[u]=p[0],n[u+1]=p[1],n[u+2]=p[2],n[u+3]=p[3],n[u+4]=p[4],n[u+5]=p[5],n[u+6]=p[6],n[u+7]=p[7],n[u+8]=p[8],n[u+9]=p[9],n[u+10]=p[10],n[u+11]=p[11],n[u+12]=p[12],n[u+13]=p[13],n[u+14]=p[14],n[u+15]=p[15],n}}const ia=new Le,vn=new Ii,fr=new Le(0,0,0),wo=new Le(1,1,1),js=new Le,qa=new Le,O0=new Le,Ll=new Ii,Pl=new qn;class k0{constructor(n=0,u=0,p=0,m=k0.DEFAULT_ORDER){this.isEuler=!0,this._x=n,this._y=u,this._z=p,this._order=m}get x(){return this._x}set x(n){this._x=n,this._onChangeCallback()}get y(){return this._y}set y(n){this._y=n,this._onChangeCallback()}get z(){return this._z}set z(n){this._z=n,this._onChangeCallback()}get order(){return this._order}set order(n){this._order=n,this._onChangeCallback()}set(n,u,p,m=this._order){return this._x=n,this._y=u,this._z=p,this._order=m,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(n){return this._x=n._x,this._y=n._y,this._z=n._z,this._order=n._order,this._onChangeCallback(),this}setFromRotationMatrix(n,u=this._order,p=!0){const m=n.elements,v=m[0],w=m[4],S=m[8],I=m[1],D=m[5],L=m[9],Y=m[2],j=m[6],te=m[10];switch(u){case"XYZ":this._y=Math.asin(mn(S,-1,1)),Math.abs(S)<.9999999?(this._x=Math.atan2(-L,te),this._z=Math.atan2(-w,v)):(this._x=Math.atan2(j,D),this._z=0);break;case"YXZ":this._x=Math.asin(-mn(L,-1,1)),Math.abs(L)<.9999999?(this._y=Math.atan2(S,te),this._z=Math.atan2(I,D)):(this._y=Math.atan2(-Y,v),this._z=0);break;case"ZXY":this._x=Math.asin(mn(j,-1,1)),Math.abs(j)<.9999999?(this._y=Math.atan2(-Y,te),this._z=Math.atan2(-w,D)):(this._y=0,this._z=Math.atan2(I,v));break;case"ZYX":this._y=Math.asin(-mn(Y,-1,1)),Math.abs(Y)<.9999999?(this._x=Math.atan2(j,te),this._z=Math.atan2(I,v)):(this._x=0,this._z=Math.atan2(-w,D));break;case"YZX":this._z=Math.asin(mn(I,-1,1)),Math.abs(I)<.9999999?(this._x=Math.atan2(-L,D),this._y=Math.atan2(-Y,v)):(this._x=0,this._y=Math.atan2(S,te));break;case"XZY":this._z=Math.asin(-mn(w,-1,1)),Math.abs(w)<.9999999?(this._x=Math.atan2(j,D),this._y=Math.atan2(S,v)):(this._x=Math.atan2(-L,te),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+u)}return this._order=u,p===!0&&this._onChangeCallback(),this}setFromQuaternion(n,u,p){return Ll.makeRotationFromQuaternion(n),this.setFromRotationMatrix(Ll,u,p)}setFromVector3(n,u=this._order){return this.set(n.x,n.y,n.z,u)}reorder(n){return Pl.setFromEuler(this),this.setFromQuaternion(Pl,n)}equals(n){return n._x===this._x&&n._y===this._y&&n._z===this._z&&n._order===this._order}fromArray(n){return this._x=n[0],this._y=n[1],this._z=n[2],n[3]!==void 0&&(this._order=n[3]),this._onChangeCallback(),this}toArray(n=[],u=0){return n[u]=this._x,n[u+1]=this._y,n[u+2]=this._z,n[u+3]=this._order,n}_onChange(n){return this._onChangeCallback=n,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}k0.DEFAULT_ORDER="XYZ";class bo{constructor(){this.mask=1}set(n){this.mask=(1<<n|0)>>>0}enable(n){this.mask|=1<<n|0}enableAll(){this.mask=-1}toggle(n){this.mask^=1<<n|0}disable(n){this.mask&=~(1<<n|0)}disableAll(){this.mask=0}test(n){return(this.mask&n.mask)!=0}isEnabled(n){return(this.mask&(1<<n|0))!=0}}let Vc=0;const Wc=new Le,ra=new qn,Os=new Ii,Xa=new Le,Ya=new Le,Yu=new Le,is=new qn,S0=new Le(1,0,0),qc=new Le(0,1,0),Xc=new Le(0,0,1),Yc={type:"added"},Kc={type:"removed"},na={type:"childadded",child:null},Fl={type:"childremoved",child:null};class yr extends P0{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Vc++}),this.uuid=F0(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=yr.DEFAULT_UP.clone();const n=new Le,u=new k0,p=new qn,m=new Le(1,1,1);u._onChange(function(){p.setFromEuler(u,!1)}),p._onChange(function(){u.setFromQuaternion(p,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:n},rotation:{configurable:!0,enumerable:!0,value:u},quaternion:{configurable:!0,enumerable:!0,value:p},scale:{configurable:!0,enumerable:!0,value:m},modelViewMatrix:{value:new Ii},normalMatrix:{value:new $i}}),this.matrix=new Ii,this.matrixWorld=new Ii,this.matrixAutoUpdate=yr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=yr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new bo,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(n){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(n),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(n){return this.quaternion.premultiply(n),this}setRotationFromAxisAngle(n,u){this.quaternion.setFromAxisAngle(n,u)}setRotationFromEuler(n){this.quaternion.setFromEuler(n,!0)}setRotationFromMatrix(n){this.quaternion.setFromRotationMatrix(n)}setRotationFromQuaternion(n){this.quaternion.copy(n)}rotateOnAxis(n,u){return ra.setFromAxisAngle(n,u),this.quaternion.multiply(ra),this}rotateOnWorldAxis(n,u){return ra.setFromAxisAngle(n,u),this.quaternion.premultiply(ra),this}rotateX(n){return this.rotateOnAxis(S0,n)}rotateY(n){return this.rotateOnAxis(qc,n)}rotateZ(n){return this.rotateOnAxis(Xc,n)}translateOnAxis(n,u){return Wc.copy(n).applyQuaternion(this.quaternion),this.position.add(Wc.multiplyScalar(u)),this}translateX(n){return this.translateOnAxis(S0,n)}translateY(n){return this.translateOnAxis(qc,n)}translateZ(n){return this.translateOnAxis(Xc,n)}localToWorld(n){return this.updateWorldMatrix(!0,!1),n.applyMatrix4(this.matrixWorld)}worldToLocal(n){return this.updateWorldMatrix(!0,!1),n.applyMatrix4(Os.copy(this.matrixWorld).invert())}lookAt(n,u,p){n.isVector3?Xa.copy(n):Xa.set(n,u,p);const m=this.parent;this.updateWorldMatrix(!0,!1),Ya.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Os.lookAt(Ya,Xa,this.up):Os.lookAt(Xa,Ya,this.up),this.quaternion.setFromRotationMatrix(Os),m&&(Os.extractRotation(m.matrixWorld),ra.setFromRotationMatrix(Os),this.quaternion.premultiply(ra.invert()))}add(n){if(arguments.length>1){for(let u=0;u<arguments.length;u++)this.add(arguments[u]);return this}return n===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",n),this):(n&&n.isObject3D?(n.removeFromParent(),n.parent=this,this.children.push(n),n.dispatchEvent(Yc),na.child=n,this.dispatchEvent(na),na.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",n),this)}remove(n){if(arguments.length>1){for(let p=0;p<arguments.length;p++)this.remove(arguments[p]);return this}const u=this.children.indexOf(n);return u!==-1&&(n.parent=null,this.children.splice(u,1),n.dispatchEvent(Kc),Fl.child=n,this.dispatchEvent(Fl),Fl.child=null),this}removeFromParent(){const n=this.parent;return n!==null&&n.remove(this),this}clear(){return this.remove(...this.children)}attach(n){return this.updateWorldMatrix(!0,!1),Os.copy(this.matrixWorld).invert(),n.parent!==null&&(n.parent.updateWorldMatrix(!0,!1),Os.multiply(n.parent.matrixWorld)),n.applyMatrix4(Os),n.removeFromParent(),n.parent=this,this.children.push(n),n.updateWorldMatrix(!1,!0),n.dispatchEvent(Yc),na.child=n,this.dispatchEvent(na),na.child=null,this}getObjectById(n){return this.getObjectByProperty("id",n)}getObjectByName(n){return this.getObjectByProperty("name",n)}getObjectByProperty(n,u){if(this[n]===u)return this;for(let p=0,m=this.children.length;p<m;p++){const v=this.children[p].getObjectByProperty(n,u);if(v!==void 0)return v}}getObjectsByProperty(n,u,p=[]){this[n]===u&&p.push(this);const m=this.children;for(let v=0,w=m.length;v<w;v++)m[v].getObjectsByProperty(n,u,p);return p}getWorldPosition(n){return this.updateWorldMatrix(!0,!1),n.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ya,n,Yu),n}getWorldScale(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ya,is,n),n}getWorldDirection(n){this.updateWorldMatrix(!0,!1);const u=this.matrixWorld.elements;return n.set(u[8],u[9],u[10]).normalize()}raycast(){}traverse(n){n(this);const u=this.children;for(let p=0,m=u.length;p<m;p++)u[p].traverse(n)}traverseVisible(n){if(this.visible===!1)return;n(this);const u=this.children;for(let p=0,m=u.length;p<m;p++)u[p].traverseVisible(n)}traverseAncestors(n){const u=this.parent;u!==null&&(n(u),u.traverseAncestors(n))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(n){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||n)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,n=!0);const u=this.children;for(let p=0,m=u.length;p<m;p++){const v=u[p];v.matrixWorldAutoUpdate!==!0&&n!==!0||v.updateMatrixWorld(n)}}updateWorldMatrix(n,u){const p=this.parent;if(n===!0&&p!==null&&p.matrixWorldAutoUpdate===!0&&p.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),u===!0){const m=this.children;for(let v=0,w=m.length;v<w;v++){const S=m[v];S.matrixWorldAutoUpdate===!0&&S.updateWorldMatrix(!1,!0)}}}toJSON(n){const u=n===void 0||typeof n=="string",p={};u&&(n={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},p.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const m={};function v(S,I){return S[I.uuid]===void 0&&(S[I.uuid]=I.toJSON(n)),I.uuid}if(m.uuid=this.uuid,m.type=this.type,this.name!==""&&(m.name=this.name),this.castShadow===!0&&(m.castShadow=!0),this.receiveShadow===!0&&(m.receiveShadow=!0),this.visible===!1&&(m.visible=!1),this.frustumCulled===!1&&(m.frustumCulled=!1),this.renderOrder!==0&&(m.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(m.userData=this.userData),m.layers=this.layers.mask,m.matrix=this.matrix.toArray(),m.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(m.matrixAutoUpdate=!1),this.isInstancedMesh&&(m.type="InstancedMesh",m.count=this.count,m.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(m.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(m.type="BatchedMesh",m.perObjectFrustumCulled=this.perObjectFrustumCulled,m.sortObjects=this.sortObjects,m.drawRanges=this._drawRanges,m.reservedRanges=this._reservedRanges,m.visibility=this._visibility,m.active=this._active,m.bounds=this._bounds.map(S=>({boxInitialized:S.boxInitialized,boxMin:S.box.min.toArray(),boxMax:S.box.max.toArray(),sphereInitialized:S.sphereInitialized,sphereRadius:S.sphere.radius,sphereCenter:S.sphere.center.toArray()})),m.maxGeometryCount=this._maxGeometryCount,m.maxVertexCount=this._maxVertexCount,m.maxIndexCount=this._maxIndexCount,m.geometryInitialized=this._geometryInitialized,m.geometryCount=this._geometryCount,m.matricesTexture=this._matricesTexture.toJSON(n),this.boundingSphere!==null&&(m.boundingSphere={center:m.boundingSphere.center.toArray(),radius:m.boundingSphere.radius}),this.boundingBox!==null&&(m.boundingBox={min:m.boundingBox.min.toArray(),max:m.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?m.background=this.background.toJSON():this.background.isTexture&&(m.background=this.background.toJSON(n).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(m.environment=this.environment.toJSON(n).uuid);else if(this.isMesh||this.isLine||this.isPoints){m.geometry=v(n.geometries,this.geometry);const S=this.geometry.parameters;if(S!==void 0&&S.shapes!==void 0){const I=S.shapes;if(Array.isArray(I))for(let D=0,L=I.length;D<L;D++){const Y=I[D];v(n.shapes,Y)}else v(n.shapes,I)}}if(this.isSkinnedMesh&&(m.bindMode=this.bindMode,m.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(v(n.skeletons,this.skeleton),m.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const S=[];for(let I=0,D=this.material.length;I<D;I++)S.push(v(n.materials,this.material[I]));m.material=S}else m.material=v(n.materials,this.material);if(this.children.length>0){m.children=[];for(let S=0;S<this.children.length;S++)m.children.push(this.children[S].toJSON(n).object)}if(this.animations.length>0){m.animations=[];for(let S=0;S<this.animations.length;S++){const I=this.animations[S];m.animations.push(v(n.animations,I))}}if(u){const S=w(n.geometries),I=w(n.materials),D=w(n.textures),L=w(n.images),Y=w(n.shapes),j=w(n.skeletons),te=w(n.animations),re=w(n.nodes);S.length>0&&(p.geometries=S),I.length>0&&(p.materials=I),D.length>0&&(p.textures=D),L.length>0&&(p.images=L),Y.length>0&&(p.shapes=Y),j.length>0&&(p.skeletons=j),te.length>0&&(p.animations=te),re.length>0&&(p.nodes=re)}return p.object=m,p;function w(S){const I=[];for(const D in S){const L=S[D];delete L.metadata,I.push(L)}return I}}clone(n){return new this.constructor().copy(this,n)}copy(n,u=!0){if(this.name=n.name,this.up.copy(n.up),this.position.copy(n.position),this.rotation.order=n.rotation.order,this.quaternion.copy(n.quaternion),this.scale.copy(n.scale),this.matrix.copy(n.matrix),this.matrixWorld.copy(n.matrixWorld),this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrixWorldAutoUpdate=n.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=n.matrixWorldNeedsUpdate,this.layers.mask=n.layers.mask,this.visible=n.visible,this.castShadow=n.castShadow,this.receiveShadow=n.receiveShadow,this.frustumCulled=n.frustumCulled,this.renderOrder=n.renderOrder,this.animations=n.animations.slice(),this.userData=JSON.parse(JSON.stringify(n.userData)),u===!0)for(let p=0;p<n.children.length;p++){const m=n.children[p];this.add(m.clone())}return this}}yr.DEFAULT_UP=new Le(0,1,0),yr.DEFAULT_MATRIX_AUTO_UPDATE=!0,yr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const rs=new Le,gs=new Le,eo=new Le,ks=new Le,to=new Le,Co=new Le,k1=new Le,Ol=new Le,Ka=new Le,sa=new Le;class N0{constructor(n=new Le,u=new Le,p=new Le){this.a=n,this.b=u,this.c=p}static getNormal(n,u,p,m){m.subVectors(p,u),rs.subVectors(n,u),m.cross(rs);const v=m.lengthSq();return v>0?m.multiplyScalar(1/Math.sqrt(v)):m.set(0,0,0)}static getBarycoord(n,u,p,m,v){rs.subVectors(m,u),gs.subVectors(p,u),eo.subVectors(n,u);const w=rs.dot(rs),S=rs.dot(gs),I=rs.dot(eo),D=gs.dot(gs),L=gs.dot(eo),Y=w*D-S*S;if(Y===0)return v.set(0,0,0),null;const j=1/Y,te=(D*I-S*L)*j,re=(w*L-S*I)*j;return v.set(1-te-re,re,te)}static containsPoint(n,u,p,m){return this.getBarycoord(n,u,p,m,ks)!==null&&ks.x>=0&&ks.y>=0&&ks.x+ks.y<=1}static getInterpolation(n,u,p,m,v,w,S,I){return this.getBarycoord(n,u,p,m,ks)===null?(I.x=0,I.y=0,"z"in I&&(I.z=0),"w"in I&&(I.w=0),null):(I.setScalar(0),I.addScaledVector(v,ks.x),I.addScaledVector(w,ks.y),I.addScaledVector(S,ks.z),I)}static isFrontFacing(n,u,p,m){return rs.subVectors(p,u),gs.subVectors(n,u),rs.cross(gs).dot(m)<0}set(n,u,p){return this.a.copy(n),this.b.copy(u),this.c.copy(p),this}setFromPointsAndIndices(n,u,p,m){return this.a.copy(n[u]),this.b.copy(n[p]),this.c.copy(n[m]),this}setFromAttributeAndIndices(n,u,p,m){return this.a.fromBufferAttribute(n,u),this.b.fromBufferAttribute(n,p),this.c.fromBufferAttribute(n,m),this}clone(){return new this.constructor().copy(this)}copy(n){return this.a.copy(n.a),this.b.copy(n.b),this.c.copy(n.c),this}getArea(){return rs.subVectors(this.c,this.b),gs.subVectors(this.a,this.b),.5*rs.cross(gs).length()}getMidpoint(n){return n.addVectors(this.a,this.b).add(this.c).multiplyScalar(.3333333333333333)}getNormal(n){return N0.getNormal(this.a,this.b,this.c,n)}getPlane(n){return n.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(n,u){return N0.getBarycoord(n,this.a,this.b,this.c,u)}getInterpolation(n,u,p,m,v){return N0.getInterpolation(n,this.a,this.b,this.c,u,p,m,v)}containsPoint(n){return N0.containsPoint(n,this.a,this.b,this.c)}isFrontFacing(n){return N0.isFrontFacing(this.a,this.b,this.c,n)}intersectsBox(n){return n.intersectsTriangle(this)}closestPointToPoint(n,u){const p=this.a,m=this.b,v=this.c;let w,S;to.subVectors(m,p),Co.subVectors(v,p),Ol.subVectors(n,p);const I=to.dot(Ol),D=Co.dot(Ol);if(I<=0&&D<=0)return u.copy(p);Ka.subVectors(n,m);const L=to.dot(Ka),Y=Co.dot(Ka);if(L>=0&&Y<=L)return u.copy(m);const j=I*Y-L*D;if(j<=0&&I>=0&&L<=0)return w=I/(I-L),u.copy(p).addScaledVector(to,w);sa.subVectors(n,v);const te=to.dot(sa),re=Co.dot(sa);if(re>=0&&te<=re)return u.copy(v);const ce=te*D-I*re;if(ce<=0&&D>=0&&re<=0)return S=D/(D-re),u.copy(p).addScaledVector(Co,S);const le=L*re-te*Y;if(le<=0&&Y-L>=0&&te-re>=0)return k1.subVectors(v,m),S=(Y-L)/(Y-L+(te-re)),u.copy(m).addScaledVector(k1,S);const de=1/(le+ce+j);return w=ce*de,S=j*de,u.copy(p).addScaledVector(to,w).addScaledVector(Co,S)}equals(n){return n.a.equals(this.a)&&n.b.equals(this.b)&&n.c.equals(this.c)}}const N1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ns={h:0,s:0,l:0},U1={h:0,s:0,l:0};function Q1(b,n,u){return u<0&&(u+=1),u>1&&(u-=1),u<.16666666666666666?b+6*(n-b)*u:u<.5?n:u<.6666666666666666?b+6*(n-b)*(.6666666666666666-u):b}class Jt{constructor(n,u,p){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(n,u,p)}set(n,u,p){if(u===void 0&&p===void 0){const m=n;m&&m.isColor?this.copy(m):typeof m=="number"?this.setHex(m):typeof m=="string"&&this.setStyle(m)}else this.setRGB(n,u,p);return this}setScalar(n){return this.r=n,this.g=n,this.b=n,this}setHex(n,u=An){return n=Math.floor(n),this.r=(n>>16&255)/255,this.g=(n>>8&255)/255,this.b=(255&n)/255,Fr.toWorkingColorSpace(this,u),this}setRGB(n,u,p,m=Fr.workingColorSpace){return this.r=n,this.g=u,this.b=p,Fr.toWorkingColorSpace(this,m),this}setHSL(n,u,p,m=Fr.workingColorSpace){if(n=Sl(n,1),u=mn(u,0,1),p=mn(p,0,1),u===0)this.r=this.g=this.b=p;else{const v=p<=.5?p*(1+u):p+u-p*u,w=2*p-v;this.r=Q1(w,v,n+.3333333333333333),this.g=Q1(w,v,n),this.b=Q1(w,v,n-.3333333333333333)}return Fr.toWorkingColorSpace(this,m),this}setStyle(n,u=An){function p(v){v!==void 0&&parseFloat(v)<1&&console.warn("THREE.Color: Alpha component of "+n+" will be ignored.")}let m;if(m=/^(\w+)\(([^\)]*)\)/.exec(n)){let v;const w=m[1],S=m[2];switch(w){case"rgb":case"rgba":if(v=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(S))return p(v[4]),this.setRGB(Math.min(255,parseInt(v[1],10))/255,Math.min(255,parseInt(v[2],10))/255,Math.min(255,parseInt(v[3],10))/255,u);if(v=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(S))return p(v[4]),this.setRGB(Math.min(100,parseInt(v[1],10))/100,Math.min(100,parseInt(v[2],10))/100,Math.min(100,parseInt(v[3],10))/100,u);break;case"hsl":case"hsla":if(v=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(S))return p(v[4]),this.setHSL(parseFloat(v[1])/360,parseFloat(v[2])/100,parseFloat(v[3])/100,u);break;default:console.warn("THREE.Color: Unknown color model "+n)}}else if(m=/^\#([A-Fa-f\d]+)$/.exec(n)){const v=m[1],w=v.length;if(w===3)return this.setRGB(parseInt(v.charAt(0),16)/15,parseInt(v.charAt(1),16)/15,parseInt(v.charAt(2),16)/15,u);if(w===6)return this.setHex(parseInt(v,16),u);console.warn("THREE.Color: Invalid hex color "+n)}else if(n&&n.length>0)return this.setColorName(n,u);return this}setColorName(n,u=An){const p=N1[n.toLowerCase()];return p!==void 0?this.setHex(p,u):console.warn("THREE.Color: Unknown color "+n),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(n){return this.r=n.r,this.g=n.g,this.b=n.b,this}copySRGBToLinear(n){return this.r=go(n.r),this.g=go(n.g),this.b=go(n.b),this}copyLinearToSRGB(n){return this.r=Rl(n.r),this.g=Rl(n.g),this.b=Rl(n.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(n=An){return Fr.fromWorkingColorSpace(c0.copy(this),n),65536*Math.round(mn(255*c0.r,0,255))+256*Math.round(mn(255*c0.g,0,255))+Math.round(mn(255*c0.b,0,255))}getHexString(n=An){return("000000"+this.getHex(n).toString(16)).slice(-6)}getHSL(n,u=Fr.workingColorSpace){Fr.fromWorkingColorSpace(c0.copy(this),u);const p=c0.r,m=c0.g,v=c0.b,w=Math.max(p,m,v),S=Math.min(p,m,v);let I,D;const L=(S+w)/2;if(S===w)I=0,D=0;else{const Y=w-S;switch(D=L<=.5?Y/(w+S):Y/(2-w-S),w){case p:I=(m-v)/Y+(m<v?6:0);break;case m:I=(v-p)/Y+2;break;case v:I=(p-m)/Y+4}I/=6}return n.h=I,n.s=D,n.l=L,n}getRGB(n,u=Fr.workingColorSpace){return Fr.fromWorkingColorSpace(c0.copy(this),u),n.r=c0.r,n.g=c0.g,n.b=c0.b,n}getStyle(n=An){Fr.fromWorkingColorSpace(c0.copy(this),n);const u=c0.r,p=c0.g,m=c0.b;return n!==An?`color(${n} ${u.toFixed(3)} ${p.toFixed(3)} ${m.toFixed(3)})`:`rgb(${Math.round(255*u)},${Math.round(255*p)},${Math.round(255*m)})`}offsetHSL(n,u,p){return this.getHSL(Ns),this.setHSL(Ns.h+n,Ns.s+u,Ns.l+p)}add(n){return this.r+=n.r,this.g+=n.g,this.b+=n.b,this}addColors(n,u){return this.r=n.r+u.r,this.g=n.g+u.g,this.b=n.b+u.b,this}addScalar(n){return this.r+=n,this.g+=n,this.b+=n,this}sub(n){return this.r=Math.max(0,this.r-n.r),this.g=Math.max(0,this.g-n.g),this.b=Math.max(0,this.b-n.b),this}multiply(n){return this.r*=n.r,this.g*=n.g,this.b*=n.b,this}multiplyScalar(n){return this.r*=n,this.g*=n,this.b*=n,this}lerp(n,u){return this.r+=(n.r-this.r)*u,this.g+=(n.g-this.g)*u,this.b+=(n.b-this.b)*u,this}lerpColors(n,u,p){return this.r=n.r+(u.r-n.r)*p,this.g=n.g+(u.g-n.g)*p,this.b=n.b+(u.b-n.b)*p,this}lerpHSL(n,u){this.getHSL(Ns),n.getHSL(U1);const p=Qa(Ns.h,U1.h,u),m=Qa(Ns.s,U1.s,u),v=Qa(Ns.l,U1.l,u);return this.setHSL(p,m,v),this}setFromVector3(n){return this.r=n.x,this.g=n.y,this.b=n.z,this}applyMatrix3(n){const u=this.r,p=this.g,m=this.b,v=n.elements;return this.r=v[0]*u+v[3]*p+v[6]*m,this.g=v[1]*u+v[4]*p+v[7]*m,this.b=v[2]*u+v[5]*p+v[8]*m,this}equals(n){return n.r===this.r&&n.g===this.g&&n.b===this.b}fromArray(n,u=0){return this.r=n[u],this.g=n[u+1],this.b=n[u+2],this}toArray(n=[],u=0){return n[u]=this.r,n[u+1]=this.g,n[u+2]=this.b,n}fromBufferAttribute(n,u){return this.r=n.getX(u),this.g=n.getY(u),this.b=n.getZ(u),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const c0=new Jt;Jt.NAMES=N1;let Ku=0;class en extends P0{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Ku++}),this.uuid=F0(),this.name="",this.type="Material",this.blending=ve,this.side=Z,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=_i,this.blendDst=Ri,this.blendEquation=Ce,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Jt(0,0,0),this.blendAlpha=0,this.depthFunc=R0,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=xl,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ao,this.stencilZFail=Ao,this.stencilZPass=Ao,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(n){this._alphaTest>0!=n>0&&this.version++,this._alphaTest=n}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(n){if(n!==void 0)for(const u in n){const p=n[u];if(p===void 0){console.warn(`THREE.Material: parameter '${u}' has value of undefined.`);continue}const m=this[u];m!==void 0?m&&m.isColor?m.set(p):m&&m.isVector3&&p&&p.isVector3?m.copy(p):this[u]=p:console.warn(`THREE.Material: '${u}' is not a property of THREE.${this.type}.`)}}toJSON(n){const u=n===void 0||typeof n=="string";u&&(n={textures:{},images:{}});const p={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function m(v){const w=[];for(const S in v){const I=v[S];delete I.metadata,w.push(I)}return w}if(p.uuid=this.uuid,p.type=this.type,this.name!==""&&(p.name=this.name),this.color&&this.color.isColor&&(p.color=this.color.getHex()),this.roughness!==void 0&&(p.roughness=this.roughness),this.metalness!==void 0&&(p.metalness=this.metalness),this.sheen!==void 0&&(p.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(p.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(p.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(p.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(p.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(p.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(p.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(p.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(p.shininess=this.shininess),this.clearcoat!==void 0&&(p.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(p.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(p.clearcoatMap=this.clearcoatMap.toJSON(n).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(p.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(n).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(p.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(n).uuid,p.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(p.dispersion=this.dispersion),this.iridescence!==void 0&&(p.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(p.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(p.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(p.iridescenceMap=this.iridescenceMap.toJSON(n).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(p.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(n).uuid),this.anisotropy!==void 0&&(p.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(p.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(p.anisotropyMap=this.anisotropyMap.toJSON(n).uuid),this.map&&this.map.isTexture&&(p.map=this.map.toJSON(n).uuid),this.matcap&&this.matcap.isTexture&&(p.matcap=this.matcap.toJSON(n).uuid),this.alphaMap&&this.alphaMap.isTexture&&(p.alphaMap=this.alphaMap.toJSON(n).uuid),this.lightMap&&this.lightMap.isTexture&&(p.lightMap=this.lightMap.toJSON(n).uuid,p.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(p.aoMap=this.aoMap.toJSON(n).uuid,p.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(p.bumpMap=this.bumpMap.toJSON(n).uuid,p.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(p.normalMap=this.normalMap.toJSON(n).uuid,p.normalMapType=this.normalMapType,p.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(p.displacementMap=this.displacementMap.toJSON(n).uuid,p.displacementScale=this.displacementScale,p.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(p.roughnessMap=this.roughnessMap.toJSON(n).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(p.metalnessMap=this.metalnessMap.toJSON(n).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(p.emissiveMap=this.emissiveMap.toJSON(n).uuid),this.specularMap&&this.specularMap.isTexture&&(p.specularMap=this.specularMap.toJSON(n).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(p.specularIntensityMap=this.specularIntensityMap.toJSON(n).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(p.specularColorMap=this.specularColorMap.toJSON(n).uuid),this.envMap&&this.envMap.isTexture&&(p.envMap=this.envMap.toJSON(n).uuid,this.combine!==void 0&&(p.combine=this.combine)),this.envMapRotation!==void 0&&(p.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(p.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(p.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(p.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(p.gradientMap=this.gradientMap.toJSON(n).uuid),this.transmission!==void 0&&(p.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(p.transmissionMap=this.transmissionMap.toJSON(n).uuid),this.thickness!==void 0&&(p.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(p.thicknessMap=this.thicknessMap.toJSON(n).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(p.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(p.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(p.size=this.size),this.shadowSide!==null&&(p.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(p.sizeAttenuation=this.sizeAttenuation),this.blending!==ve&&(p.blending=this.blending),this.side!==Z&&(p.side=this.side),this.vertexColors===!0&&(p.vertexColors=!0),this.opacity<1&&(p.opacity=this.opacity),this.transparent===!0&&(p.transparent=!0),this.blendSrc!==_i&&(p.blendSrc=this.blendSrc),this.blendDst!==Ri&&(p.blendDst=this.blendDst),this.blendEquation!==Ce&&(p.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(p.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(p.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(p.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(p.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(p.blendAlpha=this.blendAlpha),this.depthFunc!==R0&&(p.depthFunc=this.depthFunc),this.depthTest===!1&&(p.depthTest=this.depthTest),this.depthWrite===!1&&(p.depthWrite=this.depthWrite),this.colorWrite===!1&&(p.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(p.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==xl&&(p.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(p.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(p.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ao&&(p.stencilFail=this.stencilFail),this.stencilZFail!==Ao&&(p.stencilZFail=this.stencilZFail),this.stencilZPass!==Ao&&(p.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(p.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(p.rotation=this.rotation),this.polygonOffset===!0&&(p.polygonOffset=!0),this.polygonOffsetFactor!==0&&(p.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(p.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(p.linewidth=this.linewidth),this.dashSize!==void 0&&(p.dashSize=this.dashSize),this.gapSize!==void 0&&(p.gapSize=this.gapSize),this.scale!==void 0&&(p.scale=this.scale),this.dithering===!0&&(p.dithering=!0),this.alphaTest>0&&(p.alphaTest=this.alphaTest),this.alphaHash===!0&&(p.alphaHash=!0),this.alphaToCoverage===!0&&(p.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(p.premultipliedAlpha=!0),this.forceSinglePass===!0&&(p.forceSinglePass=!0),this.wireframe===!0&&(p.wireframe=!0),this.wireframeLinewidth>1&&(p.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(p.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(p.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(p.flatShading=!0),this.visible===!1&&(p.visible=!1),this.toneMapped===!1&&(p.toneMapped=!1),this.fog===!1&&(p.fog=!1),Object.keys(this.userData).length>0&&(p.userData=this.userData),u){const v=m(n.textures),w=m(n.images);v.length>0&&(p.textures=v),w.length>0&&(p.images=w)}return p}clone(){return new this.constructor().copy(this)}copy(n){this.name=n.name,this.blending=n.blending,this.side=n.side,this.vertexColors=n.vertexColors,this.opacity=n.opacity,this.transparent=n.transparent,this.blendSrc=n.blendSrc,this.blendDst=n.blendDst,this.blendEquation=n.blendEquation,this.blendSrcAlpha=n.blendSrcAlpha,this.blendDstAlpha=n.blendDstAlpha,this.blendEquationAlpha=n.blendEquationAlpha,this.blendColor.copy(n.blendColor),this.blendAlpha=n.blendAlpha,this.depthFunc=n.depthFunc,this.depthTest=n.depthTest,this.depthWrite=n.depthWrite,this.stencilWriteMask=n.stencilWriteMask,this.stencilFunc=n.stencilFunc,this.stencilRef=n.stencilRef,this.stencilFuncMask=n.stencilFuncMask,this.stencilFail=n.stencilFail,this.stencilZFail=n.stencilZFail,this.stencilZPass=n.stencilZPass,this.stencilWrite=n.stencilWrite;const u=n.clippingPlanes;let p=null;if(u!==null){const m=u.length;p=new Array(m);for(let v=0;v!==m;++v)p[v]=u[v].clone()}return this.clippingPlanes=p,this.clipIntersection=n.clipIntersection,this.clipShadows=n.clipShadows,this.shadowSide=n.shadowSide,this.colorWrite=n.colorWrite,this.precision=n.precision,this.polygonOffset=n.polygonOffset,this.polygonOffsetFactor=n.polygonOffsetFactor,this.polygonOffsetUnits=n.polygonOffsetUnits,this.dithering=n.dithering,this.alphaTest=n.alphaTest,this.alphaHash=n.alphaHash,this.alphaToCoverage=n.alphaToCoverage,this.premultipliedAlpha=n.premultipliedAlpha,this.forceSinglePass=n.forceSinglePass,this.visible=n.visible,this.toneMapped=n.toneMapped,this.userData=JSON.parse(JSON.stringify(n.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(n){n===!0&&this.version++}}class U0 extends en{constructor(n){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Jt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new k0,this.combine=Oe,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapRotation.copy(n.envMapRotation),this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.fog=n.fog,this}}const Us=Ju();function Ju(){const b=new ArrayBuffer(4),n=new Float32Array(b),u=new Uint32Array(b),p=new Uint32Array(512),m=new Uint32Array(512);for(let I=0;I<256;++I){const D=I-127;D<-27?(p[I]=0,p[256|I]=32768,m[I]=24,m[256|I]=24):D<-14?(p[I]=1024>>-D-14,p[256|I]=1024>>-D-14|32768,m[I]=-D-1,m[256|I]=-D-1):D<=15?(p[I]=D+15<<10,p[256|I]=D+15<<10|32768,m[I]=13,m[256|I]=13):D<128?(p[I]=31744,p[256|I]=64512,m[I]=24,m[256|I]=24):(p[I]=31744,p[256|I]=64512,m[I]=13,m[256|I]=13)}const v=new Uint32Array(2048),w=new Uint32Array(64),S=new Uint32Array(64);for(let I=1;I<1024;++I){let D=I<<13,L=0;for(;!(8388608&D);)D<<=1,L-=8388608;D&=-8388609,L+=947912704,v[I]=D|L}for(let I=1024;I<2048;++I)v[I]=939524096+(I-1024<<13);for(let I=1;I<31;++I)w[I]=I<<23;w[31]=1199570944,w[32]=2147483648;for(let I=33;I<63;++I)w[I]=2147483648+(I-32<<23);w[63]=3347054592;for(let I=1;I<64;++I)I!==32&&(S[I]=1024);return{floatView:n,uint32View:u,baseTable:p,shiftTable:m,mantissaTable:v,exponentTable:w,offsetTable:S}}function w0(b){Math.abs(b)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),b=mn(b,-65504,65504),Us.floatView[0]=b;const n=Us.uint32View[0],u=n>>23&511;return Us.baseTable[u]+((8388607&n)>>Us.shiftTable[u])}function Ja(b){const n=b>>10;return Us.uint32View[0]=Us.mantissaTable[Us.offsetTable[n]+(1023&b)]+Us.exponentTable[n],Us.floatView[0]}const H1={toHalfFloat:w0,fromHalfFloat:Ja},In=new Le,io=new zt;class nr{constructor(n,u,p=!1){if(Array.isArray(n))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=n,this.itemSize=u,this.count=n!==void 0?n.length/u:0,this.normalized=p,this.usage=Na,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=wi,this.version=0}onUploadCallback(){}set needsUpdate(n){n===!0&&this.version++}get updateRange(){return Il("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(n){return this.usage=n,this}addUpdateRange(n,u){this.updateRanges.push({start:n,count:u})}clearUpdateRanges(){this.updateRanges.length=0}copy(n){return this.name=n.name,this.array=new n.array.constructor(n.array),this.itemSize=n.itemSize,this.count=n.count,this.normalized=n.normalized,this.usage=n.usage,this.gpuType=n.gpuType,this}copyAt(n,u,p){n*=this.itemSize,p*=u.itemSize;for(let m=0,v=this.itemSize;m<v;m++)this.array[n+m]=u.array[p+m];return this}copyArray(n){return this.array.set(n),this}applyMatrix3(n){if(this.itemSize===2)for(let u=0,p=this.count;u<p;u++)io.fromBufferAttribute(this,u),io.applyMatrix3(n),this.setXY(u,io.x,io.y);else if(this.itemSize===3)for(let u=0,p=this.count;u<p;u++)In.fromBufferAttribute(this,u),In.applyMatrix3(n),this.setXYZ(u,In.x,In.y,In.z);return this}applyMatrix4(n){for(let u=0,p=this.count;u<p;u++)In.fromBufferAttribute(this,u),In.applyMatrix4(n),this.setXYZ(u,In.x,In.y,In.z);return this}applyNormalMatrix(n){for(let u=0,p=this.count;u<p;u++)In.fromBufferAttribute(this,u),In.applyNormalMatrix(n),this.setXYZ(u,In.x,In.y,In.z);return this}transformDirection(n){for(let u=0,p=this.count;u<p;u++)In.fromBufferAttribute(this,u),In.transformDirection(n),this.setXYZ(u,In.x,In.y,In.z);return this}set(n,u=0){return this.array.set(n,u),this}getComponent(n,u){let p=this.array[n*this.itemSize+u];return this.normalized&&(p=y0(p,this.array)),p}setComponent(n,u,p){return this.normalized&&(p=ar(p,this.array)),this.array[n*this.itemSize+u]=p,this}getX(n){let u=this.array[n*this.itemSize];return this.normalized&&(u=y0(u,this.array)),u}setX(n,u){return this.normalized&&(u=ar(u,this.array)),this.array[n*this.itemSize]=u,this}getY(n){let u=this.array[n*this.itemSize+1];return this.normalized&&(u=y0(u,this.array)),u}setY(n,u){return this.normalized&&(u=ar(u,this.array)),this.array[n*this.itemSize+1]=u,this}getZ(n){let u=this.array[n*this.itemSize+2];return this.normalized&&(u=y0(u,this.array)),u}setZ(n,u){return this.normalized&&(u=ar(u,this.array)),this.array[n*this.itemSize+2]=u,this}getW(n){let u=this.array[n*this.itemSize+3];return this.normalized&&(u=y0(u,this.array)),u}setW(n,u){return this.normalized&&(u=ar(u,this.array)),this.array[n*this.itemSize+3]=u,this}setXY(n,u,p){return n*=this.itemSize,this.normalized&&(u=ar(u,this.array),p=ar(p,this.array)),this.array[n+0]=u,this.array[n+1]=p,this}setXYZ(n,u,p,m){return n*=this.itemSize,this.normalized&&(u=ar(u,this.array),p=ar(p,this.array),m=ar(m,this.array)),this.array[n+0]=u,this.array[n+1]=p,this.array[n+2]=m,this}setXYZW(n,u,p,m,v){return n*=this.itemSize,this.normalized&&(u=ar(u,this.array),p=ar(p,this.array),m=ar(m,this.array),v=ar(v,this.array)),this.array[n+0]=u,this.array[n+1]=p,this.array[n+2]=m,this.array[n+3]=v,this}onUpload(n){return this.onUploadCallback=n,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const n={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(n.name=this.name),this.usage!==Na&&(n.usage=this.usage),n}}class Zu extends nr{constructor(n,u,p){super(new Int8Array(n),u,p)}}class $u extends nr{constructor(n,u,p){super(new Uint8Array(n),u,p)}}class Za extends nr{constructor(n,u,p){super(new Uint8ClampedArray(n),u,p)}}class Jc extends nr{constructor(n,u,p){super(new Int16Array(n),u,p)}}class kl extends nr{constructor(n,u,p){super(new Uint16Array(n),u,p)}}class ju extends nr{constructor(n,u,p){super(new Int32Array(n),u,p)}}class z1 extends nr{constructor(n,u,p){super(new Uint32Array(n),u,p)}}class xo extends nr{constructor(n,u,p){super(new Uint16Array(n),u,p),this.isFloat16BufferAttribute=!0}getX(n){let u=Ja(this.array[n*this.itemSize]);return this.normalized&&(u=y0(u,this.array)),u}setX(n,u){return this.normalized&&(u=ar(u,this.array)),this.array[n*this.itemSize]=w0(u),this}getY(n){let u=Ja(this.array[n*this.itemSize+1]);return this.normalized&&(u=y0(u,this.array)),u}setY(n,u){return this.normalized&&(u=ar(u,this.array)),this.array[n*this.itemSize+1]=w0(u),this}getZ(n){let u=Ja(this.array[n*this.itemSize+2]);return this.normalized&&(u=y0(u,this.array)),u}setZ(n,u){return this.normalized&&(u=ar(u,this.array)),this.array[n*this.itemSize+2]=w0(u),this}getW(n){let u=Ja(this.array[n*this.itemSize+3]);return this.normalized&&(u=y0(u,this.array)),u}setW(n,u){return this.normalized&&(u=ar(u,this.array)),this.array[n*this.itemSize+3]=w0(u),this}setXY(n,u,p){return n*=this.itemSize,this.normalized&&(u=ar(u,this.array),p=ar(p,this.array)),this.array[n+0]=w0(u),this.array[n+1]=w0(p),this}setXYZ(n,u,p,m){return n*=this.itemSize,this.normalized&&(u=ar(u,this.array),p=ar(p,this.array),m=ar(m,this.array)),this.array[n+0]=w0(u),this.array[n+1]=w0(p),this.array[n+2]=w0(m),this}setXYZW(n,u,p,m,v){return n*=this.itemSize,this.normalized&&(u=ar(u,this.array),p=ar(p,this.array),m=ar(m,this.array),v=ar(v,this.array)),this.array[n+0]=w0(u),this.array[n+1]=w0(p),this.array[n+2]=w0(m),this.array[n+3]=w0(v),this}}class vi extends nr{constructor(n,u,p){super(new Float32Array(n),u,p)}}let e2=0;const W0=new Ii,Nl=new yr,_o=new Le,T0=new Xn,$a=new Xn,zn=new Le;class Xi extends P0{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:e2++}),this.uuid=F0(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(n){return Array.isArray(n)?this.index=new(Lc(n)?z1:kl)(n,1):this.index=n,this}getAttribute(n){return this.attributes[n]}setAttribute(n,u){return this.attributes[n]=u,this}deleteAttribute(n){return delete this.attributes[n],this}hasAttribute(n){return this.attributes[n]!==void 0}addGroup(n,u,p=0){this.groups.push({start:n,count:u,materialIndex:p})}clearGroups(){this.groups=[]}setDrawRange(n,u){this.drawRange.start=n,this.drawRange.count=u}applyMatrix4(n){const u=this.attributes.position;u!==void 0&&(u.applyMatrix4(n),u.needsUpdate=!0);const p=this.attributes.normal;if(p!==void 0){const v=new $i().getNormalMatrix(n);p.applyNormalMatrix(v),p.needsUpdate=!0}const m=this.attributes.tangent;return m!==void 0&&(m.transformDirection(n),m.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(n){return W0.makeRotationFromQuaternion(n),this.applyMatrix4(W0),this}rotateX(n){return W0.makeRotationX(n),this.applyMatrix4(W0),this}rotateY(n){return W0.makeRotationY(n),this.applyMatrix4(W0),this}rotateZ(n){return W0.makeRotationZ(n),this.applyMatrix4(W0),this}translate(n,u,p){return W0.makeTranslation(n,u,p),this.applyMatrix4(W0),this}scale(n,u,p){return W0.makeScale(n,u,p),this.applyMatrix4(W0),this}lookAt(n){return Nl.lookAt(n),Nl.updateMatrix(),this.applyMatrix4(Nl.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_o).negate(),this.translate(_o.x,_o.y,_o.z),this}setFromPoints(n){const u=[];for(let p=0,m=n.length;p<m;p++){const v=n[p];u.push(v.x,v.y,v.z||0)}return this.setAttribute("position",new vi(u,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Xn);const n=this.attributes.position,u=this.morphAttributes.position;if(n&&n.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new Le(-1/0,-1/0,-1/0),new Le(1/0,1/0,1/0));if(n!==void 0){if(this.boundingBox.setFromBufferAttribute(n),u)for(let p=0,m=u.length;p<m;p++){const v=u[p];T0.setFromBufferAttribute(v),this.morphTargetsRelative?(zn.addVectors(this.boundingBox.min,T0.min),this.boundingBox.expandByPoint(zn),zn.addVectors(this.boundingBox.max,T0.max),this.boundingBox.expandByPoint(zn)):(this.boundingBox.expandByPoint(T0.min),this.boundingBox.expandByPoint(T0.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Yn);const n=this.attributes.position,u=this.morphAttributes.position;if(n&&n.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new Le,1/0);if(n){const p=this.boundingSphere.center;if(T0.setFromBufferAttribute(n),u)for(let v=0,w=u.length;v<w;v++){const S=u[v];$a.setFromBufferAttribute(S),this.morphTargetsRelative?(zn.addVectors(T0.min,$a.min),T0.expandByPoint(zn),zn.addVectors(T0.max,$a.max),T0.expandByPoint(zn)):(T0.expandByPoint($a.min),T0.expandByPoint($a.max))}T0.getCenter(p);let m=0;for(let v=0,w=n.count;v<w;v++)zn.fromBufferAttribute(n,v),m=Math.max(m,p.distanceToSquared(zn));if(u)for(let v=0,w=u.length;v<w;v++){const S=u[v],I=this.morphTargetsRelative;for(let D=0,L=S.count;D<L;D++)zn.fromBufferAttribute(S,D),I&&(_o.fromBufferAttribute(n,D),zn.add(_o)),m=Math.max(m,p.distanceToSquared(zn))}this.boundingSphere.radius=Math.sqrt(m),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const n=this.index,u=this.attributes;if(n===null||u.position===void 0||u.normal===void 0||u.uv===void 0)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const p=u.position,m=u.normal,v=u.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new nr(new Float32Array(4*p.count),4));const w=this.getAttribute("tangent"),S=[],I=[];for(let ze=0;ze<p.count;ze++)S[ze]=new Le,I[ze]=new Le;const D=new Le,L=new Le,Y=new Le,j=new zt,te=new zt,re=new zt,ce=new Le,le=new Le;function de(ze,tt,rt){D.fromBufferAttribute(p,ze),L.fromBufferAttribute(p,tt),Y.fromBufferAttribute(p,rt),j.fromBufferAttribute(v,ze),te.fromBufferAttribute(v,tt),re.fromBufferAttribute(v,rt),L.sub(D),Y.sub(D),te.sub(j),re.sub(j);const $e=1/(te.x*re.y-re.x*te.y);isFinite($e)&&(ce.copy(L).multiplyScalar(re.y).addScaledVector(Y,-te.y).multiplyScalar($e),le.copy(Y).multiplyScalar(te.x).addScaledVector(L,-re.x).multiplyScalar($e),S[ze].add(ce),S[tt].add(ce),S[rt].add(ce),I[ze].add(le),I[tt].add(le),I[rt].add(le))}let pe=this.groups;pe.length===0&&(pe=[{start:0,count:n.count}]);for(let ze=0,tt=pe.length;ze<tt;++ze){const rt=pe[ze],$e=rt.start;for(let ht=$e,ut=$e+rt.count;ht<ut;ht+=3)de(n.getX(ht+0),n.getX(ht+1),n.getX(ht+2))}const me=new Le,we=new Le,Fe=new Le,Be=new Le;function ke(ze){Fe.fromBufferAttribute(m,ze),Be.copy(Fe);const tt=S[ze];me.copy(tt),me.sub(Fe.multiplyScalar(Fe.dot(tt))).normalize(),we.crossVectors(Be,tt);const rt=we.dot(I[ze])<0?-1:1;w.setXYZW(ze,me.x,me.y,me.z,rt)}for(let ze=0,tt=pe.length;ze<tt;++ze){const rt=pe[ze],$e=rt.start;for(let ht=$e,ut=$e+rt.count;ht<ut;ht+=3)ke(n.getX(ht+0)),ke(n.getX(ht+1)),ke(n.getX(ht+2))}}computeVertexNormals(){const n=this.index,u=this.getAttribute("position");if(u!==void 0){let p=this.getAttribute("normal");if(p===void 0)p=new nr(new Float32Array(3*u.count),3),this.setAttribute("normal",p);else for(let j=0,te=p.count;j<te;j++)p.setXYZ(j,0,0,0);const m=new Le,v=new Le,w=new Le,S=new Le,I=new Le,D=new Le,L=new Le,Y=new Le;if(n)for(let j=0,te=n.count;j<te;j+=3){const re=n.getX(j+0),ce=n.getX(j+1),le=n.getX(j+2);m.fromBufferAttribute(u,re),v.fromBufferAttribute(u,ce),w.fromBufferAttribute(u,le),L.subVectors(w,v),Y.subVectors(m,v),L.cross(Y),S.fromBufferAttribute(p,re),I.fromBufferAttribute(p,ce),D.fromBufferAttribute(p,le),S.add(L),I.add(L),D.add(L),p.setXYZ(re,S.x,S.y,S.z),p.setXYZ(ce,I.x,I.y,I.z),p.setXYZ(le,D.x,D.y,D.z)}else for(let j=0,te=u.count;j<te;j+=3)m.fromBufferAttribute(u,j+0),v.fromBufferAttribute(u,j+1),w.fromBufferAttribute(u,j+2),L.subVectors(w,v),Y.subVectors(m,v),L.cross(Y),p.setXYZ(j+0,L.x,L.y,L.z),p.setXYZ(j+1,L.x,L.y,L.z),p.setXYZ(j+2,L.x,L.y,L.z);this.normalizeNormals(),p.needsUpdate=!0}}normalizeNormals(){const n=this.attributes.normal;for(let u=0,p=n.count;u<p;u++)zn.fromBufferAttribute(n,u),zn.normalize(),n.setXYZ(u,zn.x,zn.y,zn.z)}toNonIndexed(){function n(S,I){const D=S.array,L=S.itemSize,Y=S.normalized,j=new D.constructor(I.length*L);let te=0,re=0;for(let ce=0,le=I.length;ce<le;ce++){te=S.isInterleavedBufferAttribute?I[ce]*S.data.stride+S.offset:I[ce]*L;for(let de=0;de<L;de++)j[re++]=D[te++]}return new nr(j,L,Y)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const u=new Xi,p=this.index.array,m=this.attributes;for(const S in m){const I=n(m[S],p);u.setAttribute(S,I)}const v=this.morphAttributes;for(const S in v){const I=[],D=v[S];for(let L=0,Y=D.length;L<Y;L++){const j=n(D[L],p);I.push(j)}u.morphAttributes[S]=I}u.morphTargetsRelative=this.morphTargetsRelative;const w=this.groups;for(let S=0,I=w.length;S<I;S++){const D=w[S];u.addGroup(D.start,D.count,D.materialIndex)}return u}toJSON(){const n={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),Object.keys(this.userData).length>0&&(n.userData=this.userData),this.parameters!==void 0){const I=this.parameters;for(const D in I)I[D]!==void 0&&(n[D]=I[D]);return n}n.data={attributes:{}};const u=this.index;u!==null&&(n.data.index={type:u.array.constructor.name,array:Array.prototype.slice.call(u.array)});const p=this.attributes;for(const I in p){const D=p[I];n.data.attributes[I]=D.toJSON(n.data)}const m={};let v=!1;for(const I in this.morphAttributes){const D=this.morphAttributes[I],L=[];for(let Y=0,j=D.length;Y<j;Y++){const te=D[Y];L.push(te.toJSON(n.data))}L.length>0&&(m[I]=L,v=!0)}v&&(n.data.morphAttributes=m,n.data.morphTargetsRelative=this.morphTargetsRelative);const w=this.groups;w.length>0&&(n.data.groups=JSON.parse(JSON.stringify(w)));const S=this.boundingSphere;return S!==null&&(n.data.boundingSphere={center:S.center.toArray(),radius:S.radius}),n}clone(){return new this.constructor().copy(this)}copy(n){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const u={};this.name=n.name;const p=n.index;p!==null&&this.setIndex(p.clone(u));const m=n.attributes;for(const D in m){const L=m[D];this.setAttribute(D,L.clone(u))}const v=n.morphAttributes;for(const D in v){const L=[],Y=v[D];for(let j=0,te=Y.length;j<te;j++)L.push(Y[j].clone(u));this.morphAttributes[D]=L}this.morphTargetsRelative=n.morphTargetsRelative;const w=n.groups;for(let D=0,L=w.length;D<L;D++){const Y=w[D];this.addGroup(Y.start,Y.count,Y.materialIndex)}const S=n.boundingBox;S!==null&&(this.boundingBox=S.clone());const I=n.boundingSphere;return I!==null&&(this.boundingSphere=I.clone()),this.drawRange.start=n.drawRange.start,this.drawRange.count=n.drawRange.count,this.userData=n.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const G1=new Ii,Mo=new ts,oa=new Yn,ja=new Le,So=new Le,aa=new Le,To=new Le,ro=new Le,xn=new Le,Pi=new zt,li=new zt,e1=new zt,V1=new Le,Zc=new Le,Ul=new Le,Io=new Le,W1=new Le;class cn extends yr{constructor(n=new Xi,u=new U0){super(),this.isMesh=!0,this.type="Mesh",this.geometry=n,this.material=u,this.updateMorphTargets()}copy(n,u){return super.copy(n,u),n.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=n.morphTargetInfluences.slice()),n.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},n.morphTargetDictionary)),this.material=Array.isArray(n.material)?n.material.slice():n.material,this.geometry=n.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,u=Object.keys(n);if(u.length>0){const p=n[u[0]];if(p!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let m=0,v=p.length;m<v;m++){const w=p[m].name||String(m);this.morphTargetInfluences.push(0),this.morphTargetDictionary[w]=m}}}}getVertexPosition(n,u){const p=this.geometry,m=p.attributes.position,v=p.morphAttributes.position,w=p.morphTargetsRelative;u.fromBufferAttribute(m,n);const S=this.morphTargetInfluences;if(v&&S){xn.set(0,0,0);for(let I=0,D=v.length;I<D;I++){const L=S[I],Y=v[I];L!==0&&(ro.fromBufferAttribute(Y,n),w?xn.addScaledVector(ro,L):xn.addScaledVector(ro.sub(u),L))}u.add(xn)}return u}raycast(n,u){const p=this.geometry,m=this.material,v=this.matrixWorld;if(m!==void 0){if(p.boundingSphere===null&&p.computeBoundingSphere(),oa.copy(p.boundingSphere),oa.applyMatrix4(v),Mo.copy(n.ray).recast(n.near),oa.containsPoint(Mo.origin)===!1&&(Mo.intersectSphere(oa,ja)===null||Mo.origin.distanceToSquared(ja)>(n.far-n.near)**2))return;G1.copy(v).invert(),Mo.copy(n.ray).applyMatrix4(G1),p.boundingBox!==null&&Mo.intersectsBox(p.boundingBox)===!1||this._computeIntersections(n,u,Mo)}}_computeIntersections(n,u,p){let m;const v=this.geometry,w=this.material,S=v.index,I=v.attributes.position,D=v.attributes.uv,L=v.attributes.uv1,Y=v.attributes.normal,j=v.groups,te=v.drawRange;if(S!==null)if(Array.isArray(w))for(let re=0,ce=j.length;re<ce;re++){const le=j[re],de=w[le.materialIndex];for(let pe=Math.max(le.start,te.start),me=Math.min(S.count,Math.min(le.start+le.count,te.start+te.count));pe<me;pe+=3)m=q1(this,de,n,p,D,L,Y,S.getX(pe),S.getX(pe+1),S.getX(pe+2)),m&&(m.faceIndex=Math.floor(pe/3),m.face.materialIndex=le.materialIndex,u.push(m))}else for(let re=Math.max(0,te.start),ce=Math.min(S.count,te.start+te.count);re<ce;re+=3)m=q1(this,w,n,p,D,L,Y,S.getX(re),S.getX(re+1),S.getX(re+2)),m&&(m.faceIndex=Math.floor(re/3),u.push(m));else if(I!==void 0)if(Array.isArray(w))for(let re=0,ce=j.length;re<ce;re++){const le=j[re],de=w[le.materialIndex];for(let pe=Math.max(le.start,te.start),me=Math.min(I.count,Math.min(le.start+le.count,te.start+te.count));pe<me;pe+=3)m=q1(this,de,n,p,D,L,Y,pe,pe+1,pe+2),m&&(m.faceIndex=Math.floor(pe/3),m.face.materialIndex=le.materialIndex,u.push(m))}else for(let re=Math.max(0,te.start),ce=Math.min(I.count,te.start+te.count);re<ce;re+=3)m=q1(this,w,n,p,D,L,Y,re,re+1,re+2),m&&(m.faceIndex=Math.floor(re/3),u.push(m))}}function q1(b,n,u,p,m,v,w,S,I,D){b.getVertexPosition(S,So),b.getVertexPosition(I,aa),b.getVertexPosition(D,To);const L=function(Y,j,te,re,ce,le,de,pe){let me;if(me=j.side===ee?re.intersectTriangle(de,le,ce,!0,pe):re.intersectTriangle(ce,le,de,j.side===Z,pe),me===null)return null;W1.copy(pe),W1.applyMatrix4(Y.matrixWorld);const we=te.ray.origin.distanceTo(W1);return we<te.near||we>te.far?null:{distance:we,point:W1.clone(),object:Y}}(b,n,u,p,So,aa,To,Io);if(L){m&&(Pi.fromBufferAttribute(m,S),li.fromBufferAttribute(m,I),e1.fromBufferAttribute(m,D),L.uv=N0.getInterpolation(Io,So,aa,To,Pi,li,e1,new zt)),v&&(Pi.fromBufferAttribute(v,S),li.fromBufferAttribute(v,I),e1.fromBufferAttribute(v,D),L.uv1=N0.getInterpolation(Io,So,aa,To,Pi,li,e1,new zt)),w&&(V1.fromBufferAttribute(w,S),Zc.fromBufferAttribute(w,I),Ul.fromBufferAttribute(w,D),L.normal=N0.getInterpolation(Io,So,aa,To,V1,Zc,Ul,new Le),L.normal.dot(p.direction)>0&&L.normal.multiplyScalar(-1));const Y={a:S,b:I,c:D,normal:new Le,materialIndex:0};N0.getNormal(So,aa,To,Y.normal),L.face=Y}return L}class no extends Xi{constructor(n=1,u=1,p=1,m=1,v=1,w=1){super(),this.type="BoxGeometry",this.parameters={width:n,height:u,depth:p,widthSegments:m,heightSegments:v,depthSegments:w};const S=this;m=Math.floor(m),v=Math.floor(v),w=Math.floor(w);const I=[],D=[],L=[],Y=[];let j=0,te=0;function re(ce,le,de,pe,me,we,Fe,Be,ke,ze,tt){const rt=we/ke,$e=Fe/ze,ht=we/2,ut=Fe/2,at=Be/2,Dt=ke+1,It=ze+1;let Ot=0,Tt=0;const Ai=new Le;for(let yi=0;yi<It;yi++){const ni=yi*$e-ut;for(let ai=0;ai<Dt;ai++){const hi=ai*rt-ht;Ai[ce]=hi*pe,Ai[le]=ni*me,Ai[de]=at,D.push(Ai.x,Ai.y,Ai.z),Ai[ce]=0,Ai[le]=0,Ai[de]=Be>0?1:-1,L.push(Ai.x,Ai.y,Ai.z),Y.push(ai/ke),Y.push(1-yi/ze),Ot+=1}}for(let yi=0;yi<ze;yi++)for(let ni=0;ni<ke;ni++){const ai=j+ni+Dt*yi,hi=j+ni+Dt*(yi+1),fi=j+(ni+1)+Dt*(yi+1),wt=j+(ni+1)+Dt*yi;I.push(ai,hi,wt),I.push(hi,fi,wt),Tt+=6}S.addGroup(te,Tt,tt),te+=Tt,j+=Ot}re("z","y","x",-1,-1,p,u,n,w,v,0),re("z","y","x",1,-1,p,u,-n,w,v,1),re("x","z","y",1,1,n,p,u,m,w,2),re("x","z","y",1,-1,n,p,-u,m,w,3),re("x","y","z",1,-1,n,u,p,m,v,4),re("x","y","z",-1,-1,n,u,-p,m,v,5),this.setIndex(I),this.setAttribute("position",new vi(D,3)),this.setAttribute("normal",new vi(L,3)),this.setAttribute("uv",new vi(Y,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new no(n.width,n.height,n.depth,n.widthSegments,n.heightSegments,n.depthSegments)}}function la(b){const n={};for(const u in b){n[u]={};for(const p in b[u]){const m=b[u][p];m&&(m.isColor||m.isMatrix3||m.isMatrix4||m.isVector2||m.isVector3||m.isVector4||m.isTexture||m.isQuaternion)?m.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),n[u][p]=null):n[u][p]=m.clone():Array.isArray(m)?n[u][p]=m.slice():n[u][p]=m}}return n}function h0(b){const n={};for(let u=0;u<b.length;u++){const p=la(b[u]);for(const m in p)n[m]=p[m]}return n}function $c(b){const n=b.getRenderTarget();return n===null?b.outputColorSpace:n.isXRRenderTarget===!0?n.texture.colorSpace:Fr.workingColorSpace}const ft={clone:la,merge:h0};class Q0 extends en{constructor(n){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,this.fragmentShader=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,n!==void 0&&this.setValues(n)}copy(n){return super.copy(n),this.fragmentShader=n.fragmentShader,this.vertexShader=n.vertexShader,this.uniforms=la(n.uniforms),this.uniformsGroups=function(u){const p=[];for(let m=0;m<u.length;m++)p.push(u[m].clone());return p}(n.uniformsGroups),this.defines=Object.assign({},n.defines),this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.fog=n.fog,this.lights=n.lights,this.clipping=n.clipping,this.extensions=Object.assign({},n.extensions),this.glslVersion=n.glslVersion,this}toJSON(n){const u=super.toJSON(n);u.glslVersion=this.glslVersion,u.uniforms={};for(const m in this.uniforms){const v=this.uniforms[m].value;v&&v.isTexture?u.uniforms[m]={type:"t",value:v.toJSON(n).uuid}:v&&v.isColor?u.uniforms[m]={type:"c",value:v.getHex()}:v&&v.isVector2?u.uniforms[m]={type:"v2",value:v.toArray()}:v&&v.isVector3?u.uniforms[m]={type:"v3",value:v.toArray()}:v&&v.isVector4?u.uniforms[m]={type:"v4",value:v.toArray()}:v&&v.isMatrix3?u.uniforms[m]={type:"m3",value:v.toArray()}:v&&v.isMatrix4?u.uniforms[m]={type:"m4",value:v.toArray()}:u.uniforms[m]={value:v}}Object.keys(this.defines).length>0&&(u.defines=this.defines),u.vertexShader=this.vertexShader,u.fragmentShader=this.fragmentShader,u.lights=this.lights,u.clipping=this.clipping;const p={};for(const m in this.extensions)this.extensions[m]===!0&&(p[m]=!0);return Object.keys(p).length>0&&(u.extensions=p),u}}class X1 extends yr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ii,this.projectionMatrix=new Ii,this.projectionMatrixInverse=new Ii,this.coordinateSystem=ps}copy(n,u){return super.copy(n,u),this.matrixWorldInverse.copy(n.matrixWorldInverse),this.projectionMatrix.copy(n.projectionMatrix),this.projectionMatrixInverse.copy(n.projectionMatrixInverse),this.coordinateSystem=n.coordinateSystem,this}getWorldDirection(n){return super.getWorldDirection(n).negate()}updateMatrixWorld(n){super.updateMatrixWorld(n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(n,u){super.updateWorldMatrix(n,u),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const so=new Le,jc=new zt,H0=new zt;class Rn extends X1{constructor(n=50,u=1,p=.1,m=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=n,this.zoom=1,this.near=p,this.far=m,this.focus=10,this.aspect=u,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(n,u){return super.copy(n,u),this.fov=n.fov,this.zoom=n.zoom,this.near=n.near,this.far=n.far,this.focus=n.focus,this.aspect=n.aspect,this.view=n.view===null?null:Object.assign({},n.view),this.filmGauge=n.filmGauge,this.filmOffset=n.filmOffset,this}setFocalLength(n){const u=.5*this.getFilmHeight()/n;this.fov=2*Ko*Math.atan(u),this.updateProjectionMatrix()}getFocalLength(){const n=Math.tan(.5*mo*this.fov);return .5*this.getFilmHeight()/n}getEffectiveFOV(){return 2*Ko*Math.atan(Math.tan(.5*mo*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(n,u,p){so.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),u.set(so.x,so.y).multiplyScalar(-n/so.z),so.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),p.set(so.x,so.y).multiplyScalar(-n/so.z)}getViewSize(n,u){return this.getViewBounds(n,jc,H0),u.subVectors(H0,jc)}setViewOffset(n,u,p,m,v,w){this.aspect=n/u,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=u,this.view.offsetX=p,this.view.offsetY=m,this.view.width=v,this.view.height=w,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const n=this.near;let u=n*Math.tan(.5*mo*this.fov)/this.zoom,p=2*u,m=this.aspect*p,v=-.5*m;const w=this.view;if(this.view!==null&&this.view.enabled){const I=w.fullWidth,D=w.fullHeight;v+=w.offsetX*m/I,u-=w.offsetY*p/D,m*=w.width/I,p*=w.height/D}const S=this.filmOffset;S!==0&&(v+=n*S/this.getFilmWidth()),this.projectionMatrix.makePerspective(v,v+m,u,u-p,n,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(n){const u=super.toJSON(n);return u.object.fov=this.fov,u.object.zoom=this.zoom,u.object.near=this.near,u.object.far=this.far,u.object.focus=this.focus,u.object.aspect=this.aspect,this.view!==null&&(u.object.view=Object.assign({},this.view)),u.object.filmGauge=this.filmGauge,u.object.filmOffset=this.filmOffset,u}}const vs=-90;class Ql extends yr{constructor(n,u,p){super(),this.type="CubeCamera",this.renderTarget=p,this.coordinateSystem=null,this.activeMipmapLevel=0;const m=new Rn(vs,1,n,u);m.layers=this.layers,this.add(m);const v=new Rn(vs,1,n,u);v.layers=this.layers,this.add(v);const w=new Rn(vs,1,n,u);w.layers=this.layers,this.add(w);const S=new Rn(vs,1,n,u);S.layers=this.layers,this.add(S);const I=new Rn(vs,1,n,u);I.layers=this.layers,this.add(I);const D=new Rn(vs,1,n,u);D.layers=this.layers,this.add(D)}updateCoordinateSystem(){const n=this.coordinateSystem,u=this.children.concat(),[p,m,v,w,S,I]=u;for(const D of u)this.remove(D);if(n===ps)p.up.set(0,1,0),p.lookAt(1,0,0),m.up.set(0,1,0),m.lookAt(-1,0,0),v.up.set(0,0,-1),v.lookAt(0,1,0),w.up.set(0,0,1),w.lookAt(0,-1,0),S.up.set(0,1,0),S.lookAt(0,0,1),I.up.set(0,1,0),I.lookAt(0,0,-1);else{if(n!==Ua)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+n);p.up.set(0,-1,0),p.lookAt(-1,0,0),m.up.set(0,-1,0),m.lookAt(1,0,0),v.up.set(0,0,1),v.lookAt(0,1,0),w.up.set(0,0,-1),w.lookAt(0,-1,0),S.up.set(0,-1,0),S.lookAt(0,0,1),I.up.set(0,-1,0),I.lookAt(0,0,-1)}for(const D of u)this.add(D),D.updateMatrixWorld()}update(n,u){this.parent===null&&this.updateMatrixWorld();const{renderTarget:p,activeMipmapLevel:m}=this;this.coordinateSystem!==n.coordinateSystem&&(this.coordinateSystem=n.coordinateSystem,this.updateCoordinateSystem());const[v,w,S,I,D,L]=this.children,Y=n.getRenderTarget(),j=n.getActiveCubeFace(),te=n.getActiveMipmapLevel(),re=n.xr.enabled;n.xr.enabled=!1;const ce=p.texture.generateMipmaps;p.texture.generateMipmaps=!1,n.setRenderTarget(p,0,m),n.render(u,v),n.setRenderTarget(p,1,m),n.render(u,w),n.setRenderTarget(p,2,m),n.render(u,S),n.setRenderTarget(p,3,m),n.render(u,I),n.setRenderTarget(p,4,m),n.render(u,D),p.texture.generateMipmaps=ce,n.setRenderTarget(p,5,m),n.render(u,L),n.setRenderTarget(Y,j,te),n.xr.enabled=re,p.texture.needsPMREMUpdate=!0}}class t1 extends on{constructor(n,u,p,m,v,w,S,I,D,L){super(n=n!==void 0?n:[],u=u!==void 0?u:rn,p,m,v,w,S,I,D,L),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(n){this.image=n}}class Fi extends Wn{constructor(n=1,u={}){super(n,n,u),this.isWebGLCubeRenderTarget=!0;const p={width:n,height:n,depth:1},m=[p,p,p,p,p,p];this.texture=new t1(m,u.mapping,u.wrapS,u.wrapT,u.magFilter,u.minFilter,u.format,u.type,u.anisotropy,u.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=u.generateMipmaps!==void 0&&u.generateMipmaps,this.texture.minFilter=u.minFilter!==void 0?u.minFilter:Wt}fromEquirectangularTexture(n,u){this.texture.type=u.type,this.texture.colorSpace=u.colorSpace,this.texture.generateMipmaps=u.generateMipmaps,this.texture.minFilter=u.minFilter,this.texture.magFilter=u.magFilter;const p={tEquirect:{value:null}},m=`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,v=`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`,w=new no(5,5,5),S=new Q0({name:"CubemapFromEquirect",uniforms:la(p),vertexShader:m,fragmentShader:v,side:ee,blending:ue});S.uniforms.tEquirect.value=u;const I=new cn(w,S),D=u.minFilter;return u.minFilter===st&&(u.minFilter=Wt),new Ql(1,10,this).update(n,I),u.minFilter=D,I.geometry.dispose(),I.material.dispose(),this}clear(n,u,p,m){const v=n.getRenderTarget();for(let w=0;w<6;w++)n.setRenderTarget(this,w),n.clear(u,p,m);n.setRenderTarget(v)}}const i1=new Le,t2=new Le,i2=new $i;class ns{constructor(n=new Le(1,0,0),u=0){this.isPlane=!0,this.normal=n,this.constant=u}set(n,u){return this.normal.copy(n),this.constant=u,this}setComponents(n,u,p,m){return this.normal.set(n,u,p),this.constant=m,this}setFromNormalAndCoplanarPoint(n,u){return this.normal.copy(n),this.constant=-u.dot(this.normal),this}setFromCoplanarPoints(n,u,p){const m=i1.subVectors(p,u).cross(t2.subVectors(n,u)).normalize();return this.setFromNormalAndCoplanarPoint(m,n),this}copy(n){return this.normal.copy(n.normal),this.constant=n.constant,this}normalize(){const n=1/this.normal.length();return this.normal.multiplyScalar(n),this.constant*=n,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(n){return this.normal.dot(n)+this.constant}distanceToSphere(n){return this.distanceToPoint(n.center)-n.radius}projectPoint(n,u){return u.copy(n).addScaledVector(this.normal,-this.distanceToPoint(n))}intersectLine(n,u){const p=n.delta(i1),m=this.normal.dot(p);if(m===0)return this.distanceToPoint(n.start)===0?u.copy(n.start):null;const v=-(n.start.dot(this.normal)+this.constant)/m;return v<0||v>1?null:u.copy(n.start).addScaledVector(p,v)}intersectsLine(n){const u=this.distanceToPoint(n.start),p=this.distanceToPoint(n.end);return u<0&&p>0||p<0&&u>0}intersectsBox(n){return n.intersectsPlane(this)}intersectsSphere(n){return n.intersectsPlane(this)}coplanarPoint(n){return n.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(n,u){const p=u||i2.getNormalMatrix(n),m=this.coplanarPoint(i1).applyMatrix4(n),v=this.normal.applyMatrix3(p).normalize();return this.constant=-m.dot(v),this}translate(n){return this.constant-=n.dot(this.normal),this}equals(n){return n.normal.equals(this.normal)&&n.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ro=new Yn,Y1=new Le;class r1{constructor(n=new ns,u=new ns,p=new ns,m=new ns,v=new ns,w=new ns){this.planes=[n,u,p,m,v,w]}set(n,u,p,m,v,w){const S=this.planes;return S[0].copy(n),S[1].copy(u),S[2].copy(p),S[3].copy(m),S[4].copy(v),S[5].copy(w),this}copy(n){const u=this.planes;for(let p=0;p<6;p++)u[p].copy(n.planes[p]);return this}setFromProjectionMatrix(n,u=ps){const p=this.planes,m=n.elements,v=m[0],w=m[1],S=m[2],I=m[3],D=m[4],L=m[5],Y=m[6],j=m[7],te=m[8],re=m[9],ce=m[10],le=m[11],de=m[12],pe=m[13],me=m[14],we=m[15];if(p[0].setComponents(I-v,j-D,le-te,we-de).normalize(),p[1].setComponents(I+v,j+D,le+te,we+de).normalize(),p[2].setComponents(I+w,j+L,le+re,we+pe).normalize(),p[3].setComponents(I-w,j-L,le-re,we-pe).normalize(),p[4].setComponents(I-S,j-Y,le-ce,we-me).normalize(),u===ps)p[5].setComponents(I+S,j+Y,le+ce,we+me).normalize();else{if(u!==Ua)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+u);p[5].setComponents(S,Y,ce,me).normalize()}return this}intersectsObject(n){if(n.boundingSphere!==void 0)n.boundingSphere===null&&n.computeBoundingSphere(),Ro.copy(n.boundingSphere).applyMatrix4(n.matrixWorld);else{const u=n.geometry;u.boundingSphere===null&&u.computeBoundingSphere(),Ro.copy(u.boundingSphere).applyMatrix4(n.matrixWorld)}return this.intersectsSphere(Ro)}intersectsSprite(n){return Ro.center.set(0,0,0),Ro.radius=.7071067811865476,Ro.applyMatrix4(n.matrixWorld),this.intersectsSphere(Ro)}intersectsSphere(n){const u=this.planes,p=n.center,m=-n.radius;for(let v=0;v<6;v++)if(u[v].distanceToPoint(p)<m)return!1;return!0}intersectsBox(n){const u=this.planes;for(let p=0;p<6;p++){const m=u[p];if(Y1.x=m.normal.x>0?n.max.x:n.min.x,Y1.y=m.normal.y>0?n.max.y:n.min.y,Y1.z=m.normal.z>0?n.max.z:n.min.z,m.distanceToPoint(Y1)<0)return!1}return!0}containsPoint(n){const u=this.planes;for(let p=0;p<6;p++)if(u[p].distanceToPoint(n)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Hl(){let b=null,n=!1,u=null,p=null;function m(v,w){u(v,w),p=b.requestAnimationFrame(m)}return{start:function(){n!==!0&&u!==null&&(p=b.requestAnimationFrame(m),n=!0)},stop:function(){b.cancelAnimationFrame(p),n=!1},setAnimationLoop:function(v){u=v},setContext:function(v){b=v}}}function r2(b){const n=new WeakMap;return{get:function(u){return u.isInterleavedBufferAttribute&&(u=u.data),n.get(u)},remove:function(u){u.isInterleavedBufferAttribute&&(u=u.data);const p=n.get(u);p&&(b.deleteBuffer(p.buffer),n.delete(u))},update:function(u,p){if(u.isGLBufferAttribute){const v=n.get(u);return void((!v||v.version<u.version)&&n.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version}))}u.isInterleavedBufferAttribute&&(u=u.data);const m=n.get(u);if(m===void 0)n.set(u,function(v,w){const S=v.array,I=v.usage,D=S.byteLength,L=b.createBuffer();let Y;if(b.bindBuffer(w,L),b.bufferData(w,S,I),v.onUploadCallback(),S instanceof Float32Array)Y=b.FLOAT;else if(S instanceof Uint16Array)Y=v.isFloat16BufferAttribute?b.HALF_FLOAT:b.UNSIGNED_SHORT;else if(S instanceof Int16Array)Y=b.SHORT;else if(S instanceof Uint32Array)Y=b.UNSIGNED_INT;else if(S instanceof Int32Array)Y=b.INT;else if(S instanceof Int8Array)Y=b.BYTE;else if(S instanceof Uint8Array)Y=b.UNSIGNED_BYTE;else{if(!(S instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+S);Y=b.UNSIGNED_BYTE}return{buffer:L,type:Y,bytesPerElement:S.BYTES_PER_ELEMENT,version:v.version,size:D}}(u,p));else if(m.version<u.version){if(m.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function(v,w,S){const I=w.array,D=w._updateRange,L=w.updateRanges;if(b.bindBuffer(S,v),D.count===-1&&L.length===0&&b.bufferSubData(S,0,I),L.length!==0){for(let Y=0,j=L.length;Y<j;Y++){const te=L[Y];b.bufferSubData(S,te.start*I.BYTES_PER_ELEMENT,I,te.start,te.count)}w.clearUpdateRanges()}D.count!==-1&&(b.bufferSubData(S,D.offset*I.BYTES_PER_ELEMENT,I,D.offset,D.count),D.count=-1),w.onUploadCallback()})(m.buffer,u,p),m.version=u.version}}}}class ca extends Xi{constructor(n=1,u=1,p=1,m=1){super(),this.type="PlaneGeometry",this.parameters={width:n,height:u,widthSegments:p,heightSegments:m};const v=n/2,w=u/2,S=Math.floor(p),I=Math.floor(m),D=S+1,L=I+1,Y=n/S,j=u/I,te=[],re=[],ce=[],le=[];for(let de=0;de<L;de++){const pe=de*j-w;for(let me=0;me<D;me++){const we=me*Y-v;re.push(we,-pe,0),ce.push(0,0,1),le.push(me/S),le.push(1-de/I)}}for(let de=0;de<I;de++)for(let pe=0;pe<S;pe++){const me=pe+D*de,we=pe+D*(de+1),Fe=pe+1+D*(de+1),Be=pe+1+D*de;te.push(me,we,Be),te.push(we,Fe,Be)}this.setIndex(te),this.setAttribute("position",new vi(re,3)),this.setAttribute("normal",new vi(ce,3)),this.setAttribute("uv",new vi(le,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new ca(n.width,n.height,n.widthSegments,n.heightSegments)}}const lr={alphahash_fragment:`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,alphahash_pars_fragment:`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,alphamap_fragment:`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,alphamap_pars_fragment:`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment:`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,alphatest_pars_fragment:`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment:`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment:`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,batching_pars_vertex:`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,batching_vertex:`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,begin_vertex:`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,beginnormal_vertex:`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs:`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iridescence_fragment:`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment:`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment:`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,clipping_planes_pars_fragment:`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex:`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex:`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment:`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment:`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex:`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex:`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,common:`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,cube_uv_reflection_fragment:`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex:`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex:`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex:`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment:`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment:`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,envmap_fragment:`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment:`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment:`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex:`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_physical_pars_fragment:`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,envmap_vertex:`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex:`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex:`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment:`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment:`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment:`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_pars_fragment:`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment:`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment:`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin:`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,lights_toon_fragment:`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment:`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment:`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment:`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment:`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,lights_physical_pars_fragment:`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin:`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps:`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end:`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,logdepthbuf_fragment:`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment:`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex:`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_vertex:`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,map_fragment:`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment:`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment:`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment:`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment:`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment:`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphinstance_vertex:`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,morphcolor_vertex:`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex:`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,morphtarget_pars_vertex:`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,morphtarget_vertex:`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,normal_fragment_begin:`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,normal_fragment_maps:`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment:`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex:`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex:`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment:`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,clearcoat_normal_fragment_begin:`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,clearcoat_normal_fragment_maps:`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,clearcoat_pars_fragment:`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iridescence_pars_fragment:`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,opaque_fragment:`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing:`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,premultiplied_alpha_fragment:`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex:`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment:`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment:`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment:`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment:`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment:`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,shadowmap_pars_vertex:`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex:`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment:`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex:`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex:`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,skinning_vertex:`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex:`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment:`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment:`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment:`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment:`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment:`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,transmission_pars_fragment:`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uv_pars_fragment:`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_pars_vertex:`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_vertex:`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,worldpos_vertex:`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,background_frag:`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,backgroundCube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,backgroundCube_frag:`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cube_frag:`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,depth_vert:`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,meshbasic_vert:`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshnormal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,meshnormal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,shadow_vert:`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`},ci={common:{diffuse:{value:new Jt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new $i},alphaMap:{value:null},alphaMapTransform:{value:new $i},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new $i}},envmap:{envMap:{value:null},envMapRotation:{value:new $i},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new $i}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new $i}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new $i},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new $i},normalScale:{value:new zt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new $i},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new $i}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new $i}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new $i}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Jt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Jt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new $i},alphaTest:{value:0},uvTransform:{value:new $i}},sprite:{diffuse:{value:new Jt(16777215)},opacity:{value:1},center:{value:new zt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new $i},alphaMap:{value:null},alphaMapTransform:{value:new $i},alphaTest:{value:0}}},q0={basic:{uniforms:h0([ci.common,ci.specularmap,ci.envmap,ci.aomap,ci.lightmap,ci.fog]),vertexShader:lr.meshbasic_vert,fragmentShader:lr.meshbasic_frag},lambert:{uniforms:h0([ci.common,ci.specularmap,ci.envmap,ci.aomap,ci.lightmap,ci.emissivemap,ci.bumpmap,ci.normalmap,ci.displacementmap,ci.fog,ci.lights,{emissive:{value:new Jt(0)}}]),vertexShader:lr.meshlambert_vert,fragmentShader:lr.meshlambert_frag},phong:{uniforms:h0([ci.common,ci.specularmap,ci.envmap,ci.aomap,ci.lightmap,ci.emissivemap,ci.bumpmap,ci.normalmap,ci.displacementmap,ci.fog,ci.lights,{emissive:{value:new Jt(0)},specular:{value:new Jt(1118481)},shininess:{value:30}}]),vertexShader:lr.meshphong_vert,fragmentShader:lr.meshphong_frag},standard:{uniforms:h0([ci.common,ci.envmap,ci.aomap,ci.lightmap,ci.emissivemap,ci.bumpmap,ci.normalmap,ci.displacementmap,ci.roughnessmap,ci.metalnessmap,ci.fog,ci.lights,{emissive:{value:new Jt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:lr.meshphysical_vert,fragmentShader:lr.meshphysical_frag},toon:{uniforms:h0([ci.common,ci.aomap,ci.lightmap,ci.emissivemap,ci.bumpmap,ci.normalmap,ci.displacementmap,ci.gradientmap,ci.fog,ci.lights,{emissive:{value:new Jt(0)}}]),vertexShader:lr.meshtoon_vert,fragmentShader:lr.meshtoon_frag},matcap:{uniforms:h0([ci.common,ci.bumpmap,ci.normalmap,ci.displacementmap,ci.fog,{matcap:{value:null}}]),vertexShader:lr.meshmatcap_vert,fragmentShader:lr.meshmatcap_frag},points:{uniforms:h0([ci.points,ci.fog]),vertexShader:lr.points_vert,fragmentShader:lr.points_frag},dashed:{uniforms:h0([ci.common,ci.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:lr.linedashed_vert,fragmentShader:lr.linedashed_frag},depth:{uniforms:h0([ci.common,ci.displacementmap]),vertexShader:lr.depth_vert,fragmentShader:lr.depth_frag},normal:{uniforms:h0([ci.common,ci.bumpmap,ci.normalmap,ci.displacementmap,{opacity:{value:1}}]),vertexShader:lr.meshnormal_vert,fragmentShader:lr.meshnormal_frag},sprite:{uniforms:h0([ci.sprite,ci.fog]),vertexShader:lr.sprite_vert,fragmentShader:lr.sprite_frag},background:{uniforms:{uvTransform:{value:new $i},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:lr.background_vert,fragmentShader:lr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new $i}},vertexShader:lr.backgroundCube_vert,fragmentShader:lr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:lr.cube_vert,fragmentShader:lr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:lr.equirect_vert,fragmentShader:lr.equirect_frag},distanceRGBA:{uniforms:h0([ci.common,ci.displacementmap,{referencePosition:{value:new Le},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:lr.distanceRGBA_vert,fragmentShader:lr.distanceRGBA_frag},shadow:{uniforms:h0([ci.lights,ci.fog,{color:{value:new Jt(0)},opacity:{value:1}}]),vertexShader:lr.shadow_vert,fragmentShader:lr.shadow_frag}};q0.physical={uniforms:h0([q0.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new $i},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new $i},clearcoatNormalScale:{value:new zt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new $i},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new $i},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new $i},sheen:{value:0},sheenColor:{value:new Jt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new $i},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new $i},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new $i},transmissionSamplerSize:{value:new zt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new $i},attenuationDistance:{value:0},attenuationColor:{value:new Jt(0)},specularColor:{value:new Jt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new $i},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new $i},anisotropyVector:{value:new zt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new $i}}]),vertexShader:lr.meshphysical_vert,fragmentShader:lr.meshphysical_frag};const K1={r:0,b:0,g:0},Bo=new k0,_n=new Ii;function eh(b,n,u,p,m,v,w){const S=new Jt(0);let I,D,L=v===!0?0:1,Y=null,j=0,te=null;function re(le){let de=le.isScene===!0?le.background:null;return de&&de.isTexture&&(de=(le.backgroundBlurriness>0?u:n).get(de)),de}function ce(le,de){le.getRGB(K1,$c(b)),p.buffers.color.setClear(K1.r,K1.g,K1.b,de,w)}return{getClearColor:function(){return S},setClearColor:function(le,de=1){S.set(le),L=de,ce(S,L)},getClearAlpha:function(){return L},setClearAlpha:function(le){L=le,ce(S,L)},render:function(le){let de=!1;const pe=re(le);pe===null?ce(S,L):pe&&pe.isColor&&(ce(pe,1),de=!0);const me=b.xr.getEnvironmentBlendMode();me==="additive"?p.buffers.color.setClear(0,0,0,1,w):me==="alpha-blend"&&p.buffers.color.setClear(0,0,0,0,w),(b.autoClear||de)&&b.clear(b.autoClearColor,b.autoClearDepth,b.autoClearStencil)},addToRenderList:function(le,de){const pe=re(de);pe&&(pe.isCubeTexture||pe.mapping===B0)?(D===void 0&&(D=new cn(new no(1e4,1e4,1e4),new Q0({name:"BackgroundCubeMaterial",uniforms:la(q0.backgroundCube.uniforms),vertexShader:q0.backgroundCube.vertexShader,fragmentShader:q0.backgroundCube.fragmentShader,side:ee,depthTest:!1,depthWrite:!1,fog:!1})),D.geometry.deleteAttribute("normal"),D.geometry.deleteAttribute("uv"),D.onBeforeRender=function(me,we,Fe){this.matrixWorld.copyPosition(Fe.matrixWorld)},Object.defineProperty(D.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),m.update(D)),Bo.copy(de.backgroundRotation),Bo.x*=-1,Bo.y*=-1,Bo.z*=-1,pe.isCubeTexture&&pe.isRenderTargetTexture===!1&&(Bo.y*=-1,Bo.z*=-1),D.material.uniforms.envMap.value=pe,D.material.uniforms.flipEnvMap.value=pe.isCubeTexture&&pe.isRenderTargetTexture===!1?-1:1,D.material.uniforms.backgroundBlurriness.value=de.backgroundBlurriness,D.material.uniforms.backgroundIntensity.value=de.backgroundIntensity,D.material.uniforms.backgroundRotation.value.setFromMatrix4(_n.makeRotationFromEuler(Bo)),D.material.toneMapped=Fr.getTransfer(pe.colorSpace)!==jr,Y===pe&&j===pe.version&&te===b.toneMapping||(D.material.needsUpdate=!0,Y=pe,j=pe.version,te=b.toneMapping),D.layers.enableAll(),le.unshift(D,D.geometry,D.material,0,0,null)):pe&&pe.isTexture&&(I===void 0&&(I=new cn(new ca(2,2),new Q0({name:"BackgroundMaterial",uniforms:la(q0.background.uniforms),vertexShader:q0.background.vertexShader,fragmentShader:q0.background.fragmentShader,side:Z,depthTest:!1,depthWrite:!1,fog:!1})),I.geometry.deleteAttribute("normal"),Object.defineProperty(I.material,"map",{get:function(){return this.uniforms.t2D.value}}),m.update(I)),I.material.uniforms.t2D.value=pe,I.material.uniforms.backgroundIntensity.value=de.backgroundIntensity,I.material.toneMapped=Fr.getTransfer(pe.colorSpace)!==jr,pe.matrixAutoUpdate===!0&&pe.updateMatrix(),I.material.uniforms.uvTransform.value.copy(pe.matrix),Y===pe&&j===pe.version&&te===b.toneMapping||(I.material.needsUpdate=!0,Y=pe,j=pe.version,te=b.toneMapping),I.layers.enableAll(),le.unshift(I,I.geometry,I.material,0,0,null))}}}function zl(b,n){const u=b.getParameter(b.MAX_VERTEX_ATTRIBS),p={},m=D(null);let v=m,w=!1;function S(de){return b.bindVertexArray(de)}function I(de){return b.deleteVertexArray(de)}function D(de){const pe=[],me=[],we=[];for(let Fe=0;Fe<u;Fe++)pe[Fe]=0,me[Fe]=0,we[Fe]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:pe,enabledAttributes:me,attributeDivisors:we,object:de,attributes:{},index:null}}function L(){const de=v.newAttributes;for(let pe=0,me=de.length;pe<me;pe++)de[pe]=0}function Y(de){j(de,0)}function j(de,pe){const me=v.newAttributes,we=v.enabledAttributes,Fe=v.attributeDivisors;me[de]=1,we[de]===0&&(b.enableVertexAttribArray(de),we[de]=1),Fe[de]!==pe&&(b.vertexAttribDivisor(de,pe),Fe[de]=pe)}function te(){const de=v.newAttributes,pe=v.enabledAttributes;for(let me=0,we=pe.length;me<we;me++)pe[me]!==de[me]&&(b.disableVertexAttribArray(me),pe[me]=0)}function re(de,pe,me,we,Fe,Be,ke){ke===!0?b.vertexAttribIPointer(de,pe,me,Fe,Be):b.vertexAttribPointer(de,pe,me,we,Fe,Be)}function ce(){le(),w=!0,v!==m&&(v=m,S(v.object))}function le(){m.geometry=null,m.program=null,m.wireframe=!1}return{setup:function(de,pe,me,we,Fe){let Be=!1;const ke=function(ze,tt,rt){const $e=rt.wireframe===!0;let ht=p[ze.id];ht===void 0&&(ht={},p[ze.id]=ht);let ut=ht[tt.id];ut===void 0&&(ut={},ht[tt.id]=ut);let at=ut[$e];return at===void 0&&(at=D(b.createVertexArray()),ut[$e]=at),at}(we,me,pe);v!==ke&&(v=ke,S(v.object)),Be=function(ze,tt,rt,$e){const ht=v.attributes,ut=tt.attributes;let at=0;const Dt=rt.getAttributes();for(const It in Dt)if(Dt[It].location>=0){const Ot=ht[It];let Tt=ut[It];if(Tt===void 0&&(It==="instanceMatrix"&&ze.instanceMatrix&&(Tt=ze.instanceMatrix),It==="instanceColor"&&ze.instanceColor&&(Tt=ze.instanceColor)),Ot===void 0||Ot.attribute!==Tt||Tt&&Ot.data!==Tt.data)return!0;at++}return v.attributesNum!==at||v.index!==$e}(de,we,me,Fe),Be&&function(ze,tt,rt,$e){const ht={},ut=tt.attributes;let at=0;const Dt=rt.getAttributes();for(const It in Dt)if(Dt[It].location>=0){let Ot=ut[It];Ot===void 0&&(It==="instanceMatrix"&&ze.instanceMatrix&&(Ot=ze.instanceMatrix),It==="instanceColor"&&ze.instanceColor&&(Ot=ze.instanceColor));const Tt={};Tt.attribute=Ot,Ot&&Ot.data&&(Tt.data=Ot.data),ht[It]=Tt,at++}v.attributes=ht,v.attributesNum=at,v.index=$e}(de,we,me,Fe),Fe!==null&&n.update(Fe,b.ELEMENT_ARRAY_BUFFER),(Be||w)&&(w=!1,function(ze,tt,rt,$e){L();const ht=$e.attributes,ut=rt.getAttributes(),at=tt.defaultAttributeValues;for(const Dt in ut){const It=ut[Dt];if(It.location>=0){let Ot=ht[Dt];if(Ot===void 0&&(Dt==="instanceMatrix"&&ze.instanceMatrix&&(Ot=ze.instanceMatrix),Dt==="instanceColor"&&ze.instanceColor&&(Ot=ze.instanceColor)),Ot!==void 0){const Tt=Ot.normalized,Ai=Ot.itemSize,yi=n.get(Ot);if(yi===void 0)continue;const ni=yi.buffer,ai=yi.type,hi=yi.bytesPerElement,fi=ai===b.INT||ai===b.UNSIGNED_INT||Ot.gpuType===_r;if(Ot.isInterleavedBufferAttribute){const wt=Ot.data,jt=wt.stride,mi=Ot.offset;if(wt.isInstancedInterleavedBuffer){for(let ei=0;ei<It.locationSize;ei++)j(It.location+ei,wt.meshPerAttribute);ze.isInstancedMesh!==!0&&$e._maxInstanceCount===void 0&&($e._maxInstanceCount=wt.meshPerAttribute*wt.count)}else for(let ei=0;ei<It.locationSize;ei++)Y(It.location+ei);b.bindBuffer(b.ARRAY_BUFFER,ni);for(let ei=0;ei<It.locationSize;ei++)re(It.location+ei,Ai/It.locationSize,ai,Tt,jt*hi,(mi+Ai/It.locationSize*ei)*hi,fi)}else{if(Ot.isInstancedBufferAttribute){for(let wt=0;wt<It.locationSize;wt++)j(It.location+wt,Ot.meshPerAttribute);ze.isInstancedMesh!==!0&&$e._maxInstanceCount===void 0&&($e._maxInstanceCount=Ot.meshPerAttribute*Ot.count)}else for(let wt=0;wt<It.locationSize;wt++)Y(It.location+wt);b.bindBuffer(b.ARRAY_BUFFER,ni);for(let wt=0;wt<It.locationSize;wt++)re(It.location+wt,Ai/It.locationSize,ai,Tt,Ai*hi,Ai/It.locationSize*wt*hi,fi)}}else if(at!==void 0){const Tt=at[Dt];if(Tt!==void 0)switch(Tt.length){case 2:b.vertexAttrib2fv(It.location,Tt);break;case 3:b.vertexAttrib3fv(It.location,Tt);break;case 4:b.vertexAttrib4fv(It.location,Tt);break;default:b.vertexAttrib1fv(It.location,Tt)}}}}te()}(de,pe,me,we),Fe!==null&&b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,n.get(Fe).buffer))},reset:ce,resetDefaultState:le,dispose:function(){ce();for(const de in p){const pe=p[de];for(const me in pe){const we=pe[me];for(const Fe in we)I(we[Fe].object),delete we[Fe];delete pe[me]}delete p[de]}},releaseStatesOfGeometry:function(de){if(p[de.id]===void 0)return;const pe=p[de.id];for(const me in pe){const we=pe[me];for(const Fe in we)I(we[Fe].object),delete we[Fe];delete pe[me]}delete p[de.id]},releaseStatesOfProgram:function(de){for(const pe in p){const me=p[pe];if(me[de.id]===void 0)continue;const we=me[de.id];for(const Fe in we)I(we[Fe].object),delete we[Fe];delete me[de.id]}},initAttributes:L,enableAttribute:Y,disableUnusedAttributes:te}}function ha(b,n,u){let p;function m(v,w,S){S!==0&&(b.drawArraysInstanced(p,v,w,S),u.update(w,p,S))}this.setMode=function(v){p=v},this.render=function(v,w){b.drawArrays(p,v,w),u.update(w,p,1)},this.renderInstances=m,this.renderMultiDraw=function(v,w,S){if(S===0)return;const I=n.get("WEBGL_multi_draw");if(I===null)for(let D=0;D<S;D++)this.render(v[D],w[D]);else{I.multiDrawArraysWEBGL(p,v,0,w,0,S);let D=0;for(let L=0;L<S;L++)D+=w[L];u.update(D,p,1)}},this.renderMultiDrawInstances=function(v,w,S,I){if(S===0)return;const D=n.get("WEBGL_multi_draw");if(D===null)for(let L=0;L<v.length;L++)m(v[L],w[L],I[L]);else{D.multiDrawArraysInstancedWEBGL(p,v,0,w,0,I,0,S);let L=0;for(let Y=0;Y<S;Y++)L+=w[Y];for(let Y=0;Y<I.length;Y++)u.update(L,p,I[Y])}}}function n2(b,n,u,p){let m;function v(Y){if(Y==="highp"){if(b.getShaderPrecisionFormat(b.VERTEX_SHADER,b.HIGH_FLOAT).precision>0&&b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.HIGH_FLOAT).precision>0)return"highp";Y="mediump"}return Y==="mediump"&&b.getShaderPrecisionFormat(b.VERTEX_SHADER,b.MEDIUM_FLOAT).precision>0&&b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let w=u.precision!==void 0?u.precision:"highp";const S=v(w);S!==w&&(console.warn("THREE.WebGLRenderer:",w,"not supported, using",S,"instead."),w=S);const I=u.logarithmicDepthBuffer===!0,D=b.getParameter(b.MAX_TEXTURE_IMAGE_UNITS),L=b.getParameter(b.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(m!==void 0)return m;if(n.has("EXT_texture_filter_anisotropic")===!0){const Y=n.get("EXT_texture_filter_anisotropic");m=b.getParameter(Y.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else m=0;return m},getMaxPrecision:v,textureFormatReadable:function(Y){return Y===ir||p.convert(Y)===b.getParameter(b.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(Y){const j=Y===Ji&&(n.has("EXT_color_buffer_half_float")||n.has("EXT_color_buffer_float"));return!(Y!==Di&&p.convert(Y)!==b.getParameter(b.IMPLEMENTATION_COLOR_READ_TYPE)&&Y!==wi&&!j)},precision:w,logarithmicDepthBuffer:I,maxTextures:D,maxVertexTextures:L,maxTextureSize:b.getParameter(b.MAX_TEXTURE_SIZE),maxCubemapSize:b.getParameter(b.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:b.getParameter(b.MAX_VERTEX_ATTRIBS),maxVertexUniforms:b.getParameter(b.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:b.getParameter(b.MAX_VARYING_VECTORS),maxFragmentUniforms:b.getParameter(b.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:L>0,maxSamples:b.getParameter(b.MAX_SAMPLES)}}function Gl(b){const n=this;let u=null,p=0,m=!1,v=!1;const w=new ns,S=new $i,I={value:null,needsUpdate:!1};function D(L,Y,j,te){const re=L!==null?L.length:0;let ce=null;if(re!==0){if(ce=I.value,te!==!0||ce===null){const le=j+4*re,de=Y.matrixWorldInverse;S.getNormalMatrix(de),(ce===null||ce.length<le)&&(ce=new Float32Array(le));for(let pe=0,me=j;pe!==re;++pe,me+=4)w.copy(L[pe]).applyMatrix4(de,S),w.normal.toArray(ce,me),ce[me+3]=w.constant}I.value=ce,I.needsUpdate=!0}return n.numPlanes=re,n.numIntersection=0,ce}this.uniform=I,this.numPlanes=0,this.numIntersection=0,this.init=function(L,Y){const j=L.length!==0||Y||p!==0||m;return m=Y,p=L.length,j},this.beginShadows=function(){v=!0,D(null)},this.endShadows=function(){v=!1},this.setGlobalState=function(L,Y){u=D(L,Y,0)},this.setState=function(L,Y,j){const te=L.clippingPlanes,re=L.clipIntersection,ce=L.clipShadows,le=b.get(L);if(!m||te===null||te.length===0||v&&!ce)v?D(null):(I.value!==u&&(I.value=u,I.needsUpdate=p>0),n.numPlanes=p,n.numIntersection=0);else{const de=v?0:p,pe=4*de;let me=le.clippingState||null;I.value=me,me=D(te,Y,pe,j);for(let we=0;we!==pe;++we)me[we]=u[we];le.clippingState=me,this.numIntersection=re?this.numPlanes:0,this.numPlanes+=de}}}function s2(b){let n=new WeakMap;function u(m,v){return v===cs?m.mapping=rn:v===Tr&&(m.mapping=Pn),m}function p(m){const v=m.target;v.removeEventListener("dispose",p);const w=n.get(v);w!==void 0&&(n.delete(v),w.dispose())}return{get:function(m){if(m&&m.isTexture){const v=m.mapping;if(v===cs||v===Tr){if(n.has(m))return u(n.get(m).texture,m.mapping);{const w=m.image;if(w&&w.height>0){const S=new Fi(w.height);return S.fromEquirectangularTexture(b,m),n.set(m,S),m.addEventListener("dispose",p),u(S.texture,m.mapping)}return null}}}return m},dispose:function(){n=new WeakMap}}}class ua extends X1{constructor(n=-1,u=1,p=1,m=-1,v=.1,w=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=n,this.right=u,this.top=p,this.bottom=m,this.near=v,this.far=w,this.updateProjectionMatrix()}copy(n,u){return super.copy(n,u),this.left=n.left,this.right=n.right,this.top=n.top,this.bottom=n.bottom,this.near=n.near,this.far=n.far,this.zoom=n.zoom,this.view=n.view===null?null:Object.assign({},n.view),this}setViewOffset(n,u,p,m,v,w){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=u,this.view.offsetX=p,this.view.offsetY=m,this.view.width=v,this.view.height=w,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const n=(this.right-this.left)/(2*this.zoom),u=(this.top-this.bottom)/(2*this.zoom),p=(this.right+this.left)/2,m=(this.top+this.bottom)/2;let v=p-n,w=p+n,S=m+u,I=m-u;if(this.view!==null&&this.view.enabled){const D=(this.right-this.left)/this.view.fullWidth/this.zoom,L=(this.top-this.bottom)/this.view.fullHeight/this.zoom;v+=D*this.view.offsetX,w=v+D*this.view.width,S-=L*this.view.offsetY,I=S-L*this.view.height}this.projectionMatrix.makeOrthographic(v,w,S,I,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(n){const u=super.toJSON(n);return u.object.zoom=this.zoom,u.object.left=this.left,u.object.right=this.right,u.object.top=this.top,u.object.bottom=this.bottom,u.object.near=this.near,u.object.far=this.far,this.view!==null&&(u.object.view=Object.assign({},this.view)),u}}const Vl=[.125,.215,.35,.446,.526,.582],da=20,J1=new ua,th=new Jt;let Wl=null,Es=0,n1=0,s1=!1;const Do=(1+Math.sqrt(5))/2,Qs=1/Do,ih=[new Le(-Do,Qs,0),new Le(Do,Qs,0),new Le(-Qs,0,Do),new Le(Qs,0,Do),new Le(0,Do,-Qs),new Le(0,Do,Qs),new Le(-1,1,-1),new Le(1,1,-1),new Le(-1,1,1),new Le(1,1,1)];class ql{constructor(n){this._renderer=n,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(n,u=0,p=.1,m=100){Wl=this._renderer.getRenderTarget(),Es=this._renderer.getActiveCubeFace(),n1=this._renderer.getActiveMipmapLevel(),s1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const v=this._allocateTargets();return v.depthBuffer=!0,this._sceneToCubeUV(n,p,m,v),u>0&&this._blur(v,0,0,u),this._applyPMREM(v),this._cleanup(v),v}fromEquirectangular(n,u=null){return this._fromTexture(n,u)}fromCubemap(n,u=null){return this._fromTexture(n,u)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Xl(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=nh(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(n){this._lodMax=Math.floor(Math.log2(n)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let n=0;n<this._lodPlanes.length;n++)this._lodPlanes[n].dispose()}_cleanup(n){this._renderer.setRenderTarget(Wl,Es,n1),this._renderer.xr.enabled=s1,n.scissorTest=!1,Z1(n,0,0,n.width,n.height)}_fromTexture(n,u){n.mapping===rn||n.mapping===Pn?this._setSize(n.image.length===0?16:n.image[0].width||n.image[0].image.width):this._setSize(n.image.width/4),Wl=this._renderer.getRenderTarget(),Es=this._renderer.getActiveCubeFace(),n1=this._renderer.getActiveMipmapLevel(),s1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const p=u||this._allocateTargets();return this._textureToCubeUV(n,p),this._applyPMREM(p),this._cleanup(p),p}_allocateTargets(){const n=3*Math.max(this._cubeSize,112),u=4*this._cubeSize,p={magFilter:Wt,minFilter:Wt,generateMipmaps:!1,type:Ji,format:ir,colorSpace:Cn,depthBuffer:!1},m=rh(n,u,p);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==n||this._pingPongRenderTarget.height!==u){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=rh(n,u,p);const{_lodMax:v}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(w){const S=[],I=[],D=[];let L=w;const Y=w-4+1+Vl.length;for(let j=0;j<Y;j++){const te=Math.pow(2,L);I.push(te);let re=1/te;j>w-4?re=Vl[j-w+4-1]:j===0&&(re=0),D.push(re);const ce=1/(te-2),le=-ce,de=1+ce,pe=[le,le,de,le,de,de,le,le,de,de,le,de],me=6,we=6,Fe=3,Be=2,ke=1,ze=new Float32Array(Fe*we*me),tt=new Float32Array(Be*we*me),rt=new Float32Array(ke*we*me);for(let ht=0;ht<me;ht++){const ut=ht%3*2/3-1,at=ht>2?0:-1,Dt=[ut,at,0,ut+2/3,at,0,ut+2/3,at+1,0,ut,at,0,ut+2/3,at+1,0,ut,at+1,0];ze.set(Dt,Fe*we*ht),tt.set(pe,Be*we*ht);const It=[ht,ht,ht,ht,ht,ht];rt.set(It,ke*we*ht)}const $e=new Xi;$e.setAttribute("position",new nr(ze,Fe)),$e.setAttribute("uv",new nr(tt,Be)),$e.setAttribute("faceIndex",new nr(rt,ke)),S.push($e),L>4&&L--}return{lodPlanes:S,sizeLods:I,sigmas:D}}(v)),this._blurMaterial=function(w,S,I){const D=new Float32Array(da),L=new Le(0,1,0);return new Q0({name:"SphericalGaussianBlur",defines:{n:da,CUBEUV_TEXEL_WIDTH:1/S,CUBEUV_TEXEL_HEIGHT:1/I,CUBEUV_MAX_MIP:`${w}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:D},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:L}},vertexShader:`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`,fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ue,depthTest:!1,depthWrite:!1})}(v,n,u)}return m}_compileMaterial(n){const u=new cn(this._lodPlanes[0],n);this._renderer.compile(u,J1)}_sceneToCubeUV(n,u,p,m){const v=new Rn(90,1,u,p),w=[1,-1,1,1,1,1],S=[1,1,1,-1,-1,-1],I=this._renderer,D=I.autoClear,L=I.toneMapping;I.getClearColor(th),I.toneMapping=_e,I.autoClear=!1;const Y=new U0({name:"PMREM.Background",side:ee,depthWrite:!1,depthTest:!1}),j=new cn(new no,Y);let te=!1;const re=n.background;re?re.isColor&&(Y.color.copy(re),n.background=null,te=!0):(Y.color.copy(th),te=!0);for(let ce=0;ce<6;ce++){const le=ce%3;le===0?(v.up.set(0,w[ce],0),v.lookAt(S[ce],0,0)):le===1?(v.up.set(0,0,w[ce]),v.lookAt(0,S[ce],0)):(v.up.set(0,w[ce],0),v.lookAt(0,0,S[ce]));const de=this._cubeSize;Z1(m,le*de,ce>2?de:0,de,de),I.setRenderTarget(m),te&&I.render(j,v),I.render(n,v)}j.geometry.dispose(),j.material.dispose(),I.toneMapping=L,I.autoClear=D,n.background=re}_textureToCubeUV(n,u){const p=this._renderer,m=n.mapping===rn||n.mapping===Pn;m?(this._cubemapMaterial===null&&(this._cubemapMaterial=Xl()),this._cubemapMaterial.uniforms.flipEnvMap.value=n.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=nh());const v=m?this._cubemapMaterial:this._equirectMaterial,w=new cn(this._lodPlanes[0],v);v.uniforms.envMap.value=n;const S=this._cubeSize;Z1(u,0,0,3*S,2*S),p.setRenderTarget(u),p.render(w,J1)}_applyPMREM(n){const u=this._renderer,p=u.autoClear;u.autoClear=!1;const m=this._lodPlanes.length;for(let v=1;v<m;v++){const w=Math.sqrt(this._sigmas[v]*this._sigmas[v]-this._sigmas[v-1]*this._sigmas[v-1]),S=ih[(m-v-1)%ih.length];this._blur(n,v-1,v,w,S)}u.autoClear=p}_blur(n,u,p,m,v){const w=this._pingPongRenderTarget;this._halfBlur(n,w,u,p,m,"latitudinal",v),this._halfBlur(w,n,p,p,m,"longitudinal",v)}_halfBlur(n,u,p,m,v,w,S){const I=this._renderer,D=this._blurMaterial;w!=="latitudinal"&&w!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const L=new cn(this._lodPlanes[m],D),Y=D.uniforms,j=this._sizeLods[p]-1,te=isFinite(v)?Math.PI/(2*j):2*Math.PI/39,re=v/te,ce=isFinite(v)?1+Math.floor(3*re):da;ce>da&&console.warn(`sigmaRadians, ${v}, is too large and will clip, as it requested ${ce} samples when the maximum is set to 20`);const le=[];let de=0;for(let we=0;we<da;++we){const Fe=we/re,Be=Math.exp(-Fe*Fe/2);le.push(Be),we===0?de+=Be:we<ce&&(de+=2*Be)}for(let we=0;we<le.length;we++)le[we]=le[we]/de;Y.envMap.value=n.texture,Y.samples.value=ce,Y.weights.value=le,Y.latitudinal.value=w==="latitudinal",S&&(Y.poleAxis.value=S);const{_lodMax:pe}=this;Y.dTheta.value=te,Y.mipInt.value=pe-p;const me=this._sizeLods[m];Z1(u,3*me*(m>pe-4?m-pe+4:0),4*(this._cubeSize-me),3*me,2*me),I.setRenderTarget(u),I.render(L,J1)}}function rh(b,n,u){const p=new Wn(b,n,u);return p.texture.mapping=B0,p.texture.name="PMREM.cubeUv",p.scissorTest=!0,p}function Z1(b,n,u,p,m){b.viewport.set(n,u,p,m),b.scissor.set(n,u,p,m)}function nh(){return new Q0({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`,fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ue,depthTest:!1,depthWrite:!1})}function Xl(){return new Q0({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`,fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ue,depthTest:!1,depthWrite:!1})}function o2(b){let n=new WeakMap,u=null;function p(m){const v=m.target;v.removeEventListener("dispose",p);const w=n.get(v);w!==void 0&&(n.delete(v),w.dispose())}return{get:function(m){if(m&&m.isTexture){const v=m.mapping,w=v===cs||v===Tr,S=v===rn||v===Pn;if(w||S){let I=n.get(m);const D=I!==void 0?I.texture.pmremVersion:0;if(m.isRenderTargetTexture&&m.pmremVersion!==D)return u===null&&(u=new ql(b)),I=w?u.fromEquirectangular(m,I):u.fromCubemap(m,I),I.texture.pmremVersion=m.pmremVersion,n.set(m,I),I.texture;if(I!==void 0)return I.texture;{const L=m.image;return w&&L&&L.height>0||S&&L&&function(Y){let j=0;for(let te=0;te<6;te++)Y[te]!==void 0&&j++;return j===6}(L)?(u===null&&(u=new ql(b)),I=w?u.fromEquirectangular(m):u.fromCubemap(m),I.texture.pmremVersion=m.pmremVersion,n.set(m,I),m.addEventListener("dispose",p),I.texture):null}}}return m},dispose:function(){n=new WeakMap,u!==null&&(u.dispose(),u=null)}}}function o1(b){const n={};function u(p){if(n[p]!==void 0)return n[p];let m;switch(p){case"WEBGL_depth_texture":m=b.getExtension("WEBGL_depth_texture")||b.getExtension("MOZ_WEBGL_depth_texture")||b.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":m=b.getExtension("EXT_texture_filter_anisotropic")||b.getExtension("MOZ_EXT_texture_filter_anisotropic")||b.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":m=b.getExtension("WEBGL_compressed_texture_s3tc")||b.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||b.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":m=b.getExtension("WEBGL_compressed_texture_pvrtc")||b.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:m=b.getExtension(p)}return n[p]=m,m}return{has:function(p){return u(p)!==null},init:function(){u("EXT_color_buffer_float"),u("WEBGL_clip_cull_distance"),u("OES_texture_float_linear"),u("EXT_color_buffer_half_float"),u("WEBGL_multisampled_render_to_texture"),u("WEBGL_render_shared_exponent")},get:function(p){const m=u(p);return m===null&&console.warn("THREE.WebGLRenderer: "+p+" extension not supported."),m}}}function a2(b,n,u,p){const m={},v=new WeakMap;function w(I){const D=I.target;D.index!==null&&n.remove(D.index);for(const Y in D.attributes)n.remove(D.attributes[Y]);for(const Y in D.morphAttributes){const j=D.morphAttributes[Y];for(let te=0,re=j.length;te<re;te++)n.remove(j[te])}D.removeEventListener("dispose",w),delete m[D.id];const L=v.get(D);L&&(n.remove(L),v.delete(D)),p.releaseStatesOfGeometry(D),D.isInstancedBufferGeometry===!0&&delete D._maxInstanceCount,u.memory.geometries--}function S(I){const D=[],L=I.index,Y=I.attributes.position;let j=0;if(L!==null){const ce=L.array;j=L.version;for(let le=0,de=ce.length;le<de;le+=3){const pe=ce[le+0],me=ce[le+1],we=ce[le+2];D.push(pe,me,me,we,we,pe)}}else{if(Y===void 0)return;{const ce=Y.array;j=Y.version;for(let le=0,de=ce.length/3-1;le<de;le+=3){const pe=le+0,me=le+1,we=le+2;D.push(pe,me,me,we,we,pe)}}}const te=new(Lc(D)?z1:kl)(D,1);te.version=j;const re=v.get(I);re&&n.remove(re),v.set(I,te)}return{get:function(I,D){return m[D.id]===!0||(D.addEventListener("dispose",w),m[D.id]=!0,u.memory.geometries++),D},update:function(I){const D=I.attributes;for(const Y in D)n.update(D[Y],b.ARRAY_BUFFER);const L=I.morphAttributes;for(const Y in L){const j=L[Y];for(let te=0,re=j.length;te<re;te++)n.update(j[te],b.ARRAY_BUFFER)}},getWireframeAttribute:function(I){const D=v.get(I);if(D){const L=I.index;L!==null&&D.version<L.version&&S(I)}else S(I);return v.get(I)}}}function l2(b,n,u){let p,m,v;function w(S,I,D){D!==0&&(b.drawElementsInstanced(p,I,m,S*v,D),u.update(I,p,D))}this.setMode=function(S){p=S},this.setIndex=function(S){m=S.type,v=S.bytesPerElement},this.render=function(S,I){b.drawElements(p,I,m,S*v),u.update(I,p,1)},this.renderInstances=w,this.renderMultiDraw=function(S,I,D){if(D===0)return;const L=n.get("WEBGL_multi_draw");if(L===null)for(let Y=0;Y<D;Y++)this.render(S[Y]/v,I[Y]);else{L.multiDrawElementsWEBGL(p,I,0,m,S,0,D);let Y=0;for(let j=0;j<D;j++)Y+=I[j];u.update(Y,p,1)}},this.renderMultiDrawInstances=function(S,I,D,L){if(D===0)return;const Y=n.get("WEBGL_multi_draw");if(Y===null)for(let j=0;j<S.length;j++)w(S[j]/v,I[j],L[j]);else{Y.multiDrawElementsInstancedWEBGL(p,I,0,m,S,0,L,0,D);let j=0;for(let te=0;te<D;te++)j+=I[te];for(let te=0;te<L.length;te++)u.update(j,p,L[te])}}}function c2(b){const n={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:n,programs:null,autoReset:!0,reset:function(){n.calls=0,n.triangles=0,n.points=0,n.lines=0},update:function(u,p,m){switch(n.calls++,p){case b.TRIANGLES:n.triangles+=m*(u/3);break;case b.LINES:n.lines+=m*(u/2);break;case b.LINE_STRIP:n.lines+=m*(u-1);break;case b.LINE_LOOP:n.lines+=m*u;break;case b.POINTS:n.points+=m*u;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",p)}}}}function sh(b,n,u){const p=new WeakMap,m=new Rr;return{update:function(v,w,S){const I=v.morphTargetInfluences,D=w.morphAttributes.position||w.morphAttributes.normal||w.morphAttributes.color,L=D!==void 0?D.length:0;let Y=p.get(w);if(Y===void 0||Y.count!==L){let ze=function(){Be.dispose(),p.delete(w),w.removeEventListener("dispose",ze)};Y!==void 0&&Y.texture.dispose();const j=w.morphAttributes.position!==void 0,te=w.morphAttributes.normal!==void 0,re=w.morphAttributes.color!==void 0,ce=w.morphAttributes.position||[],le=w.morphAttributes.normal||[],de=w.morphAttributes.color||[];let pe=0;j===!0&&(pe=1),te===!0&&(pe=2),re===!0&&(pe=3);let me=w.attributes.position.count*pe,we=1;me>n.maxTextureSize&&(we=Math.ceil(me/n.maxTextureSize),me=n.maxTextureSize);const Fe=new Float32Array(me*we*4*L),Be=new gn(Fe,me,we,L);Be.type=wi,Be.needsUpdate=!0;const ke=4*pe;for(let tt=0;tt<L;tt++){const rt=ce[tt],$e=le[tt],ht=de[tt],ut=me*we*4*tt;for(let at=0;at<rt.count;at++){const Dt=at*ke;j===!0&&(m.fromBufferAttribute(rt,at),Fe[ut+Dt+0]=m.x,Fe[ut+Dt+1]=m.y,Fe[ut+Dt+2]=m.z,Fe[ut+Dt+3]=0),te===!0&&(m.fromBufferAttribute($e,at),Fe[ut+Dt+4]=m.x,Fe[ut+Dt+5]=m.y,Fe[ut+Dt+6]=m.z,Fe[ut+Dt+7]=0),re===!0&&(m.fromBufferAttribute(ht,at),Fe[ut+Dt+8]=m.x,Fe[ut+Dt+9]=m.y,Fe[ut+Dt+10]=m.z,Fe[ut+Dt+11]=ht.itemSize===4?m.w:1)}}Y={count:L,texture:Be,size:new zt(me,we)},p.set(w,Y),w.addEventListener("dispose",ze)}if(v.isInstancedMesh===!0&&v.morphTexture!==null)S.getUniforms().setValue(b,"morphTexture",v.morphTexture,u);else{let j=0;for(let re=0;re<I.length;re++)j+=I[re];const te=w.morphTargetsRelative?1:1-j;S.getUniforms().setValue(b,"morphTargetBaseInfluence",te),S.getUniforms().setValue(b,"morphTargetInfluences",I)}S.getUniforms().setValue(b,"morphTargetsTexture",Y.texture,u),S.getUniforms().setValue(b,"morphTargetsTextureSize",Y.size)}}}class h2{constructor(n,u,p){if(this.renderer=n,this.DEFAULT_NUMVIEWS=2,this.maxNumViews=0,this.gl=p,this.extensions=u,this.available=this.extensions.has("OCULUS_multiview"),this.available){const v=this.extensions.get("OCULUS_multiview");this.maxNumViews=this.gl.getParameter(v.MAX_VIEWS_OVR),this.mat4=[],this.mat3=[],this.cameraArray=[];for(var m=0;m<this.maxNumViews;m++)this.mat4[m]=new Ii,this.mat3[m]=new $i}}getCameraArray(n){return n.isArrayCamera?n.cameras:(this.cameraArray[0]=n,this.cameraArray)}updateCameraProjectionMatricesUniform(n,u){for(var p=this.getCameraArray(n),m=0;m<p.length;m++)this.mat4[m].copy(p[m].projectionMatrix);u.setValue(this.gl,"projectionMatrices",this.mat4)}updateCameraViewMatricesUniform(n,u){for(var p=this.getCameraArray(n),m=0;m<p.length;m++)this.mat4[m].copy(p[m].matrixWorldInverse);u.setValue(this.gl,"viewMatrices",this.mat4)}updateObjectMatricesUniforms(n,u,p){for(var m=this.getCameraArray(u),v=0;v<m.length;v++)this.mat4[v].multiplyMatrices(m[v].matrixWorldInverse,n.matrixWorld),this.mat3[v].getNormalMatrix(this.mat4[v]);p.setValue(this.gl,"modelViewMatrices",this.mat4),p.setValue(this.gl,"normalMatrices",this.mat3)}}function u2(b,n,u,p){let m=new WeakMap;function v(w){const S=w.target;S.removeEventListener("dispose",v),u.remove(S.instanceMatrix),S.instanceColor!==null&&u.remove(S.instanceColor)}return{update:function(w){const S=p.render.frame,I=w.geometry,D=n.get(w,I);if(m.get(D)!==S&&(n.update(D),m.set(D,S)),w.isInstancedMesh&&(w.hasEventListener("dispose",v)===!1&&w.addEventListener("dispose",v),m.get(w)!==S&&(u.update(w.instanceMatrix,b.ARRAY_BUFFER),w.instanceColor!==null&&u.update(w.instanceColor,b.ARRAY_BUFFER),m.set(w,S))),w.isSkinnedMesh){const L=w.skeleton;m.get(L)!==S&&(L.update(),m.set(L,S))}return D},dispose:function(){m=new WeakMap}}}class Yl extends on{constructor(n,u,p,m,v,w,S,I,D,L){if((L=L!==void 0?L:zr)!==zr&&L!==r0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");p===void 0&&L===zr&&(p=Li),p===void 0&&L===r0&&(p=Hr),super(null,m,v,w,S,I,L,p,D),this.isDepthTexture=!0,this.image={width:n,height:u},this.magFilter=S!==void 0?S:pt,this.minFilter=I!==void 0?I:pt,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(n){return super.copy(n),this.compareFunction=n.compareFunction,this}toJSON(n){const u=super.toJSON(n);return this.compareFunction!==null&&(u.compareFunction=this.compareFunction),u}}const oh=new on,ah=new Yl(1,1);ah.compareFunction=_l;const lh=new gn,ch=new L1,hh=new t1,uh=[],dh=[],fh=new Float32Array(16),ph=new Float32Array(9),Ah=new Float32Array(4);function fa(b,n,u){const p=b[0];if(p<=0||p>0)return b;const m=n*u;let v=uh[m];if(v===void 0&&(v=new Float32Array(m),uh[m]=v),n!==0){p.toArray(v,0);for(let w=1,S=0;w!==n;++w)S+=u,b[w].toArray(v,S)}return v}function kn(b,n){if(b.length!==n.length)return!1;for(let u=0,p=b.length;u<p;u++)if(b[u]!==n[u])return!1;return!0}function Nn(b,n){for(let u=0,p=n.length;u<p;u++)b[u]=n[u]}function $1(b,n){let u=dh[n];u===void 0&&(u=new Int32Array(n),dh[n]=u);for(let p=0;p!==n;++p)u[p]=b.allocateTextureUnit();return u}function d2(b,n){const u=this.cache;u[0]!==n&&(b.uniform1f(this.addr,n),u[0]=n)}function f2(b,n){const u=this.cache;if(n.x!==void 0)u[0]===n.x&&u[1]===n.y||(b.uniform2f(this.addr,n.x,n.y),u[0]=n.x,u[1]=n.y);else{if(kn(u,n))return;b.uniform2fv(this.addr,n),Nn(u,n)}}function p2(b,n){const u=this.cache;if(n.x!==void 0)u[0]===n.x&&u[1]===n.y&&u[2]===n.z||(b.uniform3f(this.addr,n.x,n.y,n.z),u[0]=n.x,u[1]=n.y,u[2]=n.z);else if(n.r!==void 0)u[0]===n.r&&u[1]===n.g&&u[2]===n.b||(b.uniform3f(this.addr,n.r,n.g,n.b),u[0]=n.r,u[1]=n.g,u[2]=n.b);else{if(kn(u,n))return;b.uniform3fv(this.addr,n),Nn(u,n)}}function A2(b,n){const u=this.cache;if(n.x!==void 0)u[0]===n.x&&u[1]===n.y&&u[2]===n.z&&u[3]===n.w||(b.uniform4f(this.addr,n.x,n.y,n.z,n.w),u[0]=n.x,u[1]=n.y,u[2]=n.z,u[3]=n.w);else{if(kn(u,n))return;b.uniform4fv(this.addr,n),Nn(u,n)}}function m2(b,n){const u=this.cache,p=n.elements;if(p===void 0){if(kn(u,n))return;b.uniformMatrix2fv(this.addr,!1,n),Nn(u,n)}else{if(kn(u,p))return;Ah.set(p),b.uniformMatrix2fv(this.addr,!1,Ah),Nn(u,p)}}function g2(b,n){const u=this.cache,p=n.elements;if(p===void 0){if(kn(u,n))return;b.uniformMatrix3fv(this.addr,!1,n),Nn(u,n)}else{if(kn(u,p))return;ph.set(p),b.uniformMatrix3fv(this.addr,!1,ph),Nn(u,p)}}function v2(b,n){const u=this.cache,p=n.elements;if(p===void 0){if(kn(u,n))return;b.uniformMatrix4fv(this.addr,!1,n),Nn(u,n)}else{if(kn(u,p))return;fh.set(p),b.uniformMatrix4fv(this.addr,!1,fh),Nn(u,p)}}function E2(b,n){const u=this.cache;u[0]!==n&&(b.uniform1i(this.addr,n),u[0]=n)}function y2(b,n){const u=this.cache;if(n.x!==void 0)u[0]===n.x&&u[1]===n.y||(b.uniform2i(this.addr,n.x,n.y),u[0]=n.x,u[1]=n.y);else{if(kn(u,n))return;b.uniform2iv(this.addr,n),Nn(u,n)}}function w2(b,n){const u=this.cache;if(n.x!==void 0)u[0]===n.x&&u[1]===n.y&&u[2]===n.z||(b.uniform3i(this.addr,n.x,n.y,n.z),u[0]=n.x,u[1]=n.y,u[2]=n.z);else{if(kn(u,n))return;b.uniform3iv(this.addr,n),Nn(u,n)}}function b2(b,n){const u=this.cache;if(n.x!==void 0)u[0]===n.x&&u[1]===n.y&&u[2]===n.z&&u[3]===n.w||(b.uniform4i(this.addr,n.x,n.y,n.z,n.w),u[0]=n.x,u[1]=n.y,u[2]=n.z,u[3]=n.w);else{if(kn(u,n))return;b.uniform4iv(this.addr,n),Nn(u,n)}}function Kl(b,n){const u=this.cache;u[0]!==n&&(b.uniform1ui(this.addr,n),u[0]=n)}function C2(b,n){const u=this.cache;if(n.x!==void 0)u[0]===n.x&&u[1]===n.y||(b.uniform2ui(this.addr,n.x,n.y),u[0]=n.x,u[1]=n.y);else{if(kn(u,n))return;b.uniform2uiv(this.addr,n),Nn(u,n)}}function x2(b,n){const u=this.cache;if(n.x!==void 0)u[0]===n.x&&u[1]===n.y&&u[2]===n.z||(b.uniform3ui(this.addr,n.x,n.y,n.z),u[0]=n.x,u[1]=n.y,u[2]=n.z);else{if(kn(u,n))return;b.uniform3uiv(this.addr,n),Nn(u,n)}}function _2(b,n){const u=this.cache;if(n.x!==void 0)u[0]===n.x&&u[1]===n.y&&u[2]===n.z&&u[3]===n.w||(b.uniform4ui(this.addr,n.x,n.y,n.z,n.w),u[0]=n.x,u[1]=n.y,u[2]=n.z,u[3]=n.w);else{if(kn(u,n))return;b.uniform4uiv(this.addr,n),Nn(u,n)}}function M2(b,n,u){const p=this.cache,m=u.allocateTextureUnit();p[0]!==m&&(b.uniform1i(this.addr,m),p[0]=m);const v=this.type===b.SAMPLER_2D_SHADOW?ah:oh;u.setTexture2D(n||v,m)}function S2(b,n,u){const p=this.cache,m=u.allocateTextureUnit();p[0]!==m&&(b.uniform1i(this.addr,m),p[0]=m),u.setTexture3D(n||ch,m)}function T2(b,n,u){const p=this.cache,m=u.allocateTextureUnit();p[0]!==m&&(b.uniform1i(this.addr,m),p[0]=m),u.setTextureCube(n||hh,m)}function I2(b,n,u){const p=this.cache,m=u.allocateTextureUnit();p[0]!==m&&(b.uniform1i(this.addr,m),p[0]=m),u.setTexture2DArray(n||lh,m)}function R2(b,n){b.uniform1fv(this.addr,n)}function B2(b,n){const u=fa(n,this.size,2);b.uniform2fv(this.addr,u)}function D2(b,n){const u=fa(n,this.size,3);b.uniform3fv(this.addr,u)}function L2(b,n){const u=fa(n,this.size,4);b.uniform4fv(this.addr,u)}function P2(b,n){const u=fa(n,this.size,4);b.uniformMatrix2fv(this.addr,!1,u)}function Ar(b,n){const u=fa(n,this.size,9);b.uniformMatrix3fv(this.addr,!1,u)}function mr(b,n){const u=fa(n,this.size,16);b.uniformMatrix4fv(this.addr,!1,u)}function F2(b,n){b.uniform1iv(this.addr,n)}function j1(b,n){b.uniform2iv(this.addr,n)}function mh(b,n){b.uniform3iv(this.addr,n)}function gh(b,n){b.uniform4iv(this.addr,n)}function O2(b,n){b.uniform1uiv(this.addr,n)}function a1(b,n){b.uniform2uiv(this.addr,n)}function X0(b,n){b.uniform3uiv(this.addr,n)}function vh(b,n){b.uniform4uiv(this.addr,n)}function pa(b,n,u){const p=this.cache,m=n.length,v=$1(u,m);kn(p,v)||(b.uniform1iv(this.addr,v),Nn(p,v));for(let w=0;w!==m;++w)u.setTexture2D(n[w]||oh,v[w])}function k2(b,n,u){const p=this.cache,m=n.length,v=$1(u,m);kn(p,v)||(b.uniform1iv(this.addr,v),Nn(p,v));for(let w=0;w!==m;++w)u.setTexture3D(n[w]||ch,v[w])}function N2(b,n,u){const p=this.cache,m=n.length,v=$1(u,m);kn(p,v)||(b.uniform1iv(this.addr,v),Nn(p,v));for(let w=0;w!==m;++w)u.setTextureCube(n[w]||hh,v[w])}function U2(b,n,u){const p=this.cache,m=n.length,v=$1(u,m);kn(p,v)||(b.uniform1iv(this.addr,v),Nn(p,v));for(let w=0;w!==m;++w)u.setTexture2DArray(n[w]||lh,v[w])}class Eh{constructor(n,u,p){this.id=n,this.addr=p,this.cache=[],this.type=u.type,this.setValue=function(m){switch(m){case 5126:return d2;case 35664:return f2;case 35665:return p2;case 35666:return A2;case 35674:return m2;case 35675:return g2;case 35676:return v2;case 5124:case 35670:return E2;case 35667:case 35671:return y2;case 35668:case 35672:return w2;case 35669:case 35673:return b2;case 5125:return Kl;case 36294:return C2;case 36295:return x2;case 36296:return _2;case 35678:case 36198:case 36298:case 36306:case 35682:return M2;case 35679:case 36299:case 36307:return S2;case 35680:case 36300:case 36308:case 36293:return T2;case 36289:case 36303:case 36311:case 36292:return I2}}(u.type)}}class Jl{constructor(n,u,p){this.id=n,this.addr=p,this.cache=[],this.type=u.type,this.size=u.size,this.setValue=function(m){switch(m){case 5126:return R2;case 35664:return B2;case 35665:return D2;case 35666:return L2;case 35674:return P2;case 35675:return Ar;case 35676:return mr;case 5124:case 35670:return F2;case 35667:case 35671:return j1;case 35668:case 35672:return mh;case 35669:case 35673:return gh;case 5125:return O2;case 36294:return a1;case 36295:return X0;case 36296:return vh;case 35678:case 36198:case 36298:case 36306:case 35682:return pa;case 35679:case 36299:case 36307:return k2;case 35680:case 36300:case 36308:case 36293:return N2;case 36289:case 36303:case 36311:case 36292:return U2}}(u.type)}}class Aa{constructor(n){this.id=n,this.seq=[],this.map={}}setValue(n,u,p){const m=this.seq;for(let v=0,w=m.length;v!==w;++v){const S=m[v];S.setValue(n,u[S.id],p)}}}const Zl=/(\w+)(\])?(\[|\.)?/g;function el(b,n){b.seq.push(n),b.map[n.id]=n}function Q2(b,n,u){const p=b.name,m=p.length;for(Zl.lastIndex=0;;){const v=Zl.exec(p),w=Zl.lastIndex;let S=v[1];const I=v[2]==="]",D=v[3];if(I&&(S|=0),D===void 0||D==="["&&w+2===m){el(u,D===void 0?new Eh(S,b,n):new Jl(S,b,n));break}{let L=u.map[S];L===void 0&&(L=new Aa(S),el(u,L)),u=L}}}class tl{constructor(n,u){this.seq=[],this.map={};const p=n.getProgramParameter(u,n.ACTIVE_UNIFORMS);for(let m=0;m<p;++m){const v=n.getActiveUniform(u,m);Q2(v,n.getUniformLocation(u,v.name),this)}}setValue(n,u,p,m){const v=this.map[u];v!==void 0&&v.setValue(n,p,m)}setOptional(n,u,p){const m=u[p];m!==void 0&&this.setValue(n,p,m)}static upload(n,u,p,m){for(let v=0,w=u.length;v!==w;++v){const S=u[v],I=p[S.id];I.needsUpdate!==!1&&S.setValue(n,I.value,m)}}static seqWithValue(n,u){const p=[];for(let m=0,v=n.length;m!==v;++m){const w=n[m];w.id in u&&p.push(w)}return p}}function yh(b,n,u){const p=b.createShader(n);return b.shaderSource(p,u),b.compileShader(p),p}const H2=37297;let z2=0;function wh(b,n,u){const p=b.getShaderParameter(n,b.COMPILE_STATUS),m=b.getShaderInfoLog(n).trim();if(p&&m==="")return"";const v=/ERROR: 0:(\d+)/.exec(m);if(v){const w=parseInt(v[1]);return u.toUpperCase()+`

`+m+`

`+function(S,I){const D=S.split(`
`),L=[],Y=Math.max(I-6,0),j=Math.min(I+6,D.length);for(let te=Y;te<j;te++){const re=te+1;L.push(`${re===I?">":" "} ${re}: ${D[te]}`)}return L.join(`
`)}(b.getShaderSource(n),w)}return m}function G2(b,n){const u=function(p){const m=Fr.getPrimaries(Fr.workingColorSpace),v=Fr.getPrimaries(p);let w;switch(m===v?w="":m===ka&&v===Oa?w="LinearDisplayP3ToLinearSRGB":m===Oa&&v===ka&&(w="LinearSRGBToLinearDisplayP3"),p){case Cn:case Yo:return[w,"LinearTransferOETF"];case An:case Pa:return[w,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",p),[w,"LinearTransferOETF"]}}(n);return`vec4 ${b}( vec4 value ) { return ${u[0]}( ${u[1]}( value ) ); }`}function V2(b,n){let u;switch(n){case et:u="Linear";break;case dt:u="Reinhard";break;case vt:u="OptimizedCineon";break;case Yt:u="ACESFilmic";break;case cr:u="AgX";break;case qr:u="Neutral";break;case zi:u="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",n),u="Linear"}return"vec3 "+b+"( vec3 color ) { return "+u+"ToneMapping( color ); }"}function l1(b){return b!==""}function bh(b,n){const u=n.numSpotLightShadows+n.numSpotLightMaps-n.numSpotLightShadowsWithMaps;return b.replace(/NUM_DIR_LIGHTS/g,n.numDirLights).replace(/NUM_SPOT_LIGHTS/g,n.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,n.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,u).replace(/NUM_RECT_AREA_LIGHTS/g,n.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,n.numPointLights).replace(/NUM_HEMI_LIGHTS/g,n.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,n.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,n.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,n.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,n.numPointLightShadows)}function Ch(b,n){return b.replace(/NUM_CLIPPING_PLANES/g,n.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,n.numClippingPlanes-n.numClipIntersection)}const W2=/^[ \t]*#include +<([\w\d./]+)>/gm;function $l(b){return b.replace(W2,X2)}const q2=new Map;function X2(b,n){let u=lr[n];if(u===void 0){const p=q2.get(n);if(p===void 0)throw new Error("Can not resolve #include <"+n+">");u=lr[p],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',n,p)}return $l(u)}const xh=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function _h(b){return b.replace(xh,Y2)}function Y2(b,n,u,p){let m="";for(let v=parseInt(n);v<parseInt(u);v++)m+=p.replace(/\[\s*i\s*\]/g,"[ "+v+" ]").replace(/UNROLLED_LOOP_INDEX/g,v);return m}function Mh(b){let n=`precision ${b.precision} float;
	precision ${b.precision} int;
	precision ${b.precision} sampler2D;
	precision ${b.precision} samplerCube;
	precision ${b.precision} sampler3D;
	precision ${b.precision} sampler2DArray;
	precision ${b.precision} sampler2DShadow;
	precision ${b.precision} samplerCubeShadow;
	precision ${b.precision} sampler2DArrayShadow;
	precision ${b.precision} isampler2D;
	precision ${b.precision} isampler3D;
	precision ${b.precision} isamplerCube;
	precision ${b.precision} isampler2DArray;
	precision ${b.precision} usampler2D;
	precision ${b.precision} usampler3D;
	precision ${b.precision} usamplerCube;
	precision ${b.precision} usampler2DArray;
	`;return b.precision==="highp"?n+=`
#define HIGH_PRECISION`:b.precision==="mediump"?n+=`
#define MEDIUM_PRECISION`:b.precision==="lowp"&&(n+=`
#define LOW_PRECISION`),n}function K2(b,n,u,p){const m=b.getContext(),v=u.defines;let w=u.vertexShader,S=u.fragmentShader;const I=function(ht){let ut="SHADOWMAP_TYPE_BASIC";return ht.shadowMapType===$?ut="SHADOWMAP_TYPE_PCF":ht.shadowMapType===k?ut="SHADOWMAP_TYPE_PCF_SOFT":ht.shadowMapType===K&&(ut="SHADOWMAP_TYPE_VSM"),ut}(u),D=function(ht){let ut="ENVMAP_TYPE_CUBE";if(ht.envMap)switch(ht.envMapMode){case rn:case Pn:ut="ENVMAP_TYPE_CUBE";break;case B0:ut="ENVMAP_TYPE_CUBE_UV"}return ut}(u),L=function(ht){let ut="ENVMAP_MODE_REFLECTION";return ht.envMap&&ht.envMapMode===Pn&&(ut="ENVMAP_MODE_REFRACTION"),ut}(u),Y=function(ht){let ut="ENVMAP_BLENDING_NONE";if(ht.envMap)switch(ht.combine){case Oe:ut="ENVMAP_BLENDING_MULTIPLY";break;case fe:ut="ENVMAP_BLENDING_MIX";break;case Ee:ut="ENVMAP_BLENDING_ADD"}return ut}(u),j=function(ht){const ut=ht.envMapCubeUVHeight;if(ut===null)return null;const at=Math.log2(ut)-2,Dt=1/ut;return{texelWidth:1/(3*Math.max(Math.pow(2,at),112)),texelHeight:Dt,maxMip:at}}(u),te=function(ht){return[ht.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",ht.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(l1).join(`
`)}(u),re=function(ht){const ut=[];for(const at in ht){const Dt=ht[at];Dt!==!1&&ut.push("#define "+at+" "+Dt)}return ut.join(`
`)}(v),ce=m.createProgram();let le,de,pe=u.glslVersion?"#version "+u.glslVersion+`
`:"";const me=u.numMultiviewViews;u.isRawShaderMaterial?(le=["#define SHADER_TYPE "+u.shaderType,"#define SHADER_NAME "+u.shaderName,re].filter(l1).join(`
`),le.length>0&&(le+=`
`),de=["#define SHADER_TYPE "+u.shaderType,"#define SHADER_NAME "+u.shaderName,re].filter(l1).join(`
`),de.length>0&&(de+=`
`)):(le=[Mh(u),"#define SHADER_TYPE "+u.shaderType,"#define SHADER_NAME "+u.shaderName,re,u.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",u.batching?"#define USE_BATCHING":"",u.instancing?"#define USE_INSTANCING":"",u.instancingColor?"#define USE_INSTANCING_COLOR":"",u.instancingMorph?"#define USE_INSTANCING_MORPH":"",u.useFog&&u.fog?"#define USE_FOG":"",u.useFog&&u.fogExp2?"#define FOG_EXP2":"",u.map?"#define USE_MAP":"",u.envMap?"#define USE_ENVMAP":"",u.envMap?"#define "+L:"",u.lightMap?"#define USE_LIGHTMAP":"",u.aoMap?"#define USE_AOMAP":"",u.bumpMap?"#define USE_BUMPMAP":"",u.normalMap?"#define USE_NORMALMAP":"",u.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",u.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",u.displacementMap?"#define USE_DISPLACEMENTMAP":"",u.emissiveMap?"#define USE_EMISSIVEMAP":"",u.anisotropy?"#define USE_ANISOTROPY":"",u.anisotropyMap?"#define USE_ANISOTROPYMAP":"",u.clearcoatMap?"#define USE_CLEARCOATMAP":"",u.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",u.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",u.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",u.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",u.specularMap?"#define USE_SPECULARMAP":"",u.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",u.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",u.roughnessMap?"#define USE_ROUGHNESSMAP":"",u.metalnessMap?"#define USE_METALNESSMAP":"",u.alphaMap?"#define USE_ALPHAMAP":"",u.alphaHash?"#define USE_ALPHAHASH":"",u.transmission?"#define USE_TRANSMISSION":"",u.transmissionMap?"#define USE_TRANSMISSIONMAP":"",u.thicknessMap?"#define USE_THICKNESSMAP":"",u.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",u.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",u.mapUv?"#define MAP_UV "+u.mapUv:"",u.alphaMapUv?"#define ALPHAMAP_UV "+u.alphaMapUv:"",u.lightMapUv?"#define LIGHTMAP_UV "+u.lightMapUv:"",u.aoMapUv?"#define AOMAP_UV "+u.aoMapUv:"",u.emissiveMapUv?"#define EMISSIVEMAP_UV "+u.emissiveMapUv:"",u.bumpMapUv?"#define BUMPMAP_UV "+u.bumpMapUv:"",u.normalMapUv?"#define NORMALMAP_UV "+u.normalMapUv:"",u.displacementMapUv?"#define DISPLACEMENTMAP_UV "+u.displacementMapUv:"",u.metalnessMapUv?"#define METALNESSMAP_UV "+u.metalnessMapUv:"",u.roughnessMapUv?"#define ROUGHNESSMAP_UV "+u.roughnessMapUv:"",u.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+u.anisotropyMapUv:"",u.clearcoatMapUv?"#define CLEARCOATMAP_UV "+u.clearcoatMapUv:"",u.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+u.clearcoatNormalMapUv:"",u.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+u.clearcoatRoughnessMapUv:"",u.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+u.iridescenceMapUv:"",u.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+u.iridescenceThicknessMapUv:"",u.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+u.sheenColorMapUv:"",u.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+u.sheenRoughnessMapUv:"",u.specularMapUv?"#define SPECULARMAP_UV "+u.specularMapUv:"",u.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+u.specularColorMapUv:"",u.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+u.specularIntensityMapUv:"",u.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+u.transmissionMapUv:"",u.thicknessMapUv?"#define THICKNESSMAP_UV "+u.thicknessMapUv:"",u.vertexTangents&&u.flatShading===!1?"#define USE_TANGENT":"",u.vertexColors?"#define USE_COLOR":"",u.vertexAlphas?"#define USE_COLOR_ALPHA":"",u.vertexUv1s?"#define USE_UV1":"",u.vertexUv2s?"#define USE_UV2":"",u.vertexUv3s?"#define USE_UV3":"",u.pointsUvs?"#define USE_POINTS_UV":"",u.flatShading?"#define FLAT_SHADED":"",u.skinning?"#define USE_SKINNING":"",u.morphTargets?"#define USE_MORPHTARGETS":"",u.morphNormals&&u.flatShading===!1?"#define USE_MORPHNORMALS":"",u.morphColors?"#define USE_MORPHCOLORS":"",u.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE":"",u.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+u.morphTextureStride:"",u.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+u.morphTargetsCount:"",u.doubleSided?"#define DOUBLE_SIDED":"",u.flipSided?"#define FLIP_SIDED":"",u.shadowMapEnabled?"#define USE_SHADOWMAP":"",u.shadowMapEnabled?"#define "+I:"",u.sizeAttenuation?"#define USE_SIZEATTENUATION":"",u.numLightProbes>0?"#define USE_LIGHT_PROBES":"",u.useLegacyLights?"#define LEGACY_LIGHTS":"",u.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(l1).join(`
`),de=[Mh(u),"#define SHADER_TYPE "+u.shaderType,"#define SHADER_NAME "+u.shaderName,re,u.useFog&&u.fog?"#define USE_FOG":"",u.useFog&&u.fogExp2?"#define FOG_EXP2":"",u.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",u.map?"#define USE_MAP":"",u.matcap?"#define USE_MATCAP":"",u.envMap?"#define USE_ENVMAP":"",u.envMap?"#define "+D:"",u.envMap?"#define "+L:"",u.envMap?"#define "+Y:"",j?"#define CUBEUV_TEXEL_WIDTH "+j.texelWidth:"",j?"#define CUBEUV_TEXEL_HEIGHT "+j.texelHeight:"",j?"#define CUBEUV_MAX_MIP "+j.maxMip+".0":"",u.lightMap?"#define USE_LIGHTMAP":"",u.aoMap?"#define USE_AOMAP":"",u.bumpMap?"#define USE_BUMPMAP":"",u.normalMap?"#define USE_NORMALMAP":"",u.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",u.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",u.emissiveMap?"#define USE_EMISSIVEMAP":"",u.anisotropy?"#define USE_ANISOTROPY":"",u.anisotropyMap?"#define USE_ANISOTROPYMAP":"",u.clearcoat?"#define USE_CLEARCOAT":"",u.clearcoatMap?"#define USE_CLEARCOATMAP":"",u.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",u.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",u.dispersion?"#define USE_DISPERSION":"",u.iridescence?"#define USE_IRIDESCENCE":"",u.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",u.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",u.specularMap?"#define USE_SPECULARMAP":"",u.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",u.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",u.roughnessMap?"#define USE_ROUGHNESSMAP":"",u.metalnessMap?"#define USE_METALNESSMAP":"",u.alphaMap?"#define USE_ALPHAMAP":"",u.alphaTest?"#define USE_ALPHATEST":"",u.alphaHash?"#define USE_ALPHAHASH":"",u.sheen?"#define USE_SHEEN":"",u.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",u.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",u.transmission?"#define USE_TRANSMISSION":"",u.transmissionMap?"#define USE_TRANSMISSIONMAP":"",u.thicknessMap?"#define USE_THICKNESSMAP":"",u.vertexTangents&&u.flatShading===!1?"#define USE_TANGENT":"",u.vertexColors||u.instancingColor?"#define USE_COLOR":"",u.vertexAlphas?"#define USE_COLOR_ALPHA":"",u.vertexUv1s?"#define USE_UV1":"",u.vertexUv2s?"#define USE_UV2":"",u.vertexUv3s?"#define USE_UV3":"",u.pointsUvs?"#define USE_POINTS_UV":"",u.gradientMap?"#define USE_GRADIENTMAP":"",u.flatShading?"#define FLAT_SHADED":"",u.doubleSided?"#define DOUBLE_SIDED":"",u.flipSided?"#define FLIP_SIDED":"",u.shadowMapEnabled?"#define USE_SHADOWMAP":"",u.shadowMapEnabled?"#define "+I:"",u.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",u.numLightProbes>0?"#define USE_LIGHT_PROBES":"",u.useLegacyLights?"#define LEGACY_LIGHTS":"",u.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",u.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",u.toneMapping!==_e?"#define TONE_MAPPING":"",u.toneMapping!==_e?lr.tonemapping_pars_fragment:"",u.toneMapping!==_e?V2("toneMapping",u.toneMapping):"",u.dithering?"#define DITHERING":"",u.opaque?"#define OPAQUE":"",lr.colorspace_pars_fragment,G2("linearToOutputTexel",u.outputColorSpace),u.useDepthPacking?"#define DEPTH_PACKING "+u.depthPacking:"",`
`].filter(l1).join(`
`)),w=$l(w),w=bh(w,u),w=Ch(w,u),S=$l(S),S=bh(S,u),S=Ch(S,u),w=_h(w),S=_h(S),u.isRawShaderMaterial!==!0&&(pe=`#version 300 es
`,le=[te,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+le,de=["#define varying in",u.glslVersion===Ml?"":"layout(location = 0) out highp vec4 pc_fragColor;",u.glslVersion===Ml?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+de,me>0&&(le=["#extension GL_OVR_multiview : require","layout(num_views = "+me+") in;","#define VIEW_ID gl_ViewID_OVR"].join(`
`)+`
`+le,le=le.replace(["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;"].join(`
`),["uniform mat4 modelViewMatrices["+me+"];","uniform mat4 projectionMatrices["+me+"];","uniform mat4 viewMatrices["+me+"];","uniform mat3 normalMatrices["+me+"];","#define modelViewMatrix modelViewMatrices[VIEW_ID]","#define projectionMatrix projectionMatrices[VIEW_ID]","#define viewMatrix viewMatrices[VIEW_ID]","#define normalMatrix normalMatrices[VIEW_ID]"].join(`
`)),de=["#extension GL_OVR_multiview : require","#define VIEW_ID gl_ViewID_OVR"].join(`
`)+`
`+de,de=de.replace("uniform mat4 viewMatrix;",["uniform mat4 viewMatrices["+me+"];","#define viewMatrix viewMatrices[VIEW_ID]"].join(`
`))));const we=pe+le+w,Fe=pe+de+S,Be=yh(m,m.VERTEX_SHADER,we),ke=yh(m,m.FRAGMENT_SHADER,Fe);function ze(ht){if(b.debug.checkShaderErrors){const ut=m.getProgramInfoLog(ce).trim(),at=m.getShaderInfoLog(Be).trim(),Dt=m.getShaderInfoLog(ke).trim();let It=!0,Ot=!0;if(m.getProgramParameter(ce,m.LINK_STATUS)===!1)if(It=!1,typeof b.debug.onShaderError=="function")b.debug.onShaderError(m,ce,Be,ke);else{const Tt=wh(m,Be,"vertex"),Ai=wh(m,ke,"fragment");console.error("THREE.WebGLProgram: Shader Error "+m.getError()+" - VALIDATE_STATUS "+m.getProgramParameter(ce,m.VALIDATE_STATUS)+`

Material Name: `+ht.name+`
Material Type: `+ht.type+`

Program Info Log: `+ut+`
`+Tt+`
`+Ai)}else ut!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ut):at!==""&&Dt!==""||(Ot=!1);Ot&&(ht.diagnostics={runnable:It,programLog:ut,vertexShader:{log:at,prefix:le},fragmentShader:{log:Dt,prefix:de}})}m.deleteShader(Be),m.deleteShader(ke),tt=new tl(m,ce),rt=function(ut,at){const Dt={},It=ut.getProgramParameter(at,ut.ACTIVE_ATTRIBUTES);for(let Ot=0;Ot<It;Ot++){const Tt=ut.getActiveAttrib(at,Ot),Ai=Tt.name;let yi=1;Tt.type===ut.FLOAT_MAT2&&(yi=2),Tt.type===ut.FLOAT_MAT3&&(yi=3),Tt.type===ut.FLOAT_MAT4&&(yi=4),Dt[Ai]={type:Tt.type,location:ut.getAttribLocation(at,Ai),locationSize:yi}}return Dt}(m,ce)}let tt,rt;m.attachShader(ce,Be),m.attachShader(ce,ke),u.index0AttributeName!==void 0?m.bindAttribLocation(ce,0,u.index0AttributeName):u.morphTargets===!0&&m.bindAttribLocation(ce,0,"position"),m.linkProgram(ce),this.getUniforms=function(){return tt===void 0&&ze(this),tt},this.getAttributes=function(){return rt===void 0&&ze(this),rt};let $e=u.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return $e===!1&&($e=m.getProgramParameter(ce,H2)),$e},this.destroy=function(){p.releaseStatesOfProgram(this),m.deleteProgram(ce),this.program=void 0},this.type=u.shaderType,this.name=u.shaderName,this.id=z2++,this.cacheKey=n,this.usedTimes=1,this.program=ce,this.vertexShader=Be,this.fragmentShader=ke,this.numMultiviewViews=me,this}let J2=0;class Z2{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(n){const u=n.vertexShader,p=n.fragmentShader,m=this._getShaderStage(u),v=this._getShaderStage(p),w=this._getShaderCacheForMaterial(n);return w.has(m)===!1&&(w.add(m),m.usedTimes++),w.has(v)===!1&&(w.add(v),v.usedTimes++),this}remove(n){const u=this.materialCache.get(n);for(const p of u)p.usedTimes--,p.usedTimes===0&&this.shaderCache.delete(p.code);return this.materialCache.delete(n),this}getVertexShaderID(n){return this._getShaderStage(n.vertexShader).id}getFragmentShaderID(n){return this._getShaderStage(n.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(n){const u=this.materialCache;let p=u.get(n);return p===void 0&&(p=new Set,u.set(n,p)),p}_getShaderStage(n){const u=this.shaderCache;let p=u.get(n);return p===void 0&&(p=new $2(n),u.set(n,p)),p}}class $2{constructor(n){this.id=J2++,this.code=n,this.usedTimes=0}}function j2(b,n,u,p,m,v,w){const S=new bo,I=new Z2,D=new Set,L=[],Y=m.logarithmicDepthBuffer,j=m.vertexTextures;let te=m.precision;const re={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function ce(le){return D.add(le),le===0?"uv":`uv${le}`}return{getParameters:function(le,de,pe,me,we){const Fe=me.fog,Be=we.geometry,ke=le.isMeshStandardMaterial?me.environment:null,ze=(le.isMeshStandardMaterial?u:n).get(le.envMap||ke),tt=ze&&ze.mapping===B0?ze.image.height:null,rt=re[le.type];le.precision!==null&&(te=m.getMaxPrecision(le.precision),te!==le.precision&&console.warn("THREE.WebGLProgram.getParameters:",le.precision,"not supported, using",te,"instead."));const $e=Be.morphAttributes.position||Be.morphAttributes.normal||Be.morphAttributes.color,ht=$e!==void 0?$e.length:0;let ut,at,Dt,It,Ot=0;if(Be.morphAttributes.position!==void 0&&(Ot=1),Be.morphAttributes.normal!==void 0&&(Ot=2),Be.morphAttributes.color!==void 0&&(Ot=3),rt){const En=q0[rt];ut=En.vertexShader,at=En.fragmentShader}else ut=le.vertexShader,at=le.fragmentShader,I.update(le),Dt=I.getVertexShaderID(le),It=I.getFragmentShaderID(le);const Tt=b.getRenderTarget(),Ai=Tt&&Tt.isWebGLMultiviewRenderTarget?Tt.numViews:0,yi=we.isInstancedMesh===!0,ni=we.isBatchedMesh===!0,ai=!!le.map,hi=!!le.matcap,fi=!!ze,wt=!!le.aoMap,jt=!!le.lightMap,mi=!!le.bumpMap,ei=!!le.normalMap,Pe=!!le.displacementMap,Se=!!le.emissiveMap,xe=!!le.metalnessMap,je=!!le.roughnessMap,Ne=le.anisotropy>0,it=le.clearcoat>0,ct=le.dispersion>0,At=le.iridescence>0,Vt=le.sheen>0,gi=le.transmission>0,oi=Ne&&!!le.anisotropyMap,Ci=it&&!!le.clearcoatMap,Qi=it&&!!le.clearcoatNormalMap,xi=it&&!!le.clearcoatRoughnessMap,Ni=At&&!!le.iridescenceMap,Cr=At&&!!le.iridescenceThicknessMap,sr=Vt&&!!le.sheenColorMap,or=Vt&&!!le.sheenRoughnessMap,xr=!!le.specularMap,Jr=!!le.specularColorMap,Oi=!!le.specularIntensityMap,fn=gi&&!!le.transmissionMap,t0=gi&&!!le.thicknessMap,Ba=!!le.gradientMap,Ui=!!le.alphaMap,Zr=le.alphaTest>0,$r=!!le.alphaHash,Lt=!!le.extensions;let bc=_e;le.toneMapped&&(Tt!==null&&Tt.isXRRenderTarget!==!0||(bc=b.toneMapping));const I1={shaderID:rt,shaderType:le.type,shaderName:le.name,vertexShader:ut,fragmentShader:at,defines:le.defines,customVertexShaderID:Dt,customFragmentShaderID:It,isRawShaderMaterial:le.isRawShaderMaterial===!0,glslVersion:le.glslVersion,precision:te,batching:ni,instancing:yi,instancingColor:yi&&we.instanceColor!==null,instancingMorph:yi&&we.morphTexture!==null,supportsVertexTextures:j,numMultiviewViews:Ai,outputColorSpace:Tt===null?b.outputColorSpace:Tt.isXRRenderTarget===!0?Tt.texture.colorSpace:Cn,alphaToCoverage:!!le.alphaToCoverage,map:ai,matcap:hi,envMap:fi,envMapMode:fi&&ze.mapping,envMapCubeUVHeight:tt,aoMap:wt,lightMap:jt,bumpMap:mi,normalMap:ei,displacementMap:j&&Pe,emissiveMap:Se,normalMapObjectSpace:ei&&le.normalMapType===xc,normalMapTangentSpace:ei&&le.normalMapType===Kr,metalnessMap:xe,roughnessMap:je,anisotropy:Ne,anisotropyMap:oi,clearcoat:it,clearcoatMap:Ci,clearcoatNormalMap:Qi,clearcoatRoughnessMap:xi,dispersion:ct,iridescence:At,iridescenceMap:Ni,iridescenceThicknessMap:Cr,sheen:Vt,sheenColorMap:sr,sheenRoughnessMap:or,specularMap:xr,specularColorMap:Jr,specularIntensityMap:Oi,transmission:gi,transmissionMap:fn,thicknessMap:t0,gradientMap:Ba,opaque:le.transparent===!1&&le.blending===ve&&le.alphaToCoverage===!1,alphaMap:Ui,alphaTest:Zr,alphaHash:$r,combine:le.combine,mapUv:ai&&ce(le.map.channel),aoMapUv:wt&&ce(le.aoMap.channel),lightMapUv:jt&&ce(le.lightMap.channel),bumpMapUv:mi&&ce(le.bumpMap.channel),normalMapUv:ei&&ce(le.normalMap.channel),displacementMapUv:Pe&&ce(le.displacementMap.channel),emissiveMapUv:Se&&ce(le.emissiveMap.channel),metalnessMapUv:xe&&ce(le.metalnessMap.channel),roughnessMapUv:je&&ce(le.roughnessMap.channel),anisotropyMapUv:oi&&ce(le.anisotropyMap.channel),clearcoatMapUv:Ci&&ce(le.clearcoatMap.channel),clearcoatNormalMapUv:Qi&&ce(le.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:xi&&ce(le.clearcoatRoughnessMap.channel),iridescenceMapUv:Ni&&ce(le.iridescenceMap.channel),iridescenceThicknessMapUv:Cr&&ce(le.iridescenceThicknessMap.channel),sheenColorMapUv:sr&&ce(le.sheenColorMap.channel),sheenRoughnessMapUv:or&&ce(le.sheenRoughnessMap.channel),specularMapUv:xr&&ce(le.specularMap.channel),specularColorMapUv:Jr&&ce(le.specularColorMap.channel),specularIntensityMapUv:Oi&&ce(le.specularIntensityMap.channel),transmissionMapUv:fn&&ce(le.transmissionMap.channel),thicknessMapUv:t0&&ce(le.thicknessMap.channel),alphaMapUv:Ui&&ce(le.alphaMap.channel),vertexTangents:!!Be.attributes.tangent&&(ei||Ne),vertexColors:le.vertexColors,vertexAlphas:le.vertexColors===!0&&!!Be.attributes.color&&Be.attributes.color.itemSize===4,pointsUvs:we.isPoints===!0&&!!Be.attributes.uv&&(ai||Ui),fog:!!Fe,useFog:le.fog===!0,fogExp2:!!Fe&&Fe.isFogExp2,flatShading:le.flatShading===!0,sizeAttenuation:le.sizeAttenuation===!0,logarithmicDepthBuffer:Y,skinning:we.isSkinnedMesh===!0,morphTargets:Be.morphAttributes.position!==void 0,morphNormals:Be.morphAttributes.normal!==void 0,morphColors:Be.morphAttributes.color!==void 0,morphTargetsCount:ht,morphTextureStride:Ot,numDirLights:de.directional.length,numPointLights:de.point.length,numSpotLights:de.spot.length,numSpotLightMaps:de.spotLightMap.length,numRectAreaLights:de.rectArea.length,numHemiLights:de.hemi.length,numDirLightShadows:de.directionalShadowMap.length,numPointLightShadows:de.pointShadowMap.length,numSpotLightShadows:de.spotShadowMap.length,numSpotLightShadowsWithMaps:de.numSpotLightShadowsWithMaps,numLightProbes:de.numLightProbes,numClippingPlanes:w.numPlanes,numClipIntersection:w.numIntersection,dithering:le.dithering,shadowMapEnabled:b.shadowMap.enabled&&pe.length>0,shadowMapType:b.shadowMap.type,toneMapping:bc,useLegacyLights:b._useLegacyLights,decodeVideoTexture:ai&&le.map.isVideoTexture===!0&&Fr.getTransfer(le.map.colorSpace)===jr,premultipliedAlpha:le.premultipliedAlpha,doubleSided:le.side===he,flipSided:le.side===ee,useDepthPacking:le.depthPacking>=0,depthPacking:le.depthPacking||0,index0AttributeName:le.index0AttributeName,extensionClipCullDistance:Lt&&le.extensions.clipCullDistance===!0&&p.has("WEBGL_clip_cull_distance"),extensionMultiDraw:Lt&&le.extensions.multiDraw===!0&&p.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:p.has("KHR_parallel_shader_compile"),customProgramCacheKey:le.customProgramCacheKey()};return I1.vertexUv1s=D.has(1),I1.vertexUv2s=D.has(2),I1.vertexUv3s=D.has(3),D.clear(),I1},getProgramCacheKey:function(le){const de=[];if(le.shaderID?de.push(le.shaderID):(de.push(le.customVertexShaderID),de.push(le.customFragmentShaderID)),le.defines!==void 0)for(const pe in le.defines)de.push(pe),de.push(le.defines[pe]);return le.isRawShaderMaterial===!1&&(function(pe,me){pe.push(me.precision),pe.push(me.outputColorSpace),pe.push(me.envMapMode),pe.push(me.envMapCubeUVHeight),pe.push(me.mapUv),pe.push(me.alphaMapUv),pe.push(me.lightMapUv),pe.push(me.aoMapUv),pe.push(me.bumpMapUv),pe.push(me.normalMapUv),pe.push(me.displacementMapUv),pe.push(me.emissiveMapUv),pe.push(me.metalnessMapUv),pe.push(me.roughnessMapUv),pe.push(me.anisotropyMapUv),pe.push(me.clearcoatMapUv),pe.push(me.clearcoatNormalMapUv),pe.push(me.clearcoatRoughnessMapUv),pe.push(me.iridescenceMapUv),pe.push(me.iridescenceThicknessMapUv),pe.push(me.sheenColorMapUv),pe.push(me.sheenRoughnessMapUv),pe.push(me.specularMapUv),pe.push(me.specularColorMapUv),pe.push(me.specularIntensityMapUv),pe.push(me.transmissionMapUv),pe.push(me.thicknessMapUv),pe.push(me.combine),pe.push(me.fogExp2),pe.push(me.sizeAttenuation),pe.push(me.morphTargetsCount),pe.push(me.morphAttributeCount),pe.push(me.numDirLights),pe.push(me.numPointLights),pe.push(me.numSpotLights),pe.push(me.numSpotLightMaps),pe.push(me.numHemiLights),pe.push(me.numRectAreaLights),pe.push(me.numDirLightShadows),pe.push(me.numPointLightShadows),pe.push(me.numSpotLightShadows),pe.push(me.numSpotLightShadowsWithMaps),pe.push(me.numLightProbes),pe.push(me.shadowMapType),pe.push(me.toneMapping),pe.push(me.numClippingPlanes),pe.push(me.numClipIntersection),pe.push(me.depthPacking)}(de,le),function(pe,me){S.disableAll(),me.supportsVertexTextures&&S.enable(0),me.instancing&&S.enable(1),me.instancingColor&&S.enable(2),me.instancingMorph&&S.enable(3),me.matcap&&S.enable(4),me.envMap&&S.enable(5),me.normalMapObjectSpace&&S.enable(6),me.normalMapTangentSpace&&S.enable(7),me.clearcoat&&S.enable(8),me.iridescence&&S.enable(9),me.alphaTest&&S.enable(10),me.vertexColors&&S.enable(11),me.vertexAlphas&&S.enable(12),me.vertexUv1s&&S.enable(13),me.vertexUv2s&&S.enable(14),me.vertexUv3s&&S.enable(15),me.vertexTangents&&S.enable(16),me.anisotropy&&S.enable(17),me.alphaHash&&S.enable(18),me.batching&&S.enable(19),me.dispersion&&S.enable(20),pe.push(S.mask),S.disableAll(),me.fog&&S.enable(0),me.useFog&&S.enable(1),me.flatShading&&S.enable(2),me.logarithmicDepthBuffer&&S.enable(3),me.skinning&&S.enable(4),me.morphTargets&&S.enable(5),me.morphNormals&&S.enable(6),me.morphColors&&S.enable(7),me.premultipliedAlpha&&S.enable(8),me.shadowMapEnabled&&S.enable(9),me.useLegacyLights&&S.enable(10),me.doubleSided&&S.enable(11),me.flipSided&&S.enable(12),me.useDepthPacking&&S.enable(13),me.dithering&&S.enable(14),me.transmission&&S.enable(15),me.sheen&&S.enable(16),me.opaque&&S.enable(17),me.pointsUvs&&S.enable(18),me.decodeVideoTexture&&S.enable(19),me.alphaToCoverage&&S.enable(20),me.numMultiviewViews&&S.enable(21),pe.push(S.mask)}(de,le),de.push(b.outputColorSpace)),de.push(le.customProgramCacheKey),de.join()},getUniforms:function(le){const de=re[le.type];let pe;if(de){const me=q0[de];pe=ft.clone(me.uniforms)}else pe=le.uniforms;return pe},acquireProgram:function(le,de){let pe;for(let me=0,we=L.length;me<we;me++){const Fe=L[me];if(Fe.cacheKey===de){pe=Fe,++pe.usedTimes;break}}return pe===void 0&&(pe=new K2(b,de,le,v),L.push(pe)),pe},releaseProgram:function(le){if(--le.usedTimes==0){const de=L.indexOf(le);L[de]=L[L.length-1],L.pop(),le.destroy()}},releaseShaderCache:function(le){I.remove(le)},programs:L,dispose:function(){I.dispose()}}}function ed(){let b=new WeakMap;return{get:function(n){let u=b.get(n);return u===void 0&&(u={},b.set(n,u)),u},remove:function(n){b.delete(n)},update:function(n,u,p){b.get(n)[u]=p},dispose:function(){b=new WeakMap}}}function td(b,n){return b.groupOrder!==n.groupOrder?b.groupOrder-n.groupOrder:b.renderOrder!==n.renderOrder?b.renderOrder-n.renderOrder:b.material.id!==n.material.id?b.material.id-n.material.id:b.z!==n.z?b.z-n.z:b.id-n.id}function Sh(b,n){return b.groupOrder!==n.groupOrder?b.groupOrder-n.groupOrder:b.renderOrder!==n.renderOrder?b.renderOrder-n.renderOrder:b.z!==n.z?n.z-b.z:b.id-n.id}function Th(){const b=[];let n=0;const u=[],p=[],m=[];function v(w,S,I,D,L,Y){let j=b[n];return j===void 0?(j={id:w.id,object:w,geometry:S,material:I,groupOrder:D,renderOrder:w.renderOrder,z:L,group:Y},b[n]=j):(j.id=w.id,j.object=w,j.geometry=S,j.material=I,j.groupOrder=D,j.renderOrder=w.renderOrder,j.z=L,j.group=Y),n++,j}return{opaque:u,transmissive:p,transparent:m,init:function(){n=0,u.length=0,p.length=0,m.length=0},push:function(w,S,I,D,L,Y){const j=v(w,S,I,D,L,Y);I.transmission>0?p.push(j):I.transparent===!0?m.push(j):u.push(j)},unshift:function(w,S,I,D,L,Y){const j=v(w,S,I,D,L,Y);I.transmission>0?p.unshift(j):I.transparent===!0?m.unshift(j):u.unshift(j)},finish:function(){for(let w=n,S=b.length;w<S;w++){const I=b[w];if(I.id===null)break;I.id=null,I.object=null,I.geometry=null,I.material=null,I.group=null}},sort:function(w,S){u.length>1&&u.sort(w||td),p.length>1&&p.sort(S||Sh),m.length>1&&m.sort(S||Sh)}}}function id(){let b=new WeakMap;return{get:function(n,u){const p=b.get(n);let m;return p===void 0?(m=new Th,b.set(n,[m])):u>=p.length?(m=new Th,p.push(m)):m=p[u],m},dispose:function(){b=new WeakMap}}}function rd(){const b={};return{get:function(n){if(b[n.id]!==void 0)return b[n.id];let u;switch(n.type){case"DirectionalLight":u={direction:new Le,color:new Jt};break;case"SpotLight":u={position:new Le,direction:new Le,color:new Jt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":u={position:new Le,color:new Jt,distance:0,decay:0};break;case"HemisphereLight":u={direction:new Le,skyColor:new Jt,groundColor:new Jt};break;case"RectAreaLight":u={color:new Jt,position:new Le,halfWidth:new Le,halfHeight:new Le}}return b[n.id]=u,u}}}let nd=0;function sd(b,n){return(n.castShadow?2:0)-(b.castShadow?2:0)+(n.map?1:0)-(b.map?1:0)}function od(b){const n=new rd,u=function(){const S={};return{get:function(I){if(S[I.id]!==void 0)return S[I.id];let D;switch(I.type){case"DirectionalLight":case"SpotLight":D={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new zt};break;case"PointLight":D={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new zt,shadowCameraNear:1,shadowCameraFar:1e3}}return S[I.id]=D,D}}}(),p={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let S=0;S<9;S++)p.probe.push(new Le);const m=new Le,v=new Ii,w=new Ii;return{setup:function(S,I){let D=0,L=0,Y=0;for(let tt=0;tt<9;tt++)p.probe[tt].set(0,0,0);let j=0,te=0,re=0,ce=0,le=0,de=0,pe=0,me=0,we=0,Fe=0,Be=0;S.sort(sd);const ke=I===!0?Math.PI:1;for(let tt=0,rt=S.length;tt<rt;tt++){const $e=S[tt],ht=$e.color,ut=$e.intensity,at=$e.distance,Dt=$e.shadow&&$e.shadow.map?$e.shadow.map.texture:null;if($e.isAmbientLight)D+=ht.r*ut*ke,L+=ht.g*ut*ke,Y+=ht.b*ut*ke;else if($e.isLightProbe){for(let It=0;It<9;It++)p.probe[It].addScaledVector($e.sh.coefficients[It],ut);Be++}else if($e.isDirectionalLight){const It=n.get($e);if(It.color.copy($e.color).multiplyScalar($e.intensity*ke),$e.castShadow){const Ot=$e.shadow,Tt=u.get($e);Tt.shadowBias=Ot.bias,Tt.shadowNormalBias=Ot.normalBias,Tt.shadowRadius=Ot.radius,Tt.shadowMapSize=Ot.mapSize,p.directionalShadow[j]=Tt,p.directionalShadowMap[j]=Dt,p.directionalShadowMatrix[j]=$e.shadow.matrix,de++}p.directional[j]=It,j++}else if($e.isSpotLight){const It=n.get($e);It.position.setFromMatrixPosition($e.matrixWorld),It.color.copy(ht).multiplyScalar(ut*ke),It.distance=at,It.coneCos=Math.cos($e.angle),It.penumbraCos=Math.cos($e.angle*(1-$e.penumbra)),It.decay=$e.decay,p.spot[re]=It;const Ot=$e.shadow;if($e.map&&(p.spotLightMap[we]=$e.map,we++,Ot.updateMatrices($e),$e.castShadow&&Fe++),p.spotLightMatrix[re]=Ot.matrix,$e.castShadow){const Tt=u.get($e);Tt.shadowBias=Ot.bias,Tt.shadowNormalBias=Ot.normalBias,Tt.shadowRadius=Ot.radius,Tt.shadowMapSize=Ot.mapSize,p.spotShadow[re]=Tt,p.spotShadowMap[re]=Dt,me++}re++}else if($e.isRectAreaLight){const It=n.get($e);It.color.copy(ht).multiplyScalar(ut),It.halfWidth.set(.5*$e.width,0,0),It.halfHeight.set(0,.5*$e.height,0),p.rectArea[ce]=It,ce++}else if($e.isPointLight){const It=n.get($e);if(It.color.copy($e.color).multiplyScalar($e.intensity*ke),It.distance=$e.distance,It.decay=$e.decay,$e.castShadow){const Ot=$e.shadow,Tt=u.get($e);Tt.shadowBias=Ot.bias,Tt.shadowNormalBias=Ot.normalBias,Tt.shadowRadius=Ot.radius,Tt.shadowMapSize=Ot.mapSize,Tt.shadowCameraNear=Ot.camera.near,Tt.shadowCameraFar=Ot.camera.far,p.pointShadow[te]=Tt,p.pointShadowMap[te]=Dt,p.pointShadowMatrix[te]=$e.shadow.matrix,pe++}p.point[te]=It,te++}else if($e.isHemisphereLight){const It=n.get($e);It.skyColor.copy($e.color).multiplyScalar(ut*ke),It.groundColor.copy($e.groundColor).multiplyScalar(ut*ke),p.hemi[le]=It,le++}}ce>0&&(b.has("OES_texture_float_linear")===!0?(p.rectAreaLTC1=ci.LTC_FLOAT_1,p.rectAreaLTC2=ci.LTC_FLOAT_2):(p.rectAreaLTC1=ci.LTC_HALF_1,p.rectAreaLTC2=ci.LTC_HALF_2)),p.ambient[0]=D,p.ambient[1]=L,p.ambient[2]=Y;const ze=p.hash;ze.directionalLength===j&&ze.pointLength===te&&ze.spotLength===re&&ze.rectAreaLength===ce&&ze.hemiLength===le&&ze.numDirectionalShadows===de&&ze.numPointShadows===pe&&ze.numSpotShadows===me&&ze.numSpotMaps===we&&ze.numLightProbes===Be||(p.directional.length=j,p.spot.length=re,p.rectArea.length=ce,p.point.length=te,p.hemi.length=le,p.directionalShadow.length=de,p.directionalShadowMap.length=de,p.pointShadow.length=pe,p.pointShadowMap.length=pe,p.spotShadow.length=me,p.spotShadowMap.length=me,p.directionalShadowMatrix.length=de,p.pointShadowMatrix.length=pe,p.spotLightMatrix.length=me+we-Fe,p.spotLightMap.length=we,p.numSpotLightShadowsWithMaps=Fe,p.numLightProbes=Be,ze.directionalLength=j,ze.pointLength=te,ze.spotLength=re,ze.rectAreaLength=ce,ze.hemiLength=le,ze.numDirectionalShadows=de,ze.numPointShadows=pe,ze.numSpotShadows=me,ze.numSpotMaps=we,ze.numLightProbes=Be,p.version=nd++)},setupView:function(S,I){let D=0,L=0,Y=0,j=0,te=0;const re=I.matrixWorldInverse;for(let ce=0,le=S.length;ce<le;ce++){const de=S[ce];if(de.isDirectionalLight){const pe=p.directional[D];pe.direction.setFromMatrixPosition(de.matrixWorld),m.setFromMatrixPosition(de.target.matrixWorld),pe.direction.sub(m),pe.direction.transformDirection(re),D++}else if(de.isSpotLight){const pe=p.spot[Y];pe.position.setFromMatrixPosition(de.matrixWorld),pe.position.applyMatrix4(re),pe.direction.setFromMatrixPosition(de.matrixWorld),m.setFromMatrixPosition(de.target.matrixWorld),pe.direction.sub(m),pe.direction.transformDirection(re),Y++}else if(de.isRectAreaLight){const pe=p.rectArea[j];pe.position.setFromMatrixPosition(de.matrixWorld),pe.position.applyMatrix4(re),w.identity(),v.copy(de.matrixWorld),v.premultiply(re),w.extractRotation(v),pe.halfWidth.set(.5*de.width,0,0),pe.halfHeight.set(0,.5*de.height,0),pe.halfWidth.applyMatrix4(w),pe.halfHeight.applyMatrix4(w),j++}else if(de.isPointLight){const pe=p.point[L];pe.position.setFromMatrixPosition(de.matrixWorld),pe.position.applyMatrix4(re),L++}else if(de.isHemisphereLight){const pe=p.hemi[te];pe.direction.setFromMatrixPosition(de.matrixWorld),pe.direction.transformDirection(re),te++}}},state:p}}function Ih(b){const n=new od(b),u=[],p=[],m={lightsArray:u,shadowsArray:p,camera:null,lights:n,transmissionRenderTarget:{}};return{init:function(v){m.camera=v,u.length=0,p.length=0},state:m,setupLights:function(v){n.setup(u,v)},setupLightsView:function(v){n.setupView(u,v)},pushLight:function(v){u.push(v)},pushShadow:function(v){p.push(v)}}}function ad(b){let n=new WeakMap;return{get:function(u,p=0){const m=n.get(u);let v;return m===void 0?(v=new Ih(b),n.set(u,[v])):p>=m.length?(v=new Ih(b),m.push(v)):v=m[p],v},dispose:function(){n=new WeakMap}}}class jl extends en{constructor(n){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Ys,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(n)}copy(n){return super.copy(n),this.depthPacking=n.depthPacking,this.map=n.map,this.alphaMap=n.alphaMap,this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this}}class ec extends en{constructor(n){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(n)}copy(n){return super.copy(n),this.map=n.map,this.alphaMap=n.alphaMap,this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this}}function ld(b,n,u){let p=new r1;const m=new zt,v=new zt,w=new Rr,S=new jl({depthPacking:Ks}),I=new ec,D={},L=u.maxTextureSize,Y={[Z]:ee,[ee]:Z,[he]:he},j=new Q0({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new zt},radius:{value:4}},vertexShader:`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragmentShader:`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`}),te=j.clone();te.defines.HORIZONTAL_PASS=1;const re=new Xi;re.setAttribute("position",new nr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const ce=new cn(re,j),le=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=$;let de=this.type;function pe(Be,ke){const ze=n.update(ce);j.defines.VSM_SAMPLES!==Be.blurSamples&&(j.defines.VSM_SAMPLES=Be.blurSamples,te.defines.VSM_SAMPLES=Be.blurSamples,j.needsUpdate=!0,te.needsUpdate=!0),Be.mapPass===null&&(Be.mapPass=new Wn(m.x,m.y)),j.uniforms.shadow_pass.value=Be.map.texture,j.uniforms.resolution.value=Be.mapSize,j.uniforms.radius.value=Be.radius,b.setRenderTarget(Be.mapPass),b.clear(),b.renderBufferDirect(ke,null,ze,j,ce,null),te.uniforms.shadow_pass.value=Be.mapPass.texture,te.uniforms.resolution.value=Be.mapSize,te.uniforms.radius.value=Be.radius,b.setRenderTarget(Be.map),b.clear(),b.renderBufferDirect(ke,null,ze,te,ce,null)}function me(Be,ke,ze,tt){let rt=null;const $e=ze.isPointLight===!0?Be.customDistanceMaterial:Be.customDepthMaterial;if($e!==void 0)rt=$e;else if(rt=ze.isPointLight===!0?I:S,b.localClippingEnabled&&ke.clipShadows===!0&&Array.isArray(ke.clippingPlanes)&&ke.clippingPlanes.length!==0||ke.displacementMap&&ke.displacementScale!==0||ke.alphaMap&&ke.alphaTest>0||ke.map&&ke.alphaTest>0){const ht=rt.uuid,ut=ke.uuid;let at=D[ht];at===void 0&&(at={},D[ht]=at);let Dt=at[ut];Dt===void 0&&(Dt=rt.clone(),at[ut]=Dt,ke.addEventListener("dispose",Fe)),rt=Dt}return rt.visible=ke.visible,rt.wireframe=ke.wireframe,rt.side=tt===K?ke.shadowSide!==null?ke.shadowSide:ke.side:ke.shadowSide!==null?ke.shadowSide:Y[ke.side],rt.alphaMap=ke.alphaMap,rt.alphaTest=ke.alphaTest,rt.map=ke.map,rt.clipShadows=ke.clipShadows,rt.clippingPlanes=ke.clippingPlanes,rt.clipIntersection=ke.clipIntersection,rt.displacementMap=ke.displacementMap,rt.displacementScale=ke.displacementScale,rt.displacementBias=ke.displacementBias,rt.wireframeLinewidth=ke.wireframeLinewidth,rt.linewidth=ke.linewidth,ze.isPointLight===!0&&rt.isMeshDistanceMaterial===!0&&(b.properties.get(rt).light=ze),rt}function we(Be,ke,ze,tt,rt){if(Be.visible===!1)return;if(Be.layers.test(ke.layers)&&(Be.isMesh||Be.isLine||Be.isPoints)&&(Be.castShadow||Be.receiveShadow&&rt===K)&&(!Be.frustumCulled||p.intersectsObject(Be))){Be.modelViewMatrix.multiplyMatrices(ze.matrixWorldInverse,Be.matrixWorld);const ht=n.update(Be),ut=Be.material;if(Array.isArray(ut)){const at=ht.groups;for(let Dt=0,It=at.length;Dt<It;Dt++){const Ot=at[Dt],Tt=ut[Ot.materialIndex];if(Tt&&Tt.visible){const Ai=me(Be,Tt,tt,rt);Be.onBeforeShadow(b,Be,ke,ze,ht,Ai,Ot),b.renderBufferDirect(ze,null,ht,Ai,Be,Ot),Be.onAfterShadow(b,Be,ke,ze,ht,Ai,Ot)}}}else if(ut.visible){const at=me(Be,ut,tt,rt);Be.onBeforeShadow(b,Be,ke,ze,ht,at,null),b.renderBufferDirect(ze,null,ht,at,Be,null),Be.onAfterShadow(b,Be,ke,ze,ht,at,null)}}const $e=Be.children;for(let ht=0,ut=$e.length;ht<ut;ht++)we($e[ht],ke,ze,tt,rt)}function Fe(Be){Be.target.removeEventListener("dispose",Fe);for(const ke in D){const ze=D[ke],tt=Be.target.uuid;tt in ze&&(ze[tt].dispose(),delete ze[tt])}}this.render=function(Be,ke,ze){if(le.enabled===!1||le.autoUpdate===!1&&le.needsUpdate===!1||Be.length===0)return;const tt=b.getRenderTarget(),rt=b.getActiveCubeFace(),$e=b.getActiveMipmapLevel(),ht=b.state;ht.setBlending(ue),ht.buffers.color.setClear(1,1,1,1),ht.buffers.depth.setTest(!0),ht.setScissorTest(!1);const ut=de!==K&&this.type===K,at=de===K&&this.type!==K;for(let Dt=0,It=Be.length;Dt<It;Dt++){const Ot=Be[Dt],Tt=Ot.shadow;if(Tt===void 0){console.warn("THREE.WebGLShadowMap:",Ot,"has no shadow.");continue}if(Tt.autoUpdate===!1&&Tt.needsUpdate===!1)continue;m.copy(Tt.mapSize);const Ai=Tt.getFrameExtents();if(m.multiply(Ai),v.copy(Tt.mapSize),(m.x>L||m.y>L)&&(m.x>L&&(v.x=Math.floor(L/Ai.x),m.x=v.x*Ai.x,Tt.mapSize.x=v.x),m.y>L&&(v.y=Math.floor(L/Ai.y),m.y=v.y*Ai.y,Tt.mapSize.y=v.y)),Tt.map===null||ut===!0||at===!0){const ni=this.type!==K?{minFilter:pt,magFilter:pt}:{};Tt.map!==null&&Tt.map.dispose(),Tt.map=new Wn(m.x,m.y,ni),Tt.map.texture.name=Ot.name+".shadowMap",Tt.camera.updateProjectionMatrix()}b.setRenderTarget(Tt.map),b.clear();const yi=Tt.getViewportCount();for(let ni=0;ni<yi;ni++){const ai=Tt.getViewport(ni);w.set(v.x*ai.x,v.y*ai.y,v.x*ai.z,v.y*ai.w),ht.viewport(w),Tt.updateMatrices(Ot,ni),p=Tt.getFrustum(),we(ke,ze,Tt.camera,Ot,this.type)}Tt.isPointLightShadow!==!0&&this.type===K&&pe(Tt,ze),Tt.needsUpdate=!1}de=this.type,le.needsUpdate=!1,b.setRenderTarget(tt,rt,$e)}}function cd(b){const n=new function(){let xe=!1;const je=new Rr;let Ne=null;const it=new Rr(0,0,0,0);return{setMask:function(ct){Ne===ct||xe||(b.colorMask(ct,ct,ct,ct),Ne=ct)},setLocked:function(ct){xe=ct},setClear:function(ct,At,Vt,gi,oi){oi===!0&&(ct*=gi,At*=gi,Vt*=gi),je.set(ct,At,Vt,gi),it.equals(je)===!1&&(b.clearColor(ct,At,Vt,gi),it.copy(je))},reset:function(){xe=!1,Ne=null,it.set(-1,0,0,0)}}},u=new function(){let xe=!1,je=null,Ne=null,it=null;return{setTest:function(ct){ct?hi(b.DEPTH_TEST):fi(b.DEPTH_TEST)},setMask:function(ct){je===ct||xe||(b.depthMask(ct),je=ct)},setFunc:function(ct){if(Ne!==ct){switch(ct){case os:b.depthFunc(b.NEVER);break;case J0:b.depthFunc(b.ALWAYS);break;case as:b.depthFunc(b.LESS);break;case R0:b.depthFunc(b.LEQUAL);break;case Hn:b.depthFunc(b.EQUAL);break;case Z0:b.depthFunc(b.GEQUAL);break;case ls:b.depthFunc(b.GREATER);break;case tn:b.depthFunc(b.NOTEQUAL);break;default:b.depthFunc(b.LEQUAL)}Ne=ct}},setLocked:function(ct){xe=ct},setClear:function(ct){it!==ct&&(b.clearDepth(ct),it=ct)},reset:function(){xe=!1,je=null,Ne=null,it=null}}},p=new function(){let xe=!1,je=null,Ne=null,it=null,ct=null,At=null,Vt=null,gi=null,oi=null;return{setTest:function(Ci){xe||(Ci?hi(b.STENCIL_TEST):fi(b.STENCIL_TEST))},setMask:function(Ci){je===Ci||xe||(b.stencilMask(Ci),je=Ci)},setFunc:function(Ci,Qi,xi){Ne===Ci&&it===Qi&&ct===xi||(b.stencilFunc(Ci,Qi,xi),Ne=Ci,it=Qi,ct=xi)},setOp:function(Ci,Qi,xi){At===Ci&&Vt===Qi&&gi===xi||(b.stencilOp(Ci,Qi,xi),At=Ci,Vt=Qi,gi=xi)},setLocked:function(Ci){xe=Ci},setClear:function(Ci){oi!==Ci&&(b.clearStencil(Ci),oi=Ci)},reset:function(){xe=!1,je=null,Ne=null,it=null,ct=null,At=null,Vt=null,gi=null,oi=null}}},m=new WeakMap,v=new WeakMap;let w={},S={},I=new WeakMap,D=[],L=null,Y=!1,j=null,te=null,re=null,ce=null,le=null,de=null,pe=null,me=new Jt(0,0,0),we=0,Fe=!1,Be=null,ke=null,ze=null,tt=null,rt=null;const $e=b.getParameter(b.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ht=!1,ut=0;const at=b.getParameter(b.VERSION);at.indexOf("WebGL")!==-1?(ut=parseFloat(/^WebGL (\d)/.exec(at)[1]),ht=ut>=1):at.indexOf("OpenGL ES")!==-1&&(ut=parseFloat(/^OpenGL ES (\d)/.exec(at)[1]),ht=ut>=2);let Dt=null,It={};const Ot=b.getParameter(b.SCISSOR_BOX),Tt=b.getParameter(b.VIEWPORT),Ai=new Rr().fromArray(Ot),yi=new Rr().fromArray(Tt);function ni(xe,je,Ne,it){const ct=new Uint8Array(4),At=b.createTexture();b.bindTexture(xe,At),b.texParameteri(xe,b.TEXTURE_MIN_FILTER,b.NEAREST),b.texParameteri(xe,b.TEXTURE_MAG_FILTER,b.NEAREST);for(let Vt=0;Vt<Ne;Vt++)xe===b.TEXTURE_3D||xe===b.TEXTURE_2D_ARRAY?b.texImage3D(je,0,b.RGBA,1,1,it,0,b.RGBA,b.UNSIGNED_BYTE,ct):b.texImage2D(je+Vt,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,ct);return At}const ai={};function hi(xe){w[xe]!==!0&&(b.enable(xe),w[xe]=!0)}function fi(xe){w[xe]!==!1&&(b.disable(xe),w[xe]=!1)}ai[b.TEXTURE_2D]=ni(b.TEXTURE_2D,b.TEXTURE_2D,1),ai[b.TEXTURE_CUBE_MAP]=ni(b.TEXTURE_CUBE_MAP,b.TEXTURE_CUBE_MAP_POSITIVE_X,6),ai[b.TEXTURE_2D_ARRAY]=ni(b.TEXTURE_2D_ARRAY,b.TEXTURE_2D_ARRAY,1,1),ai[b.TEXTURE_3D]=ni(b.TEXTURE_3D,b.TEXTURE_3D,1,1),n.setClear(0,0,0,1),u.setClear(1),p.setClear(0),hi(b.DEPTH_TEST),u.setFunc(R0),ei(!1),Pe(V),hi(b.CULL_FACE),mi(ue);const wt={[Ce]:b.FUNC_ADD,[Re]:b.FUNC_SUBTRACT,[Qe]:b.FUNC_REVERSE_SUBTRACT};wt[ot]=b.MIN,wt[Je]=b.MAX;const jt={[Mt]:b.ZERO,[Zt]:b.ONE,[kt]:b.SRC_COLOR,[_i]:b.SRC_ALPHA,[Ur]:b.SRC_ALPHA_SATURATE,[p0]:b.DST_COLOR,[er]:b.DST_ALPHA,[si]:b.ONE_MINUS_SRC_COLOR,[Ri]:b.ONE_MINUS_SRC_ALPHA,[ln]:b.ONE_MINUS_DST_COLOR,[Ki]:b.ONE_MINUS_DST_ALPHA,[tr]:b.CONSTANT_COLOR,[K0]:b.ONE_MINUS_CONSTANT_COLOR,[I0]:b.CONSTANT_ALPHA,[A0]:b.ONE_MINUS_CONSTANT_ALPHA};function mi(xe,je,Ne,it,ct,At,Vt,gi,oi,Ci){if(xe!==ue){if(Y===!1&&(hi(b.BLEND),Y=!0),xe===De)ct=ct||je,At=At||Ne,Vt=Vt||it,je===te&&ct===le||(b.blendEquationSeparate(wt[je],wt[ct]),te=je,le=ct),Ne===re&&it===ce&&At===de&&Vt===pe||(b.blendFuncSeparate(jt[Ne],jt[it],jt[At],jt[Vt]),re=Ne,ce=it,de=At,pe=Vt),gi.equals(me)!==!1&&oi===we||(b.blendColor(gi.r,gi.g,gi.b,oi),me.copy(gi),we=oi),j=xe,Fe=!1;else if(xe!==j||Ci!==Fe){if(te===Ce&&le===Ce||(b.blendEquation(b.FUNC_ADD),te=Ce,le=Ce),Ci)switch(xe){case ve:b.blendFuncSeparate(b.ONE,b.ONE_MINUS_SRC_ALPHA,b.ONE,b.ONE_MINUS_SRC_ALPHA);break;case be:b.blendFunc(b.ONE,b.ONE);break;case Te:b.blendFuncSeparate(b.ZERO,b.ONE_MINUS_SRC_COLOR,b.ZERO,b.ONE);break;case ye:b.blendFuncSeparate(b.ZERO,b.SRC_COLOR,b.ZERO,b.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",xe)}else switch(xe){case ve:b.blendFuncSeparate(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA,b.ONE,b.ONE_MINUS_SRC_ALPHA);break;case be:b.blendFunc(b.SRC_ALPHA,b.ONE);break;case Te:b.blendFuncSeparate(b.ZERO,b.ONE_MINUS_SRC_COLOR,b.ZERO,b.ONE);break;case ye:b.blendFunc(b.ZERO,b.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",xe)}re=null,ce=null,de=null,pe=null,me.set(0,0,0),we=0,j=xe,Fe=Ci}}else Y===!0&&(fi(b.BLEND),Y=!1)}function ei(xe){Be!==xe&&(xe?b.frontFace(b.CW):b.frontFace(b.CCW),Be=xe)}function Pe(xe){xe!==C?(hi(b.CULL_FACE),xe!==ke&&(xe===V?b.cullFace(b.BACK):xe===z?b.cullFace(b.FRONT):b.cullFace(b.FRONT_AND_BACK))):fi(b.CULL_FACE),ke=xe}function Se(xe,je,Ne){xe?(hi(b.POLYGON_OFFSET_FILL),tt===je&&rt===Ne||(b.polygonOffset(je,Ne),tt=je,rt=Ne)):fi(b.POLYGON_OFFSET_FILL)}return{buffers:{color:n,depth:u,stencil:p},enable:hi,disable:fi,bindFramebuffer:function(xe,je){return S[xe]!==je&&(b.bindFramebuffer(xe,je),S[xe]=je,xe===b.DRAW_FRAMEBUFFER&&(S[b.FRAMEBUFFER]=je),xe===b.FRAMEBUFFER&&(S[b.DRAW_FRAMEBUFFER]=je),!0)},drawBuffers:function(xe,je){let Ne=D,it=!1;if(xe){Ne=I.get(je),Ne===void 0&&(Ne=[],I.set(je,Ne));const ct=xe.textures;if(Ne.length!==ct.length||Ne[0]!==b.COLOR_ATTACHMENT0){for(let At=0,Vt=ct.length;At<Vt;At++)Ne[At]=b.COLOR_ATTACHMENT0+At;Ne.length=ct.length,it=!0}}else Ne[0]!==b.BACK&&(Ne[0]=b.BACK,it=!0);it&&b.drawBuffers(Ne)},useProgram:function(xe){return L!==xe&&(b.useProgram(xe),L=xe,!0)},setBlending:mi,setMaterial:function(xe,je){xe.side===he?fi(b.CULL_FACE):hi(b.CULL_FACE);let Ne=xe.side===ee;je&&(Ne=!Ne),ei(Ne),xe.blending===ve&&xe.transparent===!1?mi(ue):mi(xe.blending,xe.blendEquation,xe.blendSrc,xe.blendDst,xe.blendEquationAlpha,xe.blendSrcAlpha,xe.blendDstAlpha,xe.blendColor,xe.blendAlpha,xe.premultipliedAlpha),u.setFunc(xe.depthFunc),u.setTest(xe.depthTest),u.setMask(xe.depthWrite),n.setMask(xe.colorWrite);const it=xe.stencilWrite;p.setTest(it),it&&(p.setMask(xe.stencilWriteMask),p.setFunc(xe.stencilFunc,xe.stencilRef,xe.stencilFuncMask),p.setOp(xe.stencilFail,xe.stencilZFail,xe.stencilZPass)),Se(xe.polygonOffset,xe.polygonOffsetFactor,xe.polygonOffsetUnits),xe.alphaToCoverage===!0?hi(b.SAMPLE_ALPHA_TO_COVERAGE):fi(b.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:ei,setCullFace:Pe,setLineWidth:function(xe){xe!==ze&&(ht&&b.lineWidth(xe),ze=xe)},setPolygonOffset:Se,setScissorTest:function(xe){xe?hi(b.SCISSOR_TEST):fi(b.SCISSOR_TEST)},activeTexture:function(xe){xe===void 0&&(xe=b.TEXTURE0+$e-1),Dt!==xe&&(b.activeTexture(xe),Dt=xe)},bindTexture:function(xe,je,Ne){Ne===void 0&&(Ne=Dt===null?b.TEXTURE0+$e-1:Dt);let it=It[Ne];it===void 0&&(it={type:void 0,texture:void 0},It[Ne]=it),it.type===xe&&it.texture===je||(Dt!==Ne&&(b.activeTexture(Ne),Dt=Ne),b.bindTexture(xe,je||ai[xe]),it.type=xe,it.texture=je)},unbindTexture:function(){const xe=It[Dt];xe!==void 0&&xe.type!==void 0&&(b.bindTexture(xe.type,null),xe.type=void 0,xe.texture=void 0)},compressedTexImage2D:function(){try{b.compressedTexImage2D.apply(b,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}},compressedTexImage3D:function(){try{b.compressedTexImage3D.apply(b,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}},texImage2D:function(){try{b.texImage2D.apply(b,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}},texImage3D:function(){try{b.texImage3D.apply(b,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}},updateUBOMapping:function(xe,je){let Ne=v.get(je);Ne===void 0&&(Ne=new WeakMap,v.set(je,Ne));let it=Ne.get(xe);it===void 0&&(it=b.getUniformBlockIndex(je,xe.name),Ne.set(xe,it))},uniformBlockBinding:function(xe,je){const Ne=v.get(je).get(xe);m.get(je)!==Ne&&(b.uniformBlockBinding(je,Ne,xe.__bindingPointIndex),m.set(je,Ne))},texStorage2D:function(){try{b.texStorage2D.apply(b,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}},texStorage3D:function(){try{b.texStorage3D.apply(b,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}},texSubImage2D:function(){try{b.texSubImage2D.apply(b,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}},texSubImage3D:function(){try{b.texSubImage3D.apply(b,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}},compressedTexSubImage2D:function(){try{b.compressedTexSubImage2D.apply(b,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}},compressedTexSubImage3D:function(){try{b.compressedTexSubImage3D.apply(b,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}},scissor:function(xe){Ai.equals(xe)===!1&&(b.scissor(xe.x,xe.y,xe.z,xe.w),Ai.copy(xe))},viewport:function(xe){yi.equals(xe)===!1&&(b.viewport(xe.x,xe.y,xe.z,xe.w),yi.copy(xe))},reset:function(){b.disable(b.BLEND),b.disable(b.CULL_FACE),b.disable(b.DEPTH_TEST),b.disable(b.POLYGON_OFFSET_FILL),b.disable(b.SCISSOR_TEST),b.disable(b.STENCIL_TEST),b.disable(b.SAMPLE_ALPHA_TO_COVERAGE),b.blendEquation(b.FUNC_ADD),b.blendFunc(b.ONE,b.ZERO),b.blendFuncSeparate(b.ONE,b.ZERO,b.ONE,b.ZERO),b.blendColor(0,0,0,0),b.colorMask(!0,!0,!0,!0),b.clearColor(0,0,0,0),b.depthMask(!0),b.depthFunc(b.LESS),b.clearDepth(1),b.stencilMask(4294967295),b.stencilFunc(b.ALWAYS,0,4294967295),b.stencilOp(b.KEEP,b.KEEP,b.KEEP),b.clearStencil(0),b.cullFace(b.BACK),b.frontFace(b.CCW),b.polygonOffset(0,0),b.activeTexture(b.TEXTURE0),b.bindFramebuffer(b.FRAMEBUFFER,null),b.bindFramebuffer(b.DRAW_FRAMEBUFFER,null),b.bindFramebuffer(b.READ_FRAMEBUFFER,null),b.useProgram(null),b.lineWidth(1),b.scissor(0,0,b.canvas.width,b.canvas.height),b.viewport(0,0,b.canvas.width,b.canvas.height),w={},Dt=null,It={},S={},I=new WeakMap,D=[],L=null,Y=!1,j=null,te=null,re=null,ce=null,le=null,de=null,pe=null,me=new Jt(0,0,0),we=0,Fe=!1,Be=null,ke=null,ze=null,tt=null,rt=null,Ai.set(0,0,b.canvas.width,b.canvas.height),yi.set(0,0,b.canvas.width,b.canvas.height),n.reset(),u.reset(),p.reset()}}}function Rh(b,n,u,p,m,v,w){const S=n.has("WEBGL_multisampled_render_to_texture")?n.get("WEBGL_multisampled_render_to_texture"):null,I=typeof navigator<"u"&&/OculusBrowser/g.test(navigator.userAgent),D=n.has("OCULUS_multiview")?n.get("OCULUS_multiview"):null,L=new zt,Y=new WeakMap;let j;const te=new WeakMap;let re=[],ce=!1,le=!1;try{le=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function de(Pe,Se){return le?new OffscreenCanvas(Pe,Se):za("canvas")}function pe(Pe,Se,xe){let je=1;const Ne=ei(Pe);if((Ne.width>xe||Ne.height>xe)&&(je=xe/Math.max(Ne.width,Ne.height)),je<1){if(typeof HTMLImageElement<"u"&&Pe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Pe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Pe instanceof ImageBitmap||typeof VideoFrame<"u"&&Pe instanceof VideoFrame){const it=Math.floor(je*Ne.width),ct=Math.floor(je*Ne.height);j===void 0&&(j=de(it,ct));const At=Se?de(it,ct):j;return At.width=it,At.height=ct,At.getContext("2d").drawImage(Pe,0,0,it,ct),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ne.width+"x"+Ne.height+") to ("+it+"x"+ct+")."),At}return"data"in Pe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ne.width+"x"+Ne.height+")."),Pe}return Pe}function me(Pe){return Pe.generateMipmaps&&Pe.minFilter!==pt&&Pe.minFilter!==Wt}function we(Pe){b.generateMipmap(Pe)}function Fe(Pe,Se,xe,je,Ne=!1){if(Pe!==null){if(b[Pe]!==void 0)return b[Pe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Pe+"'")}let it=Se;if(Se===b.RED&&(xe===b.FLOAT&&(it=b.R32F),xe===b.HALF_FLOAT&&(it=b.R16F),xe===b.UNSIGNED_BYTE&&(it=b.R8)),Se===b.RED_INTEGER&&(xe===b.UNSIGNED_BYTE&&(it=b.R8UI),xe===b.UNSIGNED_SHORT&&(it=b.R16UI),xe===b.UNSIGNED_INT&&(it=b.R32UI),xe===b.BYTE&&(it=b.R8I),xe===b.SHORT&&(it=b.R16I),xe===b.INT&&(it=b.R32I)),Se===b.RG&&(xe===b.FLOAT&&(it=b.RG32F),xe===b.HALF_FLOAT&&(it=b.RG16F),xe===b.UNSIGNED_BYTE&&(it=b.RG8)),Se===b.RG_INTEGER&&(xe===b.UNSIGNED_BYTE&&(it=b.RG8UI),xe===b.UNSIGNED_SHORT&&(it=b.RG16UI),xe===b.UNSIGNED_INT&&(it=b.RG32UI),xe===b.BYTE&&(it=b.RG8I),xe===b.SHORT&&(it=b.RG16I),xe===b.INT&&(it=b.RG32I)),Se===b.RGB&&xe===b.UNSIGNED_INT_5_9_9_9_REV&&(it=b.RGB9_E5),Se===b.RGBA){const ct=Ne?Fa:Fr.getTransfer(je);xe===b.FLOAT&&(it=b.RGBA32F),xe===b.HALF_FLOAT&&(it=b.RGBA16F),xe===b.UNSIGNED_BYTE&&(it=ct===jr?b.SRGB8_ALPHA8:b.RGBA8),xe===b.UNSIGNED_SHORT_4_4_4_4&&(it=b.RGBA4),xe===b.UNSIGNED_SHORT_5_5_5_1&&(it=b.RGB5_A1)}return it!==b.R16F&&it!==b.R32F&&it!==b.RG16F&&it!==b.RG32F&&it!==b.RGBA16F&&it!==b.RGBA32F||n.get("EXT_color_buffer_float"),it}function Be(Pe,Se){return me(Pe)===!0||Pe.isFramebufferTexture&&Pe.minFilter!==pt&&Pe.minFilter!==Wt?Math.log2(Math.max(Se.width,Se.height))+1:Pe.mipmaps!==void 0&&Pe.mipmaps.length>0?Pe.mipmaps.length:Pe.isCompressedTexture&&Array.isArray(Pe.image)?Se.mipmaps.length:1}function ke(Pe){const Se=Pe.target;Se.removeEventListener("dispose",ke),function(xe){const je=p.get(xe);if(je.__webglInit===void 0)return;const Ne=xe.source,it=te.get(Ne);if(it){const ct=it[je.__cacheKey];ct.usedTimes--,ct.usedTimes===0&&tt(xe),Object.keys(it).length===0&&te.delete(Ne)}p.remove(xe)}(Se),Se.isVideoTexture&&Y.delete(Se)}function ze(Pe){const Se=Pe.target;Se.removeEventListener("dispose",ze),function(xe){const je=p.get(xe);if(xe.depthTexture&&xe.depthTexture.dispose(),xe.isWebGLCubeRenderTarget)for(let it=0;it<6;it++){if(Array.isArray(je.__webglFramebuffer[it]))for(let ct=0;ct<je.__webglFramebuffer[it].length;ct++)b.deleteFramebuffer(je.__webglFramebuffer[it][ct]);else b.deleteFramebuffer(je.__webglFramebuffer[it]);je.__webglDepthbuffer&&b.deleteRenderbuffer(je.__webglDepthbuffer[it])}else{if(Array.isArray(je.__webglFramebuffer))for(let it=0;it<je.__webglFramebuffer.length;it++)b.deleteFramebuffer(je.__webglFramebuffer[it]);else b.deleteFramebuffer(je.__webglFramebuffer);if(je.__webglDepthbuffer&&b.deleteRenderbuffer(je.__webglDepthbuffer),je.__webglMultisampledFramebuffer&&b.deleteFramebuffer(je.__webglMultisampledFramebuffer),je.__webglColorRenderbuffer)for(let it=0;it<je.__webglColorRenderbuffer.length;it++)je.__webglColorRenderbuffer[it]&&b.deleteRenderbuffer(je.__webglColorRenderbuffer[it]);je.__webglDepthRenderbuffer&&b.deleteRenderbuffer(je.__webglDepthRenderbuffer)}const Ne=xe.textures;for(let it=0,ct=Ne.length;it<ct;it++){const At=p.get(Ne[it]);At.__webglTexture&&(b.deleteTexture(At.__webglTexture),w.memory.textures--),p.remove(Ne[it])}p.remove(xe)}(Se)}function tt(Pe){const Se=p.get(Pe);b.deleteTexture(Se.__webglTexture);const xe=Pe.source;delete te.get(xe)[Se.__cacheKey],w.memory.textures--}let rt=0;function $e(Pe,Se){const xe=p.get(Pe);if(Pe.isVideoTexture&&function(je){const Ne=w.render.frame;Y.get(je)!==Ne&&(Y.set(je,Ne),je.update())}(Pe),Pe.isRenderTargetTexture===!1&&Pe.version>0&&xe.__version!==Pe.version){const je=Pe.image;if(je===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(je.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else if(Tt(xe,Pe,Se))return}u.bindTexture(b.TEXTURE_2D,xe.__webglTexture,b.TEXTURE0+Se)}function ht(Pe,Se){const xe=p.get(Pe);Pe.version>0&&xe.__version!==Pe.version?Tt(xe,Pe,Se):u.bindTexture(b.TEXTURE_2D_ARRAY,xe.__webglTexture,b.TEXTURE0+Se)}const ut={[yn]:b.REPEAT,[He]:b.CLAMP_TO_EDGE,[Ke]:b.MIRRORED_REPEAT},at={[pt]:b.NEAREST,[Xt]:b.NEAREST_MIPMAP_NEAREST,[Bt]:b.NEAREST_MIPMAP_LINEAR,[Wt]:b.LINEAR,[ui]:b.LINEAR_MIPMAP_NEAREST,[st]:b.LINEAR_MIPMAP_LINEAR},Dt={[_c]:b.NEVER,[Bc]:b.ALWAYS,[Mc]:b.LESS,[_l]:b.LEQUAL,[Sc]:b.EQUAL,[Rc]:b.GEQUAL,[Tc]:b.GREATER,[Ic]:b.NOTEQUAL};function It(Pe,Se){if(Se.type!==wi||n.has("OES_texture_float_linear")!==!1||Se.magFilter!==Wt&&Se.magFilter!==ui&&Se.magFilter!==Bt&&Se.magFilter!==st&&Se.minFilter!==Wt&&Se.minFilter!==ui&&Se.minFilter!==Bt&&Se.minFilter!==st||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),b.texParameteri(Pe,b.TEXTURE_WRAP_S,ut[Se.wrapS]),b.texParameteri(Pe,b.TEXTURE_WRAP_T,ut[Se.wrapT]),Pe!==b.TEXTURE_3D&&Pe!==b.TEXTURE_2D_ARRAY||b.texParameteri(Pe,b.TEXTURE_WRAP_R,ut[Se.wrapR]),b.texParameteri(Pe,b.TEXTURE_MAG_FILTER,at[Se.magFilter]),b.texParameteri(Pe,b.TEXTURE_MIN_FILTER,at[Se.minFilter]),Se.compareFunction&&(b.texParameteri(Pe,b.TEXTURE_COMPARE_MODE,b.COMPARE_REF_TO_TEXTURE),b.texParameteri(Pe,b.TEXTURE_COMPARE_FUNC,Dt[Se.compareFunction])),n.has("EXT_texture_filter_anisotropic")===!0){if(Se.magFilter===pt||Se.minFilter!==Bt&&Se.minFilter!==st||Se.type===wi&&n.has("OES_texture_float_linear")===!1)return;if(Se.anisotropy>1||p.get(Se).__currentAnisotropy){const xe=n.get("EXT_texture_filter_anisotropic");b.texParameterf(Pe,xe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Se.anisotropy,m.getMaxAnisotropy())),p.get(Se).__currentAnisotropy=Se.anisotropy}}}function Ot(Pe,Se){let xe=!1;Pe.__webglInit===void 0&&(Pe.__webglInit=!0,Se.addEventListener("dispose",ke));const je=Se.source;let Ne=te.get(je);Ne===void 0&&(Ne={},te.set(je,Ne));const it=function(ct){const At=[];return At.push(ct.wrapS),At.push(ct.wrapT),At.push(ct.wrapR||0),At.push(ct.magFilter),At.push(ct.minFilter),At.push(ct.anisotropy),At.push(ct.internalFormat),At.push(ct.format),At.push(ct.type),At.push(ct.generateMipmaps),At.push(ct.premultiplyAlpha),At.push(ct.flipY),At.push(ct.unpackAlignment),At.push(ct.colorSpace),At.join()}(Se);if(it!==Pe.__cacheKey){Ne[it]===void 0&&(Ne[it]={texture:b.createTexture(),usedTimes:0},w.memory.textures++,xe=!0),Ne[it].usedTimes++;const ct=Ne[Pe.__cacheKey];ct!==void 0&&(Ne[Pe.__cacheKey].usedTimes--,ct.usedTimes===0&&tt(Se)),Pe.__cacheKey=it,Pe.__webglTexture=Ne[it].texture}return xe}function Tt(Pe,Se,xe){if(ce)return Se.isPendingDeferredUpload||(Se.isPendingDeferredUpload=!0,re.push({textureProperties:Pe,texture:Se,slot:xe})),!1;let je=b.TEXTURE_2D;(Se.isDataArrayTexture||Se.isCompressedArrayTexture)&&(je=b.TEXTURE_2D_ARRAY),Se.isData3DTexture&&(je=b.TEXTURE_3D);const Ne=Ot(Pe,Se),it=Se.source;u.bindTexture(je,Pe.__webglTexture,b.TEXTURE0+xe);const ct=p.get(it);if(it.version!==ct.__version||Ne===!0){u.activeTexture(b.TEXTURE0+xe);const At=Fr.getPrimaries(Fr.workingColorSpace),Vt=Se.colorSpace===j0?null:Fr.getPrimaries(Se.colorSpace),gi=Se.colorSpace===j0||At===Vt?b.NONE:b.BROWSER_DEFAULT_WEBGL;b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,Se.flipY),b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Se.premultiplyAlpha),b.pixelStorei(b.UNPACK_ALIGNMENT,Se.unpackAlignment),b.pixelStorei(b.UNPACK_COLORSPACE_CONVERSION_WEBGL,gi);let oi=pe(Se.image,!1,m.maxTextureSize);oi=mi(Se,oi);const Ci=v.convert(Se.format,Se.colorSpace),Qi=v.convert(Se.type);let xi,Ni=Fe(Se.internalFormat,Ci,Qi,Se.colorSpace,Se.isVideoTexture);It(je,Se);const Cr=Se.mipmaps,sr=Se.isVideoTexture!==!0,or=ct.__version===void 0||Ne===!0,xr=it.dataReady,Jr=Be(Se,oi);if(Se.isDepthTexture)Ni=b.DEPTH_COMPONENT16,Se.type===wi?Ni=b.DEPTH_COMPONENT32F:Se.type===Li?Ni=b.DEPTH_COMPONENT24:Se.type===Hr&&(Ni=b.DEPTH24_STENCIL8),or&&(sr?u.texStorage2D(b.TEXTURE_2D,1,Ni,oi.width,oi.height):u.texImage2D(b.TEXTURE_2D,0,Ni,oi.width,oi.height,0,Ci,Qi,null));else if(Se.isDataTexture)if(Cr.length>0){sr&&or&&u.texStorage2D(b.TEXTURE_2D,Jr,Ni,Cr[0].width,Cr[0].height);for(let Oi=0,fn=Cr.length;Oi<fn;Oi++)xi=Cr[Oi],sr?xr&&u.texSubImage2D(b.TEXTURE_2D,Oi,0,0,xi.width,xi.height,Ci,Qi,xi.data):u.texImage2D(b.TEXTURE_2D,Oi,Ni,xi.width,xi.height,0,Ci,Qi,xi.data);Se.generateMipmaps=!1}else sr?(or&&u.texStorage2D(b.TEXTURE_2D,Jr,Ni,oi.width,oi.height),xr&&u.texSubImage2D(b.TEXTURE_2D,0,0,0,oi.width,oi.height,Ci,Qi,oi.data)):u.texImage2D(b.TEXTURE_2D,0,Ni,oi.width,oi.height,0,Ci,Qi,oi.data);else if(Se.isCompressedTexture)if(Se.isCompressedArrayTexture){sr&&or&&u.texStorage3D(b.TEXTURE_2D_ARRAY,Jr,Ni,Cr[0].width,Cr[0].height,oi.depth);for(let Oi=0,fn=Cr.length;Oi<fn;Oi++)xi=Cr[Oi],Se.format!==ir?Ci!==null?sr?xr&&u.compressedTexSubImage3D(b.TEXTURE_2D_ARRAY,Oi,0,0,0,xi.width,xi.height,oi.depth,Ci,xi.data,0,0):u.compressedTexImage3D(b.TEXTURE_2D_ARRAY,Oi,Ni,xi.width,xi.height,oi.depth,0,xi.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):sr?xr&&u.texSubImage3D(b.TEXTURE_2D_ARRAY,Oi,0,0,0,xi.width,xi.height,oi.depth,Ci,Qi,xi.data):u.texImage3D(b.TEXTURE_2D_ARRAY,Oi,Ni,xi.width,xi.height,oi.depth,0,Ci,Qi,xi.data)}else{sr&&or&&u.texStorage2D(b.TEXTURE_2D,Jr,Ni,Cr[0].width,Cr[0].height);for(let Oi=0,fn=Cr.length;Oi<fn;Oi++)xi=Cr[Oi],Se.format!==ir?Ci!==null?sr?xr&&u.compressedTexSubImage2D(b.TEXTURE_2D,Oi,0,0,xi.width,xi.height,Ci,xi.data):u.compressedTexImage2D(b.TEXTURE_2D,Oi,Ni,xi.width,xi.height,0,xi.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):sr?xr&&u.texSubImage2D(b.TEXTURE_2D,Oi,0,0,xi.width,xi.height,Ci,Qi,xi.data):u.texImage2D(b.TEXTURE_2D,Oi,Ni,xi.width,xi.height,0,Ci,Qi,xi.data)}else if(Se.isDataArrayTexture)sr?(or&&u.texStorage3D(b.TEXTURE_2D_ARRAY,Jr,Ni,oi.width,oi.height,oi.depth),xr&&u.texSubImage3D(b.TEXTURE_2D_ARRAY,0,0,0,0,oi.width,oi.height,oi.depth,Ci,Qi,oi.data)):u.texImage3D(b.TEXTURE_2D_ARRAY,0,Ni,oi.width,oi.height,oi.depth,0,Ci,Qi,oi.data);else if(Se.isData3DTexture)sr?(or&&u.texStorage3D(b.TEXTURE_3D,Jr,Ni,oi.width,oi.height,oi.depth),xr&&u.texSubImage3D(b.TEXTURE_3D,0,0,0,0,oi.width,oi.height,oi.depth,Ci,Qi,oi.data)):u.texImage3D(b.TEXTURE_3D,0,Ni,oi.width,oi.height,oi.depth,0,Ci,Qi,oi.data);else if(Se.isFramebufferTexture){if(or)if(sr)u.texStorage2D(b.TEXTURE_2D,Jr,Ni,oi.width,oi.height);else{let Oi=oi.width,fn=oi.height;for(let t0=0;t0<Jr;t0++)u.texImage2D(b.TEXTURE_2D,t0,Ni,Oi,fn,0,Ci,Qi,null),Oi>>=1,fn>>=1}}else if(Cr.length>0){if(sr&&or){const Oi=ei(Cr[0]);u.texStorage2D(b.TEXTURE_2D,Jr,Ni,Oi.width,Oi.height)}for(let Oi=0,fn=Cr.length;Oi<fn;Oi++)xi=Cr[Oi],sr?xr&&u.texSubImage2D(b.TEXTURE_2D,Oi,0,0,Ci,Qi,xi):u.texImage2D(b.TEXTURE_2D,Oi,Ni,Ci,Qi,xi);Se.generateMipmaps=!1}else if(sr){if(or){const Oi=ei(oi);u.texStorage2D(b.TEXTURE_2D,Jr,Ni,Oi.width,Oi.height)}xr&&u.texSubImage2D(b.TEXTURE_2D,0,0,0,Ci,Qi,oi)}else u.texImage2D(b.TEXTURE_2D,0,Ni,Ci,Qi,oi);me(Se)&&we(je),ct.__version=it.version,Se.onUpdate&&Se.onUpdate(Se)}return Pe.__version=Se.version,!0}function Ai(Pe,Se,xe,je,Ne,it){const ct=v.convert(xe.format,xe.colorSpace),At=v.convert(xe.type),Vt=Fe(xe.internalFormat,ct,At,xe.colorSpace);if(!p.get(Se).__hasExternalTextures){const oi=Math.max(1,Se.width>>it),Ci=Math.max(1,Se.height>>it);Se.isWebGLMultiviewRenderTarget===!0?u.texStorage3D(b.TEXTURE_2D_ARRAY,0,Vt,Se.width,Se.height,Se.numViews):Ne===b.TEXTURE_3D||Ne===b.TEXTURE_2D_ARRAY?u.texImage3D(Ne,it,Vt,oi,Ci,Se.depth,0,ct,At,null):u.texImage2D(Ne,it,Vt,oi,Ci,0,ct,At,null)}u.bindFramebuffer(b.FRAMEBUFFER,Pe);const gi=jt(Se);Se.isWebGLMultiviewRenderTarget===!0?gi?D.framebufferTextureMultisampleMultiviewOVR(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,p.get(xe).__webglTexture,0,wt(Se),0,Se.numViews):D.framebufferTextureMultiviewOVR(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,p.get(xe).__webglTexture,0,0,Se.numViews):(Ne===b.TEXTURE_2D||Ne>=b.TEXTURE_CUBE_MAP_POSITIVE_X&&Ne<=b.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&(gi?S.framebufferTexture2DMultisampleEXT(b.FRAMEBUFFER,je,Ne,p.get(xe).__webglTexture,0,wt(Se)):b.framebufferTexture2D(b.FRAMEBUFFER,je,Ne,p.get(xe).__webglTexture,it)),u.bindFramebuffer(b.FRAMEBUFFER,null)}function yi(Pe,Se,xe){if(b.bindRenderbuffer(b.RENDERBUFFER,Pe),Se.isWebGLMultiviewRenderTarget===!0){const je=jt(Se),Ne=Se.numViews,it=Se.depthTexture;let ct=b.DEPTH_COMPONENT24,At=b.DEPTH_ATTACHMENT;it&&it.isDepthTexture&&(it.type===wi?ct=b.DEPTH_COMPONENT32F:it.type===Hr&&(ct=b.DEPTH24_STENCIL8,At=b.DEPTH_STENCIL_ATTACHMENT));let Vt=p.get(Se.depthTexture).__webglTexture;Vt===void 0&&(Vt=b.createTexture(),b.bindTexture(b.TEXTURE_2D_ARRAY,Vt),b.texStorage3D(b.TEXTURE_2D_ARRAY,1,ct,Se.width,Se.height,Ne)),je?D.framebufferTextureMultisampleMultiviewOVR(b.FRAMEBUFFER,At,Vt,0,wt(Se),0,Ne):D.framebufferTextureMultiviewOVR(b.FRAMEBUFFER,At,Vt,0,0,Ne)}else if(Se.depthBuffer&&!Se.stencilBuffer){let je=b.DEPTH_COMPONENT24;if(xe||jt(Se)){const Ne=Se.depthTexture;Ne&&Ne.isDepthTexture&&(Ne.type===wi?je=b.DEPTH_COMPONENT32F:Ne.type===Li&&(je=b.DEPTH_COMPONENT24));const it=wt(Se);jt(Se)?S.renderbufferStorageMultisampleEXT(b.RENDERBUFFER,it,je,Se.width,Se.height):b.renderbufferStorageMultisample(b.RENDERBUFFER,it,je,Se.width,Se.height)}else b.renderbufferStorage(b.RENDERBUFFER,je,Se.width,Se.height);b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,Pe)}else if(Se.depthBuffer&&Se.stencilBuffer){const je=wt(Se);xe&&jt(Se)===!1?b.renderbufferStorageMultisample(b.RENDERBUFFER,je,b.DEPTH24_STENCIL8,Se.width,Se.height):jt(Se)?S.renderbufferStorageMultisampleEXT(b.RENDERBUFFER,je,b.DEPTH24_STENCIL8,Se.width,Se.height):b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_STENCIL,Se.width,Se.height),b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,b.RENDERBUFFER,Pe)}else{const je=Se.textures;for(let Ne=0;Ne<je.length;Ne++){const it=je[Ne],ct=v.convert(it.format,it.colorSpace),At=v.convert(it.type),Vt=Fe(it.internalFormat,ct,At,it.colorSpace),gi=wt(Se);xe&&jt(Se)===!1?b.renderbufferStorageMultisample(b.RENDERBUFFER,gi,Vt,Se.width,Se.height):jt(Se)?S.renderbufferStorageMultisampleEXT(b.RENDERBUFFER,gi,Vt,Se.width,Se.height):b.renderbufferStorage(b.RENDERBUFFER,Vt,Se.width,Se.height)}}b.bindRenderbuffer(b.RENDERBUFFER,null)}function ni(Pe,Se){if(Se&&Se.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(u.bindFramebuffer(b.FRAMEBUFFER,Pe),!Se.depthTexture||!Se.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");p.get(Se.depthTexture).__webglTexture&&Se.depthTexture.image.width===Se.width&&Se.depthTexture.image.height===Se.height||(Se.depthTexture.image.width=Se.width,Se.depthTexture.image.height=Se.height,Se.depthTexture.needsUpdate=!0),$e(Se.depthTexture,0),Se.depthTexture.image.depth!=1?ht(Se.depthTexture,0):$e(Se.depthTexture,0);const xe=p.get(Se.depthTexture).__webglTexture,je=wt(Se);if(Se.isWebGLMultiviewRenderTarget===!0){const Ne=jt(Se),it=Se.numViews;if(Se.depthTexture.format===zr)Ne?D.framebufferTextureMultisampleMultiviewOVR(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,xe,0,je,0,it):D.framebufferTextureMultiviewOVR(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,xe,0,0,it);else{if(Se.depthTexture.format!==r0)throw new Error("Unknown depthTexture format");Ne?D.framebufferTextureMultisampleMultiviewOVR(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,xe,0,je,0,it):D.framebufferTextureMultiviewOVR(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,xe,0,0,it)}}else if(Se.depthTexture.format===zr)jt(Se)?S.framebufferTexture2DMultisampleEXT(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.TEXTURE_2D,xe,0,je):b.framebufferTexture2D(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.TEXTURE_2D,xe,0);else{if(Se.depthTexture.format!==r0)throw new Error("Unknown depthTexture format");jt(Se)?S.framebufferTexture2DMultisampleEXT(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,b.TEXTURE_2D,xe,0,je):b.framebufferTexture2D(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,b.TEXTURE_2D,xe,0)}}function ai(Pe){const Se=p.get(Pe),xe=Pe.isWebGLCubeRenderTarget===!0;if(Pe.depthTexture&&!Se.__autoAllocateDepthBuffer){if(xe)throw new Error("target.depthTexture not supported in Cube render targets");ni(Se.__webglFramebuffer,Pe)}else if(xe){Se.__webglDepthbuffer=[];for(let je=0;je<6;je++)u.bindFramebuffer(b.FRAMEBUFFER,Se.__webglFramebuffer[je]),Se.__webglDepthbuffer[je]=b.createRenderbuffer(),yi(Se.__webglDepthbuffer[je],Pe,!1)}else u.bindFramebuffer(b.FRAMEBUFFER,Se.__webglFramebuffer),Se.__webglDepthbuffer=b.createRenderbuffer(),yi(Se.__webglDepthbuffer,Pe,!1);u.bindFramebuffer(b.FRAMEBUFFER,null)}const hi=[],fi=[];function wt(Pe){return Math.min(m.maxSamples,Pe.samples)}function jt(Pe){const Se=p.get(Pe);return Pe.samples>0&&n.has("WEBGL_multisampled_render_to_texture")===!0&&Se.__useRenderToTexture!==!1}function mi(Pe,Se){const xe=Pe.colorSpace,je=Pe.format,Ne=Pe.type;return Pe.isCompressedTexture===!0||Pe.isVideoTexture===!0||xe!==Cn&&xe!==j0&&(Fr.getTransfer(xe)===jr?je===ir&&Ne===Di||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",xe)),Se}function ei(Pe){return typeof HTMLImageElement<"u"&&Pe instanceof HTMLImageElement?(L.width=Pe.naturalWidth||Pe.width,L.height=Pe.naturalHeight||Pe.height):typeof VideoFrame<"u"&&Pe instanceof VideoFrame?(L.width=Pe.displayWidth,L.height=Pe.displayHeight):(L.width=Pe.width,L.height=Pe.height),L}this.allocateTextureUnit=function(){const Pe=rt;return Pe>=m.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Pe+" texture units while this GPU supports only "+m.maxTextures),rt+=1,Pe},this.resetTextureUnits=function(){rt=0},this.setTexture2D=$e,this.setTexture2DArray=ht,this.setTexture3D=function(Pe,Se){const xe=p.get(Pe);Pe.version>0&&xe.__version!==Pe.version?Tt(xe,Pe,Se):u.bindTexture(b.TEXTURE_3D,xe.__webglTexture,b.TEXTURE0+Se)},this.setTextureCube=function(Pe,Se){const xe=p.get(Pe);Pe.version>0&&xe.__version!==Pe.version?function(je,Ne,it){if(Ne.image.length!==6)return;const ct=Ot(je,Ne),At=Ne.source;u.bindTexture(b.TEXTURE_CUBE_MAP,je.__webglTexture,b.TEXTURE0+it);const Vt=p.get(At);if(At.version!==Vt.__version||ct===!0){u.activeTexture(b.TEXTURE0+it);const gi=Fr.getPrimaries(Fr.workingColorSpace),oi=Ne.colorSpace===j0?null:Fr.getPrimaries(Ne.colorSpace),Ci=Ne.colorSpace===j0||gi===oi?b.NONE:b.BROWSER_DEFAULT_WEBGL;b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,Ne.flipY),b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ne.premultiplyAlpha),b.pixelStorei(b.UNPACK_ALIGNMENT,Ne.unpackAlignment),b.pixelStorei(b.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ci);const Qi=Ne.isCompressedTexture||Ne.image[0].isCompressedTexture,xi=Ne.image[0]&&Ne.image[0].isDataTexture,Ni=[];for(let Ui=0;Ui<6;Ui++)Ni[Ui]=Qi||xi?xi?Ne.image[Ui].image:Ne.image[Ui]:pe(Ne.image[Ui],!0,m.maxCubemapSize),Ni[Ui]=mi(Ne,Ni[Ui]);const Cr=Ni[0],sr=v.convert(Ne.format,Ne.colorSpace),or=v.convert(Ne.type),xr=Fe(Ne.internalFormat,sr,or,Ne.colorSpace),Jr=Ne.isVideoTexture!==!0,Oi=Vt.__version===void 0||ct===!0,fn=At.dataReady;let t0,Ba=Be(Ne,Cr);if(It(b.TEXTURE_CUBE_MAP,Ne),Qi){Jr&&Oi&&u.texStorage2D(b.TEXTURE_CUBE_MAP,Ba,xr,Cr.width,Cr.height);for(let Ui=0;Ui<6;Ui++){t0=Ni[Ui].mipmaps;for(let Zr=0;Zr<t0.length;Zr++){const $r=t0[Zr];Ne.format!==ir?sr!==null?Jr?fn&&u.compressedTexSubImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+Ui,Zr,0,0,$r.width,$r.height,sr,$r.data):u.compressedTexImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+Ui,Zr,xr,$r.width,$r.height,0,$r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Jr?fn&&u.texSubImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+Ui,Zr,0,0,$r.width,$r.height,sr,or,$r.data):u.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+Ui,Zr,xr,$r.width,$r.height,0,sr,or,$r.data)}}}else{if(t0=Ne.mipmaps,Jr&&Oi){t0.length>0&&Ba++;const Ui=ei(Ni[0]);u.texStorage2D(b.TEXTURE_CUBE_MAP,Ba,xr,Ui.width,Ui.height)}for(let Ui=0;Ui<6;Ui++)if(xi){Jr?fn&&u.texSubImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+Ui,0,0,0,Ni[Ui].width,Ni[Ui].height,sr,or,Ni[Ui].data):u.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+Ui,0,xr,Ni[Ui].width,Ni[Ui].height,0,sr,or,Ni[Ui].data);for(let Zr=0;Zr<t0.length;Zr++){const $r=t0[Zr].image[Ui].image;Jr?fn&&u.texSubImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+Ui,Zr+1,0,0,$r.width,$r.height,sr,or,$r.data):u.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+Ui,Zr+1,xr,$r.width,$r.height,0,sr,or,$r.data)}}else{Jr?fn&&u.texSubImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+Ui,0,0,0,sr,or,Ni[Ui]):u.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+Ui,0,xr,sr,or,Ni[Ui]);for(let Zr=0;Zr<t0.length;Zr++){const $r=t0[Zr];Jr?fn&&u.texSubImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+Ui,Zr+1,0,0,sr,or,$r.image[Ui]):u.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+Ui,Zr+1,xr,sr,or,$r.image[Ui])}}}me(Ne)&&we(b.TEXTURE_CUBE_MAP),Vt.__version=At.version,Ne.onUpdate&&Ne.onUpdate(Ne)}je.__version=Ne.version}(xe,Pe,Se):u.bindTexture(b.TEXTURE_CUBE_MAP,xe.__webglTexture,b.TEXTURE0+Se)},this.rebindTextures=function(Pe,Se,xe){const je=p.get(Pe);Se!==void 0&&Ai(je.__webglFramebuffer,Pe,Pe.texture,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,0),xe!==void 0&&ai(Pe)},this.uploadTexture=Tt,this.setupRenderTarget=function(Pe){const Se=Pe.texture,xe=p.get(Pe),je=p.get(Se);Pe.addEventListener("dispose",ze);const Ne=Pe.textures,it=Pe.isWebGLCubeRenderTarget===!0,ct=Ne.length>1;if(ct||(je.__webglTexture===void 0&&(je.__webglTexture=b.createTexture()),je.__version=Se.version,w.memory.textures++),it){xe.__webglFramebuffer=[];for(let At=0;At<6;At++)if(Se.mipmaps&&Se.mipmaps.length>0){xe.__webglFramebuffer[At]=[];for(let Vt=0;Vt<Se.mipmaps.length;Vt++)xe.__webglFramebuffer[At][Vt]=b.createFramebuffer()}else xe.__webglFramebuffer[At]=b.createFramebuffer()}else{if(Se.mipmaps&&Se.mipmaps.length>0){xe.__webglFramebuffer=[];for(let At=0;At<Se.mipmaps.length;At++)xe.__webglFramebuffer[At]=b.createFramebuffer()}else xe.__webglFramebuffer=b.createFramebuffer();if(ct)for(let At=0,Vt=Ne.length;At<Vt;At++){const gi=p.get(Ne[At]);gi.__webglTexture===void 0&&(gi.__webglTexture=b.createTexture(),w.memory.textures++)}if(Pe.samples>0&&jt(Pe)===!1){xe.__webglMultisampledFramebuffer=b.createFramebuffer(),xe.__webglColorRenderbuffer=[],u.bindFramebuffer(b.FRAMEBUFFER,xe.__webglMultisampledFramebuffer);for(let At=0;At<Ne.length;At++){const Vt=Ne[At];xe.__webglColorRenderbuffer[At]=b.createRenderbuffer(),b.bindRenderbuffer(b.RENDERBUFFER,xe.__webglColorRenderbuffer[At]);const gi=v.convert(Vt.format,Vt.colorSpace),oi=v.convert(Vt.type),Ci=Fe(Vt.internalFormat,gi,oi,Vt.colorSpace,Pe.isXRRenderTarget===!0),Qi=wt(Pe);b.renderbufferStorageMultisample(b.RENDERBUFFER,Qi,Ci,Pe.width,Pe.height),b.framebufferRenderbuffer(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0+At,b.RENDERBUFFER,xe.__webglColorRenderbuffer[At])}b.bindRenderbuffer(b.RENDERBUFFER,null),Pe.depthBuffer&&(xe.__webglDepthRenderbuffer=b.createRenderbuffer(),yi(xe.__webglDepthRenderbuffer,Pe,!0)),u.bindFramebuffer(b.FRAMEBUFFER,null)}}if(it){u.bindTexture(b.TEXTURE_CUBE_MAP,je.__webglTexture),It(b.TEXTURE_CUBE_MAP,Se);for(let At=0;At<6;At++)if(Se.mipmaps&&Se.mipmaps.length>0)for(let Vt=0;Vt<Se.mipmaps.length;Vt++)Ai(xe.__webglFramebuffer[At][Vt],Pe,Se,b.COLOR_ATTACHMENT0,b.TEXTURE_CUBE_MAP_POSITIVE_X+At,Vt);else Ai(xe.__webglFramebuffer[At],Pe,Se,b.COLOR_ATTACHMENT0,b.TEXTURE_CUBE_MAP_POSITIVE_X+At,0);me(Se)&&we(b.TEXTURE_CUBE_MAP),u.unbindTexture()}else if(ct){for(let At=0,Vt=Ne.length;At<Vt;At++){const gi=Ne[At],oi=p.get(gi);u.bindTexture(b.TEXTURE_2D,oi.__webglTexture),It(b.TEXTURE_2D,gi),Ai(xe.__webglFramebuffer,Pe,gi,b.COLOR_ATTACHMENT0+At,b.TEXTURE_2D,0),me(gi)&&we(b.TEXTURE_2D)}u.unbindTexture()}else{let At=b.TEXTURE_2D;if((Pe.isWebGL3DRenderTarget||Pe.isWebGLArrayRenderTarget)&&(At=Pe.isWebGL3DRenderTarget?b.TEXTURE_3D:b.TEXTURE_2D_ARRAY),Pe.isWebGLMultiviewRenderTarget===!0&&(At=b.TEXTURE_2D_ARRAY),u.bindTexture(At,je.__webglTexture),It(At,Se),Se.mipmaps&&Se.mipmaps.length>0)for(let Vt=0;Vt<Se.mipmaps.length;Vt++)Ai(xe.__webglFramebuffer[Vt],Pe,Se,b.COLOR_ATTACHMENT0,At,Vt);else Ai(xe.__webglFramebuffer,Pe,Se,b.COLOR_ATTACHMENT0,At,0);me(Se)&&we(At),u.unbindTexture()}(Pe.depthBuffer||Pe.isWebGLMultiviewRenderTarget===!0)&&this.setupDepthRenderbuffer(Pe)},this.updateRenderTargetMipmap=function(Pe){const Se=Pe.textures;for(let xe=0,je=Se.length;xe<je;xe++){const Ne=Se[xe];if(me(Ne)){const it=Pe.isWebGLCubeRenderTarget?b.TEXTURE_CUBE_MAP:b.TEXTURE_2D,ct=p.get(Ne).__webglTexture;u.bindTexture(it,ct),we(it),u.unbindTexture()}}},this.updateMultisampleRenderTarget=function(Pe){if(Pe.samples>0){if(jt(Pe)===!1){const Se=Pe.textures,xe=Pe.width,je=Pe.height;let Ne=b.COLOR_BUFFER_BIT;const it=Pe.stencilBuffer?b.DEPTH_STENCIL_ATTACHMENT:b.DEPTH_ATTACHMENT,ct=p.get(Pe),At=Se.length>1;if(At)for(let Vt=0;Vt<Se.length;Vt++)u.bindFramebuffer(b.FRAMEBUFFER,ct.__webglMultisampledFramebuffer),b.framebufferRenderbuffer(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0+Vt,b.RENDERBUFFER,null),u.bindFramebuffer(b.FRAMEBUFFER,ct.__webglFramebuffer),b.framebufferTexture2D(b.DRAW_FRAMEBUFFER,b.COLOR_ATTACHMENT0+Vt,b.TEXTURE_2D,null,0);u.bindFramebuffer(b.READ_FRAMEBUFFER,ct.__webglMultisampledFramebuffer),u.bindFramebuffer(b.DRAW_FRAMEBUFFER,ct.__webglFramebuffer);for(let Vt=0;Vt<Se.length;Vt++){if(Pe.resolveDepthBuffer&&(Pe.depthBuffer&&(Ne|=b.DEPTH_BUFFER_BIT),Pe.stencilBuffer&&Pe.resolveStencilBuffer&&(Ne|=b.STENCIL_BUFFER_BIT)),At){b.framebufferRenderbuffer(b.READ_FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.RENDERBUFFER,ct.__webglColorRenderbuffer[Vt]);const gi=p.get(Se[Vt]).__webglTexture;b.framebufferTexture2D(b.DRAW_FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,gi,0)}b.blitFramebuffer(0,0,xe,je,0,0,xe,je,Ne,b.NEAREST),I===!0&&(hi.length=0,fi.length=0,hi.push(b.COLOR_ATTACHMENT0+Vt),Pe.depthBuffer&&Pe.resolveDepthBuffer===!1&&(hi.push(it),fi.push(it),b.invalidateFramebuffer(b.DRAW_FRAMEBUFFER,fi)),b.invalidateFramebuffer(b.READ_FRAMEBUFFER,hi))}if(u.bindFramebuffer(b.READ_FRAMEBUFFER,null),u.bindFramebuffer(b.DRAW_FRAMEBUFFER,null),At)for(let Vt=0;Vt<Se.length;Vt++){u.bindFramebuffer(b.FRAMEBUFFER,ct.__webglMultisampledFramebuffer),b.framebufferRenderbuffer(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0+Vt,b.RENDERBUFFER,ct.__webglColorRenderbuffer[Vt]);const gi=p.get(Se[Vt]).__webglTexture;u.bindFramebuffer(b.FRAMEBUFFER,ct.__webglFramebuffer),b.framebufferTexture2D(b.DRAW_FRAMEBUFFER,b.COLOR_ATTACHMENT0+Vt,b.TEXTURE_2D,gi,0)}u.bindFramebuffer(b.DRAW_FRAMEBUFFER,ct.__webglMultisampledFramebuffer)}else if(Pe.depthBuffer&&Pe.resolveDepthBuffer===!1&&I){const Se=Pe.stencilBuffer?b.DEPTH_STENCIL_ATTACHMENT:b.DEPTH_ATTACHMENT;b.invalidateFramebuffer(b.DRAW_FRAMEBUFFER,[Se])}}},this.setupDepthTexture=ni,this.setupDepthRenderbuffer=ai,this.setupFrameBufferTexture=Ai,this.useMultisampledRTT=jt,this.runDeferredUploads=function(){const Pe=ce;ce=!1;for(const Se of re)Tt(Se.textureProperties,Se.texture,Se.slot),Se.texture.isPendingDeferredUpload=!1;re=[],ce=Pe},this.setDeferTextureUploads=function(Pe){ce=Pe}}function tc(b,n){return{convert:function(u,p=j0){let m;const v=Fr.getTransfer(p);if(u===Di)return b.UNSIGNED_BYTE;if(u===Qr)return b.UNSIGNED_SHORT_4_4_4_4;if(u===ki)return b.UNSIGNED_SHORT_5_5_5_1;if(u===Xr)return b.UNSIGNED_INT_5_9_9_9_REV;if(u===Mi)return b.BYTE;if(u===Ir)return b.SHORT;if(u===Vi)return b.UNSIGNED_SHORT;if(u===_r)return b.INT;if(u===Li)return b.UNSIGNED_INT;if(u===wi)return b.FLOAT;if(u===Ji)return b.HALF_FLOAT;if(u===Yr)return b.ALPHA;if(u===gr)return b.RGB;if(u===ir)return b.RGBA;if(u===Fn)return b.LUMINANCE;if(u===$0)return b.LUMINANCE_ALPHA;if(u===zr)return b.DEPTH_COMPONENT;if(u===r0)return b.DEPTH_STENCIL;if(u===m0)return b.RED;if(u===D0)return b.RED_INTEGER;if(u===n0)return b.RG;if(u===x0)return b.RG_INTEGER;if(u===Vn)return b.RGBA_INTEGER;if(u===g0||u===L0||u===s0||u===v0)if(v===jr){if(m=n.get("WEBGL_compressed_texture_s3tc_srgb"),m===null)return null;if(u===g0)return m.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(u===L0)return m.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(u===s0)return m.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(u===v0)return m.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(m=n.get("WEBGL_compressed_texture_s3tc"),m===null)return null;if(u===g0)return m.COMPRESSED_RGB_S3TC_DXT1_EXT;if(u===L0)return m.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(u===s0)return m.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(u===v0)return m.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(u===hs||u===Pr||u===La||u===po){if(m=n.get("WEBGL_compressed_texture_pvrtc"),m===null)return null;if(u===hs)return m.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(u===Pr)return m.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(u===La)return m.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(u===po)return m.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(u===hn||u===oe||u===ge){if(m=n.get("WEBGL_compressed_texture_etc"),m===null)return null;if(u===hn||u===oe)return v===jr?m.COMPRESSED_SRGB8_ETC2:m.COMPRESSED_RGB8_ETC2;if(u===ge)return v===jr?m.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:m.COMPRESSED_RGBA8_ETC2_EAC}if(u===Me||u===Ie||u===Ue||u===Xe||u===Ct||u===yt||u===$t||u===xt||u===_t||u===bi||u===Bi||u===Wi||u===qi||u===Zi){if(m=n.get("WEBGL_compressed_texture_astc"),m===null)return null;if(u===Me)return v===jr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:m.COMPRESSED_RGBA_ASTC_4x4_KHR;if(u===Ie)return v===jr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:m.COMPRESSED_RGBA_ASTC_5x4_KHR;if(u===Ue)return v===jr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:m.COMPRESSED_RGBA_ASTC_5x5_KHR;if(u===Xe)return v===jr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:m.COMPRESSED_RGBA_ASTC_6x5_KHR;if(u===Ct)return v===jr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:m.COMPRESSED_RGBA_ASTC_6x6_KHR;if(u===yt)return v===jr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:m.COMPRESSED_RGBA_ASTC_8x5_KHR;if(u===$t)return v===jr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:m.COMPRESSED_RGBA_ASTC_8x6_KHR;if(u===xt)return v===jr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:m.COMPRESSED_RGBA_ASTC_8x8_KHR;if(u===_t)return v===jr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:m.COMPRESSED_RGBA_ASTC_10x5_KHR;if(u===bi)return v===jr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:m.COMPRESSED_RGBA_ASTC_10x6_KHR;if(u===Bi)return v===jr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:m.COMPRESSED_RGBA_ASTC_10x8_KHR;if(u===Wi)return v===jr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:m.COMPRESSED_RGBA_ASTC_10x10_KHR;if(u===qi)return v===jr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:m.COMPRESSED_RGBA_ASTC_12x10_KHR;if(u===Zi)return v===jr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:m.COMPRESSED_RGBA_ASTC_12x12_KHR}if(u===rr||u===vr||u===di){if(m=n.get("EXT_texture_compression_bptc"),m===null)return null;if(u===rr)return v===jr?m.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:m.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(u===vr)return m.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(u===di)return m.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(u===wn||u===nn||u===On||u===o0){if(m=n.get("EXT_texture_compression_rgtc"),m===null)return null;if(u===rr)return m.COMPRESSED_RED_RGTC1_EXT;if(u===nn)return m.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(u===On)return m.COMPRESSED_RED_GREEN_RGTC2_EXT;if(u===o0)return m.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return u===Hr?b.UNSIGNED_INT_24_8:b[u]!==void 0?b[u]:null}}}class Y0 extends yr{constructor(){super(),this.isGroup=!0,this.type="Group"}}class ic extends Rn{constructor(n=[]){super(),this.isArrayCamera=!0,this.cameras=n}}var Bh=new Le,Dh=new Le;function Lh(b){var n,u,p=this,m=null,v=null,w=null,S=[],I=new Ii,D=new Ii,L=1,Y="local-floor";typeof window<"u"&&"VRFrameData"in window&&(v=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",we,!1));var j=new Ii,te=new qn,re=new Le,ce=new Rn;ce.viewport=new Rr,ce.layers.enable(1);var le=new Rn;le.viewport=new Rr,le.layers.enable(2);var de=new ic([ce,le]);de.layers.enable(1),de.layers.enable(2);var pe,me=new zt;function we(){if(p.isPresenting=m!==null&&m.isPresenting===!0){var rt=m.getEyeParameters("left");n=2*rt.renderWidth*L,u=rt.renderHeight*L,pe=b.getPixelRatio(),b.getSize(me),b.setDrawingBufferSize(n,u,1),ce.viewport.set(0,0,n/2,u),le.viewport.set(n/2,0,n/2,u),tt.start(),p.dispatchEvent({type:"sessionstart"})}else p.enabled&&b.setDrawingBufferSize(me.width,me.height,pe),tt.stop(),p.dispatchEvent({type:"sessionend"})}var Fe=[],Be=[];function ke(rt){for(var $e=navigator.getGamepads&&navigator.getGamepads(),ht=0,ut=$e.length;ht<ut;ht++){var at=$e[ht];if(at&&(at.id==="Daydream Controller"||at.id==="Gear VR Controller"||at.id==="Oculus Go Controller"||at.id==="OpenVR Gamepad"||at.id.startsWith("Oculus Touch")||at.id.startsWith("HTC Vive Focus")||at.id.startsWith("Spatial Controller"))){var Dt=at.hand;if(rt===0&&(Dt===""||Dt==="right")||rt===1&&Dt==="left")return at}}}function ze(rt,$e){$e!==null&&$e.length===4&&rt.set($e[0]*n,$e[1]*u,$e[2]*n,$e[3]*u)}this.enabled=!1,this.getController=function(rt){var $e=S[rt];return $e===void 0&&(($e=new Y0).matrixAutoUpdate=!1,$e.visible=!1,S[rt]=$e),$e},this.getDevice=function(){return m},this.setDevice=function(rt){rt!==void 0&&(m=rt),tt.setContext(rt)},this.setFramebufferScaleFactor=function(rt){L=rt},this.setReferenceSpaceType=function(rt){Y=rt},this.setPoseTarget=function(rt){rt!==void 0&&(w=rt)},this.cameraAutoUpdate=!0,this.updateCamera=function(rt){var $e=Y==="local-floor"?1.6:0;if(m.depthNear=rt.near,m.depthFar=rt.far,m.getFrameData(v),Y==="local-floor"){var ht=m.stageParameters;ht?I.fromArray(ht.sittingToStandingTransform):I.makeTranslation(0,$e,0)}var ut=v.pose,at=w!==null?w:rt;at.matrix.copy(I),at.matrix.decompose(at.position,at.quaternion,at.scale),ut.orientation!==null&&(te.fromArray(ut.orientation),at.quaternion.multiply(te)),ut.position!==null&&(te.setFromRotationMatrix(I),re.fromArray(ut.position),re.applyQuaternion(te),at.position.add(re)),at.updateMatrixWorld();for(var Dt=at.children,It=0,Ot=Dt.length;It<Ot;It++)Dt[It].updateMatrixWorld(!0);ce.near=rt.near,le.near=rt.near,ce.far=rt.far,le.far=rt.far,ce.matrixWorldInverse.fromArray(v.leftViewMatrix),le.matrixWorldInverse.fromArray(v.rightViewMatrix),D.copy(I).invert(),Y==="local-floor"&&(ce.matrixWorldInverse.multiply(D),le.matrixWorldInverse.multiply(D));var Tt=at.parent;Tt!==null&&(j.copy(Tt.matrixWorld).invert(),ce.matrixWorldInverse.multiply(j),le.matrixWorldInverse.multiply(j)),ce.matrixWorld.copy(ce.matrixWorldInverse).invert(),le.matrixWorld.copy(le.matrixWorldInverse).invert(),ce.projectionMatrix.fromArray(v.leftProjectionMatrix),le.projectionMatrix.fromArray(v.rightProjectionMatrix),function(ni,ai,hi){Bh.setFromMatrixPosition(ai.matrixWorld),Dh.setFromMatrixPosition(hi.matrixWorld);var fi=Bh.distanceTo(Dh),wt=ai.projectionMatrix.elements,jt=hi.projectionMatrix.elements,mi=wt[14]/(wt[10]-1),ei=wt[14]/(wt[10]+1),Pe=(wt[9]+1)/wt[5],Se=(wt[9]-1)/wt[5],xe=(wt[8]-1)/wt[0],je=(jt[8]+1)/jt[0],Ne=mi*xe,it=mi*je,ct=fi/(-xe+je),At=ct*-xe;ai.matrixWorld.decompose(ni.position,ni.quaternion,ni.scale),ni.translateX(At),ni.translateZ(ct),ni.matrixWorld.compose(ni.position,ni.quaternion,ni.scale),ni.matrixWorldInverse.copy(ni.matrixWorld).invert();var Vt=mi+ct,gi=ei+ct,oi=Ne-At,Ci=it+(fi-At),Qi=Pe*ei/gi*Vt,xi=Se*ei/gi*Vt;ni.projectionMatrix.makePerspective(oi,Ci,Qi,xi,Vt,gi)}(de,ce,le);var Ai=m.getLayers();if(Ai.length){var yi=Ai[0];ze(ce.viewport,yi.leftBounds),ze(le.viewport,yi.rightBounds)}return function(){for(var ni=0;ni<S.length;ni++){var ai=S[ni],hi=ke(ni);if(hi!==void 0&&hi.pose!==void 0){if(hi.pose===null)return;var fi=hi.pose;fi.hasPosition===!1&&ai.position.set(.2,-.6,-.05),fi.position!==null&&ai.position.fromArray(fi.position),fi.orientation!==null&&ai.quaternion.fromArray(fi.orientation),ai.matrix.compose(ai.position,ai.quaternion,ai.scale),ai.matrix.premultiply(I),ai.matrix.decompose(ai.position,ai.quaternion,ai.scale),ai.matrixWorldNeedsUpdate=!0,ai.visible=!0;var wt=hi.id==="Daydream Controller"?0:1;Fe[ni]===void 0&&(Fe[ni]=!1),Fe[ni]!==hi.buttons[wt].pressed&&(Fe[ni]=hi.buttons[wt].pressed,Fe[ni]===!0?ai.dispatchEvent({type:"selectstart"}):(ai.dispatchEvent({type:"selectend"}),ai.dispatchEvent({type:"select"}))),wt=2,Be[ni]===void 0&&(Be[ni]=!1),hi.buttons[wt]!==void 0&&Be[ni]!==hi.buttons[wt].pressed&&(Be[ni]=hi.buttons[wt].pressed,Be[ni]===!0?ai.dispatchEvent({type:"squeezestart"}):(ai.dispatchEvent({type:"squeezeend"}),ai.dispatchEvent({type:"squeeze"})))}else ai.visible=!1}}(),de},this.getCamera=function(){return de},this.getFoveation=function(){return 1},this.setFoveation=function(rt){rt!==1&&console.warn("THREE.WebVRManager: setFoveation() not used in WebVR.")},this.getEnvironmentBlendMode=function(){if(p.isPresenting)return"opaque"},this.getStandingMatrix=function(){return I},this.isPresenting=!1;var tt=new Hl;this.setAnimationLoop=function(rt){tt.setAnimationLoop(rt),this.isPresenting&&tt.start()},this.submitFrame=function(){this.isPresenting&&m.submitFrame()},this.dispose=function(){typeof window<"u"&&window.removeEventListener("vrdisplaypresentchange",we)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}Object.assign(Lh.prototype,{addEventListener:P0.prototype.addEventListener,hasEventListener:P0.prototype.hasEventListener,removeEventListener:P0.prototype.removeEventListener,dispatchEvent:P0.prototype.dispatchEvent});class Ph extends Wn{constructor(n,u,p,m={}){super(n,u,m),this.depthBuffer=!1,this.stencilBuffer=!1,this.numViews=p}copy(n){return super.copy(n),this.numViews=n.numViews,this}}Ph.prototype.isWebGLMultiviewRenderTarget=!0;const hd={type:"move"};class rc{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Y0,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Y0,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Le,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Le),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Y0,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Le,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Le),this._grip}dispatchEvent(n){return this._targetRay!==null&&this._targetRay.dispatchEvent(n),this._grip!==null&&this._grip.dispatchEvent(n),this._hand!==null&&this._hand.dispatchEvent(n),this}connect(n){if(n&&n.hand){const u=this._hand;if(u)for(const p of n.hand.values())this._getHandJoint(u,p)}return this.dispatchEvent({type:"connected",data:n}),this}disconnect(n){return this.dispatchEvent({type:"disconnected",data:n}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(n,u,p){let m=null,v=null,w=null;const S=this._targetRay,I=this._grip,D=this._hand;if(n&&u.session.visibilityState!=="visible-blurred"){if(D&&n.hand){w=!0;for(const ce of n.hand.values()){const le=u.getJointPose(ce,p),de=this._getHandJoint(D,ce);le!==null&&(de.matrix.fromArray(le.transform.matrix),de.matrix.decompose(de.position,de.rotation,de.scale),de.matrixWorldNeedsUpdate=!0,de.jointRadius=le.radius),de.visible=le!==null}const L=D.joints["index-finger-tip"],Y=D.joints["thumb-tip"],j=L.position.distanceTo(Y.position),te=.02,re=.005;D.inputState.pinching&&j>te+re?(D.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:n.handedness,target:this})):!D.inputState.pinching&&j<=te-re&&(D.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:n.handedness,target:this}))}else I!==null&&n.gripSpace&&(v=u.getPose(n.gripSpace,p),v!==null&&(I.matrix.fromArray(v.transform.matrix),I.matrix.decompose(I.position,I.rotation,I.scale),I.matrixWorldNeedsUpdate=!0,v.linearVelocity?(I.hasLinearVelocity=!0,I.linearVelocity.copy(v.linearVelocity)):I.hasLinearVelocity=!1,v.angularVelocity?(I.hasAngularVelocity=!0,I.angularVelocity.copy(v.angularVelocity)):I.hasAngularVelocity=!1));S!==null&&(m=u.getPose(n.targetRaySpace,p),m===null&&v!==null&&(m=v),m!==null&&(S.matrix.fromArray(m.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.matrixWorldNeedsUpdate=!0,m.linearVelocity?(S.hasLinearVelocity=!0,S.linearVelocity.copy(m.linearVelocity)):S.hasLinearVelocity=!1,m.angularVelocity?(S.hasAngularVelocity=!0,S.angularVelocity.copy(m.angularVelocity)):S.hasAngularVelocity=!1,this.dispatchEvent(hd)))}return S!==null&&(S.visible=m!==null),I!==null&&(I.visible=v!==null),D!==null&&(D.visible=w!==null),this}_getHandJoint(n,u){if(n.joints[u.jointName]===void 0){const p=new Y0;p.matrixAutoUpdate=!1,p.visible=!1,n.joints[u.jointName]=p,n.add(p)}return n.joints[u.jointName]}}class ud{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(n,u,p){if(this.texture===null){const m=new on;n.properties.get(m).__webglTexture=u.texture,u.depthNear==p.depthNear&&u.depthFar==p.depthFar||(this.depthNear=u.depthNear,this.depthFar=u.depthFar),this.texture=m}}render(n,u){if(this.texture!==null){if(this.mesh===null){const p=u.cameras[0].viewport,m=new Q0({vertexShader:`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,fragmentShader:`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,uniforms:{depthColor:{value:this.texture},depthWidth:{value:p.z},depthHeight:{value:p.w}}});this.mesh=new cn(new ca(20,20),m)}n.render(this.mesh,u)}}reset(){this.texture=null,this.mesh=null}}class dd extends P0{constructor(n,u,p,m){super();const v=this;let w=null,S=1;var I=null;let D=null,L="local-floor",Y=1,j=null,te=null;var re=[];let ce=null,le=null,de=null,pe=null;const me=new ud,we=u.getContextAttributes();let Fe=null,Be=null;const ke=[],ze=[],tt=new zt;let rt=null;const $e=new Rn;$e.layers.enable(1),$e.viewport=new Rr;const ht=new Rn;ht.layers.enable(2),ht.viewport=new Rr;const ut=[$e,ht],at=new ic;at.layers.enable(1),at.layers.enable(2);let Dt=null,It=null;function Ot(wt){const jt=ze.indexOf(wt.inputSource);if(jt===-1)return;const mi=ke[jt];mi!==void 0&&(mi.update(wt.inputSource,wt.frame,j||D),mi.dispatchEvent({type:wt.type,data:wt.inputSource}))}function Tt(){w.removeEventListener("select",Ot),w.removeEventListener("selectstart",Ot),w.removeEventListener("selectend",Ot),w.removeEventListener("squeeze",Ot),w.removeEventListener("squeezestart",Ot),w.removeEventListener("squeezeend",Ot),w.removeEventListener("end",Tt),w.removeEventListener("inputsourceschange",Ai);for(let wt=0;wt<ke.length;wt++){const jt=ze[wt];jt!==null&&(ze[wt]=null,ke[wt].disconnect(jt))}Dt=null,It=null,me.reset(),n.setRenderTarget(Fe),de=null,le=null,ce=null,w=null,Be=null,fi.stop(),v.isPresenting=!1,n.setPixelRatio(rt),n.setSize(tt.width,tt.height,!1),v.dispatchEvent({type:"sessionend"})}function Ai(wt){for(let jt=0;jt<wt.removed.length;jt++){const mi=wt.removed[jt],ei=ze.indexOf(mi);ei>=0&&(ze[ei]=null,ke[ei].disconnect(mi))}for(let jt=0;jt<wt.added.length;jt++){const mi=wt.added[jt];let ei=ze.indexOf(mi);if(ei===-1){for(let Se=0;Se<ke.length;Se++){if(Se>=ze.length){ze.push(mi),ei=Se;break}if(ze[Se]===null){ze[Se]=mi,ei=Se;break}}if(ei===-1)break}const Pe=ke[ei];Pe&&Pe.connect(mi)}}this.cameraAutoUpdate=!0,this.layersEnabled=!1,this.enabled=!1,this.isPresenting=!1,this.isMultiview=!1,this.getCameraPose=function(){return te},this.getController=function(wt){let jt=ke[wt];return jt===void 0&&(jt=new rc,ke[wt]=jt),jt.getTargetRaySpace()},this.getControllerGrip=function(wt){let jt=ke[wt];return jt===void 0&&(jt=new rc,ke[wt]=jt),jt.getGripSpace()},this.getHand=function(wt){let jt=ke[wt];return jt===void 0&&(jt=new rc,ke[wt]=jt),jt.getHandSpace()},this.setFramebufferScaleFactor=function(wt){S=wt,v.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(wt){L=wt,v.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return j||D},this.setReferenceSpace=function(wt){j=wt},this.getBaseLayer=function(){return le!==null?le:de},this.getBinding=function(){return ce},this.getFrame=function(){return pe},this.getSession=function(){return w},this.setSession=async function(wt){if(w=wt,w!==null){if(Fe=n.getRenderTarget(),w.addEventListener("select",Ot),w.addEventListener("selectstart",Ot),w.addEventListener("selectend",Ot),w.addEventListener("squeeze",Ot),w.addEventListener("squeezestart",Ot),w.addEventListener("squeezeend",Ot),w.addEventListener("end",Tt),w.addEventListener("inputsourceschange",Ai),we.xrCompatible!==!0&&await u.makeXRCompatible(),rt=n.getPixelRatio(),n.getSize(tt),w.renderState.layers===void 0){const jt={antialias:we.antialias,alpha:!0,depth:we.depth,stencil:we.stencil,framebufferScaleFactor:S};de=new XRWebGLLayer(w,u,jt),w.updateRenderState({baseLayer:de}),n.setPixelRatio(1),n.setSize(de.framebufferWidth,de.framebufferHeight,!1),Be=new Wn(de.framebufferWidth,de.framebufferHeight,{format:ir,type:Di,colorSpace:n.outputColorSpace,stencilBuffer:we.stencil})}else{let jt=null,mi=null,ei=null;we.depth&&(ei=we.stencil?u.DEPTH24_STENCIL8:u.DEPTH_COMPONENT24,jt=we.stencil?r0:zr,mi=we.stencil?Hr:Li),v.isMultiview=m&&p.has("OCULUS_multiview");const Pe={colorFormat:u.RGBA8,depthFormat:ei,scaleFactor:S};v.isMultiview&&(Pe.textureType="texture-array"),ce=new XRWebGLBinding(w,u),le=ce.createProjectionLayer(Pe),w.updateRenderState({layers:[le]}),n.setPixelRatio(1),n.setSize(le.textureWidth,le.textureHeight,!1);const Se={format:ir,type:Di,depthTexture:new Yl(le.textureWidth,le.textureHeight,mi,void 0,void 0,void 0,void 0,void 0,void 0,jt),stencilBuffer:we.stencil,colorSpace:n.outputColorSpace,samples:we.antialias?4:0,resolveDepthBuffer:le.ignoreDepthValues===!1};if(v.isMultiview){const xe=p.get("OCULUS_multiview");this.maxNumViews=u.getParameter(xe.MAX_VIEWS_OVR),Be=new Ph(le.textureWidth,le.textureHeight,2,Se)}else Be=new Wn(le.textureWidth,le.textureHeight,Se)}Be.isXRRenderTarget=!0,this.setFoveation(Y),j=null,D=await w.requestReferenceSpace(L),fi.setContext(w),fi.start(),v.isPresenting=!0,v.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(w!==null)return w.environmentBlendMode},this.addLayer=function(wt){window.XRWebGLBinding&&this.layersEnabled&&w&&(re.push(wt),this.updateLayers())},this.removeLayer=function(wt){re.splice(re.indexOf(wt),1),window.XRWebGLBinding&&this.layersEnabled&&w&&this.updateLayers()},this.updateLayers=function(){var wt=re.map(function(jt){return jt});wt.unshift(w.renderState.layers[0]),w.updateRenderState({layers:wt})};const yi=new Le,ni=new Le;function ai(wt,jt){jt===null?wt.matrixWorld.copy(wt.matrix):wt.matrixWorld.multiplyMatrices(jt.matrixWorld,wt.matrix),wt.matrixWorldInverse.copy(wt.matrixWorld).invert()}this.setPoseTarget=function(wt){wt!==void 0&&(I=wt)},this.updateCamera=function(wt){if(w===null)return;me.texture!==null&&(wt.near=me.depthNear,wt.far=me.depthFar),at.near=ht.near=$e.near=wt.near,at.far=ht.far=$e.far=wt.far,Dt===at.near&&It===at.far||(w.updateRenderState({depthNear:at.near,depthFar:at.far}),Dt=at.near,It=at.far,$e.near=Dt,$e.far=It,ht.near=Dt,ht.far=It,$e.updateProjectionMatrix(),ht.updateProjectionMatrix(),wt.updateProjectionMatrix());const jt=at.cameras;var mi=I||wt;const ei=mi.parent;ai(at,ei);for(let Pe=0;Pe<jt.length;Pe++)ai(jt[Pe],ei);jt.length===2?function(Pe,Se,xe){yi.setFromMatrixPosition(Se.matrixWorld),ni.setFromMatrixPosition(xe.matrixWorld);const je=yi.distanceTo(ni),Ne=Se.projectionMatrix.elements,it=xe.projectionMatrix.elements,ct=Ne[14]/(Ne[10]-1),At=Ne[14]/(Ne[10]+1),Vt=(Ne[9]+1)/Ne[5],gi=(Ne[9]-1)/Ne[5],oi=(Ne[8]-1)/Ne[0],Ci=(it[8]+1)/it[0],Qi=ct*oi,xi=ct*Ci,Ni=je/(-oi+Ci),Cr=Ni*-oi;Se.matrixWorld.decompose(Pe.position,Pe.quaternion,Pe.scale),Pe.translateX(Cr),Pe.translateZ(Ni),Pe.matrixWorld.compose(Pe.position,Pe.quaternion,Pe.scale),Pe.matrixWorldInverse.copy(Pe.matrixWorld).invert();const sr=ct+Ni,or=At+Ni,xr=Qi-Cr,Jr=xi+(je-Cr),Oi=Vt*At/or*sr,fn=gi*At/or*sr;Pe.projectionMatrix.makePerspective(xr,Jr,Oi,fn,sr,or),Pe.projectionMatrixInverse.copy(Pe.projectionMatrix).invert()}(at,$e,ht):at.projectionMatrix.copy($e.projectionMatrix),function(Pe,Se,xe){Se.matrixWorld.decompose(Se.position,Se.quaternion,Se.scale),xe.parent===null?xe.matrix.copy(Se.matrixWorld):(xe.matrix.copy(xe.parent.matrixWorld),xe.matrix.invert(),xe.matrix.multiply(Se.matrixWorld)),xe.matrix.decompose(xe.position,xe.quaternion,xe.scale),xe.updateMatrixWorld(!0),Pe.projectionMatrix.copy(Se.projectionMatrix),Pe.projectionMatrixInverse.copy(Se.projectionMatrixInverse),Pe.isPerspectiveCamera&&(Pe.fov=2*Ko*Math.atan(1/Pe.projectionMatrix.elements[5]),Pe.zoom=1)}(wt,at,mi)},this.getCamera=function(){return at},this.getFoveation=function(){if(le!==null||de!==null)return Y},this.setFoveation=function(wt){Y=wt,le!==null&&(le.fixedFoveation=wt),de!==null&&de.fixedFoveation!==void 0&&(de.fixedFoveation=wt)},this.hasDepthSensing=function(){return me.texture!==null};let hi=null;const fi=new Hl;fi.setAnimationLoop(function(wt,jt){if(te=jt.getViewerPose(j||D),pe=jt,te!==null){const mi=te.views;de!==null&&(n.setRenderTargetFramebuffer(Be,de.framebuffer),n.setRenderTarget(Be));let ei=!1;mi.length!==at.cameras.length&&(at.cameras.length=0,ei=!0);for(let Se=0;Se<mi.length;Se++){const xe=mi[Se];let je=null;if(de!==null)je=de.getViewport(xe);else{const it=ce.getViewSubImage(le,xe);je=it.viewport,Se===0&&(n.setRenderTargetTextures(Be,it.colorTexture,le.ignoreDepthValues?void 0:it.depthStencilTexture),n.setRenderTarget(Be))}let Ne=ut[Se];Ne===void 0&&(Ne=new Rn,Ne.layers.enable(Se),Ne.viewport=new Rr,ut[Se]=Ne),Ne.matrix.fromArray(xe.transform.matrix),Ne.matrix.decompose(Ne.position,Ne.quaternion,Ne.scale),Ne.projectionMatrix.fromArray(xe.projectionMatrix),Ne.projectionMatrixInverse.copy(Ne.projectionMatrix).invert(),Ne.viewport.set(je.x,je.y,je.width,je.height),Se===0&&(at.matrix.copy(Ne.matrix),at.matrix.decompose(at.position,at.quaternion,at.scale)),ei===!0&&at.cameras.push(Ne)}const Pe=w.enabledFeatures;if(Pe&&Pe.includes("depth-sensing")){const Se=ce.getDepthInformation(mi[0]);Se&&Se.isValid&&Se.texture&&me.init(n,Se,w.renderState)}}for(let mi=0;mi<ke.length;mi++){const ei=ze[mi],Pe=ke[mi];ei!==null&&Pe!==void 0&&Pe.update(ei,jt,j||D)}me.render(n,at),hi&&hi(wt,jt),jt.detectedPlanes&&v.dispatchEvent({type:"planesdetected",data:jt}),pe=null}),this.setAnimationLoop=function(wt){hi=wt},this.dispose=function(){}}}const ys=new k0,fd=new Ii;function pd(b,n){function u(m,v){m.matrixAutoUpdate===!0&&m.updateMatrix(),v.value.copy(m.matrix)}function p(m,v){m.opacity.value=v.opacity,v.color&&m.diffuse.value.copy(v.color),v.emissive&&m.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(m.map.value=v.map,u(v.map,m.mapTransform)),v.alphaMap&&(m.alphaMap.value=v.alphaMap,u(v.alphaMap,m.alphaMapTransform)),v.bumpMap&&(m.bumpMap.value=v.bumpMap,u(v.bumpMap,m.bumpMapTransform),m.bumpScale.value=v.bumpScale,v.side===ee&&(m.bumpScale.value*=-1)),v.normalMap&&(m.normalMap.value=v.normalMap,u(v.normalMap,m.normalMapTransform),m.normalScale.value.copy(v.normalScale),v.side===ee&&m.normalScale.value.negate()),v.displacementMap&&(m.displacementMap.value=v.displacementMap,u(v.displacementMap,m.displacementMapTransform),m.displacementScale.value=v.displacementScale,m.displacementBias.value=v.displacementBias),v.emissiveMap&&(m.emissiveMap.value=v.emissiveMap,u(v.emissiveMap,m.emissiveMapTransform)),v.specularMap&&(m.specularMap.value=v.specularMap,u(v.specularMap,m.specularMapTransform)),v.alphaTest>0&&(m.alphaTest.value=v.alphaTest);const w=n.get(v),S=w.envMap,I=w.envMapRotation;if(S&&(m.envMap.value=S,ys.copy(I),ys.x*=-1,ys.y*=-1,ys.z*=-1,S.isCubeTexture&&S.isRenderTargetTexture===!1&&(ys.y*=-1,ys.z*=-1),m.envMapRotation.value.setFromMatrix4(fd.makeRotationFromEuler(ys)),m.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=v.reflectivity,m.ior.value=v.ior,m.refractionRatio.value=v.refractionRatio),v.lightMap){m.lightMap.value=v.lightMap;const D=b._useLegacyLights===!0?Math.PI:1;m.lightMapIntensity.value=v.lightMapIntensity*D,u(v.lightMap,m.lightMapTransform)}v.aoMap&&(m.aoMap.value=v.aoMap,m.aoMapIntensity.value=v.aoMapIntensity,u(v.aoMap,m.aoMapTransform))}return{refreshFogUniforms:function(m,v){v.color.getRGB(m.fogColor.value,$c(b)),v.isFog?(m.fogNear.value=v.near,m.fogFar.value=v.far):v.isFogExp2&&(m.fogDensity.value=v.density)},refreshMaterialUniforms:function(m,v,w,S,I){v.isMeshBasicMaterial||v.isMeshLambertMaterial?p(m,v):v.isMeshToonMaterial?(p(m,v),function(D,L){L.gradientMap&&(D.gradientMap.value=L.gradientMap)}(m,v)):v.isMeshPhongMaterial?(p(m,v),function(D,L){D.specular.value.copy(L.specular),D.shininess.value=Math.max(L.shininess,1e-4)}(m,v)):v.isMeshStandardMaterial?(p(m,v),function(D,L){D.metalness.value=L.metalness,L.metalnessMap&&(D.metalnessMap.value=L.metalnessMap,u(L.metalnessMap,D.metalnessMapTransform)),D.roughness.value=L.roughness,L.roughnessMap&&(D.roughnessMap.value=L.roughnessMap,u(L.roughnessMap,D.roughnessMapTransform)),L.envMap&&(D.envMapIntensity.value=L.envMapIntensity)}(m,v),v.isMeshPhysicalMaterial&&function(D,L,Y){D.ior.value=L.ior,L.sheen>0&&(D.sheenColor.value.copy(L.sheenColor).multiplyScalar(L.sheen),D.sheenRoughness.value=L.sheenRoughness,L.sheenColorMap&&(D.sheenColorMap.value=L.sheenColorMap,u(L.sheenColorMap,D.sheenColorMapTransform)),L.sheenRoughnessMap&&(D.sheenRoughnessMap.value=L.sheenRoughnessMap,u(L.sheenRoughnessMap,D.sheenRoughnessMapTransform))),L.clearcoat>0&&(D.clearcoat.value=L.clearcoat,D.clearcoatRoughness.value=L.clearcoatRoughness,L.clearcoatMap&&(D.clearcoatMap.value=L.clearcoatMap,u(L.clearcoatMap,D.clearcoatMapTransform)),L.clearcoatRoughnessMap&&(D.clearcoatRoughnessMap.value=L.clearcoatRoughnessMap,u(L.clearcoatRoughnessMap,D.clearcoatRoughnessMapTransform)),L.clearcoatNormalMap&&(D.clearcoatNormalMap.value=L.clearcoatNormalMap,u(L.clearcoatNormalMap,D.clearcoatNormalMapTransform),D.clearcoatNormalScale.value.copy(L.clearcoatNormalScale),L.side===ee&&D.clearcoatNormalScale.value.negate())),L.dispersion>0&&(D.dispersion.value=L.dispersion),L.iridescence>0&&(D.iridescence.value=L.iridescence,D.iridescenceIOR.value=L.iridescenceIOR,D.iridescenceThicknessMinimum.value=L.iridescenceThicknessRange[0],D.iridescenceThicknessMaximum.value=L.iridescenceThicknessRange[1],L.iridescenceMap&&(D.iridescenceMap.value=L.iridescenceMap,u(L.iridescenceMap,D.iridescenceMapTransform)),L.iridescenceThicknessMap&&(D.iridescenceThicknessMap.value=L.iridescenceThicknessMap,u(L.iridescenceThicknessMap,D.iridescenceThicknessMapTransform))),L.transmission>0&&(D.transmission.value=L.transmission,D.transmissionSamplerMap.value=Y.texture,D.transmissionSamplerSize.value.set(Y.width,Y.height),L.transmissionMap&&(D.transmissionMap.value=L.transmissionMap,u(L.transmissionMap,D.transmissionMapTransform)),D.thickness.value=L.thickness,L.thicknessMap&&(D.thicknessMap.value=L.thicknessMap,u(L.thicknessMap,D.thicknessMapTransform)),D.attenuationDistance.value=L.attenuationDistance,D.attenuationColor.value.copy(L.attenuationColor)),L.anisotropy>0&&(D.anisotropyVector.value.set(L.anisotropy*Math.cos(L.anisotropyRotation),L.anisotropy*Math.sin(L.anisotropyRotation)),L.anisotropyMap&&(D.anisotropyMap.value=L.anisotropyMap,u(L.anisotropyMap,D.anisotropyMapTransform))),D.specularIntensity.value=L.specularIntensity,D.specularColor.value.copy(L.specularColor),L.specularColorMap&&(D.specularColorMap.value=L.specularColorMap,u(L.specularColorMap,D.specularColorMapTransform)),L.specularIntensityMap&&(D.specularIntensityMap.value=L.specularIntensityMap,u(L.specularIntensityMap,D.specularIntensityMapTransform))}(m,v,I)):v.isMeshMatcapMaterial?(p(m,v),function(D,L){L.matcap&&(D.matcap.value=L.matcap)}(m,v)):v.isMeshDepthMaterial?p(m,v):v.isMeshDistanceMaterial?(p(m,v),function(D,L){const Y=n.get(L).light;D.referencePosition.value.setFromMatrixPosition(Y.matrixWorld),D.nearDistance.value=Y.shadow.camera.near,D.farDistance.value=Y.shadow.camera.far}(m,v)):v.isMeshNormalMaterial?p(m,v):v.isLineBasicMaterial?(function(D,L){D.diffuse.value.copy(L.color),D.opacity.value=L.opacity,L.map&&(D.map.value=L.map,u(L.map,D.mapTransform))}(m,v),v.isLineDashedMaterial&&function(D,L){D.dashSize.value=L.dashSize,D.totalSize.value=L.dashSize+L.gapSize,D.scale.value=L.scale}(m,v)):v.isPointsMaterial?function(D,L,Y,j){D.diffuse.value.copy(L.color),D.opacity.value=L.opacity,D.size.value=L.size*Y,D.scale.value=.5*j,L.map&&(D.map.value=L.map,u(L.map,D.uvTransform)),L.alphaMap&&(D.alphaMap.value=L.alphaMap,u(L.alphaMap,D.alphaMapTransform)),L.alphaTest>0&&(D.alphaTest.value=L.alphaTest)}(m,v,w,S):v.isSpriteMaterial?function(D,L){D.diffuse.value.copy(L.color),D.opacity.value=L.opacity,D.rotation.value=L.rotation,L.map&&(D.map.value=L.map,u(L.map,D.mapTransform)),L.alphaMap&&(D.alphaMap.value=L.alphaMap,u(L.alphaMap,D.alphaMapTransform)),L.alphaTest>0&&(D.alphaTest.value=L.alphaTest)}(m,v):v.isShadowMaterial?(m.color.value.copy(v.color),m.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}}}function Ad(b,n,u,p){let m={},v={},w=[];const S=b.getParameter(b.MAX_UNIFORM_BUFFER_BINDINGS);function I(Y,j,te,re){const ce=Y.value,le=j+"_"+te;if(re[le]===void 0)return re[le]=typeof ce=="number"||typeof ce=="boolean"?ce:ce.clone(),!0;{const de=re[le];if(typeof ce=="number"||typeof ce=="boolean"){if(de!==ce)return re[le]=ce,!0}else if(de.equals(ce)===!1)return de.copy(ce),!0}return!1}function D(Y){const j={boundary:0,storage:0};return typeof Y=="number"||typeof Y=="boolean"?(j.boundary=4,j.storage=4):Y.isVector2?(j.boundary=8,j.storage=8):Y.isVector3||Y.isColor?(j.boundary=16,j.storage=12):Y.isVector4?(j.boundary=16,j.storage=16):Y.isMatrix3?(j.boundary=48,j.storage=48):Y.isMatrix4?(j.boundary=64,j.storage=64):Y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",Y),j}function L(Y){const j=Y.target;j.removeEventListener("dispose",L);const te=w.indexOf(j.__bindingPointIndex);w.splice(te,1),b.deleteBuffer(m[j.id]),delete m[j.id],delete v[j.id]}return{bind:function(Y,j){const te=j.program;p.uniformBlockBinding(Y,te)},update:function(Y,j){let te=m[Y.id];te===void 0&&(function(le){const de=le.uniforms;let pe=0;for(let we=0,Fe=de.length;we<Fe;we++){const Be=Array.isArray(de[we])?de[we]:[de[we]];for(let ke=0,ze=Be.length;ke<ze;ke++){const tt=Be[ke],rt=Array.isArray(tt.value)?tt.value:[tt.value];for(let $e=0,ht=rt.length;$e<ht;$e++){const ut=D(rt[$e]),at=pe%16;at!==0&&16-at<ut.boundary&&(pe+=16-at),tt.__data=new Float32Array(ut.storage/Float32Array.BYTES_PER_ELEMENT),tt.__offset=pe,pe+=ut.storage}}}const me=pe%16;me>0&&(pe+=16-me),le.__size=pe,le.__cache={}}(Y),te=function(le){const de=function(){for(let Fe=0;Fe<S;Fe++)if(w.indexOf(Fe)===-1)return w.push(Fe),Fe;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();le.__bindingPointIndex=de;const pe=b.createBuffer(),me=le.__size,we=le.usage;return b.bindBuffer(b.UNIFORM_BUFFER,pe),b.bufferData(b.UNIFORM_BUFFER,me,we),b.bindBuffer(b.UNIFORM_BUFFER,null),b.bindBufferBase(b.UNIFORM_BUFFER,de,pe),pe}(Y),m[Y.id]=te,Y.addEventListener("dispose",L));const re=j.program;p.updateUBOMapping(Y,re);const ce=n.render.frame;v[Y.id]!==ce&&(function(le){const de=m[le.id],pe=le.uniforms,me=le.__cache;b.bindBuffer(b.UNIFORM_BUFFER,de);for(let we=0,Fe=pe.length;we<Fe;we++){const Be=Array.isArray(pe[we])?pe[we]:[pe[we]];for(let ke=0,ze=Be.length;ke<ze;ke++){const tt=Be[ke];if(I(tt,we,ke,me)===!0){const rt=tt.__offset,$e=Array.isArray(tt.value)?tt.value:[tt.value];let ht=0;for(let ut=0;ut<$e.length;ut++){const at=$e[ut],Dt=D(at);typeof at=="number"||typeof at=="boolean"?(tt.__data[0]=at,b.bufferSubData(b.UNIFORM_BUFFER,rt+ht,tt.__data)):at.isMatrix3?(tt.__data[0]=at.elements[0],tt.__data[1]=at.elements[1],tt.__data[2]=at.elements[2],tt.__data[3]=0,tt.__data[4]=at.elements[3],tt.__data[5]=at.elements[4],tt.__data[6]=at.elements[5],tt.__data[7]=0,tt.__data[8]=at.elements[6],tt.__data[9]=at.elements[7],tt.__data[10]=at.elements[8],tt.__data[11]=0):(at.toArray(tt.__data,ht),ht+=Dt.storage/Float32Array.BYTES_PER_ELEMENT)}b.bufferSubData(b.UNIFORM_BUFFER,rt,tt.__data)}}}b.bindBuffer(b.UNIFORM_BUFFER,null)}(Y),v[Y.id]=ce)},dispose:function(){for(const Y in m)b.deleteBuffer(m[Y]);w=[],m={},v={}}}}class md{constructor(n={}){const{canvas:u=Pc(),context:p=null,depth:m=!0,stencil:v=!1,alpha:w=!1,antialias:S=!1,premultipliedAlpha:I=!0,preserveDrawingBuffer:D=!1,powerPreference:L="default",failIfMajorPerformanceCaveat:Y=!1,multiviewStereo:j=!1}=n;let te;if(this.isWebGLRenderer=!0,p!==null){if(typeof WebGLRenderingContext<"u"&&p instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");te=p.getContextAttributes().alpha}else te=w;const re=new Uint32Array(4),ce=new Int32Array(4);let le=null,de=null;const pe=[],me=[];this.domElement=u,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=An,this._useLegacyLights=!1,this.toneMapping=_e,this.toneMappingExposure=1;const we=this;let Fe=!1,Be=0,ke=0,ze=null,tt=-1,rt=null;const $e=new Rr,ht=new Rr;let ut=null;const at=new Jt(0);let Dt=0,It=u.width,Ot=u.height,Tt=1,Ai=null,yi=null;const ni=new Rr(0,0,It,Ot),ai=new Rr(0,0,It,Ot);let hi=!1;const fi=new r1;let wt=!1,jt=!1;const mi=new Ii,ei=new Le,Pe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Se(){return ze===null?Tt:1}let xe,je,Ne,it,ct,At,Vt,gi,oi,Ci,Qi,xi,Ni,Cr,sr,or,xr,Jr,Oi,fn,t0,Ba,Ui,Zr,$r,Lt=p;function bc(Ve,bt){return u.getContext(Ve,bt)}try{const Ve={alpha:!0,depth:m,stencil:v,antialias:S,premultipliedAlpha:I,preserveDrawingBuffer:D,powerPreference:L,failIfMajorPerformanceCaveat:Y};if("setAttribute"in u&&u.setAttribute("data-engine",`three.js r${Q}`),u.addEventListener("webglcontextlost",Bp,!1),u.addEventListener("webglcontextrestored",Dp,!1),u.addEventListener("webglcontextcreationerror",Lp,!1),Lt===null){const bt="webgl2";if(Lt=bc(bt,Ve),Lt===null)throw bc(bt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Ve){throw console.error("THREE.WebGLRenderer: "+Ve.message),Ve}function I1(){xe=new o1(Lt),xe.init(),Ui=new tc(Lt,xe),je=new n2(Lt,xe,n,Ui),Ne=new cd(Lt),it=new c2(Lt),ct=new ed,At=new Rh(Lt,xe,Ne,ct,je,Ui,it),Vt=new s2(we),gi=new o2(we),oi=new r2(Lt),Zr=new zl(Lt,oi),Ci=new a2(Lt,oi,it,Zr),Qi=new u2(Lt,Ci,oi,it),fn=new sh(Lt,je,At),or=new Gl(ct),xi=new j2(we,Vt,gi,xe,je,Zr,or),Ni=new pd(we,ct),Cr=new id,sr=new ad(xe),Oi=new eh(we,Vt,gi,Ne,Qi,te,I),Jr=new h2(we,xe,Lt),xr=new ld(we,Qi,je),$r=new Ad(Lt,it,je,Ne),t0=new ha(Lt,xe,it),Ba=new l2(Lt,xe,it),it.programs=xi.programs,we.capabilities=je,we.extensions=xe,we.properties=ct,we.renderLists=Cr,we.shadowMap=xr,we.state=Ne,we.info=it}I1();const En=typeof navigator<"u"&&"xr"in navigator?new dd(we,Lt,xe,j):new Lh(we);function Bp(Ve){Ve.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Fe=!0}function Dp(){console.log("THREE.WebGLRenderer: Context Restored."),Fe=!1;const Ve=it.autoReset,bt=xr.enabled,Pt=xr.autoUpdate,qt=xr.needsUpdate,Nt=xr.type;I1(),it.autoReset=Ve,xr.enabled=bt,xr.autoUpdate=Pt,xr.needsUpdate=qt,xr.type=Nt}function Lp(Ve){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ve.statusMessage)}function Pp(Ve){const bt=Ve.target;bt.removeEventListener("dispose",Pp),function(Pt){(function(qt){const Nt=ct.get(qt).programs;Nt!==void 0&&(Nt.forEach(function(pi){xi.releaseProgram(pi)}),qt.isShaderMaterial&&xi.releaseShaderCache(qt))})(Pt),ct.remove(Pt)}(bt)}function Fp(Ve,bt,Pt){Ve.transparent===!0&&Ve.side===he&&Ve.forceSinglePass===!1?(Ve.side=ee,Ve.needsUpdate=!0,yu(Ve,bt,Pt),Ve.side=Z,Ve.needsUpdate=!0,yu(Ve,bt,Pt),Ve.side=he):yu(Ve,bt,Pt)}this.xr=En,this.getContext=function(){return Lt},this.getContextAttributes=function(){return Lt.getContextAttributes()},this.forceContextLoss=function(){const Ve=xe.get("WEBGL_lose_context");Ve&&Ve.loseContext()},this.forceContextRestore=function(){const Ve=xe.get("WEBGL_lose_context");Ve&&Ve.restoreContext()},this.getPixelRatio=function(){return Tt},this.setPixelRatio=function(Ve){Ve!==void 0&&(Tt=Ve,this.setSize(It,Ot,!1))},this.getSize=function(Ve){return Ve.set(It,Ot)},this.setSize=function(Ve,bt,Pt=!0){En.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(It=Ve,Ot=bt,u.width=Math.floor(Ve*Tt),u.height=Math.floor(bt*Tt),Pt===!0&&(u.style.width=Ve+"px",u.style.height=bt+"px"),this.setViewport(0,0,Ve,bt))},this.getDrawingBufferSize=function(Ve){return Ve.set(It*Tt,Ot*Tt).floor()},this.setDrawingBufferSize=function(Ve,bt,Pt){It=Ve,Ot=bt,Tt=Pt,u.width=Math.floor(Ve*Pt),u.height=Math.floor(bt*Pt),this.setViewport(0,0,Ve,bt)},this.getCurrentViewport=function(Ve){return Ve.copy($e)},this.getViewport=function(Ve){return Ve.copy(ni)},this.setViewport=function(Ve,bt,Pt,qt){Ve.isVector4?ni.set(Ve.x,Ve.y,Ve.z,Ve.w):ni.set(Ve,bt,Pt,qt),Ne.viewport($e.copy(ni).multiplyScalar(Tt).round())},this.getScissor=function(Ve){return Ve.copy(ai)},this.setScissor=function(Ve,bt,Pt,qt){Ve.isVector4?ai.set(Ve.x,Ve.y,Ve.z,Ve.w):ai.set(Ve,bt,Pt,qt),Ne.scissor(ht.copy(ai).multiplyScalar(Tt).round())},this.getScissorTest=function(){return hi},this.setScissorTest=function(Ve){Ne.setScissorTest(hi=Ve)},this.setOpaqueSort=function(Ve){Ai=Ve},this.setTransparentSort=function(Ve){yi=Ve},this.getClearColor=function(Ve){return Ve.copy(Oi.getClearColor())},this.setClearColor=function(){Oi.setClearColor.apply(Oi,arguments)},this.getClearAlpha=function(){return Oi.getClearAlpha()},this.setClearAlpha=function(){Oi.setClearAlpha.apply(Oi,arguments)},this.clear=function(Ve=!0,bt=!0,Pt=!0){let qt=0;if(Ve){let Nt=!1;if(ze!==null){const pi=ze.texture.format;Nt=pi===Vn||pi===x0||pi===D0}if(Nt){const pi=ze.texture.type,Gi=pi===Di||pi===Li||pi===Vi||pi===Hr||pi===Qr||pi===ki,Hi=Oi.getClearColor(),pr=Oi.getClearAlpha(),br=Hi.r,kr=Hi.g,Lr=Hi.b;Gi?(re[0]=br,re[1]=kr,re[2]=Lr,re[3]=pr,Lt.clearBufferuiv(Lt.COLOR,0,re)):(ce[0]=br,ce[1]=kr,ce[2]=Lr,ce[3]=pr,Lt.clearBufferiv(Lt.COLOR,0,ce))}else qt|=Lt.COLOR_BUFFER_BIT}bt&&(qt|=Lt.DEPTH_BUFFER_BIT),Pt&&(qt|=Lt.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Lt.clear(qt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){u.removeEventListener("webglcontextlost",Bp,!1),u.removeEventListener("webglcontextrestored",Dp,!1),u.removeEventListener("webglcontextcreationerror",Lp,!1),Cr.dispose(),sr.dispose(),ct.dispose(),Vt.dispose(),gi.dispose(),Qi.dispose(),Zr.dispose(),$r.dispose(),xi.dispose(),En.dispose(),En.removeEventListener("sessionstart",Op),En.removeEventListener("sessionend",kp),R1.stop()},this.renderBufferDirect=function(Ve,bt,Pt,qt,Nt,pi){bt===null&&(bt=Pe);const Gi=Nt.isMesh&&Nt.matrixWorld.determinant()<0,Hi=function(Sn,qo,Vs,Mr,Wr){qo.isScene!==!0&&(qo=Pe),At.resetTextureUnits();const uf=qo.fog,qm=Mr.isMeshStandardMaterial?qo.environment:null,Xm=ze===null?we.outputColorSpace:ze.isXRRenderTarget===!0?ze.texture.colorSpace:Cn,wu=(Mr.isMeshStandardMaterial?gi:Vt).get(Mr.envMap||qm),Ym=Mr.vertexColors===!0&&!!Vs.attributes.color&&Vs.attributes.color.itemSize===4,Km=!!Vs.attributes.tangent&&(!!Mr.normalMap||Mr.anisotropy>0),Jm=!!Vs.morphAttributes.position,Zm=!!Vs.morphAttributes.normal,$m=!!Vs.morphAttributes.color;let Gp=_e;Mr.toneMapped&&(ze!==null&&ze.isXRRenderTarget!==!0||(Gp=we.toneMapping));const jm=ze&&ze.isWebGLMultiviewRenderTarget?ze.numViews:0,Vp=Vs.morphAttributes.position||Vs.morphAttributes.normal||Vs.morphAttributes.color,e3=Vp!==void 0?Vp.length:0,Sr=ct.get(Mr),t3=de.state.lights;if(wt===!0&&(jt===!0||Sn!==rt)){const Ts=Sn===rt&&Mr.id===tt;or.setState(Mr,Sn,Ts)}let Ws=!1;Mr.version===Sr.__version?Sr.needsLights&&Sr.lightsStateVersion!==t3.state.version||Sr.outputColorSpace!==Xm||Wr.isBatchedMesh&&Sr.batching===!1?Ws=!0:Wr.isBatchedMesh||Sr.batching!==!0?Wr.isInstancedMesh&&Sr.instancing===!1?Ws=!0:Wr.isInstancedMesh||Sr.instancing!==!0?Wr.isSkinnedMesh&&Sr.skinning===!1?Ws=!0:Wr.isSkinnedMesh||Sr.skinning!==!0?Wr.isInstancedMesh&&Sr.instancingColor===!0&&Wr.instanceColor===null||Wr.isInstancedMesh&&Sr.instancingColor===!1&&Wr.instanceColor!==null||Wr.isInstancedMesh&&Sr.instancingMorph===!0&&Wr.morphTexture===null||Wr.isInstancedMesh&&Sr.instancingMorph===!1&&Wr.morphTexture!==null||Sr.envMap!==wu||Mr.fog===!0&&Sr.fog!==uf?Ws=!0:Sr.numClippingPlanes===void 0||Sr.numClippingPlanes===or.numPlanes&&Sr.numIntersection===or.numIntersection?(Sr.vertexAlphas!==Ym||Sr.vertexTangents!==Km||Sr.morphTargets!==Jm||Sr.morphNormals!==Zm||Sr.morphColors!==$m||Sr.toneMapping!==Gp||Sr.morphTargetsCount!==e3||Sr.numMultiviewViews!==jm)&&(Ws=!0):Ws=!0:Ws=!0:Ws=!0:Ws=!0:(Ws=!0,Sr.__version=Mr.version);let Xo=Sr.currentProgram;Ws===!0&&(Xo=yu(Mr,qo,Wr));let Wp=!1,Cc=!1,df=!1;const i0=Xo.getUniforms(),Da=Sr.uniforms;if(Ne.useProgram(Xo.program)&&(Wp=!0,Cc=!0,df=!0),Mr.id!==tt&&(tt=Mr.id,Cc=!0),Wp||rt!==Sn){Xo.numMultiviewViews>0?(Jr.updateCameraProjectionMatricesUniform(Sn,i0),Jr.updateCameraViewMatricesUniform(Sn,i0)):(i0.setValue(Lt,"projectionMatrix",Sn.projectionMatrix),i0.setValue(Lt,"viewMatrix",Sn.matrixWorldInverse));const Ts=i0.map.cameraPosition;Ts!==void 0&&Ts.setValue(Lt,ei.setFromMatrixPosition(Sn.matrixWorld)),je.logarithmicDepthBuffer&&i0.setValue(Lt,"logDepthBufFC",2/(Math.log(Sn.far+1)/Math.LN2)),(Mr.isMeshPhongMaterial||Mr.isMeshToonMaterial||Mr.isMeshLambertMaterial||Mr.isMeshBasicMaterial||Mr.isMeshStandardMaterial||Mr.isShaderMaterial)&&i0.setValue(Lt,"isOrthographic",Sn.isOrthographicCamera===!0),rt!==Sn&&(rt=Sn,Cc=!0,df=!0)}if(Wr.isSkinnedMesh){i0.setOptional(Lt,Wr,"bindMatrix"),i0.setOptional(Lt,Wr,"bindMatrixInverse");const Ts=Wr.skeleton;Ts&&(Ts.boneTexture===null&&Ts.computeBoneTexture(),i0.setValue(Lt,"boneTexture",Ts.boneTexture,At))}Wr.isBatchedMesh&&(i0.setOptional(Lt,Wr,"batchingTexture"),i0.setValue(Lt,"batchingTexture",Wr._matricesTexture,At));const ff=Vs.morphAttributes;var fo,qs;if(ff.position===void 0&&ff.normal===void 0&&ff.color===void 0||fn.update(Wr,Vs,Xo),(Cc||Sr.receiveShadow!==Wr.receiveShadow)&&(Sr.receiveShadow=Wr.receiveShadow,i0.setValue(Lt,"receiveShadow",Wr.receiveShadow)),Mr.isMeshGouraudMaterial&&Mr.envMap!==null&&(Da.envMap.value=wu,Da.flipEnvMap.value=wu.isCubeTexture&&wu.isRenderTargetTexture===!1?-1:1),Mr.isMeshStandardMaterial&&Mr.envMap===null&&qo.environment!==null&&(Da.envMapIntensity.value=qo.environmentIntensity),Cc&&(i0.setValue(Lt,"toneMappingExposure",we.toneMappingExposure),Sr.needsLights&&(qs=df,(fo=Da).ambientLightColor.needsUpdate=qs,fo.lightProbe.needsUpdate=qs,fo.directionalLights.needsUpdate=qs,fo.directionalLightShadows.needsUpdate=qs,fo.pointLights.needsUpdate=qs,fo.pointLightShadows.needsUpdate=qs,fo.spotLights.needsUpdate=qs,fo.spotLightShadows.needsUpdate=qs,fo.rectAreaLights.needsUpdate=qs,fo.hemisphereLights.needsUpdate=qs),uf&&Mr.fog===!0&&Ni.refreshFogUniforms(Da,uf),Ni.refreshMaterialUniforms(Da,Mr,Tt,Ot,de.state.transmissionRenderTarget[Sn.id]),tl.upload(Lt,Hp(Sr),Da,At)),Mr.isShaderMaterial&&Mr.uniformsNeedUpdate===!0&&(tl.upload(Lt,Hp(Sr),Da,At),Mr.uniformsNeedUpdate=!1),Mr.isSpriteMaterial&&i0.setValue(Lt,"center",Wr.center),Xo.numMultiviewViews>0?Jr.updateObjectMatricesUniforms(Wr,Sn,i0):(i0.setValue(Lt,"modelViewMatrix",Wr.modelViewMatrix),i0.setValue(Lt,"normalMatrix",Wr.normalMatrix)),i0.setValue(Lt,"modelMatrix",Wr.matrixWorld),Mr.isShaderMaterial||Mr.isRawShaderMaterial){const Ts=Mr.uniformsGroups;for(let pf=0,i3=Ts.length;pf<i3;pf++){const qp=Ts[pf];$r.update(qp,Xo),$r.bind(qp,Xo)}}return Xo}(Ve,bt,Pt,qt,Nt);Ne.setMaterial(qt,Gi);let pr=Pt.index,br=1;if(qt.wireframe===!0){if(pr=Ci.getWireframeAttribute(Pt),pr===void 0)return;br=2}const kr=Pt.drawRange,Lr=Pt.attributes.position;let pn=kr.start*br,Ms=(kr.start+kr.count)*br;pi!==null&&(pn=Math.max(pn,pi.start*br),Ms=Math.min(Ms,(pi.start+pi.count)*br)),pr!==null?(pn=Math.max(pn,0),Ms=Math.min(Ms,pr.count)):Lr!=null&&(pn=Math.max(pn,0),Ms=Math.min(Ms,Lr.count));const Wo=Ms-pn;if(Wo<0||Wo===1/0)return;let Ss;Zr.setup(Nt,qt,Hi,Pt,pr);let Ln=t0;if(pr!==null&&(Ss=oi.get(pr),Ln=Ba,Ln.setIndex(Ss)),Nt.isMesh)qt.wireframe===!0?(Ne.setLineWidth(qt.wireframeLinewidth*Se()),Ln.setMode(Lt.LINES)):Ln.setMode(Lt.TRIANGLES);else if(Nt.isLine){let Sn=qt.linewidth;Sn===void 0&&(Sn=1),Ne.setLineWidth(Sn*Se()),Nt.isLineSegments?Ln.setMode(Lt.LINES):Nt.isLineLoop?Ln.setMode(Lt.LINE_LOOP):Ln.setMode(Lt.LINE_STRIP)}else Nt.isPoints?Ln.setMode(Lt.POINTS):Nt.isSprite&&Ln.setMode(Lt.TRIANGLES);if(Nt.isBatchedMesh)Nt._multiDrawInstances!==null?Ln.renderMultiDrawInstances(Nt._multiDrawStarts,Nt._multiDrawCounts,Nt._multiDrawCount,Nt._multiDrawInstances):Ln.renderMultiDraw(Nt._multiDrawStarts,Nt._multiDrawCounts,Nt._multiDrawCount);else if(Nt.isInstancedMesh)Ln.renderInstances(pn,Wo,Nt.count);else if(Pt.isInstancedBufferGeometry){const Sn=Pt._maxInstanceCount!==void 0?Pt._maxInstanceCount:1/0,qo=Math.min(Pt.instanceCount,Sn);Ln.renderInstances(pn,Wo,qo)}else Ln.render(pn,Wo)},this.compile=function(Ve,bt,Pt=null){Pt===null&&(Pt=Ve),de=sr.get(Pt),de.init(bt),me.push(de),Pt.traverseVisible(function(Nt){Nt.isLight&&Nt.layers.test(bt.layers)&&(de.pushLight(Nt),Nt.castShadow&&de.pushShadow(Nt))}),Ve!==Pt&&Ve.traverseVisible(function(Nt){Nt.isLight&&Nt.layers.test(bt.layers)&&(de.pushLight(Nt),Nt.castShadow&&de.pushShadow(Nt))}),de.setupLights(we._useLegacyLights);const qt=new Set;return Ve.traverse(function(Nt){const pi=Nt.material;if(pi)if(Array.isArray(pi))for(let Gi=0;Gi<pi.length;Gi++){const Hi=pi[Gi];Fp(Hi,Pt,Nt),qt.add(Hi)}else Fp(pi,Pt,Nt),qt.add(pi)}),me.pop(),de=null,qt},this.compileAsync=function(Ve,bt,Pt=null){const qt=this.compile(Ve,bt,Pt);return new Promise(Nt=>{function pi(){qt.forEach(function(Gi){ct.get(Gi).currentProgram.isReady()&&qt.delete(Gi)}),qt.size!==0?setTimeout(pi,10):Nt(Ve)}xe.get("KHR_parallel_shader_compile")!==null?pi():setTimeout(pi,10)})};let lf=null;function Op(){R1.stop()}function kp(){R1.start()}const R1=new Hl;function Np(Ve,bt,Pt,qt){if(Ve.visible===!1)return;if(Ve.layers.test(bt.layers)){if(Ve.isGroup)Pt=Ve.renderOrder;else if(Ve.isLOD)Ve.autoUpdate===!0&&Ve.update(bt);else if(Ve.isLight)de.pushLight(Ve),Ve.castShadow&&de.pushShadow(Ve);else if(Ve.isSprite){if(!Ve.frustumCulled||fi.intersectsSprite(Ve)){qt&&ei.setFromMatrixPosition(Ve.matrixWorld).applyMatrix4(mi);const pi=Qi.update(Ve),Gi=Ve.material;Gi.visible&&le.push(Ve,pi,Gi,Pt,ei.z,null)}}else if((Ve.isMesh||Ve.isLine||Ve.isPoints)&&(!Ve.frustumCulled||fi.intersectsObject(Ve))){const pi=Qi.update(Ve),Gi=Ve.material;if(qt&&(Ve.boundingSphere!==void 0?(Ve.boundingSphere===null&&Ve.computeBoundingSphere(),ei.copy(Ve.boundingSphere.center)):(pi.boundingSphere===null&&pi.computeBoundingSphere(),ei.copy(pi.boundingSphere.center)),ei.applyMatrix4(Ve.matrixWorld).applyMatrix4(mi)),Array.isArray(Gi)){const Hi=pi.groups;for(let pr=0,br=Hi.length;pr<br;pr++){const kr=Hi[pr],Lr=Gi[kr.materialIndex];Lr&&Lr.visible&&le.push(Ve,pi,Lr,Pt,ei.z,kr)}}else Gi.visible&&le.push(Ve,pi,Gi,Pt,ei.z,null)}}const Nt=Ve.children;for(let pi=0,Gi=Nt.length;pi<Gi;pi++)Np(Nt[pi],bt,Pt,qt)}function cf(Ve,bt,Pt,qt){const Nt=Ve.opaque,pi=Ve.transmissive,Gi=Ve.transparent;de.setupLightsView(Pt),wt===!0&&or.setGlobalState(we.clippingPlanes,Pt),qt&&Ne.viewport($e.copy(qt)),Nt.length>0&&Eu(Nt,bt,Pt),pi.length>0&&Eu(pi,bt,Pt),Gi.length>0&&Eu(Gi,bt,Pt),Ne.buffers.depth.setTest(!0),Ne.buffers.depth.setMask(!0),Ne.buffers.color.setMask(!0),Ne.setPolygonOffset(!1)}function Up(Ve,bt,Pt,qt){if((Pt.isScene===!0?Pt.overrideMaterial:null)!==null)return;de.state.transmissionRenderTarget[qt.id]===void 0&&(de.state.transmissionRenderTarget[qt.id]=new Wn(1,1,{generateMipmaps:!0,type:xe.has("EXT_color_buffer_half_float")||xe.has("EXT_color_buffer_float")?Ji:Di,minFilter:st,samples:4,stencilBuffer:v,resolveDepthBuffer:!1,resolveStencilBuffer:!1}));const Nt=de.state.transmissionRenderTarget[qt.id],pi=qt.viewport||$e;Nt.setSize(pi.z,pi.w);const Gi=we.getRenderTarget();we.setRenderTarget(Nt),we.getClearColor(at),Dt=we.getClearAlpha(),Dt<1&&we.setClearColor(16777215,.5),we.clear();const Hi=we.toneMapping;we.toneMapping=_e;const pr=qt.viewport;if(qt.viewport!==void 0&&(qt.viewport=void 0),de.setupLightsView(qt),wt===!0&&or.setGlobalState(we.clippingPlanes,qt),Eu(Ve,Pt,qt),At.updateMultisampleRenderTarget(Nt),At.updateRenderTargetMipmap(Nt),xe.has("WEBGL_multisampled_render_to_texture")===!1){let br=!1;for(let kr=0,Lr=bt.length;kr<Lr;kr++){const pn=bt[kr],Ms=pn.object,Wo=pn.geometry,Ss=pn.material,Ln=pn.group;if(Ss.side===he&&Ms.layers.test(qt.layers)){const Sn=Ss.side;Ss.side=ee,Ss.needsUpdate=!0,Qp(Ms,Pt,qt,Wo,Ss,Ln),Ss.side=Sn,Ss.needsUpdate=!0,br=!0}}br===!0&&(At.updateMultisampleRenderTarget(Nt),At.updateRenderTargetMipmap(Nt))}we.setRenderTarget(Gi),we.setClearColor(at,Dt),pr!==void 0&&(qt.viewport=pr),we.toneMapping=Hi}function Eu(Ve,bt,Pt){const qt=bt.isScene===!0?bt.overrideMaterial:null;for(let Nt=0,pi=Ve.length;Nt<pi;Nt++){const Gi=Ve[Nt],Hi=Gi.object,pr=Gi.geometry,br=qt===null?Gi.material:qt,kr=Gi.group;Hi.layers.test(Pt.layers)&&Qp(Hi,bt,Pt,pr,br,kr)}}function Qp(Ve,bt,Pt,qt,Nt,pi){Ve.onBeforeRender(we,bt,Pt,qt,Nt,pi),Ve.modelViewMatrix.multiplyMatrices(Pt.matrixWorldInverse,Ve.matrixWorld),Ve.normalMatrix.getNormalMatrix(Ve.modelViewMatrix),Nt.onBeforeRender(we,bt,Pt,qt,Ve,pi),Nt.transparent===!0&&Nt.side===he&&Nt.forceSinglePass===!1?(Nt.side=ee,Nt.needsUpdate=!0,we.renderBufferDirect(Pt,bt,qt,Nt,Ve,pi),Nt.side=Z,Nt.needsUpdate=!0,we.renderBufferDirect(Pt,bt,qt,Nt,Ve,pi),Nt.side=he):we.renderBufferDirect(Pt,bt,qt,Nt,Ve,pi),Ve.onAfterRender(we,bt,Pt,qt,Nt,pi)}function yu(Ve,bt,Pt){bt.isScene!==!0&&(bt=Pe);const qt=ct.get(Ve),Nt=de.state.lights,pi=de.state.shadowsArray,Gi=Nt.state.version,Hi=xi.getParameters(Ve,Nt.state,pi,bt,Pt),pr=xi.getProgramCacheKey(Hi);let br=qt.programs;qt.environment=Ve.isMeshStandardMaterial?bt.environment:null,qt.fog=bt.fog,qt.envMap=(Ve.isMeshStandardMaterial?gi:Vt).get(Ve.envMap||qt.environment),qt.envMapRotation=qt.environment!==null&&Ve.envMap===null?bt.environmentRotation:Ve.envMapRotation,br===void 0&&(Ve.addEventListener("dispose",Pp),br=new Map,qt.programs=br);let kr=br.get(pr);if(kr!==void 0){if(qt.currentProgram===kr&&qt.lightsStateVersion===Gi)return zp(Ve,Hi),kr}else Hi.uniforms=xi.getUniforms(Ve),Ve.onBuild(Pt,Hi,we),Ve.onBeforeCompile(Hi,we),kr=xi.acquireProgram(Hi,pr),br.set(pr,kr),qt.uniforms=Hi.uniforms;const Lr=qt.uniforms;return(Ve.isShaderMaterial||Ve.isRawShaderMaterial)&&Ve.clipping!==!0||(Lr.clippingPlanes=or.uniform),zp(Ve,Hi),qt.needsLights=function(pn){return pn.isMeshLambertMaterial||pn.isMeshToonMaterial||pn.isMeshPhongMaterial||pn.isMeshStandardMaterial||pn.isShadowMaterial||pn.isShaderMaterial&&pn.lights===!0}(Ve),qt.lightsStateVersion=Gi,qt.needsLights&&(Lr.ambientLightColor.value=Nt.state.ambient,Lr.lightProbe.value=Nt.state.probe,Lr.directionalLights.value=Nt.state.directional,Lr.directionalLightShadows.value=Nt.state.directionalShadow,Lr.spotLights.value=Nt.state.spot,Lr.spotLightShadows.value=Nt.state.spotShadow,Lr.rectAreaLights.value=Nt.state.rectArea,Lr.ltc_1.value=Nt.state.rectAreaLTC1,Lr.ltc_2.value=Nt.state.rectAreaLTC2,Lr.pointLights.value=Nt.state.point,Lr.pointLightShadows.value=Nt.state.pointShadow,Lr.hemisphereLights.value=Nt.state.hemi,Lr.directionalShadowMap.value=Nt.state.directionalShadowMap,Lr.directionalShadowMatrix.value=Nt.state.directionalShadowMatrix,Lr.spotShadowMap.value=Nt.state.spotShadowMap,Lr.spotLightMatrix.value=Nt.state.spotLightMatrix,Lr.spotLightMap.value=Nt.state.spotLightMap,Lr.pointShadowMap.value=Nt.state.pointShadowMap,Lr.pointShadowMatrix.value=Nt.state.pointShadowMatrix),qt.currentProgram=kr,qt.uniformsList=null,kr}function Hp(Ve){if(Ve.uniformsList===null){const bt=Ve.currentProgram.getUniforms();Ve.uniformsList=tl.seqWithValue(bt.seq,Ve.uniforms)}return Ve.uniformsList}function zp(Ve,bt){const Pt=ct.get(Ve);Pt.outputColorSpace=bt.outputColorSpace,Pt.batching=bt.batching,Pt.instancing=bt.instancing,Pt.instancingColor=bt.instancingColor,Pt.instancingMorph=bt.instancingMorph,Pt.skinning=bt.skinning,Pt.morphTargets=bt.morphTargets,Pt.morphNormals=bt.morphNormals,Pt.morphColors=bt.morphColors,Pt.morphTargetsCount=bt.morphTargetsCount,Pt.numClippingPlanes=bt.numClippingPlanes,Pt.numIntersection=bt.numClipIntersection,Pt.vertexAlphas=bt.vertexAlphas,Pt.vertexTangents=bt.vertexTangents,Pt.toneMapping=bt.toneMapping,Pt.numMultiviewViews=bt.numMultiviewViews}var hf;R1.setAnimationLoop(function(Ve){lf&&lf(Ve)}),typeof self<"u"&&R1.setContext(self),this.setAnimationLoop=function(Ve){lf=Ve,En.setAnimationLoop(Ve),Ve===null?R1.stop():R1.start()},En.addEventListener("sessionstart",Op),En.addEventListener("sessionend",kp),this.render=function(Ve,bt){if(bt!==void 0&&bt.isCamera!==!0)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(Fe===!0)return;Ve.matrixWorldAutoUpdate===!0&&Ve.updateMatrixWorld(),bt.parent===null&&bt.matrixWorldAutoUpdate===!0&&bt.updateMatrixWorld(),En.enabled===!0&&En.isPresenting===!0&&(En.cameraAutoUpdate===!0&&En.updateCamera(bt),bt=En.getCamera()),Ve.isScene===!0&&Ve.onBeforeRender(we,Ve,bt,ze),de=sr.get(Ve,me.length),de.init(bt),me.push(de),mi.multiplyMatrices(bt.projectionMatrix,bt.matrixWorldInverse),fi.setFromProjectionMatrix(mi),jt=this.localClippingEnabled,wt=or.init(this.clippingPlanes,jt),le=Cr.get(Ve,pe.length),le.init(),pe.push(le),Np(Ve,bt,0,we.sortObjects),le.finish(),we.sortObjects===!0&&le.sort(Ai,yi);const Pt=En.enabled===!1||En.isPresenting===!1||En.hasDepthSensing()===!1;Pt&&Oi.addToRenderList(le,Ve),this.info.render.frame++,wt===!0&&or.beginShadows();const qt=de.state.shadowsArray;xr.render(qt,Ve,bt),wt===!0&&or.endShadows(),this.info.autoReset===!0&&this.info.reset();const Nt=le.opaque,pi=le.transmissive;if(de.setupLights(we._useLegacyLights),bt.isArrayCamera){const Gi=bt.cameras;if(pi.length>0)for(let Hi=0,pr=Gi.length;Hi<pr;Hi++)Up(Nt,pi,Ve,Gi[Hi]);if(Pt&&Oi.render(Ve),En.enabled&&En.isMultiview)At.setDeferTextureUploads(!0),cf(le,Ve,bt,bt.cameras[0].viewport);else for(let Hi=0,pr=Gi.length;Hi<pr;Hi++){const br=Gi[Hi];cf(le,Ve,br,br.viewport)}}else pi.length>0&&Up(Nt,pi,Ve,bt),Pt&&Oi.render(Ve),cf(le,Ve,bt);ze!==null&&(At.updateMultisampleRenderTarget(ze),At.updateRenderTargetMipmap(ze)),Ve.isScene===!0&&Ve.onAfterRender(we,Ve,bt),At.runDeferredUploads(),En.enabled&&En.submitFrame&&En.submitFrame(),Zr.resetDefaultState(),tt=-1,rt=null,me.pop(),me.length>0?(de=me[me.length-1],wt===!0&&or.setGlobalState(we.clippingPlanes,de.state.camera)):de=null,pe.pop(),le=pe.length>0?pe[pe.length-1]:null},this.setTexture2D=(hf=!1,function(Ve,bt){Ve&&Ve.isWebGLRenderTarget&&(hf||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),hf=!0),Ve=Ve.texture),At.setTexture2D(Ve,bt)}),this.getActiveCubeFace=function(){return Be},this.getActiveMipmapLevel=function(){return ke},this.getRenderTarget=function(){return ze},this.setRenderTargetTextures=function(Ve,bt,Pt){ct.get(Ve.texture).__webglTexture=bt,ct.get(Ve.depthTexture).__webglTexture=Pt;const qt=ct.get(Ve);qt.__hasExternalTextures=!0,qt.__autoAllocateDepthBuffer=Pt===void 0,qt.__autoAllocateDepthBuffer||ze&&ze.isWebGLMultiviewRenderTarget||xe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),qt.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(Ve,bt){const Pt=ct.get(Ve);Pt.__webglFramebuffer=bt,Pt.__useDefaultFramebuffer=bt===void 0},this.setRenderTarget=function(Ve,bt=0,Pt=0){ze=Ve,Be=bt,ke=Pt;let qt=!0,Nt=null,pi=!1,Gi=!1;if(Ve){const Hi=ct.get(Ve);Hi.__useDefaultFramebuffer!==void 0?(Ne.bindFramebuffer(Lt.FRAMEBUFFER,null),qt=!1):Hi.__webglFramebuffer===void 0?At.setupRenderTarget(Ve):Hi.__hasExternalTextures&&At.rebindTextures(Ve,ct.get(Ve.texture).__webglTexture,ct.get(Ve.depthTexture).__webglTexture);const pr=Ve.texture;(pr.isData3DTexture||pr.isDataArrayTexture||pr.isCompressedArrayTexture)&&(Gi=!0);const br=ct.get(Ve).__webglFramebuffer;Ve.isWebGLCubeRenderTarget?(Nt=Array.isArray(br[bt])?br[bt][Pt]:br[bt],pi=!0):Nt=Ve.samples>0&&At.useMultisampledRTT(Ve)===!1?ct.get(Ve).__webglMultisampledFramebuffer:Array.isArray(br)?br[Pt]:br,$e.copy(Ve.viewport),ht.copy(Ve.scissor),ut=Ve.scissorTest}else $e.copy(ni).multiplyScalar(Tt).floor(),ht.copy(ai).multiplyScalar(Tt).floor(),ut=hi;if(Ne.bindFramebuffer(Lt.FRAMEBUFFER,Nt)&&qt&&Ne.drawBuffers(Ve,Nt),Ne.viewport($e),Ne.scissor(ht),Ne.setScissorTest(ut),pi){const Hi=ct.get(Ve.texture);Lt.framebufferTexture2D(Lt.FRAMEBUFFER,Lt.COLOR_ATTACHMENT0,Lt.TEXTURE_CUBE_MAP_POSITIVE_X+bt,Hi.__webglTexture,Pt)}else if(Gi){const Hi=ct.get(Ve.texture),pr=bt||0;Lt.framebufferTextureLayer(Lt.FRAMEBUFFER,Lt.COLOR_ATTACHMENT0,Hi.__webglTexture,Pt||0,pr)}tt=-1},this.readRenderTargetPixels=function(Ve,bt,Pt,qt,Nt,pi,Gi){if(!Ve||!Ve.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Hi=ct.get(Ve).__webglFramebuffer;if(Ve.isWebGLCubeRenderTarget&&Gi!==void 0&&(Hi=Hi[Gi]),Hi){Ne.bindFramebuffer(Lt.FRAMEBUFFER,Hi);try{const pr=Ve.texture,br=pr.format,kr=pr.type;if(!je.textureFormatReadable(br))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!je.textureTypeReadable(kr))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");bt>=0&&bt<=Ve.width-qt&&Pt>=0&&Pt<=Ve.height-Nt&&Lt.readPixels(bt,Pt,qt,Nt,Ui.convert(br),Ui.convert(kr),pi)}finally{const pr=ze!==null?ct.get(ze).__webglFramebuffer:null;Ne.bindFramebuffer(Lt.FRAMEBUFFER,pr)}}},this.copyFramebufferToTexture=function(Ve,bt,Pt=0){const qt=Math.pow(2,-Pt),Nt=Math.floor(bt.image.width*qt),pi=Math.floor(bt.image.height*qt);At.setTexture2D(bt,0),Lt.copyTexSubImage2D(Lt.TEXTURE_2D,Pt,0,0,Ve.x,Ve.y,Nt,pi),Ne.unbindTexture()},this.copyTextureToTexture=function(Ve,bt,Pt,qt=0){const Nt=bt.image.width,pi=bt.image.height,Gi=Ui.convert(Pt.format),Hi=Ui.convert(Pt.type);At.setTexture2D(Pt,0),Lt.pixelStorei(Lt.UNPACK_FLIP_Y_WEBGL,Pt.flipY),Lt.pixelStorei(Lt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Pt.premultiplyAlpha),Lt.pixelStorei(Lt.UNPACK_ALIGNMENT,Pt.unpackAlignment),bt.isDataTexture?Lt.texSubImage2D(Lt.TEXTURE_2D,qt,Ve.x,Ve.y,Nt,pi,Gi,Hi,bt.image.data):bt.isCompressedTexture?Lt.compressedTexSubImage2D(Lt.TEXTURE_2D,qt,Ve.x,Ve.y,bt.mipmaps[0].width,bt.mipmaps[0].height,Gi,bt.mipmaps[0].data):Lt.texSubImage2D(Lt.TEXTURE_2D,qt,Ve.x,Ve.y,Gi,Hi,bt.image),qt===0&&Pt.generateMipmaps&&Lt.generateMipmap(Lt.TEXTURE_2D),Ne.unbindTexture()},this.copyTextureToTexture3D=function(Ve,bt,Pt,qt,Nt=0){const pi=Ve.max.x-Ve.min.x,Gi=Ve.max.y-Ve.min.y,Hi=Ve.max.z-Ve.min.z,pr=Ui.convert(qt.format),br=Ui.convert(qt.type);let kr;if(qt.isData3DTexture)At.setTexture3D(qt,0),kr=Lt.TEXTURE_3D;else{if(!qt.isDataArrayTexture&&!qt.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");At.setTexture2DArray(qt,0),kr=Lt.TEXTURE_2D_ARRAY}Lt.pixelStorei(Lt.UNPACK_FLIP_Y_WEBGL,qt.flipY),Lt.pixelStorei(Lt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,qt.premultiplyAlpha),Lt.pixelStorei(Lt.UNPACK_ALIGNMENT,qt.unpackAlignment);const Lr=Lt.getParameter(Lt.UNPACK_ROW_LENGTH),pn=Lt.getParameter(Lt.UNPACK_IMAGE_HEIGHT),Ms=Lt.getParameter(Lt.UNPACK_SKIP_PIXELS),Wo=Lt.getParameter(Lt.UNPACK_SKIP_ROWS),Ss=Lt.getParameter(Lt.UNPACK_SKIP_IMAGES),Ln=Pt.isCompressedTexture?Pt.mipmaps[Nt]:Pt.image;Lt.pixelStorei(Lt.UNPACK_ROW_LENGTH,Ln.width),Lt.pixelStorei(Lt.UNPACK_IMAGE_HEIGHT,Ln.height),Lt.pixelStorei(Lt.UNPACK_SKIP_PIXELS,Ve.min.x),Lt.pixelStorei(Lt.UNPACK_SKIP_ROWS,Ve.min.y),Lt.pixelStorei(Lt.UNPACK_SKIP_IMAGES,Ve.min.z),Pt.isDataTexture||Pt.isData3DTexture?Lt.texSubImage3D(kr,Nt,bt.x,bt.y,bt.z,pi,Gi,Hi,pr,br,Ln.data):qt.isCompressedArrayTexture?Lt.compressedTexSubImage3D(kr,Nt,bt.x,bt.y,bt.z,pi,Gi,Hi,pr,Ln.data):Lt.texSubImage3D(kr,Nt,bt.x,bt.y,bt.z,pi,Gi,Hi,pr,br,Ln),Lt.pixelStorei(Lt.UNPACK_ROW_LENGTH,Lr),Lt.pixelStorei(Lt.UNPACK_IMAGE_HEIGHT,pn),Lt.pixelStorei(Lt.UNPACK_SKIP_PIXELS,Ms),Lt.pixelStorei(Lt.UNPACK_SKIP_ROWS,Wo),Lt.pixelStorei(Lt.UNPACK_SKIP_IMAGES,Ss),Nt===0&&qt.generateMipmaps&&Lt.generateMipmap(kr),Ne.unbindTexture()},this.initTexture=function(Ve){Ve.isCubeTexture?At.setTextureCube(Ve,0):Ve.isData3DTexture?At.setTexture3D(Ve,0):Ve.isDataArrayTexture||Ve.isCompressedArrayTexture?At.setTexture2DArray(Ve,0):At.setTexture2D(Ve,0),Ne.unbindTexture()},this.resetState=function(){Be=0,ke=0,ze=null,Ne.reset(),Zr.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ps}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n;const u=this.getContext();u.drawingBufferColorSpace=n===Pa?"display-p3":"srgb",u.unpackColorSpace=Fr.workingColorSpace===Yo?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(n){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=n}}class il{constructor(n,u=25e-5){this.isFogExp2=!0,this.name="",this.color=new Jt(n),this.density=u}clone(){return new il(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class rl{constructor(n,u=1,p=1e3){this.isFog=!0,this.name="",this.color=new Jt(n),this.near=u,this.far=p}clone(){return new rl(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class nc extends yr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new k0,this.environmentIntensity=1,this.environmentRotation=new k0,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(n,u){return super.copy(n,u),n.background!==null&&(this.background=n.background.clone()),n.environment!==null&&(this.environment=n.environment.clone()),n.fog!==null&&(this.fog=n.fog.clone()),this.backgroundBlurriness=n.backgroundBlurriness,this.backgroundIntensity=n.backgroundIntensity,this.backgroundRotation.copy(n.backgroundRotation),this.environmentIntensity=n.environmentIntensity,this.environmentRotation.copy(n.environmentRotation),n.overrideMaterial!==null&&(this.overrideMaterial=n.overrideMaterial.clone()),this.matrixAutoUpdate=n.matrixAutoUpdate,this}toJSON(n){const u=super.toJSON(n);return this.fog!==null&&(u.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(u.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(u.object.backgroundIntensity=this.backgroundIntensity),u.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(u.object.environmentIntensity=this.environmentIntensity),u.object.environmentRotation=this.environmentRotation.toArray(),u}}class Lo{constructor(n,u){this.isInterleavedBuffer=!0,this.array=n,this.stride=u,this.count=n!==void 0?n.length/u:0,this.usage=Na,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=F0()}onUploadCallback(){}set needsUpdate(n){n===!0&&this.version++}get updateRange(){return Il("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(n){return this.usage=n,this}addUpdateRange(n,u){this.updateRanges.push({start:n,count:u})}clearUpdateRanges(){this.updateRanges.length=0}copy(n){return this.array=new n.array.constructor(n.array),this.count=n.count,this.stride=n.stride,this.usage=n.usage,this}copyAt(n,u,p){n*=this.stride,p*=u.stride;for(let m=0,v=this.stride;m<v;m++)this.array[n+m]=u.array[p+m];return this}set(n,u=0){return this.array.set(n,u),this}clone(n){n.arrayBuffers===void 0&&(n.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=F0()),n.arrayBuffers[this.array.buffer._uuid]===void 0&&(n.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const u=new this.array.constructor(n.arrayBuffers[this.array.buffer._uuid]),p=new this.constructor(u,this.stride);return p.setUsage(this.usage),p}onUpload(n){return this.onUploadCallback=n,this}toJSON(n){return n.arrayBuffers===void 0&&(n.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=F0()),n.arrayBuffers[this.array.buffer._uuid]===void 0&&(n.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const b0=new Le;class u0{constructor(n,u,p,m=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=n,this.itemSize=u,this.offset=p,this.normalized=m}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(n){this.data.needsUpdate=n}applyMatrix4(n){for(let u=0,p=this.data.count;u<p;u++)b0.fromBufferAttribute(this,u),b0.applyMatrix4(n),this.setXYZ(u,b0.x,b0.y,b0.z);return this}applyNormalMatrix(n){for(let u=0,p=this.count;u<p;u++)b0.fromBufferAttribute(this,u),b0.applyNormalMatrix(n),this.setXYZ(u,b0.x,b0.y,b0.z);return this}transformDirection(n){for(let u=0,p=this.count;u<p;u++)b0.fromBufferAttribute(this,u),b0.transformDirection(n),this.setXYZ(u,b0.x,b0.y,b0.z);return this}getComponent(n,u){let p=this.array[n*this.data.stride+this.offset+u];return this.normalized&&(p=y0(p,this.array)),p}setComponent(n,u,p){return this.normalized&&(p=ar(p,this.array)),this.data.array[n*this.data.stride+this.offset+u]=p,this}setX(n,u){return this.normalized&&(u=ar(u,this.array)),this.data.array[n*this.data.stride+this.offset]=u,this}setY(n,u){return this.normalized&&(u=ar(u,this.array)),this.data.array[n*this.data.stride+this.offset+1]=u,this}setZ(n,u){return this.normalized&&(u=ar(u,this.array)),this.data.array[n*this.data.stride+this.offset+2]=u,this}setW(n,u){return this.normalized&&(u=ar(u,this.array)),this.data.array[n*this.data.stride+this.offset+3]=u,this}getX(n){let u=this.data.array[n*this.data.stride+this.offset];return this.normalized&&(u=y0(u,this.array)),u}getY(n){let u=this.data.array[n*this.data.stride+this.offset+1];return this.normalized&&(u=y0(u,this.array)),u}getZ(n){let u=this.data.array[n*this.data.stride+this.offset+2];return this.normalized&&(u=y0(u,this.array)),u}getW(n){let u=this.data.array[n*this.data.stride+this.offset+3];return this.normalized&&(u=y0(u,this.array)),u}setXY(n,u,p){return n=n*this.data.stride+this.offset,this.normalized&&(u=ar(u,this.array),p=ar(p,this.array)),this.data.array[n+0]=u,this.data.array[n+1]=p,this}setXYZ(n,u,p,m){return n=n*this.data.stride+this.offset,this.normalized&&(u=ar(u,this.array),p=ar(p,this.array),m=ar(m,this.array)),this.data.array[n+0]=u,this.data.array[n+1]=p,this.data.array[n+2]=m,this}setXYZW(n,u,p,m,v){return n=n*this.data.stride+this.offset,this.normalized&&(u=ar(u,this.array),p=ar(p,this.array),m=ar(m,this.array),v=ar(v,this.array)),this.data.array[n+0]=u,this.data.array[n+1]=p,this.data.array[n+2]=m,this.data.array[n+3]=v,this}clone(n){if(n===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const u=[];for(let p=0;p<this.count;p++){const m=p*this.data.stride+this.offset;for(let v=0;v<this.itemSize;v++)u.push(this.data.array[m+v])}return new nr(new this.array.constructor(u),this.itemSize,this.normalized)}return n.interleavedBuffers===void 0&&(n.interleavedBuffers={}),n.interleavedBuffers[this.data.uuid]===void 0&&(n.interleavedBuffers[this.data.uuid]=this.data.clone(n)),new u0(n.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(n){if(n===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const u=[];for(let p=0;p<this.count;p++){const m=p*this.data.stride+this.offset;for(let v=0;v<this.itemSize;v++)u.push(this.data.array[m+v])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:u,normalized:this.normalized}}return n.interleavedBuffers===void 0&&(n.interleavedBuffers={}),n.interleavedBuffers[this.data.uuid]===void 0&&(n.interleavedBuffers[this.data.uuid]=this.data.toJSON(n)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class sc extends en{constructor(n){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Jt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.alphaMap=n.alphaMap,this.rotation=n.rotation,this.sizeAttenuation=n.sizeAttenuation,this.fog=n.fog,this}}let Po;const ma=new Le,ga=new Le,oo=new Le,Kn=new zt,va=new zt,nl=new Ii,sl=new Le,Fo=new Le,ol=new Le,Fh=new zt,oc=new zt,Oh=new zt;class kh extends yr{constructor(n=new sc){if(super(),this.isSprite=!0,this.type="Sprite",Po===void 0){Po=new Xi;const u=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),p=new Lo(u,5);Po.setIndex([0,1,2,0,2,3]),Po.setAttribute("position",new u0(p,3,0,!1)),Po.setAttribute("uv",new u0(p,2,3,!1))}this.geometry=Po,this.material=n,this.center=new zt(.5,.5)}raycast(n,u){n.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ga.setFromMatrixScale(this.matrixWorld),nl.copy(n.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(n.camera.matrixWorldInverse,this.matrixWorld),oo.setFromMatrixPosition(this.modelViewMatrix),n.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&ga.multiplyScalar(-oo.z);const p=this.material.rotation;let m,v;p!==0&&(v=Math.cos(p),m=Math.sin(p));const w=this.center;Ea(sl.set(-.5,-.5,0),oo,w,ga,m,v),Ea(Fo.set(.5,-.5,0),oo,w,ga,m,v),Ea(ol.set(.5,.5,0),oo,w,ga,m,v),Fh.set(0,0),oc.set(1,0),Oh.set(1,1);let S=n.ray.intersectTriangle(sl,Fo,ol,!1,ma);if(S===null&&(Ea(Fo.set(-.5,.5,0),oo,w,ga,m,v),oc.set(0,1),S=n.ray.intersectTriangle(sl,ol,Fo,!1,ma),S===null))return;const I=n.ray.origin.distanceTo(ma);I<n.near||I>n.far||u.push({distance:I,point:ma.clone(),uv:N0.getInterpolation(ma,sl,Fo,ol,Fh,oc,Oh,new zt),face:null,object:this})}copy(n,u){return super.copy(n,u),n.center!==void 0&&this.center.copy(n.center),this.material=n.material,this}}function Ea(b,n,u,p,m,v){Kn.subVectors(b,u).addScalar(.5).multiply(p),m!==void 0?(va.x=v*Kn.x-m*Kn.y,va.y=m*Kn.x+v*Kn.y):va.copy(Kn),b.copy(n),b.x+=va.x,b.y+=va.y,b.applyMatrix4(nl)}const al=new Le,Nh=new Le;class Uh extends yr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(n){super.copy(n,!1);const u=n.levels;for(let p=0,m=u.length;p<m;p++){const v=u[p];this.addLevel(v.object.clone(),v.distance,v.hysteresis)}return this.autoUpdate=n.autoUpdate,this}addLevel(n,u=0,p=0){u=Math.abs(u);const m=this.levels;let v;for(v=0;v<m.length&&!(u<m[v].distance);v++);return m.splice(v,0,{distance:u,hysteresis:p,object:n}),this.add(n),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(n){const u=this.levels;if(u.length>0){let p,m;for(p=1,m=u.length;p<m;p++){let v=u[p].distance;if(u[p].object.visible&&(v-=v*u[p].hysteresis),n<v)break}return u[p-1].object}return null}raycast(n,u){if(this.levels.length>0){al.setFromMatrixPosition(this.matrixWorld);const p=n.ray.origin.distanceTo(al);this.getObjectForDistance(p).raycast(n,u)}}update(n){const u=this.levels;if(u.length>1){al.setFromMatrixPosition(n.matrixWorld),Nh.setFromMatrixPosition(this.matrixWorld);const p=al.distanceTo(Nh)/n.zoom;let m,v;for(u[0].object.visible=!0,m=1,v=u.length;m<v;m++){let w=u[m].distance;if(u[m].object.visible&&(w-=w*u[m].hysteresis),!(p>=w))break;u[m-1].object.visible=!1,u[m].object.visible=!0}for(this._currentLevel=m-1;m<v;m++)u[m].object.visible=!1}}toJSON(n){const u=super.toJSON(n);this.autoUpdate===!1&&(u.object.autoUpdate=!1),u.object.levels=[];const p=this.levels;for(let m=0,v=p.length;m<v;m++){const w=p[m];u.object.levels.push({object:w.object.uuid,distance:w.distance,hysteresis:w.hysteresis})}return u}}const Qh=new Le,ll=new Rr,Hh=new Rr,cl=new Le,ac=new Ii,hl=new Le,ul=new Yn,zh=new Ii,Jn=new ts;class gt extends cn{constructor(n,u){super(n,u),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=ur,this.bindMatrix=new Ii,this.bindMatrixInverse=new Ii,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const n=this.geometry;this.boundingBox===null&&(this.boundingBox=new Xn),this.boundingBox.makeEmpty();const u=n.getAttribute("position");for(let p=0;p<u.count;p++)this.getVertexPosition(p,hl),this.boundingBox.expandByPoint(hl)}computeBoundingSphere(){const n=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Yn),this.boundingSphere.makeEmpty();const u=n.getAttribute("position");for(let p=0;p<u.count;p++)this.getVertexPosition(p,hl),this.boundingSphere.expandByPoint(hl)}copy(n,u){return super.copy(n,u),this.bindMode=n.bindMode,this.bindMatrix.copy(n.bindMatrix),this.bindMatrixInverse.copy(n.bindMatrixInverse),this.skeleton=n.skeleton,n.boundingBox!==null&&(this.boundingBox=n.boundingBox.clone()),n.boundingSphere!==null&&(this.boundingSphere=n.boundingSphere.clone()),this}raycast(n,u){const p=this.material,m=this.matrixWorld;p!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),ul.copy(this.boundingSphere),ul.applyMatrix4(m),n.ray.intersectsSphere(ul)!==!1&&(zh.copy(m).invert(),Jn.copy(n.ray).applyMatrix4(zh),this.boundingBox!==null&&Jn.intersectsBox(this.boundingBox)===!1||this._computeIntersections(n,u,Jn)))}getVertexPosition(n,u){return super.getVertexPosition(n,u),this.applyBoneTransform(n,u),u}bind(n,u){this.skeleton=n,u===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),u=this.matrixWorld),this.bindMatrix.copy(u),this.bindMatrixInverse.copy(u).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const n=new Rr,u=this.geometry.attributes.skinWeight;for(let p=0,m=u.count;p<m;p++){n.fromBufferAttribute(u,p);const v=1/n.manhattanLength();v!==1/0?n.multiplyScalar(v):n.set(1,0,0,0),u.setXYZW(p,n.x,n.y,n.z,n.w)}}updateMatrixWorld(n){super.updateMatrixWorld(n),this.bindMode===ur?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Nr?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(n,u){const p=this.skeleton,m=this.geometry;ll.fromBufferAttribute(m.attributes.skinIndex,n),Hh.fromBufferAttribute(m.attributes.skinWeight,n),Qh.copy(u).applyMatrix4(this.bindMatrix),u.set(0,0,0);for(let v=0;v<4;v++){const w=Hh.getComponent(v);if(w!==0){const S=ll.getComponent(v);ac.multiplyMatrices(p.bones[S].matrixWorld,p.boneInverses[S]),u.addScaledVector(cl.copy(Qh).applyMatrix4(ac),w)}}return u.applyMatrix4(this.bindMatrixInverse)}}class an extends yr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Gr extends on{constructor(n=null,u=1,p=1,m,v,w,S,I,D=pt,L=pt,Y,j){super(null,w,S,I,D,L,m,v,Y,j),this.isDataTexture=!0,this.image={data:n,width:u,height:p},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const ws=new Ii,un=new Ii;class dl{constructor(n=[],u=[]){this.uuid=F0(),this.bones=n.slice(0),this.boneInverses=u,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const n=this.bones,u=this.boneInverses;if(this.boneMatrices=new Float32Array(16*n.length),u.length===0)this.calculateInverses();else if(n.length!==u.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let p=0,m=this.bones.length;p<m;p++)this.boneInverses.push(new Ii)}}calculateInverses(){this.boneInverses.length=0;for(let n=0,u=this.bones.length;n<u;n++){const p=new Ii;this.bones[n]&&p.copy(this.bones[n].matrixWorld).invert(),this.boneInverses.push(p)}}pose(){for(let n=0,u=this.bones.length;n<u;n++){const p=this.bones[n];p&&p.matrixWorld.copy(this.boneInverses[n]).invert()}for(let n=0,u=this.bones.length;n<u;n++){const p=this.bones[n];p&&(p.parent&&p.parent.isBone?(p.matrix.copy(p.parent.matrixWorld).invert(),p.matrix.multiply(p.matrixWorld)):p.matrix.copy(p.matrixWorld),p.matrix.decompose(p.position,p.quaternion,p.scale))}}update(){const n=this.bones,u=this.boneInverses,p=this.boneMatrices,m=this.boneTexture;for(let v=0,w=n.length;v<w;v++){const S=n[v]?n[v].matrixWorld:un;ws.multiplyMatrices(S,u[v]),ws.toArray(p,16*v)}m!==null&&(m.needsUpdate=!0)}clone(){return new dl(this.bones,this.boneInverses)}computeBoneTexture(){let n=Math.sqrt(4*this.bones.length);n=4*Math.ceil(n/4),n=Math.max(n,4);const u=new Float32Array(n*n*4);u.set(this.boneMatrices);const p=new Gr(u,n,n,ir,wi);return p.needsUpdate=!0,this.boneMatrices=u,this.boneTexture=p,this}getBoneByName(n){for(let u=0,p=this.bones.length;u<p;u++){const m=this.bones[u];if(m.name===n)return m}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(n,u){this.uuid=n.uuid;for(let p=0,m=n.bones.length;p<m;p++){const v=n.bones[p];let w=u[v];w===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",v),w=new an),this.bones.push(w),this.boneInverses.push(new Ii().fromArray(n.boneInverses[p]))}return this.init(),this}toJSON(){const n={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};n.uuid=this.uuid;const u=this.bones,p=this.boneInverses;for(let m=0,v=u.length;m<v;m++){const w=u[m];n.bones.push(w.uuid);const S=p[m];n.boneInverses.push(S.toArray())}return n}}class bs extends nr{constructor(n,u,p,m=1){super(n,u,p),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=m}copy(n){return super.copy(n),this.meshPerAttribute=n.meshPerAttribute,this}toJSON(){const n=super.toJSON();return n.meshPerAttribute=this.meshPerAttribute,n.isInstancedBufferAttribute=!0,n}}const ya=new Ii,gd=new Ii,lc=[],c1=new Xn,fl=new Ii,Oo=new cn,ao=new Yn;class cc extends cn{constructor(n,u,p){super(n,u),this.isInstancedMesh=!0,this.instanceMatrix=new bs(new Float32Array(16*p),16),this.instanceColor=null,this.morphTexture=null,this.count=p,this.boundingBox=null,this.boundingSphere=null;for(let m=0;m<p;m++)this.setMatrixAt(m,fl)}computeBoundingBox(){const n=this.geometry,u=this.count;this.boundingBox===null&&(this.boundingBox=new Xn),n.boundingBox===null&&n.computeBoundingBox(),this.boundingBox.makeEmpty();for(let p=0;p<u;p++)this.getMatrixAt(p,ya),c1.copy(n.boundingBox).applyMatrix4(ya),this.boundingBox.union(c1)}computeBoundingSphere(){const n=this.geometry,u=this.count;this.boundingSphere===null&&(this.boundingSphere=new Yn),n.boundingSphere===null&&n.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let p=0;p<u;p++)this.getMatrixAt(p,ya),ao.copy(n.boundingSphere).applyMatrix4(ya),this.boundingSphere.union(ao)}copy(n,u){return super.copy(n,u),this.instanceMatrix.copy(n.instanceMatrix),n.morphTexture!==null&&(this.morphTexture=n.morphTexture.clone()),n.instanceColor!==null&&(this.instanceColor=n.instanceColor.clone()),this.count=n.count,n.boundingBox!==null&&(this.boundingBox=n.boundingBox.clone()),n.boundingSphere!==null&&(this.boundingSphere=n.boundingSphere.clone()),this}getColorAt(n,u){u.fromArray(this.instanceColor.array,3*n)}getMatrixAt(n,u){u.fromArray(this.instanceMatrix.array,16*n)}getMorphAt(n,u){const p=u.morphTargetInfluences,m=this.morphTexture.source.data.data,v=n*(p.length+1)+1;for(let w=0;w<p.length;w++)p[w]=m[v+w]}raycast(n,u){const p=this.matrixWorld,m=this.count;if(Oo.geometry=this.geometry,Oo.material=this.material,Oo.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),ao.copy(this.boundingSphere),ao.applyMatrix4(p),n.ray.intersectsSphere(ao)!==!1))for(let v=0;v<m;v++){this.getMatrixAt(v,ya),gd.multiplyMatrices(p,ya),Oo.matrixWorld=gd,Oo.raycast(n,lc);for(let w=0,S=lc.length;w<S;w++){const I=lc[w];I.instanceId=v,I.object=this,u.push(I)}lc.length=0}}setColorAt(n,u){this.instanceColor===null&&(this.instanceColor=new bs(new Float32Array(3*this.instanceMatrix.count),3)),u.toArray(this.instanceColor.array,3*n)}setMatrixAt(n,u){u.toArray(this.instanceMatrix.array,16*n)}setMorphAt(n,u){const p=u.morphTargetInfluences,m=p.length+1;this.morphTexture===null&&(this.morphTexture=new Gr(new Float32Array(m*this.count),m,this.count,m0,wi));const v=this.morphTexture.source.data.data;let w=0;for(let D=0;D<p.length;D++)w+=p[D];const S=this.geometry.morphTargetsRelative?1:1-w,I=m*n;v[I]=S,v.set(p,I+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function vd(b,n){return b.z-n.z}function Ed(b,n){return n.z-b.z}class yd{constructor(){this.index=0,this.pool=[],this.list=[]}push(n,u){const p=this.pool,m=this.list;this.index>=p.length&&p.push({start:-1,count:-1,z:-1});const v=p[this.index];m.push(v),this.index++,v.start=n.start,v.count=n.count,v.z=u}reset(){this.list.length=0,this.index=0}}const wa="batchId",lo=new Ii,Gh=new Ii,wd=new Ii,Vh=new Ii,hc=new r1,pl=new Xn,ko=new Yn,h1=new Le,uc=new yd,d0=new cn,Al=[];function bd(b,n,u=0){const p=n.itemSize;if(b.isInterleavedBufferAttribute||b.array.constructor!==n.array.constructor){const m=b.count;for(let v=0;v<m;v++)for(let w=0;w<p;w++)n.setComponent(v+u,w,b.getComponent(v,w))}else n.array.set(b.array,u*p);n.needsUpdate=!0}class Wh extends cn{get maxGeometryCount(){return this._maxGeometryCount}constructor(n,u,p=2*u,m){super(new Xi,m),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=n,this._maxVertexCount=u,this._maxIndexCount=p,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(n),this._multiDrawStarts=new Int32Array(n),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let n=Math.sqrt(4*this._maxGeometryCount);n=4*Math.ceil(n/4),n=Math.max(n,4);const u=new Float32Array(n*n*4),p=new Gr(u,n,n,ir,wi);this._matricesTexture=p}_initializeGeometry(n){const u=this.geometry,p=this._maxVertexCount,m=this._maxGeometryCount,v=this._maxIndexCount;if(this._geometryInitialized===!1){for(const S in n.attributes){const I=n.getAttribute(S),{array:D,itemSize:L,normalized:Y}=I,j=new D.constructor(p*L),te=new nr(j,L,Y);u.setAttribute(S,te)}if(n.getIndex()!==null){const S=p>65536?new Uint32Array(v):new Uint16Array(v);u.setIndex(new nr(S,1))}const w=m>65536?new Uint32Array(p):new Uint16Array(p);u.setAttribute(wa,new nr(w,1)),this._geometryInitialized=!0}}_validateGeometry(n){if(n.getAttribute(wa))throw new Error(`BatchedMesh: Geometry cannot use attribute "${wa}"`);const u=this.geometry;if(!!n.getIndex()!=!!u.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const p in u.attributes){if(p===wa)continue;if(!n.hasAttribute(p))throw new Error(`BatchedMesh: Added geometry missing "${p}". All geometries must have consistent attributes.`);const m=n.getAttribute(p),v=u.getAttribute(p);if(m.itemSize!==v.itemSize||m.normalized!==v.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(n){return this.customSort=n,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Xn);const n=this._geometryCount,u=this.boundingBox,p=this._active;u.makeEmpty();for(let m=0;m<n;m++)p[m]!==!1&&(this.getMatrixAt(m,lo),this.getBoundingBoxAt(m,pl).applyMatrix4(lo),u.union(pl))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Yn);const n=this._geometryCount,u=this.boundingSphere,p=this._active;u.makeEmpty();for(let m=0;m<n;m++)p[m]!==!1&&(this.getMatrixAt(m,lo),this.getBoundingSphereAt(m,ko).applyMatrix4(lo),u.union(ko))}addGeometry(n,u=-1,p=-1){if(this._initializeGeometry(n),this._validateGeometry(n),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const m={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let v=null;const w=this._reservedRanges,S=this._drawRanges,I=this._bounds;this._geometryCount!==0&&(v=w[w.length-1]),m.vertexCount=u===-1?n.getAttribute("position").count:u,m.vertexStart=v===null?0:v.vertexStart+v.vertexCount;const D=n.getIndex(),L=D!==null;if(L&&(m.indexCount=p===-1?D.count:p,m.indexStart=v===null?0:v.indexStart+v.indexCount),m.indexStart!==-1&&m.indexStart+m.indexCount>this._maxIndexCount||m.vertexStart+m.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const Y=this._visibility,j=this._active,te=this._matricesTexture,re=this._matricesTexture.image.data;Y.push(!0),j.push(!0);const ce=this._geometryCount;this._geometryCount++,wd.toArray(re,16*ce),te.needsUpdate=!0,w.push(m),S.push({start:L?m.indexStart:m.vertexStart,count:-1}),I.push({boxInitialized:!1,box:new Xn,sphereInitialized:!1,sphere:new Yn});const le=this.geometry.getAttribute(wa);for(let de=0;de<m.vertexCount;de++)le.setX(m.vertexStart+de,ce);return le.needsUpdate=!0,this.setGeometryAt(ce,n),ce}setGeometryAt(n,u){if(n>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(u);const p=this.geometry,m=p.getIndex()!==null,v=p.getIndex(),w=u.getIndex(),S=this._reservedRanges[n];if(m&&w.count>S.indexCount||u.attributes.position.count>S.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const I=S.vertexStart,D=S.vertexCount;for(const te in p.attributes){if(te===wa)continue;const re=u.getAttribute(te),ce=p.getAttribute(te);bd(re,ce,I);const le=re.itemSize;for(let de=re.count,pe=D;de<pe;de++){const me=I+de;for(let we=0;we<le;we++)ce.setComponent(me,we,0)}ce.needsUpdate=!0,ce.addUpdateRange(I*le,D*le)}if(m){const te=S.indexStart;for(let re=0;re<w.count;re++)v.setX(te+re,I+w.getX(re));for(let re=w.count,ce=S.indexCount;re<ce;re++)v.setX(te+re,I);v.needsUpdate=!0,v.addUpdateRange(te,S.indexCount)}const L=this._bounds[n];u.boundingBox!==null?(L.box.copy(u.boundingBox),L.boxInitialized=!0):L.boxInitialized=!1,u.boundingSphere!==null?(L.sphere.copy(u.boundingSphere),L.sphereInitialized=!0):L.sphereInitialized=!1;const Y=this._drawRanges[n],j=u.getAttribute("position");return Y.count=m?w.count:j.count,this._visibilityChanged=!0,n}deleteGeometry(n){const u=this._active;return n>=u.length||u[n]===!1||(u[n]=!1,this._visibilityChanged=!0),this}getInstanceCountAt(n){return this._multiDrawInstances===null?null:this._multiDrawInstances[n]}setInstanceCountAt(n,u){return this._multiDrawInstances===null&&(this._multiDrawInstances=new Int32Array(this._maxGeometryCount).fill(1)),this._multiDrawInstances[n]=u,n}getBoundingBoxAt(n,u){if(this._active[n]===!1)return null;const p=this._bounds[n],m=p.box,v=this.geometry;if(p.boxInitialized===!1){m.makeEmpty();const w=v.index,S=v.attributes.position,I=this._drawRanges[n];for(let D=I.start,L=I.start+I.count;D<L;D++){let Y=D;w&&(Y=w.getX(Y)),m.expandByPoint(h1.fromBufferAttribute(S,Y))}p.boxInitialized=!0}return u.copy(m),u}getBoundingSphereAt(n,u){if(this._active[n]===!1)return null;const p=this._bounds[n],m=p.sphere,v=this.geometry;if(p.sphereInitialized===!1){m.makeEmpty(),this.getBoundingBoxAt(n,pl),pl.getCenter(m.center);const w=v.index,S=v.attributes.position,I=this._drawRanges[n];let D=0;for(let L=I.start,Y=I.start+I.count;L<Y;L++){let j=L;w&&(j=w.getX(j)),h1.fromBufferAttribute(S,j),D=Math.max(D,m.center.distanceToSquared(h1))}m.radius=Math.sqrt(D),p.sphereInitialized=!0}return u.copy(m),u}setMatrixAt(n,u){const p=this._active,m=this._matricesTexture,v=this._matricesTexture.image.data;return n>=this._geometryCount||p[n]===!1||(u.toArray(v,16*n),m.needsUpdate=!0),this}getMatrixAt(n,u){const p=this._active,m=this._matricesTexture.image.data;return n>=this._geometryCount||p[n]===!1?null:u.fromArray(m,16*n)}setVisibleAt(n,u){const p=this._visibility,m=this._active;return n>=this._geometryCount||m[n]===!1||p[n]===u||(p[n]=u,this._visibilityChanged=!0),this}getVisibleAt(n){const u=this._visibility,p=this._active;return!(n>=this._geometryCount||p[n]===!1)&&u[n]}raycast(n,u){const p=this._visibility,m=this._active,v=this._drawRanges,w=this._geometryCount,S=this.matrixWorld,I=this.geometry;d0.material=this.material,d0.geometry.index=I.index,d0.geometry.attributes=I.attributes,d0.geometry.boundingBox===null&&(d0.geometry.boundingBox=new Xn),d0.geometry.boundingSphere===null&&(d0.geometry.boundingSphere=new Yn);for(let D=0;D<w;D++){if(!p[D]||!m[D])continue;const L=v[D];d0.geometry.setDrawRange(L.start,L.count),this.getMatrixAt(D,d0.matrixWorld).premultiply(S),this.getBoundingBoxAt(D,d0.geometry.boundingBox),this.getBoundingSphereAt(D,d0.geometry.boundingSphere),d0.raycast(n,Al);for(let Y=0,j=Al.length;Y<j;Y++){const te=Al[Y];te.object=this,te.batchId=D,u.push(te)}Al.length=0}d0.material=null,d0.geometry.index=null,d0.geometry.attributes={},d0.geometry.setDrawRange(0,1/0)}copy(n){return super.copy(n),this.geometry=n.geometry.clone(),this.perObjectFrustumCulled=n.perObjectFrustumCulled,this.sortObjects=n.sortObjects,this.boundingBox=n.boundingBox!==null?n.boundingBox.clone():null,this.boundingSphere=n.boundingSphere!==null?n.boundingSphere.clone():null,this._drawRanges=n._drawRanges.map(u=>({...u})),this._reservedRanges=n._reservedRanges.map(u=>({...u})),this._visibility=n._visibility.slice(),this._active=n._active.slice(),this._bounds=n._bounds.map(u=>({boxInitialized:u.boxInitialized,box:u.box.clone(),sphereInitialized:u.sphereInitialized,sphere:u.sphere.clone()})),this._maxGeometryCount=n._maxGeometryCount,this._maxVertexCount=n._maxVertexCount,this._maxIndexCount=n._maxIndexCount,this._geometryInitialized=n._geometryInitialized,this._geometryCount=n._geometryCount,this._multiDrawCounts=n._multiDrawCounts.slice(),this._multiDrawStarts=n._multiDrawStarts.slice(),this._matricesTexture=n._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(n,u,p,m,v){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const w=m.getIndex(),S=w===null?1:w.array.BYTES_PER_ELEMENT,I=this._active,D=this._visibility,L=this._multiDrawStarts,Y=this._multiDrawCounts,j=this._drawRanges,te=this.perObjectFrustumCulled;te&&(Vh.multiplyMatrices(p.projectionMatrix,p.matrixWorldInverse).multiply(this.matrixWorld),hc.setFromProjectionMatrix(Vh,n.coordinateSystem));let re=0;if(this.sortObjects){Gh.copy(this.matrixWorld).invert(),h1.setFromMatrixPosition(p.matrixWorld).applyMatrix4(Gh);for(let de=0,pe=D.length;de<pe;de++)if(D[de]&&I[de]){this.getMatrixAt(de,lo),this.getBoundingSphereAt(de,ko).applyMatrix4(lo);let me=!1;if(te&&(me=!hc.intersectsSphere(ko)),!me){const we=h1.distanceTo(ko.center);uc.push(j[de],we)}}const ce=uc.list,le=this.customSort;le===null?ce.sort(v.transparent?Ed:vd):le.call(this,ce,p);for(let de=0,pe=ce.length;de<pe;de++){const me=ce[de];L[re]=me.start*S,Y[re]=me.count,re++}uc.reset()}else for(let ce=0,le=D.length;ce<le;ce++)if(D[ce]&&I[ce]){let de=!1;if(te&&(this.getMatrixAt(ce,lo),this.getBoundingSphereAt(ce,ko).applyMatrix4(lo),de=!hc.intersectsSphere(ko)),!de){const pe=j[ce];L[re]=pe.start*S,Y[re]=pe.count,re++}}this._multiDrawCount=re,this._visibilityChanged=!1}onBeforeShadow(n,u,p,m,v,w){this.onBeforeRender(n,null,m,v,w)}}class Un extends en{constructor(n){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Jt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.linewidth=n.linewidth,this.linecap=n.linecap,this.linejoin=n.linejoin,this.fog=n.fog,this}}const ml=new Le,gl=new Le,qh=new Ii,ba=new ts,vl=new Yn,Gn=new Le,Xh=new Le;class Hs extends yr{constructor(n=new Xi,u=new Un){super(),this.isLine=!0,this.type="Line",this.geometry=n,this.material=u,this.updateMorphTargets()}copy(n,u){return super.copy(n,u),this.material=Array.isArray(n.material)?n.material.slice():n.material,this.geometry=n.geometry,this}computeLineDistances(){const n=this.geometry;if(n.index===null){const u=n.attributes.position,p=[0];for(let m=1,v=u.count;m<v;m++)ml.fromBufferAttribute(u,m-1),gl.fromBufferAttribute(u,m),p[m]=p[m-1],p[m]+=ml.distanceTo(gl);n.setAttribute("lineDistance",new vi(p,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(n,u){const p=this.geometry,m=this.matrixWorld,v=n.params.Line.threshold,w=p.drawRange;if(p.boundingSphere===null&&p.computeBoundingSphere(),vl.copy(p.boundingSphere),vl.applyMatrix4(m),vl.radius+=v,n.ray.intersectsSphere(vl)===!1)return;qh.copy(m).invert(),ba.copy(n.ray).applyMatrix4(qh);const S=v/((this.scale.x+this.scale.y+this.scale.z)/3),I=S*S,D=this.isLineSegments?2:1,L=p.index,Y=p.attributes.position;if(L!==null){const j=Math.max(0,w.start),te=Math.min(L.count,w.start+w.count);for(let re=j,ce=te-1;re<ce;re+=D){const le=L.getX(re),de=L.getX(re+1),pe=u1(this,n,ba,I,le,de);pe&&u.push(pe)}if(this.isLineLoop){const re=L.getX(te-1),ce=L.getX(j),le=u1(this,n,ba,I,re,ce);le&&u.push(le)}}else{const j=Math.max(0,w.start),te=Math.min(Y.count,w.start+w.count);for(let re=j,ce=te-1;re<ce;re+=D){const le=u1(this,n,ba,I,re,re+1);le&&u.push(le)}if(this.isLineLoop){const re=u1(this,n,ba,I,te-1,j);re&&u.push(re)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,u=Object.keys(n);if(u.length>0){const p=n[u[0]];if(p!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let m=0,v=p.length;m<v;m++){const w=p[m].name||String(m);this.morphTargetInfluences.push(0),this.morphTargetDictionary[w]=m}}}}}function u1(b,n,u,p,m,v){const w=b.geometry.attributes.position;if(ml.fromBufferAttribute(w,m),gl.fromBufferAttribute(w,v),u.distanceSqToSegment(ml,gl,Gn,Xh)>p)return;Gn.applyMatrix4(b.matrixWorld);const S=n.ray.origin.distanceTo(Gn);return S<n.near||S>n.far?void 0:{distance:S,point:Xh.clone().applyMatrix4(b.matrixWorld),index:m,face:null,faceIndex:null,object:b}}const Yh=new Le,Kh=new Le;class Zn extends Hs{constructor(n,u){super(n,u),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const n=this.geometry;if(n.index===null){const u=n.attributes.position,p=[];for(let m=0,v=u.count;m<v;m+=2)Yh.fromBufferAttribute(u,m),Kh.fromBufferAttribute(u,m+1),p[m]=m===0?0:p[m-1],p[m+1]=p[m]+Yh.distanceTo(Kh);n.setAttribute("lineDistance",new vi(p,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class dc extends Hs{constructor(n,u){super(n,u),this.isLineLoop=!0,this.type="LineLoop"}}class Bn extends en{constructor(n){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Jt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.alphaMap=n.alphaMap,this.size=n.size,this.sizeAttenuation=n.sizeAttenuation,this.fog=n.fog,this}}const d1=new Ii,fc=new ts,Ca=new Yn,f1=new Le;class No extends yr{constructor(n=new Xi,u=new Bn){super(),this.isPoints=!0,this.type="Points",this.geometry=n,this.material=u,this.updateMorphTargets()}copy(n,u){return super.copy(n,u),this.material=Array.isArray(n.material)?n.material.slice():n.material,this.geometry=n.geometry,this}raycast(n,u){const p=this.geometry,m=this.matrixWorld,v=n.params.Points.threshold,w=p.drawRange;if(p.boundingSphere===null&&p.computeBoundingSphere(),Ca.copy(p.boundingSphere),Ca.applyMatrix4(m),Ca.radius+=v,n.ray.intersectsSphere(Ca)===!1)return;d1.copy(m).invert(),fc.copy(n.ray).applyMatrix4(d1);const S=v/((this.scale.x+this.scale.y+this.scale.z)/3),I=S*S,D=p.index,L=p.attributes.position;if(D!==null)for(let Y=Math.max(0,w.start),j=Math.min(D.count,w.start+w.count);Y<j;Y++){const te=D.getX(Y);f1.fromBufferAttribute(L,te),xa(f1,te,I,m,n,u,this)}else for(let Y=Math.max(0,w.start),j=Math.min(L.count,w.start+w.count);Y<j;Y++)f1.fromBufferAttribute(L,Y),xa(f1,Y,I,m,n,u,this)}updateMorphTargets(){const n=this.geometry.morphAttributes,u=Object.keys(n);if(u.length>0){const p=n[u[0]];if(p!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let m=0,v=p.length;m<v;m++){const w=p[m].name||String(m);this.morphTargetInfluences.push(0),this.morphTargetDictionary[w]=m}}}}}function xa(b,n,u,p,m,v,w){const S=fc.distanceSqToPoint(b);if(S<u){const I=new Le;fc.closestPointToPoint(b,I),I.applyMatrix4(p);const D=m.ray.origin.distanceTo(I);if(D<m.near||D>m.far)return;v.push({distance:D,distanceToRay:Math.sqrt(S),point:I,index:n,face:null,object:w})}}class Jh extends on{constructor(n,u,p,m,v,w,S,I,D){super(n,u,p,m,v,w,S,I,D),this.isVideoTexture=!0,this.minFilter=w!==void 0?w:Wt,this.magFilter=v!==void 0?v:Wt,this.generateMipmaps=!1;const L=this;"requestVideoFrameCallback"in n&&n.requestVideoFrameCallback(function Y(){L.needsUpdate=!0,n.requestVideoFrameCallback(Y)})}clone(){return new this.constructor(this.image).copy(this)}update(){const n=this.image;!("requestVideoFrameCallback"in n)&&n.readyState>=n.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class El extends on{constructor(n,u){super({width:n,height:u}),this.isFramebufferTexture=!0,this.magFilter=pt,this.minFilter=pt,this.generateMipmaps=!1,this.needsUpdate=!0}}class _a extends on{constructor(n,u,p,m,v,w,S,I,D,L,Y,j){super(null,w,S,I,D,L,m,v,Y,j),this.isCompressedTexture=!0,this.image={width:u,height:p},this.mipmaps=n,this.flipY=!1,this.generateMipmaps=!1}}class pc extends _a{constructor(n,u,p,m,v,w){super(n,u,p,v,w),this.isCompressedArrayTexture=!0,this.image.depth=m,this.wrapR=He}}class Zh extends _a{constructor(n,u,p){super(void 0,n[0].width,n[0].height,u,p,rn),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=n}}class Cd extends on{constructor(n,u,p,m,v,w,S,I,D){super(n,u,p,m,v,w,S,I,D),this.isCanvasTexture=!0,this.needsUpdate=!0}}class C0{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(n,u){const p=this.getUtoTmapping(n);return this.getPoint(p,u)}getPoints(n=5){const u=[];for(let p=0;p<=n;p++)u.push(this.getPoint(p/n));return u}getSpacedPoints(n=5){const u=[];for(let p=0;p<=n;p++)u.push(this.getPointAt(p/n));return u}getLength(){const n=this.getLengths();return n[n.length-1]}getLengths(n=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===n+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const u=[];let p,m=this.getPoint(0),v=0;u.push(0);for(let w=1;w<=n;w++)p=this.getPoint(w/n),v+=p.distanceTo(m),u.push(v),m=p;return this.cacheArcLengths=u,u}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(n,u){const p=this.getLengths();let m=0;const v=p.length;let w;w=u||n*p[v-1];let S,I=0,D=v-1;for(;I<=D;)if(m=Math.floor(I+(D-I)/2),S=p[m]-w,S<0)I=m+1;else{if(!(S>0)){D=m;break}D=m-1}if(m=D,p[m]===w)return m/(v-1);const L=p[m];return(m+(w-L)/(p[m+1]-L))/(v-1)}getTangent(n,u){let m=n-1e-4,v=n+1e-4;m<0&&(m=0),v>1&&(v=1);const w=this.getPoint(m),S=this.getPoint(v),I=u||(w.isVector2?new zt:new Le);return I.copy(S).sub(w).normalize(),I}getTangentAt(n,u){const p=this.getUtoTmapping(n);return this.getTangent(p,u)}computeFrenetFrames(n,u){const p=new Le,m=[],v=[],w=[],S=new Le,I=new Ii;for(let te=0;te<=n;te++){const re=te/n;m[te]=this.getTangentAt(re,new Le)}v[0]=new Le,w[0]=new Le;let D=Number.MAX_VALUE;const L=Math.abs(m[0].x),Y=Math.abs(m[0].y),j=Math.abs(m[0].z);L<=D&&(D=L,p.set(1,0,0)),Y<=D&&(D=Y,p.set(0,1,0)),j<=D&&p.set(0,0,1),S.crossVectors(m[0],p).normalize(),v[0].crossVectors(m[0],S),w[0].crossVectors(m[0],v[0]);for(let te=1;te<=n;te++){if(v[te]=v[te-1].clone(),w[te]=w[te-1].clone(),S.crossVectors(m[te-1],m[te]),S.length()>Number.EPSILON){S.normalize();const re=Math.acos(mn(m[te-1].dot(m[te]),-1,1));v[te].applyMatrix4(I.makeRotationAxis(S,re))}w[te].crossVectors(m[te],v[te])}if(u===!0){let te=Math.acos(mn(v[0].dot(v[n]),-1,1));te/=n,m[0].dot(S.crossVectors(v[0],v[n]))>0&&(te=-te);for(let re=1;re<=n;re++)v[re].applyMatrix4(I.makeRotationAxis(m[re],te*re)),w[re].crossVectors(m[re],v[re])}return{tangents:m,normals:v,binormals:w}}clone(){return new this.constructor().copy(this)}copy(n){return this.arcLengthDivisions=n.arcLengthDivisions,this}toJSON(){const n={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return n.arcLengthDivisions=this.arcLengthDivisions,n.type=this.type,n}fromJSON(n){return this.arcLengthDivisions=n.arcLengthDivisions,this}}class z0 extends C0{constructor(n=0,u=0,p=1,m=1,v=0,w=2*Math.PI,S=!1,I=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=n,this.aY=u,this.xRadius=p,this.yRadius=m,this.aStartAngle=v,this.aEndAngle=w,this.aClockwise=S,this.aRotation=I}getPoint(n,u=new zt){const p=u,m=2*Math.PI;let v=this.aEndAngle-this.aStartAngle;const w=Math.abs(v)<Number.EPSILON;for(;v<0;)v+=m;for(;v>m;)v-=m;v<Number.EPSILON&&(v=w?0:m),this.aClockwise!==!0||w||(v===m?v=-m:v-=m);const S=this.aStartAngle+n*v;let I=this.aX+this.xRadius*Math.cos(S),D=this.aY+this.yRadius*Math.sin(S);if(this.aRotation!==0){const L=Math.cos(this.aRotation),Y=Math.sin(this.aRotation),j=I-this.aX,te=D-this.aY;I=j*L-te*Y+this.aX,D=j*Y+te*L+this.aY}return p.set(I,D)}copy(n){return super.copy(n),this.aX=n.aX,this.aY=n.aY,this.xRadius=n.xRadius,this.yRadius=n.yRadius,this.aStartAngle=n.aStartAngle,this.aEndAngle=n.aEndAngle,this.aClockwise=n.aClockwise,this.aRotation=n.aRotation,this}toJSON(){const n=super.toJSON();return n.aX=this.aX,n.aY=this.aY,n.xRadius=this.xRadius,n.yRadius=this.yRadius,n.aStartAngle=this.aStartAngle,n.aEndAngle=this.aEndAngle,n.aClockwise=this.aClockwise,n.aRotation=this.aRotation,n}fromJSON(n){return super.fromJSON(n),this.aX=n.aX,this.aY=n.aY,this.xRadius=n.xRadius,this.yRadius=n.yRadius,this.aStartAngle=n.aStartAngle,this.aEndAngle=n.aEndAngle,this.aClockwise=n.aClockwise,this.aRotation=n.aRotation,this}}class p1 extends z0{constructor(n,u,p,m,v,w){super(n,u,p,p,m,v,w),this.isArcCurve=!0,this.type="ArcCurve"}}function s(){let b=0,n=0,u=0,p=0;function m(v,w,S,I){b=v,n=S,u=-3*v+3*w-2*S-I,p=2*v-2*w+S+I}return{initCatmullRom:function(v,w,S,I,D){m(w,S,D*(S-v),D*(I-w))},initNonuniformCatmullRom:function(v,w,S,I,D,L,Y){let j=(w-v)/D-(S-v)/(D+L)+(S-w)/L,te=(S-w)/L-(I-w)/(L+Y)+(I-S)/Y;j*=L,te*=L,m(w,S,j,te)},calc:function(v){const w=v*v;return b+n*v+u*w+p*(w*v)}}}const a=new Le,c=new s,o=new s,r=new s;class t extends C0{constructor(n=[],u=!1,p="centripetal",m=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=n,this.closed=u,this.curveType=p,this.tension=m}getPoint(n,u=new Le){const p=u,m=this.points,v=m.length,w=(v-(this.closed?0:1))*n;let S,I,D=Math.floor(w),L=w-D;this.closed?D+=D>0?0:(Math.floor(Math.abs(D)/v)+1)*v:L===0&&D===v-1&&(D=v-2,L=1),this.closed||D>0?S=m[(D-1)%v]:(a.subVectors(m[0],m[1]).add(m[0]),S=a);const Y=m[D%v],j=m[(D+1)%v];if(this.closed||D+2<v?I=m[(D+2)%v]:(a.subVectors(m[v-1],m[v-2]).add(m[v-1]),I=a),this.curveType==="centripetal"||this.curveType==="chordal"){const te=this.curveType==="chordal"?.5:.25;let re=Math.pow(S.distanceToSquared(Y),te),ce=Math.pow(Y.distanceToSquared(j),te),le=Math.pow(j.distanceToSquared(I),te);ce<1e-4&&(ce=1),re<1e-4&&(re=ce),le<1e-4&&(le=ce),c.initNonuniformCatmullRom(S.x,Y.x,j.x,I.x,re,ce,le),o.initNonuniformCatmullRom(S.y,Y.y,j.y,I.y,re,ce,le),r.initNonuniformCatmullRom(S.z,Y.z,j.z,I.z,re,ce,le)}else this.curveType==="catmullrom"&&(c.initCatmullRom(S.x,Y.x,j.x,I.x,this.tension),o.initCatmullRom(S.y,Y.y,j.y,I.y,this.tension),r.initCatmullRom(S.z,Y.z,j.z,I.z,this.tension));return p.set(c.calc(L),o.calc(L),r.calc(L)),p}copy(n){super.copy(n),this.points=[];for(let u=0,p=n.points.length;u<p;u++){const m=n.points[u];this.points.push(m.clone())}return this.closed=n.closed,this.curveType=n.curveType,this.tension=n.tension,this}toJSON(){const n=super.toJSON();n.points=[];for(let u=0,p=this.points.length;u<p;u++){const m=this.points[u];n.points.push(m.toArray())}return n.closed=this.closed,n.curveType=this.curveType,n.tension=this.tension,n}fromJSON(n){super.fromJSON(n),this.points=[];for(let u=0,p=n.points.length;u<p;u++){const m=n.points[u];this.points.push(new Le().fromArray(m))}return this.closed=n.closed,this.curveType=n.curveType,this.tension=n.tension,this}}function h(b,n,u,p,m){const v=.5*(p-n),w=.5*(m-u),S=b*b;return(2*u-2*p+v+w)*(b*S)+(-3*u+3*p-2*v-w)*S+v*b+u}function l(b,n,u,p){return function(m,v){const w=1-m;return w*w*v}(b,n)+function(m,v){return 2*(1-m)*m*v}(b,u)+function(m,v){return m*m*v}(b,p)}function d(b,n,u,p,m){return function(v,w){const S=1-v;return S*S*S*w}(b,n)+function(v,w){const S=1-v;return 3*S*S*v*w}(b,u)+function(v,w){return 3*(1-v)*v*v*w}(b,p)+function(v,w){return v*v*v*w}(b,m)}class f extends C0{constructor(n=new zt,u=new zt,p=new zt,m=new zt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=n,this.v1=u,this.v2=p,this.v3=m}getPoint(n,u=new zt){const p=u,m=this.v0,v=this.v1,w=this.v2,S=this.v3;return p.set(d(n,m.x,v.x,w.x,S.x),d(n,m.y,v.y,w.y,S.y)),p}copy(n){return super.copy(n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this.v3.copy(n.v3),this}toJSON(){const n=super.toJSON();return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n.v3=this.v3.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this.v3.fromArray(n.v3),this}}class g extends C0{constructor(n=new Le,u=new Le,p=new Le,m=new Le){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=n,this.v1=u,this.v2=p,this.v3=m}getPoint(n,u=new Le){const p=u,m=this.v0,v=this.v1,w=this.v2,S=this.v3;return p.set(d(n,m.x,v.x,w.x,S.x),d(n,m.y,v.y,w.y,S.y),d(n,m.z,v.z,w.z,S.z)),p}copy(n){return super.copy(n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this.v3.copy(n.v3),this}toJSON(){const n=super.toJSON();return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n.v3=this.v3.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this.v3.fromArray(n.v3),this}}class y extends C0{constructor(n=new zt,u=new zt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=n,this.v2=u}getPoint(n,u=new zt){const p=u;return n===1?p.copy(this.v2):(p.copy(this.v2).sub(this.v1),p.multiplyScalar(n).add(this.v1)),p}getPointAt(n,u){return this.getPoint(n,u)}getTangent(n,u=new zt){return u.subVectors(this.v2,this.v1).normalize()}getTangentAt(n,u){return this.getTangent(n,u)}copy(n){return super.copy(n),this.v1.copy(n.v1),this.v2.copy(n.v2),this}toJSON(){const n=super.toJSON();return n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this}}class _ extends C0{constructor(n=new Le,u=new Le){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=n,this.v2=u}getPoint(n,u=new Le){const p=u;return n===1?p.copy(this.v2):(p.copy(this.v2).sub(this.v1),p.multiplyScalar(n).add(this.v1)),p}getPointAt(n,u){return this.getPoint(n,u)}getTangent(n,u=new Le){return u.subVectors(this.v2,this.v1).normalize()}getTangentAt(n,u){return this.getTangent(n,u)}copy(n){return super.copy(n),this.v1.copy(n.v1),this.v2.copy(n.v2),this}toJSON(){const n=super.toJSON();return n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this}}class R extends C0{constructor(n=new zt,u=new zt,p=new zt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=n,this.v1=u,this.v2=p}getPoint(n,u=new zt){const p=u,m=this.v0,v=this.v1,w=this.v2;return p.set(l(n,m.x,v.x,w.x),l(n,m.y,v.y,w.y)),p}copy(n){return super.copy(n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this}toJSON(){const n=super.toJSON();return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this}}class F extends C0{constructor(n=new Le,u=new Le,p=new Le){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=n,this.v1=u,this.v2=p}getPoint(n,u=new Le){const p=u,m=this.v0,v=this.v1,w=this.v2;return p.set(l(n,m.x,v.x,w.x),l(n,m.y,v.y,w.y),l(n,m.z,v.z,w.z)),p}copy(n){return super.copy(n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this}toJSON(){const n=super.toJSON();return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this}}class ne extends C0{constructor(n=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=n}getPoint(n,u=new zt){const p=u,m=this.points,v=(m.length-1)*n,w=Math.floor(v),S=v-w,I=m[w===0?w:w-1],D=m[w],L=m[w>m.length-2?m.length-1:w+1],Y=m[w>m.length-3?m.length-1:w+2];return p.set(h(S,I.x,D.x,L.x,Y.x),h(S,I.y,D.y,L.y,Y.y)),p}copy(n){super.copy(n),this.points=[];for(let u=0,p=n.points.length;u<p;u++){const m=n.points[u];this.points.push(m.clone())}return this}toJSON(){const n=super.toJSON();n.points=[];for(let u=0,p=this.points.length;u<p;u++){const m=this.points[u];n.points.push(m.toArray())}return n}fromJSON(n){super.fromJSON(n),this.points=[];for(let u=0,p=n.points.length;u<p;u++){const m=n.points[u];this.points.push(new zt().fromArray(m))}return this}}var J=Object.freeze({__proto__:null,ArcCurve:p1,CatmullRomCurve3:t,CubicBezierCurve:f,CubicBezierCurve3:g,EllipseCurve:z0,LineCurve:y,LineCurve3:_,QuadraticBezierCurve:R,QuadraticBezierCurve3:F,SplineCurve:ne});class W extends C0{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(n){this.curves.push(n)}closePath(){const n=this.curves[0].getPoint(0),u=this.curves[this.curves.length-1].getPoint(1);if(!n.equals(u)){const p=n.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new J[p](u,n))}return this}getPoint(n,u){const p=n*this.getLength(),m=this.getCurveLengths();let v=0;for(;v<m.length;){if(m[v]>=p){const w=m[v]-p,S=this.curves[v],I=S.getLength(),D=I===0?0:1-w/I;return S.getPointAt(D,u)}v++}return null}getLength(){const n=this.getCurveLengths();return n[n.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const n=[];let u=0;for(let p=0,m=this.curves.length;p<m;p++)u+=this.curves[p].getLength(),n.push(u);return this.cacheLengths=n,n}getSpacedPoints(n=40){const u=[];for(let p=0;p<=n;p++)u.push(this.getPoint(p/n));return this.autoClose&&u.push(u[0]),u}getPoints(n=12){const u=[];let p;for(let m=0,v=this.curves;m<v.length;m++){const w=v[m],S=w.isEllipseCurve?2*n:w.isLineCurve||w.isLineCurve3?1:w.isSplineCurve?n*w.points.length:n,I=w.getPoints(S);for(let D=0;D<I.length;D++){const L=I[D];p&&p.equals(L)||(u.push(L),p=L)}}return this.autoClose&&u.length>1&&!u[u.length-1].equals(u[0])&&u.push(u[0]),u}copy(n){super.copy(n),this.curves=[];for(let u=0,p=n.curves.length;u<p;u++){const m=n.curves[u];this.curves.push(m.clone())}return this.autoClose=n.autoClose,this}toJSON(){const n=super.toJSON();n.autoClose=this.autoClose,n.curves=[];for(let u=0,p=this.curves.length;u<p;u++){const m=this.curves[u];n.curves.push(m.toJSON())}return n}fromJSON(n){super.fromJSON(n),this.autoClose=n.autoClose,this.curves=[];for(let u=0,p=n.curves.length;u<p;u++){const m=n.curves[u];this.curves.push(new J[m.type]().fromJSON(m))}return this}}class q extends W{constructor(n){super(),this.type="Path",this.currentPoint=new zt,n&&this.setFromPoints(n)}setFromPoints(n){this.moveTo(n[0].x,n[0].y);for(let u=1,p=n.length;u<p;u++)this.lineTo(n[u].x,n[u].y);return this}moveTo(n,u){return this.currentPoint.set(n,u),this}lineTo(n,u){const p=new y(this.currentPoint.clone(),new zt(n,u));return this.curves.push(p),this.currentPoint.set(n,u),this}quadraticCurveTo(n,u,p,m){const v=new R(this.currentPoint.clone(),new zt(n,u),new zt(p,m));return this.curves.push(v),this.currentPoint.set(p,m),this}bezierCurveTo(n,u,p,m,v,w){const S=new f(this.currentPoint.clone(),new zt(n,u),new zt(p,m),new zt(v,w));return this.curves.push(S),this.currentPoint.set(v,w),this}splineThru(n){const u=[this.currentPoint.clone()].concat(n),p=new ne(u);return this.curves.push(p),this.currentPoint.copy(n[n.length-1]),this}arc(n,u,p,m,v,w){const S=this.currentPoint.x,I=this.currentPoint.y;return this.absarc(n+S,u+I,p,m,v,w),this}absarc(n,u,p,m,v,w){return this.absellipse(n,u,p,p,m,v,w),this}ellipse(n,u,p,m,v,w,S,I){const D=this.currentPoint.x,L=this.currentPoint.y;return this.absellipse(n+D,u+L,p,m,v,w,S,I),this}absellipse(n,u,p,m,v,w,S,I){const D=new z0(n,u,p,m,v,w,S,I);if(this.curves.length>0){const Y=D.getPoint(0);Y.equals(this.currentPoint)||this.lineTo(Y.x,Y.y)}this.curves.push(D);const L=D.getPoint(1);return this.currentPoint.copy(L),this}copy(n){return super.copy(n),this.currentPoint.copy(n.currentPoint),this}toJSON(){const n=super.toJSON();return n.currentPoint=this.currentPoint.toArray(),n}fromJSON(n){return super.fromJSON(n),this.currentPoint.fromArray(n.currentPoint),this}}class ie extends Xi{constructor(n=[new zt(0,-.5),new zt(.5,0),new zt(0,.5)],u=12,p=0,m=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:n,segments:u,phiStart:p,phiLength:m},u=Math.floor(u),m=mn(m,0,2*Math.PI);const v=[],w=[],S=[],I=[],D=[],L=1/u,Y=new Le,j=new zt,te=new Le,re=new Le,ce=new Le;let le=0,de=0;for(let pe=0;pe<=n.length-1;pe++)switch(pe){case 0:le=n[pe+1].x-n[pe].x,de=n[pe+1].y-n[pe].y,te.x=1*de,te.y=-le,te.z=0*de,ce.copy(te),te.normalize(),I.push(te.x,te.y,te.z);break;case n.length-1:I.push(ce.x,ce.y,ce.z);break;default:le=n[pe+1].x-n[pe].x,de=n[pe+1].y-n[pe].y,te.x=1*de,te.y=-le,te.z=0*de,re.copy(te),te.x+=ce.x,te.y+=ce.y,te.z+=ce.z,te.normalize(),I.push(te.x,te.y,te.z),ce.copy(re)}for(let pe=0;pe<=u;pe++){const me=p+pe*L*m,we=Math.sin(me),Fe=Math.cos(me);for(let Be=0;Be<=n.length-1;Be++){Y.x=n[Be].x*we,Y.y=n[Be].y,Y.z=n[Be].x*Fe,w.push(Y.x,Y.y,Y.z),j.x=pe/u,j.y=Be/(n.length-1),S.push(j.x,j.y);const ke=I[3*Be+0]*we,ze=I[3*Be+1],tt=I[3*Be+0]*Fe;D.push(ke,ze,tt)}}for(let pe=0;pe<u;pe++)for(let me=0;me<n.length-1;me++){const we=me+pe*n.length,Fe=we,Be=we+n.length,ke=we+n.length+1,ze=we+1;v.push(Fe,Be,ze),v.push(ke,ze,Be)}this.setIndex(v),this.setAttribute("position",new vi(w,3)),this.setAttribute("uv",new vi(S,2)),this.setAttribute("normal",new vi(D,3))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new ie(n.points,n.segments,n.phiStart,n.phiLength)}}class ae extends ie{constructor(n=1,u=1,p=4,m=8){const v=new q;v.absarc(0,-u/2,n,1.5*Math.PI,0),v.absarc(0,u/2,n,0,.5*Math.PI),super(v.getPoints(p),m),this.type="CapsuleGeometry",this.parameters={radius:n,length:u,capSegments:p,radialSegments:m}}static fromJSON(n){return new ae(n.radius,n.length,n.capSegments,n.radialSegments)}}class se extends Xi{constructor(n=1,u=32,p=0,m=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:n,segments:u,thetaStart:p,thetaLength:m},u=Math.max(3,u);const v=[],w=[],S=[],I=[],D=new Le,L=new zt;w.push(0,0,0),S.push(0,0,1),I.push(.5,.5);for(let Y=0,j=3;Y<=u;Y++,j+=3){const te=p+Y/u*m;D.x=n*Math.cos(te),D.y=n*Math.sin(te),w.push(D.x,D.y,D.z),S.push(0,0,1),L.x=(w[j]/n+1)/2,L.y=(w[j+1]/n+1)/2,I.push(L.x,L.y)}for(let Y=1;Y<=u;Y++)v.push(Y,Y+1,0);this.setIndex(v),this.setAttribute("position",new vi(w,3)),this.setAttribute("normal",new vi(S,3)),this.setAttribute("uv",new vi(I,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new se(n.radius,n.segments,n.thetaStart,n.thetaLength)}}class X extends Xi{constructor(n=1,u=1,p=1,m=32,v=1,w=!1,S=0,I=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:n,radiusBottom:u,height:p,radialSegments:m,heightSegments:v,openEnded:w,thetaStart:S,thetaLength:I};const D=this;m=Math.floor(m),v=Math.floor(v);const L=[],Y=[],j=[],te=[];let re=0;const ce=[],le=p/2;let de=0;function pe(me){const we=re,Fe=new zt,Be=new Le;let ke=0;const ze=me===!0?n:u,tt=me===!0?1:-1;for(let $e=1;$e<=m;$e++)Y.push(0,le*tt,0),j.push(0,tt,0),te.push(.5,.5),re++;const rt=re;for(let $e=0;$e<=m;$e++){const ht=$e/m*I+S,ut=Math.cos(ht),at=Math.sin(ht);Be.x=ze*at,Be.y=le*tt,Be.z=ze*ut,Y.push(Be.x,Be.y,Be.z),j.push(0,tt,0),Fe.x=.5*ut+.5,Fe.y=.5*at*tt+.5,te.push(Fe.x,Fe.y),re++}for(let $e=0;$e<m;$e++){const ht=we+$e,ut=rt+$e;me===!0?L.push(ut,ut+1,ht):L.push(ut+1,ut,ht),ke+=3}D.addGroup(de,ke,me===!0?1:2),de+=ke}(function(){const me=new Le,we=new Le;let Fe=0;const Be=(u-n)/p;for(let ke=0;ke<=v;ke++){const ze=[],tt=ke/v,rt=tt*(u-n)+n;for(let $e=0;$e<=m;$e++){const ht=$e/m,ut=ht*I+S,at=Math.sin(ut),Dt=Math.cos(ut);we.x=rt*at,we.y=-tt*p+le,we.z=rt*Dt,Y.push(we.x,we.y,we.z),me.set(at,Be,Dt).normalize(),j.push(me.x,me.y,me.z),te.push(ht,1-tt),ze.push(re++)}ce.push(ze)}for(let ke=0;ke<m;ke++)for(let ze=0;ze<v;ze++){const tt=ce[ze][ke],rt=ce[ze+1][ke],$e=ce[ze+1][ke+1],ht=ce[ze][ke+1];L.push(tt,rt,ht),L.push(rt,$e,ht),Fe+=6}D.addGroup(de,Fe,0),de+=Fe})(),w===!1&&(n>0&&pe(!0),u>0&&pe(!1)),this.setIndex(L),this.setAttribute("position",new vi(Y,3)),this.setAttribute("normal",new vi(j,3)),this.setAttribute("uv",new vi(te,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new X(n.radiusTop,n.radiusBottom,n.height,n.radialSegments,n.heightSegments,n.openEnded,n.thetaStart,n.thetaLength)}}class U extends X{constructor(n=1,u=1,p=32,m=1,v=!1,w=0,S=2*Math.PI){super(0,n,u,p,m,v,w,S),this.type="ConeGeometry",this.parameters={radius:n,height:u,radialSegments:p,heightSegments:m,openEnded:v,thetaStart:w,thetaLength:S}}static fromJSON(n){return new U(n.radius,n.height,n.radialSegments,n.heightSegments,n.openEnded,n.thetaStart,n.thetaLength)}}class Ae extends Xi{constructor(n=[],u=[],p=1,m=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:n,indices:u,radius:p,detail:m};const v=[],w=[];function S(j,te,re,ce){const le=ce+1,de=[];for(let pe=0;pe<=le;pe++){de[pe]=[];const me=j.clone().lerp(re,pe/le),we=te.clone().lerp(re,pe/le),Fe=le-pe;for(let Be=0;Be<=Fe;Be++)de[pe][Be]=Be===0&&pe===le?me:me.clone().lerp(we,Be/Fe)}for(let pe=0;pe<le;pe++)for(let me=0;me<2*(le-pe)-1;me++){const we=Math.floor(me/2);me%2==0?(I(de[pe][we+1]),I(de[pe+1][we]),I(de[pe][we])):(I(de[pe][we+1]),I(de[pe+1][we+1]),I(de[pe+1][we]))}}function I(j){v.push(j.x,j.y,j.z)}function D(j,te){const re=3*j;te.x=n[re+0],te.y=n[re+1],te.z=n[re+2]}function L(j,te,re,ce){ce<0&&j.x===1&&(w[te]=j.x-1),re.x===0&&re.z===0&&(w[te]=ce/2/Math.PI+.5)}function Y(j){return Math.atan2(j.z,-j.x)}(function(j){const te=new Le,re=new Le,ce=new Le;for(let le=0;le<u.length;le+=3)D(u[le+0],te),D(u[le+1],re),D(u[le+2],ce),S(te,re,ce,j)})(m),function(j){const te=new Le;for(let re=0;re<v.length;re+=3)te.x=v[re+0],te.y=v[re+1],te.z=v[re+2],te.normalize().multiplyScalar(j),v[re+0]=te.x,v[re+1]=te.y,v[re+2]=te.z}(p),function(){const j=new Le;for(let re=0;re<v.length;re+=3){j.x=v[re+0],j.y=v[re+1],j.z=v[re+2];const ce=Y(j)/2/Math.PI+.5,le=(te=j,Math.atan2(-te.y,Math.sqrt(te.x*te.x+te.z*te.z))/Math.PI+.5);w.push(ce,1-le)}var te;(function(){const re=new Le,ce=new Le,le=new Le,de=new Le,pe=new zt,me=new zt,we=new zt;for(let Fe=0,Be=0;Fe<v.length;Fe+=9,Be+=6){re.set(v[Fe+0],v[Fe+1],v[Fe+2]),ce.set(v[Fe+3],v[Fe+4],v[Fe+5]),le.set(v[Fe+6],v[Fe+7],v[Fe+8]),pe.set(w[Be+0],w[Be+1]),me.set(w[Be+2],w[Be+3]),we.set(w[Be+4],w[Be+5]),de.copy(re).add(ce).add(le).divideScalar(3);const ke=Y(de);L(pe,Be+0,re,ke),L(me,Be+2,ce,ke),L(we,Be+4,le,ke)}})(),function(){for(let re=0;re<w.length;re+=6){const ce=w[re+0],le=w[re+2],de=w[re+4],pe=Math.max(ce,le,de),me=Math.min(ce,le,de);pe>.9&&me<.1&&(ce<.2&&(w[re+0]+=1),le<.2&&(w[re+2]+=1),de<.2&&(w[re+4]+=1))}}()}(),this.setAttribute("position",new vi(v,3)),this.setAttribute("normal",new vi(v.slice(),3)),this.setAttribute("uv",new vi(w,2)),m===0?this.computeVertexNormals():this.normalizeNormals()}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new Ae(n.vertices,n.indices,n.radius,n.details)}}class We extends Ae{constructor(n=1,u=0){const p=(1+Math.sqrt(5))/2,m=1/p;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-m,-p,0,-m,p,0,m,-p,0,m,p,-m,-p,0,-m,p,0,m,-p,0,m,p,0,-p,0,-m,p,0,-m,-p,0,m,p,0,m],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],n,u),this.type="DodecahedronGeometry",this.parameters={radius:n,detail:u}}static fromJSON(n){return new We(n.radius,n.detail)}}const Ze=new Le,nt=new Le,lt=new Le,Ye=new N0;class Qt extends Xi{constructor(n=null,u=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:n,thresholdAngle:u},n!==null){const m=Math.pow(10,4),v=Math.cos(mo*u),w=n.getIndex(),S=n.getAttribute("position"),I=w?w.count:S.count,D=[0,0,0],L=["a","b","c"],Y=new Array(3),j={},te=[];for(let re=0;re<I;re+=3){w?(D[0]=w.getX(re),D[1]=w.getX(re+1),D[2]=w.getX(re+2)):(D[0]=re,D[1]=re+1,D[2]=re+2);const{a:ce,b:le,c:de}=Ye;if(ce.fromBufferAttribute(S,D[0]),le.fromBufferAttribute(S,D[1]),de.fromBufferAttribute(S,D[2]),Ye.getNormal(lt),Y[0]=`${Math.round(ce.x*m)},${Math.round(ce.y*m)},${Math.round(ce.z*m)}`,Y[1]=`${Math.round(le.x*m)},${Math.round(le.y*m)},${Math.round(le.z*m)}`,Y[2]=`${Math.round(de.x*m)},${Math.round(de.y*m)},${Math.round(de.z*m)}`,Y[0]!==Y[1]&&Y[1]!==Y[2]&&Y[2]!==Y[0])for(let pe=0;pe<3;pe++){const me=(pe+1)%3,we=Y[pe],Fe=Y[me],Be=Ye[L[pe]],ke=Ye[L[me]],ze=`${we}_${Fe}`,tt=`${Fe}_${we}`;tt in j&&j[tt]?(lt.dot(j[tt].normal)<=v&&(te.push(Be.x,Be.y,Be.z),te.push(ke.x,ke.y,ke.z)),j[tt]=null):ze in j||(j[ze]={index0:D[pe],index1:D[me],normal:lt.clone()})}}for(const re in j)if(j[re]){const{index0:ce,index1:le}=j[re];Ze.fromBufferAttribute(S,ce),nt.fromBufferAttribute(S,le),te.push(Ze.x,Ze.y,Ze.z),te.push(nt.x,nt.y,nt.z)}this.setAttribute("position",new vi(te,3))}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}}class Et extends q{constructor(n){super(n),this.uuid=F0(),this.type="Shape",this.holes=[]}getPointsHoles(n){const u=[];for(let p=0,m=this.holes.length;p<m;p++)u[p]=this.holes[p].getPoints(n);return u}extractPoints(n){return{shape:this.getPoints(n),holes:this.getPointsHoles(n)}}copy(n){super.copy(n),this.holes=[];for(let u=0,p=n.holes.length;u<p;u++){const m=n.holes[u];this.holes.push(m.clone())}return this}toJSON(){const n=super.toJSON();n.uuid=this.uuid,n.holes=[];for(let u=0,p=this.holes.length;u<p;u++){const m=this.holes[u];n.holes.push(m.toJSON())}return n}fromJSON(n){super.fromJSON(n),this.uuid=n.uuid,this.holes=[];for(let u=0,p=n.holes.length;u<p;u++){const m=n.holes[u];this.holes.push(new q().fromJSON(m))}return this}}function Ft(b,n,u,p,m){let v,w;if(m===function(S,I,D,L){let Y=0;for(let j=I,te=D-L;j<D;j+=L)Y+=(S[te]-S[j])*(S[j+1]+S[te+1]),te=j;return Y}(b,n,u,p)>0)for(v=n;v<u;v+=p)w=gf(v,b[v],b[v+1],w);else for(v=u-p;v>=n;v-=p)w=gf(v,b[v],b[v+1],w);return w&&Si(w,w.next)&&(Ac(w),w=w.next),w}function Ht(b,n){if(!b)return b;n||(n=b);let u,p=b;do if(u=!1,p.steiner||!Si(p,p.next)&&Ti(p.prev,p,p.next)!==0)p=p.next;else{if(Ac(p),p=n=p.prev,p===p.next)break;u=!0}while(u||p!==n);return n}function St(b,n,u,p,m,v,w){if(!b)return;!w&&v&&function(L,Y,j,te){let re=L;do re.z===0&&(re.z=ji(re.x,re.y,Y,j,te)),re.prevZ=re.prev,re.nextZ=re.next,re=re.next;while(re!==L);re.prevZ.nextZ=null,re.prevZ=null,function(ce){let le,de,pe,me,we,Fe,Be,ke,ze=1;do{for(de=ce,ce=null,we=null,Fe=0;de;){for(Fe++,pe=de,Be=0,le=0;le<ze&&(Be++,pe=pe.nextZ,pe);le++);for(ke=ze;Be>0||ke>0&&pe;)Be!==0&&(ke===0||!pe||de.z<=pe.z)?(me=de,de=de.nextZ,Be--):(me=pe,pe=pe.nextZ,ke--),we?we.nextZ=me:ce=me,me.prevZ=we,we=me;de=pe}we.nextZ=null,ze*=2}while(Fe>1)}(re)}(b,p,m,v);let S,I,D=b;for(;b.prev!==b.next;)if(S=b.prev,I=b.next,v?mt(b,p,m,v):Ge(b))n.push(S.i/u|0),n.push(b.i/u|0),n.push(I.i/u|0),Ac(b),b=I.next,D=I.next;else if((b=I)===D){w?w===1?St(b=qe(Ht(b),n,u),n,u,p,m,v,2):w===2&&Ei(b,n,u,p,m,v):St(Ht(b),n,u,p,m,v,1);break}}function Ge(b){const n=b.prev,u=b,p=b.next;if(Ti(n,u,p)>=0)return!1;const m=n.x,v=u.x,w=p.x,S=n.y,I=u.y,D=p.y,L=m<v?m<w?m:w:v<w?v:w,Y=S<I?S<D?S:D:I<D?I:D,j=m>v?m>w?m:w:v>w?v:w,te=S>I?S>D?S:D:I>D?I:D;let re=p.next;for(;re!==n;){if(re.x>=L&&re.x<=j&&re.y>=Y&&re.y<=te&&Gt(m,S,v,I,w,D,re.x,re.y)&&Ti(re.prev,re,re.next)>=0)return!1;re=re.next}return!0}function mt(b,n,u,p){const m=b.prev,v=b,w=b.next;if(Ti(m,v,w)>=0)return!1;const S=m.x,I=v.x,D=w.x,L=m.y,Y=v.y,j=w.y,te=S<I?S<D?S:D:I<D?I:D,re=L<Y?L<j?L:j:Y<j?Y:j,ce=S>I?S>D?S:D:I>D?I:D,le=L>Y?L>j?L:j:Y>j?Y:j,de=ji(te,re,n,u,p),pe=ji(ce,le,n,u,p);let me=b.prevZ,we=b.nextZ;for(;me&&me.z>=de&&we&&we.z<=pe;){if(me.x>=te&&me.x<=ce&&me.y>=re&&me.y<=le&&me!==m&&me!==w&&Gt(S,L,I,Y,D,j,me.x,me.y)&&Ti(me.prev,me,me.next)>=0||(me=me.prevZ,we.x>=te&&we.x<=ce&&we.y>=re&&we.y<=le&&we!==m&&we!==w&&Gt(S,L,I,Y,D,j,we.x,we.y)&&Ti(we.prev,we,we.next)>=0))return!1;we=we.nextZ}for(;me&&me.z>=de;){if(me.x>=te&&me.x<=ce&&me.y>=re&&me.y<=le&&me!==m&&me!==w&&Gt(S,L,I,Y,D,j,me.x,me.y)&&Ti(me.prev,me,me.next)>=0)return!1;me=me.prevZ}for(;we&&we.z<=pe;){if(we.x>=te&&we.x<=ce&&we.y>=re&&we.y<=le&&we!==m&&we!==w&&Gt(S,L,I,Y,D,j,we.x,we.y)&&Ti(we.prev,we,we.next)>=0)return!1;we=we.nextZ}return!0}function qe(b,n,u){let p=b;do{const m=p.prev,v=p.next.next;!Si(m,v)&&G0(m,p,p.next,v)&&co(m,v)&&co(v,m)&&(n.push(m.i/u|0),n.push(p.i/u|0),n.push(v.i/u|0),Ac(p),Ac(p.next),p=b=v),p=p.next}while(p!==b);return Ht(p)}function Ei(b,n,u,p,m,v){let w=b;do{let S=w.next.next;for(;S!==w.prev;){if(w.i!==S.i&&ii(w,S)){let I=ss(w,S);return w=Ht(w,w.next),I=Ht(I,I.next),St(w,n,u,p,m,v,0),void St(I,n,u,p,m,v,0)}S=S.next}w=w.next}while(w!==b)}function ri(b,n){return b.x-n.x}function Yi(b,n){const u=function(m,v){let w,S=v,I=-1/0;const D=m.x,L=m.y;do{if(L<=S.y&&L>=S.next.y&&S.next.y!==S.y){const le=S.x+(L-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(le<=D&&le>I&&(I=le,w=S.x<S.next.x?S:S.next,le===D))return w}S=S.next}while(S!==v);if(!w)return null;const Y=w,j=w.x,te=w.y;let re,ce=1/0;S=w;do D>=S.x&&S.x>=j&&D!==S.x&&Gt(L<te?D:I,L,j,te,L<te?I:D,L,S.x,S.y)&&(re=Math.abs(L-S.y)/(D-S.x),co(S,m)&&(re<ce||re===ce&&(S.x>w.x||S.x===w.x&&Er(w,S)))&&(w=S,ce=re)),S=S.next;while(S!==Y);return w}(b,n);if(!u)return n;const p=ss(u,b);return Ht(p,p.next),Ht(u,u.next)}function Er(b,n){return Ti(b.prev,b,n.prev)<0&&Ti(n.next,b,b.next)<0}function ji(b,n,u,p,m){return(b=1431655765&((b=858993459&((b=252645135&((b=16711935&((b=(b-u)*m|0)|b<<8))|b<<4))|b<<2))|b<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-p)*m|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function Rt(b){let n=b,u=b;do(n.x<u.x||n.x===u.x&&n.y<u.y)&&(u=n),n=n.next;while(n!==b);return u}function Gt(b,n,u,p,m,v,w,S){return(m-w)*(n-S)>=(b-w)*(v-S)&&(b-w)*(p-S)>=(u-w)*(n-S)&&(u-w)*(v-S)>=(m-w)*(p-S)}function ii(b,n){return b.next.i!==n.i&&b.prev.i!==n.i&&!function(u,p){let m=u;do{if(m.i!==u.i&&m.next.i!==u.i&&m.i!==p.i&&m.next.i!==p.i&&G0(m,m.next,u,p))return!0;m=m.next}while(m!==u);return!1}(b,n)&&(co(b,n)&&co(n,b)&&function(u,p){let m=u,v=!1;const w=(u.x+p.x)/2,S=(u.y+p.y)/2;do m.y>S!=m.next.y>S&&m.next.y!==m.y&&w<(m.next.x-m.x)*(S-m.y)/(m.next.y-m.y)+m.x&&(v=!v),m=m.next;while(m!==u);return v}(b,n)&&(Ti(b.prev,b,n.prev)||Ti(b,n.prev,n))||Si(b,n)&&Ti(b.prev,b,b.next)>0&&Ti(n.prev,n,n.next)>0)}function Ti(b,n,u){return(n.y-b.y)*(u.x-n.x)-(n.x-b.x)*(u.y-n.y)}function Si(b,n){return b.x===n.x&&b.y===n.y}function G0(b,n,u,p){const m=Uo(Ti(b,n,u)),v=Uo(Ti(b,n,p)),w=Uo(Ti(u,p,b)),S=Uo(Ti(u,p,n));return m!==v&&w!==S||!(m!==0||!$n(b,u,n))||!(v!==0||!$n(b,p,n))||!(w!==0||!$n(u,b,p))||!(S!==0||!$n(u,n,p))}function $n(b,n,u){return n.x<=Math.max(b.x,u.x)&&n.x>=Math.min(b.x,u.x)&&n.y<=Math.max(b.y,u.y)&&n.y>=Math.min(b.y,u.y)}function Uo(b){return b>0?1:b<0?-1:0}function co(b,n){return Ti(b.prev,b,b.next)<0?Ti(b,n,b.next)>=0&&Ti(b,b.prev,n)>=0:Ti(b,n,b.prev)<0||Ti(b,b.next,n)<0}function ss(b,n){const u=new xd(b.i,b.x,b.y),p=new xd(n.i,n.x,n.y),m=b.next,v=n.prev;return b.next=n,n.prev=b,u.next=m,m.prev=u,p.next=u,u.prev=p,v.next=p,p.prev=v,p}function gf(b,n,u,p){const m=new xd(b,n,u);return p?(m.next=p.next,m.prev=p,p.next.prev=m,p.next=m):(m.prev=m,m.next=m),m}function Ac(b){b.next.prev=b.prev,b.prev.next=b.next,b.prevZ&&(b.prevZ.nextZ=b.nextZ),b.nextZ&&(b.nextZ.prevZ=b.prevZ)}function xd(b,n,u){this.i=b,this.x=n,this.y=u,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class ho{static area(n){const u=n.length;let p=0;for(let m=u-1,v=0;v<u;m=v++)p+=n[m].x*n[v].y-n[v].x*n[m].y;return .5*p}static isClockWise(n){return ho.area(n)<0}static triangulateShape(n,u){const p=[],m=[],v=[];vf(n),Ef(p,n);let w=n.length;u.forEach(vf);for(let I=0;I<u.length;I++)m.push(w),w+=u[I].length,Ef(p,u[I]);const S=function(I,D,L=2){const Y=D&&D.length,j=Y?D[0]*L:I.length;let te=Ft(I,0,j,L,!0);const re=[];if(!te||te.next===te.prev)return re;let ce,le,de,pe,me,we,Fe;if(Y&&(te=function(Be,ke,ze,tt){const rt=[];let $e,ht,ut,at,Dt;for($e=0,ht=ke.length;$e<ht;$e++)ut=ke[$e]*tt,at=$e<ht-1?ke[$e+1]*tt:Be.length,Dt=Ft(Be,ut,at,tt,!1),Dt===Dt.next&&(Dt.steiner=!0),rt.push(Rt(Dt));for(rt.sort(ri),$e=0;$e<rt.length;$e++)ze=Yi(rt[$e],ze);return ze}(I,D,te,L)),I.length>80*L){ce=de=I[0],le=pe=I[1];for(let Be=L;Be<j;Be+=L)me=I[Be],we=I[Be+1],me<ce&&(ce=me),we<le&&(le=we),me>de&&(de=me),we>pe&&(pe=we);Fe=Math.max(de-ce,pe-le),Fe=Fe!==0?32767/Fe:0}return St(te,re,L,ce,le,Fe,0),re}(p,m);for(let I=0;I<S.length;I+=3)v.push(S.slice(I,I+3));return v}}function vf(b){const n=b.length;n>2&&b[n-1].equals(b[0])&&b.pop()}function Ef(b,n){for(let u=0;u<n.length;u++)b.push(n[u].x),b.push(n[u].y)}class $h extends Xi{constructor(n=new Et([new zt(.5,.5),new zt(-.5,.5),new zt(-.5,-.5),new zt(.5,-.5)]),u={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:n,options:u},n=Array.isArray(n)?n:[n];const p=this,m=[],v=[];for(let S=0,I=n.length;S<I;S++)w(n[S]);function w(S){const I=[],D=u.curveSegments!==void 0?u.curveSegments:12,L=u.steps!==void 0?u.steps:1,Y=u.depth!==void 0?u.depth:1;let j=u.bevelEnabled===void 0||u.bevelEnabled,te=u.bevelThickness!==void 0?u.bevelThickness:.2,re=u.bevelSize!==void 0?u.bevelSize:te-.1,ce=u.bevelOffset!==void 0?u.bevelOffset:0,le=u.bevelSegments!==void 0?u.bevelSegments:3;const de=u.extrudePath,pe=u.UVGenerator!==void 0?u.UVGenerator:Xp;let me,we,Fe,Be,ke,ze=!1;de&&(me=de.getSpacedPoints(L),ze=!0,j=!1,we=de.computeFrenetFrames(L,!1),Fe=new Le,Be=new Le,ke=new Le),j||(le=0,te=0,re=0,ce=0);const tt=S.extractPoints(D);let rt=tt.shape;const $e=tt.holes;if(!ho.isClockWise(rt)){rt=rt.reverse();for(let Pe=0,Se=$e.length;Pe<Se;Pe++){const xe=$e[Pe];ho.isClockWise(xe)&&($e[Pe]=xe.reverse())}}const ht=ho.triangulateShape(rt,$e),ut=rt;for(let Pe=0,Se=$e.length;Pe<Se;Pe++){const xe=$e[Pe];rt=rt.concat(xe)}function at(Pe,Se,xe){return Se||console.error("THREE.ExtrudeGeometry: vec does not exist"),Pe.clone().addScaledVector(Se,xe)}const Dt=rt.length,It=ht.length;function Ot(Pe,Se,xe){let je,Ne,it;const ct=Pe.x-Se.x,At=Pe.y-Se.y,Vt=xe.x-Pe.x,gi=xe.y-Pe.y,oi=ct*ct+At*At,Ci=ct*gi-At*Vt;if(Math.abs(Ci)>Number.EPSILON){const Qi=Math.sqrt(oi),xi=Math.sqrt(Vt*Vt+gi*gi),Ni=Se.x-At/Qi,Cr=Se.y+ct/Qi,sr=((xe.x-gi/xi-Ni)*gi-(xe.y+Vt/xi-Cr)*Vt)/(ct*gi-At*Vt);je=Ni+ct*sr-Pe.x,Ne=Cr+At*sr-Pe.y;const or=je*je+Ne*Ne;if(or<=2)return new zt(je,Ne);it=Math.sqrt(or/2)}else{let Qi=!1;ct>Number.EPSILON?Vt>Number.EPSILON&&(Qi=!0):ct<-Number.EPSILON?Vt<-Number.EPSILON&&(Qi=!0):Math.sign(At)===Math.sign(gi)&&(Qi=!0),Qi?(je=-At,Ne=ct,it=Math.sqrt(oi)):(je=ct,Ne=At,it=Math.sqrt(oi/2))}return new zt(je/it,Ne/it)}const Tt=[];for(let Pe=0,Se=ut.length,xe=Se-1,je=Pe+1;Pe<Se;Pe++,xe++,je++)xe===Se&&(xe=0),je===Se&&(je=0),Tt[Pe]=Ot(ut[Pe],ut[xe],ut[je]);const Ai=[];let yi,ni=Tt.concat();for(let Pe=0,Se=$e.length;Pe<Se;Pe++){const xe=$e[Pe];yi=[];for(let je=0,Ne=xe.length,it=Ne-1,ct=je+1;je<Ne;je++,it++,ct++)it===Ne&&(it=0),ct===Ne&&(ct=0),yi[je]=Ot(xe[je],xe[it],xe[ct]);Ai.push(yi),ni=ni.concat(yi)}for(let Pe=0;Pe<le;Pe++){const Se=Pe/le,xe=te*Math.cos(Se*Math.PI/2),je=re*Math.sin(Se*Math.PI/2)+ce;for(let Ne=0,it=ut.length;Ne<it;Ne++){const ct=at(ut[Ne],Tt[Ne],je);fi(ct.x,ct.y,-xe)}for(let Ne=0,it=$e.length;Ne<it;Ne++){const ct=$e[Ne];yi=Ai[Ne];for(let At=0,Vt=ct.length;At<Vt;At++){const gi=at(ct[At],yi[At],je);fi(gi.x,gi.y,-xe)}}}const ai=re+ce;for(let Pe=0;Pe<Dt;Pe++){const Se=j?at(rt[Pe],ni[Pe],ai):rt[Pe];ze?(Be.copy(we.normals[0]).multiplyScalar(Se.x),Fe.copy(we.binormals[0]).multiplyScalar(Se.y),ke.copy(me[0]).add(Be).add(Fe),fi(ke.x,ke.y,ke.z)):fi(Se.x,Se.y,0)}for(let Pe=1;Pe<=L;Pe++)for(let Se=0;Se<Dt;Se++){const xe=j?at(rt[Se],ni[Se],ai):rt[Se];ze?(Be.copy(we.normals[Pe]).multiplyScalar(xe.x),Fe.copy(we.binormals[Pe]).multiplyScalar(xe.y),ke.copy(me[Pe]).add(Be).add(Fe),fi(ke.x,ke.y,ke.z)):fi(xe.x,xe.y,Y/L*Pe)}for(let Pe=le-1;Pe>=0;Pe--){const Se=Pe/le,xe=te*Math.cos(Se*Math.PI/2),je=re*Math.sin(Se*Math.PI/2)+ce;for(let Ne=0,it=ut.length;Ne<it;Ne++){const ct=at(ut[Ne],Tt[Ne],je);fi(ct.x,ct.y,Y+xe)}for(let Ne=0,it=$e.length;Ne<it;Ne++){const ct=$e[Ne];yi=Ai[Ne];for(let At=0,Vt=ct.length;At<Vt;At++){const gi=at(ct[At],yi[At],je);ze?fi(gi.x,gi.y+me[L-1].y,me[L-1].x+xe):fi(gi.x,gi.y,Y+xe)}}}function hi(Pe,Se){let xe=Pe.length;for(;--xe>=0;){const je=xe;let Ne=xe-1;Ne<0&&(Ne=Pe.length-1);for(let it=0,ct=L+2*le;it<ct;it++){const At=Dt*it,Vt=Dt*(it+1);jt(Se+je+At,Se+Ne+At,Se+Ne+Vt,Se+je+Vt)}}}function fi(Pe,Se,xe){I.push(Pe),I.push(Se),I.push(xe)}function wt(Pe,Se,xe){mi(Pe),mi(Se),mi(xe);const je=m.length/3,Ne=pe.generateTopUV(p,m,je-3,je-2,je-1);ei(Ne[0]),ei(Ne[1]),ei(Ne[2])}function jt(Pe,Se,xe,je){mi(Pe),mi(Se),mi(je),mi(Se),mi(xe),mi(je);const Ne=m.length/3,it=pe.generateSideWallUV(p,m,Ne-6,Ne-3,Ne-2,Ne-1);ei(it[0]),ei(it[1]),ei(it[3]),ei(it[1]),ei(it[2]),ei(it[3])}function mi(Pe){m.push(I[3*Pe+0]),m.push(I[3*Pe+1]),m.push(I[3*Pe+2])}function ei(Pe){v.push(Pe.x),v.push(Pe.y)}(function(){const Pe=m.length/3;if(j){let Se=0,xe=Dt*Se;for(let je=0;je<It;je++){const Ne=ht[je];wt(Ne[2]+xe,Ne[1]+xe,Ne[0]+xe)}Se=L+2*le,xe=Dt*Se;for(let je=0;je<It;je++){const Ne=ht[je];wt(Ne[0]+xe,Ne[1]+xe,Ne[2]+xe)}}else{for(let Se=0;Se<It;Se++){const xe=ht[Se];wt(xe[2],xe[1],xe[0])}for(let Se=0;Se<It;Se++){const xe=ht[Se];wt(xe[0]+Dt*L,xe[1]+Dt*L,xe[2]+Dt*L)}}p.addGroup(Pe,m.length/3-Pe,0)})(),function(){const Pe=m.length/3;let Se=0;hi(ut,Se),Se+=ut.length;for(let xe=0,je=$e.length;xe<je;xe++){const Ne=$e[xe];hi(Ne,Se),Se+=Ne.length}p.addGroup(Pe,m.length/3-Pe,1)}()}this.setAttribute("position",new vi(m,3)),this.setAttribute("uv",new vi(v,2)),this.computeVertexNormals()}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}toJSON(){const n=super.toJSON();return function(u,p,m){if(m.shapes=[],Array.isArray(u))for(let v=0,w=u.length;v<w;v++){const S=u[v];m.shapes.push(S.uuid)}else m.shapes.push(u.uuid);return m.options=Object.assign({},p),p.extrudePath!==void 0&&(m.options.extrudePath=p.extrudePath.toJSON()),m}(this.parameters.shapes,this.parameters.options,n)}static fromJSON(n,u){const p=[];for(let v=0,w=n.shapes.length;v<w;v++){const S=u[n.shapes[v]];p.push(S)}const m=n.options.extrudePath;return m!==void 0&&(n.options.extrudePath=new J[m.type]().fromJSON(m)),new $h(p,n.options)}}const Xp={generateTopUV:function(b,n,u,p,m){const v=n[3*u],w=n[3*u+1],S=n[3*p],I=n[3*p+1],D=n[3*m],L=n[3*m+1];return[new zt(v,w),new zt(S,I),new zt(D,L)]},generateSideWallUV:function(b,n,u,p,m,v){const w=n[3*u],S=n[3*u+1],I=n[3*u+2],D=n[3*p],L=n[3*p+1],Y=n[3*p+2],j=n[3*m],te=n[3*m+1],re=n[3*m+2],ce=n[3*v],le=n[3*v+1],de=n[3*v+2];return Math.abs(S-L)<Math.abs(w-D)?[new zt(w,1-I),new zt(D,1-Y),new zt(j,1-re),new zt(ce,1-de)]:[new zt(S,1-I),new zt(L,1-Y),new zt(te,1-re),new zt(le,1-de)]}};class jh extends Ae{constructor(n=1,u=0){const p=(1+Math.sqrt(5))/2;super([-1,p,0,1,p,0,-1,-p,0,1,-p,0,0,-1,p,0,1,p,0,-1,-p,0,1,-p,p,0,-1,p,0,1,-p,0,-1,-p,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],n,u),this.type="IcosahedronGeometry",this.parameters={radius:n,detail:u}}static fromJSON(n){return new jh(n.radius,n.detail)}}class mc extends Ae{constructor(n=1,u=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],n,u),this.type="OctahedronGeometry",this.parameters={radius:n,detail:u}}static fromJSON(n){return new mc(n.radius,n.detail)}}class eu extends Xi{constructor(n=.5,u=1,p=32,m=1,v=0,w=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:n,outerRadius:u,thetaSegments:p,phiSegments:m,thetaStart:v,thetaLength:w},p=Math.max(3,p);const S=[],I=[],D=[],L=[];let Y=n;const j=(u-n)/(m=Math.max(1,m)),te=new Le,re=new zt;for(let ce=0;ce<=m;ce++){for(let le=0;le<=p;le++){const de=v+le/p*w;te.x=Y*Math.cos(de),te.y=Y*Math.sin(de),I.push(te.x,te.y,te.z),D.push(0,0,1),re.x=(te.x/u+1)/2,re.y=(te.y/u+1)/2,L.push(re.x,re.y)}Y+=j}for(let ce=0;ce<m;ce++){const le=ce*(p+1);for(let de=0;de<p;de++){const pe=de+le,me=pe,we=pe+p+1,Fe=pe+p+2,Be=pe+1;S.push(me,we,Be),S.push(we,Fe,Be)}}this.setIndex(S),this.setAttribute("position",new vi(I,3)),this.setAttribute("normal",new vi(D,3)),this.setAttribute("uv",new vi(L,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new eu(n.innerRadius,n.outerRadius,n.thetaSegments,n.phiSegments,n.thetaStart,n.thetaLength)}}class tu extends Xi{constructor(n=new Et([new zt(0,.5),new zt(-.5,-.5),new zt(.5,-.5)]),u=12){super(),this.type="ShapeGeometry",this.parameters={shapes:n,curveSegments:u};const p=[],m=[],v=[],w=[];let S=0,I=0;if(Array.isArray(n)===!1)D(n);else for(let L=0;L<n.length;L++)D(n[L]),this.addGroup(S,I,L),S+=I,I=0;function D(L){const Y=m.length/3,j=L.extractPoints(u);let te=j.shape;const re=j.holes;ho.isClockWise(te)===!1&&(te=te.reverse());for(let le=0,de=re.length;le<de;le++){const pe=re[le];ho.isClockWise(pe)===!0&&(re[le]=pe.reverse())}const ce=ho.triangulateShape(te,re);for(let le=0,de=re.length;le<de;le++){const pe=re[le];te=te.concat(pe)}for(let le=0,de=te.length;le<de;le++){const pe=te[le];m.push(pe.x,pe.y,0),v.push(0,0,1),w.push(pe.x,pe.y)}for(let le=0,de=ce.length;le<de;le++){const pe=ce[le],me=pe[0]+Y,we=pe[1]+Y,Fe=pe[2]+Y;p.push(me,we,Fe),I+=3}}this.setIndex(p),this.setAttribute("position",new vi(m,3)),this.setAttribute("normal",new vi(v,3)),this.setAttribute("uv",new vi(w,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}toJSON(){const n=super.toJSON();return function(u,p){if(p.shapes=[],Array.isArray(u))for(let m=0,v=u.length;m<v;m++){const w=u[m];p.shapes.push(w.uuid)}else p.shapes.push(u.uuid);return p}(this.parameters.shapes,n)}static fromJSON(n,u){const p=[];for(let m=0,v=n.shapes.length;m<v;m++){const w=u[n.shapes[m]];p.push(w)}return new tu(p,n.curveSegments)}}class gc extends Xi{constructor(n=1,u=32,p=16,m=0,v=2*Math.PI,w=0,S=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:n,widthSegments:u,heightSegments:p,phiStart:m,phiLength:v,thetaStart:w,thetaLength:S},u=Math.max(3,Math.floor(u)),p=Math.max(2,Math.floor(p));const I=Math.min(w+S,Math.PI);let D=0;const L=[],Y=new Le,j=new Le,te=[],re=[],ce=[],le=[];for(let de=0;de<=p;de++){const pe=[],me=de/p;let we=0;de===0&&w===0?we=.5/u:de===p&&I===Math.PI&&(we=-.5/u);for(let Fe=0;Fe<=u;Fe++){const Be=Fe/u;Y.x=-n*Math.cos(m+Be*v)*Math.sin(w+me*S),Y.y=n*Math.cos(w+me*S),Y.z=n*Math.sin(m+Be*v)*Math.sin(w+me*S),re.push(Y.x,Y.y,Y.z),j.copy(Y).normalize(),ce.push(j.x,j.y,j.z),le.push(Be+we,1-me),pe.push(D++)}L.push(pe)}for(let de=0;de<p;de++)for(let pe=0;pe<u;pe++){const me=L[de][pe+1],we=L[de][pe],Fe=L[de+1][pe],Be=L[de+1][pe+1];(de!==0||w>0)&&te.push(me,we,Be),(de!==p-1||I<Math.PI)&&te.push(we,Fe,Be)}this.setIndex(te),this.setAttribute("position",new vi(re,3)),this.setAttribute("normal",new vi(ce,3)),this.setAttribute("uv",new vi(le,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new gc(n.radius,n.widthSegments,n.heightSegments,n.phiStart,n.phiLength,n.thetaStart,n.thetaLength)}}class iu extends Ae{constructor(n=1,u=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],n,u),this.type="TetrahedronGeometry",this.parameters={radius:n,detail:u}}static fromJSON(n){return new iu(n.radius,n.detail)}}class ru extends Xi{constructor(n=1,u=.4,p=12,m=48,v=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:n,tube:u,radialSegments:p,tubularSegments:m,arc:v},p=Math.floor(p),m=Math.floor(m);const w=[],S=[],I=[],D=[],L=new Le,Y=new Le,j=new Le;for(let te=0;te<=p;te++)for(let re=0;re<=m;re++){const ce=re/m*v,le=te/p*Math.PI*2;Y.x=(n+u*Math.cos(le))*Math.cos(ce),Y.y=(n+u*Math.cos(le))*Math.sin(ce),Y.z=u*Math.sin(le),S.push(Y.x,Y.y,Y.z),L.x=n*Math.cos(ce),L.y=n*Math.sin(ce),j.subVectors(Y,L).normalize(),I.push(j.x,j.y,j.z),D.push(re/m),D.push(te/p)}for(let te=1;te<=p;te++)for(let re=1;re<=m;re++){const ce=(m+1)*te+re-1,le=(m+1)*(te-1)+re-1,de=(m+1)*(te-1)+re,pe=(m+1)*te+re;w.push(ce,le,pe),w.push(le,de,pe)}this.setIndex(w),this.setAttribute("position",new vi(S,3)),this.setAttribute("normal",new vi(I,3)),this.setAttribute("uv",new vi(D,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new ru(n.radius,n.tube,n.radialSegments,n.tubularSegments,n.arc)}}class nu extends Xi{constructor(n=1,u=.4,p=64,m=8,v=2,w=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:n,tube:u,tubularSegments:p,radialSegments:m,p:v,q:w},p=Math.floor(p),m=Math.floor(m);const S=[],I=[],D=[],L=[],Y=new Le,j=new Le,te=new Le,re=new Le,ce=new Le,le=new Le,de=new Le;for(let me=0;me<=p;++me){const we=me/p*v*Math.PI*2;pe(we,v,w,n,te),pe(we+.01,v,w,n,re),le.subVectors(re,te),de.addVectors(re,te),ce.crossVectors(le,de),de.crossVectors(ce,le),ce.normalize(),de.normalize();for(let Fe=0;Fe<=m;++Fe){const Be=Fe/m*Math.PI*2,ke=-u*Math.cos(Be),ze=u*Math.sin(Be);Y.x=te.x+(ke*de.x+ze*ce.x),Y.y=te.y+(ke*de.y+ze*ce.y),Y.z=te.z+(ke*de.z+ze*ce.z),I.push(Y.x,Y.y,Y.z),j.subVectors(Y,te).normalize(),D.push(j.x,j.y,j.z),L.push(me/p),L.push(Fe/m)}}for(let me=1;me<=p;me++)for(let we=1;we<=m;we++){const Fe=(m+1)*(me-1)+(we-1),Be=(m+1)*me+(we-1),ke=(m+1)*me+we,ze=(m+1)*(me-1)+we;S.push(Fe,Be,ze),S.push(Be,ke,ze)}function pe(me,we,Fe,Be,ke){const ze=Math.cos(me),tt=Math.sin(me),rt=Fe/we*me,$e=Math.cos(rt);ke.x=Be*(2+$e)*.5*ze,ke.y=Be*(2+$e)*tt*.5,ke.z=Be*Math.sin(rt)*.5}this.setIndex(S),this.setAttribute("position",new vi(I,3)),this.setAttribute("normal",new vi(D,3)),this.setAttribute("uv",new vi(L,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new nu(n.radius,n.tube,n.tubularSegments,n.radialSegments,n.p,n.q)}}class su extends Xi{constructor(n=new F(new Le(-1,-1,0),new Le(-1,1,0),new Le(1,1,0)),u=64,p=1,m=8,v=!1){super(),this.type="TubeGeometry",this.parameters={path:n,tubularSegments:u,radius:p,radialSegments:m,closed:v};const w=n.computeFrenetFrames(u,v);this.tangents=w.tangents,this.normals=w.normals,this.binormals=w.binormals;const S=new Le,I=new Le,D=new zt;let L=new Le;const Y=[],j=[],te=[],re=[];function ce(le){L=n.getPointAt(le/u,L);const de=w.normals[le],pe=w.binormals[le];for(let me=0;me<=m;me++){const we=me/m*Math.PI*2,Fe=Math.sin(we),Be=-Math.cos(we);I.x=Be*de.x+Fe*pe.x,I.y=Be*de.y+Fe*pe.y,I.z=Be*de.z+Fe*pe.z,I.normalize(),j.push(I.x,I.y,I.z),S.x=L.x+p*I.x,S.y=L.y+p*I.y,S.z=L.z+p*I.z,Y.push(S.x,S.y,S.z)}}(function(){for(let le=0;le<u;le++)ce(le);ce(v===!1?u:0),function(){for(let le=0;le<=u;le++)for(let de=0;de<=m;de++)D.x=le/u,D.y=de/m,te.push(D.x,D.y)}(),function(){for(let le=1;le<=u;le++)for(let de=1;de<=m;de++){const pe=(m+1)*(le-1)+(de-1),me=(m+1)*le+(de-1),we=(m+1)*le+de,Fe=(m+1)*(le-1)+de;re.push(pe,me,Fe),re.push(me,we,Fe)}}()})(),this.setIndex(re),this.setAttribute("position",new vi(Y,3)),this.setAttribute("normal",new vi(j,3)),this.setAttribute("uv",new vi(te,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}toJSON(){const n=super.toJSON();return n.path=this.parameters.path.toJSON(),n}static fromJSON(n){return new su(new J[n.path.type]().fromJSON(n.path),n.tubularSegments,n.radius,n.radialSegments,n.closed)}}class yf extends Xi{constructor(n=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:n},n!==null){const u=[],p=new Set,m=new Le,v=new Le;if(n.index!==null){const w=n.attributes.position,S=n.index;let I=n.groups;I.length===0&&(I=[{start:0,count:S.count,materialIndex:0}]);for(let D=0,L=I.length;D<L;++D){const Y=I[D],j=Y.start;for(let te=j,re=j+Y.count;te<re;te+=3)for(let ce=0;ce<3;ce++){const le=S.getX(te+ce),de=S.getX(te+(ce+1)%3);m.fromBufferAttribute(w,le),v.fromBufferAttribute(w,de),wf(m,v,p)===!0&&(u.push(m.x,m.y,m.z),u.push(v.x,v.y,v.z))}}}else{const w=n.attributes.position;for(let S=0,I=w.count/3;S<I;S++)for(let D=0;D<3;D++){const L=3*S+D,Y=3*S+(D+1)%3;m.fromBufferAttribute(w,L),v.fromBufferAttribute(w,Y),wf(m,v,p)===!0&&(u.push(m.x,m.y,m.z),u.push(v.x,v.y,v.z))}}this.setAttribute("position",new vi(u,3))}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}}function wf(b,n,u){const p=`${b.x},${b.y},${b.z}-${n.x},${n.y},${n.z}`,m=`${n.x},${n.y},${n.z}-${b.x},${b.y},${b.z}`;return u.has(p)!==!0&&u.has(m)!==!0&&(u.add(p),u.add(m),!0)}var bf=Object.freeze({__proto__:null,BoxGeometry:no,CapsuleGeometry:ae,CircleGeometry:se,ConeGeometry:U,CylinderGeometry:X,DodecahedronGeometry:We,EdgesGeometry:Qt,ExtrudeGeometry:$h,IcosahedronGeometry:jh,LatheGeometry:ie,OctahedronGeometry:mc,PlaneGeometry:ca,PolyhedronGeometry:Ae,RingGeometry:eu,ShapeGeometry:tu,SphereGeometry:gc,TetrahedronGeometry:iu,TorusGeometry:ru,TorusKnotGeometry:nu,TubeGeometry:su,WireframeGeometry:yf});class Cf extends en{constructor(n){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Jt(0),this.transparent=!0,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.fog=n.fog,this}}class xf extends Q0{constructor(n){super(n),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class vc extends en{constructor(n){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Jt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Kr,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new k0,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.defines={STANDARD:""},this.color.copy(n.color),this.roughness=n.roughness,this.metalness=n.metalness,this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.roughnessMap=n.roughnessMap,this.metalnessMap=n.metalnessMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapRotation.copy(n.envMapRotation),this.envMapIntensity=n.envMapIntensity,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.flatShading=n.flatShading,this.fog=n.fog,this}}class Cs extends vc{constructor(n){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new zt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return mn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(u){this.ior=(1+.4*u)/(1-.4*u)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Jt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Jt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Jt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(n)}get anisotropy(){return this._anisotropy}set anisotropy(n){this._anisotropy>0!=n>0&&this.version++,this._anisotropy=n}get clearcoat(){return this._clearcoat}set clearcoat(n){this._clearcoat>0!=n>0&&this.version++,this._clearcoat=n}get iridescence(){return this._iridescence}set iridescence(n){this._iridescence>0!=n>0&&this.version++,this._iridescence=n}get dispersion(){return this._dispersion}set dispersion(n){this._dispersion>0!=n>0&&this.version++,this._dispersion=n}get sheen(){return this._sheen}set sheen(n){this._sheen>0!=n>0&&this.version++,this._sheen=n}get transmission(){return this._transmission}set transmission(n){this._transmission>0!=n>0&&this.version++,this._transmission=n}copy(n){return super.copy(n),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=n.anisotropy,this.anisotropyRotation=n.anisotropyRotation,this.anisotropyMap=n.anisotropyMap,this.clearcoat=n.clearcoat,this.clearcoatMap=n.clearcoatMap,this.clearcoatRoughness=n.clearcoatRoughness,this.clearcoatRoughnessMap=n.clearcoatRoughnessMap,this.clearcoatNormalMap=n.clearcoatNormalMap,this.clearcoatNormalScale.copy(n.clearcoatNormalScale),this.dispersion=n.dispersion,this.ior=n.ior,this.iridescence=n.iridescence,this.iridescenceMap=n.iridescenceMap,this.iridescenceIOR=n.iridescenceIOR,this.iridescenceThicknessRange=[...n.iridescenceThicknessRange],this.iridescenceThicknessMap=n.iridescenceThicknessMap,this.sheen=n.sheen,this.sheenColor.copy(n.sheenColor),this.sheenColorMap=n.sheenColorMap,this.sheenRoughness=n.sheenRoughness,this.sheenRoughnessMap=n.sheenRoughnessMap,this.transmission=n.transmission,this.transmissionMap=n.transmissionMap,this.thickness=n.thickness,this.thicknessMap=n.thicknessMap,this.attenuationDistance=n.attenuationDistance,this.attenuationColor.copy(n.attenuationColor),this.specularIntensity=n.specularIntensity,this.specularIntensityMap=n.specularIntensityMap,this.specularColor.copy(n.specularColor),this.specularColorMap=n.specularColorMap,this}}class ou extends en{constructor(n){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Jt(16777215),this.specular=new Jt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Kr,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new k0,this.combine=Oe,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.specular.copy(n.specular),this.shininess=n.shininess,this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapRotation.copy(n.envMapRotation),this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.flatShading=n.flatShading,this.fog=n.fog,this}}class _f extends en{constructor(n){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Jt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Kr,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.gradientMap=n.gradientMap,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.alphaMap=n.alphaMap,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.fog=n.fog,this}}class Mf extends en{constructor(n){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Kr,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(n)}copy(n){return super.copy(n),this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.flatShading=n.flatShading,this}}class Sf extends en{constructor(n){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Jt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Kr,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new k0,this.combine=Oe,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapRotation.copy(n.envMapRotation),this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.flatShading=n.flatShading,this.fog=n.fog,this}}class Tf extends en{constructor(n){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Jt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Kr,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.defines={MATCAP:""},this.color.copy(n.color),this.matcap=n.matcap,this.map=n.map,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.alphaMap=n.alphaMap,this.flatShading=n.flatShading,this.fog=n.fog,this}}class If extends Un{constructor(n){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(n)}copy(n){return super.copy(n),this.scale=n.scale,this.dashSize=n.dashSize,this.gapSize=n.gapSize,this}}function A1(b,n,u){return!b||!u&&b.constructor===n?b:typeof n.BYTES_PER_ELEMENT=="number"?new n(b):Array.prototype.slice.call(b)}function Rf(b){return ArrayBuffer.isView(b)&&!(b instanceof DataView)}function Bf(b){const n=b.length,u=new Array(n);for(let p=0;p!==n;++p)u[p]=p;return u.sort(function(p,m){return b[p]-b[m]}),u}function _d(b,n,u){const p=b.length,m=new b.constructor(p);for(let v=0,w=0;w!==p;++v){const S=u[v]*n;for(let I=0;I!==n;++I)m[w++]=b[S+I]}return m}function Md(b,n,u,p){let m=1,v=b[0];for(;v!==void 0&&v[p]===void 0;)v=b[m++];if(v===void 0)return;let w=v[p];if(w!==void 0)if(Array.isArray(w))do w=v[p],w!==void 0&&(n.push(v.time),u.push.apply(u,w)),v=b[m++];while(v!==void 0);else if(w.toArray!==void 0)do w=v[p],w!==void 0&&(n.push(v.time),w.toArray(u,u.length)),v=b[m++];while(v!==void 0);else do w=v[p],w!==void 0&&(n.push(v.time),u.push(w)),v=b[m++];while(v!==void 0)}const Yp={convertArray:A1,isTypedArray:Rf,getKeyframeOrder:Bf,sortedArray:_d,flattenJSON:Md,subclip:function(b,n,u,p,m=30){const v=b.clone();v.name=n;const w=[];for(let I=0;I<v.tracks.length;++I){const D=v.tracks[I],L=D.getValueSize(),Y=[],j=[];for(let te=0;te<D.times.length;++te){const re=D.times[te]*m;if(!(re<u||re>=p)){Y.push(D.times[te]);for(let ce=0;ce<L;++ce)j.push(D.values[te*L+ce])}}Y.length!==0&&(D.times=A1(Y,D.times.constructor),D.values=A1(j,D.values.constructor),w.push(D))}v.tracks=w;let S=1/0;for(let I=0;I<v.tracks.length;++I)S>v.tracks[I].times[0]&&(S=v.tracks[I].times[0]);for(let I=0;I<v.tracks.length;++I)v.tracks[I].shift(-1*S);return v.resetDuration(),v},makeClipAdditive:function(b,n=0,u=b,p=30){p<=0&&(p=30);const m=u.tracks.length,v=n/p;for(let w=0;w<m;++w){const S=u.tracks[w],I=S.ValueTypeName;if(I==="bool"||I==="string")continue;const D=b.tracks.find(function(de){return de.name===S.name&&de.ValueTypeName===I});if(D===void 0)continue;let L=0;const Y=S.getValueSize();S.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(L=Y/3);let j=0;const te=D.getValueSize();D.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(j=te/3);const re=S.times.length-1;let ce;if(v<=S.times[0]){const de=L,pe=Y-L;ce=S.values.slice(de,pe)}else if(v>=S.times[re]){const de=re*Y+L,pe=de+Y-L;ce=S.values.slice(de,pe)}else{const de=S.createInterpolant(),pe=L,me=Y-L;de.evaluate(v),ce=de.resultBuffer.slice(pe,me)}I==="quaternion"&&new qn().fromArray(ce).normalize().conjugate().toArray(ce);const le=D.times.length;for(let de=0;de<le;++de){const pe=de*te+j;if(I==="quaternion")qn.multiplyQuaternionsFlat(D.values,pe,ce,0,D.values,pe);else{const me=te-2*j;for(let we=0;we<me;++we)D.values[pe+we]-=ce[we]}}}return b.blendMode=Ds,b}};class yl{constructor(n,u,p,m){this.parameterPositions=n,this._cachedIndex=0,this.resultBuffer=m!==void 0?m:new u.constructor(p),this.sampleValues=u,this.valueSize=p,this.settings=null,this.DefaultSettings_={}}evaluate(n){const u=this.parameterPositions;let p=this._cachedIndex,m=u[p],v=u[p-1];e:{t:{let w;i:{s:if(!(n<m)){for(let S=p+2;;){if(m===void 0){if(n<v)break s;return p=u.length,this._cachedIndex=p,this.copySampleValue_(p-1)}if(p===S)break;if(v=m,m=u[++p],n<m)break t}w=u.length;break i}if(n>=v)break e;{const S=u[1];n<S&&(p=2,v=S);for(let I=p-2;;){if(v===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(p===I)break;if(m=v,v=u[--p-1],n>=v)break t}w=p,p=0}}for(;p<w;){const S=p+w>>>1;n<u[S]?w=S:p=S+1}if(m=u[p],v=u[p-1],v===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(m===void 0)return p=u.length,this._cachedIndex=p,this.copySampleValue_(p-1)}this._cachedIndex=p,this.intervalChanged_(p,v,m)}return this.interpolate_(p,v,n,m)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(n){const u=this.resultBuffer,p=this.sampleValues,m=this.valueSize,v=n*m;for(let w=0;w!==m;++w)u[w]=p[v+w];return u}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Df extends yl{constructor(n,u,p,m){super(n,u,p,m),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:_0,endingEnd:_0}}intervalChanged_(n,u,p){const m=this.parameterPositions;let v=n-2,w=n+1,S=m[v],I=m[w];if(S===void 0)switch(this.getSettings_().endingStart){case M0:v=n,S=2*u-p;break;case us:v=m.length-2,S=u+m[v]-m[v+1];break;default:v=n,S=p}if(I===void 0)switch(this.getSettings_().endingEnd){case M0:w=n,I=2*p-u;break;case us:w=1,I=p+m[1]-m[0];break;default:w=n-1,I=u}const D=.5*(p-u),L=this.valueSize;this._weightPrev=D/(u-S),this._weightNext=D/(I-p),this._offsetPrev=v*L,this._offsetNext=w*L}interpolate_(n,u,p,m){const v=this.resultBuffer,w=this.sampleValues,S=this.valueSize,I=n*S,D=I-S,L=this._offsetPrev,Y=this._offsetNext,j=this._weightPrev,te=this._weightNext,re=(p-u)/(m-u),ce=re*re,le=ce*re,de=-j*le+2*j*ce-j*re,pe=(1+j)*le+(-1.5-2*j)*ce+(-.5+j)*re+1,me=(-1-te)*le+(1.5+te)*ce+.5*re,we=te*le-te*ce;for(let Fe=0;Fe!==S;++Fe)v[Fe]=de*w[L+Fe]+pe*w[D+Fe]+me*w[I+Fe]+we*w[Y+Fe];return v}}class Sd extends yl{constructor(n,u,p,m){super(n,u,p,m)}interpolate_(n,u,p,m){const v=this.resultBuffer,w=this.sampleValues,S=this.valueSize,I=n*S,D=I-S,L=(p-u)/(m-u),Y=1-L;for(let j=0;j!==S;++j)v[j]=w[D+j]*Y+w[I+j]*L;return v}}class Lf extends yl{constructor(n,u,p,m){super(n,u,p,m)}interpolate_(n){return this.copySampleValue_(n-1)}}class zs{constructor(n,u,p,m){if(n===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(u===void 0||u.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+n);this.name=n,this.times=A1(u,this.TimeBufferType),this.values=A1(p,this.ValueBufferType),this.setInterpolation(m||this.DefaultInterpolation)}static toJSON(n){const u=n.constructor;let p;if(u.toJSON!==this.toJSON)p=u.toJSON(n);else{p={name:n.name,times:A1(n.times,Array),values:A1(n.values,Array)};const m=n.getInterpolation();m!==n.DefaultInterpolation&&(p.interpolation=m)}return p.type=n.ValueTypeName,p}InterpolantFactoryMethodDiscrete(n){return new Lf(this.times,this.values,this.getValueSize(),n)}InterpolantFactoryMethodLinear(n){return new Sd(this.times,this.values,this.getValueSize(),n)}InterpolantFactoryMethodSmooth(n){return new Df(this.times,this.values,this.getValueSize(),n)}setInterpolation(n){let u;switch(n){case sn:u=this.InterpolantFactoryMethodDiscrete;break;case a0:u=this.InterpolantFactoryMethodLinear;break;case Rs:u=this.InterpolantFactoryMethodSmooth}if(u===void 0){const p="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0){if(n===this.DefaultInterpolation)throw new Error(p);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",p),this}return this.createInterpolant=u,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return sn;case this.InterpolantFactoryMethodLinear:return a0;case this.InterpolantFactoryMethodSmooth:return Rs}}getValueSize(){return this.values.length/this.times.length}shift(n){if(n!==0){const u=this.times;for(let p=0,m=u.length;p!==m;++p)u[p]+=n}return this}scale(n){if(n!==1){const u=this.times;for(let p=0,m=u.length;p!==m;++p)u[p]*=n}return this}trim(n,u){const p=this.times,m=p.length;let v=0,w=m-1;for(;v!==m&&p[v]<n;)++v;for(;w!==-1&&p[w]>u;)--w;if(++w,v!==0||w!==m){v>=w&&(w=Math.max(w,1),v=w-1);const S=this.getValueSize();this.times=p.slice(v,w),this.values=this.values.slice(v*S,w*S)}return this}validate(){let n=!0;const u=this.getValueSize();u-Math.floor(u)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),n=!1);const p=this.times,m=this.values,v=p.length;v===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),n=!1);let w=null;for(let S=0;S!==v;S++){const I=p[S];if(typeof I=="number"&&isNaN(I)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,S,I),n=!1;break}if(w!==null&&w>I){console.error("THREE.KeyframeTrack: Out of order keys.",this,S,I,w),n=!1;break}w=I}if(m!==void 0&&Rf(m))for(let S=0,I=m.length;S!==I;++S){const D=m[S];if(isNaN(D)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,S,D),n=!1;break}}return n}optimize(){const n=this.times.slice(),u=this.values.slice(),p=this.getValueSize(),m=this.getInterpolation()===Rs,v=n.length-1;let w=1;for(let S=1;S<v;++S){let I=!1;const D=n[S];if(D!==n[S+1]&&(S!==1||D!==n[0]))if(m)I=!0;else{const L=S*p,Y=L-p,j=L+p;for(let te=0;te!==p;++te){const re=u[L+te];if(re!==u[Y+te]||re!==u[j+te]){I=!0;break}}}if(I){if(S!==w){n[w]=n[S];const L=S*p,Y=w*p;for(let j=0;j!==p;++j)u[Y+j]=u[L+j]}++w}}if(v>0){n[w]=n[v];for(let S=v*p,I=w*p,D=0;D!==p;++D)u[I+D]=u[S+D];++w}return w!==n.length?(this.times=n.slice(0,w),this.values=u.slice(0,w*p)):(this.times=n,this.values=u),this}clone(){const n=this.times.slice(),u=this.values.slice(),p=new this.constructor(this.name,n,u);return p.createInterpolant=this.createInterpolant,p}}zs.prototype.TimeBufferType=Float32Array,zs.prototype.ValueBufferType=Float32Array,zs.prototype.DefaultInterpolation=a0;class m1 extends zs{}m1.prototype.ValueTypeName="bool",m1.prototype.ValueBufferType=Array,m1.prototype.DefaultInterpolation=sn,m1.prototype.InterpolantFactoryMethodLinear=void 0,m1.prototype.InterpolantFactoryMethodSmooth=void 0;class Td extends zs{}Td.prototype.ValueTypeName="color";class g1 extends zs{}g1.prototype.ValueTypeName="number";class Pf extends yl{constructor(n,u,p,m){super(n,u,p,m)}interpolate_(n,u,p,m){const v=this.resultBuffer,w=this.sampleValues,S=this.valueSize,I=(p-u)/(m-u);let D=n*S;for(let L=D+S;D!==L;D+=4)qn.slerpFlat(v,0,w,D-S,w,D,I);return v}}class Ma extends zs{InterpolantFactoryMethodLinear(n){return new Pf(this.times,this.values,this.getValueSize(),n)}}Ma.prototype.ValueTypeName="quaternion",Ma.prototype.DefaultInterpolation=a0,Ma.prototype.InterpolantFactoryMethodSmooth=void 0;class v1 extends zs{}v1.prototype.ValueTypeName="string",v1.prototype.ValueBufferType=Array,v1.prototype.DefaultInterpolation=sn,v1.prototype.InterpolantFactoryMethodLinear=void 0,v1.prototype.InterpolantFactoryMethodSmooth=void 0;class E1 extends zs{}E1.prototype.ValueTypeName="vector";class wl{constructor(n="",u=-1,p=[],m=Bs){this.name=n,this.tracks=p,this.duration=u,this.blendMode=m,this.uuid=F0(),this.duration<0&&this.resetDuration()}static parse(n){const u=[],p=n.tracks,m=1/(n.fps||1);for(let w=0,S=p.length;w!==S;++w)u.push(Kp(p[w]).scale(m));const v=new this(n.name,n.duration,u,n.blendMode);return v.uuid=n.uuid,v}static toJSON(n){const u=[],p=n.tracks,m={name:n.name,duration:n.duration,tracks:u,uuid:n.uuid,blendMode:n.blendMode};for(let v=0,w=p.length;v!==w;++v)u.push(zs.toJSON(p[v]));return m}static CreateFromMorphTargetSequence(n,u,p,m){const v=u.length,w=[];for(let S=0;S<v;S++){let I=[],D=[];I.push((S+v-1)%v,S,(S+1)%v),D.push(0,1,0);const L=Bf(I);I=_d(I,1,L),D=_d(D,1,L),m||I[0]!==0||(I.push(v),D.push(D[0])),w.push(new g1(".morphTargetInfluences["+u[S].name+"]",I,D).scale(1/p))}return new this(n,-1,w)}static findByName(n,u){let p=n;if(!Array.isArray(n)){const m=n;p=m.geometry&&m.geometry.animations||m.animations}for(let m=0;m<p.length;m++)if(p[m].name===u)return p[m];return null}static CreateClipsFromMorphTargetSequences(n,u,p){const m={},v=/^([\w-]*?)([\d]+)$/;for(let S=0,I=n.length;S<I;S++){const D=n[S],L=D.name.match(v);if(L&&L.length>1){const Y=L[1];let j=m[Y];j||(m[Y]=j=[]),j.push(D)}}const w=[];for(const S in m)w.push(this.CreateFromMorphTargetSequence(S,m[S],u,p));return w}static parseAnimation(n,u){if(!n)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const p=function(L,Y,j,te,re){if(j.length!==0){const ce=[],le=[];Md(j,ce,le,te),ce.length!==0&&re.push(new L(Y,ce,le))}},m=[],v=n.name||"default",w=n.fps||30,S=n.blendMode;let I=n.length||-1;const D=n.hierarchy||[];for(let L=0;L<D.length;L++){const Y=D[L].keys;if(Y&&Y.length!==0)if(Y[0].morphTargets){const j={};let te;for(te=0;te<Y.length;te++)if(Y[te].morphTargets)for(let re=0;re<Y[te].morphTargets.length;re++)j[Y[te].morphTargets[re]]=-1;for(const re in j){const ce=[],le=[];for(let de=0;de!==Y[te].morphTargets.length;++de){const pe=Y[te];ce.push(pe.time),le.push(pe.morphTarget===re?1:0)}m.push(new g1(".morphTargetInfluence["+re+"]",ce,le))}I=j.length*w}else{const j=".bones["+u[L].name+"]";p(E1,j+".position",Y,"pos",m),p(Ma,j+".quaternion",Y,"rot",m),p(E1,j+".scale",Y,"scl",m)}}return m.length===0?null:new this(v,I,m,S)}resetDuration(){let n=0;for(let u=0,p=this.tracks.length;u!==p;++u){const m=this.tracks[u];n=Math.max(n,m.times[m.times.length-1])}return this.duration=n,this}trim(){for(let n=0;n<this.tracks.length;n++)this.tracks[n].trim(0,this.duration);return this}validate(){let n=!0;for(let u=0;u<this.tracks.length;u++)n=n&&this.tracks[u].validate();return n}optimize(){for(let n=0;n<this.tracks.length;n++)this.tracks[n].optimize();return this}clone(){const n=[];for(let u=0;u<this.tracks.length;u++)n.push(this.tracks[u].clone());return new this.constructor(this.name,this.duration,n,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Kp(b){if(b.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const n=function(u){switch(u.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return g1;case"vector":case"vector2":case"vector3":case"vector4":return E1;case"color":return Td;case"quaternion":return Ma;case"bool":case"boolean":return m1;case"string":return v1}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+u)}(b.type);if(b.times===void 0){const u=[],p=[];Md(b.keys,u,p,"value"),b.times=u,b.values=p}return n.parse!==void 0?n.parse(b):new n(b.name,b.times,b.values,b.interpolation)}const Qo={enabled:!1,files:{},add:function(b,n){this.enabled!==!1&&(this.files[b]=n)},get:function(b){if(this.enabled!==!1)return this.files[b]},remove:function(b){delete this.files[b]},clear:function(){this.files={}}};class Id{constructor(n,u,p){const m=this;let v,w=!1,S=0,I=0;const D=[];this.onStart=void 0,this.onLoad=n,this.onProgress=u,this.onError=p,this.itemStart=function(L){I++,w===!1&&m.onStart!==void 0&&m.onStart(L,S,I),w=!0},this.itemEnd=function(L){S++,m.onProgress!==void 0&&m.onProgress(L,S,I),S===I&&(w=!1,m.onLoad!==void 0&&m.onLoad())},this.itemError=function(L){m.onError!==void 0&&m.onError(L)},this.resolveURL=function(L){return v?v(L):L},this.setURLModifier=function(L){return v=L,this},this.addHandler=function(L,Y){return D.push(L,Y),this},this.removeHandler=function(L){const Y=D.indexOf(L);return Y!==-1&&D.splice(Y,2),this},this.getHandler=function(L){for(let Y=0,j=D.length;Y<j;Y+=2){const te=D[Y],re=D[Y+1];if(te.global&&(te.lastIndex=0),te.test(L))return re}return null}}}const Rd=new Id;class jn{constructor(n){this.manager=n!==void 0?n:Rd,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(n,u){const p=this;return new Promise(function(m,v){p.load(n,m,u,v)})}parse(){}setCrossOrigin(n){return this.crossOrigin=n,this}setWithCredentials(n){return this.withCredentials=n,this}setPath(n){return this.path=n,this}setResourcePath(n){return this.resourcePath=n,this}setRequestHeader(n){return this.requestHeader=n,this}}jn.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ho={};class Jp extends Error{constructor(n,u){super(n),this.response=u}}class f0 extends jn{constructor(n){super(n)}load(n,u,p,m){n===void 0&&(n=""),this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);const v=Qo.get(n);if(v!==void 0)return this.manager.itemStart(n),setTimeout(()=>{u&&u(v),this.manager.itemEnd(n)},0),v;if(Ho[n]!==void 0)return void Ho[n].push({onLoad:u,onProgress:p,onError:m});Ho[n]=[],Ho[n].push({onLoad:u,onProgress:p,onError:m});const w=new Request(n,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),S=this.mimeType,I=this.responseType;fetch(w).then(D=>{if(D.status===200||D.status===0){if(D.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||D.body===void 0||D.body.getReader===void 0)return D;const L=Ho[n],Y=D.body.getReader(),j=D.headers.get("X-File-Size")||D.headers.get("Content-Length"),te=j?parseInt(j):0,re=te!==0;let ce=0;const le=new ReadableStream({start(de){(function pe(){Y.read().then(({done:me,value:we})=>{if(me)de.close();else{ce+=we.byteLength;const Fe=new ProgressEvent("progress",{lengthComputable:re,loaded:ce,total:te});for(let Be=0,ke=L.length;Be<ke;Be++){const ze=L[Be];ze.onProgress&&ze.onProgress(Fe)}de.enqueue(we),pe()}})})()}});return new Response(le)}throw new Jp(`fetch for "${D.url}" responded with ${D.status}: ${D.statusText}`,D)}).then(D=>{switch(I){case"arraybuffer":return D.arrayBuffer();case"blob":return D.blob();case"document":return D.text().then(L=>new DOMParser().parseFromString(L,S));case"json":return D.json();default:if(S===void 0)return D.text();{const L=/charset="?([^;"\s]*)"?/i.exec(S),Y=L&&L[1]?L[1].toLowerCase():void 0,j=new TextDecoder(Y);return D.arrayBuffer().then(te=>j.decode(te))}}}).then(D=>{Qo.add(n,D);const L=Ho[n];delete Ho[n];for(let Y=0,j=L.length;Y<j;Y++){const te=L[Y];te.onLoad&&te.onLoad(D)}}).catch(D=>{const L=Ho[n];if(L===void 0)throw this.manager.itemError(n),D;delete Ho[n];for(let Y=0,j=L.length;Y<j;Y++){const te=L[Y];te.onError&&te.onError(D)}this.manager.itemError(n)}).finally(()=>{this.manager.itemEnd(n)}),this.manager.itemStart(n)}setResponseType(n){return this.responseType=n,this}setMimeType(n){return this.mimeType=n,this}}class Zp extends jn{constructor(n){super(n)}load(n,u,p,m){const v=this,w=new f0(this.manager);w.setPath(this.path),w.setRequestHeader(this.requestHeader),w.setWithCredentials(this.withCredentials),w.load(n,function(S){try{u(v.parse(JSON.parse(S)))}catch(I){m?m(I):console.error(I),v.manager.itemError(n)}},p,m)}parse(n){const u=[];for(let p=0;p<n.length;p++){const m=wl.parse(n[p]);u.push(m)}return u}}class $p extends jn{constructor(n){super(n)}load(n,u,p,m){const v=this,w=[],S=new _a,I=new f0(this.manager);I.setPath(this.path),I.setResponseType("arraybuffer"),I.setRequestHeader(this.requestHeader),I.setWithCredentials(v.withCredentials);let D=0;function L(Y){I.load(n[Y],function(j){const te=v.parse(j,!0);w[Y]={width:te.width,height:te.height,format:te.format,mipmaps:te.mipmaps},D+=1,D===6&&(te.mipmapCount===1&&(S.minFilter=Wt),S.image=w,S.format=te.format,S.needsUpdate=!0,u&&u(S))},p,m)}if(Array.isArray(n))for(let Y=0,j=n.length;Y<j;++Y)L(Y);else I.load(n,function(Y){const j=v.parse(Y,!0);if(j.isCubemap){const te=j.mipmaps.length/j.mipmapCount;for(let re=0;re<te;re++){w[re]={mipmaps:[]};for(let ce=0;ce<j.mipmapCount;ce++)w[re].mipmaps.push(j.mipmaps[re*j.mipmapCount+ce]),w[re].format=j.format,w[re].width=j.width,w[re].height=j.height}S.image=w}else S.image.width=j.width,S.image.height=j.height,S.mipmaps=j.mipmaps;j.mipmapCount===1&&(S.minFilter=Wt),S.format=j.format,S.needsUpdate=!0,u&&u(S)},p,m);return S}}class Ec extends jn{constructor(n){super(n)}load(n,u,p,m){this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);const v=this,w=Qo.get(n);if(w!==void 0)return v.manager.itemStart(n),setTimeout(function(){u&&u(w),v.manager.itemEnd(n)},0),w;const S=za("img");function I(){L(),Qo.add(n,this),u&&u(this),v.manager.itemEnd(n)}function D(Y){L(),m&&m(Y),v.manager.itemError(n),v.manager.itemEnd(n)}function L(){S.removeEventListener("load",I,!1),S.removeEventListener("error",D,!1)}return S.addEventListener("load",I,!1),S.addEventListener("error",D,!1),n.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(S.crossOrigin=this.crossOrigin),v.manager.itemStart(n),S.src=n,S}}class jp extends jn{constructor(n){super(n)}load(n,u,p,m){const v=new t1;v.colorSpace=An;const w=new Ec(this.manager);w.setCrossOrigin(this.crossOrigin),w.setPath(this.path);let S=0;function I(D){w.load(n[D],function(L){v.images[D]=L,S++,S===6&&(v.needsUpdate=!0,u&&u(v))},void 0,m)}for(let D=0;D<n.length;++D)I(D);return v}}class eA extends jn{constructor(n){super(n)}load(n,u,p,m){const v=this,w=new Gr,S=new f0(this.manager);return S.setResponseType("arraybuffer"),S.setRequestHeader(this.requestHeader),S.setPath(this.path),S.setWithCredentials(v.withCredentials),S.load(n,function(I){let D;try{D=v.parse(I)}catch(L){if(m===void 0)return void console.error(L);m(L)}D.image!==void 0?w.image=D.image:D.data!==void 0&&(w.image.width=D.width,w.image.height=D.height,w.image.data=D.data),w.wrapS=D.wrapS!==void 0?D.wrapS:He,w.wrapT=D.wrapT!==void 0?D.wrapT:He,w.magFilter=D.magFilter!==void 0?D.magFilter:Wt,w.minFilter=D.minFilter!==void 0?D.minFilter:Wt,w.anisotropy=D.anisotropy!==void 0?D.anisotropy:1,D.colorSpace!==void 0&&(w.colorSpace=D.colorSpace),D.flipY!==void 0&&(w.flipY=D.flipY),D.format!==void 0&&(w.format=D.format),D.type!==void 0&&(w.type=D.type),D.mipmaps!==void 0&&(w.mipmaps=D.mipmaps,w.minFilter=st),D.mipmapCount===1&&(w.minFilter=Wt),D.generateMipmaps!==void 0&&(w.generateMipmaps=D.generateMipmaps),w.needsUpdate=!0,u&&u(w,D)},p,m),w}}class Bd extends jn{constructor(n){super(n)}load(n,u,p,m){const v=new on,w=new Ec(this.manager);return w.setCrossOrigin(this.crossOrigin),w.setPath(this.path),w.load(n,function(S){v.image=S,v.needsUpdate=!0,u!==void 0&&u(v)},p,m),v}}class Sa extends yr{constructor(n,u=1){super(),this.isLight=!0,this.type="Light",this.color=new Jt(n),this.intensity=u}dispose(){}copy(n,u){return super.copy(n,u),this.color.copy(n.color),this.intensity=n.intensity,this}toJSON(n){const u=super.toJSON(n);return u.object.color=this.color.getHex(),u.object.intensity=this.intensity,this.groundColor!==void 0&&(u.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(u.object.distance=this.distance),this.angle!==void 0&&(u.object.angle=this.angle),this.decay!==void 0&&(u.object.decay=this.decay),this.penumbra!==void 0&&(u.object.penumbra=this.penumbra),this.shadow!==void 0&&(u.object.shadow=this.shadow.toJSON()),u}}class Ff extends Sa{constructor(n,u,p){super(n,p),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(yr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Jt(u)}copy(n,u){return super.copy(n,u),this.groundColor.copy(n.groundColor),this}}const Dd=new Ii,Of=new Le,kf=new Le;class Ld{constructor(n){this.camera=n,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new zt(512,512),this.map=null,this.mapPass=null,this.matrix=new Ii,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new r1,this._frameExtents=new zt(1,1),this._viewportCount=1,this._viewports=[new Rr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(n){const u=this.camera,p=this.matrix;Of.setFromMatrixPosition(n.matrixWorld),u.position.copy(Of),kf.setFromMatrixPosition(n.target.matrixWorld),u.lookAt(kf),u.updateMatrixWorld(),Dd.multiplyMatrices(u.projectionMatrix,u.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Dd),p.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),p.multiply(Dd)}getViewport(n){return this._viewports[n]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(n){return this.camera=n.camera.clone(),this.bias=n.bias,this.radius=n.radius,this.mapSize.copy(n.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const n={};return this.bias!==0&&(n.bias=this.bias),this.normalBias!==0&&(n.normalBias=this.normalBias),this.radius!==1&&(n.radius=this.radius),this.mapSize.x===512&&this.mapSize.y===512||(n.mapSize=this.mapSize.toArray()),n.camera=this.camera.toJSON(!1).object,delete n.camera.matrix,n}}class tA extends Ld{constructor(){super(new Rn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(n){const u=this.camera,p=2*Ko*n.angle*this.focus,m=this.mapSize.width/this.mapSize.height,v=n.distance||u.far;p===u.fov&&m===u.aspect&&v===u.far||(u.fov=p,u.aspect=m,u.far=v,u.updateProjectionMatrix()),super.updateMatrices(n)}copy(n){return super.copy(n),this.focus=n.focus,this}}class Pd extends Sa{constructor(n,u,p=0,m=Math.PI/3,v=0,w=2){super(n,u),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(yr.DEFAULT_UP),this.updateMatrix(),this.target=new yr,this.distance=p,this.angle=m,this.penumbra=v,this.decay=w,this.map=null,this.shadow=new tA}get power(){return this.intensity*Math.PI}set power(n){this.intensity=n/Math.PI}dispose(){this.shadow.dispose()}copy(n,u){return super.copy(n,u),this.distance=n.distance,this.angle=n.angle,this.penumbra=n.penumbra,this.decay=n.decay,this.target=n.target.clone(),this.shadow=n.shadow.clone(),this}}const Nf=new Ii,yc=new Le,Fd=new Le;class iA extends Ld{constructor(){super(new Rn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new zt(4,2),this._viewportCount=6,this._viewports=[new Rr(2,1,1,1),new Rr(0,1,1,1),new Rr(3,1,1,1),new Rr(1,1,1,1),new Rr(3,0,1,1),new Rr(1,0,1,1)],this._cubeDirections=[new Le(1,0,0),new Le(-1,0,0),new Le(0,0,1),new Le(0,0,-1),new Le(0,1,0),new Le(0,-1,0)],this._cubeUps=[new Le(0,1,0),new Le(0,1,0),new Le(0,1,0),new Le(0,1,0),new Le(0,0,1),new Le(0,0,-1)]}updateMatrices(n,u=0){const p=this.camera,m=this.matrix,v=n.distance||p.far;v!==p.far&&(p.far=v,p.updateProjectionMatrix()),yc.setFromMatrixPosition(n.matrixWorld),p.position.copy(yc),Fd.copy(p.position),Fd.add(this._cubeDirections[u]),p.up.copy(this._cubeUps[u]),p.lookAt(Fd),p.updateMatrixWorld(),m.makeTranslation(-yc.x,-yc.y,-yc.z),Nf.multiplyMatrices(p.projectionMatrix,p.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Nf)}}class Od extends Sa{constructor(n,u,p=0,m=2){super(n,u),this.isPointLight=!0,this.type="PointLight",this.distance=p,this.decay=m,this.shadow=new iA}get power(){return 4*this.intensity*Math.PI}set power(n){this.intensity=n/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(n,u){return super.copy(n,u),this.distance=n.distance,this.decay=n.decay,this.shadow=n.shadow.clone(),this}}class rA extends Ld{constructor(){super(new ua(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class kd extends Sa{constructor(n,u){super(n,u),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(yr.DEFAULT_UP),this.updateMatrix(),this.target=new yr,this.shadow=new rA}dispose(){this.shadow.dispose()}copy(n){return super.copy(n),this.target=n.target.clone(),this.shadow=n.shadow.clone(),this}}class Uf extends Sa{constructor(n,u){super(n,u),this.isAmbientLight=!0,this.type="AmbientLight"}}class Qf extends Sa{constructor(n,u,p=10,m=10){super(n,u),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=p,this.height=m}get power(){return this.intensity*this.width*this.height*Math.PI}set power(n){this.intensity=n/(this.width*this.height*Math.PI)}copy(n){return super.copy(n),this.width=n.width,this.height=n.height,this}toJSON(n){const u=super.toJSON(n);return u.object.width=this.width,u.object.height=this.height,u}}class bl{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let n=0;n<9;n++)this.coefficients.push(new Le)}set(n){for(let u=0;u<9;u++)this.coefficients[u].copy(n[u]);return this}zero(){for(let n=0;n<9;n++)this.coefficients[n].set(0,0,0);return this}getAt(n,u){const p=n.x,m=n.y,v=n.z,w=this.coefficients;return u.copy(w[0]).multiplyScalar(.282095),u.addScaledVector(w[1],.488603*m),u.addScaledVector(w[2],.488603*v),u.addScaledVector(w[3],.488603*p),u.addScaledVector(w[4],p*m*1.092548),u.addScaledVector(w[5],m*v*1.092548),u.addScaledVector(w[6],.315392*(3*v*v-1)),u.addScaledVector(w[7],p*v*1.092548),u.addScaledVector(w[8],.546274*(p*p-m*m)),u}getIrradianceAt(n,u){const p=n.x,m=n.y,v=n.z,w=this.coefficients;return u.copy(w[0]).multiplyScalar(.886227),u.addScaledVector(w[1],1.023328*m),u.addScaledVector(w[2],1.023328*v),u.addScaledVector(w[3],1.023328*p),u.addScaledVector(w[4],.858086*p*m),u.addScaledVector(w[5],.858086*m*v),u.addScaledVector(w[6],.743125*v*v-.247708),u.addScaledVector(w[7],.858086*p*v),u.addScaledVector(w[8],.429043*(p*p-m*m)),u}add(n){for(let u=0;u<9;u++)this.coefficients[u].add(n.coefficients[u]);return this}addScaledSH(n,u){for(let p=0;p<9;p++)this.coefficients[p].addScaledVector(n.coefficients[p],u);return this}scale(n){for(let u=0;u<9;u++)this.coefficients[u].multiplyScalar(n);return this}lerp(n,u){for(let p=0;p<9;p++)this.coefficients[p].lerp(n.coefficients[p],u);return this}equals(n){for(let u=0;u<9;u++)if(!this.coefficients[u].equals(n.coefficients[u]))return!1;return!0}copy(n){return this.set(n.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(n,u=0){const p=this.coefficients;for(let m=0;m<9;m++)p[m].fromArray(n,u+3*m);return this}toArray(n=[],u=0){const p=this.coefficients;for(let m=0;m<9;m++)p[m].toArray(n,u+3*m);return n}static getBasisAt(n,u){const p=n.x,m=n.y,v=n.z;u[0]=.282095,u[1]=.488603*m,u[2]=.488603*v,u[3]=.488603*p,u[4]=1.092548*p*m,u[5]=1.092548*m*v,u[6]=.315392*(3*v*v-1),u[7]=1.092548*p*v,u[8]=.546274*(p*p-m*m)}}class au extends Sa{constructor(n=new bl,u=1){super(void 0,u),this.isLightProbe=!0,this.sh=n}copy(n){return super.copy(n),this.sh.copy(n.sh),this}fromJSON(n){return this.intensity=n.intensity,this.sh.fromArray(n.sh),this}toJSON(n){const u=super.toJSON(n);return u.object.sh=this.sh.toArray(),u}}class lu extends jn{constructor(n){super(n),this.textures={}}load(n,u,p,m){const v=this,w=new f0(v.manager);w.setPath(v.path),w.setRequestHeader(v.requestHeader),w.setWithCredentials(v.withCredentials),w.load(n,function(S){try{u(v.parse(JSON.parse(S)))}catch(I){m?m(I):console.error(I),v.manager.itemError(n)}},p,m)}parse(n){const u=this.textures;function p(v){return u[v]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",v),u[v]}const m=lu.createMaterialFromType(n.type);if(n.uuid!==void 0&&(m.uuid=n.uuid),n.name!==void 0&&(m.name=n.name),n.color!==void 0&&m.color!==void 0&&m.color.setHex(n.color),n.roughness!==void 0&&(m.roughness=n.roughness),n.metalness!==void 0&&(m.metalness=n.metalness),n.sheen!==void 0&&(m.sheen=n.sheen),n.sheenColor!==void 0&&(m.sheenColor=new Jt().setHex(n.sheenColor)),n.sheenRoughness!==void 0&&(m.sheenRoughness=n.sheenRoughness),n.emissive!==void 0&&m.emissive!==void 0&&m.emissive.setHex(n.emissive),n.specular!==void 0&&m.specular!==void 0&&m.specular.setHex(n.specular),n.specularIntensity!==void 0&&(m.specularIntensity=n.specularIntensity),n.specularColor!==void 0&&m.specularColor!==void 0&&m.specularColor.setHex(n.specularColor),n.shininess!==void 0&&(m.shininess=n.shininess),n.clearcoat!==void 0&&(m.clearcoat=n.clearcoat),n.clearcoatRoughness!==void 0&&(m.clearcoatRoughness=n.clearcoatRoughness),n.dispersion!==void 0&&(m.dispersion=n.dispersion),n.iridescence!==void 0&&(m.iridescence=n.iridescence),n.iridescenceIOR!==void 0&&(m.iridescenceIOR=n.iridescenceIOR),n.iridescenceThicknessRange!==void 0&&(m.iridescenceThicknessRange=n.iridescenceThicknessRange),n.transmission!==void 0&&(m.transmission=n.transmission),n.thickness!==void 0&&(m.thickness=n.thickness),n.attenuationDistance!==void 0&&(m.attenuationDistance=n.attenuationDistance),n.attenuationColor!==void 0&&m.attenuationColor!==void 0&&m.attenuationColor.setHex(n.attenuationColor),n.anisotropy!==void 0&&(m.anisotropy=n.anisotropy),n.anisotropyRotation!==void 0&&(m.anisotropyRotation=n.anisotropyRotation),n.fog!==void 0&&(m.fog=n.fog),n.flatShading!==void 0&&(m.flatShading=n.flatShading),n.blending!==void 0&&(m.blending=n.blending),n.combine!==void 0&&(m.combine=n.combine),n.side!==void 0&&(m.side=n.side),n.shadowSide!==void 0&&(m.shadowSide=n.shadowSide),n.opacity!==void 0&&(m.opacity=n.opacity),n.transparent!==void 0&&(m.transparent=n.transparent),n.alphaTest!==void 0&&(m.alphaTest=n.alphaTest),n.alphaHash!==void 0&&(m.alphaHash=n.alphaHash),n.depthFunc!==void 0&&(m.depthFunc=n.depthFunc),n.depthTest!==void 0&&(m.depthTest=n.depthTest),n.depthWrite!==void 0&&(m.depthWrite=n.depthWrite),n.colorWrite!==void 0&&(m.colorWrite=n.colorWrite),n.blendSrc!==void 0&&(m.blendSrc=n.blendSrc),n.blendDst!==void 0&&(m.blendDst=n.blendDst),n.blendEquation!==void 0&&(m.blendEquation=n.blendEquation),n.blendSrcAlpha!==void 0&&(m.blendSrcAlpha=n.blendSrcAlpha),n.blendDstAlpha!==void 0&&(m.blendDstAlpha=n.blendDstAlpha),n.blendEquationAlpha!==void 0&&(m.blendEquationAlpha=n.blendEquationAlpha),n.blendColor!==void 0&&m.blendColor!==void 0&&m.blendColor.setHex(n.blendColor),n.blendAlpha!==void 0&&(m.blendAlpha=n.blendAlpha),n.stencilWriteMask!==void 0&&(m.stencilWriteMask=n.stencilWriteMask),n.stencilFunc!==void 0&&(m.stencilFunc=n.stencilFunc),n.stencilRef!==void 0&&(m.stencilRef=n.stencilRef),n.stencilFuncMask!==void 0&&(m.stencilFuncMask=n.stencilFuncMask),n.stencilFail!==void 0&&(m.stencilFail=n.stencilFail),n.stencilZFail!==void 0&&(m.stencilZFail=n.stencilZFail),n.stencilZPass!==void 0&&(m.stencilZPass=n.stencilZPass),n.stencilWrite!==void 0&&(m.stencilWrite=n.stencilWrite),n.wireframe!==void 0&&(m.wireframe=n.wireframe),n.wireframeLinewidth!==void 0&&(m.wireframeLinewidth=n.wireframeLinewidth),n.wireframeLinecap!==void 0&&(m.wireframeLinecap=n.wireframeLinecap),n.wireframeLinejoin!==void 0&&(m.wireframeLinejoin=n.wireframeLinejoin),n.rotation!==void 0&&(m.rotation=n.rotation),n.linewidth!==void 0&&(m.linewidth=n.linewidth),n.dashSize!==void 0&&(m.dashSize=n.dashSize),n.gapSize!==void 0&&(m.gapSize=n.gapSize),n.scale!==void 0&&(m.scale=n.scale),n.polygonOffset!==void 0&&(m.polygonOffset=n.polygonOffset),n.polygonOffsetFactor!==void 0&&(m.polygonOffsetFactor=n.polygonOffsetFactor),n.polygonOffsetUnits!==void 0&&(m.polygonOffsetUnits=n.polygonOffsetUnits),n.dithering!==void 0&&(m.dithering=n.dithering),n.alphaToCoverage!==void 0&&(m.alphaToCoverage=n.alphaToCoverage),n.premultipliedAlpha!==void 0&&(m.premultipliedAlpha=n.premultipliedAlpha),n.forceSinglePass!==void 0&&(m.forceSinglePass=n.forceSinglePass),n.visible!==void 0&&(m.visible=n.visible),n.toneMapped!==void 0&&(m.toneMapped=n.toneMapped),n.userData!==void 0&&(m.userData=n.userData),n.vertexColors!==void 0&&(typeof n.vertexColors=="number"?m.vertexColors=n.vertexColors>0:m.vertexColors=n.vertexColors),n.uniforms!==void 0)for(const v in n.uniforms){const w=n.uniforms[v];switch(m.uniforms[v]={},w.type){case"t":m.uniforms[v].value=p(w.value);break;case"c":m.uniforms[v].value=new Jt().setHex(w.value);break;case"v2":m.uniforms[v].value=new zt().fromArray(w.value);break;case"v3":m.uniforms[v].value=new Le().fromArray(w.value);break;case"v4":m.uniforms[v].value=new Rr().fromArray(w.value);break;case"m3":m.uniforms[v].value=new $i().fromArray(w.value);break;case"m4":m.uniforms[v].value=new Ii().fromArray(w.value);break;default:m.uniforms[v].value=w.value}}if(n.defines!==void 0&&(m.defines=n.defines),n.vertexShader!==void 0&&(m.vertexShader=n.vertexShader),n.fragmentShader!==void 0&&(m.fragmentShader=n.fragmentShader),n.glslVersion!==void 0&&(m.glslVersion=n.glslVersion),n.extensions!==void 0)for(const v in n.extensions)m.extensions[v]=n.extensions[v];if(n.lights!==void 0&&(m.lights=n.lights),n.clipping!==void 0&&(m.clipping=n.clipping),n.size!==void 0&&(m.size=n.size),n.sizeAttenuation!==void 0&&(m.sizeAttenuation=n.sizeAttenuation),n.map!==void 0&&(m.map=p(n.map)),n.matcap!==void 0&&(m.matcap=p(n.matcap)),n.alphaMap!==void 0&&(m.alphaMap=p(n.alphaMap)),n.bumpMap!==void 0&&(m.bumpMap=p(n.bumpMap)),n.bumpScale!==void 0&&(m.bumpScale=n.bumpScale),n.normalMap!==void 0&&(m.normalMap=p(n.normalMap)),n.normalMapType!==void 0&&(m.normalMapType=n.normalMapType),n.normalScale!==void 0){let v=n.normalScale;Array.isArray(v)===!1&&(v=[v,v]),m.normalScale=new zt().fromArray(v)}return n.displacementMap!==void 0&&(m.displacementMap=p(n.displacementMap)),n.displacementScale!==void 0&&(m.displacementScale=n.displacementScale),n.displacementBias!==void 0&&(m.displacementBias=n.displacementBias),n.roughnessMap!==void 0&&(m.roughnessMap=p(n.roughnessMap)),n.metalnessMap!==void 0&&(m.metalnessMap=p(n.metalnessMap)),n.emissiveMap!==void 0&&(m.emissiveMap=p(n.emissiveMap)),n.emissiveIntensity!==void 0&&(m.emissiveIntensity=n.emissiveIntensity),n.specularMap!==void 0&&(m.specularMap=p(n.specularMap)),n.specularIntensityMap!==void 0&&(m.specularIntensityMap=p(n.specularIntensityMap)),n.specularColorMap!==void 0&&(m.specularColorMap=p(n.specularColorMap)),n.envMap!==void 0&&(m.envMap=p(n.envMap)),n.envMapRotation!==void 0&&m.envMapRotation.fromArray(n.envMapRotation),n.envMapIntensity!==void 0&&(m.envMapIntensity=n.envMapIntensity),n.reflectivity!==void 0&&(m.reflectivity=n.reflectivity),n.refractionRatio!==void 0&&(m.refractionRatio=n.refractionRatio),n.lightMap!==void 0&&(m.lightMap=p(n.lightMap)),n.lightMapIntensity!==void 0&&(m.lightMapIntensity=n.lightMapIntensity),n.aoMap!==void 0&&(m.aoMap=p(n.aoMap)),n.aoMapIntensity!==void 0&&(m.aoMapIntensity=n.aoMapIntensity),n.gradientMap!==void 0&&(m.gradientMap=p(n.gradientMap)),n.clearcoatMap!==void 0&&(m.clearcoatMap=p(n.clearcoatMap)),n.clearcoatRoughnessMap!==void 0&&(m.clearcoatRoughnessMap=p(n.clearcoatRoughnessMap)),n.clearcoatNormalMap!==void 0&&(m.clearcoatNormalMap=p(n.clearcoatNormalMap)),n.clearcoatNormalScale!==void 0&&(m.clearcoatNormalScale=new zt().fromArray(n.clearcoatNormalScale)),n.iridescenceMap!==void 0&&(m.iridescenceMap=p(n.iridescenceMap)),n.iridescenceThicknessMap!==void 0&&(m.iridescenceThicknessMap=p(n.iridescenceThicknessMap)),n.transmissionMap!==void 0&&(m.transmissionMap=p(n.transmissionMap)),n.thicknessMap!==void 0&&(m.thicknessMap=p(n.thicknessMap)),n.anisotropyMap!==void 0&&(m.anisotropyMap=p(n.anisotropyMap)),n.sheenColorMap!==void 0&&(m.sheenColorMap=p(n.sheenColorMap)),n.sheenRoughnessMap!==void 0&&(m.sheenRoughnessMap=p(n.sheenRoughnessMap)),m}setTextures(n){return this.textures=n,this}static createMaterialFromType(n){return new{ShadowMaterial:Cf,SpriteMaterial:sc,RawShaderMaterial:xf,ShaderMaterial:Q0,PointsMaterial:Bn,MeshPhysicalMaterial:Cs,MeshStandardMaterial:vc,MeshPhongMaterial:ou,MeshToonMaterial:_f,MeshNormalMaterial:Mf,MeshLambertMaterial:Sf,MeshDepthMaterial:jl,MeshDistanceMaterial:ec,MeshBasicMaterial:U0,MeshMatcapMaterial:Tf,LineDashedMaterial:If,LineBasicMaterial:Un,Material:en}[n]}}class zo{static decodeText(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let u="";for(let p=0,m=n.length;p<m;p++)u+=String.fromCharCode(n[p]);try{return decodeURIComponent(escape(u))}catch{return u}}static extractUrlBase(n){const u=n.lastIndexOf("/");return u===-1?"./":n.slice(0,u+1)}static resolveURL(n,u){return typeof n!="string"||n===""?"":(/^https?:\/\//i.test(u)&&/^\//.test(n)&&(u=u.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(n)||/^data:.*,.*$/i.test(n)||/^blob:.*$/i.test(n)?n:u+n)}}class Hf extends Xi{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(n){return super.copy(n),this.instanceCount=n.instanceCount,this}toJSON(){const n=super.toJSON();return n.instanceCount=this.instanceCount,n.isInstancedBufferGeometry=!0,n}}class zf extends jn{constructor(n){super(n)}load(n,u,p,m){const v=this,w=new f0(v.manager);w.setPath(v.path),w.setRequestHeader(v.requestHeader),w.setWithCredentials(v.withCredentials),w.load(n,function(S){try{u(v.parse(JSON.parse(S)))}catch(I){m?m(I):console.error(I),v.manager.itemError(n)}},p,m)}parse(n){const u={},p={};function m(Y,j){if(u[j]!==void 0)return u[j];const te=Y.interleavedBuffers[j],re=function(de,pe){if(p[pe]!==void 0)return p[pe];const me=de.arrayBuffers[pe],we=new Uint32Array(me).buffer;return p[pe]=we,we}(Y,te.buffer),ce=Jo(te.type,re),le=new Lo(ce,te.stride);return le.uuid=te.uuid,u[j]=le,le}const v=n.isInstancedBufferGeometry?new Hf:new Xi,w=n.data.index;if(w!==void 0){const Y=Jo(w.type,w.array);v.setIndex(new nr(Y,1))}const S=n.data.attributes;for(const Y in S){const j=S[Y];let te;if(j.isInterleavedBufferAttribute){const re=m(n.data,j.data);te=new u0(re,j.itemSize,j.offset,j.normalized)}else{const re=Jo(j.type,j.array);te=new(j.isInstancedBufferAttribute?bs:nr)(re,j.itemSize,j.normalized)}j.name!==void 0&&(te.name=j.name),j.usage!==void 0&&te.setUsage(j.usage),v.setAttribute(Y,te)}const I=n.data.morphAttributes;if(I)for(const Y in I){const j=I[Y],te=[];for(let re=0,ce=j.length;re<ce;re++){const le=j[re];let de;if(le.isInterleavedBufferAttribute){const pe=m(n.data,le.data);de=new u0(pe,le.itemSize,le.offset,le.normalized)}else{const pe=Jo(le.type,le.array);de=new nr(pe,le.itemSize,le.normalized)}le.name!==void 0&&(de.name=le.name),te.push(de)}v.morphAttributes[Y]=te}n.data.morphTargetsRelative&&(v.morphTargetsRelative=!0);const D=n.data.groups||n.data.drawcalls||n.data.offsets;if(D!==void 0)for(let Y=0,j=D.length;Y!==j;++Y){const te=D[Y];v.addGroup(te.start,te.count,te.materialIndex)}const L=n.data.boundingSphere;if(L!==void 0){const Y=new Le;L.center!==void 0&&Y.fromArray(L.center),v.boundingSphere=new Yn(Y,L.radius)}return n.name&&(v.name=n.name),n.userData&&(v.userData=n.userData),v}}class nA extends jn{constructor(n){super(n)}load(n,u,p,m){const v=this,w=this.path===""?zo.extractUrlBase(n):this.path;this.resourcePath=this.resourcePath||w;const S=new f0(this.manager);S.setPath(this.path),S.setRequestHeader(this.requestHeader),S.setWithCredentials(this.withCredentials),S.load(n,function(I){let D=null;try{D=JSON.parse(I)}catch(Y){return m!==void 0&&m(Y),void console.error("THREE:ObjectLoader: Can't parse "+n+".",Y.message)}const L=D.metadata;if(L===void 0||L.type===void 0||L.type.toLowerCase()==="geometry")return m!==void 0&&m(new Error("THREE.ObjectLoader: Can't load "+n)),void console.error("THREE.ObjectLoader: Can't load "+n);v.parse(D,u)},p,m)}async loadAsync(n,u){const p=this.path===""?zo.extractUrlBase(n):this.path;this.resourcePath=this.resourcePath||p;const m=new f0(this.manager);m.setPath(this.path),m.setRequestHeader(this.requestHeader),m.setWithCredentials(this.withCredentials);const v=await m.loadAsync(n,u),w=JSON.parse(v),S=w.metadata;if(S===void 0||S.type===void 0||S.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+n);return await this.parseAsync(w)}parse(n,u){const p=this.parseAnimations(n.animations),m=this.parseShapes(n.shapes),v=this.parseGeometries(n.geometries,m),w=this.parseImages(n.images,function(){u!==void 0&&u(D)}),S=this.parseTextures(n.textures,w),I=this.parseMaterials(n.materials,S),D=this.parseObject(n.object,v,I,S,p),L=this.parseSkeletons(n.skeletons,D);if(this.bindSkeletons(D,L),u!==void 0){let Y=!1;for(const j in w)if(w[j].data instanceof HTMLImageElement){Y=!0;break}Y===!1&&u(D)}return D}async parseAsync(n){const u=this.parseAnimations(n.animations),p=this.parseShapes(n.shapes),m=this.parseGeometries(n.geometries,p),v=await this.parseImagesAsync(n.images),w=this.parseTextures(n.textures,v),S=this.parseMaterials(n.materials,w),I=this.parseObject(n.object,m,S,w,u),D=this.parseSkeletons(n.skeletons,I);return this.bindSkeletons(I,D),I}parseShapes(n){const u={};if(n!==void 0)for(let p=0,m=n.length;p<m;p++){const v=new Et().fromJSON(n[p]);u[v.uuid]=v}return u}parseSkeletons(n,u){const p={},m={};if(u.traverse(function(v){v.isBone&&(m[v.uuid]=v)}),n!==void 0)for(let v=0,w=n.length;v<w;v++){const S=new dl().fromJSON(n[v],m);p[S.uuid]=S}return p}parseGeometries(n,u){const p={};if(n!==void 0){const m=new zf;for(let v=0,w=n.length;v<w;v++){let S;const I=n[v];switch(I.type){case"BufferGeometry":case"InstancedBufferGeometry":S=m.parse(I);break;case"Geometry":"THREE"in window&&"LegacyJSONLoader"in THREE?S=new THREE.LegacyJSONLoader().parse(I,this.resourcePath).geometry:console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:I.type in bf?S=bf[I.type].fromJSON(I,u):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${I.type}"`)}S.uuid=I.uuid,I.name!==void 0&&(S.name=I.name),I.userData!==void 0&&(S.userData=I.userData),p[I.uuid]=S}}return p}parseMaterials(n,u){const p={},m={};if(n!==void 0){const v=new lu;v.setTextures(u);for(let w=0,S=n.length;w<S;w++){const I=n[w];p[I.uuid]===void 0&&(p[I.uuid]=v.parse(I)),m[I.uuid]=p[I.uuid]}}return m}parseAnimations(n){const u={};if(n!==void 0)for(let p=0;p<n.length;p++){const m=n[p],v=wl.parse(m);u[v.uuid]=v}return u}parseImages(n,u){const p=this,m={};let v;function w(S){if(typeof S=="string"){const I=S;return function(D){return p.manager.itemStart(D),v.load(D,function(){p.manager.itemEnd(D)},void 0,function(){p.manager.itemError(D),p.manager.itemEnd(D)})}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(I)?I:p.resourcePath+I)}return S.data?{data:Jo(S.type,S.data),width:S.width,height:S.height}:null}if(n!==void 0&&n.length>0){const S=new Id(u);v=new Ec(S),v.setCrossOrigin(this.crossOrigin);for(let I=0,D=n.length;I<D;I++){const L=n[I],Y=L.url;if(Array.isArray(Y)){const j=[];for(let te=0,re=Y.length;te<re;te++){const ce=w(Y[te]);ce!==null&&(ce instanceof HTMLImageElement?j.push(ce):j.push(new Gr(ce.data,ce.width,ce.height)))}m[L.uuid]=new Js(j)}else{const j=w(L.url);m[L.uuid]=new Js(j)}}}return m}async parseImagesAsync(n){const u=this,p={};let m;async function v(w){if(typeof w=="string"){const S=w,I=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(S)?S:u.resourcePath+S;return await m.loadAsync(I)}return w.data?{data:Jo(w.type,w.data),width:w.width,height:w.height}:null}if(n!==void 0&&n.length>0){m=new Ec(this.manager),m.setCrossOrigin(this.crossOrigin);for(let w=0,S=n.length;w<S;w++){const I=n[w],D=I.url;if(Array.isArray(D)){const L=[];for(let Y=0,j=D.length;Y<j;Y++){const te=D[Y],re=await v(te);re!==null&&(re instanceof HTMLImageElement?L.push(re):L.push(new Gr(re.data,re.width,re.height)))}p[I.uuid]=new Js(L)}else{const L=await v(I.url);p[I.uuid]=new Js(L)}}}return p}parseTextures(n,u){function p(v,w){return typeof v=="number"?v:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",v),w[v])}const m={};if(n!==void 0)for(let v=0,w=n.length;v<w;v++){const S=n[v];S.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',S.uuid),u[S.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",S.image);const I=u[S.image],D=I.data;let L;Array.isArray(D)?(L=new t1,D.length===6&&(L.needsUpdate=!0)):(L=D&&D.data?new Gr:new on,D&&(L.needsUpdate=!0)),L.source=I,L.uuid=S.uuid,S.name!==void 0&&(L.name=S.name),S.mapping!==void 0&&(L.mapping=p(S.mapping,sA)),S.channel!==void 0&&(L.channel=S.channel),S.offset!==void 0&&L.offset.fromArray(S.offset),S.repeat!==void 0&&L.repeat.fromArray(S.repeat),S.center!==void 0&&L.center.fromArray(S.center),S.rotation!==void 0&&(L.rotation=S.rotation),S.wrap!==void 0&&(L.wrapS=p(S.wrap[0],Gf),L.wrapT=p(S.wrap[1],Gf)),S.format!==void 0&&(L.format=S.format),S.internalFormat!==void 0&&(L.internalFormat=S.internalFormat),S.type!==void 0&&(L.type=S.type),S.colorSpace!==void 0&&(L.colorSpace=S.colorSpace),S.minFilter!==void 0&&(L.minFilter=p(S.minFilter,Vf)),S.magFilter!==void 0&&(L.magFilter=p(S.magFilter,Vf)),S.anisotropy!==void 0&&(L.anisotropy=S.anisotropy),S.flipY!==void 0&&(L.flipY=S.flipY),S.generateMipmaps!==void 0&&(L.generateMipmaps=S.generateMipmaps),S.premultiplyAlpha!==void 0&&(L.premultiplyAlpha=S.premultiplyAlpha),S.unpackAlignment!==void 0&&(L.unpackAlignment=S.unpackAlignment),S.compareFunction!==void 0&&(L.compareFunction=S.compareFunction),S.userData!==void 0&&(L.userData=S.userData),m[S.uuid]=L}return m}parseObject(n,u,p,m,v){let w,S,I;function D(j){return u[j]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",j),u[j]}function L(j){if(j!==void 0){if(Array.isArray(j)){const te=[];for(let re=0,ce=j.length;re<ce;re++){const le=j[re];p[le]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",le),te.push(p[le])}return te}return p[j]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",j),p[j]}}function Y(j){return m[j]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",j),m[j]}switch(n.type){case"Scene":w=new nc,n.background!==void 0&&(Number.isInteger(n.background)?w.background=new Jt(n.background):w.background=Y(n.background)),n.environment!==void 0&&(w.environment=Y(n.environment)),n.fog!==void 0&&(n.fog.type==="Fog"?w.fog=new rl(n.fog.color,n.fog.near,n.fog.far):n.fog.type==="FogExp2"&&(w.fog=new il(n.fog.color,n.fog.density)),n.fog.name!==""&&(w.fog.name=n.fog.name)),n.backgroundBlurriness!==void 0&&(w.backgroundBlurriness=n.backgroundBlurriness),n.backgroundIntensity!==void 0&&(w.backgroundIntensity=n.backgroundIntensity),n.backgroundRotation!==void 0&&w.backgroundRotation.fromArray(n.backgroundRotation),n.environmentIntensity!==void 0&&(w.environmentIntensity=n.environmentIntensity),n.environmentRotation!==void 0&&w.environmentRotation.fromArray(n.environmentRotation);break;case"PerspectiveCamera":w=new Rn(n.fov,n.aspect,n.near,n.far),n.focus!==void 0&&(w.focus=n.focus),n.zoom!==void 0&&(w.zoom=n.zoom),n.filmGauge!==void 0&&(w.filmGauge=n.filmGauge),n.filmOffset!==void 0&&(w.filmOffset=n.filmOffset),n.view!==void 0&&(w.view=Object.assign({},n.view));break;case"OrthographicCamera":w=new ua(n.left,n.right,n.top,n.bottom,n.near,n.far),n.zoom!==void 0&&(w.zoom=n.zoom),n.view!==void 0&&(w.view=Object.assign({},n.view));break;case"AmbientLight":w=new Uf(n.color,n.intensity);break;case"DirectionalLight":w=new kd(n.color,n.intensity);break;case"PointLight":w=new Od(n.color,n.intensity,n.distance,n.decay);break;case"RectAreaLight":w=new Qf(n.color,n.intensity,n.width,n.height);break;case"SpotLight":w=new Pd(n.color,n.intensity,n.distance,n.angle,n.penumbra,n.decay);break;case"HemisphereLight":w=new Ff(n.color,n.groundColor,n.intensity);break;case"LightProbe":w=new au().fromJSON(n);break;case"SkinnedMesh":S=D(n.geometry),I=L(n.material),w=new gt(S,I),n.bindMode!==void 0&&(w.bindMode=n.bindMode),n.bindMatrix!==void 0&&w.bindMatrix.fromArray(n.bindMatrix),n.skeleton!==void 0&&(w.skeleton=n.skeleton);break;case"Mesh":S=D(n.geometry),I=L(n.material),w=new cn(S,I);break;case"InstancedMesh":S=D(n.geometry),I=L(n.material);const j=n.count,te=n.instanceMatrix,re=n.instanceColor;w=new cc(S,I,j),w.instanceMatrix=new bs(new Float32Array(te.array),16),re!==void 0&&(w.instanceColor=new bs(new Float32Array(re.array),re.itemSize));break;case"BatchedMesh":S=D(n.geometry),I=L(n.material),w=new Wh(n.maxGeometryCount,n.maxVertexCount,n.maxIndexCount,I),w.geometry=S,w.perObjectFrustumCulled=n.perObjectFrustumCulled,w.sortObjects=n.sortObjects,w._drawRanges=n.drawRanges,w._reservedRanges=n.reservedRanges,w._visibility=n.visibility,w._active=n.active,w._bounds=n.bounds.map(ce=>{const le=new Xn;le.min.fromArray(ce.boxMin),le.max.fromArray(ce.boxMax);const de=new Yn;return de.radius=ce.sphereRadius,de.center.fromArray(ce.sphereCenter),{boxInitialized:ce.boxInitialized,box:le,sphereInitialized:ce.sphereInitialized,sphere:de}}),w._maxGeometryCount=n.maxGeometryCount,w._maxVertexCount=n.maxVertexCount,w._maxIndexCount=n.maxIndexCount,w._geometryInitialized=n.geometryInitialized,w._geometryCount=n.geometryCount,w._matricesTexture=Y(n.matricesTexture.uuid);break;case"LOD":w=new Uh;break;case"Line":w=new Hs(D(n.geometry),L(n.material));break;case"LineLoop":w=new dc(D(n.geometry),L(n.material));break;case"LineSegments":w=new Zn(D(n.geometry),L(n.material));break;case"PointCloud":case"Points":w=new No(D(n.geometry),L(n.material));break;case"Sprite":w=new kh(L(n.material));break;case"Group":w=new Y0;break;case"Bone":w=new an;break;default:w=new yr}if(w.uuid=n.uuid,n.name!==void 0&&(w.name=n.name),n.matrix!==void 0?(w.matrix.fromArray(n.matrix),n.matrixAutoUpdate!==void 0&&(w.matrixAutoUpdate=n.matrixAutoUpdate),w.matrixAutoUpdate&&w.matrix.decompose(w.position,w.quaternion,w.scale)):(n.position!==void 0&&w.position.fromArray(n.position),n.rotation!==void 0&&w.rotation.fromArray(n.rotation),n.quaternion!==void 0&&w.quaternion.fromArray(n.quaternion),n.scale!==void 0&&w.scale.fromArray(n.scale)),n.up!==void 0&&w.up.fromArray(n.up),n.castShadow!==void 0&&(w.castShadow=n.castShadow),n.receiveShadow!==void 0&&(w.receiveShadow=n.receiveShadow),n.shadow&&(n.shadow.bias!==void 0&&(w.shadow.bias=n.shadow.bias),n.shadow.normalBias!==void 0&&(w.shadow.normalBias=n.shadow.normalBias),n.shadow.radius!==void 0&&(w.shadow.radius=n.shadow.radius),n.shadow.mapSize!==void 0&&w.shadow.mapSize.fromArray(n.shadow.mapSize),n.shadow.camera!==void 0&&(w.shadow.camera=this.parseObject(n.shadow.camera))),n.visible!==void 0&&(w.visible=n.visible),n.frustumCulled!==void 0&&(w.frustumCulled=n.frustumCulled),n.renderOrder!==void 0&&(w.renderOrder=n.renderOrder),n.userData!==void 0&&(w.userData=n.userData),n.layers!==void 0&&(w.layers.mask=n.layers),n.children!==void 0){const j=n.children;for(let te=0;te<j.length;te++)w.add(this.parseObject(j[te],u,p,m,v))}if(n.animations!==void 0){const j=n.animations;for(let te=0;te<j.length;te++){const re=j[te];w.animations.push(v[re])}}if(n.type==="LOD"){n.autoUpdate!==void 0&&(w.autoUpdate=n.autoUpdate);const j=n.levels;for(let te=0;te<j.length;te++){const re=j[te],ce=w.getObjectByProperty("uuid",re.object);ce!==void 0&&w.addLevel(ce,re.distance,re.hysteresis)}}return w}bindSkeletons(n,u){Object.keys(u).length!==0&&n.traverse(function(p){if(p.isSkinnedMesh===!0&&p.skeleton!==void 0){const m=u[p.skeleton];m===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",p.skeleton):p.bind(m,p.bindMatrix)}})}}const sA={UVMapping:Is,CubeReflectionMapping:rn,CubeRefractionMapping:Pn,EquirectangularReflectionMapping:cs,EquirectangularRefractionMapping:Tr,CubeUVReflectionMapping:B0},Gf={RepeatWrapping:yn,ClampToEdgeWrapping:He,MirroredRepeatWrapping:Ke},Vf={NearestFilter:pt,NearestMipmapNearestFilter:Xt,NearestMipmapLinearFilter:Bt,LinearFilter:Wt,LinearMipmapNearestFilter:ui,LinearMipmapLinearFilter:st};class Wf extends jn{constructor(n){super(n),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(n){return this.options=n,this}load(n,u,p,m){n===void 0&&(n=""),this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);const v=this,w=Qo.get(n);if(w!==void 0)return v.manager.itemStart(n),w.then?void w.then(D=>{u&&u(D),v.manager.itemEnd(n)}).catch(D=>{m&&m(D)}):(setTimeout(function(){u&&u(w),v.manager.itemEnd(n)},0),w);const S={};S.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",S.headers=this.requestHeader;const I=fetch(n,S).then(function(D){return D.blob()}).then(function(D){return createImageBitmap(D,Object.assign(v.options,{colorSpaceConversion:"none"}))}).then(function(D){return Qo.add(n,D),u&&u(D),v.manager.itemEnd(n),D}).catch(function(D){m&&m(D),Qo.remove(n),v.manager.itemError(n),v.manager.itemEnd(n)});Qo.add(n,I),v.manager.itemStart(n)}}let cu;class Nd{static getContext(){return cu===void 0&&(cu=new(window.AudioContext||window.webkitAudioContext)),cu}static setContext(n){cu=n}}class oA extends jn{constructor(n){super(n)}load(n,u,p,m){const v=this,w=new f0(this.manager);function S(I){m?m(I):console.error(I),v.manager.itemError(n)}w.setResponseType("arraybuffer"),w.setPath(this.path),w.setRequestHeader(this.requestHeader),w.setWithCredentials(this.withCredentials),w.load(n,function(I){try{const D=I.slice(0);Nd.getContext().decodeAudioData(D,function(L){u(L)}).catch(S)}catch(D){S(D)}},p,m)}}const qf=new Ii,Xf=new Ii,y1=new Ii;class aA{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Rn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Rn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(n){const u=this._cache;if(u.focus!==n.focus||u.fov!==n.fov||u.aspect!==n.aspect*this.aspect||u.near!==n.near||u.far!==n.far||u.zoom!==n.zoom||u.eyeSep!==this.eyeSep){u.focus=n.focus,u.fov=n.fov,u.aspect=n.aspect*this.aspect,u.near=n.near,u.far=n.far,u.zoom=n.zoom,u.eyeSep=this.eyeSep,y1.copy(n.projectionMatrix);const p=u.eyeSep/2,m=p*u.near/u.focus,v=u.near*Math.tan(mo*u.fov*.5)/u.zoom;let w,S;Xf.elements[12]=-p,qf.elements[12]=p,w=-v*u.aspect+m,S=v*u.aspect+m,y1.elements[0]=2*u.near/(S-w),y1.elements[8]=(S+w)/(S-w),this.cameraL.projectionMatrix.copy(y1),w=-v*u.aspect-m,S=v*u.aspect-m,y1.elements[0]=2*u.near/(S-w),y1.elements[8]=(S+w)/(S-w),this.cameraR.projectionMatrix.copy(y1)}this.cameraL.matrixWorld.copy(n.matrixWorld).multiply(Xf),this.cameraR.matrixWorld.copy(n.matrixWorld).multiply(qf)}}class Yf{constructor(n=!0){this.autoStart=n,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Kf(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let n=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const u=Kf();n=(u-this.oldTime)/1e3,this.oldTime=u,this.elapsedTime+=n}return n}}function Kf(){return(typeof performance>"u"?Date:performance).now()}const w1=new Le,Jf=new qn,lA=new Le,b1=new Le;class cA extends yr{constructor(){super(),this.type="AudioListener",this.context=Nd.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Yf}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(n){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=n,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(n){return this.gain.gain.setTargetAtTime(n,this.context.currentTime,.01),this}updateMatrixWorld(n){super.updateMatrixWorld(n);const u=this.context.listener,p=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(w1,Jf,lA),b1.set(0,0,-1).applyQuaternion(Jf),u.positionX){const m=this.context.currentTime+this.timeDelta;u.positionX.linearRampToValueAtTime(w1.x,m),u.positionY.linearRampToValueAtTime(w1.y,m),u.positionZ.linearRampToValueAtTime(w1.z,m),u.forwardX.linearRampToValueAtTime(b1.x,m),u.forwardY.linearRampToValueAtTime(b1.y,m),u.forwardZ.linearRampToValueAtTime(b1.z,m),u.upX.linearRampToValueAtTime(p.x,m),u.upY.linearRampToValueAtTime(p.y,m),u.upZ.linearRampToValueAtTime(p.z,m)}else u.setPosition(w1.x,w1.y,w1.z),u.setOrientation(b1.x,b1.y,b1.z,p.x,p.y,p.z)}}class Zf extends yr{constructor(n){super(),this.type="Audio",this.listener=n,this.context=n.context,this.gain=this.context.createGain(),this.gain.connect(n.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(n){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=n,this.connect(),this}setMediaElementSource(n){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(n),this.connect(),this}setMediaStreamSource(n){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(n),this.connect(),this}setBuffer(n){return this.buffer=n,this.sourceType="buffer",this.autoplay&&this.play(),this}play(n=0){if(this.isPlaying===!0)return void console.warn("THREE.Audio: Audio is already playing.");if(this.hasPlaybackControl===!1)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+n;const u=this.context.createBufferSource();return u.buffer=this.buffer,u.loop=this.loop,u.loopStart=this.loopStart,u.loopEnd=this.loopEnd,u.onended=this.onEnded.bind(this),u.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=u,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl!==!1)return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(this.hasPlaybackControl!==!1)return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let n=1,u=this.filters.length;n<u;n++)this.filters[n-1].connect(this.filters[n]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let n=1,u=this.filters.length;n<u;n++)this.filters[n-1].disconnect(this.filters[n]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(n){return n||(n=[]),this._connected===!0?(this.disconnect(),this.filters=n.slice(),this.connect()):this.filters=n.slice(),this}setDetune(n){return this.detune=n,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(n){return this.setFilters(n?[n]:[])}setPlaybackRate(n){if(this.hasPlaybackControl!==!1)return this.playbackRate=n,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(n){if(this.hasPlaybackControl!==!1)return this.loop=n,this.isPlaying===!0&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(n){return this.loopStart=n,this}setLoopEnd(n){return this.loopEnd=n,this}getVolume(){return this.gain.gain.value}setVolume(n){return this.gain.gain.setTargetAtTime(n,this.context.currentTime,.01),this}}const C1=new Le,$f=new qn,hA=new Le,x1=new Le;class uA extends Zf{constructor(n){super(n),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(n){return this.panner.refDistance=n,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(n){return this.panner.rolloffFactor=n,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(n){return this.panner.distanceModel=n,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(n){return this.panner.maxDistance=n,this}setDirectionalCone(n,u,p){return this.panner.coneInnerAngle=n,this.panner.coneOuterAngle=u,this.panner.coneOuterGain=p,this}updateMatrixWorld(n){if(super.updateMatrixWorld(n),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(C1,$f,hA),x1.set(0,0,1).applyQuaternion($f);const u=this.panner;if(u.positionX){const p=this.context.currentTime+this.listener.timeDelta;u.positionX.linearRampToValueAtTime(C1.x,p),u.positionY.linearRampToValueAtTime(C1.y,p),u.positionZ.linearRampToValueAtTime(C1.z,p),u.orientationX.linearRampToValueAtTime(x1.x,p),u.orientationY.linearRampToValueAtTime(x1.y,p),u.orientationZ.linearRampToValueAtTime(x1.z,p)}else u.setPosition(C1.x,C1.y,C1.z),u.setOrientation(x1.x,x1.y,x1.z)}}class dA{constructor(n,u=2048){this.analyser=n.context.createAnalyser(),this.analyser.fftSize=u,this.data=new Uint8Array(this.analyser.frequencyBinCount),n.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let n=0;const u=this.getFrequencyData();for(let p=0;p<u.length;p++)n+=u[p];return n/u.length}}class jf{constructor(n,u,p){let m,v,w;switch(this.binding=n,this.valueSize=p,u){case"quaternion":m=this._slerp,v=this._slerpAdditive,w=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*p),this._workIndex=5;break;case"string":case"bool":m=this._select,v=this._select,w=this._setAdditiveIdentityOther,this.buffer=new Array(5*p);break;default:m=this._lerp,v=this._lerpAdditive,w=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*p)}this._mixBufferRegion=m,this._mixBufferRegionAdditive=v,this._setIdentity=w,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(n,u){const p=this.buffer,m=this.valueSize,v=n*m+m;let w=this.cumulativeWeight;if(w===0){for(let S=0;S!==m;++S)p[v+S]=p[S];w=u}else{w+=u;const S=u/w;this._mixBufferRegion(p,v,0,S,m)}this.cumulativeWeight=w}accumulateAdditive(n){const u=this.buffer,p=this.valueSize,m=p*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(u,m,0,n,p),this.cumulativeWeightAdditive+=n}apply(n){const u=this.valueSize,p=this.buffer,m=n*u+u,v=this.cumulativeWeight,w=this.cumulativeWeightAdditive,S=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,v<1){const I=u*this._origIndex;this._mixBufferRegion(p,m,I,1-v,u)}w>0&&this._mixBufferRegionAdditive(p,m,this._addIndex*u,1,u);for(let I=u,D=u+u;I!==D;++I)if(p[I]!==p[I+u]){S.setValue(p,m);break}}saveOriginalState(){const n=this.binding,u=this.buffer,p=this.valueSize,m=p*this._origIndex;n.getValue(u,m);for(let v=p,w=m;v!==w;++v)u[v]=u[m+v%p];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const n=3*this.valueSize;this.binding.setValue(this.buffer,n)}_setAdditiveIdentityNumeric(){const n=this._addIndex*this.valueSize,u=n+this.valueSize;for(let p=n;p<u;p++)this.buffer[p]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const n=this._origIndex*this.valueSize,u=this._addIndex*this.valueSize;for(let p=0;p<this.valueSize;p++)this.buffer[u+p]=this.buffer[n+p]}_select(n,u,p,m,v){if(m>=.5)for(let w=0;w!==v;++w)n[u+w]=n[p+w]}_slerp(n,u,p,m){qn.slerpFlat(n,u,n,u,n,p,m)}_slerpAdditive(n,u,p,m,v){const w=this._workIndex*v;qn.multiplyQuaternionsFlat(n,w,n,u,n,p),qn.slerpFlat(n,u,n,u,n,w,m)}_lerp(n,u,p,m,v){const w=1-m;for(let S=0;S!==v;++S){const I=u+S;n[I]=n[I]*w+n[p+S]*m}}_lerpAdditive(n,u,p,m,v){for(let w=0;w!==v;++w){const S=u+w;n[S]=n[S]+n[p+w]*m}}}const Ud="\\[\\]\\.:\\/",fA=new RegExp("["+Ud+"]","g"),Qd="[^"+Ud+"]",pA="[^"+Ud.replace("\\.","")+"]",AA=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Qd)+/(WCOD+)?/.source.replace("WCOD",pA)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Qd)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Qd)+"$"),mA=["material","materials","bones","map"];class Br{constructor(n,u,p){this.path=u,this.parsedPath=p||Br.parseTrackName(u),this.node=Br.findNode(n,this.parsedPath.nodeName),this.rootNode=n,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(n,u,p){return n&&n.isAnimationObjectGroup?new Br.Composite(n,u,p):new Br(n,u,p)}static sanitizeNodeName(n){return n.replace(/\s/g,"_").replace(fA,"")}static parseTrackName(n){const u=AA.exec(n);if(u===null)throw new Error("PropertyBinding: Cannot parse trackName: "+n);const p={nodeName:u[2],objectName:u[3],objectIndex:u[4],propertyName:u[5],propertyIndex:u[6]},m=p.nodeName&&p.nodeName.lastIndexOf(".");if(m!==void 0&&m!==-1){const v=p.nodeName.substring(m+1);mA.indexOf(v)!==-1&&(p.nodeName=p.nodeName.substring(0,m),p.objectName=v)}if(p.propertyName===null||p.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+n);return p}static findNode(n,u){if(u===void 0||u===""||u==="."||u===-1||u===n.name||u===n.uuid)return n;if(n.skeleton){const p=n.skeleton.getBoneByName(u);if(p!==void 0)return p}if(n.children){const p=function(v){for(let w=0;w<v.length;w++){const S=v[w];if(S.name===u||S.uuid===u)return S;const I=p(S.children);if(I)return I}return null},m=p(n.children);if(m)return m}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(n,u){n[u]=this.targetObject[this.propertyName]}_getValue_array(n,u){const p=this.resolvedProperty;for(let m=0,v=p.length;m!==v;++m)n[u++]=p[m]}_getValue_arrayElement(n,u){n[u]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(n,u){this.resolvedProperty.toArray(n,u)}_setValue_direct(n,u){this.targetObject[this.propertyName]=n[u]}_setValue_direct_setNeedsUpdate(n,u){this.targetObject[this.propertyName]=n[u],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(n,u){this.targetObject[this.propertyName]=n[u],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(n,u){const p=this.resolvedProperty;for(let m=0,v=p.length;m!==v;++m)p[m]=n[u++]}_setValue_array_setNeedsUpdate(n,u){const p=this.resolvedProperty;for(let m=0,v=p.length;m!==v;++m)p[m]=n[u++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(n,u){const p=this.resolvedProperty;for(let m=0,v=p.length;m!==v;++m)p[m]=n[u++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(n,u){this.resolvedProperty[this.propertyIndex]=n[u]}_setValue_arrayElement_setNeedsUpdate(n,u){this.resolvedProperty[this.propertyIndex]=n[u],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(n,u){this.resolvedProperty[this.propertyIndex]=n[u],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(n,u){this.resolvedProperty.fromArray(n,u)}_setValue_fromArray_setNeedsUpdate(n,u){this.resolvedProperty.fromArray(n,u),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(n,u){this.resolvedProperty.fromArray(n,u),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(n,u){this.bind(),this.getValue(n,u)}_setValue_unbound(n,u){this.bind(),this.setValue(n,u)}bind(){let n=this.node;const u=this.parsedPath,p=u.objectName,m=u.propertyName;let v=u.propertyIndex;if(n||(n=Br.findNode(this.rootNode,u.nodeName),this.node=n),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!n)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(p){let D=u.objectIndex;switch(p){case"materials":if(!n.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!n.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);n=n.material.materials;break;case"bones":if(!n.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);n=n.skeleton.bones;for(let L=0;L<n.length;L++)if(n[L].name===D){D=L;break}break;case"map":if("map"in n){n=n.map;break}if(!n.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!n.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);n=n.material.map;break;default:if(n[p]===void 0)return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);n=n[p]}if(D!==void 0){if(n[D]===void 0)return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,n);n=n[D]}}const w=n[m];if(w===void 0){const D=u.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+D+"."+m+" but it wasn't found.",n)}let S=this.Versioning.None;this.targetObject=n,n.needsUpdate!==void 0?S=this.Versioning.NeedsUpdate:n.matrixWorldNeedsUpdate!==void 0&&(S=this.Versioning.MatrixWorldNeedsUpdate);let I=this.BindingType.Direct;if(v!==void 0){if(m==="morphTargetInfluences"){if(!n.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!n.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);n.morphTargetDictionary[v]!==void 0&&(v=n.morphTargetDictionary[v])}I=this.BindingType.ArrayElement,this.resolvedProperty=w,this.propertyIndex=v}else w.fromArray!==void 0&&w.toArray!==void 0?(I=this.BindingType.HasFromToArray,this.resolvedProperty=w):Array.isArray(w)?(I=this.BindingType.EntireArray,this.resolvedProperty=w):this.propertyName=m;this.getValue=this.GetterByBindingType[I],this.setValue=this.SetterByBindingTypeAndVersioning[I][S]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Br.Composite=class{constructor(b,n,u){const p=u||Br.parseTrackName(n);this._targetGroup=b,this._bindings=b.subscribe_(n,p)}getValue(b,n){this.bind();const u=this._targetGroup.nCachedObjects_,p=this._bindings[u];p!==void 0&&p.getValue(b,n)}setValue(b,n){const u=this._bindings;for(let p=this._targetGroup.nCachedObjects_,m=u.length;p!==m;++p)u[p].setValue(b,n)}bind(){const b=this._bindings;for(let n=this._targetGroup.nCachedObjects_,u=b.length;n!==u;++n)b[n].bind()}unbind(){const b=this._bindings;for(let n=this._targetGroup.nCachedObjects_,u=b.length;n!==u;++n)b[n].unbind()}},Br.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Br.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Br.prototype.GetterByBindingType=[Br.prototype._getValue_direct,Br.prototype._getValue_array,Br.prototype._getValue_arrayElement,Br.prototype._getValue_toArray],Br.prototype.SetterByBindingTypeAndVersioning=[[Br.prototype._setValue_direct,Br.prototype._setValue_direct_setNeedsUpdate,Br.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Br.prototype._setValue_array,Br.prototype._setValue_array_setNeedsUpdate,Br.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Br.prototype._setValue_arrayElement,Br.prototype._setValue_arrayElement_setNeedsUpdate,Br.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Br.prototype._setValue_fromArray,Br.prototype._setValue_fromArray_setNeedsUpdate,Br.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class gA{constructor(){this.isAnimationObjectGroup=!0,this.uuid=F0(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const n={};this._indicesByUUID=n;for(let p=0,m=arguments.length;p!==m;++p)n[arguments[p].uuid]=p;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const u=this;this.stats={objects:{get total(){return u._objects.length},get inUse(){return this.total-u.nCachedObjects_}},get bindingsPerObject(){return u._bindings.length}}}add(){const n=this._objects,u=this._indicesByUUID,p=this._paths,m=this._parsedPaths,v=this._bindings,w=v.length;let S,I=n.length,D=this.nCachedObjects_;for(let L=0,Y=arguments.length;L!==Y;++L){const j=arguments[L],te=j.uuid;let re=u[te];if(re===void 0){re=I++,u[te]=re,n.push(j);for(let ce=0,le=w;ce!==le;++ce)v[ce].push(new Br(j,p[ce],m[ce]))}else if(re<D){S=n[re];const ce=--D,le=n[ce];u[le.uuid]=re,n[re]=le,u[te]=ce,n[ce]=j;for(let de=0,pe=w;de!==pe;++de){const me=v[de],we=me[ce];let Fe=me[re];me[re]=we,Fe===void 0&&(Fe=new Br(j,p[de],m[de])),me[ce]=Fe}}else n[re]!==S&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=D}remove(){const n=this._objects,u=this._indicesByUUID,p=this._bindings,m=p.length;let v=this.nCachedObjects_;for(let w=0,S=arguments.length;w!==S;++w){const I=arguments[w],D=I.uuid,L=u[D];if(L!==void 0&&L>=v){const Y=v++,j=n[Y];u[j.uuid]=L,n[L]=j,u[D]=Y,n[Y]=I;for(let te=0,re=m;te!==re;++te){const ce=p[te],le=ce[Y],de=ce[L];ce[L]=le,ce[Y]=de}}}this.nCachedObjects_=v}uncache(){const n=this._objects,u=this._indicesByUUID,p=this._bindings,m=p.length;let v=this.nCachedObjects_,w=n.length;for(let S=0,I=arguments.length;S!==I;++S){const D=arguments[S].uuid,L=u[D];if(L!==void 0)if(delete u[D],L<v){const Y=--v,j=n[Y],te=--w,re=n[te];u[j.uuid]=L,n[L]=j,u[re.uuid]=Y,n[Y]=re,n.pop();for(let ce=0,le=m;ce!==le;++ce){const de=p[ce],pe=de[Y],me=de[te];de[L]=pe,de[Y]=me,de.pop()}}else{const Y=--w,j=n[Y];Y>0&&(u[j.uuid]=L),n[L]=j,n.pop();for(let te=0,re=m;te!==re;++te){const ce=p[te];ce[L]=ce[Y],ce.pop()}}}this.nCachedObjects_=v}subscribe_(n,u){const p=this._bindingsIndicesByPath;let m=p[n];const v=this._bindings;if(m!==void 0)return v[m];const w=this._paths,S=this._parsedPaths,I=this._objects,D=I.length,L=this.nCachedObjects_,Y=new Array(D);m=v.length,p[n]=m,w.push(n),S.push(u),v.push(Y);for(let j=L,te=I.length;j!==te;++j){const re=I[j];Y[j]=new Br(re,n,u)}return Y}unsubscribe_(n){const u=this._bindingsIndicesByPath,p=u[n];if(p!==void 0){const m=this._paths,v=this._parsedPaths,w=this._bindings,S=w.length-1,I=w[S];u[n[S]]=p,w[p]=I,w.pop(),v[p]=v[S],v.pop(),m[p]=m[S],m.pop()}}}class ep{constructor(n,u,p=null,m=u.blendMode){this._mixer=n,this._clip=u,this._localRoot=p,this.blendMode=m;const v=u.tracks,w=v.length,S=new Array(w),I={endingStart:_0,endingEnd:_0};for(let D=0;D!==w;++D){const L=v[D].createInterpolant(null);S[D]=L,L.settings=I}this._interpolantSettings=I,this._interpolants=S,this._propertyBindings=new Array(w),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=bn,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(n){return this._startTime=n,this}setLoop(n,u){return this.loop=n,this.repetitions=u,this}setEffectiveWeight(n){return this.weight=n,this._effectiveWeight=this.enabled?n:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(n){return this._scheduleFading(n,0,1)}fadeOut(n){return this._scheduleFading(n,1,0)}crossFadeFrom(n,u,p){if(n.fadeOut(u),this.fadeIn(u),p){const m=this._clip.duration,v=n._clip.duration,w=v/m,S=m/v;n.warp(1,w,u),this.warp(S,1,u)}return this}crossFadeTo(n,u,p){return n.crossFadeFrom(this,u,p)}stopFading(){const n=this._weightInterpolant;return n!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(n)),this}setEffectiveTimeScale(n){return this.timeScale=n,this._effectiveTimeScale=this.paused?0:n,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(n){return this.timeScale=this._clip.duration/n,this.stopWarping()}syncWith(n){return this.time=n.time,this.timeScale=n.timeScale,this.stopWarping()}halt(n){return this.warp(this._effectiveTimeScale,0,n)}warp(n,u,p){const m=this._mixer,v=m.time,w=this.timeScale;let S=this._timeScaleInterpolant;S===null&&(S=m._lendControlInterpolant(),this._timeScaleInterpolant=S);const I=S.parameterPositions,D=S.sampleValues;return I[0]=v,I[1]=v+p,D[0]=n/w,D[1]=u/w,this}stopWarping(){const n=this._timeScaleInterpolant;return n!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(n)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(n,u,p,m){if(!this.enabled)return void this._updateWeight(n);const v=this._startTime;if(v!==null){const I=(n-v)*p;I<0||p===0?u=0:(this._startTime=null,u=p*I)}u*=this._updateTimeScale(n);const w=this._updateTime(u),S=this._updateWeight(n);if(S>0){const I=this._interpolants,D=this._propertyBindings;if(this.blendMode===Ds)for(let L=0,Y=I.length;L!==Y;++L)I[L].evaluate(w),D[L].accumulateAdditive(S);else for(let L=0,Y=I.length;L!==Y;++L)I[L].evaluate(w),D[L].accumulate(m,S)}}_updateWeight(n){let u=0;if(this.enabled){u=this.weight;const p=this._weightInterpolant;if(p!==null){const m=p.evaluate(n)[0];u*=m,n>p.parameterPositions[1]&&(this.stopFading(),m===0&&(this.enabled=!1))}}return this._effectiveWeight=u,u}_updateTimeScale(n){let u=0;if(!this.paused){u=this.timeScale;const p=this._timeScaleInterpolant;p!==null&&(u*=p.evaluate(n)[0],n>p.parameterPositions[1]&&(this.stopWarping(),u===0?this.paused=!0:this.timeScale=u))}return this._effectiveTimeScale=u,u}_updateTime(n){const u=this._clip.duration,p=this.loop;let m=this.time+n,v=this._loopCount;const w=p===Tn;if(n===0)return v===-1?m:w&&(1&v)==1?u-m:m;if(p===E0){v===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(m>=u)m=u;else{if(!(m<0)){this.time=m;break e}m=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=m,this._mixer.dispatchEvent({type:"finished",action:this,direction:n<0?-1:1})}}else{if(v===-1&&(n>=0?(v=0,this._setEndings(!0,this.repetitions===0,w)):this._setEndings(this.repetitions===0,!0,w)),m>=u||m<0){const S=Math.floor(m/u);m-=u*S,v+=Math.abs(S);const I=this.repetitions-v;if(I<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,m=n>0?u:0,this.time=m,this._mixer.dispatchEvent({type:"finished",action:this,direction:n>0?1:-1});else{if(I===1){const D=n<0;this._setEndings(D,!D,w)}else this._setEndings(!1,!1,w);this._loopCount=v,this.time=m,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:S})}}else this.time=m;if(w&&(1&v)==1)return u-m}return m}_setEndings(n,u,p){const m=this._interpolantSettings;p?(m.endingStart=M0,m.endingEnd=M0):(m.endingStart=n?this.zeroSlopeAtStart?M0:_0:us,m.endingEnd=u?this.zeroSlopeAtEnd?M0:_0:us)}_scheduleFading(n,u,p){const m=this._mixer,v=m.time;let w=this._weightInterpolant;w===null&&(w=m._lendControlInterpolant(),this._weightInterpolant=w);const S=w.parameterPositions,I=w.sampleValues;return S[0]=v,I[0]=u,S[1]=v+n,I[1]=p,this}}const vA=new Float32Array(1);class EA extends P0{constructor(n){super(),this._root=n,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(n,u){const p=n._localRoot||this._root,m=n._clip.tracks,v=m.length,w=n._propertyBindings,S=n._interpolants,I=p.uuid,D=this._bindingsByRootAndName;let L=D[I];L===void 0&&(L={},D[I]=L);for(let Y=0;Y!==v;++Y){const j=m[Y],te=j.name;let re=L[te];if(re!==void 0)++re.referenceCount,w[Y]=re;else{if(re=w[Y],re!==void 0){re._cacheIndex===null&&(++re.referenceCount,this._addInactiveBinding(re,I,te));continue}const ce=u&&u._propertyBindings[Y].binding.parsedPath;re=new jf(Br.create(p,te,ce),j.ValueTypeName,j.getValueSize()),++re.referenceCount,this._addInactiveBinding(re,I,te),w[Y]=re}S[Y].resultBuffer=re.buffer}}_activateAction(n){if(!this._isActiveAction(n)){if(n._cacheIndex===null){const p=(n._localRoot||this._root).uuid,m=n._clip.uuid,v=this._actionsByClip[m];this._bindAction(n,v&&v.knownActions[0]),this._addInactiveAction(n,m,p)}const u=n._propertyBindings;for(let p=0,m=u.length;p!==m;++p){const v=u[p];v.useCount++==0&&(this._lendBinding(v),v.saveOriginalState())}this._lendAction(n)}}_deactivateAction(n){if(this._isActiveAction(n)){const u=n._propertyBindings;for(let p=0,m=u.length;p!==m;++p){const v=u[p];--v.useCount==0&&(v.restoreOriginalState(),this._takeBackBinding(v))}this._takeBackAction(n)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const n=this;this.stats={actions:{get total(){return n._actions.length},get inUse(){return n._nActiveActions}},bindings:{get total(){return n._bindings.length},get inUse(){return n._nActiveBindings}},controlInterpolants:{get total(){return n._controlInterpolants.length},get inUse(){return n._nActiveControlInterpolants}}}}_isActiveAction(n){const u=n._cacheIndex;return u!==null&&u<this._nActiveActions}_addInactiveAction(n,u,p){const m=this._actions,v=this._actionsByClip;let w=v[u];if(w===void 0)w={knownActions:[n],actionByRoot:{}},n._byClipCacheIndex=0,v[u]=w;else{const S=w.knownActions;n._byClipCacheIndex=S.length,S.push(n)}n._cacheIndex=m.length,m.push(n),w.actionByRoot[p]=n}_removeInactiveAction(n){const u=this._actions,p=u[u.length-1],m=n._cacheIndex;p._cacheIndex=m,u[m]=p,u.pop(),n._cacheIndex=null;const v=n._clip.uuid,w=this._actionsByClip,S=w[v],I=S.knownActions,D=I[I.length-1],L=n._byClipCacheIndex;D._byClipCacheIndex=L,I[L]=D,I.pop(),n._byClipCacheIndex=null,delete S.actionByRoot[(n._localRoot||this._root).uuid],I.length===0&&delete w[v],this._removeInactiveBindingsForAction(n)}_removeInactiveBindingsForAction(n){const u=n._propertyBindings;for(let p=0,m=u.length;p!==m;++p){const v=u[p];--v.referenceCount==0&&this._removeInactiveBinding(v)}}_lendAction(n){const u=this._actions,p=n._cacheIndex,m=this._nActiveActions++,v=u[m];n._cacheIndex=m,u[m]=n,v._cacheIndex=p,u[p]=v}_takeBackAction(n){const u=this._actions,p=n._cacheIndex,m=--this._nActiveActions,v=u[m];n._cacheIndex=m,u[m]=n,v._cacheIndex=p,u[p]=v}_addInactiveBinding(n,u,p){const m=this._bindingsByRootAndName,v=this._bindings;let w=m[u];w===void 0&&(w={},m[u]=w),w[p]=n,n._cacheIndex=v.length,v.push(n)}_removeInactiveBinding(n){const u=this._bindings,p=n.binding,m=p.rootNode.uuid,v=p.path,w=this._bindingsByRootAndName,S=w[m],I=u[u.length-1],D=n._cacheIndex;I._cacheIndex=D,u[D]=I,u.pop(),delete S[v],Object.keys(S).length===0&&delete w[m]}_lendBinding(n){const u=this._bindings,p=n._cacheIndex,m=this._nActiveBindings++,v=u[m];n._cacheIndex=m,u[m]=n,v._cacheIndex=p,u[p]=v}_takeBackBinding(n){const u=this._bindings,p=n._cacheIndex,m=--this._nActiveBindings,v=u[m];n._cacheIndex=m,u[m]=n,v._cacheIndex=p,u[p]=v}_lendControlInterpolant(){const n=this._controlInterpolants,u=this._nActiveControlInterpolants++;let p=n[u];return p===void 0&&(p=new Sd(new Float32Array(2),new Float32Array(2),1,vA),p.__cacheIndex=u,n[u]=p),p}_takeBackControlInterpolant(n){const u=this._controlInterpolants,p=n.__cacheIndex,m=--this._nActiveControlInterpolants,v=u[m];n.__cacheIndex=m,u[m]=n,v.__cacheIndex=p,u[p]=v}clipAction(n,u,p){const m=u||this._root,v=m.uuid;let w=typeof n=="string"?wl.findByName(m,n):n;const S=w!==null?w.uuid:n,I=this._actionsByClip[S];let D=null;if(p===void 0&&(p=w!==null?w.blendMode:Bs),I!==void 0){const Y=I.actionByRoot[v];if(Y!==void 0&&Y.blendMode===p)return Y;D=I.knownActions[0],w===null&&(w=D._clip)}if(w===null)return null;const L=new ep(this,w,u,p);return this._bindAction(L,D),this._addInactiveAction(L,S,v),L}existingAction(n,u){const p=u||this._root,m=p.uuid,v=typeof n=="string"?wl.findByName(p,n):n,w=v?v.uuid:n,S=this._actionsByClip[w];return S!==void 0&&S.actionByRoot[m]||null}stopAllAction(){const n=this._actions;for(let u=this._nActiveActions-1;u>=0;--u)n[u].stop();return this}update(n){n*=this.timeScale;const u=this._actions,p=this._nActiveActions,m=this.time+=n,v=Math.sign(n),w=this._accuIndex^=1;for(let D=0;D!==p;++D)u[D]._update(m,n,v,w);const S=this._bindings,I=this._nActiveBindings;for(let D=0;D!==I;++D)S[D].apply(w);return this}setTime(n){this.time=0;for(let u=0;u<this._actions.length;u++)this._actions[u].time=0;return this.update(n)}getRoot(){return this._root}uncacheClip(n){const u=this._actions,p=n.uuid,m=this._actionsByClip,v=m[p];if(v!==void 0){const w=v.knownActions;for(let S=0,I=w.length;S!==I;++S){const D=w[S];this._deactivateAction(D);const L=D._cacheIndex,Y=u[u.length-1];D._cacheIndex=null,D._byClipCacheIndex=null,Y._cacheIndex=L,u[L]=Y,u.pop(),this._removeInactiveBindingsForAction(D)}delete m[p]}}uncacheRoot(n){const u=n.uuid,p=this._actionsByClip;for(const v in p){const w=p[v].actionByRoot[u];w!==void 0&&(this._deactivateAction(w),this._removeInactiveAction(w))}const m=this._bindingsByRootAndName[u];if(m!==void 0)for(const v in m){const w=m[v];w.restoreOriginalState(),this._removeInactiveBinding(w)}}uncacheAction(n,u){const p=this.existingAction(n,u);p!==null&&(this._deactivateAction(p),this._removeInactiveAction(p))}}class Hd{constructor(n){this.value=n}clone(){return new Hd(this.value.clone===void 0?this.value:this.value.clone())}}let yA=0;class wA extends P0{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:yA++}),this.name="",this.usage=Na,this.uniforms=[]}add(n){return this.uniforms.push(n),this}remove(n){const u=this.uniforms.indexOf(n);return u!==-1&&this.uniforms.splice(u,1),this}setName(n){return this.name=n,this}setUsage(n){return this.usage=n,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(n){this.name=n.name,this.usage=n.usage;const u=n.uniforms;this.uniforms.length=0;for(let p=0,m=u.length;p<m;p++){const v=Array.isArray(u[p])?u[p]:[u[p]];for(let w=0;w<v.length;w++)this.uniforms.push(v[w].clone())}return this}clone(){return new this.constructor().copy(this)}}class bA extends Lo{constructor(n,u,p=1){super(n,u),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=p}copy(n){return super.copy(n),this.meshPerAttribute=n.meshPerAttribute,this}clone(n){const u=super.clone(n);return u.meshPerAttribute=this.meshPerAttribute,u}toJSON(n){const u=super.toJSON(n);return u.isInstancedInterleavedBuffer=!0,u.meshPerAttribute=this.meshPerAttribute,u}}class CA{constructor(n,u,p,m,v){this.isGLBufferAttribute=!0,this.name="",this.buffer=n,this.type=u,this.itemSize=p,this.elementSize=m,this.count=v,this.version=0}set needsUpdate(n){n===!0&&this.version++}setBuffer(n){return this.buffer=n,this}setType(n,u){return this.type=n,this.elementSize=u,this}setItemSize(n){return this.itemSize=n,this}setCount(n){return this.count=n,this}}const tp=new Ii;class xA{constructor(n,u,p=0,m=1/0){this.ray=new ts(n,u),this.near=p,this.far=m,this.camera=null,this.layers=new bo,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(n,u){this.ray.set(n,u)}setFromCamera(n,u){u.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(u.matrixWorld),this.ray.direction.set(n.x,n.y,.5).unproject(u).sub(this.ray.origin).normalize(),this.camera=u):u.isOrthographicCamera?(this.ray.origin.set(n.x,n.y,(u.near+u.far)/(u.near-u.far)).unproject(u),this.ray.direction.set(0,0,-1).transformDirection(u.matrixWorld),this.camera=u):console.error("THREE.Raycaster: Unsupported camera type: "+u.type)}setFromXRController(n){return tp.identity().extractRotation(n.matrixWorld),this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(tp),this}intersectObject(n,u=!0,p=[]){return zd(n,this,p,u),p.sort(ip),p}intersectObjects(n,u=!0,p=[]){for(let m=0,v=n.length;m<v;m++)zd(n[m],this,p,u);return p.sort(ip),p}}function ip(b,n){return b.distance-n.distance}function zd(b,n,u,p){if(b.layers.test(n.layers)&&b.raycast(n,u),p===!0){const m=b.children;for(let v=0,w=m.length;v<w;v++)zd(m[v],n,u,!0)}}class _A{constructor(n=1,u=0,p=0){return this.radius=n,this.phi=u,this.theta=p,this}set(n,u,p){return this.radius=n,this.phi=u,this.theta=p,this}copy(n){return this.radius=n.radius,this.phi=n.phi,this.theta=n.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(n){return this.setFromCartesianCoords(n.x,n.y,n.z)}setFromCartesianCoords(n,u,p){return this.radius=Math.sqrt(n*n+u*u+p*p),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(n,p),this.phi=Math.acos(mn(u/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class MA{constructor(n=1,u=0,p=0){return this.radius=n,this.theta=u,this.y=p,this}set(n,u,p){return this.radius=n,this.theta=u,this.y=p,this}copy(n){return this.radius=n.radius,this.theta=n.theta,this.y=n.y,this}setFromVector3(n){return this.setFromCartesianCoords(n.x,n.y,n.z)}setFromCartesianCoords(n,u,p){return this.radius=Math.sqrt(n*n+p*p),this.theta=Math.atan2(n,p),this.y=u,this}clone(){return new this.constructor().copy(this)}}const rp=new zt;class SA{constructor(n=new zt(1/0,1/0),u=new zt(-1/0,-1/0)){this.isBox2=!0,this.min=n,this.max=u}set(n,u){return this.min.copy(n),this.max.copy(u),this}setFromPoints(n){this.makeEmpty();for(let u=0,p=n.length;u<p;u++)this.expandByPoint(n[u]);return this}setFromCenterAndSize(n,u){const p=rp.copy(u).multiplyScalar(.5);return this.min.copy(n).sub(p),this.max.copy(n).add(p),this}clone(){return new this.constructor().copy(this)}copy(n){return this.min.copy(n.min),this.max.copy(n.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(n){return this.isEmpty()?n.set(0,0):n.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(n){return this.isEmpty()?n.set(0,0):n.subVectors(this.max,this.min)}expandByPoint(n){return this.min.min(n),this.max.max(n),this}expandByVector(n){return this.min.sub(n),this.max.add(n),this}expandByScalar(n){return this.min.addScalar(-n),this.max.addScalar(n),this}containsPoint(n){return!(n.x<this.min.x||n.x>this.max.x||n.y<this.min.y||n.y>this.max.y)}containsBox(n){return this.min.x<=n.min.x&&n.max.x<=this.max.x&&this.min.y<=n.min.y&&n.max.y<=this.max.y}getParameter(n,u){return u.set((n.x-this.min.x)/(this.max.x-this.min.x),(n.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(n){return!(n.max.x<this.min.x||n.min.x>this.max.x||n.max.y<this.min.y||n.min.y>this.max.y)}clampPoint(n,u){return u.copy(n).clamp(this.min,this.max)}distanceToPoint(n){return this.clampPoint(n,rp).distanceTo(n)}intersect(n){return this.min.max(n.min),this.max.min(n.max),this.isEmpty()&&this.makeEmpty(),this}union(n){return this.min.min(n.min),this.max.max(n.max),this}translate(n){return this.min.add(n),this.max.add(n),this}equals(n){return n.min.equals(this.min)&&n.max.equals(this.max)}}const np=new Le,hu=new Le;class TA{constructor(n=new Le,u=new Le){this.start=n,this.end=u}set(n,u){return this.start.copy(n),this.end.copy(u),this}copy(n){return this.start.copy(n.start),this.end.copy(n.end),this}getCenter(n){return n.addVectors(this.start,this.end).multiplyScalar(.5)}delta(n){return n.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(n,u){return this.delta(u).multiplyScalar(n).add(this.start)}closestPointToPointParameter(n,u){np.subVectors(n,this.start),hu.subVectors(this.end,this.start);const p=hu.dot(hu);let m=hu.dot(np)/p;return u&&(m=mn(m,0,1)),m}closestPointToPoint(n,u,p){const m=this.closestPointToPointParameter(n,u);return this.delta(p).multiplyScalar(m).add(this.start)}applyMatrix4(n){return this.start.applyMatrix4(n),this.end.applyMatrix4(n),this}equals(n){return n.start.equals(this.start)&&n.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const sp=new Le;class IA extends yr{constructor(n,u){super(),this.light=n,this.matrixAutoUpdate=!1,this.color=u,this.type="SpotLightHelper";const p=new Xi,m=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let w=0,S=1,I=32;w<I;w++,S++){const D=w/I*Math.PI*2,L=S/I*Math.PI*2;m.push(Math.cos(D),Math.sin(D),1,Math.cos(L),Math.sin(L),1)}p.setAttribute("position",new vi(m,3));const v=new Un({fog:!1,toneMapped:!1});this.cone=new Zn(p,v),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const n=this.light.distance?this.light.distance:1e3,u=n*Math.tan(this.light.angle);this.cone.scale.set(u,u,n),sp.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(sp),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ta=new Le,uu=new Ii,Gd=new Ii;class RA extends Zn{constructor(n){const u=op(n),p=new Xi,m=[],v=[],w=new Jt(0,0,1),S=new Jt(0,1,0);for(let I=0;I<u.length;I++){const D=u[I];D.parent&&D.parent.isBone&&(m.push(0,0,0),m.push(0,0,0),v.push(w.r,w.g,w.b),v.push(S.r,S.g,S.b))}p.setAttribute("position",new vi(m,3)),p.setAttribute("color",new vi(v,3)),super(p,new Un({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=n,this.bones=u,this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(n){const u=this.bones,p=this.geometry,m=p.getAttribute("position");Gd.copy(this.root.matrixWorld).invert();for(let v=0,w=0;v<u.length;v++){const S=u[v];S.parent&&S.parent.isBone&&(uu.multiplyMatrices(Gd,S.matrixWorld),Ta.setFromMatrixPosition(uu),m.setXYZ(w,Ta.x,Ta.y,Ta.z),uu.multiplyMatrices(Gd,S.parent.matrixWorld),Ta.setFromMatrixPosition(uu),m.setXYZ(w+1,Ta.x,Ta.y,Ta.z),w+=2)}p.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(n)}dispose(){this.geometry.dispose(),this.material.dispose()}}function op(b){const n=[];b.isBone===!0&&n.push(b);for(let u=0;u<b.children.length;u++)n.push.apply(n,op(b.children[u]));return n}class BA extends cn{constructor(n,u,p){super(new gc(u,4,2),new U0({wireframe:!0,fog:!1,toneMapped:!1})),this.light=n,this.color=p,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const DA=new Le,ap=new Jt,lp=new Jt;class LA extends yr{constructor(n,u,p){super(),this.light=n,this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1,this.color=p,this.type="HemisphereLightHelper";const m=new mc(u);m.rotateY(.5*Math.PI),this.material=new U0({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const v=m.getAttribute("position"),w=new Float32Array(3*v.count);m.setAttribute("color",new nr(w,3)),this.add(new cn(m,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const n=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const u=n.geometry.getAttribute("color");ap.copy(this.light.color),lp.copy(this.light.groundColor);for(let p=0,m=u.count;p<m;p++){const v=p<m/2?ap:lp;u.setXYZ(p,v.r,v.g,v.b)}u.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),n.lookAt(DA.setFromMatrixPosition(this.light.matrixWorld).negate())}}class PA extends Zn{constructor(n=10,u=10,p=4473924,m=8947848){p=new Jt(p),m=new Jt(m);const v=u/2,w=n/u,S=n/2,I=[],D=[];for(let Y=0,j=0,te=-S;Y<=u;Y++,te+=w){I.push(-S,0,te,S,0,te),I.push(te,0,-S,te,0,S);const re=Y===v?p:m;re.toArray(D,j),j+=3,re.toArray(D,j),j+=3,re.toArray(D,j),j+=3,re.toArray(D,j),j+=3}const L=new Xi;L.setAttribute("position",new vi(I,3)),L.setAttribute("color",new vi(D,3)),super(L,new Un({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class FA extends Zn{constructor(n=10,u=16,p=8,m=64,v=4473924,w=8947848){v=new Jt(v),w=new Jt(w);const S=[],I=[];if(u>1)for(let L=0;L<u;L++){const Y=L/u*(2*Math.PI),j=Math.sin(Y)*n,te=Math.cos(Y)*n;S.push(0,0,0),S.push(j,0,te);const re=1&L?v:w;I.push(re.r,re.g,re.b),I.push(re.r,re.g,re.b)}for(let L=0;L<p;L++){const Y=1&L?v:w,j=n-n/p*L;for(let te=0;te<m;te++){let re=te/m*(2*Math.PI),ce=Math.sin(re)*j,le=Math.cos(re)*j;S.push(ce,0,le),I.push(Y.r,Y.g,Y.b),re=(te+1)/m*(2*Math.PI),ce=Math.sin(re)*j,le=Math.cos(re)*j,S.push(ce,0,le),I.push(Y.r,Y.g,Y.b)}}const D=new Xi;D.setAttribute("position",new vi(S,3)),D.setAttribute("color",new vi(I,3)),super(D,new Un({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const cp=new Le,du=new Le,hp=new Le;class OA extends yr{constructor(n,u,p){super(),this.light=n,this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1,this.color=p,this.type="DirectionalLightHelper",u===void 0&&(u=1);let m=new Xi;m.setAttribute("position",new vi([-u,u,0,u,u,0,u,-u,0,-u,-u,0,-u,u,0],3));const v=new Un({fog:!1,toneMapped:!1});this.lightPlane=new Hs(m,v),this.add(this.lightPlane),m=new Xi,m.setAttribute("position",new vi([0,0,0,0,0,1],3)),this.targetLine=new Hs(m,v),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),cp.setFromMatrixPosition(this.light.matrixWorld),du.setFromMatrixPosition(this.light.target.matrixWorld),hp.subVectors(du,cp),this.lightPlane.lookAt(du),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(du),this.targetLine.scale.z=hp.length()}}const fu=new Le,Dn=new X1;class kA extends Zn{constructor(n){const u=new Xi,p=new Un({color:16777215,vertexColors:!0,toneMapped:!1}),m=[],v=[],w={};function S(re,ce){I(re),I(ce)}function I(re){m.push(0,0,0),v.push(0,0,0),w[re]===void 0&&(w[re]=[]),w[re].push(m.length/3-1)}S("n1","n2"),S("n2","n4"),S("n4","n3"),S("n3","n1"),S("f1","f2"),S("f2","f4"),S("f4","f3"),S("f3","f1"),S("n1","f1"),S("n2","f2"),S("n3","f3"),S("n4","f4"),S("p","n1"),S("p","n2"),S("p","n3"),S("p","n4"),S("u1","u2"),S("u2","u3"),S("u3","u1"),S("c","t"),S("p","c"),S("cn1","cn2"),S("cn3","cn4"),S("cf1","cf2"),S("cf3","cf4"),u.setAttribute("position",new vi(m,3)),u.setAttribute("color",new vi(v,3)),super(u,p),this.type="CameraHelper",this.camera=n,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=w,this.update();const D=new Jt(16755200),L=new Jt(16711680),Y=new Jt(43775),j=new Jt(16777215),te=new Jt(3355443);this.setColors(D,L,Y,j,te)}setColors(n,u,p,m,v){const w=this.geometry.getAttribute("color");w.setXYZ(0,n.r,n.g,n.b),w.setXYZ(1,n.r,n.g,n.b),w.setXYZ(2,n.r,n.g,n.b),w.setXYZ(3,n.r,n.g,n.b),w.setXYZ(4,n.r,n.g,n.b),w.setXYZ(5,n.r,n.g,n.b),w.setXYZ(6,n.r,n.g,n.b),w.setXYZ(7,n.r,n.g,n.b),w.setXYZ(8,n.r,n.g,n.b),w.setXYZ(9,n.r,n.g,n.b),w.setXYZ(10,n.r,n.g,n.b),w.setXYZ(11,n.r,n.g,n.b),w.setXYZ(12,n.r,n.g,n.b),w.setXYZ(13,n.r,n.g,n.b),w.setXYZ(14,n.r,n.g,n.b),w.setXYZ(15,n.r,n.g,n.b),w.setXYZ(16,n.r,n.g,n.b),w.setXYZ(17,n.r,n.g,n.b),w.setXYZ(18,n.r,n.g,n.b),w.setXYZ(19,n.r,n.g,n.b),w.setXYZ(20,n.r,n.g,n.b),w.setXYZ(21,n.r,n.g,n.b),w.setXYZ(22,n.r,n.g,n.b),w.setXYZ(23,n.r,n.g,n.b),w.setXYZ(24,u.r,u.g,u.b),w.setXYZ(25,u.r,u.g,u.b),w.setXYZ(26,u.r,u.g,u.b),w.setXYZ(27,u.r,u.g,u.b),w.setXYZ(28,u.r,u.g,u.b),w.setXYZ(29,u.r,u.g,u.b),w.setXYZ(30,u.r,u.g,u.b),w.setXYZ(31,u.r,u.g,u.b),w.setXYZ(32,p.r,p.g,p.b),w.setXYZ(33,p.r,p.g,p.b),w.setXYZ(34,p.r,p.g,p.b),w.setXYZ(35,p.r,p.g,p.b),w.setXYZ(36,p.r,p.g,p.b),w.setXYZ(37,p.r,p.g,p.b),w.setXYZ(38,m.r,m.g,m.b),w.setXYZ(39,m.r,m.g,m.b),w.setXYZ(40,v.r,v.g,v.b),w.setXYZ(41,v.r,v.g,v.b),w.setXYZ(42,v.r,v.g,v.b),w.setXYZ(43,v.r,v.g,v.b),w.setXYZ(44,v.r,v.g,v.b),w.setXYZ(45,v.r,v.g,v.b),w.setXYZ(46,v.r,v.g,v.b),w.setXYZ(47,v.r,v.g,v.b),w.setXYZ(48,v.r,v.g,v.b),w.setXYZ(49,v.r,v.g,v.b),w.needsUpdate=!0}update(){const n=this.geometry,u=this.pointMap;Dn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Qn("c",u,n,Dn,0,0,-1),Qn("t",u,n,Dn,0,0,1),Qn("n1",u,n,Dn,-1,-1,-1),Qn("n2",u,n,Dn,1,-1,-1),Qn("n3",u,n,Dn,-1,1,-1),Qn("n4",u,n,Dn,1,1,-1),Qn("f1",u,n,Dn,-1,-1,1),Qn("f2",u,n,Dn,1,-1,1),Qn("f3",u,n,Dn,-1,1,1),Qn("f4",u,n,Dn,1,1,1),Qn("u1",u,n,Dn,.7,1.1,-1),Qn("u2",u,n,Dn,-.7,1.1,-1),Qn("u3",u,n,Dn,0,2,-1),Qn("cf1",u,n,Dn,-1,0,1),Qn("cf2",u,n,Dn,1,0,1),Qn("cf3",u,n,Dn,0,-1,1),Qn("cf4",u,n,Dn,0,1,1),Qn("cn1",u,n,Dn,-1,0,-1),Qn("cn2",u,n,Dn,1,0,-1),Qn("cn3",u,n,Dn,0,-1,-1),Qn("cn4",u,n,Dn,0,1,-1),n.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Qn(b,n,u,p,m,v,w){fu.set(m,v,w).unproject(p);const S=n[b];if(S!==void 0){const I=u.getAttribute("position");for(let D=0,L=S.length;D<L;D++)I.setXYZ(S[D],fu.x,fu.y,fu.z)}}const pu=new Xn;class NA extends Zn{constructor(n,u=16776960){const p=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),m=new Float32Array(24),v=new Xi;v.setIndex(new nr(p,1)),v.setAttribute("position",new nr(m,3)),super(v,new Un({color:u,toneMapped:!1})),this.object=n,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(n){if(n!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&pu.setFromObject(this.object),pu.isEmpty())return;const u=pu.min,p=pu.max,m=this.geometry.attributes.position,v=m.array;v[0]=p.x,v[1]=p.y,v[2]=p.z,v[3]=u.x,v[4]=p.y,v[5]=p.z,v[6]=u.x,v[7]=u.y,v[8]=p.z,v[9]=p.x,v[10]=u.y,v[11]=p.z,v[12]=p.x,v[13]=p.y,v[14]=u.z,v[15]=u.x,v[16]=p.y,v[17]=u.z,v[18]=u.x,v[19]=u.y,v[20]=u.z,v[21]=p.x,v[22]=u.y,v[23]=u.z,m.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(n){return this.object=n,this.update(),this}copy(n,u){return super.copy(n,u),this.object=n.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class UA extends Zn{constructor(n,u=16776960){const p=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),m=new Xi;m.setIndex(new nr(p,1)),m.setAttribute("position",new vi([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(m,new Un({color:u,toneMapped:!1})),this.box=n,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(n){const u=this.box;u.isEmpty()||(u.getCenter(this.position),u.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(n))}dispose(){this.geometry.dispose(),this.material.dispose()}}class QA extends Hs{constructor(n,u=1,p=16776960){const m=p,v=new Xi;v.setAttribute("position",new vi([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),v.computeBoundingSphere(),super(v,new Un({color:m,toneMapped:!1})),this.type="PlaneHelper",this.plane=n,this.size=u;const w=new Xi;w.setAttribute("position",new vi([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),w.computeBoundingSphere(),this.add(new cn(w,new U0({color:m,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(n){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(n)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const up=new Le;let Au,Vd;class HA extends yr{constructor(n=new Le(0,0,1),u=new Le(0,0,0),p=1,m=16776960,v=.2*p,w=.2*v){super(),this.type="ArrowHelper",Au===void 0&&(Au=new Xi,Au.setAttribute("position",new vi([0,0,0,0,1,0],3)),Vd=new X(0,.5,1,5,1),Vd.translate(0,-.5,0)),this.position.copy(u),this.line=new Hs(Au,new Un({color:m,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new cn(Vd,new U0({color:m,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(n),this.setLength(p,v,w)}setDirection(n){if(n.y>.99999)this.quaternion.set(0,0,0,1);else if(n.y<-.99999)this.quaternion.set(1,0,0,0);else{up.set(n.z,0,-n.x).normalize();const u=Math.acos(n.y);this.quaternion.setFromAxisAngle(up,u)}}setLength(n,u=.2*n,p=.2*u){this.line.scale.set(1,Math.max(1e-4,n-u),1),this.line.updateMatrix(),this.cone.scale.set(p,u,p),this.cone.position.y=n,this.cone.updateMatrix()}setColor(n){this.line.material.color.set(n),this.cone.material.color.set(n)}copy(n){return super.copy(n,!1),this.line.copy(n.line),this.cone.copy(n.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class zA extends Zn{constructor(n=1){const u=[0,0,0,n,0,0,0,0,0,0,n,0,0,0,0,0,0,n],p=new Xi;p.setAttribute("position",new vi(u,3)),p.setAttribute("color",new vi([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(p,new Un({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(n,u,p){const m=new Jt,v=this.geometry.attributes.color.array;return m.set(n),m.toArray(v,0),m.toArray(v,3),m.set(u),m.toArray(v,6),m.toArray(v,9),m.set(p),m.toArray(v,12),m.toArray(v,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class GA{constructor(){this.type="ShapePath",this.color=new Jt,this.subPaths=[],this.currentPath=null}moveTo(n,u){return this.currentPath=new q,this.subPaths.push(this.currentPath),this.currentPath.moveTo(n,u),this}lineTo(n,u){return this.currentPath.lineTo(n,u),this}quadraticCurveTo(n,u,p,m){return this.currentPath.quadraticCurveTo(n,u,p,m),this}bezierCurveTo(n,u,p,m,v,w){return this.currentPath.bezierCurveTo(n,u,p,m,v,w),this}splineThru(n){return this.currentPath.splineThru(n),this}toShapes(n){function u(le,de){const pe=de.length;let me=!1;for(let we=pe-1,Fe=0;Fe<pe;we=Fe++){let Be=de[we],ke=de[Fe],ze=ke.x-Be.x,tt=ke.y-Be.y;if(Math.abs(tt)>Number.EPSILON){if(tt<0&&(Be=de[Fe],ze=-ze,ke=de[we],tt=-tt),le.y<Be.y||le.y>ke.y)continue;if(le.y===Be.y){if(le.x===Be.x)return!0}else{const rt=tt*(le.x-Be.x)-ze*(le.y-Be.y);if(rt===0)return!0;if(rt<0)continue;me=!me}}else{if(le.y!==Be.y)continue;if(ke.x<=le.x&&le.x<=Be.x||Be.x<=le.x&&le.x<=ke.x)return!0}}return me}const p=ho.isClockWise,m=this.subPaths;if(m.length===0)return[];let v,w,S;const I=[];if(m.length===1)return w=m[0],S=new Et,S.curves=w.curves,I.push(S),I;let D=!p(m[0].getPoints());D=n?!D:D;const L=[],Y=[];let j,te,re=[],ce=0;Y[ce]=void 0,re[ce]=[];for(let le=0,de=m.length;le<de;le++)w=m[le],j=w.getPoints(),v=p(j),v=n?!v:v,v?(!D&&Y[ce]&&ce++,Y[ce]={s:new Et,p:j},Y[ce].s.curves=w.curves,D&&ce++,re[ce]=[]):re[ce].push({h:w,p:j[0]});if(!Y[0])return function(le){const de=[];for(let pe=0,me=le.length;pe<me;pe++){const we=le[pe],Fe=new Et;Fe.curves=we.curves,de.push(Fe)}return de}(m);if(Y.length>1){let le=!1,de=0;for(let pe=0,me=Y.length;pe<me;pe++)L[pe]=[];for(let pe=0,me=Y.length;pe<me;pe++){const we=re[pe];for(let Fe=0;Fe<we.length;Fe++){const Be=we[Fe];let ke=!0;for(let ze=0;ze<Y.length;ze++)u(Be.p,Y[ze].p)&&(pe!==ze&&de++,ke?(ke=!1,L[ze].push(Be)):le=!0);ke&&L[pe].push(Be)}}de>0&&le===!1&&(re=L)}for(let le=0,de=Y.length;le<de;le++){S=Y[le].s,I.push(S),te=re[le];for(let pe=0,me=te.length;pe<me;pe++)S.holes.push(te[pe].h)}return I}}class VA extends Wn{constructor(n=1,u=1,p=1,m={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(n,u,{...m,count:p}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Q}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Q);const Wd=new WeakMap;function WA(){let b,n;function u(p,m,v,w,S,I){const D=I.num_components(),L=v.num_points()*D,Y=L*S.BYTES_PER_ELEMENT,j=function(ce,le){switch(le){case Float32Array:return ce.DT_FLOAT32;case Int8Array:return ce.DT_INT8;case Int16Array:return ce.DT_INT16;case Int32Array:return ce.DT_INT32;case Uint8Array:return ce.DT_UINT8;case Uint16Array:return ce.DT_UINT16;case Uint32Array:return ce.DT_UINT32}}(p,S),te=p._malloc(Y);m.GetAttributeDataArrayForAllPoints(v,I,j,Y,te);const re=new S(p.HEAPF32.buffer,te,L).slice();return p._free(te),{name:w,array:re,itemSize:D}}onmessage=function(p){const m=p.data;switch(m.type){case"init":b=m.decoderConfig,n=new Promise(function(S){b.onModuleLoaded=function(I){S({draco:I})},DracoDecoderModule(b)});break;case"decode":const v=m.buffer,w=m.taskConfig;n.then(S=>{const I=S.draco,D=new I.Decoder;try{const L=function(j,te,re,ce){const le=ce.attributeIDs,de=ce.attributeTypes;let pe,me;const we=te.GetEncodedGeometryType(re);if(we===j.TRIANGULAR_MESH)pe=new j.Mesh,me=te.DecodeArrayToMesh(re,re.byteLength,pe);else{if(we!==j.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");pe=new j.PointCloud,me=te.DecodeArrayToPointCloud(re,re.byteLength,pe)}if(!me.ok()||pe.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+me.error_msg());const Fe={index:null,attributes:[]};for(const Be in le){const ke=self[de[Be]];let ze,tt;if(ce.useUniqueIDs)tt=le[Be],ze=te.GetAttributeByUniqueId(pe,tt);else{if(tt=te.GetAttributeId(pe,j[le[Be]]),tt===-1)continue;ze=te.GetAttribute(pe,tt)}const rt=u(j,te,pe,Be,ke,ze);Be==="color"&&(rt.vertexColorSpace=ce.vertexColorSpace),Fe.attributes.push(rt)}return we===j.TRIANGULAR_MESH&&(Fe.index=function(Be,ke,ze){const tt=3*ze.num_faces(),rt=4*tt,$e=Be._malloc(rt);ke.GetTrianglesUInt32Array(ze,rt,$e);const ht=new Uint32Array(Be.HEAPF32.buffer,$e,tt).slice();return Be._free($e),{array:ht,itemSize:1}}(j,te,pe)),j.destroy(pe),Fe}(I,D,new Int8Array(v),w),Y=L.attributes.map(j=>j.array.buffer);L.index&&Y.push(L.index.array.buffer),self.postMessage({type:"decode",id:m.id,geometry:L},Y)}catch(L){console.error(L),self.postMessage({type:"error",id:m.id,error:L.message})}finally{I.destroy(D)}})}}}function qA(b,n,u=!0){if(!n||!n.isReady)throw new Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!b.hasAttribute("position")||!b.hasAttribute("normal")||!b.hasAttribute("uv"))throw new Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');function p(w){if(w.normalized||w.isInterleavedBufferAttribute){const S=new Float32Array(w.count*w.itemSize);for(let I=0,D=0;I<w.count;I++)S[D++]=w.getX(I),S[D++]=w.getY(I),w.itemSize>2&&(S[D++]=w.getZ(I));return S}return w.array instanceof Float32Array?w.array:new Float32Array(w.array)}const m=b.index?b.toNonIndexed():b,v=n.generateTangents(p(m.attributes.position),p(m.attributes.normal),p(m.attributes.uv));if(u)for(let w=3;w<v.length;w+=4)v[w]*=-1;return m.setAttribute("tangent",new nr(v,4)),b!==m&&b.copy(m),b}function XA(b,n=!1){const u=b[0].index!==null,p=new Set(Object.keys(b[0].attributes)),m=new Set(Object.keys(b[0].morphAttributes)),v={},w={},S=b[0].morphTargetsRelative,I=new Xi;let D=0;for(let L=0;L<b.length;++L){const Y=b[L];let j=0;if(u!==(Y.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+L+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const te in Y.attributes){if(!p.has(te))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+L+'. All geometries must have compatible attributes; make sure "'+te+'" attribute exists among all geometries, or in none of them.'),null;v[te]===void 0&&(v[te]=[]),v[te].push(Y.attributes[te]),j++}if(j!==p.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+L+". Make sure all geometries have the same number of attributes."),null;if(S!==Y.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+L+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const te in Y.morphAttributes){if(!m.has(te))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+L+".  .morphAttributes must be consistent throughout all geometries."),null;w[te]===void 0&&(w[te]=[]),w[te].push(Y.morphAttributes[te])}if(n){let te;if(u)te=Y.index.count;else{if(Y.attributes.position===void 0)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+L+". The geometry must have either an index or a position attribute"),null;te=Y.attributes.position.count}I.addGroup(D,te,L),D+=te}}if(u){let L=0;const Y=[];for(let j=0;j<b.length;++j){const te=b[j].index;for(let re=0;re<te.count;++re)Y.push(te.getX(re)+L);L+=b[j].attributes.position.count}I.setIndex(Y)}for(const L in v){const Y=qd(v[L]);if(!Y)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+L+" attribute."),null;I.setAttribute(L,Y)}for(const L in w){const Y=w[L][0].length;if(Y===0)break;I.morphAttributes=I.morphAttributes||{},I.morphAttributes[L]=[];for(let j=0;j<Y;++j){const te=[];for(let ce=0;ce<w[L].length;++ce)te.push(w[L][ce][j]);const re=qd(te);if(!re)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+L+" morphAttribute."),null;I.morphAttributes[L].push(re)}}return I}function qd(b){let n,u,p,m=-1,v=0;for(let D=0;D<b.length;++D){const L=b[D];if(n===void 0&&(n=L.array.constructor),n!==L.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(u===void 0&&(u=L.itemSize),u!==L.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(p===void 0&&(p=L.normalized),p!==L.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(m===-1&&(m=L.gpuType),m!==L.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;v+=L.count*u}const w=new n(v),S=new nr(w,u,p);let I=0;for(let D=0;D<b.length;++D){const L=b[D];if(L.isInterleavedBufferAttribute){const Y=I/u;for(let j=0,te=L.count;j<te;j++)for(let re=0;re<u;re++){const ce=L.getComponent(j,re);S.setComponent(j+Y,re,ce)}}else w.set(L.array,I);I+=L.count*u}return m!==void 0&&(S.gpuType=m),S}function YA(b){return b.isInstancedInterleavedBufferAttribute||b.isInterleavedBufferAttribute?mu(b):b.isInstancedBufferAttribute?new bs().copy(b):new nr().copy(b)}function KA(b){let n,u=0,p=0;for(let D=0,L=b.length;D<L;++D){const Y=b[D];if(n===void 0&&(n=Y.array.constructor),n!==Y.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;u+=Y.array.length,p+=Y.itemSize}const m=new Lo(new n(u),p);let v=0;const w=[],S=["getX","getY","getZ","getW"],I=["setX","setY","setZ","setW"];for(let D=0,L=b.length;D<L;D++){const Y=b[D],j=Y.itemSize,te=Y.count,re=new u0(m,j,v,Y.normalized);w.push(re),v+=j;for(let ce=0;ce<te;ce++)for(let le=0;le<j;le++)re[I[le]](ce,Y[S[le]](ce))}return w}function mu(b){const n=b.data.array.constructor,u=b.count,p=b.itemSize,m=b.normalized,v=new n(u*p);let w;w=b.isInstancedInterleavedBufferAttribute?new bs(v,p,m,b.meshPerAttribute):new nr(v,p,m);for(let S=0;S<u;S++)w.setX(S,b.getX(S)),p>=2&&w.setY(S,b.getY(S)),p>=3&&w.setZ(S,b.getZ(S)),p>=4&&w.setW(S,b.getW(S));return w}function JA(b){const n=b.attributes,u=b.morphTargets,p=new Map;for(const m in n){const v=n[m];v.isInterleavedBufferAttribute&&(p.has(v)||p.set(v,mu(v)),n[m]=p.get(v))}for(const m in u){const v=u[m];v.isInterleavedBufferAttribute&&(p.has(v)||p.set(v,mu(v)),u[m]=p.get(v))}}function ZA(b){let n=0;for(const p in b.attributes){const m=b.getAttribute(p);n+=m.count*m.itemSize*m.array.BYTES_PER_ELEMENT}const u=b.getIndex();return n+=u?u.count*u.itemSize*u.array.BYTES_PER_ELEMENT:0,n}function $A(b,n=1e-4){n=Math.max(n,Number.EPSILON);const u={},p=b.getIndex(),m=b.getAttribute("position"),v=p?p.count:m.count;let w=0;const S=Object.keys(b.attributes),I={},D={},L=[],Y=["getX","getY","getZ","getW"],j=["setX","setY","setZ","setW"];for(let pe=0,me=S.length;pe<me;pe++){const we=S[pe],Fe=b.attributes[we];I[we]=new nr(new Fe.array.constructor(Fe.count*Fe.itemSize),Fe.itemSize,Fe.normalized);const Be=b.morphAttributes[we];Be&&(D[we]=new nr(new Be.array.constructor(Be.count*Be.itemSize),Be.itemSize,Be.normalized))}const te=.5*n,re=Math.log10(1/n),ce=Math.pow(10,re),le=te*ce;for(let pe=0;pe<v;pe++){const me=p?p.getX(pe):pe;let we="";for(let Fe=0,Be=S.length;Fe<Be;Fe++){const ke=S[Fe],ze=b.getAttribute(ke),tt=ze.itemSize;for(let rt=0;rt<tt;rt++)we+=~~(ze[Y[rt]](me)*ce+le)+","}if(we in u)L.push(u[we]);else{for(let Fe=0,Be=S.length;Fe<Be;Fe++){const ke=S[Fe],ze=b.getAttribute(ke),tt=b.morphAttributes[ke],rt=ze.itemSize,$e=I[ke],ht=D[ke];for(let ut=0;ut<rt;ut++){const at=Y[ut],Dt=j[ut];if($e[Dt](w,ze[at](me)),tt)for(let It=0,Ot=tt.length;It<Ot;It++)ht[It][Dt](w,tt[It][at](me))}}u[we]=w,L.push(w),w++}}const de=b.clone();for(const pe in b.attributes){const me=I[pe];if(de.setAttribute(pe,new nr(me.array.slice(0,w*me.itemSize),me.itemSize,me.normalized)),pe in D)for(let we=0;we<D[pe].length;we++){const Fe=D[pe][we];de.morphAttributes[pe][we]=new nr(Fe.array.slice(0,w*Fe.itemSize),Fe.itemSize,Fe.normalized)}}return de.setIndex(L),de}function Xd(b,n){if(n===Xs)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),b;if(n===ds||n===Ls){let u=b.getIndex();if(u===null){const w=[],S=b.getAttribute("position");if(S===void 0)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),b;for(let I=0;I<S.count;I++)w.push(I);b.setIndex(w),u=b.getIndex()}const p=u.count-2,m=[];if(n===ds)for(let w=1;w<=p;w++)m.push(u.getX(0)),m.push(u.getX(w)),m.push(u.getX(w+1));else for(let w=0;w<p;w++)w%2==0?(m.push(u.getX(w)),m.push(u.getX(w+1)),m.push(u.getX(w+2))):(m.push(u.getX(w+2)),m.push(u.getX(w+1)),m.push(u.getX(w)));m.length/3!==p&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const v=b.clone();return v.setIndex(m),v.clearGroups(),v}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",n),b}function jA(b){const n=new Le,u=new Le,p=new Le,m=new Le,v=new Le,w=new Le,S=new Le,I=new Le,D=new Le;function L(Ot,Tt,Ai,yi,ni,ai,hi,fi){n.fromBufferAttribute(Tt,ni),u.fromBufferAttribute(Tt,ai),p.fromBufferAttribute(Tt,hi);const wt=Ot.morphTargetInfluences;if(Ai&&wt){S.set(0,0,0),I.set(0,0,0),D.set(0,0,0);for(let jt=0,mi=Ai.length;jt<mi;jt++){const ei=wt[jt],Pe=Ai[jt];ei!==0&&(m.fromBufferAttribute(Pe,ni),v.fromBufferAttribute(Pe,ai),w.fromBufferAttribute(Pe,hi),yi?(S.addScaledVector(m,ei),I.addScaledVector(v,ei),D.addScaledVector(w,ei)):(S.addScaledVector(m.sub(n),ei),I.addScaledVector(v.sub(u),ei),D.addScaledVector(w.sub(p),ei)))}n.add(S),u.add(I),p.add(D)}Ot.isSkinnedMesh&&(Ot.applyBoneTransform(ni,n),Ot.applyBoneTransform(ai,u),Ot.applyBoneTransform(hi,p)),fi[3*ni+0]=n.x,fi[3*ni+1]=n.y,fi[3*ni+2]=n.z,fi[3*ai+0]=u.x,fi[3*ai+1]=u.y,fi[3*ai+2]=u.z,fi[3*hi+0]=p.x,fi[3*hi+1]=p.y,fi[3*hi+2]=p.z}const Y=b.geometry,j=b.material;let te,re,ce;const le=Y.index,de=Y.attributes.position,pe=Y.morphAttributes.position,me=Y.morphTargetsRelative,we=Y.attributes.normal,Fe=Y.morphAttributes.position,Be=Y.groups,ke=Y.drawRange;let ze,tt,rt,$e,ht,ut,at;const Dt=new Float32Array(de.count*de.itemSize),It=new Float32Array(we.count*we.itemSize);if(le!==null)if(Array.isArray(j))for(ze=0,rt=Be.length;ze<rt;ze++)for(ht=Be[ze],ut=Math.max(ht.start,ke.start),at=Math.min(ht.start+ht.count,ke.start+ke.count),tt=ut,$e=at;tt<$e;tt+=3)te=le.getX(tt),re=le.getX(tt+1),ce=le.getX(tt+2),L(b,de,pe,me,te,re,ce,Dt),L(b,we,Fe,me,te,re,ce,It);else for(ut=Math.max(0,ke.start),at=Math.min(le.count,ke.start+ke.count),ze=ut,rt=at;ze<rt;ze+=3)te=le.getX(ze),re=le.getX(ze+1),ce=le.getX(ze+2),L(b,de,pe,me,te,re,ce,Dt),L(b,we,Fe,me,te,re,ce,It);else if(Array.isArray(j))for(ze=0,rt=Be.length;ze<rt;ze++)for(ht=Be[ze],ut=Math.max(ht.start,ke.start),at=Math.min(ht.start+ht.count,ke.start+ke.count),tt=ut,$e=at;tt<$e;tt+=3)te=tt,re=tt+1,ce=tt+2,L(b,de,pe,me,te,re,ce,Dt),L(b,we,Fe,me,te,re,ce,It);else for(ut=Math.max(0,ke.start),at=Math.min(de.count,ke.start+ke.count),ze=ut,rt=at;ze<rt;ze+=3)te=ze,re=ze+1,ce=ze+2,L(b,de,pe,me,te,re,ce,Dt),L(b,we,Fe,me,te,re,ce,It);return{positionAttribute:de,normalAttribute:we,morphedPositionAttribute:new vi(Dt,3),morphedNormalAttribute:new vi(It,3)}}function em(b){if(b.groups.length===0)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),b;let n=b.groups;if(n=n.sort((w,S)=>w.materialIndex!==S.materialIndex?w.materialIndex-S.materialIndex:w.start-S.start),b.getIndex()===null){const w=b.getAttribute("position"),S=[];for(let I=0;I<w.count;I+=3)S.push(I,I+1,I+2);b.setIndex(S)}const u=b.getIndex(),p=[];for(let w=0;w<n.length;w++){const S=n[w],I=S.start,D=I+S.count;for(let L=I;L<D;L++)p.push(u.getX(L))}b.dispose(),b.setIndex(p);let m=0;for(let w=0;w<n.length;w++){const S=n[w];S.start=m,m+=S.count}let v=n[0];b.groups=[v];for(let w=1;w<n.length;w++){const S=n[w];v.materialIndex===S.materialIndex?v.count+=S.count:(v=S,b.groups.push(v))}return b}function tm(b,n=Math.PI/3){const u=Math.cos(n),p=100*(1+1e-10),m=[new Le,new Le,new Le],v=new Le,w=new Le,S=new Le,I=new Le;function D(ce){return`${~~(ce.x*p)},${~~(ce.y*p)},${~~(ce.z*p)}`}const L=b.index?b.toNonIndexed():b,Y=L.attributes.position,j={};for(let ce=0,le=Y.count/3;ce<le;ce++){const de=3*ce,pe=m[0].fromBufferAttribute(Y,de+0),me=m[1].fromBufferAttribute(Y,de+1),we=m[2].fromBufferAttribute(Y,de+2);v.subVectors(we,me),w.subVectors(pe,me);const Fe=new Le().crossVectors(v,w).normalize();for(let Be=0;Be<3;Be++){const ke=D(m[Be]);ke in j||(j[ke]=[]),j[ke].push(Fe)}}const te=new Float32Array(3*Y.count),re=new nr(te,3,!1);for(let ce=0,le=Y.count/3;ce<le;ce++){const de=3*ce,pe=m[0].fromBufferAttribute(Y,de+0),me=m[1].fromBufferAttribute(Y,de+1),we=m[2].fromBufferAttribute(Y,de+2);v.subVectors(we,me),w.subVectors(pe,me),S.crossVectors(v,w).normalize();for(let Fe=0;Fe<3;Fe++){const Be=j[D(m[Fe])];I.set(0,0,0);for(let ke=0,ze=Be.length;ke<ze;ke++){const tt=Be[ke];S.dot(tt)>u&&I.add(tt)}I.normalize(),re.setXYZ(de+Fe,I.x,I.y,I.z)}}return L.setAttribute("normal",re),L}function im(){let b={};return{get:function(n){return b[n]},add:function(n,u){b[n]=u},remove:function(n){delete b[n]},removeAll:function(){b={}}}}const wr={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class rm{constructor(n){this.parser=n,this.name=wr.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const n=this.parser,u=this.parser.json.nodes||[];for(let p=0,m=u.length;p<m;p++){const v=u[p];v.extensions&&v.extensions[this.name]&&v.extensions[this.name].light!==void 0&&n._addNodeRef(this.cache,v.extensions[this.name].light)}}_loadLight(n){const u=this.parser,p="light:"+n;let m=u.cache.get(p);if(m)return m;const v=u.json,w=((v.extensions&&v.extensions[this.name]||{}).lights||[])[n];let S;const I=new Jt(16777215);w.color!==void 0&&I.setRGB(w.color[0],w.color[1],w.color[2],Cn);const D=w.range!==void 0?w.range:0;switch(w.type){case"directional":S=new kd(I),S.target.position.set(0,0,-1),S.add(S.target);break;case"point":S=new Od(I),S.distance=D;break;case"spot":S=new Pd(I),S.distance=D,w.spot=w.spot||{},w.spot.innerConeAngle=w.spot.innerConeAngle!==void 0?w.spot.innerConeAngle:0,w.spot.outerConeAngle=w.spot.outerConeAngle!==void 0?w.spot.outerConeAngle:Math.PI/4,S.angle=w.spot.outerConeAngle,S.penumbra=1-w.spot.innerConeAngle/w.spot.outerConeAngle,S.target.position.set(0,0,-1),S.add(S.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+w.type)}return S.position.set(0,0,0),S.decay=2,Ra(S,w),w.intensity!==void 0&&(S.intensity=w.intensity),S.name=u.createUniqueName(w.name||"light_"+n),m=Promise.resolve(S),u.cache.add(p,m),m}getDependency(n,u){if(n==="light")return this._loadLight(u)}createNodeAttachment(n){const u=this,p=this.parser,m=p.json.nodes[n],v=(m.extensions&&m.extensions[this.name]||{}).light;return v===void 0?null:this._loadLight(v).then(function(w){return p._getNodeRef(u.cache,v,w)})}}class nm{constructor(){this.name=wr.KHR_MATERIALS_UNLIT}getMaterialType(){return U0}extendParams(n,u,p){const m=[];n.color=new Jt(1,1,1),n.opacity=1;const v=u.pbrMetallicRoughness;if(v){if(Array.isArray(v.baseColorFactor)){const w=v.baseColorFactor;n.color.setRGB(w[0],w[1],w[2],Cn),n.opacity=w[3]}v.baseColorTexture!==void 0&&m.push(p.assignTexture(n,"map",v.baseColorTexture,An))}return Promise.all(m)}}class sm{constructor(n){this.parser=n,this.name=wr.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(n,u){const p=this.parser.json.materials[n];if(!p.extensions||!p.extensions[this.name])return Promise.resolve();const m=p.extensions[this.name].emissiveStrength;return m!==void 0&&(u.emissiveIntensity=m),Promise.resolve()}}class om{constructor(n){this.parser=n,this.name=wr.KHR_MATERIALS_CLEARCOAT}getMaterialType(n){const u=this.parser.json.materials[n];return u.extensions&&u.extensions[this.name]?Cs:null}extendMaterialParams(n,u){const p=this.parser,m=p.json.materials[n];if(!m.extensions||!m.extensions[this.name])return Promise.resolve();const v=[],w=m.extensions[this.name];if(w.clearcoatFactor!==void 0&&(u.clearcoat=w.clearcoatFactor),w.clearcoatTexture!==void 0&&v.push(p.assignTexture(u,"clearcoatMap",w.clearcoatTexture)),w.clearcoatRoughnessFactor!==void 0&&(u.clearcoatRoughness=w.clearcoatRoughnessFactor),w.clearcoatRoughnessTexture!==void 0&&v.push(p.assignTexture(u,"clearcoatRoughnessMap",w.clearcoatRoughnessTexture)),w.clearcoatNormalTexture!==void 0&&(v.push(p.assignTexture(u,"clearcoatNormalMap",w.clearcoatNormalTexture)),w.clearcoatNormalTexture.scale!==void 0)){const S=w.clearcoatNormalTexture.scale;u.clearcoatNormalScale=new zt(S,S)}return Promise.all(v)}}class am{constructor(n){this.parser=n,this.name=wr.KHR_MATERIALS_DISPERSION}getMaterialType(n){const u=this.parser.json.materials[n];return u.extensions&&u.extensions[this.name]?Cs:null}extendMaterialParams(n,u){const p=this.parser.json.materials[n];if(!p.extensions||!p.extensions[this.name])return Promise.resolve();const m=p.extensions[this.name];return u.dispersion=m.dispersion!==void 0?m.dispersion:0,Promise.resolve()}}class lm{constructor(n){this.parser=n,this.name=wr.KHR_MATERIALS_IRIDESCENCE}getMaterialType(n){const u=this.parser.json.materials[n];return u.extensions&&u.extensions[this.name]?Cs:null}extendMaterialParams(n,u){const p=this.parser,m=p.json.materials[n];if(!m.extensions||!m.extensions[this.name])return Promise.resolve();const v=[],w=m.extensions[this.name];return w.iridescenceFactor!==void 0&&(u.iridescence=w.iridescenceFactor),w.iridescenceTexture!==void 0&&v.push(p.assignTexture(u,"iridescenceMap",w.iridescenceTexture)),w.iridescenceIor!==void 0&&(u.iridescenceIOR=w.iridescenceIor),u.iridescenceThicknessRange===void 0&&(u.iridescenceThicknessRange=[100,400]),w.iridescenceThicknessMinimum!==void 0&&(u.iridescenceThicknessRange[0]=w.iridescenceThicknessMinimum),w.iridescenceThicknessMaximum!==void 0&&(u.iridescenceThicknessRange[1]=w.iridescenceThicknessMaximum),w.iridescenceThicknessTexture!==void 0&&v.push(p.assignTexture(u,"iridescenceThicknessMap",w.iridescenceThicknessTexture)),Promise.all(v)}}class cm{constructor(n){this.parser=n,this.name=wr.KHR_MATERIALS_SHEEN}getMaterialType(n){const u=this.parser.json.materials[n];return u.extensions&&u.extensions[this.name]?Cs:null}extendMaterialParams(n,u){const p=this.parser,m=p.json.materials[n];if(!m.extensions||!m.extensions[this.name])return Promise.resolve();const v=[];u.sheenColor=new Jt(0,0,0),u.sheenRoughness=0,u.sheen=1;const w=m.extensions[this.name];if(w.sheenColorFactor!==void 0){const S=w.sheenColorFactor;u.sheenColor.setRGB(S[0],S[1],S[2],Cn)}return w.sheenRoughnessFactor!==void 0&&(u.sheenRoughness=w.sheenRoughnessFactor),w.sheenColorTexture!==void 0&&v.push(p.assignTexture(u,"sheenColorMap",w.sheenColorTexture,An)),w.sheenRoughnessTexture!==void 0&&v.push(p.assignTexture(u,"sheenRoughnessMap",w.sheenRoughnessTexture)),Promise.all(v)}}class hm{constructor(n){this.parser=n,this.name=wr.KHR_MATERIALS_TRANSMISSION}getMaterialType(n){const u=this.parser.json.materials[n];return u.extensions&&u.extensions[this.name]?Cs:null}extendMaterialParams(n,u){const p=this.parser,m=p.json.materials[n];if(!m.extensions||!m.extensions[this.name])return Promise.resolve();const v=[],w=m.extensions[this.name];return w.transmissionFactor!==void 0&&(u.transmission=w.transmissionFactor),w.transmissionTexture!==void 0&&v.push(p.assignTexture(u,"transmissionMap",w.transmissionTexture)),Promise.all(v)}}class um{constructor(n){this.parser=n,this.name=wr.KHR_MATERIALS_VOLUME}getMaterialType(n){const u=this.parser.json.materials[n];return u.extensions&&u.extensions[this.name]?Cs:null}extendMaterialParams(n,u){const p=this.parser,m=p.json.materials[n];if(!m.extensions||!m.extensions[this.name])return Promise.resolve();const v=[],w=m.extensions[this.name];u.thickness=w.thicknessFactor!==void 0?w.thicknessFactor:0,w.thicknessTexture!==void 0&&v.push(p.assignTexture(u,"thicknessMap",w.thicknessTexture)),u.attenuationDistance=w.attenuationDistance||1/0;const S=w.attenuationColor||[1,1,1];return u.attenuationColor=new Jt().setRGB(S[0],S[1],S[2],Cn),Promise.all(v)}}class dm{constructor(n){this.parser=n,this.name=wr.KHR_MATERIALS_IOR}getMaterialType(n){const u=this.parser.json.materials[n];return u.extensions&&u.extensions[this.name]?Cs:null}extendMaterialParams(n,u){const p=this.parser.json.materials[n];if(!p.extensions||!p.extensions[this.name])return Promise.resolve();const m=p.extensions[this.name];return u.ior=m.ior!==void 0?m.ior:1.5,Promise.resolve()}}class fm{constructor(n){this.parser=n,this.name=wr.KHR_MATERIALS_SPECULAR}getMaterialType(n){const u=this.parser.json.materials[n];return u.extensions&&u.extensions[this.name]?Cs:null}extendMaterialParams(n,u){const p=this.parser,m=p.json.materials[n];if(!m.extensions||!m.extensions[this.name])return Promise.resolve();const v=[],w=m.extensions[this.name];u.specularIntensity=w.specularFactor!==void 0?w.specularFactor:1,w.specularTexture!==void 0&&v.push(p.assignTexture(u,"specularIntensityMap",w.specularTexture));const S=w.specularColorFactor||[1,1,1];return u.specularColor=new Jt().setRGB(S[0],S[1],S[2],Cn),w.specularColorTexture!==void 0&&v.push(p.assignTexture(u,"specularColorMap",w.specularColorTexture,An)),Promise.all(v)}}class pm{constructor(n){this.parser=n,this.name=wr.EXT_MATERIALS_BUMP}getMaterialType(n){const u=this.parser.json.materials[n];return u.extensions&&u.extensions[this.name]?Cs:null}extendMaterialParams(n,u){const p=this.parser,m=p.json.materials[n];if(!m.extensions||!m.extensions[this.name])return Promise.resolve();const v=[],w=m.extensions[this.name];return u.bumpScale=w.bumpFactor!==void 0?w.bumpFactor:1,w.bumpTexture!==void 0&&v.push(p.assignTexture(u,"bumpMap",w.bumpTexture)),Promise.all(v)}}class Am{constructor(n){this.parser=n,this.name=wr.KHR_MATERIALS_ANISOTROPY}getMaterialType(n){const u=this.parser.json.materials[n];return u.extensions&&u.extensions[this.name]?Cs:null}extendMaterialParams(n,u){const p=this.parser,m=p.json.materials[n];if(!m.extensions||!m.extensions[this.name])return Promise.resolve();const v=[],w=m.extensions[this.name];return w.anisotropyStrength!==void 0&&(u.anisotropy=w.anisotropyStrength),w.anisotropyRotation!==void 0&&(u.anisotropyRotation=w.anisotropyRotation),w.anisotropyTexture!==void 0&&v.push(p.assignTexture(u,"anisotropyMap",w.anisotropyTexture)),Promise.all(v)}}class mm{constructor(n){this.parser=n,this.name=wr.KHR_TEXTURE_BASISU}loadTexture(n){const u=this.parser,p=u.json,m=p.textures[n];if(!m.extensions||!m.extensions[this.name])return null;const v=m.extensions[this.name],w=u.options.ktx2Loader;if(!w){if(p.extensionsRequired&&p.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return u.loadTextureImage(n,v.source,w)}}class gm{constructor(n){this.parser=n,this.name=wr.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(n){const u=this.name,p=this.parser,m=p.json,v=m.textures[n];if(!v.extensions||!v.extensions[u])return null;const w=v.extensions[u],S=m.images[w.source];let I=p.textureLoader;if(S.uri){const D=p.options.manager.getHandler(S.uri);D!==null&&(I=D)}return this.detectSupport().then(function(D){if(D)return p.loadTextureImage(n,w.source,I);if(m.extensionsRequired&&m.extensionsRequired.indexOf(u)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return p.loadTexture(n)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(n){const u=new Image;u.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",u.onload=u.onerror=function(){n(u.height===1)}})),this.isSupported}}class vm{constructor(n){this.parser=n,this.name=wr.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(n){const u=this.name,p=this.parser,m=p.json,v=m.textures[n];if(!v.extensions||!v.extensions[u])return null;const w=v.extensions[u],S=m.images[w.source];let I=p.textureLoader;if(S.uri){const D=p.options.manager.getHandler(S.uri);D!==null&&(I=D)}return this.detectSupport().then(function(D){if(D)return p.loadTextureImage(n,w.source,I);if(m.extensionsRequired&&m.extensionsRequired.indexOf(u)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return p.loadTexture(n)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(n){const u=new Image;u.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",u.onload=u.onerror=function(){n(u.height===1)}})),this.isSupported}}class Em{constructor(n){this.name=wr.EXT_MESHOPT_COMPRESSION,this.parser=n}loadBufferView(n){const u=this.parser.json,p=u.bufferViews[n];if(p.extensions&&p.extensions[this.name]){const m=p.extensions[this.name],v=this.parser.getDependency("buffer",m.buffer),w=this.parser.options.meshoptDecoder;if(!w||!w.supported){if(u.extensionsRequired&&u.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return v.then(function(S){const I=m.byteOffset||0,D=m.byteLength||0,L=m.count,Y=m.byteStride,j=new Uint8Array(S,I,D);return w.decodeGltfBufferAsync?w.decodeGltfBufferAsync(L,Y,j,m.mode,m.filter).then(function(te){return te.buffer}):w.ready.then(function(){const te=new ArrayBuffer(L*Y);return w.decodeGltfBuffer(new Uint8Array(te),L,Y,j,m.mode,m.filter),te})})}return null}}class ym{constructor(n){this.name=wr.EXT_MESH_GPU_INSTANCING,this.parser=n}createNodeMesh(n){const u=this.parser.json,p=u.nodes[n];if(!p.extensions||!p.extensions[this.name]||p.mesh===void 0)return null;const m=u.meshes[p.mesh];for(const I of m.primitives)if(I.mode!==xs.TRIANGLES&&I.mode!==xs.TRIANGLE_STRIP&&I.mode!==xs.TRIANGLE_FAN&&I.mode!==void 0)return null;const v=p.extensions[this.name].attributes,w=[],S={};for(const I in v)w.push(this.parser.getDependency("accessor",v[I]).then(D=>(S[I]=D,S[I])));return w.length<1?null:(w.push(this.parser.createNodeMesh(n)),Promise.all(w).then(I=>{const D=I.pop(),L=D.isGroup?D.children:[D],Y=I[0].count,j=[];for(const te of L){const re=new Ii,ce=new Le,le=new qn,de=new Le(1,1,1),pe=new cc(te.geometry,te.material,Y);for(let me=0;me<Y;me++)S.TRANSLATION&&ce.fromBufferAttribute(S.TRANSLATION,me),S.ROTATION&&le.fromBufferAttribute(S.ROTATION,me),S.SCALE&&de.fromBufferAttribute(S.SCALE,me),pe.setMatrixAt(me,re.compose(ce,le,de));for(const me in S)if(me==="_COLOR_0"){const we=S[me];pe.instanceColor=new bs(we.array,we.itemSize,we.normalized)}else me!=="TRANSLATION"&&me!=="ROTATION"&&me!=="SCALE"&&te.geometry.setAttribute(me,S[me]);yr.prototype.copy.call(pe,te),this.parser.assignFinalMaterial(pe),j.push(pe)}return D.isGroup?(D.clear(),D.add(...j),D):j[0]}))}}const dp="glTF";class wm{constructor(n){this.name=wr.KHR_BINARY_GLTF,this.content=null,this.body=null;const u=new DataView(n,0,12),p=new TextDecoder;if(this.header={magic:p.decode(new Uint8Array(n.slice(0,4))),version:u.getUint32(4,!0),length:u.getUint32(8,!0)},this.header.magic!==dp)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const m=this.header.length-12,v=new DataView(n,12);let w=0;for(;w<m;){const S=v.getUint32(w,!0);w+=4;const I=v.getUint32(w,!0);if(w+=4,I===1313821514){const D=new Uint8Array(n,12+w,S);this.content=p.decode(D)}else if(I===5130562){const D=12+w;this.body=n.slice(D,D+S)}w+=S}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class bm{constructor(n,u){if(!u)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=wr.KHR_DRACO_MESH_COMPRESSION,this.json=n,this.dracoLoader=u,this.dracoLoader.preload()}decodePrimitive(n,u){const p=this.json,m=this.dracoLoader,v=n.extensions[this.name].bufferView,w=n.extensions[this.name].attributes,S={},I={},D={};for(const L in w){const Y=Kd[L]||L.toLowerCase();S[Y]=w[L]}for(const L in n.attributes){const Y=Kd[L]||L.toLowerCase();if(w[L]!==void 0){const j=p.accessors[n.attributes[L]],te=Cl[j.componentType];D[Y]=te.name,I[Y]=j.normalized===!0}}return u.getDependency("bufferView",v).then(function(L){return new Promise(function(Y,j){m.decodeDracoFile(L,function(te){for(const re in te.attributes){const ce=te.attributes[re],le=I[re];le!==void 0&&(ce.normalized=le)}Y(te)},S,D,Cn,j)})})}}class Cm{constructor(){this.name=wr.KHR_TEXTURE_TRANSFORM}extendTexture(n,u){return(u.texCoord!==void 0&&u.texCoord!==n.channel||u.offset!==void 0||u.rotation!==void 0||u.scale!==void 0)&&(n=n.clone(),u.texCoord!==void 0&&(n.channel=u.texCoord),u.offset!==void 0&&n.offset.fromArray(u.offset),u.rotation!==void 0&&(n.rotation=u.rotation),u.scale!==void 0&&n.repeat.fromArray(u.scale),n.needsUpdate=!0),n}}class xm{constructor(){this.name=wr.KHR_MESH_QUANTIZATION}}class fp extends yl{constructor(n,u,p,m){super(n,u,p,m)}copySampleValue_(n){const u=this.resultBuffer,p=this.sampleValues,m=this.valueSize,v=n*m*3+m;for(let w=0;w!==m;w++)u[w]=p[v+w];return u}interpolate_(n,u,p,m){const v=this.resultBuffer,w=this.sampleValues,S=this.valueSize,I=2*S,D=3*S,L=m-u,Y=(p-u)/L,j=Y*Y,te=j*Y,re=n*D,ce=re-D,le=-2*te+3*j,de=te-j,pe=1-le,me=de-j+Y;for(let we=0;we!==S;we++){const Fe=w[ce+we+S],Be=w[ce+we+I]*L,ke=w[re+we+S],ze=w[re+we]*L;v[we]=pe*Fe+me*Be+le*ke+de*ze}return v}}const _m=new qn;class Mm extends fp{interpolate_(n,u,p,m){const v=super.interpolate_(n,u,p,m);return _m.fromArray(v).normalize().toArray(v),v}}const xs={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Cl={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},pp={9728:pt,9729:Wt,9984:Xt,9985:ui,9986:Bt,9987:st},Ap={33071:He,33648:Ke,10497:yn},Yd={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Kd={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ia={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Sm={CUBICSPLINE:void 0,LINEAR:a0,STEP:sn};function _1(b,n,u){for(const p in u.extensions)b[p]===void 0&&(n.userData.gltfExtensions=n.userData.gltfExtensions||{},n.userData.gltfExtensions[p]=u.extensions[p])}function Ra(b,n){n.extras!==void 0&&(typeof n.extras=="object"?Object.assign(b.userData,n.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+n.extras))}function Tm(b,n){if(b.updateMorphTargets(),n.weights!==void 0)for(let u=0,p=n.weights.length;u<p;u++)b.morphTargetInfluences[u]=n.weights[u];if(n.extras&&Array.isArray(n.extras.targetNames)){const u=n.extras.targetNames;if(b.morphTargetInfluences.length===u.length){b.morphTargetDictionary={};for(let p=0,m=u.length;p<m;p++)b.morphTargetDictionary[u[p]]=p}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Im(b){let n;const u=b.extensions&&b.extensions[wr.KHR_DRACO_MESH_COMPRESSION];if(n=u?"draco:"+u.bufferView+":"+u.indices+":"+Jd(u.attributes):b.indices+":"+Jd(b.attributes)+":"+b.mode,b.targets!==void 0)for(let p=0,m=b.targets.length;p<m;p++)n+=":"+Jd(b.targets[p]);return n}function Jd(b){let n="";const u=Object.keys(b).sort();for(let p=0,m=u.length;p<m;p++)n+=u[p]+":"+b[u[p]]+";";return n}function Zd(b){switch(b){case Int8Array:return .007874015748031496;case Uint8Array:return .00392156862745098;case Int16Array:return 3051850947599719e-20;case Uint16Array:return 15259021896696422e-21;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const Rm=new Ii;class Bm{constructor(n={},u={}){this.json=n,this.extensions={},this.plugins={},this.options=u,this.cache=new im,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let p=!1,m=!1,v=-1;typeof navigator<"u"&&(p=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,m=navigator.userAgent.indexOf("Firefox")>-1,v=m?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||p||m&&v<98?this.textureLoader=new Bd(this.options.manager):this.textureLoader=new Wf(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new f0(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(n){this.extensions=n}setPlugins(n){this.plugins=n}parse(n,u){const p=this,m=this.json,v=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(w){return w._markDefs&&w._markDefs()}),Promise.all(this._invokeAll(function(w){return w.beforeRoot&&w.beforeRoot()})).then(function(){return Promise.all([p.getDependencies("scene"),p.getDependencies("animation"),p.getDependencies("camera")])}).then(function(w){const S={scene:w[0][m.scene||0],scenes:w[0],animations:w[1],cameras:w[2],asset:m.asset,parser:p,userData:{}};return _1(v,S,m),Ra(S,m),Promise.all(p._invokeAll(function(I){return I.afterRoot&&I.afterRoot(S)})).then(function(){for(const I of S.scenes)I.updateMatrixWorld();n(S)})}).catch(u)}_markDefs(){const n=this.json.nodes||[],u=this.json.skins||[],p=this.json.meshes||[];for(let m=0,v=u.length;m<v;m++){const w=u[m].joints;for(let S=0,I=w.length;S<I;S++)n[w[S]].isBone=!0}for(let m=0,v=n.length;m<v;m++){const w=n[m];w.mesh!==void 0&&(this._addNodeRef(this.meshCache,w.mesh),w.skin!==void 0&&(p[w.mesh].isSkinnedMesh=!0)),w.camera!==void 0&&this._addNodeRef(this.cameraCache,w.camera)}}_addNodeRef(n,u){u!==void 0&&(n.refs[u]===void 0&&(n.refs[u]=n.uses[u]=0),n.refs[u]++)}_getNodeRef(n,u,p){if(n.refs[u]<=1)return p;const m=p.clone(),v=(w,S)=>{const I=this.associations.get(w);I!=null&&this.associations.set(S,I);for(const[D,L]of w.children.entries())v(L,S.children[D])};return v(p,m),m.name+="_instance_"+n.uses[u]++,m}_invokeOne(n){const u=Object.values(this.plugins);u.push(this);for(let p=0;p<u.length;p++){const m=n(u[p]);if(m)return m}return null}_invokeAll(n){const u=Object.values(this.plugins);u.unshift(this);const p=[];for(let m=0;m<u.length;m++){const v=n(u[m]);v&&p.push(v)}return p}getDependency(n,u){const p=n+":"+u;let m=this.cache.get(p);if(!m){switch(n){case"scene":m=this.loadScene(u);break;case"node":m=this._invokeOne(function(v){return v.loadNode&&v.loadNode(u)});break;case"mesh":m=this._invokeOne(function(v){return v.loadMesh&&v.loadMesh(u)});break;case"accessor":m=this.loadAccessor(u);break;case"bufferView":m=this._invokeOne(function(v){return v.loadBufferView&&v.loadBufferView(u)});break;case"buffer":m=this.loadBuffer(u);break;case"material":m=this._invokeOne(function(v){return v.loadMaterial&&v.loadMaterial(u)});break;case"texture":m=this._invokeOne(function(v){return v.loadTexture&&v.loadTexture(u)});break;case"skin":m=this.loadSkin(u);break;case"animation":m=this._invokeOne(function(v){return v.loadAnimation&&v.loadAnimation(u)});break;case"camera":m=this.loadCamera(u);break;default:if(m=this._invokeOne(function(v){return v!=this&&v.getDependency&&v.getDependency(n,u)}),!m)throw new Error("Unknown type: "+n)}this.cache.add(p,m)}return m}getDependencies(n){let u=this.cache.get(n);if(!u){const p=this,m=this.json[n+(n==="mesh"?"es":"s")]||[];u=Promise.all(m.map(function(v,w){return p.getDependency(n,w)})),this.cache.add(n,u)}return u}loadBuffer(n){const u=this.json.buffers[n],p=this.fileLoader;if(u.type&&u.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+u.type+" buffer type is not supported.");if(u.uri===void 0&&n===0)return Promise.resolve(this.extensions[wr.KHR_BINARY_GLTF].body);const m=this.options;return new Promise(function(v,w){p.load(zo.resolveURL(u.uri,m.path),v,void 0,function(){w(new Error('THREE.GLTFLoader: Failed to load buffer "'+u.uri+'".'))})})}loadBufferView(n){const u=this.json.bufferViews[n];return this.getDependency("buffer",u.buffer).then(function(p){const m=u.byteLength||0,v=u.byteOffset||0;return p.slice(v,v+m)})}loadAccessor(n){const u=this,p=this.json,m=this.json.accessors[n];if(m.bufferView===void 0&&m.sparse===void 0){const w=Yd[m.type],S=Cl[m.componentType],I=m.normalized===!0,D=new S(m.count*w);return Promise.resolve(new nr(D,w,I))}const v=[];return m.bufferView!==void 0?v.push(this.getDependency("bufferView",m.bufferView)):v.push(null),m.sparse!==void 0&&(v.push(this.getDependency("bufferView",m.sparse.indices.bufferView)),v.push(this.getDependency("bufferView",m.sparse.values.bufferView))),Promise.all(v).then(function(w){const S=w[0],I=Yd[m.type],D=Cl[m.componentType],L=D.BYTES_PER_ELEMENT,Y=L*I,j=m.byteOffset||0,te=m.bufferView!==void 0?p.bufferViews[m.bufferView].byteStride:void 0,re=m.normalized===!0;let ce,le;if(te&&te!==Y){const de=Math.floor(j/te),pe="InterleavedBuffer:"+m.bufferView+":"+m.componentType+":"+de+":"+m.count;let me=u.cache.get(pe);me||(ce=new D(S,de*te,m.count*te/L),me=new Lo(ce,te/L),u.cache.add(pe,me)),le=new u0(me,I,j%te/L,re)}else ce=S===null?new D(m.count*I):new D(S,j,m.count*I),le=new nr(ce,I,re);if(m.sparse!==void 0){const de=Yd.SCALAR,pe=Cl[m.sparse.indices.componentType],me=m.sparse.indices.byteOffset||0,we=m.sparse.values.byteOffset||0,Fe=new pe(w[1],me,m.sparse.count*de),Be=new D(w[2],we,m.sparse.count*I);S!==null&&(le=new nr(le.array.slice(),le.itemSize,le.normalized));for(let ke=0,ze=Fe.length;ke<ze;ke++){const tt=Fe[ke];if(le.setX(tt,Be[ke*I]),I>=2&&le.setY(tt,Be[ke*I+1]),I>=3&&le.setZ(tt,Be[ke*I+2]),I>=4&&le.setW(tt,Be[ke*I+3]),I>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return le})}loadTexture(n){const u=this.json,p=this.options,m=u.textures[n].source,v=u.images[m];let w=this.textureLoader;if(v.uri){const S=p.manager.getHandler(v.uri);S!==null&&(w=S)}return this.loadTextureImage(n,m,w)}loadTextureImage(n,u,p){const m=this,v=this.json,w=v.textures[n],S=v.images[u],I=(S.uri||S.bufferView)+":"+w.sampler;if(this.textureCache[I])return this.textureCache[I];const D=this.loadImageSource(u,p).then(function(L){L.flipY=!1,L.name=w.name||S.name||"",L.name===""&&typeof S.uri=="string"&&S.uri.startsWith("data:image/")===!1&&(L.name=S.uri);const Y=(v.samplers||{})[w.sampler]||{};return L.magFilter=pp[Y.magFilter]||Wt,L.minFilter=pp[Y.minFilter]||st,L.wrapS=Ap[Y.wrapS]||yn,L.wrapT=Ap[Y.wrapT]||yn,m.associations.set(L,{textures:n}),L}).catch(function(){return null});return this.textureCache[I]=D,D}loadImageSource(n,u){const p=this.json,m=this.options;if(this.sourceCache[n]!==void 0)return this.sourceCache[n].then(L=>L.clone());const v=p.images[n],w=self.URL||self.webkitURL;let S=v.uri||"",I=!1;if(v.bufferView!==void 0)S=this.getDependency("bufferView",v.bufferView).then(function(L){I=!0;const Y=new Blob([L],{type:v.mimeType});return S=w.createObjectURL(Y),S});else if(v.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+n+" is missing URI and bufferView");const D=Promise.resolve(S).then(function(L){return new Promise(function(Y,j){let te=Y;u.isImageBitmapLoader===!0&&(te=function(re){const ce=new on(re);ce.needsUpdate=!0,Y(ce)}),u.load(zo.resolveURL(L,m.path),te,void 0,j)})}).then(function(L){var Y;return I===!0&&w.revokeObjectURL(S),L.userData.mimeType=v.mimeType||((Y=v.uri).search(/\.jpe?g($|\?)/i)>0||Y.search(/^data\:image\/jpeg/)===0?"image/jpeg":Y.search(/\.webp($|\?)/i)>0||Y.search(/^data\:image\/webp/)===0?"image/webp":"image/png"),L}).catch(function(L){throw console.error("THREE.GLTFLoader: Couldn't load texture",S),L});return this.sourceCache[n]=D,D}assignTexture(n,u,p,m){const v=this;return this.getDependency("texture",p.index).then(function(w){if(!w)return null;if(p.texCoord!==void 0&&p.texCoord>0&&((w=w.clone()).channel=p.texCoord),v.extensions[wr.KHR_TEXTURE_TRANSFORM]){const S=p.extensions!==void 0?p.extensions[wr.KHR_TEXTURE_TRANSFORM]:void 0;if(S){const I=v.associations.get(w);w=v.extensions[wr.KHR_TEXTURE_TRANSFORM].extendTexture(w,S),v.associations.set(w,I)}}return m!==void 0&&(w.colorSpace=m),n[u]=w,w})}assignFinalMaterial(n){const u=n.geometry;let p=n.material;const m=u.attributes.tangent===void 0,v=u.attributes.color!==void 0,w=u.attributes.normal===void 0;if(n.isPoints){const S="PointsMaterial:"+p.uuid;let I=this.cache.get(S);I||(I=new Bn,en.prototype.copy.call(I,p),I.color.copy(p.color),I.map=p.map,I.sizeAttenuation=!1,this.cache.add(S,I)),p=I}else if(n.isLine){const S="LineBasicMaterial:"+p.uuid;let I=this.cache.get(S);I||(I=new Un,en.prototype.copy.call(I,p),I.color.copy(p.color),I.map=p.map,this.cache.add(S,I)),p=I}if(m||v||w){let S="ClonedMaterial:"+p.uuid+":";m&&(S+="derivative-tangents:"),v&&(S+="vertex-colors:"),w&&(S+="flat-shading:");let I=this.cache.get(S);I||(I=p.clone(),v&&(I.vertexColors=!0),w&&(I.flatShading=!0),m&&(I.normalScale&&(I.normalScale.y*=-1),I.clearcoatNormalScale&&(I.clearcoatNormalScale.y*=-1)),this.cache.add(S,I),this.associations.set(I,this.associations.get(p))),p=I}n.material=p}getMaterialType(){return vc}loadMaterial(n){const u=this,p=this.json,m=this.extensions,v=p.materials[n];let w;const S={},I=[];if((v.extensions||{})[wr.KHR_MATERIALS_UNLIT]){const L=m[wr.KHR_MATERIALS_UNLIT];w=L.getMaterialType(),I.push(L.extendParams(S,v,u))}else{const L=v.pbrMetallicRoughness||{};if(S.color=new Jt(1,1,1),S.opacity=1,Array.isArray(L.baseColorFactor)){const Y=L.baseColorFactor;S.color.setRGB(Y[0],Y[1],Y[2],Cn),S.opacity=Y[3]}L.baseColorTexture!==void 0&&I.push(u.assignTexture(S,"map",L.baseColorTexture,An)),S.metalness=L.metallicFactor!==void 0?L.metallicFactor:1,S.roughness=L.roughnessFactor!==void 0?L.roughnessFactor:1,L.metallicRoughnessTexture!==void 0&&(I.push(u.assignTexture(S,"metalnessMap",L.metallicRoughnessTexture)),I.push(u.assignTexture(S,"roughnessMap",L.metallicRoughnessTexture))),w=this._invokeOne(function(Y){return Y.getMaterialType&&Y.getMaterialType(n)}),I.push(Promise.all(this._invokeAll(function(Y){return Y.extendMaterialParams&&Y.extendMaterialParams(n,S)})))}v.doubleSided===!0&&(S.side=he);const D=v.alphaMode||"OPAQUE";if(D==="BLEND"?(S.transparent=!0,S.depthWrite=!1):(S.transparent=!1,D==="MASK"&&(S.alphaTest=v.alphaCutoff!==void 0?v.alphaCutoff:.5)),v.normalTexture!==void 0&&w!==U0&&(I.push(u.assignTexture(S,"normalMap",v.normalTexture)),S.normalScale=new zt(1,1),v.normalTexture.scale!==void 0)){const L=v.normalTexture.scale;S.normalScale.set(L,L)}if(v.occlusionTexture!==void 0&&w!==U0&&(I.push(u.assignTexture(S,"aoMap",v.occlusionTexture)),v.occlusionTexture.strength!==void 0&&(S.aoMapIntensity=v.occlusionTexture.strength)),v.emissiveFactor!==void 0&&w!==U0){const L=v.emissiveFactor;S.emissive=new Jt().setRGB(L[0],L[1],L[2],Cn)}return v.emissiveTexture!==void 0&&w!==U0&&I.push(u.assignTexture(S,"emissiveMap",v.emissiveTexture,An)),Promise.all(I).then(function(){const L=new w(S);return v.name&&(L.name=v.name),Ra(L,v),u.associations.set(L,{materials:n}),v.extensions&&_1(m,L,v),L})}createUniqueName(n){const u=Br.sanitizeNodeName(n||"");return u in this.nodeNamesUsed?u+"_"+ ++this.nodeNamesUsed[u]:(this.nodeNamesUsed[u]=0,u)}loadGeometries(n){const u=this,p=this.extensions,m=this.primitiveCache;function v(S){return p[wr.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(S,u).then(function(I){return mp(I,S,u)})}const w=[];for(let S=0,I=n.length;S<I;S++){const D=n[S],L=Im(D),Y=m[L];if(Y)w.push(Y.promise);else{let j;j=D.extensions&&D.extensions[wr.KHR_DRACO_MESH_COMPRESSION]?v(D):mp(new Xi,D,u),m[L]={primitive:D,promise:j},w.push(j)}}return Promise.all(w)}loadMesh(n){const u=this,p=this.json,m=this.extensions,v=p.meshes[n],w=v.primitives,S=[];for(let D=0,L=w.length;D<L;D++){const Y=w[D].material===void 0?((I=this.cache).DefaultMaterial===void 0&&(I.DefaultMaterial=new vc({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Z})),I.DefaultMaterial):this.getDependency("material",w[D].material);S.push(Y)}var I;return S.push(u.loadGeometries(w)),Promise.all(S).then(function(D){const L=D.slice(0,D.length-1),Y=D[D.length-1],j=[];for(let re=0,ce=Y.length;re<ce;re++){const le=Y[re],de=w[re];let pe;const me=L[re];if(de.mode===xs.TRIANGLES||de.mode===xs.TRIANGLE_STRIP||de.mode===xs.TRIANGLE_FAN||de.mode===void 0)pe=v.isSkinnedMesh===!0?new gt(le,me):new cn(le,me),pe.isSkinnedMesh===!0&&pe.normalizeSkinWeights(),de.mode===xs.TRIANGLE_STRIP?pe.geometry=Xd(pe.geometry,Ls):de.mode===xs.TRIANGLE_FAN&&(pe.geometry=Xd(pe.geometry,ds));else if(de.mode===xs.LINES)pe=new Zn(le,me);else if(de.mode===xs.LINE_STRIP)pe=new Hs(le,me);else if(de.mode===xs.LINE_LOOP)pe=new dc(le,me);else{if(de.mode!==xs.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+de.mode);pe=new No(le,me)}Object.keys(pe.geometry.morphAttributes).length>0&&Tm(pe,v),pe.name=u.createUniqueName(v.name||"mesh_"+n),Ra(pe,v),de.extensions&&_1(m,pe,de),u.assignFinalMaterial(pe),j.push(pe)}for(let re=0,ce=j.length;re<ce;re++)u.associations.set(j[re],{meshes:n,primitives:re});if(j.length===1)return v.extensions&&_1(m,j[0],v),j[0];const te=new Y0;v.extensions&&_1(m,te,v),u.associations.set(te,{meshes:n});for(let re=0,ce=j.length;re<ce;re++)te.add(j[re]);return te})}loadCamera(n){let u;const p=this.json.cameras[n],m=p[p.type];if(m)return p.type==="perspective"?u=new Rn(Ha.radToDeg(m.yfov),m.aspectRatio||1,m.znear||1,m.zfar||2e6):p.type==="orthographic"&&(u=new ua(-m.xmag,m.xmag,m.ymag,-m.ymag,m.znear,m.zfar)),p.name&&(u.name=this.createUniqueName(p.name)),Ra(u,p),Promise.resolve(u);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(n){const u=this.json.skins[n],p=[];for(let m=0,v=u.joints.length;m<v;m++)p.push(this._loadNodeShallow(u.joints[m]));return u.inverseBindMatrices!==void 0?p.push(this.getDependency("accessor",u.inverseBindMatrices)):p.push(null),Promise.all(p).then(function(m){const v=m.pop(),w=m,S=[],I=[];for(let D=0,L=w.length;D<L;D++){const Y=w[D];if(Y){S.push(Y);const j=new Ii;v!==null&&j.fromArray(v.array,16*D),I.push(j)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',u.joints[D])}return new dl(S,I)})}loadAnimation(n){const u=this.json,p=this,m=u.animations[n],v=m.name?m.name:"animation_"+n,w=[],S=[],I=[],D=[],L=[];for(let Y=0,j=m.channels.length;Y<j;Y++){const te=m.channels[Y],re=m.samplers[te.sampler],ce=te.target,le=ce.node,de=m.parameters!==void 0?m.parameters[re.input]:re.input,pe=m.parameters!==void 0?m.parameters[re.output]:re.output;ce.node!==void 0&&(w.push(this.getDependency("node",le)),S.push(this.getDependency("accessor",de)),I.push(this.getDependency("accessor",pe)),D.push(re),L.push(ce))}return Promise.all([Promise.all(w),Promise.all(S),Promise.all(I),Promise.all(D),Promise.all(L)]).then(function(Y){const j=Y[0],te=Y[1],re=Y[2],ce=Y[3],le=Y[4],de=[];for(let pe=0,me=j.length;pe<me;pe++){const we=j[pe],Fe=te[pe],Be=re[pe],ke=ce[pe],ze=le[pe];if(we===void 0)continue;we.updateMatrix&&we.updateMatrix();const tt=p._createAnimationTracks(we,Fe,Be,ke,ze);if(tt)for(let rt=0;rt<tt.length;rt++)de.push(tt[rt])}return new wl(v,void 0,de)})}createNodeMesh(n){const u=this.json,p=this,m=u.nodes[n];return m.mesh===void 0?null:p.getDependency("mesh",m.mesh).then(function(v){const w=p._getNodeRef(p.meshCache,m.mesh,v);return m.weights!==void 0&&w.traverse(function(S){if(S.isMesh)for(let I=0,D=m.weights.length;I<D;I++)S.morphTargetInfluences[I]=m.weights[I]}),w})}loadNode(n){const u=this,p=this.json.nodes[n],m=u._loadNodeShallow(n),v=[],w=p.children||[];for(let I=0,D=w.length;I<D;I++)v.push(u.getDependency("node",w[I]));const S=p.skin===void 0?Promise.resolve(null):u.getDependency("skin",p.skin);return Promise.all([m,Promise.all(v),S]).then(function(I){const D=I[0],L=I[1],Y=I[2];Y!==null&&D.traverse(function(j){j.isSkinnedMesh&&j.bind(Y,Rm)});for(let j=0,te=L.length;j<te;j++)D.add(L[j]);return D})}_loadNodeShallow(n){const u=this.json,p=this.extensions,m=this;if(this.nodeCache[n]!==void 0)return this.nodeCache[n];const v=u.nodes[n],w=v.name?m.createUniqueName(v.name):"",S=[],I=m._invokeOne(function(D){return D.createNodeMesh&&D.createNodeMesh(n)});return I&&S.push(I),v.camera!==void 0&&S.push(m.getDependency("camera",v.camera).then(function(D){return m._getNodeRef(m.cameraCache,v.camera,D)})),m._invokeAll(function(D){return D.createNodeAttachment&&D.createNodeAttachment(n)}).forEach(function(D){S.push(D)}),this.nodeCache[n]=Promise.all(S).then(function(D){let L;if(L=v.isBone===!0?new an:D.length>1?new Y0:D.length===1?D[0]:new yr,L!==D[0])for(let Y=0,j=D.length;Y<j;Y++)L.add(D[Y]);if(v.name&&(L.userData.name=v.name,L.name=w),Ra(L,v),v.extensions&&_1(p,L,v),v.matrix!==void 0){const Y=new Ii;Y.fromArray(v.matrix),L.applyMatrix4(Y)}else v.translation!==void 0&&L.position.fromArray(v.translation),v.rotation!==void 0&&L.quaternion.fromArray(v.rotation),v.scale!==void 0&&L.scale.fromArray(v.scale);return m.associations.has(L)||m.associations.set(L,{}),m.associations.get(L).nodes=n,L}),this.nodeCache[n]}loadScene(n){const u=this.extensions,p=this.json.scenes[n],m=this,v=new Y0;p.name&&(v.name=m.createUniqueName(p.name)),Ra(v,p),p.extensions&&_1(u,v,p);const w=p.nodes||[],S=[];for(let I=0,D=w.length;I<D;I++)S.push(m.getDependency("node",w[I]));return Promise.all(S).then(function(I){for(let D=0,L=I.length;D<L;D++)v.add(I[D]);return m.associations=(D=>{const L=new Map;for(const[Y,j]of m.associations)(Y instanceof en||Y instanceof on)&&L.set(Y,j);return D.traverse(Y=>{const j=m.associations.get(Y);j!=null&&L.set(Y,j)}),L})(v),v})}_createAnimationTracks(n,u,p,m,v){const w=[],S=n.name?n.name:n.uuid,I=[];let D;switch(Ia[v.path]===Ia.weights?n.traverse(function(j){j.morphTargetInfluences&&I.push(j.name?j.name:j.uuid)}):I.push(S),Ia[v.path]){case Ia.weights:D=g1;break;case Ia.rotation:D=Ma;break;case Ia.position:case Ia.scale:D=E1;break;default:D=p.itemSize===1?g1:E1}const L=m.interpolation!==void 0?Sm[m.interpolation]:a0,Y=this._getArrayFromAccessor(p);for(let j=0,te=I.length;j<te;j++){const re=new D(I[j]+"."+Ia[v.path],u.array,Y,L);m.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(re),w.push(re)}return w}_getArrayFromAccessor(n){let u=n.array;if(n.normalized){const p=Zd(u.constructor),m=new Float32Array(u.length);for(let v=0,w=u.length;v<w;v++)m[v]=u[v]*p;u=m}return u}_createCubicSplineTrackInterpolant(n){n.createInterpolant=function(u){return new(this instanceof Ma?Mm:fp)(this.times,this.values,this.getValueSize()/3,u)},n.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function mp(b,n,u){const p=n.attributes,m=[];function v(w,S){return u.getDependency("accessor",w).then(function(I){b.setAttribute(S,I)})}for(const w in p){const S=Kd[w]||w.toLowerCase();S in b.attributes||m.push(v(p[w],S))}if(n.indices!==void 0&&!b.index){const w=u.getDependency("accessor",n.indices).then(function(S){b.setIndex(S)});m.push(w)}return Fr.workingColorSpace!==Cn&&"COLOR_0"in p&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Fr.workingColorSpace}" not supported.`),Ra(b,n),function(w,S,I){const D=S.attributes,L=new Xn;if(D.POSITION===void 0)return;{const te=I.json.accessors[D.POSITION],re=te.min,ce=te.max;if(re===void 0||ce===void 0)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(L.set(new Le(re[0],re[1],re[2]),new Le(ce[0],ce[1],ce[2])),te.normalized){const le=Zd(Cl[te.componentType]);L.min.multiplyScalar(le),L.max.multiplyScalar(le)}}const Y=S.targets;if(Y!==void 0){const te=new Le,re=new Le;for(let ce=0,le=Y.length;ce<le;ce++){const de=Y[ce];if(de.POSITION!==void 0){const pe=I.json.accessors[de.POSITION],me=pe.min,we=pe.max;if(me!==void 0&&we!==void 0){if(re.setX(Math.max(Math.abs(me[0]),Math.abs(we[0]))),re.setY(Math.max(Math.abs(me[1]),Math.abs(we[1]))),re.setZ(Math.max(Math.abs(me[2]),Math.abs(we[2]))),pe.normalized){const Fe=Zd(Cl[pe.componentType]);re.multiplyScalar(Fe)}te.max(re)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}L.expandByVector(te)}w.boundingBox=L;const j=new Yn;L.getCenter(j.center),j.radius=L.min.distanceTo(L.max)/2,w.boundingSphere=j}(b,n,u),Promise.all(m).then(function(){return n.targets!==void 0?function(w,S,I){let D=!1,L=!1,Y=!1;for(let ce=0,le=S.length;ce<le;ce++){const de=S[ce];if(de.POSITION!==void 0&&(D=!0),de.NORMAL!==void 0&&(L=!0),de.COLOR_0!==void 0&&(Y=!0),D&&L&&Y)break}if(!D&&!L&&!Y)return Promise.resolve(w);const j=[],te=[],re=[];for(let ce=0,le=S.length;ce<le;ce++){const de=S[ce];if(D){const pe=de.POSITION!==void 0?I.getDependency("accessor",de.POSITION):w.attributes.position;j.push(pe)}if(L){const pe=de.NORMAL!==void 0?I.getDependency("accessor",de.NORMAL):w.attributes.normal;te.push(pe)}if(Y){const pe=de.COLOR_0!==void 0?I.getDependency("accessor",de.COLOR_0):w.attributes.color;re.push(pe)}}return Promise.all([Promise.all(j),Promise.all(te),Promise.all(re)]).then(function(ce){const le=ce[0],de=ce[1],pe=ce[2];return D&&(w.morphAttributes.position=le),L&&(w.morphAttributes.normal=de),Y&&(w.morphAttributes.color=pe),w.morphTargetsRelative=!0,w})}(b,n.targets,u):b})}class Dm{constructor(n=4){this.pool=n,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(n){if(!this.workers[n]){const u=this.workerCreator();u.addEventListener("message",this._onMessage.bind(this,n)),this.workers[n]=u}}_getIdleWorker(){for(let n=0;n<this.pool;n++)if(!(this.workerStatus&1<<n))return n;return-1}_onMessage(n,u){const p=this.workersResolve[n];if(p&&p(u),this.queue.length){const{resolve:m,msg:v,transfer:w}=this.queue.shift();this.workersResolve[n]=m,this.workers[n].postMessage(v,w)}else this.workerStatus^=1<<n}setWorkerCreator(n){this.workerCreator=n}setWorkerLimit(n){this.pool=n}postMessage(n,u){return new Promise(p=>{const m=this._getIdleWorker();m!==-1?(this._initWorker(m),this.workerStatus|=1<<m,this.workersResolve[m]=p,this.workers[m].postMessage(n,u)):this.queue.push({resolve:p,msg:n,transfer:u})})}dispose(){this.workers.forEach(n=>n.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}var Lm=e(5851).lW;class Pm{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class wc{constructor(n,u,p,m){this._dataView=new DataView(n.buffer,n.byteOffset+u,p),this._littleEndian=m,this._offset=0}_nextUint8(){const n=this._dataView.getUint8(this._offset);return this._offset+=1,n}_nextUint16(){const n=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,n}_nextUint32(){const n=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,n}_nextUint64(){const n=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,n}_nextInt32(){const n=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,n}_skip(n){return this._offset+=n,this}_scan(n,u=0){const p=this._offset;let m=0;for(;this._dataView.getUint8(this._offset)!==u&&m<n;)m++,this._offset++;return m<n&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+p,m)}}new Uint8Array([0]);const V0=[171,75,84,88,32,50,48,187,13,10,26,10];function gp(b){return typeof TextDecoder<"u"?new TextDecoder().decode(b):Lm.from(b).toString("utf8")}var Fm=e(5851).lW;let $d,Go,jd;const ef={env:{emscripten_notify_memory_growth:function(b){jd=new Uint8Array(Go.exports.memory.buffer)}}};class Om{init(){return $d||($d=typeof fetch<"u"?fetch("data:application/wasm;base64,"+vp).then(n=>n.arrayBuffer()).then(n=>WebAssembly.instantiate(n,ef)).then(this._init):WebAssembly.instantiate(Fm.from(vp,"base64"),ef).then(this._init),$d)}_init(n){Go=n.instance,ef.env.emscripten_notify_memory_growth(0)}decode(n,u=0){if(!Go)throw new Error("ZSTDDecoder: Await .init() before decoding.");const p=n.byteLength,m=Go.exports.malloc(p);jd.set(n,m),u=u||Number(Go.exports.ZSTD_findDecompressedSize(m,p));const v=Go.exports.malloc(u),w=Go.exports.ZSTD_decompress(v,u,m,p),S=jd.slice(v,v+w);return Go.exports.free(m),Go.exports.free(v),S}}const vp="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",tf=new WeakMap;let rf,nf=0;class uo extends jn{constructor(n){super(n),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new Dm,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(n){return this.transcoderPath=n,this}setWorkerLimit(n){return this.workerPool.setWorkerLimit(n),this}async detectSupportAsync(n){return this.workerConfig={astcSupported:await n.hasFeatureAsync("texture-compression-astc"),etc1Supported:await n.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await n.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await n.hasFeatureAsync("texture-compression-bc"),bptcSupported:await n.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await n.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(n){return n.isWebGPURenderer===!0?this.workerConfig={astcSupported:n.hasFeature("texture-compression-astc"),etc1Supported:n.hasFeature("texture-compression-etc1"),etc2Supported:n.hasFeature("texture-compression-etc2"),dxtSupported:n.hasFeature("texture-compression-bc"),bptcSupported:n.hasFeature("texture-compression-bptc"),pvrtcSupported:n.hasFeature("texture-compression-pvrtc")}:this.workerConfig={astcSupported:n.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:n.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:n.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:n.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:n.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:n.extensions.has("WEBGL_compressed_texture_pvrtc")||n.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}init(){if(!this.transcoderPending){const n=new f0(this.manager);n.setPath(this.transcoderPath),n.setWithCredentials(this.withCredentials);const u=n.loadAsync("basis_transcoder.js"),p=new f0(this.manager);p.setPath(this.transcoderPath),p.setResponseType("arraybuffer"),p.setWithCredentials(this.withCredentials);const m=p.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([u,m]).then(([v,w])=>{const S=uo.BasisWorker.toString(),I=["/* constants */","let _EngineFormat = "+JSON.stringify(uo.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(uo.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(uo.BasisFormat),"/* basis_transcoder.js */",v,"/* worker */",S.substring(S.indexOf("{")+1,S.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([I])),this.transcoderBinary=w,this.workerPool.setWorkerCreator(()=>{const D=new Worker(this.workerSourceURL),L=this.transcoderBinary.slice(0);return D.postMessage({type:"init",config:this.workerConfig,transcoderBinary:L},[L]),D})}),nf>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),nf++}return this.transcoderPending}load(n,u,p,m){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const v=new f0(this.manager);v.setResponseType("arraybuffer"),v.setWithCredentials(this.withCredentials),v.load(n,w=>{if(tf.has(w))return tf.get(w).promise.then(u).catch(m);this._createTexture(w).then(S=>u?u(S):null).catch(m)},p,m)}_createTextureFrom(n,u){const{faces:p,width:m,height:v,format:w,type:S,error:I,dfdFlags:D}=n;if(S==="error")return Promise.reject(I);let L;if(u.faceCount===6)L=new Zh(p,w,Di);else{const Y=p[0].mipmaps;L=u.layerCount>1?new pc(Y,m,v,u.layerCount,w,Di):new _a(Y,m,v,w,Di)}return L.minFilter=p[0].mipmaps.length===1?Wt:st,L.magFilter=Wt,L.generateMipmaps=!1,L.needsUpdate=!0,L.colorSpace=Ep(u),L.premultiplyAlpha=!!(1&D),L}async _createTexture(n,u={}){const p=function(w){const S=new Uint8Array(w.buffer,w.byteOffset,V0.length);if(S[0]!==V0[0]||S[1]!==V0[1]||S[2]!==V0[2]||S[3]!==V0[3]||S[4]!==V0[4]||S[5]!==V0[5]||S[6]!==V0[6]||S[7]!==V0[7]||S[8]!==V0[8]||S[9]!==V0[9]||S[10]!==V0[10]||S[11]!==V0[11])throw new Error("Missing KTX 2.0 identifier.");const I=new Pm,D=17*Uint32Array.BYTES_PER_ELEMENT,L=new wc(w,V0.length,D,!0);I.vkFormat=L._nextUint32(),I.typeSize=L._nextUint32(),I.pixelWidth=L._nextUint32(),I.pixelHeight=L._nextUint32(),I.pixelDepth=L._nextUint32(),I.layerCount=L._nextUint32(),I.faceCount=L._nextUint32();const Y=L._nextUint32();I.supercompressionScheme=L._nextUint32();const j=L._nextUint32(),te=L._nextUint32(),re=L._nextUint32(),ce=L._nextUint32(),le=L._nextUint64(),de=L._nextUint64(),pe=new wc(w,V0.length+D,3*Y*8,!0);for(let hi=0;hi<Y;hi++)I.levels.push({levelData:new Uint8Array(w.buffer,w.byteOffset+pe._nextUint64(),pe._nextUint64()),uncompressedByteLength:pe._nextUint64()});const me=new wc(w,j,te,!0),we={vendorId:me._skip(4)._nextUint16(),descriptorType:me._nextUint16(),versionNumber:me._nextUint16(),descriptorBlockSize:me._nextUint16(),colorModel:me._nextUint8(),colorPrimaries:me._nextUint8(),transferFunction:me._nextUint8(),flags:me._nextUint8(),texelBlockDimension:[me._nextUint8(),me._nextUint8(),me._nextUint8(),me._nextUint8()],bytesPlane:[me._nextUint8(),me._nextUint8(),me._nextUint8(),me._nextUint8(),me._nextUint8(),me._nextUint8(),me._nextUint8(),me._nextUint8()],samples:[]},Fe=(we.descriptorBlockSize/4-6)/4;for(let hi=0;hi<Fe;hi++){const fi={bitOffset:me._nextUint16(),bitLength:me._nextUint8(),channelType:me._nextUint8(),samplePosition:[me._nextUint8(),me._nextUint8(),me._nextUint8(),me._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&fi.channelType?(fi.sampleLower=me._nextInt32(),fi.sampleUpper=me._nextInt32()):(fi.sampleLower=me._nextUint32(),fi.sampleUpper=me._nextUint32()),we.samples[hi]=fi}I.dataFormatDescriptor.length=0,I.dataFormatDescriptor.push(we);const Be=new wc(w,re,ce,!0);for(;Be._offset<ce;){const hi=Be._nextUint32(),fi=Be._scan(hi),wt=gp(fi),jt=Be._scan(hi-fi.byteLength);I.keyValue[wt]=wt.match(/^ktx/i)?gp(jt):jt,Be._offset%4&&Be._skip(4-Be._offset%4)}if(de<=0)return I;const ke=new wc(w,le,de,!0),ze=ke._nextUint16(),tt=ke._nextUint16(),rt=ke._nextUint32(),$e=ke._nextUint32(),ht=ke._nextUint32(),ut=ke._nextUint32(),at=[];for(let hi=0;hi<Y;hi++)at.push({imageFlags:ke._nextUint32(),rgbSliceByteOffset:ke._nextUint32(),rgbSliceByteLength:ke._nextUint32(),alphaSliceByteOffset:ke._nextUint32(),alphaSliceByteLength:ke._nextUint32()});const Dt=le+ke._offset,It=Dt+rt,Ot=It+$e,Tt=Ot+ht,Ai=new Uint8Array(w.buffer,w.byteOffset+Dt,rt),yi=new Uint8Array(w.buffer,w.byteOffset+It,$e),ni=new Uint8Array(w.buffer,w.byteOffset+Ot,ht),ai=new Uint8Array(w.buffer,w.byteOffset+Tt,ut);return I.globalData={endpointCount:ze,selectorCount:tt,imageDescs:at,endpointsData:Ai,selectorsData:yi,tablesData:ni,extendedData:ai},I}(new Uint8Array(n));if(p.vkFormat!==0)return async function(w){const{vkFormat:S}=w;if(sf[S]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let I;w.supercompressionScheme===2&&(rf||(rf=new Promise(async Y=>{const j=new Om;await j.init(),Y(j)})),I=await rf);const D=[];for(let Y=0;Y<w.levels.length;Y++){const j=Math.max(1,w.pixelWidth>>Y),te=Math.max(1,w.pixelHeight>>Y),re=w.pixelDepth?Math.max(1,w.pixelDepth>>Y):0,ce=w.levels[Y];let le,de;if(w.supercompressionScheme===0)le=ce.levelData;else{if(w.supercompressionScheme!==2)throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");le=I.decode(ce.levelData,ce.uncompressedByteLength)}de=of[S]===wi?new Float32Array(le.buffer,le.byteOffset,le.byteLength/Float32Array.BYTES_PER_ELEMENT):of[S]===Ji?new Uint16Array(le.buffer,le.byteOffset,le.byteLength/Uint16Array.BYTES_PER_ELEMENT):le,D.push({data:de,width:j,height:te,depth:re})}let L;if(km.has(sf[S]))L=w.pixelDepth===0?new Gr(D[0].data,w.pixelWidth,w.pixelHeight):new L1(D[0].data,w.pixelWidth,w.pixelHeight,w.pixelDepth);else{if(w.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");L=new _a(D,w.pixelWidth,w.pixelHeight)}return L.mipmaps=D,L.type=of[S],L.format=sf[S],L.colorSpace=Ep(w),L.needsUpdate=!0,Promise.resolve(L)}(p);const m=u,v=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:n,taskConfig:m},[n])).then(w=>this._createTextureFrom(w.data,p));return tf.set(n,{promise:v}),v}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),nf--,this}}uo.BasisFormat={ETC1S:0,UASTC_4x4:1},uo.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},uo.EngineFormat={RGBAFormat:ir,RGBA_ASTC_4x4_Format:Me,RGBA_BPTC_Format:rr,RGBA_ETC2_EAC_Format:ge,RGBA_PVRTC_4BPPV1_Format:La,RGBA_S3TC_DXT5_Format:v0,RGB_ETC1_Format:hn,RGB_ETC2_Format:oe,RGB_PVRTC_4BPPV1_Format:hs,RGBA_S3TC_DXT1_Format:L0},uo.BasisWorker=function(){let b,n,u;const p=_EngineFormat,m=_TranscoderFormat,v=_BasisFormat;self.addEventListener("message",function(Y){const j=Y.data;switch(j.type){case"init":b=j.config,te=j.transcoderBinary,n=new Promise(re=>{u={wasmBinary:te,onRuntimeInitialized:re},BASIS(u)}).then(()=>{u.initializeBasis(),u.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")});break;case"transcode":n.then(()=>{try{const{faces:re,buffers:ce,width:le,height:de,hasAlpha:pe,format:me,dfdFlags:we}=function(Fe){const Be=new u.KTX2File(new Uint8Array(Fe));function ke(){Be.close(),Be.delete()}if(!Be.isValid())throw ke(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const ze=Be.isUASTC()?v.UASTC_4x4:v.ETC1S,tt=Be.getWidth(),rt=Be.getHeight(),$e=Be.getLayers()||1,ht=Be.getLevels(),ut=Be.getFaces(),at=Be.getHasAlpha(),Dt=Be.getDFDFlags(),{transcoderFormat:It,engineFormat:Ot}=function(yi,ni,ai,hi){let fi,wt;const jt=yi===v.ETC1S?S:I;for(let mi=0;mi<jt.length;mi++){const ei=jt[mi];if(b[ei.if]&&ei.basisFormat.includes(yi)&&!(hi&&ei.transcoderFormat.length<2)&&(!ei.needsPowerOfTwo||D(ni)&&D(ai)))return fi=ei.transcoderFormat[hi?1:0],wt=ei.engineFormat[hi?1:0],{transcoderFormat:fi,engineFormat:wt}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),fi=m.RGBA32,wt=p.RGBAFormat,{transcoderFormat:fi,engineFormat:wt}}(ze,tt,rt,at);if(!tt||!rt||!ht)throw ke(),new Error("THREE.KTX2Loader:	Invalid texture");if(!Be.startTranscoding())throw ke(),new Error("THREE.KTX2Loader: .startTranscoding failed");const Tt=[],Ai=[];for(let yi=0;yi<ut;yi++){const ni=[];for(let ai=0;ai<ht;ai++){const hi=[];let fi,wt;for(let mi=0;mi<$e;mi++){const ei=Be.getImageLevelInfo(ai,mi,yi);yi!==0||ai!==0||mi!==0||ei.origWidth%4==0&&ei.origHeight%4==0||console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),ht>1?(fi=ei.origWidth,wt=ei.origHeight):(fi=ei.width,wt=ei.height);const Pe=new Uint8Array(Be.getImageTranscodedSizeInBytes(ai,mi,0,It));if(!Be.transcodeImage(Pe,ai,mi,yi,It,0,-1,-1))throw ke(),new Error("THREE.KTX2Loader: .transcodeImage failed.");hi.push(Pe)}const jt=L(hi);ni.push({data:jt,width:fi,height:wt}),Ai.push(jt.buffer)}Tt.push({mipmaps:ni,width:tt,height:rt,format:Ot})}return ke(),{faces:Tt,buffers:Ai,width:tt,height:rt,hasAlpha:at,format:Ot,dfdFlags:Dt}}(j.buffer);self.postMessage({type:"transcode",id:j.id,faces:re,width:le,height:de,hasAlpha:pe,format:me,dfdFlags:we},ce)}catch(re){console.error(re),self.postMessage({type:"error",id:j.id,error:re.message})}})}var te});const w=[{if:"astcSupported",basisFormat:[v.UASTC_4x4],transcoderFormat:[m.ASTC_4x4,m.ASTC_4x4],engineFormat:[p.RGBA_ASTC_4x4_Format,p.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[v.ETC1S,v.UASTC_4x4],transcoderFormat:[m.BC7_M5,m.BC7_M5],engineFormat:[p.RGBA_BPTC_Format,p.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[v.ETC1S,v.UASTC_4x4],transcoderFormat:[m.BC1,m.BC3],engineFormat:[p.RGBA_S3TC_DXT1_Format,p.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[v.ETC1S,v.UASTC_4x4],transcoderFormat:[m.ETC1,m.ETC2],engineFormat:[p.RGB_ETC2_Format,p.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[v.ETC1S,v.UASTC_4x4],transcoderFormat:[m.ETC1],engineFormat:[p.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[v.ETC1S,v.UASTC_4x4],transcoderFormat:[m.PVRTC1_4_RGB,m.PVRTC1_4_RGBA],engineFormat:[p.RGB_PVRTC_4BPPV1_Format,p.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],S=w.sort(function(Y,j){return Y.priorityETC1S-j.priorityETC1S}),I=w.sort(function(Y,j){return Y.priorityUASTC-j.priorityUASTC});function D(Y){return Y<=2||(Y&Y-1)==0&&Y!==0}function L(Y){if(Y.length===1)return Y[0];let j=0;for(let ce=0;ce<Y.length;ce++)j+=Y[ce].byteLength;const te=new Uint8Array(j);let re=0;for(let ce=0;ce<Y.length;ce++){const le=Y[ce];te.set(le,re),re+=le.byteLength}return te}};const km=new Set([ir,n0,m0]),sf={109:ir,97:ir,37:ir,43:ir,103:n0,83:n0,16:n0,22:n0,100:m0,76:m0,15:m0,9:m0,166:Ct,165:Ct},of={109:wi,97:Ji,37:Di,43:Di,103:wi,83:Ji,16:Di,22:Di,100:wi,76:Ji,15:Di,9:Di,166:Di,165:Di};function Ep(b){const n=b.dataFormatDescriptor[0];return n.colorPrimaries===1?n.transferFunction===2?An:Cn:n.colorPrimaries===10?n.transferFunction===2?Pa:Yo:(n.colorPrimaries===0||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${n.colorPrimaries}"`),j0)}const Dr={c:null,u:[new Le,new Le,new Le],e:[]},Vr={c:null,u:[new Le,new Le,new Le],e:[]},Mn=[[],[],[]],hr=[[],[],[]],dn=[],M1=new Le,S1=new Le,T1=new Le,e0=new Le,yp=new Le,wp=new Le,Gs=new $i,bp=new Xn,gu=new Ii,Cp=new Ii,xp=new ts;class _p{constructor(n=new Le,u=new Le,p=new $i){this.center=n,this.halfSize=u,this.rotation=p}set(n,u,p){return this.center=n,this.halfSize=u,this.rotation=p,this}copy(n){return this.center.copy(n.center),this.halfSize.copy(n.halfSize),this.rotation.copy(n.rotation),this}clone(){return new this.constructor().copy(this)}getSize(n){return n.copy(this.halfSize).multiplyScalar(2)}clampPoint(n,u){const p=this.halfSize;e0.subVectors(n,this.center),this.rotation.extractBasis(M1,S1,T1),u.copy(this.center);const m=Ha.clamp(e0.dot(M1),-p.x,p.x);u.add(M1.multiplyScalar(m));const v=Ha.clamp(e0.dot(S1),-p.y,p.y);u.add(S1.multiplyScalar(v));const w=Ha.clamp(e0.dot(T1),-p.z,p.z);return u.add(T1.multiplyScalar(w)),u}containsPoint(n){return e0.subVectors(n,this.center),this.rotation.extractBasis(M1,S1,T1),Math.abs(e0.dot(M1))<=this.halfSize.x&&Math.abs(e0.dot(S1))<=this.halfSize.y&&Math.abs(e0.dot(T1))<=this.halfSize.z}intersectsBox3(n){return this.intersectsOBB(Nm.fromBox3(n))}intersectsSphere(n){return this.clampPoint(n.center,wp),wp.distanceToSquared(n.center)<=n.radius*n.radius}intersectsOBB(n,u=Number.EPSILON){Dr.c=this.center,Dr.e[0]=this.halfSize.x,Dr.e[1]=this.halfSize.y,Dr.e[2]=this.halfSize.z,this.rotation.extractBasis(Dr.u[0],Dr.u[1],Dr.u[2]),Vr.c=n.center,Vr.e[0]=n.halfSize.x,Vr.e[1]=n.halfSize.y,Vr.e[2]=n.halfSize.z,n.rotation.extractBasis(Vr.u[0],Vr.u[1],Vr.u[2]);for(let v=0;v<3;v++)for(let w=0;w<3;w++)Mn[v][w]=Dr.u[v].dot(Vr.u[w]);e0.subVectors(Vr.c,Dr.c),dn[0]=e0.dot(Dr.u[0]),dn[1]=e0.dot(Dr.u[1]),dn[2]=e0.dot(Dr.u[2]);for(let v=0;v<3;v++)for(let w=0;w<3;w++)hr[v][w]=Math.abs(Mn[v][w])+u;let p,m;for(let v=0;v<3;v++)if(p=Dr.e[v],m=Vr.e[0]*hr[v][0]+Vr.e[1]*hr[v][1]+Vr.e[2]*hr[v][2],Math.abs(dn[v])>p+m)return!1;for(let v=0;v<3;v++)if(p=Dr.e[0]*hr[0][v]+Dr.e[1]*hr[1][v]+Dr.e[2]*hr[2][v],m=Vr.e[v],Math.abs(dn[0]*Mn[0][v]+dn[1]*Mn[1][v]+dn[2]*Mn[2][v])>p+m)return!1;return p=Dr.e[1]*hr[2][0]+Dr.e[2]*hr[1][0],m=Vr.e[1]*hr[0][2]+Vr.e[2]*hr[0][1],!(Math.abs(dn[2]*Mn[1][0]-dn[1]*Mn[2][0])>p+m||(p=Dr.e[1]*hr[2][1]+Dr.e[2]*hr[1][1],m=Vr.e[0]*hr[0][2]+Vr.e[2]*hr[0][0],Math.abs(dn[2]*Mn[1][1]-dn[1]*Mn[2][1])>p+m||(p=Dr.e[1]*hr[2][2]+Dr.e[2]*hr[1][2],m=Vr.e[0]*hr[0][1]+Vr.e[1]*hr[0][0],Math.abs(dn[2]*Mn[1][2]-dn[1]*Mn[2][2])>p+m||(p=Dr.e[0]*hr[2][0]+Dr.e[2]*hr[0][0],m=Vr.e[1]*hr[1][2]+Vr.e[2]*hr[1][1],Math.abs(dn[0]*Mn[2][0]-dn[2]*Mn[0][0])>p+m||(p=Dr.e[0]*hr[2][1]+Dr.e[2]*hr[0][1],m=Vr.e[0]*hr[1][2]+Vr.e[2]*hr[1][0],Math.abs(dn[0]*Mn[2][1]-dn[2]*Mn[0][1])>p+m||(p=Dr.e[0]*hr[2][2]+Dr.e[2]*hr[0][2],m=Vr.e[0]*hr[1][1]+Vr.e[1]*hr[1][0],Math.abs(dn[0]*Mn[2][2]-dn[2]*Mn[0][2])>p+m||(p=Dr.e[0]*hr[1][0]+Dr.e[1]*hr[0][0],m=Vr.e[1]*hr[2][2]+Vr.e[2]*hr[2][1],Math.abs(dn[1]*Mn[0][0]-dn[0]*Mn[1][0])>p+m||(p=Dr.e[0]*hr[1][1]+Dr.e[1]*hr[0][1],m=Vr.e[0]*hr[2][2]+Vr.e[2]*hr[2][0],Math.abs(dn[1]*Mn[0][1]-dn[0]*Mn[1][1])>p+m||(p=Dr.e[0]*hr[1][2]+Dr.e[1]*hr[0][2],m=Vr.e[0]*hr[2][1]+Vr.e[1]*hr[2][0],Math.abs(dn[1]*Mn[0][2]-dn[0]*Mn[1][2])>p+m)))))))))}intersectsPlane(n){this.rotation.extractBasis(M1,S1,T1);const u=this.halfSize.x*Math.abs(n.normal.dot(M1))+this.halfSize.y*Math.abs(n.normal.dot(S1))+this.halfSize.z*Math.abs(n.normal.dot(T1)),p=n.normal.dot(this.center)-n.constant;return Math.abs(p)<=u}intersectRay(n,u){return this.getSize(yp),bp.setFromCenterAndSize(e0.set(0,0,0),yp),gu.setFromMatrix3(this.rotation),gu.setPosition(this.center),Cp.copy(gu).invert(),xp.copy(n).applyMatrix4(Cp),xp.intersectBox(bp,u)?u.applyMatrix4(gu):null}intersectsRay(n){return this.intersectRay(n,e0)!==null}fromBox3(n){return n.getCenter(this.center),n.getSize(this.halfSize).multiplyScalar(.5),this.rotation.identity(),this}equals(n){return n.center.equals(this.center)&&n.halfSize.equals(this.halfSize)&&n.rotation.equals(this.rotation)}applyMatrix4(n){const u=n.elements;let p=e0.set(u[0],u[1],u[2]).length();const m=e0.set(u[4],u[5],u[6]).length(),v=e0.set(u[8],u[9],u[10]).length();n.determinant()<0&&(p=-p),Gs.setFromMatrix4(n);const w=1/p,S=1/m,I=1/v;return Gs.elements[0]*=w,Gs.elements[1]*=w,Gs.elements[2]*=w,Gs.elements[3]*=S,Gs.elements[4]*=S,Gs.elements[5]*=S,Gs.elements[6]*=I,Gs.elements[7]*=I,Gs.elements[8]*=I,this.rotation.multiply(Gs),this.halfSize.x*=p,this.halfSize.y*=m,this.halfSize.z*=v,e0.setFromMatrixPosition(n),this.center.add(e0),this}}const Nm=new _p,Um=/^[og]\s*(.+)?/,Qm=/^mtllib /,Hm=/^usemtl /,zm=/^usemap /,Mp=/\s+/,Sp=new Le,af=new Le,Tp=new Le,Ip=new Le,_s=new Le,vu=new Jt;function Gm(){const b={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(n,u){if(this.object&&this.object.fromDeclaration===!1)return this.object.name=n,void(this.object.fromDeclaration=u!==!1);const p=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:n||"",fromDeclaration:u!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(m,v){const w=this._finalize(!1);w&&(w.inherited||w.groupCount<=0)&&this.materials.splice(w.index,1);const S={index:this.materials.length,name:m||"",mtllib:Array.isArray(v)&&v.length>0?v[v.length-1]:"",smooth:w!==void 0?w.smooth:this.smooth,groupStart:w!==void 0?w.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(I){const D={index:typeof I=="number"?I:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return D.clone=this.clone.bind(D),D}};return this.materials.push(S),S},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(m){const v=this.currentMaterial();if(v&&v.groupEnd===-1&&(v.groupEnd=this.geometry.vertices.length/3,v.groupCount=v.groupEnd-v.groupStart,v.inherited=!1),m&&this.materials.length>1)for(let w=this.materials.length-1;w>=0;w--)this.materials[w].groupCount<=0&&this.materials.splice(w,1);return m&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),v}},p&&p.name&&typeof p.clone=="function"){const m=p.clone(0);m.inherited=!0,this.object.materials.push(m)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(n,u){const p=parseInt(n,10);return 3*(p>=0?p-1:p+u/3)},parseNormalIndex:function(n,u){const p=parseInt(n,10);return 3*(p>=0?p-1:p+u/3)},parseUVIndex:function(n,u){const p=parseInt(n,10);return 2*(p>=0?p-1:p+u/2)},addVertex:function(n,u,p){const m=this.vertices,v=this.object.geometry.vertices;v.push(m[n+0],m[n+1],m[n+2]),v.push(m[u+0],m[u+1],m[u+2]),v.push(m[p+0],m[p+1],m[p+2])},addVertexPoint:function(n){const u=this.vertices;this.object.geometry.vertices.push(u[n+0],u[n+1],u[n+2])},addVertexLine:function(n){const u=this.vertices;this.object.geometry.vertices.push(u[n+0],u[n+1],u[n+2])},addNormal:function(n,u,p){const m=this.normals,v=this.object.geometry.normals;v.push(m[n+0],m[n+1],m[n+2]),v.push(m[u+0],m[u+1],m[u+2]),v.push(m[p+0],m[p+1],m[p+2])},addFaceNormal:function(n,u,p){const m=this.vertices,v=this.object.geometry.normals;Sp.fromArray(m,n),af.fromArray(m,u),Tp.fromArray(m,p),_s.subVectors(Tp,af),Ip.subVectors(Sp,af),_s.cross(Ip),_s.normalize(),v.push(_s.x,_s.y,_s.z),v.push(_s.x,_s.y,_s.z),v.push(_s.x,_s.y,_s.z)},addColor:function(n,u,p){const m=this.colors,v=this.object.geometry.colors;m[n]!==void 0&&v.push(m[n+0],m[n+1],m[n+2]),m[u]!==void 0&&v.push(m[u+0],m[u+1],m[u+2]),m[p]!==void 0&&v.push(m[p+0],m[p+1],m[p+2])},addUV:function(n,u,p){const m=this.uvs,v=this.object.geometry.uvs;v.push(m[n+0],m[n+1]),v.push(m[u+0],m[u+1]),v.push(m[p+0],m[p+1])},addDefaultUV:function(){const n=this.object.geometry.uvs;n.push(0,0),n.push(0,0),n.push(0,0)},addUVLine:function(n){const u=this.uvs;this.object.geometry.uvs.push(u[n+0],u[n+1])},addFace:function(n,u,p,m,v,w,S,I,D){const L=this.vertices.length;let Y=this.parseVertexIndex(n,L),j=this.parseVertexIndex(u,L),te=this.parseVertexIndex(p,L);if(this.addVertex(Y,j,te),this.addColor(Y,j,te),S!==void 0&&S!==""){const re=this.normals.length;Y=this.parseNormalIndex(S,re),j=this.parseNormalIndex(I,re),te=this.parseNormalIndex(D,re),this.addNormal(Y,j,te)}else this.addFaceNormal(Y,j,te);if(m!==void 0&&m!==""){const re=this.uvs.length;Y=this.parseUVIndex(m,re),j=this.parseUVIndex(v,re),te=this.parseUVIndex(w,re),this.addUV(Y,j,te),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(n){this.object.geometry.type="Points";const u=this.vertices.length;for(let p=0,m=n.length;p<m;p++){const v=this.parseVertexIndex(n[p],u);this.addVertexPoint(v),this.addColor(v)}},addLineGeometry:function(n,u){this.object.geometry.type="Line";const p=this.vertices.length,m=this.uvs.length;for(let v=0,w=n.length;v<w;v++)this.addVertexLine(this.parseVertexIndex(n[v],p));for(let v=0,w=u.length;v<w;v++)this.addUVLine(this.parseUVIndex(u[v],m))}};return b.startObject("",!1),b}class Vm{constructor(n="",u={}){this.baseUrl=n,this.options=u,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:Z,this.wrap=this.options.wrap!==void 0?this.options.wrap:yn}setCrossOrigin(n){return this.crossOrigin=n,this}setManager(n){this.manager=n}setMaterials(n){this.materialsInfo=this.convert(n),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(n){if(!this.options)return n;const u={};for(const p in n){const m=n[p],v={};u[p]=v;for(const w in m){let S=!0,I=m[w];const D=w.toLowerCase();switch(D){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(I=[I[0]/255,I[1]/255,I[2]/255]),this.options&&this.options.ignoreZeroRGBs&&I[0]===0&&I[1]===0&&I[2]===0&&(S=!1)}S&&(v[D]=I)}}return u}preload(){for(const n in this.materialsInfo)this.create(n)}getIndex(n){return this.nameLookup[n]}getAsArray(){let n=0;for(const u in this.materialsInfo)this.materialsArray[n]=this.create(u),this.nameLookup[u]=n,n++;return this.materialsArray}create(n){return this.materials[n]===void 0&&this.createMaterial_(n),this.materials[n]}createMaterial_(n){const u=this,p=this.materialsInfo[n],m={name:n,side:this.side};function v(w,S){if(m[w])return;const I=u.getTextureParams(S,m),D=u.loadTexture((L=u.baseUrl,typeof(Y=I.url)!="string"||Y===""?"":/^https?:\/\//i.test(Y)?Y:L+Y));var L,Y;D.repeat.copy(I.scale),D.offset.copy(I.offset),D.wrapS=u.wrap,D.wrapT=u.wrap,w!=="map"&&w!=="emissiveMap"||(D.colorSpace=An),m[w]=D}for(const w in p){const S=p[w];let I;if(S!=="")switch(w.toLowerCase()){case"kd":m.color=new Jt().fromArray(S).convertSRGBToLinear();break;case"ks":m.specular=new Jt().fromArray(S).convertSRGBToLinear();break;case"ke":m.emissive=new Jt().fromArray(S).convertSRGBToLinear();break;case"map_kd":v("map",S);break;case"map_ks":v("specularMap",S);break;case"map_ke":v("emissiveMap",S);break;case"norm":v("normalMap",S);break;case"map_bump":case"bump":v("bumpMap",S);break;case"map_d":v("alphaMap",S),m.transparent=!0;break;case"ns":m.shininess=parseFloat(S);break;case"d":I=parseFloat(S),I<1&&(m.opacity=I,m.transparent=!0);break;case"tr":I=parseFloat(S),this.options&&this.options.invertTrProperty&&(I=1-I),I>0&&(m.opacity=1-I,m.transparent=!0)}}return this.materials[n]=new ou(m),this.materials[n]}getTextureParams(n,u){const p={scale:new zt(1,1),offset:new zt(0,0)},m=n.split(/\s+/);let v;return v=m.indexOf("-bm"),v>=0&&(u.bumpScale=parseFloat(m[v+1]),m.splice(v,2)),v=m.indexOf("-s"),v>=0&&(p.scale.set(parseFloat(m[v+1]),parseFloat(m[v+2])),m.splice(v,4)),v=m.indexOf("-o"),v>=0&&(p.offset.set(parseFloat(m[v+1]),parseFloat(m[v+2])),m.splice(v,4)),p.url=m.join(" ").trim(),p}loadTexture(n,u,p,m,v){const w=this.manager!==void 0?this.manager:Rd;let S=w.getHandler(n);S===null&&(S=new Bd(w)),S.setCrossOrigin&&S.setCrossOrigin(this.crossOrigin);const I=S.load(n,p,m,v);return u!==void 0&&(I.mapping=u),I}}function Rp(b,n){switch(n){case An:b.convertSRGBToLinear();break;case Cn:case j0:break;default:console.warn("WARNING: LightProbeGenerator convertColorToLinear() encountered an unsupported color space.")}return b}var Vo={...B};Vo.DRACOLoader=class extends jn{constructor(b){super(b),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(b){return this.decoderPath=b,this}setDecoderConfig(b){return this.decoderConfig=b,this}setWorkerLimit(b){return this.workerLimit=b,this}load(b,n,u,p){const m=new f0(this.manager);m.setPath(this.path),m.setResponseType("arraybuffer"),m.setRequestHeader(this.requestHeader),m.setWithCredentials(this.withCredentials),m.load(b,v=>{this.parse(v,n,p)},u,p)}parse(b,n,u=()=>{}){this.decodeDracoFile(b,n,null,null,An).catch(u)}decodeDracoFile(b,n,u,p,m=Cn,v=()=>{}){const w={attributeIDs:u||this.defaultAttributeIDs,attributeTypes:p||this.defaultAttributeTypes,useUniqueIDs:!!u,vertexColorSpace:m};return this.decodeGeometry(b,w).then(n).catch(v)}decodeGeometry(b,n){const u=JSON.stringify(n);if(Wd.has(b)){const S=Wd.get(b);if(S.key===u)return S.promise;if(b.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let p;const m=this.workerNextTaskID++,v=b.byteLength,w=this._getWorker(m,v).then(S=>(p=S,new Promise((I,D)=>{p._callbacks[m]={resolve:I,reject:D},p.postMessage({type:"decode",id:m,taskConfig:n,buffer:b},[b])}))).then(S=>this._createGeometry(S.geometry));return w.catch(()=>!0).then(()=>{p&&m&&this._releaseTask(p,m)}),Wd.set(b,{key:u,promise:w}),w}_createGeometry(b){const n=new Xi;b.index&&n.setIndex(new nr(b.index.array,1));for(let u=0;u<b.attributes.length;u++){const p=b.attributes[u],m=p.name,v=p.array,w=p.itemSize,S=new nr(v,w);m==="color"&&(this._assignVertexColorSpace(S,p.vertexColorSpace),S.normalized=v instanceof Float32Array==0),n.setAttribute(m,S)}return n}_assignVertexColorSpace(b,n){if(n!==An)return;const u=new Jt;for(let p=0,m=b.count;p<m;p++)u.fromBufferAttribute(b,p).convertSRGBToLinear(),b.setXYZ(p,u.r,u.g,u.b)}_loadLibrary(b,n){const u=new f0(this.manager);return u.setPath(this.decoderPath),u.setResponseType(n),u.setWithCredentials(this.withCredentials),new Promise((p,m)=>{u.load(b,p,void 0,m)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const b=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return b?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(u=>{const p=u[0];b||(this.decoderConfig.wasmBinary=u[1]);const m=WA.toString(),v=["/* draco decoder */",p,"","/* worker */",m.substring(m.indexOf("{")+1,m.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([v]))}),this.decoderPending}_getWorker(b,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const p=new Worker(this.workerSourceURL);p._callbacks={},p._taskCosts={},p._taskLoad=0,p.postMessage({type:"init",decoderConfig:this.decoderConfig}),p.onmessage=function(m){const v=m.data;switch(v.type){case"decode":p._callbacks[v.id].resolve(v);break;case"error":p._callbacks[v.id].reject(v);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+v.type+'"')}},this.workerPool.push(p)}else this.workerPool.sort(function(p,m){return p._taskLoad>m._taskLoad?-1:1});const u=this.workerPool[this.workerPool.length-1];return u._taskCosts[b]=n,u._taskLoad+=n,u})}_releaseTask(b,n){b._taskLoad-=b._taskCosts[n],delete b._callbacks[n],delete b._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(b=>b._taskLoad))}dispose(){for(let b=0;b<this.workerPool.length;++b)this.workerPool[b].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}},Vo.GLTFLoader=class extends jn{constructor(b){super(b),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new om(n)}),this.register(function(n){return new am(n)}),this.register(function(n){return new mm(n)}),this.register(function(n){return new gm(n)}),this.register(function(n){return new vm(n)}),this.register(function(n){return new cm(n)}),this.register(function(n){return new hm(n)}),this.register(function(n){return new um(n)}),this.register(function(n){return new dm(n)}),this.register(function(n){return new sm(n)}),this.register(function(n){return new fm(n)}),this.register(function(n){return new lm(n)}),this.register(function(n){return new Am(n)}),this.register(function(n){return new pm(n)}),this.register(function(n){return new rm(n)}),this.register(function(n){return new Em(n)}),this.register(function(n){return new ym(n)})}load(b,n,u,p){const m=this;let v;if(this.resourcePath!=="")v=this.resourcePath;else if(this.path!==""){const I=zo.extractUrlBase(b);v=zo.resolveURL(I,this.path)}else v=zo.extractUrlBase(b);this.manager.itemStart(b);const w=function(I){p?p(I):console.error(I),m.manager.itemError(b),m.manager.itemEnd(b)},S=new f0(this.manager);S.setPath(this.path),S.setResponseType("arraybuffer"),S.setRequestHeader(this.requestHeader),S.setWithCredentials(this.withCredentials),S.load(b,function(I){try{m.parse(I,v,function(D){n(D),m.manager.itemEnd(b)},w)}catch(D){w(D)}},u,w)}setDRACOLoader(b){return this.dracoLoader=b,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(b){return this.ktx2Loader=b,this}setMeshoptDecoder(b){return this.meshoptDecoder=b,this}register(b){return this.pluginCallbacks.indexOf(b)===-1&&this.pluginCallbacks.push(b),this}unregister(b){return this.pluginCallbacks.indexOf(b)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(b),1),this}parse(b,n,u,p){let m;const v={},w={},S=new TextDecoder;if(typeof b=="string")m=JSON.parse(b);else if(b instanceof ArrayBuffer)if(S.decode(new Uint8Array(b,0,4))===dp){try{v[wr.KHR_BINARY_GLTF]=new wm(b)}catch(D){return void(p&&p(D))}m=JSON.parse(v[wr.KHR_BINARY_GLTF].content)}else m=JSON.parse(S.decode(b));else m=b;if(m.asset===void 0||m.asset.version[0]<2)return void(p&&p(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const I=new Bm(m,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});I.fileLoader.setRequestHeader(this.requestHeader);for(let D=0;D<this.pluginCallbacks.length;D++){const L=this.pluginCallbacks[D](I);L.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),w[L.name]=L,v[L.name]=!0}if(m.extensionsUsed)for(let D=0;D<m.extensionsUsed.length;++D){const L=m.extensionsUsed[D],Y=m.extensionsRequired||[];switch(L){case wr.KHR_MATERIALS_UNLIT:v[L]=new nm;break;case wr.KHR_DRACO_MESH_COMPRESSION:v[L]=new bm(m,this.dracoLoader);break;case wr.KHR_TEXTURE_TRANSFORM:v[L]=new Cm;break;case wr.KHR_MESH_QUANTIZATION:v[L]=new xm;break;default:Y.indexOf(L)>=0&&w[L]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+L+'".')}}I.setExtensions(v),I.setPlugins(w),I.parse(u,p)}parseAsync(b,n){const u=this;return new Promise(function(p,m){u.parse(b,n,p,m)})}},Vo.KTX2Loader=uo,Vo.OBJLoader=class extends jn{constructor(b){super(b),this.materials=null}load(b,n,u,p){const m=this,v=new f0(this.manager);v.setPath(this.path),v.setRequestHeader(this.requestHeader),v.setWithCredentials(this.withCredentials),v.load(b,function(w){try{n(m.parse(w))}catch(S){p?p(S):console.error(S),m.manager.itemError(b)}},u,p)}setMaterials(b){return this.materials=b,this}parse(b){const n=new Gm;b.indexOf(`\r
`)!==-1&&(b=b.replace(/\r\n/g,`
`)),b.indexOf(`\\
`)!==-1&&(b=b.replace(/\\\n/g,""));const u=b.split(`
`);let p=[];for(let v=0,w=u.length;v<w;v++){const S=u[v].trimStart();if(S.length===0)continue;const I=S.charAt(0);if(I!=="#")if(I==="v"){const D=S.split(Mp);switch(D[0]){case"v":n.vertices.push(parseFloat(D[1]),parseFloat(D[2]),parseFloat(D[3])),D.length>=7?(vu.setRGB(parseFloat(D[4]),parseFloat(D[5]),parseFloat(D[6])).convertSRGBToLinear(),n.colors.push(vu.r,vu.g,vu.b)):n.colors.push(void 0,void 0,void 0);break;case"vn":n.normals.push(parseFloat(D[1]),parseFloat(D[2]),parseFloat(D[3]));break;case"vt":n.uvs.push(parseFloat(D[1]),parseFloat(D[2]))}}else if(I==="f"){const D=S.slice(1).trim().split(Mp),L=[];for(let j=0,te=D.length;j<te;j++){const re=D[j];if(re.length>0){const ce=re.split("/");L.push(ce)}}const Y=L[0];for(let j=1,te=L.length-1;j<te;j++){const re=L[j],ce=L[j+1];n.addFace(Y[0],re[0],ce[0],Y[1],re[1],ce[1],Y[2],re[2],ce[2])}}else if(I==="l"){const D=S.substring(1).trim().split(" ");let L=[];const Y=[];if(S.indexOf("/")===-1)L=D;else for(let j=0,te=D.length;j<te;j++){const re=D[j].split("/");re[0]!==""&&L.push(re[0]),re[1]!==""&&Y.push(re[1])}n.addLineGeometry(L,Y)}else if(I==="p"){const D=S.slice(1).trim().split(" ");n.addPointGeometry(D)}else if((p=Um.exec(S))!==null){const D=(" "+p[0].slice(1).trim()).slice(1);n.startObject(D)}else if(Hm.test(S))n.object.startMaterial(S.substring(7).trim(),n.materialLibraries);else if(Qm.test(S))n.materialLibraries.push(S.substring(7).trim());else if(zm.test(S))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(I==="s"){if(p=S.split(" "),p.length>1){const L=p[1].trim().toLowerCase();n.object.smooth=L!=="0"&&L!=="off"}else n.object.smooth=!0;const D=n.object.currentMaterial();D&&(D.smooth=n.object.smooth)}else{if(S==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+S+'"')}}n.finalize();const m=new Y0;if(m.materialLibraries=[].concat(n.materialLibraries),!(n.objects.length===1&&n.objects[0].geometry.vertices.length===0))for(let v=0,w=n.objects.length;v<w;v++){const S=n.objects[v],I=S.geometry,D=S.materials,L=I.type==="Line",Y=I.type==="Points";let j=!1;if(I.vertices.length===0)continue;const te=new Xi;te.setAttribute("position",new vi(I.vertices,3)),I.normals.length>0&&te.setAttribute("normal",new vi(I.normals,3)),I.colors.length>0&&(j=!0,te.setAttribute("color",new vi(I.colors,3))),I.hasUVIndices===!0&&te.setAttribute("uv",new vi(I.uvs,2));const re=[];for(let le=0,de=D.length;le<de;le++){const pe=D[le],me=pe.name+"_"+pe.smooth+"_"+j;let we=n.materials[me];if(this.materials!==null)if(we=this.materials.create(pe.name),!L||!we||we instanceof Un){if(Y&&we&&!(we instanceof Bn)){const Fe=new Bn({size:10,sizeAttenuation:!1});en.prototype.copy.call(Fe,we),Fe.color.copy(we.color),Fe.map=we.map,we=Fe}}else{const Fe=new Un;en.prototype.copy.call(Fe,we),Fe.color.copy(we.color),we=Fe}we===void 0&&(we=L?new Un:Y?new Bn({size:1,sizeAttenuation:!1}):new ou,we.name=pe.name,we.flatShading=!pe.smooth,we.vertexColors=j,n.materials[me]=we),re.push(we)}let ce;if(re.length>1){for(let le=0,de=D.length;le<de;le++){const pe=D[le];te.addGroup(pe.groupStart,pe.groupCount,le)}ce=L?new Zn(te,re):Y?new No(te,re):new cn(te,re)}else ce=L?new Zn(te,re[0]):Y?new No(te,re[0]):new cn(te,re[0]);ce.name=S.name,m.add(ce)}else if(n.vertices.length>0){const v=new Bn({size:1,sizeAttenuation:!1}),w=new Xi;w.setAttribute("position",new vi(n.vertices,3)),n.colors.length>0&&n.colors[0]!==void 0&&(w.setAttribute("color",new vi(n.colors,3)),v.vertexColors=!0);const S=new No(w,v);m.add(S)}return m}},Vo.MTLLoader=class extends jn{constructor(b){super(b)}load(b,n,u,p){const m=this,v=this.path===""?zo.extractUrlBase(b):this.path,w=new f0(this.manager);w.setPath(this.path),w.setRequestHeader(this.requestHeader),w.setWithCredentials(this.withCredentials),w.load(b,function(S){try{n(m.parse(S,v))}catch(I){p?p(I):console.error(I),m.manager.itemError(b)}},u,p)}setMaterialOptions(b){return this.materialOptions=b,this}parse(b,n){const u=b.split(`
`);let p={};const m=/\s+/,v={};for(let S=0;S<u.length;S++){let I=u[S];if(I=I.trim(),I.length===0||I.charAt(0)==="#")continue;const D=I.indexOf(" ");let L=D>=0?I.substring(0,D):I;L=L.toLowerCase();let Y=D>=0?I.substring(D+1):"";if(Y=Y.trim(),L==="newmtl")p={name:Y},v[Y]=p;else if(L==="ka"||L==="kd"||L==="ks"||L==="ke"){const j=Y.split(m,3);p[L]=[parseFloat(j[0]),parseFloat(j[1]),parseFloat(j[2])]}else p[L]=Y}const w=new Vm(this.resourcePath||n,this.materialOptions);return w.setCrossOrigin(this.crossOrigin),w.setManager(this.manager),w.setMaterials(v),w}},Vo.OBB=_p,Vo.BufferGeometryUtils=N,Vo.LightProbeGenerator=class{static fromCubeTexture(b){let n=0;const u=new Le,p=new Le,m=new Jt,v=[0,0,0,0,0,0,0,0,0],w=new bl,S=w.coefficients;for(let D=0;D<6;D++){const L=b.image[D],Y=L.width,j=L.height,te=document.createElement("canvas");te.width=Y,te.height=j;const re=te.getContext("2d");re.drawImage(L,0,0,Y,j);const ce=re.getImageData(0,0,Y,j),le=ce.data,de=ce.width,pe=2/de;for(let me=0,we=le.length;me<we;me+=4){m.setRGB(le[me]/255,le[me+1]/255,le[me+2]/255),Rp(m,b.colorSpace);const Fe=me/4,Be=(Fe%de+.5)*pe-1,ke=1-(Math.floor(Fe/de)+.5)*pe;switch(D){case 0:u.set(-1,ke,-Be);break;case 1:u.set(1,ke,Be);break;case 2:u.set(-Be,1,-ke);break;case 3:u.set(-Be,-1,ke);break;case 4:u.set(-Be,ke,1);break;case 5:u.set(Be,ke,-1)}const ze=u.lengthSq(),tt=4/(Math.sqrt(ze)*ze);n+=tt,p.copy(u).normalize(),bl.getBasisAt(p,v);for(let rt=0;rt<9;rt++)S[rt].x+=v[rt]*m.r*tt,S[rt].y+=v[rt]*m.g*tt,S[rt].z+=v[rt]*m.b*tt}}const I=4*Math.PI/n;for(let D=0;D<9;D++)S[D].x*=I,S[D].y*=I,S[D].z*=I;return new au(w)}static fromCubeRenderTarget(b,n){let u=0;const p=new Le,m=new Le,v=new Jt,w=[0,0,0,0,0,0,0,0,0],S=new bl,I=S.coefficients,D=n.texture.type;for(let Y=0;Y<6;Y++){const j=n.width;let te;te=D===Ji?new Uint16Array(j*j*4):new Uint8Array(j*j*4),b.readRenderTargetPixels(n,0,0,j,j,te,Y);const re=2/j;for(let ce=0,le=te.length;ce<le;ce+=4){let de,pe,me;D===Ji?(de=H1.fromHalfFloat(te[ce]),pe=H1.fromHalfFloat(te[ce+1]),me=H1.fromHalfFloat(te[ce+2])):(de=te[ce]/255,pe=te[ce+1]/255,me=te[ce+2]/255),v.setRGB(de,pe,me),Rp(v,n.texture.colorSpace);const we=ce/4,Fe=(we%j+.5)*re-1,Be=1-(Math.floor(we/j)+.5)*re;switch(Y){case 0:p.set(1,Be,-Fe);break;case 1:p.set(-1,Be,Fe);break;case 2:p.set(Fe,1,-Be);break;case 3:p.set(Fe,-1,Be);break;case 4:p.set(Fe,Be,1);break;case 5:p.set(-Fe,Be,-1)}const ke=p.lengthSq(),ze=4/(Math.sqrt(ke)*ke);u+=ze,m.copy(p).normalize(),bl.getBasisAt(m,w);for(let tt=0;tt<9;tt++)I[tt].x+=w[tt]*v.r*ze,I[tt].y+=w[tt]*v.g*ze,I[tt].z+=w[tt]*v.b*ze}}const L=4*Math.PI/u;for(let Y=0;Y<9;Y++)I[Y].x*=L,I[Y].y*=L,I[Y].z*=L;return new au(S)}};const Wm=Vo},4147:M=>{"use strict";M.exports=JSON.parse('{"name":"aframe","version":"1.6.0","description":"A web framework for building virtual reality experiences.","homepage":"https://aframe.io/","main":"dist/aframe-master.js","scripts":{"dev":"cross-env INSPECTOR_VERSION=dev webpack serve --port 8080","dist":"node scripts/updateVersionLog.js && npm run dist:min && npm run dist:max","dist:max":"webpack --config webpack.config.js","dist:min":"webpack --config webpack.prod.config.js","docs":"markserv --dir docs --port 9001","preghpages":"node ./scripts/preghpages.js","ghpages":"ghpages -p gh-pages/","lint":"standardx -v | snazzy","lint:fix":"standardx --fix","precommit":"npm run lint","prepush":"node scripts/testOnlyCheck.js","prerelease":"node scripts/release.js 1.5.0 1.6.0","start":"npm run dev","start:https":"npm run dev -- --server-type https","test":"karma start ./tests/karma.conf.js","test:docs":"node scripts/docsLint.js","test:firefox":"npm test -- --browsers Firefox","test:chrome":"npm test -- --browsers Chrome","test:nobrowser":"NO_BROWSER=true npm test","test:node":"node --experimental-require-module ./node_modules/mocha/bin/mocha --ui tdd tests/node"},"repository":"aframevr/aframe","license":"MIT","files":["dist/*","docs/**/*","src/**/*","vendor/**/*"],"dependencies":{"buffer":"^6.0.3","debug":"^4.3.4","deep-assign":"^2.0.0","load-bmfont":"^1.2.3","super-animejs":"^3.1.0","three":"npm:super-three@0.164.0","three-bmfont-text":"dmarcos/three-bmfont-text#eed4878795be9b3e38cf6aec6b903f56acd1f695","webvr-polyfill":"^0.10.12"},"devDependencies":{"@babel/core":"^7.17.10","babel-loader":"^8.2.5","babel-plugin-istanbul":"^6.1.1","chai":"^4.3.6","chai-shallow-deep-equal":"^1.4.0","chalk":"^1.1.3","cross-env":"^7.0.3","css-loader":"^6.7.1","eslint":"^8.45.0","eslint-config-semistandard":"^17.0.0","eslint-config-standard-jsx":"^11.0.0","ghpages":"0.0.8","git-rev":"^0.2.1","glob":"^8.0.3","husky":"^0.11.7","jsdom":"^24.0.0","jsdom-global":"^3.0.2","karma":"^6.4.0","karma-chai-shallow-deep-equal":"0.0.4","karma-chrome-launcher":"^3.1.1","karma-coverage":"^2.2.0","karma-env-preprocessor":"^0.1.1","karma-firefox-launcher":"^2.1.2","karma-mocha":"^2.0.1","karma-mocha-reporter":"^2.2.5","karma-sinon-chai":"^2.0.2","karma-webpack":"^5.0.0","markserv":"github:sukima/markserv#feature/fix-broken-websoketio-link","mocha":"^10.0.0","replace-in-file":"^2.5.3","shelljs":"^0.7.7","shx":"^0.2.2","sinon":"<12.0.0","sinon-chai":"^3.7.0","snazzy":"^5.0.0","standardx":"^7.0.0","style-loader":"^3.3.1","too-wordy":"ngokevin/too-wordy","webpack":"^5.73.0","webpack-cli":"^4.10.0","webpack-dev-server":"^4.11.0","webpack-merge":"^5.8.0","write-good":"^1.0.8"},"link":true,"standardx":{"ignore":["build/**","dist/**","examples/**/shaders/*.js","**/vendor/**"]},"keywords":["3d","aframe","cardboard","components","oculus","three","three.js","rift","vive","vr","quest","meta","web-components","webvr","webxr"],"engines":{"node":">= 4.6.0","npm":">= 2.15.9"}}')}},T={};function O(M){var E=T[M];if(E!==void 0)return E.exports;var e=T[M]={id:M,exports:{}};return x[M].call(e.exports,e,e.exports,O),e.exports}return O.m=x,O.n=M=>{var E=M&&M.__esModule?()=>M.default:()=>M;return O.d(E,{a:E}),E},O.d=(M,E)=>{for(var e in E)O.o(E,e)&&!O.o(M,e)&&Object.defineProperty(M,e,{enumerable:!0,get:E[e]})},O.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),O.o=(M,E)=>Object.prototype.hasOwnProperty.call(M,E),O.r=M=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(M,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(M,"__esModule",{value:!0})},O.b=document.baseURI||self.location.href,O.nc=void 0,O(5579)})()),function(){"use strict";var x=function(k,K,Z){var ee,he=k,ue=K;if(this.orientation="landscape",this.listeners={},typeof k!="number"){var ve=k;Z=K,he=ve.videoWidth||ve.width,ue=ve.videoHeight||ve.height,this.image=ve}if(this.defaultMarkerWidth=1,this.patternMarkers={},this.barcodeMarkers={},this.transform_mat=new Float32Array(16),this.canvas=document.createElement("canvas"),this.canvas.width=he,this.canvas.height=ue,this.ctx=this.canvas.getContext("2d"),this.videoWidth=he,this.videoHeight=ue,typeof Z=="string"){var be=this;this.cameraParam=new T(Z,function(){be._initialize()},function(Te){console.error("ARController: Failed to load ARCameraParam",Te)})}else this.cameraParam=Z,this._initialize()};x.prototype.dispose=function(){O.teardown(this.id);for(var k in this)this[k]=null},x.prototype.process=function(k){this.detectMarker(k);var K=this.getMarkerNum(),Z,ee;for(Z in this.patternMarkers)ee=this.patternMarkers[Z],ee.inPrevious=ee.inCurrent,ee.inCurrent=!1;for(Z in this.barcodeMarkers)ee=this.barcodeMarkers[Z],ee.inPrevious=ee.inCurrent,ee.inCurrent=!1;for(var he=0;he<K;he++){var ue=this.getMarker(he),ve=O.UNKNOWN_MARKER,be=this.trackPatternMarkerId(-1);ue.idPatt>-1&&(ue.id===ue.idPatt||ue.idMatrix===-1)?(be=this.trackPatternMarkerId(ue.idPatt),ve=O.PATTERN_MARKER,ue.dir!==ue.dirPatt&&this.setMarkerInfoDir(he,ue.dirPatt)):ue.idMatrix>-1&&(be=this.trackBarcodeMarkerId(ue.idMatrix),ve=O.BARCODE_MARKER,ue.dir!==ue.dirMatrix&&this.setMarkerInfoDir(he,ue.dirMatrix)),ve!==O.UNKNOWN_MARKER&&be.inPrevious?this.getTransMatSquareCont(he,be.markerWidth,be.matrix,be.matrix):this.getTransMatSquare(he,be.markerWidth,be.matrix),be.inCurrent=!0,this.transMatToGLMat(be.matrix,this.transform_mat),this.dispatchEvent({name:"getMarker",target:this,data:{index:he,type:ve,marker:ue,matrix:this.transform_mat}})}for(var Te=this.getMultiMarkerCount(),he=0;he<Te;he++){var ye=this.getMultiMarkerPatternCount(he),be=!1;O.getTransMatMultiSquareRobust(this.id,he),this.transMatToGLMat(this.marker_transform_mat,this.transform_mat);for(var De=0;De<ye;De++){var Ce=this.getMultiEachMarker(he,De);if(Ce.visible>=0){be=!0,this.dispatchEvent({name:"getMultiMarker",target:this,data:{multiMarkerId:he,matrix:this.transform_mat}});break}}if(be)for(var De=0;De<ye;De++){var Ce=this.getMultiEachMarker(he,De);this.transMatToGLMat(this.marker_transform_mat,this.transform_mat),this.dispatchEvent({name:"getMultiMarkerSub",target:this,data:{multiMarkerId:he,markerIndex:De,marker:Ce,matrix:this.transform_mat}})}}this._bwpointer&&this.debugDraw()},x.prototype.trackPatternMarkerId=function(k,K){var Z=this.patternMarkers[k];return Z||(this.patternMarkers[k]=Z={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:K||this.defaultMarkerWidth}),K&&(Z.markerWidth=K),Z},x.prototype.trackBarcodeMarkerId=function(k,K){var Z=this.barcodeMarkers[k];return Z||(this.barcodeMarkers[k]=Z={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:K||this.defaultMarkerWidth}),K&&(Z.markerWidth=K),Z},x.prototype.getMultiMarkerCount=function(){return O.getMultiMarkerCount(this.id)},x.prototype.getMultiMarkerPatternCount=function(k){return O.getMultiMarkerNum(this.id,k)},x.prototype.addEventListener=function(k,K){this.listeners[k]||(this.listeners[k]=[]),this.listeners[k].push(K)},x.prototype.removeEventListener=function(k,K){if(this.listeners[k]){var Z=this.listeners[k].indexOf(K);Z>-1&&this.listeners[k].splice(Z,1)}},x.prototype.dispatchEvent=function(k){var K=this.listeners[k.name];if(K)for(var Z=0;Z<K.length;Z++)K[Z].call(this,k)},x.prototype.debugSetup=function(){document.body.appendChild(this.canvas),this.setDebugMode(1),this._bwpointer=this.getProcessingImage()},x.prototype.loadMarker=function(k,K,Z){return O.addMarker(this.id,k,K,Z)},x.prototype.loadMultiMarker=function(k,K,Z){return O.addMultiMarker(this.id,k,K,Z)},x.prototype.getTransMatSquare=function(k,K,Z){return O.getTransMatSquare(this.id,k,K),Z.set(this.marker_transform_mat),Z},x.prototype.getTransMatSquareCont=function(k,K,Z,ee){return this.marker_transform_mat.set(Z),O.getTransMatSquareCont(this.id,k,K),ee.set(this.marker_transform_mat),ee},x.prototype.getTransMatMultiSquare=function(k,K){return O.getTransMatMultiSquare(this.id,k),K.set(this.marker_transform_mat),K},x.prototype.getTransMatMultiSquareRobust=function(k,K){return O.getTransMatMultiSquare(this.id,k),K.set(this.marker_transform_mat),K},x.prototype.transMatToGLMat=function(k,K,Z){return K[0+0*4]=k[0],K[0+1*4]=k[1],K[0+2*4]=k[2],K[0+3*4]=k[3],K[1+0*4]=k[4],K[1+1*4]=k[5],K[1+2*4]=k[6],K[1+3*4]=k[7],K[2+0*4]=k[8],K[2+1*4]=k[9],K[2+2*4]=k[10],K[2+3*4]=k[11],K[3+0*4]=0,K[3+1*4]=0,K[3+2*4]=0,K[3+3*4]=1,Z!=null&&Z!==0&&(K[12]*=Z,K[13]*=Z,K[14]*=Z),K},x.prototype.detectMarker=function(k){return this._copyImageToHeap(k)?O.detectMarker(this.id):-99},x.prototype.getMarkerNum=function(){return O.getMarkerNum(this.id)},x.prototype.getMarker=function(k){if(O.getMarker(this.id,k)===0)return O.markerInfo},x.prototype.setMarkerInfoVertex=function(k,K){for(var Z=0;Z<K.length;Z++)this.marker_transform_mat[Z*2+0]=K[Z][0],this.marker_transform_mat[Z*2+1]=K[Z][1];return O.setMarkerInfoVertex(this.id,k)},x.prototype.cloneMarkerInfo=function(k){return JSON.parse(JSON.stringify(k))},x.prototype.getMultiEachMarker=function(k,K){if(O.getMultiEachMarker(this.id,k,K)===0)return O.multiEachMarkerInfo},x.prototype.getTransformationMatrix=function(){return this.transform_mat},x.prototype.getCameraMatrix=function(){return this.camera_mat},x.prototype.getMarkerTransformationMatrix=function(){return this.marker_transform_mat},x.prototype.setDebugMode=function(k){return O.setDebugMode(this.id,k)},x.prototype.getDebugMode=function(){return O.getDebugMode(this.id)},x.prototype.getProcessingImage=function(){return O.getProcessingImage(this.id)},x.prototype.setLogLevel=function(k){return O.setLogLevel(k)},x.prototype.getLogLevel=function(){return O.getLogLevel()},x.prototype.setMarkerInfoDir=function(k,K){return O.setMarkerInfoDir(this.id,k,K)},x.prototype.setProjectionNearPlane=function(k){return O.setProjectionNearPlane(this.id,k)},x.prototype.getProjectionNearPlane=function(){return O.getProjectionNearPlane(this.id)},x.prototype.setProjectionFarPlane=function(k){return O.setProjectionFarPlane(this.id,k)},x.prototype.getProjectionFarPlane=function(){return O.getProjectionFarPlane(this.id)},x.prototype.setThresholdMode=function(k){return O.setThresholdMode(this.id,k)},x.prototype.getThresholdMode=function(){return O.getThresholdMode(this.id)},x.prototype.setThreshold=function(k){return O.setThreshold(this.id,k)},x.prototype.getThreshold=function(){return O.getThreshold(this.id)},x.prototype.setPatternDetectionMode=function(k){return O.setPatternDetectionMode(this.id,k)},x.prototype.getPatternDetectionMode=function(){return O.getPatternDetectionMode(this.id)},x.prototype.setMatrixCodeType=function(k){return O.setMatrixCodeType(this.id,k)},x.prototype.getMatrixCodeType=function(){return O.getMatrixCodeType(this.id)},x.prototype.setLabelingMode=function(k){return O.setLabelingMode(this.id,k)},x.prototype.getLabelingMode=function(){return O.getLabelingMode(this.id)},x.prototype.setPattRatio=function(k){return O.setPattRatio(this.id,k)},x.prototype.getPattRatio=function(){return O.getPattRatio(this.id)},x.prototype.setImageProcMode=function(k){return O.setImageProcMode(this.id,k)},x.prototype.getImageProcMode=function(){return O.getImageProcMode(this.id)},x.prototype.debugDraw=function(){var k=new Uint8ClampedArray(Module.HEAPU8.buffer,this._bwpointer,this.framesize),K=new ImageData(k,this.canvas.width,this.canvas.height);this.ctx.putImageData(K,0,0);for(var Z=this.getMarkerNum(),ee=0;ee<Z;ee++)this._debugMarker(this.getMarker(ee))},x.prototype._initialize=function(){this.id=O.setup(this.canvas.width,this.canvas.height,this.cameraParam.id);var k=O.frameMalloc;this.framepointer=k.framepointer,this.framesize=k.framesize,this.dataHeap=new Uint8Array(Module.HEAPU8.buffer,this.framepointer,this.framesize),this.camera_mat=new Float64Array(Module.HEAPU8.buffer,k.camera,16),this.marker_transform_mat=new Float64Array(Module.HEAPU8.buffer,k.transform,12),this.setProjectionNearPlane(.1),this.setProjectionFarPlane(1e3);var K=this;setTimeout(function(){K.onload&&K.onload(),K.dispatchEvent({name:"load",target:K})},1)},x.prototype._copyImageToHeap=function(k){k||(k=this.image),this.ctx.save(),this.orientation==="portrait"?(this.ctx.translate(this.canvas.width,0),this.ctx.rotate(Math.PI/2),this.ctx.drawImage(k,0,0,this.canvas.height,this.canvas.width)):this.ctx.drawImage(k,0,0,this.canvas.width,this.canvas.height),this.ctx.restore();var K=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),Z=K.data;return this.dataHeap?(this.dataHeap.set(Z),!0):!1},x.prototype._debugMarker=function(k){var K,Z;K=k.vertex;var ee=this.ctx;ee.strokeStyle="red",ee.beginPath(),ee.moveTo(K[0][0],K[0][1]),ee.lineTo(K[1][0],K[1][1]),ee.stroke(),ee.beginPath(),ee.moveTo(K[2][0],K[2][1]),ee.lineTo(K[3][0],K[3][1]),ee.stroke(),ee.strokeStyle="green",ee.beginPath(),ee.lineTo(K[1][0],K[1][1]),ee.lineTo(K[2][0],K[2][1]),ee.stroke(),ee.beginPath(),ee.moveTo(K[3][0],K[3][1]),ee.lineTo(K[0][0],K[0][1]),ee.stroke(),Z=k.pos,ee.beginPath(),ee.arc(Z[0],Z[1],8,0,Math.PI*2),ee.fillStyle="red",ee.fill()},x.getUserMedia=function(k){var K=k.facingMode||"environment",Z=k.onSuccess,ee=k.onError||function(Qe){console.error("ARController.getUserMedia",Qe)},he=document.createElement("video"),ue=function(){this.videoWidth!==0&&Z(he)},ve=!1,be=["touchstart","touchend","touchmove","touchcancel","click","mousedown","mouseup","mousemove","keydown","keyup","keypress","scroll"],Te=function(Qe){ve&&(he.play(),he.paused||be.forEach(function(ot){window.removeEventListener(ot,Te,!0)}))};be.forEach(function(Qe){window.addEventListener(Qe,Te,!0)});var ye=function(Qe){he.addEventListener("loadedmetadata",ue,!1),he.src=window.URL.createObjectURL(Qe),ve=!0,Te()},De={},Ce={};k.width&&(Ce.width=k.width,typeof k.width=="object"?(k.width.max&&(De.maxWidth=k.width.max),k.width.min&&(De.minWidth=k.width.max)):De.maxWidth=k.width),k.height&&(Ce.height=k.height,typeof k.height=="object"?(k.height.max&&(De.maxHeight=k.height.max),k.height.min&&(De.minHeight=k.height.max)):De.maxHeight=k.height),Ce.facingMode=K,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var Re={audio:!1,video:{mandatory:De}};return navigator.getUserMedia?navigator.getUserMedia(Re,ye,ee):ee("navigator.getUserMedia is not supported on your browser"),he},x.getUserMediaARController=function(k){var K={};for(var Z in k)K[Z]=k[Z];var ee=k.onSuccess,he=k.cameraParam;K.onSuccess=function(){new T(he,function(){var ve=this,be=k.maxARVideoSize||Math.max(ue.videoWidth,ue.videoHeight),Te=be/Math.max(ue.videoWidth,ue.videoHeight),ye=Te*ue.videoWidth,De=Te*ue.videoHeight;if(ue.videoWidth<ue.videoHeight){var Ce=ye;ye=De,De=Ce}var Re=new x(ye,De,ve);Re.image=ue,ue.videoWidth<ue.videoHeight?(Re.orientation="portrait",Re.videoWidth=ue.videoHeight,Re.videoHeight=ue.videoWidth):(Re.orientation="landscape",Re.videoWidth=ue.videoWidth,Re.videoHeight=ue.videoHeight),ee(Re,ve)},function(ve){console.error("ARController: Failed to load ARCameraParam",ve)})};var ue=this.getUserMedia(K);return ue};var T=function(k,K,Z){this.id=-1,this._src="",this.complete=!1,this.onload=K,this.onerror=Z,k&&this.load(k)};T.prototype.load=function(k){if(this._src!=="")throw"ARCameraParam: Trying to load camera parameters twice.";if(this._src=k,k){var K=this;O.loadCamera(k,function(Z){K.id=Z,K.complete=!0,K.onload()},function(Z){K.onerror(Z)})}},Object.defineProperty(T.prototype,"src",{set:function(k){this.load(k)},get:function(){return this._src}}),T.prototype.dispose=function(){this.id!==-1&&O.deleteCamera(this.id),this.id=-1,this._src="",this.complete=!1};var O={UNKNOWN_MARKER:-1,PATTERN_MARKER:0,BARCODE_MARKER:1,loadCamera:V,addMarker:B,addMultiMarker:A},M=["setup","teardown","setLogLevel","getLogLevel","setDebugMode","getDebugMode","getProcessingImage","setMarkerInfoDir","setMarkerInfoVertex","getTransMatSquare","getTransMatSquareCont","getTransMatMultiSquare","getTransMatMultiSquareRobust","getMultiMarkerNum","getMultiMarkerCount","detectMarker","getMarkerNum","getMarker","getMultiEachMarker","setProjectionNearPlane","getProjectionNearPlane","setProjectionFarPlane","getProjectionFarPlane","setThresholdMode","getThresholdMode","setThreshold","getThreshold","setPatternDetectionMode","getPatternDetectionMode","setMatrixCodeType","getMatrixCodeType","setLabelingMode","getLabelingMode","setPattRatio","getPattRatio","setImageProcMode","getImageProcMode"];function E(){M.forEach(function(K){O[K]=Module[K]});for(var k in Module)k.match(/^AR/)&&(O[k]=Module[k])}var e=0;function B(k,K,Z){var ee="/marker_"+e++;G(K,ee,function(){var he=Module._addMarker(k,ee);Z&&Z(he)})}function N(k){return String.fromCharCode.apply(String,k)}function Q(k){var K=N(k),Z=K.split(`
`),ee=[],he=0,ue=0;return Z.forEach(function(ve){if(ve=ve.trim(),!(!ve||ve.startsWith("#")))switch(he){case 0:ue=+ve,he=1;return;case 1:ve.match(/^\d+$/)||ee.push(ve);case 2:case 3:case 4:he++;return;case 5:he=1;return}}),ee}var P=0;function A(k,K,Z){var ee="/multi_marker_"+P++;G(K,ee,function(he){var ue=Q(he);function ve(){var Te=Module._addMultiMarker(k,ee),ye=Module.getMultiMarkerNum(k,Te);Z&&Z(Te,ye)}if(!ue.length)return ve();var be=K.split("/").slice(0,-1).join("/");ue=ue.map(function(Te){return[be+"/"+Te,Te]}),$(ue,ve)})}var C=0;function V(k,K){var Z="/camera_param_"+C++,ee=function(){var he=Module._loadCamera(Z);K&&K(he)};typeof k=="object"?H(Z,k,ee):k.indexOf(`
`)>-1?z(Z,k,ee):G(k,Z,ee)}function z(k,K,Z){for(var ee=new Uint8Array(K.length),he=0;he<ee.length;he++)ee[he]=K.charCodeAt(he)&255;H(k,ee,Z)}function H(k,K,Z){FS.writeFile(k,K,{encoding:"binary"}),Z(K)}function G(k,K,Z){var ee=new XMLHttpRequest;ee.open("GET",k,!0),ee.responseType="arraybuffer",ee.onload=function(he){var ue=ee.response,ve=new Uint8Array(ue);H(K,ve,Z)},ee.send()}function $(k,K){var Z=k.pop();Z?G(Z[0],Z[1],function(){$(k,K)}):K()}window.artoolkit=O,window.ARController=x,window.ARCameraParam=T,window.Module?E():window.Module={onRuntimeInitialized:function(){E()}}}();var Module;Module||(Module=(typeof Module<"u"?Module:null)||{});var moduleOverrides={};for(var key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof require=="function"&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE){Module.print||(Module.print=function(T){process.stdout.write(T+`
`)}),Module.printErr||(Module.printErr=function(T){process.stderr.write(T+`
`)});var nodeFS=require("fs"),nodePath=require("path");Module.read=function(T,O){T=nodePath.normalize(T);var M=nodeFS.readFileSync(T);return!M&&T!=nodePath.resolve(T)&&(T=path.join(__dirname,"..","src",T),M=nodeFS.readFileSync(T)),M&&!O&&(M=M.toString()),M},Module.readBinary=function(T){var O=Module.read(T,!0);return O.buffer||(O=new Uint8Array(O)),assert(O.buffer),O},Module.load=function(T){globalEval(read(T))},Module.thisProgram||(process.argv.length>1?Module.thisProgram=process.argv[1].replace(/\\/g,"/"):Module.thisProgram="unknown-program"),Module.arguments=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),process.on("uncaughtException",function(x){if(!(x instanceof ExitStatus))throw x}),Module.inspect=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL)Module.print||(Module.print=print),typeof printErr<"u"&&(Module.printErr=printErr),typeof read<"u"?Module.read=read:Module.read=function(){throw"no read() available (jsc?)"},Module.readBinary=function(T){if(typeof readbuffer=="function")return new Uint8Array(readbuffer(T));var O=read(T,"binary");return assert(typeof O=="object"),O},typeof scriptArgs<"u"?Module.arguments=scriptArgs:typeof arguments<"u"&&(Module.arguments=arguments);else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(Module.read=function(T){var O=new XMLHttpRequest;return O.open("GET",T,!1),O.send(null),O.responseText},typeof arguments<"u"&&(Module.arguments=arguments),typeof console<"u")Module.print||(Module.print=function(T){console.log(T)}),Module.printErr||(Module.printErr=function(T){console.log(T)});else{var TRY_USE_DUMP=!1;Module.print||(Module.print=TRY_USE_DUMP&&typeof dump<"u"?function(x){dump(x)}:function(x){})}ENVIRONMENT_IS_WORKER&&(Module.load=importScripts),typeof Module.setWindowTitle>"u"&&(Module.setWindowTitle=function(x){document.title=x})}else throw"Unknown runtime environment. Where are we?";function globalEval(x){eval.call(null,x)}!Module.load&&Module.read&&(Module.load=function(T){globalEval(Module.read(T))}),Module.print||(Module.print=function(){}),Module.printErr||(Module.printErr=Module.print),Module.arguments||(Module.arguments=[]),Module.thisProgram||(Module.thisProgram="./this.program"),Module.print=Module.print,Module.printErr=Module.printErr,Module.preRun=[],Module.postRun=[];for(var key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);var Runtime={setTempRet0:function(x){tempRet0=x},getTempRet0:function(){return tempRet0},stackSave:function(){return STACKTOP},stackRestore:function(x){STACKTOP=x},getNativeTypeSize:function(x){switch(x){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(x[x.length-1]==="*")return Runtime.QUANTUM_SIZE;if(x[0]==="i"){var T=parseInt(x.substr(1));return assert(T%8===0),T/8}else return 0}}},getNativeFieldSize:function(x){return Math.max(Runtime.getNativeTypeSize(x),Runtime.QUANTUM_SIZE)},STACK_ALIGN:16,prepVararg:function(x,T){return T==="double"||T==="i64"?x&7&&(assert((x&7)===4),x+=4):assert((x&3)===0),x},getAlignSize:function(x,T,O){return!O&&(x=="i64"||x=="double")?8:x?Math.min(T||(x?Runtime.getNativeFieldSize(x):0),Runtime.QUANTUM_SIZE):Math.min(T,8)},dynCall:function(x,T,O){return O&&O.length?(O.splice||(O=Array.prototype.slice.call(O)),O.splice(0,0,T),Module["dynCall_"+x].apply(null,O)):Module["dynCall_"+x].call(null,T)},functionPointers:[],addFunction:function(x){for(var T=0;T<Runtime.functionPointers.length;T++)if(!Runtime.functionPointers[T])return Runtime.functionPointers[T]=x,2*(1+T);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function(x){Runtime.functionPointers[(x-2)/2]=null},warnOnce:function(x){Runtime.warnOnce.shown||(Runtime.warnOnce.shown={}),Runtime.warnOnce.shown[x]||(Runtime.warnOnce.shown[x]=1,Module.printErr(x))},funcWrappers:{},getFuncWrapper:function(x,T){assert(T),Runtime.funcWrappers[T]||(Runtime.funcWrappers[T]={});var O=Runtime.funcWrappers[T];return O[x]||(O[x]=function(){return Runtime.dynCall(T,x,arguments)}),O[x]},getCompilerSetting:function(x){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function(x){var T=STACKTOP;return STACKTOP=STACKTOP+x|0,STACKTOP=STACKTOP+15&-16,T},staticAlloc:function(x){var T=STATICTOP;return STATICTOP=STATICTOP+x|0,STATICTOP=STATICTOP+15&-16,T},dynamicAlloc:function(x){var T=DYNAMICTOP;if(DYNAMICTOP=DYNAMICTOP+x|0,DYNAMICTOP=DYNAMICTOP+15&-16,DYNAMICTOP>=TOTAL_MEMORY){var O=enlargeMemory();if(!O)return DYNAMICTOP=T,0}return T},alignMemory:function(x,T){var O=x=Math.ceil(x/(T||16))*(T||16);return O},makeBigInt:function(x,T,O){var M=O?+(x>>>0)+ +(T>>>0)*4294967296:+(x>>>0)+ +(T|0)*4294967296;return M},GLOBAL_BASE:8,QUANTUM_SIZE:4,__dummy__:0};Module.Runtime=Runtime;var __THREW__=0,ABORT=!1,EXITSTATUS=0,undef=0,tempValue,tempInt,tempBigInt,tempInt2,tempBigInt2,tempPair,tempBigIntI,tempBigIntR,tempBigIntS,tempBigIntP,tempBigIntD,tempDouble,tempFloat,tempI64,tempI64b,tempRet0,tempRet1,tempRet2,tempRet3,tempRet4,tempRet5,tempRet6,tempRet7,tempRet8,tempRet9;function assert(x,T){x||abort("Assertion failed: "+T)}var globalScope=this;function getCFunc(ident){var func=Module["_"+ident];if(!func)try{func=eval("_"+ident)}catch(x){}return assert(func,"Cannot call unknown function "+ident+" (perhaps LLVM optimizations or closure removed it?)"),func}var cwrap,ccall;(function(){var JSfuncs={stackSave:function(){Runtime.stackSave()},stackRestore:function(){Runtime.stackRestore()},arrayToC:function(x){var T=Runtime.stackAlloc(x.length);return writeArrayToMemory(x,T),T},stringToC:function(x){var T=0;return x!=null&&x!==0&&(T=Runtime.stackAlloc((x.length<<2)+1),writeStringToMemory(x,T)),T}},toC={string:JSfuncs.stringToC,array:JSfuncs.arrayToC};ccall=function(T,O,M,E,e){var B=getCFunc(T),N=[],Q=0;if(E)for(var P=0;P<E.length;P++){var A=toC[M[P]];A?(Q===0&&(Q=Runtime.stackSave()),N[P]=A(E[P])):N[P]=E[P]}var C=B.apply(null,N);if(O==="string"&&(C=Pointer_stringify(C)),Q!==0){if(e&&e.async){EmterpreterAsync.asyncFinalizers.push(function(){Runtime.stackRestore(Q)});return}Runtime.stackRestore(Q)}return C};var sourceRegex=/^function\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/;function parseJSFunc(x){var T=x.toString().match(sourceRegex).slice(1);return{arguments:T[0],body:T[1],returnValue:T[2]}}var JSsource={};for(var fun in JSfuncs)JSfuncs.hasOwnProperty(fun)&&(JSsource[fun]=parseJSFunc(JSfuncs[fun]));cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident),numericArgs=argTypes.every(function(x){return x==="number"}),numericRet=returnType!=="string";if(numericRet&&numericArgs)return cfunc;var argNames=argTypes.map(function(x,T){return"$"+T}),funcstr="(function("+argNames.join(",")+") {",nargs=argTypes.length;if(!numericArgs){funcstr+="var stack = "+JSsource.stackSave.body+";";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if(type!=="number"){var convertCode=JSsource[type+"ToC"];funcstr+="var "+convertCode.arguments+" = "+arg+";",funcstr+=convertCode.body+";",funcstr+=arg+"="+convertCode.returnValue+";"}}}var cfuncname=parseJSFunc(function(){return cfunc}).returnValue;if(funcstr+="var ret = "+cfuncname+"("+argNames.join(",")+");",!numericRet){var strgfy=parseJSFunc(function(){return Pointer_stringify}).returnValue;funcstr+="ret = "+strgfy+"(ret);"}return numericArgs||(funcstr+=JSsource.stackRestore.body.replace("()","(stack)")+";"),funcstr+="return ret})",eval(funcstr)}})(),Module.ccall=ccall,Module.cwrap=cwrap;function setValue(x,T,O,M){switch(O=O||"i8",O.charAt(O.length-1)==="*"&&(O="i32"),O){case"i1":HEAP8[x>>0]=T;break;case"i8":HEAP8[x>>0]=T;break;case"i16":HEAP16[x>>1]=T;break;case"i32":HEAP32[x>>2]=T;break;case"i64":tempI64=[T>>>0,(tempDouble=T,+Math_abs(tempDouble)>=1?tempDouble>0?(Math_min(+Math_floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[x>>2]=tempI64[0],HEAP32[x+4>>2]=tempI64[1];break;case"float":HEAPF32[x>>2]=T;break;case"double":HEAPF64[x>>3]=T;break;default:abort("invalid type for setValue: "+O)}}Module.setValue=setValue;function getValue(x,T,O){switch(T=T||"i8",T.charAt(T.length-1)==="*"&&(T="i32"),T){case"i1":return HEAP8[x>>0];case"i8":return HEAP8[x>>0];case"i16":return HEAP16[x>>1];case"i32":return HEAP32[x>>2];case"i64":return HEAP32[x>>2];case"float":return HEAPF32[x>>2];case"double":return HEAPF64[x>>3];default:abort("invalid type for setValue: "+T)}return null}Module.getValue=getValue;var ALLOC_NORMAL=0,ALLOC_STACK=1,ALLOC_STATIC=2,ALLOC_DYNAMIC=3,ALLOC_NONE=4;Module.ALLOC_NORMAL=ALLOC_NORMAL,Module.ALLOC_STACK=ALLOC_STACK,Module.ALLOC_STATIC=ALLOC_STATIC,Module.ALLOC_DYNAMIC=ALLOC_DYNAMIC,Module.ALLOC_NONE=ALLOC_NONE;function allocate(x,T,O,M){var E,e;typeof x=="number"?(E=!0,e=x):(E=!1,e=x.length);var B=typeof T=="string"?T:null,N;if(O==ALLOC_NONE?N=M:N=[_malloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][O===void 0?ALLOC_STATIC:O](Math.max(e,B?1:T.length)),E){var M=N,Q;for(assert((N&3)==0),Q=N+(e&-4);M<Q;M+=4)HEAP32[M>>2]=0;for(Q=N+e;M<Q;)HEAP8[M++>>0]=0;return N}if(B==="i8")return x.subarray||x.slice?HEAPU8.set(x,N):HEAPU8.set(new Uint8Array(x),N),N;for(var P=0,A,C,V;P<e;){var z=x[P];if(typeof z=="function"&&(z=Runtime.getFunctionIndex(z)),A=B||T[P],A===0){P++;continue}A=="i64"&&(A="i32"),setValue(N+P,z,A),V!==A&&(C=Runtime.getNativeTypeSize(A),V=A),P+=C}return N}Module.allocate=allocate;function getMemory(x){return staticSealed?typeof _sbrk<"u"&&!_sbrk.called||!runtimeInitialized?Runtime.dynamicAlloc(x):_malloc(x):Runtime.staticAlloc(x)}Module.getMemory=getMemory;function Pointer_stringify(x,T){if(T===0||!x)return"";for(var O=0,M,E=0;M=HEAPU8[x+E>>0],O|=M,!(M==0&&!T||(E++,T&&E==T)););T||(T=E);var e="";if(O<128){for(var B=1024,N;T>0;)N=String.fromCharCode.apply(String,HEAPU8.subarray(x,x+Math.min(T,B))),e=e?e+N:N,x+=B,T-=B;return e}return Module.UTF8ToString(x)}Module.Pointer_stringify=Pointer_stringify;function AsciiToString(x){for(var T="";;){var O=HEAP8[x++>>0];if(!O)return T;T+=String.fromCharCode(O)}}Module.AsciiToString=AsciiToString;function stringToAscii(x,T){return writeAsciiToMemory(x,T,!1)}Module.stringToAscii=stringToAscii;function UTF8ArrayToString(x,T){for(var O,M,E,e,B,N,Q="";;){if(O=x[T++],!O)return Q;if(!(O&128)){Q+=String.fromCharCode(O);continue}if(M=x[T++]&63,(O&224)==192){Q+=String.fromCharCode((O&31)<<6|M);continue}if(E=x[T++]&63,(O&240)==224?O=(O&15)<<12|M<<6|E:(e=x[T++]&63,(O&248)==240?O=(O&7)<<18|M<<12|E<<6|e:(B=x[T++]&63,(O&252)==248?O=(O&3)<<24|M<<18|E<<12|e<<6|B:(N=x[T++]&63,O=(O&1)<<30|M<<24|E<<18|e<<12|B<<6|N))),O<65536)Q+=String.fromCharCode(O);else{var P=O-65536;Q+=String.fromCharCode(55296|P>>10,56320|P&1023)}}}Module.UTF8ArrayToString=UTF8ArrayToString;function UTF8ToString(x){return UTF8ArrayToString(HEAPU8,x)}Module.UTF8ToString=UTF8ToString;function stringToUTF8Array(x,T,O,M){if(!(M>0))return 0;for(var E=O,e=O+M-1,B=0;B<x.length;++B){var N=x.charCodeAt(B);if(N>=55296&&N<=57343&&(N=65536+((N&1023)<<10)|x.charCodeAt(++B)&1023),N<=127){if(O>=e)break;T[O++]=N}else if(N<=2047){if(O+1>=e)break;T[O++]=192|N>>6,T[O++]=128|N&63}else if(N<=65535){if(O+2>=e)break;T[O++]=224|N>>12,T[O++]=128|N>>6&63,T[O++]=128|N&63}else if(N<=2097151){if(O+3>=e)break;T[O++]=240|N>>18,T[O++]=128|N>>12&63,T[O++]=128|N>>6&63,T[O++]=128|N&63}else if(N<=67108863){if(O+4>=e)break;T[O++]=248|N>>24,T[O++]=128|N>>18&63,T[O++]=128|N>>12&63,T[O++]=128|N>>6&63,T[O++]=128|N&63}else{if(O+5>=e)break;T[O++]=252|N>>30,T[O++]=128|N>>24&63,T[O++]=128|N>>18&63,T[O++]=128|N>>12&63,T[O++]=128|N>>6&63,T[O++]=128|N&63}}return T[O]=0,O-E}Module.stringToUTF8Array=stringToUTF8Array;function stringToUTF8(x,T,O){return stringToUTF8Array(x,HEAPU8,T,O)}Module.stringToUTF8=stringToUTF8;function lengthBytesUTF8(x){for(var T=0,O=0;O<x.length;++O){var M=x.charCodeAt(O);M>=55296&&M<=57343&&(M=65536+((M&1023)<<10)|x.charCodeAt(++O)&1023),M<=127?++T:M<=2047?T+=2:M<=65535?T+=3:M<=2097151?T+=4:M<=67108863?T+=5:T+=6}return T}Module.lengthBytesUTF8=lengthBytesUTF8;function UTF16ToString(x){for(var T=0,O="";;){var M=HEAP16[x+T*2>>1];if(M==0)return O;++T,O+=String.fromCharCode(M)}}Module.UTF16ToString=UTF16ToString;function stringToUTF16(x,T,O){if(O===void 0&&(O=2147483647),O<2)return 0;O-=2;for(var M=T,E=O<x.length*2?O/2:x.length,e=0;e<E;++e){var B=x.charCodeAt(e);HEAP16[T>>1]=B,T+=2}return HEAP16[T>>1]=0,T-M}Module.stringToUTF16=stringToUTF16;function lengthBytesUTF16(x){return x.length*2}Module.lengthBytesUTF16=lengthBytesUTF16;function UTF32ToString(x){for(var T=0,O="";;){var M=HEAP32[x+T*4>>2];if(M==0)return O;if(++T,M>=65536){var E=M-65536;O+=String.fromCharCode(55296|E>>10,56320|E&1023)}else O+=String.fromCharCode(M)}}Module.UTF32ToString=UTF32ToString;function stringToUTF32(x,T,O){if(O===void 0&&(O=2147483647),O<4)return 0;for(var M=T,E=M+O-4,e=0;e<x.length;++e){var B=x.charCodeAt(e);if(B>=55296&&B<=57343){var N=x.charCodeAt(++e);B=65536+((B&1023)<<10)|N&1023}if(HEAP32[T>>2]=B,T+=4,T+4>E)break}return HEAP32[T>>2]=0,T-M}Module.stringToUTF32=stringToUTF32;function lengthBytesUTF32(x){for(var T=0,O=0;O<x.length;++O){var M=x.charCodeAt(O);M>=55296&&M<=57343&&++O,T+=4}return T}Module.lengthBytesUTF32=lengthBytesUTF32;function demangle(x){var T=!!Module.___cxa_demangle;if(T)try{var O=_malloc(x.length);writeStringToMemory(x.substr(1),O);var M=_malloc(4),E=Module.___cxa_demangle(O,0,0,M);if(getValue(M,"i32")===0&&E)return Pointer_stringify(E)}catch{}finally{O&&_free(O),M&&_free(M),E&&_free(E)}var e=3,B={v:"void",b:"bool",c:"char",s:"short",i:"int",l:"long",f:"float",d:"double",w:"wchar_t",a:"signed char",h:"unsigned char",t:"unsigned short",j:"unsigned int",m:"unsigned long",x:"long long",y:"unsigned long long",z:"..."},N=[],Q=!0;function P(z){z&&Module.print(z),Module.print(x);for(var H="",G=0;G<e;G++)H+=" ";Module.print(H+"^")}function A(){e++,x[e]==="K"&&e++;for(var z=[];x[e]!=="E";){if(x[e]==="S"){e++;var H=x.indexOf("_",e),G=x.substring(e,H)||0;z.push(N[G]||"?"),e=H+1;continue}if(x[e]==="C"){z.push(z[z.length-1]),e+=2;continue}var $=parseInt(x.substr(e)),k=$.toString().length;if(!$||!k){e--;break}var K=x.substr(e+k,$);z.push(K),N.push(K),e+=k+$}return e++,z}function C(z,H,G){H=H||1/0;var $="",k=[];function K(){return"("+k.join(", ")+")"}var Z;if(x[e]==="N"){if(Z=A().join("::"),H--,H===0)return z?[Z]:Z}else{(x[e]==="K"||Q&&x[e]==="L")&&e++;var ee=parseInt(x.substr(e));if(ee){var he=ee.toString().length;Z=x.substr(e+he,ee),e+=he+ee}}if(Q=!1,x[e]==="I"){e++;var ue=C(!0),ve=C(!0,1,!0);$+=ve[0]+" "+Z+"<"+ue.join(", ")+">"}else $=Z;e:for(;e<x.length&&H-- >0;){var be=x[e++];if(be in B)k.push(B[be]);else switch(be){case"P":k.push(C(!0,1,!0)[0]+"*");break;case"R":k.push(C(!0,1,!0)[0]+"&");break;case"L":{e++;var Te=x.indexOf("E",e),ee=Te-e;k.push(x.substr(e,ee)),e+=ee+2;break}case"A":{var ee=parseInt(x.substr(e));if(e+=ee.toString().length,x[e]!=="_")throw"?";e++,k.push(C(!0,1,!0)[0]+" ["+ee+"]");break}case"E":break e;default:$+="?"+be;break e}}return!G&&k.length===1&&k[0]==="void"&&(k=[]),z?($&&k.push($+"?"),k):$+K()}var V=x;try{if(x=="Object._main"||x=="_main")return"main()";if(typeof x=="number"&&(x=Pointer_stringify(x)),x[0]!=="_"||x[1]!=="_"||x[2]!=="Z")return x;switch(x[3]){case"n":return"operator new()";case"d":return"operator delete()"}V=C()}catch{V+="?"}return V.indexOf("?")>=0&&!T&&Runtime.warnOnce("warning: a problem occurred in builtin C++ name demangling; build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),V}function demangleAll(x){return x.replace(/__Z[\w\d_]+/g,function(T){var O=demangle(T);return T===O?T:T+" ["+O+"]"})}function jsStackTrace(){var x=new Error;if(!x.stack){try{throw new Error(0)}catch(T){x=T}if(!x.stack)return"(no stack trace available)"}return x.stack.toString()}function stackTrace(){return demangleAll(jsStackTrace())}Module.stackTrace=stackTrace;var PAGE_SIZE=4096;function alignMemoryPage(x){return x%4096>0&&(x+=4096-x%4096),x}var HEAP,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64,STATIC_BASE=0,STATICTOP=0,staticSealed=!1,STACK_BASE=0,STACKTOP=0,STACK_MAX=0,DYNAMIC_BASE=0,DYNAMICTOP=0;function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which adjusts the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}function enlargeMemory(){abortOnCannotGrowMemory()}for(var TOTAL_STACK=Module.TOTAL_STACK||5242880,TOTAL_MEMORY=Module.TOTAL_MEMORY||268435456,totalMemory=64*1024;totalMemory<TOTAL_MEMORY||totalMemory<2*TOTAL_STACK;)totalMemory<16*1024*1024?totalMemory*=2:totalMemory+=16*1024*1024;totalMemory!==TOTAL_MEMORY&&(TOTAL_MEMORY=totalMemory),assert(typeof Int32Array<"u"&&typeof Float64Array<"u"&&!!new Int32Array(1).subarray&&!!new Int32Array(1).set,"JS engine does not provide full typed array support");var buffer;buffer=new ArrayBuffer(TOTAL_MEMORY),HEAP8=new Int8Array(buffer),HEAP16=new Int16Array(buffer),HEAP32=new Int32Array(buffer),HEAPU8=new Uint8Array(buffer),HEAPU16=new Uint16Array(buffer),HEAPU32=new Uint32Array(buffer),HEAPF32=new Float32Array(buffer),HEAPF64=new Float64Array(buffer),HEAP32[0]=255,assert(HEAPU8[0]===255&&HEAPU8[3]===0,"Typed arrays 2 must be run on a little-endian system"),Module.HEAP=HEAP,Module.buffer=buffer,Module.HEAP8=HEAP8,Module.HEAP16=HEAP16,Module.HEAP32=HEAP32,Module.HEAPU8=HEAPU8,Module.HEAPU16=HEAPU16,Module.HEAPU32=HEAPU32,Module.HEAPF32=HEAPF32,Module.HEAPF64=HEAPF64;function callRuntimeCallbacks(x){for(;x.length>0;){var T=x.shift();if(typeof T=="function"){T();continue}var O=T.func;typeof O=="number"?T.arg===void 0?Runtime.dynCall("v",O):Runtime.dynCall("vi",O,[T.arg]):O(T.arg===void 0?null:T.arg)}}var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1,runtimeExited=!1;function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__),runtimeExited=!0}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(x){__ATPRERUN__.unshift(x)}Module.addOnPreRun=addOnPreRun;function addOnInit(x){__ATINIT__.unshift(x)}Module.addOnInit=addOnInit;function addOnPreMain(x){__ATMAIN__.unshift(x)}Module.addOnPreMain=addOnPreMain;function addOnExit(x){__ATEXIT__.unshift(x)}Module.addOnExit=addOnExit;function addOnPostRun(x){__ATPOSTRUN__.unshift(x)}Module.addOnPostRun=addOnPostRun;function intArrayFromString(x,T,O){var M=O>0?O:lengthBytesUTF8(x)+1,E=new Array(M),e=stringToUTF8Array(x,E,0,E.length);return T&&(E.length=e),E}Module.intArrayFromString=intArrayFromString;function intArrayToString(x){for(var T=[],O=0;O<x.length;O++){var M=x[O];M>255&&(M&=255),T.push(String.fromCharCode(M))}return T.join("")}Module.intArrayToString=intArrayToString;function writeStringToMemory(x,T,O){for(var M=intArrayFromString(x,O),E=0;E<M.length;){var e=M[E];HEAP8[T+E>>0]=e,E=E+1}}Module.writeStringToMemory=writeStringToMemory;function writeArrayToMemory(x,T){for(var O=0;O<x.length;O++)HEAP8[T++>>0]=x[O]}Module.writeArrayToMemory=writeArrayToMemory;function writeAsciiToMemory(x,T,O){for(var M=0;M<x.length;++M)HEAP8[T++>>0]=x.charCodeAt(M);O||(HEAP8[T>>0]=0)}Module.writeAsciiToMemory=writeAsciiToMemory;function unSign(x,T,O){return x>=0?x:T<=32?2*Math.abs(1<<T-1)+x:Math.pow(2,T)+x}function reSign(x,T,O){if(x<=0)return x;var M=T<=32?Math.abs(1<<T-1):Math.pow(2,T-1);return x>=M&&(T<=32||x>M)&&(x=-2*M+x),x}(!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function x(T,O){var M=T>>>16,E=T&65535,e=O>>>16,B=O&65535;return E*B+(M*B+E*e<<16)|0}),Math.imul=Math.imul,Math.clz32||(Math.clz32=function(x){x=x>>>0;for(var T=0;T<32;T++)if(x&1<<31-T)return T;return 32}),Math.clz32=Math.clz32;var Math_abs=Math.abs,Math_cos=Math.cos,Math_sin=Math.sin,Math_tan=Math.tan,Math_acos=Math.acos,Math_asin=Math.asin,Math_atan=Math.atan,Math_atan2=Math.atan2,Math_exp=Math.exp,Math_log=Math.log,Math_sqrt=Math.sqrt,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_pow=Math.pow,Math_imul=Math.imul,Math_fround=Math.fround,Math_min=Math.min,Math_clz32=Math.clz32,runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function getUniqueRunDependency(x){return x}function addRunDependency(x){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}Module.addRunDependency=addRunDependency;function removeRunDependency(x){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var T=dependenciesFulfilled;dependenciesFulfilled=null,T()}}Module.removeRunDependency=removeRunDependency,Module.preloadedImages={},Module.preloadedAudios={};var memoryInitializer=null,ASM_CONSTS=[function(x,T,O,M){{artoolkit.multiEachMarkerInfo||(artoolkit.multiEachMarkerInfo={});var E=artoolkit.multiEachMarkerInfo;E.visible=x,E.pattId=T,E.pattType=O,E.width=M}},function(x,T,O,M,E,e,B,N,Q,P,A,C,V,z,H,G,$,k,K,Z,ee,he,ue,ve,be,Te,ye,De,Ce,Re,Qe,ot,Je){{var Mt=arguments,Zt=12;artoolkit.markerInfo||(artoolkit.markerInfo={pos:[0,0],line:[[0,0,0],[0,0,0],[0,0,0],[0,0,0]],vertex:[[0,0],[0,0],[0,0],[0,0]]});var kt=artoolkit.markerInfo;kt.area=x,kt.id=T,kt.idPatt=O,kt.idMatrix=M,kt.dir=E,kt.dirPatt=e,kt.dirMatrix=B,kt.cf=N,kt.cfPatt=Q,kt.cfMatrix=P,kt.pos[0]=A,kt.pos[1]=C,kt.line[0][0]=Mt[Zt++],kt.line[0][1]=Mt[Zt++],kt.line[0][2]=Mt[Zt++],kt.line[1][0]=Mt[Zt++],kt.line[1][1]=Mt[Zt++],kt.line[1][2]=Mt[Zt++],kt.line[2][0]=Mt[Zt++],kt.line[2][1]=Mt[Zt++],kt.line[2][2]=Mt[Zt++],kt.line[3][0]=Mt[Zt++],kt.line[3][1]=Mt[Zt++],kt.line[3][2]=Mt[Zt++],kt.vertex[0][0]=Mt[Zt++],kt.vertex[0][1]=Mt[Zt++],kt.vertex[1][0]=Mt[Zt++],kt.vertex[1][1]=Mt[Zt++],kt.vertex[2][0]=Mt[Zt++],kt.vertex[2][1]=Mt[Zt++],kt.vertex[3][0]=Mt[Zt++],kt.vertex[3][1]=Mt[Zt++],kt.errorCorrected=Mt[Zt++]}},function(x,T,O,M,E){{artoolkit.frameMalloc||(artoolkit.frameMalloc={});var e=artoolkit.frameMalloc;e.framepointer=T,e.framesize=O,e.camera=M,e.transform=E}}];function _emscripten_asm_const_33(x,T,O,M,E,e,B,N,Q,P,A,C,V,z,H,G,$,k,K,Z,ee,he,ue,ve,be,Te,ye,De,Ce,Re,Qe,ot,Je,Mt){return ASM_CONSTS[x](T,O,M,E,e,B,N,Q,P,A,C,V,z,H,G,$,k,K,Z,ee,he,ue,ve,be,Te,ye,De,Ce,Re,Qe,ot,Je,Mt)}function _emscripten_asm_const_4(x,T,O,M,E){return ASM_CONSTS[x](T,O,M,E)}function _emscripten_asm_const_5(x,T,O,M,E,e){return ASM_CONSTS[x](T,O,M,E,e)}STATIC_BASE=8,STATICTOP=STATIC_BASE+16496,__ATINIT__.push({func:function(){__GLOBAL__sub_I_ARToolKitJS_cpp()}},{func:function(){__GLOBAL__sub_I_bind_cpp()}}),allocate([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,52,9,0,0,53,42,0,0,0,0,0,0,1,0,0,0,128,1,0,0,0,0,0,0,228,8,0,0,116,42,0,0,52,9,0,0,136,47,0,0,0,0,0,0,1,0,0,0,128,1,0,0,0,0,0,0,52,9,0,0,73,47,0,0,0,0,0,0,1,0,0,0,128,1,0,0,0,0,0,0,228,8,0,0,54,47,0,0,228,8,0,0,23,47,0,0,228,8,0,0,62,46,0,0,228,8,0,0,31,46,0,0,228,8,0,0,0,46,0,0,228,8,0,0,225,45,0,0,228,8,0,0,194,45,0,0,228,8,0,0,93,46,0,0,228,8,0,0,124,46,0,0,228,8,0,0,155,46,0,0,228,8,0,0,186,46,0,0,228,8,0,0,217,46,0,0,228,8,0,0,248,46,0,0,12,9,0,0,199,47,0,0,48,2,0,0,0,0,0,0,228,8,0,0,212,47,0,0,228,8,0,0,225,47,0,0,12,9,0,0,238,47,0,0,56,2,0,0,0,0,0,0,12,9,0,0,15,48,0,0,64,2,0,0,0,0,0,0,12,9,0,0,49,48,0,0,64,2,0,0,0,0,0,0,200,8,0,0,89,48,0,0,200,8,0,0,91,48,0,0,200,8,0,0,93,48,0,0,200,8,0,0,95,48,0,0,200,8,0,0,97,48,0,0,200,8,0,0,99,48,0,0,200,8,0,0,101,48,0,0,200,8,0,0,103,48,0,0,200,8,0,0,105,48,0,0,200,8,0,0,107,48,0,0,200,8,0,0,109,48,0,0,200,8,0,0,111,48,0,0,200,8,0,0,113,48,0,0,12,9,0,0,115,48,0,0,80,2,0,0,0,0,0,0,12,9,0,0,152,48,0,0,80,2,0,0,0,0,0,0,255,15,0,0,6,16,0,0,18,16,0,0,28,16,0,0,255,255,255,255,255,255,255,255,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,1,0,0,0,2,0,0,0,4,0,0,0,8,0,0,0,3,0,0,0,6,0,0,0,12,0,0,0,11,0,0,0,5,0,0,0,10,0,0,0,7,0,0,0,14,0,0,0,15,0,0,0,13,0,0,0,9,0,0,0,1,0,0,0,2,0,0,0,4,0,0,0,8,0,0,0,16,0,0,0,32,0,0,0,64,0,0,0,3,0,0,0,6,0,0,0,12,0,0,0,24,0,0,0,48,0,0,0,96,0,0,0,67,0,0,0,5,0,0,0,10,0,0,0,20,0,0,0,40,0,0,0,80,0,0,0,35,0,0,0,70,0,0,0,15,0,0,0,30,0,0,0,60,0,0,0,120,0,0,0,115,0,0,0,101,0,0,0,73,0,0,0,17,0,0,0,34,0,0,0,68,0,0,0,11,0,0,0,22,0,0,0,44,0,0,0,88,0,0,0,51,0,0,0,102,0,0,0,79,0,0,0,29,0,0,0,58,0,0,0,116,0,0,0,107,0,0,0,85,0,0,0,41,0,0,0,82,0,0,0,39,0,0,0,78,0,0,0,31,0,0,0,62,0,0,0,124,0,0,0,123,0,0,0,117,0,0,0,105,0,0,0,81,0,0,0,33,0,0,0,66,0,0,0,7,0,0,0,14,0,0,0,28,0,0,0,56,0,0,0,112,0,0,0,99,0,0,0,69,0,0,0,9,0,0,0,18,0,0,0,36,0,0,0,72,0,0,0,19,0,0,0,38,0,0,0,76,0,0,0,27,0,0,0,54,0,0,0,108,0,0,0,91,0,0,0,53,0,0,0,106,0,0,0,87,0,0,0,45,0,0,0,90,0,0,0,55,0,0,0,110,0,0,0,95,0,0,0,61,0,0,0,122,0,0,0,119,0,0,0,109,0,0,0,89,0,0,0,49,0,0,0,98,0,0,0,71,0,0,0,13,0,0,0,26,0,0,0,52,0,0,0,104,0,0,0,83,0,0,0,37,0,0,0,74,0,0,0,23,0,0,0,46,0,0,0,92,0,0,0,59,0,0,0,118,0,0,0,111,0,0,0,93,0,0,0,57,0,0,0,114,0,0,0,103,0,0,0,77,0,0,0,25,0,0,0,50,0,0,0,100,0,0,0,75,0,0,0,21,0,0,0,42,0,0,0,84,0,0,0,43,0,0,0,86,0,0,0,47,0,0,0,94,0,0,0,63,0,0,0,126,0,0,0,127,0,0,0,125,0,0,0,121,0,0,0,113,0,0,0,97,0,0,0,65,0,0,0,255,255,255,255,0,0,0,0,1,0,0,0,4,0,0,0,2,0,0,0,8,0,0,0,5,0,0,0,10,0,0,0,3,0,0,0,14,0,0,0,9,0,0,0,7,0,0,0,6,0,0,0,13,0,0,0,11,0,0,0,12,0,0,0,255,255,255,255,0,0,0,0,1,0,0,0,7,0,0,0,2,0,0,0,14,0,0,0,8,0,0,0,56,0,0,0,3,0,0,0,63,0,0,0,15,0,0,0,31,0,0,0,9,0,0,0,90,0,0,0,57,0,0,0,21,0,0,0,4,0,0,0,28,0,0,0,64,0,0,0,67,0,0,0,16,0,0,0,112,0,0,0,32,0,0,0,97,0,0,0,10,0,0,0,108,0,0,0,91,0,0,0,70,0,0,0,58,0,0,0,38,0,0,0,22,0,0,0,47,0,0,0,5,0,0,0,54,0,0,0,29,0,0,0,19,0,0,0,65,0,0,0,95,0,0,0,68,0,0,0,45,0,0,0,17,0,0,0,43,0,0,0,113,0,0,0,115,0,0,0,33,0,0,0,77,0,0,0,98,0,0,0,117,0,0,0,11,0,0,0,87,0,0,0,109,0,0,0,35,0,0,0,92,0,0,0,74,0,0,0,71,0,0,0,79,0,0,0,59,0,0,0,104,0,0,0,39,0,0,0,100,0,0,0,23,0,0,0,82,0,0,0,48,0,0,0,119,0,0,0,6,0,0,0,126,0,0,0,55,0,0,0,13,0,0,0,30,0,0,0,62,0,0,0,20,0,0,0,89,0,0,0,66,0,0,0,27,0,0,0,96,0,0,0,111,0,0,0,69,0,0,0,107,0,0,0,46,0,0,0,37,0,0,0,18,0,0,0,53,0,0,0,44,0,0,0,94,0,0,0,114,0,0,0,42,0,0,0,116,0,0,0,76,0,0,0,34,0,0,0,86,0,0,0,78,0,0,0,73,0,0,0,99,0,0,0,103,0,0,0,118,0,0,0,81,0,0,0,12,0,0,0,125,0,0,0,88,0,0,0,61,0,0,0,110,0,0,0,26,0,0,0,36,0,0,0,106,0,0,0,93,0,0,0,52,0,0,0,75,0,0,0,41,0,0,0,72,0,0,0,85,0,0,0,80,0,0,0,102,0,0,0,60,0,0,0,124,0,0,0,105,0,0,0,25,0,0,0,40,0,0,0,51,0,0,0,101,0,0,0,84,0,0,0,24,0,0,0,123,0,0,0,83,0,0,0,50,0,0,0,49,0,0,0,122,0,0,0,120,0,0,0,121,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,136,0,0,0,5,0,0,0,144,0,0,0,6,0,0,0,152,0,0,0,9,0,0,0,176,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,253,255,255,255,254,255,255,255,0,0,0,0,112,2,0,0,168,2,0,0,200,2,0,0,112,2,0,0,168,2,0,0,168,2,0,0,208,2,0,0,168,2,0,0,112,2,0,0,168,2,0,0,208,2,0,0,168,2,0,0,112,2,0,0,168,2,0,0,168,2,0,0,104,1,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,104,1,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,0,0,0,0,32,2,0,0,1,0,0,0,2,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,96,2,0,0,3,0,0,0,4,0,0,0,5,0,0,0,6,0,0,0,1,0,0,0,0,0,0,0,80,2,0,0,3,0,0,0,7,0,0,0,5,0,0,0,6,0,0,0,2,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,216,2,0,0,3,0,0,0,8,0,0,0,5,0,0,0,6,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,232,2,0,0,3,0,0,0,9,0,0,0,5,0,0,0,6,0,0,0,2,0,0,0,3,0,0,0,3,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,192,3,0,0,192,4,0,0,192,5,0,0,192,6,0,0,192,7,0,0,192,8,0,0,192,9,0,0,192,10,0,0,192,11,0,0,192,12,0,0,192,13,0,0,192,14,0,0,192,15,0,0,192,16,0,0,192,17,0,0,192,18,0,0,192,19,0,0,192,20,0,0,192,21,0,0,192,22,0,0,192,23,0,0,192,24,0,0,192,25,0,0,192,26,0,0,192,27,0,0,192,28,0,0,192,29,0,0,192,30,0,0,192,31,0,0,192,0,0,0,179,1,0,0,195,2,0,0,195,3,0,0,195,4,0,0,195,5,0,0,195,6,0,0,195,7,0,0,195,8,0,0,195,9,0,0,195,10,0,0,195,11,0,0,195,12,0,0,195,13,0,0,211,14,0,0,195,15,0,0,195,0,0,12,187,1,0,12,195,2,0,12,195,3,0,12,195,4,0,12,211,240,10,0,0,96,11,0,0,0,0,0,0,10,0,0,0,100,0,0,0,232,3,0,0,16,39,0,0,160,134,1,0,64,66,15,0,128,150,152,0,0,225,245,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,5,0,0,0,81,62,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,0,0,0,5,0,0,0,73,58,0,0,0,4,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,3,0,0,0,5,0,0,0,7,0,0,0,11,0,0,0,13,0,0,0,17,0,0,0,19,0,0,0,23,0,0,0,29,0,0,0,31,0,0,0,37,0,0,0,41,0,0,0,43,0,0,0,47,0,0,0,53,0,0,0,59,0,0,0,61,0,0,0,67,0,0,0,71,0,0,0,73,0,0,0,79,0,0,0,83,0,0,0,89,0,0,0,97,0,0,0,101,0,0,0,103,0,0,0,107,0,0,0,109,0,0,0,113,0,0,0,127,0,0,0,131,0,0,0,137,0,0,0,139,0,0,0,149,0,0,0,151,0,0,0,157,0,0,0,163,0,0,0,167,0,0,0,173,0,0,0,179,0,0,0,181,0,0,0,191,0,0,0,193,0,0,0,197,0,0,0,199,0,0,0,211,0,0,0,1,0,0,0,11,0,0,0,13,0,0,0,17,0,0,0,19,0,0,0,23,0,0,0,29,0,0,0,31,0,0,0,37,0,0,0,41,0,0,0,43,0,0,0,47,0,0,0,53,0,0,0,59,0,0,0,61,0,0,0,67,0,0,0,71,0,0,0,73,0,0,0,79,0,0,0,83,0,0,0,89,0,0,0,97,0,0,0,101,0,0,0,103,0,0,0,107,0,0,0,109,0,0,0,113,0,0,0,121,0,0,0,127,0,0,0,131,0,0,0,137,0,0,0,139,0,0,0,143,0,0,0,149,0,0,0,151,0,0,0,157,0,0,0,163,0,0,0,167,0,0,0,169,0,0,0,173,0,0,0,179,0,0,0,181,0,0,0,187,0,0,0,191,0,0,0,193,0,0,0,197,0,0,0,199,0,0,0,209,0,0,0,69,114,114,111,114,58,32,108,97,98,101,108,105,110,103,32,119,111,114,107,32,111,118,101,114,102,108,111,119,46,10,0,69,114,114,111,114,58,32,85,110,115,117,112,112,111,114,116,101,100,32,112,105,120,101,108,32,102,111,114,109,97,116,32,40,37,100,41,32,114,101,113,117,101,115,116,101,100,46,10,0,85,110,107,110,111,119,110,32,111,114,32,117,110,115,117,112,112,111,114,116,101,100,32,108,97,98,101,108,105,110,103,32,116,104,114,101,115,104,111,108,100,32,109,111,100,101,32,114,101,113,117,101,115,116,101,100,46,32,83,101,116,32,116,111,32,109,97,110,117,97,108,46,10,0,76,97,98,101,108,105,110,103,32,116,104,114,101,115,104,111,108,100,32,109,111,100,101,32,115,101,116,32,116,111,32,37,115,46,10,0,77,65,78,85,65,76,0,65,85,84,79,95,77,69,68,73,65,78,0,65,85,84,79,95,79,84,83,85,0,65,85,84,79,95,65,68,65,80,84,73,86,69,65,85,84,79,95,66,82,65,67,75,69,84,73,78,71,0,65,117,116,111,32,116,104,114,101,115,104,111,108,100,32,40,98,114,97,99,107,101,116,41,32,109,97,114,107,101,114,32,99,111,117,110,116,115,32,45,91,37,51,100,58,32,37,51,100,93,32,91,37,51,100,58,32,37,51,100,93,32,91,37,51,100,58,32,37,51,100,93,43,46,10,0,65,117,116,111,32,116,104,114,101,115,104,111,108,100,32,40,98,114,97,99,107,101,116,41,32,97,100,106,117,115,116,101,100,32,116,104,114,101,115,104,111,108,100,32,116,111,32,37,100,46,10,0,109,101,100,105,97,110,0,79,116,115,117,0,65,117,116,111,32,116,104,114,101,115,104,111,108,100,32,40,37,115,41,32,97,100,106,117,115,116,101,100,32,116,104,114,101,115,104,111,108,100,32,116,111,32,37,100,46,10,0,63,63,63,32,49,10,0,63,63,63,32,50,10,0,63,63,63,32,51,10,0,69,114,114,111,114,58,32,85,110,115,117,112,112,111,114,116,101,100,32,112,105,120,101,108,32,102,111,114,109,97,116,32,112,97,115,115,101,100,32,116,111,32,97,114,73,109,97,103,101,80,114,111,99,72,105,115,116,40,41,46,10,0,0,0,0,1,0,1,1,1,0,2,4,255,255,5,3,1,0,2,255,6,7,255,3,1,2,2,3,2,3,2,3,3,0,255,4,6,7,5,255,1,4,5,4,4,5,5,4,5,7,6,6,6,7,7,7,6,255,2,4,6,7,5,3,255,0,1,1,1,1,1,1,0,1,1,1,0,0,1,1,1,1,1,0,1,1,0,1,1,1,0,1,1,1,1,0,1,1,0,1,1,1,1,0,1,1,1,0,1,1,0,1,1,1,1,1,0,0,1,1,1,0,1,1,1,1,1,1,0,0,255,255,3,255,5,6,255,255,9,10,255,12,255,255,15,255,17,18,255,20,255,255,23,24,255,255,27,255,29,30,255,255,1,2,255,4,255,255,7,8,255,255,11,255,13,14,255,16,255,255,19,255,21,22,255,255,25,26,255,28,255,255,31,69,114,114,111,114,58,32,117,110,115,117,112,112,111,114,116,101,100,32,112,105,120,101,108,32,102,111,114,109,97,116,46,10,0,69,114,114,111,114,58,32,78,85,76,76,32,112,97,116,116,72,97,110,100,108,101,46,10,0,69,114,114,111,114,58,32,99,97,110,39,116,32,108,111,97,100,32,112,97,116,116,101,114,110,32,102,114,111,109,32,78,85,76,76,32,98,117,102,102,101,114,46,10,0,69,114,114,111,114,58,32,111,117,116,32,111,102,32,109,101,109,111,114,121,46,10,0,32,9,10,13,0,80,97,116,116,101,114,110,32,68,97,116,97,32,114,101,97,100,32,101,114,114,111,114,33,33,10,0,69,114,114,111,114,32,111,112,101,110,105,110,103,32,112,97,116,116,101,114,110,32,102,105,108,101,32,39,37,115,39,32,102,111,114,32,114,101,97,100,105,110,103,46,10,0,69,114,114,111,114,32,114,101,97,100,105,110,103,32,112,97,116,116,101,114,110,32,102,105,108,101,32,39,37,115,39,46,10,0,114,98,0,69,114,114,111,114,32,40,37,100,41,58,32,117,110,97,98,108,101,32,116,111,32,111,112,101,110,32,99,97,109,101,114,97,32,112,97,114,97,109,101,116,101,114,115,32,102,105,108,101,32,34,37,115,34,32,102,111,114,32,114,101,97,100,105,110,103,46,10,0,69,114,114,111,114,32,40,37,100,41,58,32,117,110,97,98,108,101,32,116,111,32,100,101,116,101,114,109,105,110,101,32,102,105,108,101,32,108,101,110,103,116,104,46,0,69,114,114,111,114,58,32,115,117,112,112,108,105,101,100,32,102,105,108,101,32,100,111,101,115,32,110,111,116,32,97,112,112,101,97,114,32,116,111,32,98,101,32,97,110,32,65,82,84,111,111,108,75,105,116,32,99,97,109,101,114,97,32,112,97,114,97,109,101,116,101,114,32,102,105,108,101,46,10,0,69,114,114,111,114,32,40,37,100,41,58,32,117,110,97,98,108,101,32,116,111,32,114,101,97,100,32,102,114,111,109,32,102,105,108,101,46,0,69,114,114,111,114,58,32,105,99,112,71,101,116,74,95,85,95,88,99,0,69,114,114,111,114,58,32,109,97,108,108,111,99,10,0,69,114,114,111,114,32,49,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,50,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,51,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,52,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,53,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,54,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,55,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,114,0,69,114,114,111,114,58,32,117,110,97,98,108,101,32,116,111,32,111,112,101,110,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,46,10,0,37,115,37,115,10,0,0,37,100,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,70,105,114,115,116,32,108,105,110,101,32,109,117,115,116,32,98,101,32,110,117,109,98,101,114,32,111,102,32,109,97,114,107,101,114,32,99,111,110,102,105,103,115,32,116,111,32,114,101,97,100,46,10,0,79,117,116,32,111,102,32,109,101,109,111,114,121,33,33,10,0,37,108,108,117,37,99,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,112,97,116,116,101,114,110,32,39,37,115,39,32,115,112,101,99,105,102,105,101,100,32,105,110,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,117,114,97,116,105,111,110,32,119,104,105,108,101,32,105,110,32,98,97,114,99,111,100,101,45,111,110,108,121,32,109,111,100,101,46,10,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,85,110,97,98,108,101,32,116,111,32,100,101,116,101,114,109,105,110,101,32,100,105,114,101,99,116,111,114,121,32,110,97,109,101,46,10,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,85,110,97,98,108,101,32,116,111,32,108,111,97,100,32,112,97,116,116,101,114,110,32,39,37,115,39,46,10,0,37,108,102,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,44,32,109,97,114,107,101,114,32,100,101,102,105,110,105,116,105,111,110,32,37,51,100,58,32,70,105,114,115,116,32,108,105,110,101,32,109,117,115,116,32,98,101,32,112,97,116,116,101,114,110,32,119,105,100,116,104,46,10,0,37,108,102,32,37,108,102,32,37,108,102,32,37,108,102,0,37,102,32,37,102,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,44,32,109,97,114,107,101,114,32,100,101,102,105,110,105,116,105,111,110,32,37,51,100,58,32,76,105,110,101,115,32,50,32,45,32,52,32,109,117,115,116,32,98,101,32,109,97,114,107,101,114,32,116,114,97,110,115,102,111,114,109,46,10,0,97,114,103,108,67,97,109,101,114,97,70,114,117,115,116,117,109,40,41,58,32,97,114,80,97,114,97,109,68,101,99,111,109,112,77,97,116,40,41,32,105,110,100,105,99,97,116,101,100,32,112,97,114,97,109,101,116,101,114,32,101,114,114,111,114,46,10,0,108,111,97,100,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,32,108,111,97,100,105,110,103,32,112,97,114,97,109,101,116,101,114,32,102,105,108,101,32,37,115,32,102,111,114,32,99,97,109,101,114,97,46,10,0,42,42,42,32,67,97,109,101,114,97,32,80,97,114,97,109,101,116,101,114,32,114,101,115,105,122,101,100,32,102,114,111,109,32,37,100,44,32,37,100,46,32,42,42,42,10,0,115,101,116,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,58,32,97,114,80,97,114,97,109,76,84,67,114,101,97,116,101,46,10,0,115,101,116,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,58,32,97,114,67,114,101,97,116,101,72,97,110,100,108,101,46,10,0,115,101,116,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,32,99,114,101,97,116,105,110,103,32,51,68,32,104,97,110,100,108,101,0,108,111,97,100,77,97,114,107,101,114,40,41,58,32,69,114,114,111,114,32,108,111,97,100,105,110,103,32,112,97,116,116,101,114,110,32,102,105,108,101,32,37,115,46,10,0,65,82,84,111,111,108,75,105,116,74,83,40,41,58,32,85,110,97,98,108,101,32,116,111,32,115,101,116,32,117,112,32,65,82,32,109,97,114,107,101,114,46,10,0,99,111,110,102,105,103,32,100,97,116,97,32,108,111,97,100,32,101,114,114,111,114,32,33,33,10,0,65,82,84,111,111,108,75,105,116,74,83,40,41,58,32,85,110,97,98,108,101,32,116,111,32,115,101,116,32,117,112,32,65,82,32,109,117,108,116,105,109,97,114,107,101,114,46,10,0,80,97,116,116,101,114,110,32,100,101,116,101,99,116,105,111,110,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,46,10,0,80,97,116,116,101,114,110,32,114,97,116,105,111,32,115,105,122,101,32,115,101,116,32,116,111,32,37,102,46,10,0,76,97,98,101,108,105,110,103,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,10,0,84,104,114,101,115,104,111,108,100,32,115,101,116,32,116,111,32,37,100,10,0,84,104,114,101,115,104,111,108,100,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,10,0,111,110,46,0,111,102,102,46,0,68,101,98,117,103,32,109,111,100,101,32,115,101,116,32,116,111,32,37,115,10,0,73,109,97,103,101,32,112,114,111,99,46,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,46,10,0,123,32,105,102,32,40,33,97,114,116,111,111,108,107,105,116,91,34,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,73,110,102,111,34,93,41,32,123,32,97,114,116,111,111,108,107,105,116,91,34,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,73,110,102,111,34,93,32,61,32,40,123,125,41,59,32,125,32,118,97,114,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,32,61,32,97,114,116,111,111,108,107,105,116,91,34,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,73,110,102,111,34,93,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,118,105,115,105,98,108,101,39,93,32,61,32,36,48,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,112,97,116,116,73,100,39,93,32,61,32,36,49,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,112,97,116,116,84,121,112,101,39,93,32,61,32,36,50,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,119,105,100,116,104,39,93,32,61,32,36,51,59,32,125,0,123,32,118,97,114,32,36,97,32,61,32,97,114,103,117,109,101,110,116,115,59,32,118,97,114,32,105,32,61,32,49,50,59,32,105,102,32,40,33,97,114,116,111,111,108,107,105,116,91,34,109,97,114,107,101,114,73,110,102,111,34,93,41,32,123,32,97,114,116,111,111,108,107,105,116,91,34,109,97,114,107,101,114,73,110,102,111,34,93,32,61,32,40,123,32,112,111,115,58,32,91,48,44,48,93,44,32,108,105,110,101,58,32,91,91,48,44,48,44,48,93,44,32,91,48,44,48,44,48,93,44,32,91,48,44,48,44,48,93,44,32,91,48,44,48,44,48,93,93,44,32,118,101,114,116,101,120,58,32,91,91,48,44,48,93,44,32,91,48,44,48,93,44,32,91,48,44,48,93,44,32,91,48,44,48,93,93,32,125,41,59,32,125,32,118,97,114,32,109,97,114,107,101,114,73,110,102,111,32,61,32,97,114,116,111,111,108,107,105,116,91,34,109,97,114,107,101,114,73,110,102,111,34,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,97,114,101,97,34,93,32,61,32,36,48,59,32,109,97,114,107,101,114,73,110,102,111,91,34,105,100,34,93,32,61,32,36,49,59,32,109,97,114,107,101,114,73,110,102,111,91,34,105,100,80,97,116,116,34,93,32,61,32,36,50,59,32,109,97,114,107,101,114,73,110,102,111,91,34,105,100,77,97,116,114,105,120,34,93,32,61,32,36,51,59,32,109,97,114,107,101,114,73,110,102,111,91,34,100,105,114,34,93,32,61,32,36,52,59,32,109,97,114,107,101,114,73,110,102,111,91,34,100,105,114,80,97,116,116,34,93,32,61,32,36,53,59,32,109,97,114,107,101,114,73,110,102,111,91,34,100,105,114,77,97,116,114,105,120,34,93,32,61,32,36,54,59,32,109,97,114,107,101,114,73,110,102,111,91,34,99,102,34,93,32,61,32,36,55,59,32,109,97,114,107,101,114,73,110,102,111,91,34,99,102,80,97,116,116,34,93,32,61,32,36,56,59,32,109,97,114,107,101,114,73,110,102,111,91,34,99,102,77,97,116,114,105,120,34,93,32,61,32,36,57,59,32,109,97,114,107,101,114,73,110,102,111,91,34,112,111,115,34,93,91,48,93,32,61,32,36,49,48,59,32,109,97,114,107,101,114,73,110,102,111,91,34,112,111,115,34,93,91,49,93,32,61,32,36,49,49,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,48,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,48,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,48,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,49,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,49,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,49,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,50,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,50,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,50,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,51,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,51,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,51,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,48,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,48,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,49,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,49,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,50,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,50,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,51,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,51,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,101,114,114,111,114,67,111,114,114,101,99,116,101,100,34,93,32,61,32,36,97,91,105,43,43,93,59,32,125,0,115,101,116,117,112,40,41,58,32,69,114,114,111,114,58,32,97,114,80,97,116,116,67,114,101,97,116,101,72,97,110,100,108,101,46,10,0,65,108,108,111,99,97,116,101,100,32,118,105,100,101,111,70,114,97,109,101,83,105,122,101,32,37,100,10,0,123,32,105,102,32,40,33,97,114,116,111,111,108,107,105,116,91,34,102,114,97,109,101,77,97,108,108,111,99,34,93,41,32,123,32,97,114,116,111,111,108,107,105,116,91,34,102,114,97,109,101,77,97,108,108,111,99,34,93,32,61,32,40,123,125,41,59,32,125,32,118,97,114,32,102,114,97,109,101,77,97,108,108,111,99,32,61,32,97,114,116,111,111,108,107,105,116,91,34,102,114,97,109,101,77,97,108,108,111,99,34,93,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,102,114,97,109,101,112,111,105,110,116,101,114,34,93,32,61,32,36,49,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,102,114,97,109,101,115,105,122,101,34,93,32,61,32,36,50,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,99,97,109,101,114,97,34,93,32,61,32,36,51,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,116,114,97,110,115,102,111,114,109,34,93,32,61,32,36,52,59,32,125,0,115,101,116,117,112,0,116,101,97,114,100,111,119,110,0,95,97,100,100,77,97,114,107,101,114,0,95,97,100,100,77,117,108,116,105,77,97,114,107,101,114,0,103,101,116,77,117,108,116,105,77,97,114,107,101,114,78,117,109,0,103,101,116,77,117,108,116,105,77,97,114,107,101,114,67,111,117,110,116,0,95,108,111,97,100,67,97,109,101,114,97,0,115,101,116,77,97,114,107,101,114,73,110,102,111,68,105,114,0,115,101,116,77,97,114,107,101,114,73,110,102,111,86,101,114,116,101,120,0,103,101,116,84,114,97,110,115,77,97,116,83,113,117,97,114,101,0,103,101,116,84,114,97,110,115,77,97,116,83,113,117,97,114,101,67,111,110,116,0,103,101,116,84,114,97,110,115,77,97,116,77,117,108,116,105,83,113,117,97,114,101,0,103,101,116,84,114,97,110,115,77,97,116,77,117,108,116,105,83,113,117,97,114,101,82,111,98,117,115,116,0,100,101,116,101,99,116,77,97,114,107,101,114,0,103,101,116,77,97,114,107,101,114,78,117,109,0,103,101,116,77,117,108,116,105,69,97,99,104,77,97,114,107,101,114,0,103,101,116,77,97,114,107,101,114,0,115,101,116,68,101,98,117,103,77,111,100,101,0,103,101,116,68,101,98,117,103,77,111,100,101,0,103,101,116,80,114,111,99,101,115,115,105,110,103,73,109,97,103,101,0,115,101,116,76,111,103,76,101,118,101,108,0,103,101,116,76,111,103,76,101,118,101,108,0,115,101,116,80,114,111,106,101,99,116,105,111,110,78,101,97,114,80,108,97,110,101,0,103,101,116,80,114,111,106,101,99,116,105,111,110,78,101,97,114,80,108,97,110,101,0,115,101,116,80,114,111,106,101,99,116,105,111,110,70,97,114,80,108,97,110,101,0,103,101,116,80,114,111,106,101,99,116,105,111,110,70,97,114,80,108,97,110,101,0,115,101,116,84,104,114,101,115,104,111,108,100,77,111,100,101,0,103,101,116,84,104,114,101,115,104,111,108,100,77,111,100,101,0,115,101,116,84,104,114,101,115,104,111,108,100,0,103,101,116,84,104,114,101,115,104,111,108,100,0,115,101,116,80,97,116,116,101,114,110,68,101,116,101,99,116,105,111,110,77,111,100,101,0,103,101,116,80,97,116,116,101,114,110,68,101,116,101,99,116,105,111,110,77,111,100,101,0,115,101,116,80,97,116,116,82,97,116,105,111,0,103,101,116,80,97,116,116,82,97,116,105,111,0,115,101,116,77,97,116,114,105,120,67,111,100,101,84,121,112,101,0,103,101,116,77,97,116,114,105,120,67,111,100,101,84,121,112,101,0,115,101,116,76,97,98,101,108,105,110,103,77,111,100,101,0,103,101,116,76,97,98,101,108,105,110,103,77,111,100,101,0,115,101,116,73,109,97,103,101,80,114,111,99,77,111,100,101,0,103,101,116,73,109,97,103,101,80,114,111,99,77,111,100,101,0,69,82,82,79,82,95,65,82,67,79,78,84,82,79,76,76,69,82,95,78,79,84,95,70,79,85,78,68,0,69,82,82,79,82,95,77,85,76,84,73,77,65,82,75,69,82,95,78,79,84,95,70,79,85,78,68,0,69,82,82,79,82,95,77,65,82,75,69,82,95,73,78,68,69,88,95,79,85,84,95,79,70,95,66,79,85,78,68,83,0,65,82,95,68,69,66,85,71,95,68,73,83,65,66,76,69,0,65,82,95,68,69,66,85,71,95,69,78,65,66,76,69,0,65,82,95,68,69,70,65,85,76,84,95,68,69,66,85,71,95,77,79,68,69,0,65,82,95,76,65,66,69,76,73,78,71,95,87,72,73,84,69,95,82,69,71,73,79,78,0,65,82,95,76,65,66,69,76,73,78,71,95,66,76,65,67,75,95,82,69,71,73,79,78,0,65,82,95,68,69,70,65,85,76,84,95,76,65,66,69,76,73,78,71,95,77,79,68,69,0,65,82,95,68,69,70,65,85,76,84,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,0,65,82,95,73,77,65,71,69,95,80,82,79,67,95,70,82,65,77,69,95,73,77,65,71,69,0,65,82,95,73,77,65,71,69,95,80,82,79,67,95,70,73,69,76,68,95,73,77,65,71,69,0,65,82,95,68,69,70,65,85,76,84,95,73,77,65,71,69,95,80,82,79,67,95,77,79,68,69,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,67,79,76,79,82,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,77,79,78,79,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,68,69,84,69,67,84,73,79,78,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,67,79,76,79,82,95,65,78,68,95,77,65,84,82,73,88,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,77,79,78,79,95,65,78,68,95,77,65,84,82,73,88,0,65,82,95,68,69,70,65,85,76,84,95,80,65,84,84,69,82,78,95,68,69,84,69,67,84,73,79,78,95,77,79,68,69,0,65,82,95,85,83,69,95,84,82,65,67,75,73,78,71,95,72,73,83,84,79,82,89,0,65,82,95,78,79,85,83,69,95,84,82,65,67,75,73,78,71,95,72,73,83,84,79,82,89,0,65,82,95,85,83,69,95,84,82,65,67,75,73,78,71,95,72,73,83,84,79,82,89,95,86,50,0,65,82,95,68,69,70,65,85,76,84,95,77,65,82,75,69,82,95,69,88,84,82,65,67,84,73,79,78,95,77,79,68,69,0,65,82,95,77,65,88,95,76,79,79,80,95,67,79,85,78,84,0,65,82,95,76,79,79,80,95,66,82,69,65,75,95,84,72,82,69,83,72,0,65,82,95,76,79,71,95,76,69,86,69,76,95,68,69,66,85,71,0,65,82,95,76,79,71,95,76,69,86,69,76,95,73,78,70,79,0,65,82,95,76,79,71,95,76,69,86,69,76,95,87,65,82,78,0,65,82,95,76,79,71,95,76,69,86,69,76,95,69,82,82,79,82,0,65,82,95,76,79,71,95,76,69,86,69,76,95,82,69,76,95,73,78,70,79,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,51,120,51,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,51,120,51,95,72,65,77,77,73,78,71,54,51,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,51,120,51,95,80,65,82,73,84,89,54,53,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,52,120,52,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,52,120,52,95,66,67,72,95,49,51,95,57,95,51,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,52,120,52,95,66,67,72,95,49,51,95,53,95,53,0,65,82,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,77,65,78,85,65,76,0,65,82,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,65,85,84,79,95,77,69,68,73,65,78,0,65,82,95,76,65],"i8",ALLOC_NONE,Runtime.GLOBAL_BASE),allocate([66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,65,85,84,79,95,79,84,83,85,0,65,82,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,65,85,84,79,95,65,68,65,80,84,73,86,69,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,78,79,78,69,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,80,65,84,84,69,82,78,95,69,88,84,82,65,67,84,73,79,78,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,71,69,78,69,82,73,67,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,67,79,78,84,82,65,83,84,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,66,65,82,67,79,68,69,95,78,79,84,95,70,79,85,78,68,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,66,65,82,67,79,68,69,95,69,68,67,95,70,65,73,76,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,67,79,78,70,73,68,69,78,67,69,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,80,79,83,69,95,69,82,82,79,82,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,80,79,83,69,95,69,82,82,79,82,95,77,85,76,84,73,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,72,69,85,82,73,83,84,73,67,95,84,82,79,85,66,76,69,83,79,77,69,95,77,65,84,82,73,88,95,67,79,68,69,83,0,118,105,105,102,0,118,105,105,105,0,100,105,105,0,118,105,105,100,0,105,105,0,118,105,105,0,105,105,105,0,78,83,116,51,95,95,49,49,50,98,97,115,105,99,95,115,116,114,105,110,103,73,99,78,83,95,49,49,99,104,97,114,95,116,114,97,105,116,115,73,99,69,69,78,83,95,57,97,108,108,111,99,97,116,111,114,73,99,69,69,69,69,0,78,83,116,51,95,95,49,50,49,95,95,98,97,115,105,99,95,115,116,114,105,110,103,95,99,111,109,109,111,110,73,76,98,49,69,69,69,0,105,105,105,105,0,105,105,105,105,105,0,118,111,105,100,0,98,111,111,108,0,99,104,97,114,0,115,105,103,110,101,100,32,99,104,97,114,0,117,110,115,105,103,110,101,100,32,99,104,97,114,0,115,104,111,114,116,0,117,110,115,105,103,110,101,100,32,115,104,111,114,116,0,105,110,116,0,117,110,115,105,103,110,101,100,32,105,110,116,0,108,111,110,103,0,117,110,115,105,103,110,101,100,32,108,111,110,103,0,102,108,111,97,116,0,100,111,117,98,108,101,0,115,116,100,58,58,115,116,114,105,110,103,0,115,116,100,58,58,98,97,115,105,99,95,115,116,114,105,110,103,60,117,110,115,105,103,110,101,100,32,99,104,97,114,62,0,115,116,100,58,58,119,115,116,114,105,110,103,0,101,109,115,99,114,105,112,116,101,110,58,58,118,97,108,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,99,104,97,114,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,115,105,103,110,101,100,32,99,104,97,114,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,99,104,97,114,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,115,104,111,114,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,115,104,111,114,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,105,110,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,108,111,110,103,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,108,111,110,103,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,56,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,105,110,116,56,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,49,54,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,105,110,116,49,54,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,51,50,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,105,110,116,51,50,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,102,108,111,97,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,100,111,117,98,108,101,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,108,111,110,103,32,100,111,117,98,108,101,62,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,101,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,100,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,102,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,109,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,108,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,106,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,105,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,116,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,115,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,104,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,97,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,99,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,51,118,97,108,69,0,78,83,116,51,95,95,49,49,50,98,97,115,105,99,95,115,116,114,105,110,103,73,119,78,83,95,49,49,99,104,97,114,95,116,114,97,105,116,115,73,119,69,69,78,83,95,57,97,108,108,111,99,97,116,111,114,73,119,69,69,69,69,0,78,83,116,51,95,95,49,49,50,98,97,115,105,99,95,115,116,114,105,110,103,73,104,78,83,95,49,49,99,104,97,114,95,116,114,97,105,116,115,73,104,69,69,78,83,95,57,97,108,108,111,99,97,116,111,114,73,104,69,69,69,69,0,83,116,57,98,97,100,95,97,108,108,111,99,0,83,116,57,101,120,99,101,112,116,105,111,110,0,83,116,57,116,121,112,101,95,105,110,102,111,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,54,95,95,115,104,105,109,95,116,121,112,101,95,105,110,102,111,69,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,55,95,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,51,95,95,102,117,110,100,97,109,101,110,116,97,108,95,116,121,112,101,95,105,110,102,111,69,0,118,0,98,0,99,0,104,0,97,0,115,0,116,0,105,0,106,0,108,0,109,0,102,0,100,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,48,95,95,115,105,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,49,95,95,118,109,105,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,33,34,118,101,99,116,111,114,32,108,101,110,103,116,104,95,101,114,114,111,114,34,0,47,85,115,101,114,115,47,106,101,114,111,109,101,101,116,105,101,110,110,101,47,119,111,114,107,47,101,109,115,100,107,95,112,111,114,116,97,98,108,101,47,101,109,115,99,114,105,112,116,101,110,47,49,46,51,53,46,48,47,115,121,115,116,101,109,47,105,110,99,108,117,100,101,47,108,105,98,99,120,120,47,118,101,99,116,111,114,0,95,95,116,104,114,111,119,95,108,101,110,103,116,104,95,101,114,114,111,114,0,115,116,100,58,58,98,97,100,95,97,108,108,111,99,0,33,34,98,97,115,105,99,95,115,116,114,105,110,103,32,108,101,110,103,116,104,95,101,114,114,111,114,34,0,47,85,115,101,114,115,47,106,101,114,111,109,101,101,116,105,101,110,110,101,47,119,111,114,107,47,101,109,115,100,107,95,112,111,114,116,97,98,108,101,47,101,109,115,99,114,105,112,116,101,110,47,49,46,51,53,46,48,47,115,121,115,116,101,109,47,105,110,99,108,117,100,101,47,108,105,98,99,120,120,47,115,116,114,105,110,103,0,84,33,34,25,13,1,2,3,17,75,28,12,16,4,11,29,18,30,39,104,110,111,112,113,98,32,5,6,15,19,20,21,26,8,22,7,40,36,23,24,9,10,14,27,31,37,35,131,130,125,38,42,43,60,61,62,63,67,71,74,77,88,89,90,91,92,93,94,95,96,97,99,100,101,102,103,105,106,107,108,114,115,116,121,122,123,124,0,73,108,108,101,103,97,108,32,98,121,116,101,32,115,101,113,117,101,110,99,101,0,68,111,109,97,105,110,32,101,114,114,111,114,0,82,101,115,117,108,116,32,110,111,116,32,114,101,112,114,101,115,101,110,116,97,98,108,101,0,78,111,116,32,97,32,116,116,121,0,80,101,114,109,105,115,115,105,111,110,32,100,101,110,105,101,100,0,79,112,101,114,97,116,105,111,110,32,110,111,116,32,112,101,114,109,105,116,116,101,100,0,78,111,32,115,117,99,104,32,102,105,108,101,32,111,114,32,100,105,114,101,99,116,111,114,121,0,78,111,32,115,117,99,104,32,112,114,111,99,101,115,115,0,70,105,108,101,32,101,120,105,115,116,115,0,86,97,108,117,101,32,116,111,111,32,108,97,114,103,101,32,102,111,114,32,100,97,116,97,32,116,121,112,101,0,78,111,32,115,112,97,99,101,32,108,101,102,116,32,111,110,32,100,101,118,105,99,101,0,79,117,116,32,111,102,32,109,101,109,111,114,121,0,82,101,115,111,117,114,99,101,32,98,117,115,121,0,73,110,116,101,114,114,117,112,116,101,100,32,115,121,115,116,101,109,32,99,97,108,108,0,82,101,115,111,117,114,99,101,32,116,101,109,112,111,114,97,114,105,108,121,32,117,110,97,118,97,105,108,97,98,108,101,0,73,110,118,97,108,105,100,32,115,101,101,107,0,67,114,111,115,115,45,100,101,118,105,99,101,32,108,105,110,107,0,82,101,97,100,45,111,110,108,121,32,102,105,108,101,32,115,121,115,116,101,109,0,68,105,114,101,99,116,111,114,121,32,110,111,116,32,101,109,112,116,121,0,67,111,110,110,101,99,116,105,111,110,32,114,101,115,101,116,32,98,121,32,112,101,101,114,0,79,112,101,114,97,116,105,111,110,32,116,105,109,101,100,32,111,117,116,0,67,111,110,110,101,99,116,105,111,110,32,114,101,102,117,115,101,100,0,72,111,115,116,32,105,115,32,100,111,119,110,0,72,111,115,116,32,105,115,32,117,110,114,101,97,99,104,97,98,108,101,0,65,100,100,114,101,115,115,32,105,110,32,117,115,101,0,66,114,111,107,101,110,32,112,105,112,101,0,73,47,79,32,101,114,114,111,114,0,78,111,32,115,117,99,104,32,100,101,118,105,99,101,32,111,114,32,97,100,100,114,101,115,115,0,66,108,111,99,107,32,100,101,118,105,99,101,32,114,101,113,117,105,114,101,100,0,78,111,32,115,117,99,104,32,100,101,118,105,99,101,0,78,111,116,32,97,32,100,105,114,101,99,116,111,114,121,0,73,115,32,97,32,100,105,114,101,99,116,111,114,121,0,84,101,120,116,32,102,105,108,101,32,98,117,115,121,0,69,120,101,99,32,102,111,114,109,97,116,32,101,114,114,111,114,0,73,110,118,97,108,105,100,32,97,114,103,117,109,101,110,116,0,65,114,103,117,109,101,110,116,32,108,105,115,116,32,116,111,111,32,108,111,110,103,0,83,121,109,98,111,108,105,99,32,108,105,110,107,32,108,111,111,112,0,70,105,108,101,110,97,109,101,32,116,111,111,32,108,111,110,103,0,84,111,111,32,109,97,110,121,32,111,112,101,110,32,102,105,108,101,115,32,105,110,32,115,121,115,116,101,109,0,78,111,32,102,105,108,101,32,100,101,115,99,114,105,112,116,111,114,115,32,97,118,97,105,108,97,98,108,101,0,66,97,100,32,102,105,108,101,32,100,101,115,99,114,105,112,116,111,114,0,78,111,32,99,104,105,108,100,32,112,114,111,99,101,115,115,0,66,97,100,32,97,100,100,114,101,115,115,0,70,105,108,101,32,116,111,111,32,108,97,114,103,101,0,84,111,111,32,109,97,110,121,32,108,105,110,107,115,0,78,111,32,108,111,99,107,115,32,97,118,97,105,108,97,98,108,101,0,82,101,115,111,117,114,99,101,32,100,101,97,100,108,111,99,107,32,119,111,117,108,100,32,111,99,99,117,114,0,83,116,97,116,101,32,110,111,116,32,114,101,99,111,118,101,114,97,98,108,101,0,80,114,101,118,105,111,117,115,32,111,119,110,101,114,32,100,105,101,100,0,79,112,101,114,97,116,105,111,110,32,99,97,110,99,101,108,101,100,0,70,117,110,99,116,105,111,110,32,110,111,116,32,105,109,112,108,101,109,101,110,116,101,100,0,78,111,32,109,101,115,115,97,103,101,32,111,102,32,100,101,115,105,114,101,100,32,116,121,112,101,0,73,100,101,110,116,105,102,105,101,114,32,114,101,109,111,118,101,100,0,68,101,118,105,99,101,32,110,111,116,32,97,32,115,116,114,101,97,109,0,78,111,32,100,97,116,97,32,97,118,97,105,108,97,98,108,101,0,68,101,118,105,99,101,32,116,105,109,101,111,117,116,0,79,117,116,32,111,102,32,115,116,114,101,97,109,115,32,114,101,115,111,117,114,99,101,115,0,76,105,110,107,32,104,97,115,32,98,101,101,110,32,115,101,118,101,114,101,100,0,80,114,111,116,111,99,111,108,32,101,114,114,111,114,0,66,97,100,32,109,101,115,115,97,103,101,0,70,105,108,101,32,100,101,115,99,114,105,112,116,111,114,32,105,110,32,98,97,100,32,115,116,97,116,101,0,78,111,116,32,97,32,115,111,99,107,101,116,0,68,101,115,116,105,110,97,116,105,111,110,32,97,100,100,114,101,115,115,32,114,101,113,117,105,114,101,100,0,77,101,115,115,97,103,101,32,116,111,111,32,108,97,114,103,101,0,80,114,111,116,111,99,111,108,32,119,114,111,110,103,32,116,121,112,101,32,102,111,114,32,115,111,99,107,101,116,0,80,114,111,116,111,99,111,108,32,110,111,116,32,97,118,97,105,108,97,98,108,101,0,80,114,111,116,111,99,111,108,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,83,111,99,107,101,116,32,116,121,112,101,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,78,111,116,32,115,117,112,112,111,114,116,101,100,0,80,114,111,116,111,99,111,108,32,102,97,109,105,108,121,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,65,100,100,114,101,115,115,32,102,97,109,105,108,121,32,110,111,116,32,115,117,112,112,111,114,116,101,100,32,98,121,32,112,114,111,116,111,99,111,108,0,65,100,100,114,101,115,115,32,110,111,116,32,97,118,97,105,108,97,98,108,101,0,78,101,116,119,111,114,107,32,105,115,32,100,111,119,110,0,78,101,116,119,111,114,107,32,117,110,114,101,97,99,104,97,98,108,101,0,67,111,110,110,101,99,116,105,111,110,32,114,101,115,101,116,32,98,121,32,110,101,116,119,111,114,107,0,67,111,110,110,101,99,116,105,111,110,32,97,98,111,114,116,101,100,0,78,111,32,98,117,102,102,101,114,32,115,112,97,99,101,32,97,118,97,105,108,97,98,108,101,0,83,111,99,107,101,116,32,105,115,32,99,111,110,110,101,99,116,101,100,0,83,111,99,107,101,116,32,110,111,116,32,99,111,110,110,101,99,116,101,100,0,67,97,110,110,111,116,32,115,101,110,100,32,97,102,116,101,114,32,115,111,99,107,101,116,32,115,104,117,116,100,111,119,110,0,79,112,101,114,97,116,105,111,110,32,97,108,114,101,97,100,121,32,105,110,32,112,114,111,103,114,101,115,115,0,79,112,101,114,97,116,105,111,110,32,105,110,32,112,114,111,103,114,101,115,115,0,83,116,97,108,101,32,102,105,108,101,32,104,97,110,100,108,101,0,82,101,109,111,116,101,32,73,47,79,32,101,114,114,111,114,0,81,117,111,116,97,32,101,120,99,101,101,100,101,100,0,78,111,32,109,101,100,105,117,109,32,102,111,117,110,100,0,87,114,111,110,103,32,109,101,100,105,117,109,32,116,121,112,101,0,78,111,32,101,114,114,111,114,32,105,110,102,111,114,109,97,116,105,111,110,0,0,105,110,102,105,110,105,116,121,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,255,255,255,255,255,255,255,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,255,255,255,255,255,255,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,4,7,3,6,5,0,114,119,97],"i8",ALLOC_NONE,Runtime.GLOBAL_BASE+10240),allocate([17,0,10,0,17,17,17,0,0,0,0,5,0,0,0,0,0,0,9,0,0,0,0,11,0,0,0,0,0,0,0,0,17,0,15,10,17,17,17,3,10,7,0,1,19,9,11,11,0,0,9,6,11,0,0,11,0,6,17,0,0,0,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,0,17,0,10,10,17,17,17,0,10,0,0,2,0,9,11,0,0,0,9,0,11,0,0,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,12,0,0,0,0,9,12,0,0,0,0,0,12,0,0,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,13,0,0,0,4,13,0,0,0,0,9,14,0,0,0,0,0,14,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,0,0,0,0,15,0,0,0,0,15,0,0,0,0,9,16,0,0,0,0,0,16,0,0,16,0,0,18,0,0,0,18,18,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,0,0,0,18,18,18,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,0,0,0,0,10,0,0,0,0,10,0,0,0,0,9,11,0,0,0,0,0,11,0,0,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,12,0,0,0,0,9,12,0,0,0,0,0,12,0,0,12,0,0,48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,45,43,32,32,32,48,88,48,120,0,40,110,117,108,108,41,0,45,48,88,43,48,88,32,48,88,45,48,120,43,48,120,32,48,120,0,105,110,102,0,73,78,70,0,110,97,110,0,78,65,78,0,46,0],"i8",ALLOC_NONE,Runtime.GLOBAL_BASE+15945);var tempDoublePtr=Runtime.alignMemory(allocate(12,"i8",ALLOC_STATIC),8);assert(tempDoublePtr%8==0);function copyTempFloat(x){HEAP8[tempDoublePtr]=HEAP8[x],HEAP8[tempDoublePtr+1]=HEAP8[x+1],HEAP8[tempDoublePtr+2]=HEAP8[x+2],HEAP8[tempDoublePtr+3]=HEAP8[x+3]}function copyTempDouble(x){HEAP8[tempDoublePtr]=HEAP8[x],HEAP8[tempDoublePtr+1]=HEAP8[x+1],HEAP8[tempDoublePtr+2]=HEAP8[x+2],HEAP8[tempDoublePtr+3]=HEAP8[x+3],HEAP8[tempDoublePtr+4]=HEAP8[x+4],HEAP8[tempDoublePtr+5]=HEAP8[x+5],HEAP8[tempDoublePtr+6]=HEAP8[x+6],HEAP8[tempDoublePtr+7]=HEAP8[x+7]}function _atexit(x,T){__ATEXIT__.unshift({func:x,arg:T})}function ___cxa_atexit(){return _atexit.apply(null,arguments)}Module._i64Subtract=_i64Subtract;function ___assert_fail(x,T,O,M){throw ABORT=!0,"Assertion failed: "+Pointer_stringify(x)+", at: "+[T?Pointer_stringify(T):"unknown filename",O,M?Pointer_stringify(M):"unknown function"]+" at "+stackTrace()}function embind_init_charCodes(){for(var x=new Array(256),T=0;T<256;++T)x[T]=String.fromCharCode(T);embind_charCodes=x}var embind_charCodes=void 0;function readLatin1String(x){for(var T="",O=x;HEAPU8[O];)T+=embind_charCodes[HEAPU8[O++]];return T}var awaitingDependencies={},registeredTypes={},typeDependencies={},char_0=48,char_9=57;function makeLegalFunctionName(x){if(x===void 0)return"_unknown";x=x.replace(/[^a-zA-Z0-9_]/g,"$");var T=x.charCodeAt(0);return T>=char_0&&T<=char_9?"_"+x:x}function createNamedFunction(x,T){return x=makeLegalFunctionName(x),new Function("body","return function "+x+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(T)}function extendError(x,T){var O=createNamedFunction(T,function(M){this.name=T,this.message=M;var E=new Error(M).stack;E!==void 0&&(this.stack=this.toString()+`
`+E.replace(/^Error(:[^\n]*)?\n/,""))});return O.prototype=Object.create(x.prototype),O.prototype.constructor=O,O.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},O}var BindingError=void 0;function throwBindingError(x){throw new BindingError(x)}var InternalError=void 0;function throwInternalError(x){throw new InternalError(x)}function whenDependentTypesAreResolved(x,T,O){x.forEach(function(N){typeDependencies[N]=T});function M(N){var Q=O(N);Q.length!==x.length&&throwInternalError("Mismatched type converter count");for(var P=0;P<x.length;++P)registerType(x[P],Q[P])}var E=new Array(T.length),e=[],B=0;T.forEach(function(N,Q){registeredTypes.hasOwnProperty(N)?E[Q]=registeredTypes[N]:(e.push(N),awaitingDependencies.hasOwnProperty(N)||(awaitingDependencies[N]=[]),awaitingDependencies[N].push(function(){E[Q]=registeredTypes[N],++B,B===e.length&&M(E)}))}),e.length===0&&M(E)}function registerType(x,T,O){if(O=O||{},!("argPackAdvance"in T))throw new TypeError("registerType registeredInstance requires argPackAdvance");var M=T.name;if(x||throwBindingError('type "'+M+'" must have a positive integer typeid pointer'),registeredTypes.hasOwnProperty(x)){if(O.ignoreDuplicateRegistrations)return;throwBindingError("Cannot register type '"+M+"' twice")}if(registeredTypes[x]=T,delete typeDependencies[x],awaitingDependencies.hasOwnProperty(x)){var E=awaitingDependencies[x];delete awaitingDependencies[x],E.forEach(function(e){e()})}}function __embind_register_void(x,T){T=readLatin1String(T),registerType(x,{isVoid:!0,name:T,argPackAdvance:0,fromWireType:function(){},toWireType:function(O,M){}})}function __ZSt18uncaught_exceptionv(){return!!__ZSt18uncaught_exceptionv.uncaught_exception}var EXCEPTIONS={last:0,caught:[],infos:{},deAdjust:function(x){if(!x||EXCEPTIONS.infos[x])return x;for(var T in EXCEPTIONS.infos){var O=EXCEPTIONS.infos[T];if(O.adjusted===x)return T}return x},addRef:function(x){if(x){var T=EXCEPTIONS.infos[x];T.refcount++}},decRef:function(x){if(x){var T=EXCEPTIONS.infos[x];assert(T.refcount>0),T.refcount--,T.refcount===0&&(T.destructor&&Runtime.dynCall("vi",T.destructor,[x]),delete EXCEPTIONS.infos[x],___cxa_free_exception(x))}},clearRef:function(x){if(x){var T=EXCEPTIONS.infos[x];T.refcount=0}}};function ___resumeException(x){throw EXCEPTIONS.last||(EXCEPTIONS.last=x),EXCEPTIONS.clearRef(EXCEPTIONS.deAdjust(x)),x+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function ___cxa_find_matching_catch(){var x=EXCEPTIONS.last;if(!x)return asm.setTempRet0(0),0|0;var T=EXCEPTIONS.infos[x],O=T.type;if(!O)return asm.setTempRet0(0),x|0;var M=Array.prototype.slice.call(arguments),E=Module.___cxa_is_pointer_type(O);___cxa_find_matching_catch.buffer||(___cxa_find_matching_catch.buffer=_malloc(4)),HEAP32[___cxa_find_matching_catch.buffer>>2]=x,x=___cxa_find_matching_catch.buffer;for(var e=0;e<M.length;e++)if(M[e]&&Module.___cxa_can_catch(M[e],O,x))return x=HEAP32[x>>2],T.adjusted=x,asm.setTempRet0(M[e]),x|0;return x=HEAP32[x>>2],asm.setTempRet0(O),x|0}function ___cxa_throw(x,T,O){throw EXCEPTIONS.infos[x]={ptr:x,adjusted:x,type:T,destructor:O,refcount:0},EXCEPTIONS.last=x,"uncaught_exception"in __ZSt18uncaught_exceptionv?__ZSt18uncaught_exceptionv.uncaught_exception++:__ZSt18uncaught_exceptionv.uncaught_exception=1,x+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}Module._memset=_memset;var _BDtoILow=!0;function getShiftFromSize(x){switch(x){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+x)}}function __embind_register_bool(x,T,O,M,E){var e=getShiftFromSize(O);T=readLatin1String(T),registerType(x,{name:T,fromWireType:function(B){return!!B},toWireType:function(B,N){return N?M:E},argPackAdvance:8,readValueFromPointer:function(B){var N;if(O===1)N=HEAP8;else if(O===2)N=HEAP16;else if(O===4)N=HEAP32;else throw new TypeError("Unknown boolean type size: "+T);return this.fromWireType(N[B>>e])},destructorFunction:null})}Module._bitshift64Shl=_bitshift64Shl;function _abort(){Module.abort()}function _free(){}Module._free=_free;function _malloc(x){var T=Runtime.dynamicAlloc(x+8);return T+8&4294967288}Module._malloc=_malloc;function simpleReadValueFromPointer(x){return this.fromWireType(HEAPU32[x>>2])}function __embind_register_std_string(x,T){T=readLatin1String(T),registerType(x,{name:T,fromWireType:function(O){for(var M=HEAPU32[O>>2],E=new Array(M),e=0;e<M;++e)E[e]=String.fromCharCode(HEAPU8[O+4+e]);return _free(O),E.join("")},toWireType:function(O,M){M instanceof ArrayBuffer&&(M=new Uint8Array(M));function E(C,V){return C[V]}function e(C,V){return C.charCodeAt(V)}var B;M instanceof Uint8Array||M instanceof Int8Array?B=E:typeof M=="string"?B=e:throwBindingError("Cannot pass non-string to std::string");var N=M.length,Q=_malloc(4+N);HEAPU32[Q>>2]=N;for(var P=0;P<N;++P){var A=B(M,P);A>255&&(_free(Q),throwBindingError("String has UTF-16 code units that do not fit in 8 bits")),HEAPU8[Q+4+P]=A}return O!==null&&O.push(_free,Q),Q},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:function(O){_free(O)}})}function __embind_register_std_wstring(x,T,O){O=readLatin1String(O);var M,E;T===2?(M=function(){return HEAPU16},E=1):T===4&&(M=function(){return HEAPU32},E=2),registerType(x,{name:O,fromWireType:function(e){for(var B=M(),N=HEAPU32[e>>2],Q=new Array(N),P=e+4>>E,A=0;A<N;++A)Q[A]=String.fromCharCode(B[P+A]);return _free(e),Q.join("")},toWireType:function(e,B){var N=M(),Q=B.length,P=_malloc(4+Q*T);HEAPU32[P>>2]=Q;for(var A=P+4>>E,C=0;C<Q;++C)N[A+C]=B.charCodeAt(C);return e!==null&&e.push(_free,P),P},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:function(e){_free(e)}})}function ___lock(){}function ___unlock(){}var _emscripten_asm_const_int=!0;Module._i64Add=_i64Add;var _fabs=Math_abs,_sqrt=Math_sqrt;function _embind_repr(x){if(x===null)return"null";var T=typeof x;return T==="object"||T==="array"||T==="function"?x.toString():""+x}function integerReadValueFromPointer(x,T,O){switch(T){case 0:return O?function(E){return HEAP8[E]}:function(E){return HEAPU8[E]};case 1:return O?function(E){return HEAP16[E>>1]}:function(E){return HEAPU16[E>>1]};case 2:return O?function(E){return HEAP32[E>>2]}:function(E){return HEAPU32[E>>2]};default:throw new TypeError("Unknown integer type: "+x)}}function __embind_register_integer(x,T,O,M,E){T=readLatin1String(T),E===-1&&(E=4294967295);var e=getShiftFromSize(O),B=function(Q){return Q};if(M===0){var N=32-8*O;B=function(Q){return Q<<N>>>N}}registerType(x,{name:T,fromWireType:B,toWireType:function(Q,P){if(typeof P!="number"&&typeof P!="boolean")throw new TypeError('Cannot convert "'+_embind_repr(P)+'" to '+this.name);if(P<M||P>E)throw new TypeError('Passing a number "'+_embind_repr(P)+'" from JS side to C/C++ side to an argument of type "'+T+'", which is outside the valid range ['+M+", "+E+"]!");return P|0},argPackAdvance:8,readValueFromPointer:integerReadValueFromPointer(T,e,M!==0),destructorFunction:null})}var emval_free_list=[],emval_handle_array=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function __emval_decref(x){x>4&&--emval_handle_array[x].refcount===0&&(emval_handle_array[x]=void 0,emval_free_list.push(x))}function count_emval_handles(){for(var x=0,T=5;T<emval_handle_array.length;++T)emval_handle_array[T]!==void 0&&++x;return x}function get_first_emval(){for(var x=5;x<emval_handle_array.length;++x)if(emval_handle_array[x]!==void 0)return emval_handle_array[x];return null}function init_emval(){Module.count_emval_handles=count_emval_handles,Module.get_first_emval=get_first_emval}function __emval_register(x){switch(x){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var T=emval_free_list.length?emval_free_list.pop():emval_handle_array.length;return emval_handle_array[T]={refcount:1,value:x},T}}}function __embind_register_emval(x,T){T=readLatin1String(T),registerType(x,{name:T,fromWireType:function(O){var M=emval_handle_array[O].value;return __emval_decref(O),M},toWireType:function(O,M){return __emval_register(M)},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:null})}function ___cxa_allocate_exception(x){return _malloc(x)}var _sin=Math_sin;function ___setErrNo(x){return Module.___errno_location&&(HEAP32[Module.___errno_location()>>2]=x),x}var ERRNO_CODES={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};function _sysconf(x){switch(x){case 30:return PAGE_SIZE;case 85:return totalMemory/PAGE_SIZE;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 79:return 0;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return typeof navigator=="object"&&navigator.hardwareConcurrency||1}return ___setErrNo(ERRNO_CODES.EINVAL),-1}Module._bitshift64Lshr=_bitshift64Lshr;function __exit(x){Module.exit(x)}function _exit(x){__exit(x)}var _llvm_ctlz_i32=!0;function floatReadValueFromPointer(x,T){switch(T){case 2:return function(O){return this.fromWireType(HEAPF32[O>>2])};case 3:return function(O){return this.fromWireType(HEAPF64[O>>3])};default:throw new TypeError("Unknown float type: "+x)}}function __embind_register_float(x,T,O){var M=getShiftFromSize(O);T=readLatin1String(T),registerType(x,{name:T,fromWireType:function(E){return E},toWireType:function(E,e){if(typeof e!="number"&&typeof e!="boolean")throw new TypeError('Cannot convert "'+_embind_repr(e)+'" to '+this.name);return e},argPackAdvance:8,readValueFromPointer:floatReadValueFromPointer(T,M),destructorFunction:null})}var _BDtoIHigh=!0;function _pthread_cleanup_push(x,T){__ATEXIT__.push(function(){Runtime.dynCall("vi",x,[T])}),_pthread_cleanup_push.level=__ATEXIT__.length}function new_(x,T){if(!(x instanceof Function))throw new TypeError("new_ called with constructor type "+typeof x+" which is not a function");var O=createNamedFunction(x.name||"unknownFunctionName",function(){});O.prototype=x.prototype;var M=new O,E=x.apply(M,T);return E instanceof Object?E:M}function runDestructors(x){for(;x.length;){var T=x.pop(),O=x.pop();O(T)}}function craftInvokerFunction(x,T,O,M,E){var e=T.length;e<2&&throwBindingError("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var B=T[1]!==null&&O!==null,N="",Q="",P=0;P<e-2;++P)N+=(P!==0?", ":"")+"arg"+P,Q+=(P!==0?", ":"")+"arg"+P+"Wired";for(var A="return function "+makeLegalFunctionName(x)+"("+N+`) {
if (arguments.length !== `+(e-2)+`) {
throwBindingError('function `+x+" called with ' + arguments.length + ' arguments, expected "+(e-2)+` args!');
}
`,C=!1,P=1;P<T.length;++P)if(T[P]!==null&&T[P].destructorFunction===void 0){C=!0;break}C&&(A+=`var destructors = [];
`);var V=C?"destructors":"null",z=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],H=[throwBindingError,M,E,runDestructors,T[0],T[1]];B&&(A+="var thisWired = classParam.toWireType("+V+`, this);
`);for(var P=0;P<e-2;++P)A+="var arg"+P+"Wired = argType"+P+".toWireType("+V+", arg"+P+"); // "+T[P+2].name+`
`,z.push("argType"+P),H.push(T[P+2]);B&&(Q="thisWired"+(Q.length>0?", ":"")+Q);var G=T[0].name!=="void";if(A+=(G?"var rv = ":"")+"invoker(fn"+(Q.length>0?", ":"")+Q+`);
`,C)A+=`runDestructors(destructors);
`;else for(var P=B?1:2;P<T.length;++P){var $=P===1?"thisWired":"arg"+(P-2)+"Wired";T[P].destructorFunction!==null&&(A+=$+"_dtor("+$+"); // "+T[P].name+`
`,z.push($+"_dtor"),H.push(T[P].destructorFunction))}G&&(A+=`var ret = retType.fromWireType(rv);
return ret;
`),A+=`}
`,z.push(A);var k=new_(Function,z).apply(null,H);return k}function ensureOverloadTable(x,T,O){if(x[T].overloadTable===void 0){var M=x[T];x[T]=function(){return x[T].overloadTable.hasOwnProperty(arguments.length)||throwBindingError("Function '"+O+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+x[T].overloadTable+")!"),x[T].overloadTable[arguments.length].apply(this,arguments)},x[T].overloadTable=[],x[T].overloadTable[M.argCount]=M}}function exposePublicSymbol(x,T,O){Module.hasOwnProperty(x)?((O===void 0||Module[x].overloadTable!==void 0&&Module[x].overloadTable[O]!==void 0)&&throwBindingError("Cannot register public name '"+x+"' twice"),ensureOverloadTable(Module,x,x),Module.hasOwnProperty(O)&&throwBindingError("Cannot register multiple overloads of a function with the same number of arguments ("+O+")!"),Module[x].overloadTable[O]=T):(Module[x]=T,O!==void 0&&(Module[x].numArguments=O))}function heap32VectorToArray(x,T){for(var O=[],M=0;M<x;M++)O.push(HEAP32[(T>>2)+M]);return O}function replacePublicSymbol(x,T,O){Module.hasOwnProperty(x)||throwInternalError("Replacing nonexistant public symbol"),Module[x].overloadTable!==void 0&&O!==void 0?Module[x].overloadTable[O]=T:Module[x]=T}function requireFunction(x,T){x=readLatin1String(x);function O(e){for(var B=[],N=1;N<x.length;++N)B.push("a"+N);var Q="dynCall_"+x+"_"+T,P="return function "+Q+"("+B.join(", ")+`) {
`;return P+="    return dynCall(rawFunction"+(B.length?", ":"")+B.join(", ")+`);
`,P+=`};
`,new Function("dynCall","rawFunction",P)(e,T)}var M;if(Module["FUNCTION_TABLE_"+x]!==void 0)M=Module["FUNCTION_TABLE_"+x][T];else if(typeof FUNCTION_TABLE<"u")M=FUNCTION_TABLE[T];else{var E=asm["dynCall_"+x];E===void 0&&(E=asm["dynCall_"+x.replace(/f/g,"d")],E===void 0&&throwBindingError("No dynCall invoker for signature: "+x)),M=O(E)}return typeof M!="function"&&throwBindingError("unknown function pointer with signature "+x+": "+T),M}var UnboundTypeError=void 0;function getTypeName(x){var T=___getTypeName(x),O=readLatin1String(T);return _free(T),O}function throwUnboundTypeError(x,T){var O=[],M={};function E(e){if(!M[e]&&!registeredTypes[e]){if(typeDependencies[e]){typeDependencies[e].forEach(E);return}O.push(e),M[e]=!0}}throw T.forEach(E),new UnboundTypeError(x+": "+O.map(getTypeName).join([", "]))}function __embind_register_function(x,T,O,M,E,e){var B=heap32VectorToArray(T,O);x=readLatin1String(x),E=requireFunction(M,E),exposePublicSymbol(x,function(){throwUnboundTypeError("Cannot call "+x+" due to unbound types",B)},T-1),whenDependentTypesAreResolved([],B,function(N){var Q=[N[0],null].concat(N.slice(1));return replacePublicSymbol(x,craftInvokerFunction(x,Q,null,E,e),T-1),[]})}function __embind_register_constant(x,T,O){x=readLatin1String(x),whenDependentTypesAreResolved([],[T],function(M){return M=M[0],Module[x]=M.fromWireType(O),[]})}function _pthread_cleanup_pop(){assert(_pthread_cleanup_push.level==__ATEXIT__.length,"cannot pop if something else added meanwhile!"),__ATEXIT__.pop(),_pthread_cleanup_push.level=__ATEXIT__.length}var ERRNO_MESSAGES={0:"Success",1:"Not super-user",2:"No such file or directory",3:"No such process",4:"Interrupted system call",5:"I/O error",6:"No such device or address",7:"Arg list too long",8:"Exec format error",9:"Bad file number",10:"No children",11:"No more processes",12:"Not enough core",13:"Permission denied",14:"Bad address",15:"Block device required",16:"Mount device busy",17:"File exists",18:"Cross-device link",19:"No such device",20:"Not a directory",21:"Is a directory",22:"Invalid argument",23:"Too many open files in system",24:"Too many open files",25:"Not a typewriter",26:"Text file busy",27:"File too large",28:"No space left on device",29:"Illegal seek",30:"Read only file system",31:"Too many links",32:"Broken pipe",33:"Math arg out of domain of func",34:"Math result not representable",35:"File locking deadlock error",36:"File or path name too long",37:"No record locks available",38:"Function not implemented",39:"Directory not empty",40:"Too many symbolic links",42:"No message of desired type",43:"Identifier removed",44:"Channel number out of range",45:"Level 2 not synchronized",46:"Level 3 halted",47:"Level 3 reset",48:"Link number out of range",49:"Protocol driver not attached",50:"No CSI structure available",51:"Level 2 halted",52:"Invalid exchange",53:"Invalid request descriptor",54:"Exchange full",55:"No anode",56:"Invalid request code",57:"Invalid slot",59:"Bad font file fmt",60:"Device not a stream",61:"No data (for no delay io)",62:"Timer expired",63:"Out of streams resources",64:"Machine is not on the network",65:"Package not installed",66:"The object is remote",67:"The link has been severed",68:"Advertise error",69:"Srmount error",70:"Communication error on send",71:"Protocol error",72:"Multihop attempted",73:"Cross mount point (not really error)",74:"Trying to read unreadable message",75:"Value too large for defined data type",76:"Given log. name not unique",77:"f.d. invalid for this operation",78:"Remote address changed",79:"Can   access a needed shared lib",80:"Accessing a corrupted shared lib",81:".lib section in a.out corrupted",82:"Attempting to link in too many libs",83:"Attempting to exec a shared library",84:"Illegal byte sequence",86:"Streams pipe error",87:"Too many users",88:"Socket operation on non-socket",89:"Destination address required",90:"Message too long",91:"Protocol wrong type for socket",92:"Protocol not available",93:"Unknown protocol",94:"Socket type not supported",95:"Not supported",96:"Protocol family not supported",97:"Address family not supported by protocol family",98:"Address already in use",99:"Address not available",100:"Network interface is not configured",101:"Network is unreachable",102:"Connection reset by network",103:"Connection aborted",104:"Connection reset by peer",105:"No buffer space available",106:"Socket is already connected",107:"Socket is not connected",108:"Can't send after socket shutdown",109:"Too many references",110:"Connection timed out",111:"Connection refused",112:"Host is down",113:"Host is unreachable",114:"Socket already connected",115:"Connection already in progress",116:"Stale file handle",122:"Quota exceeded",123:"No medium (in tape drive)",125:"Operation canceled",130:"Previous owner died",131:"State not recoverable"},PATH={splitPath:function(x){var T=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return T.exec(x).slice(1)},normalizeArray:function(x,T){for(var O=0,M=x.length-1;M>=0;M--){var E=x[M];E==="."?x.splice(M,1):E===".."?(x.splice(M,1),O++):O&&(x.splice(M,1),O--)}if(T)for(;O--;O)x.unshift("..");return x},normalize:function(x){var T=x.charAt(0)==="/",O=x.substr(-1)==="/";return x=PATH.normalizeArray(x.split("/").filter(function(M){return!!M}),!T).join("/"),!x&&!T&&(x="."),x&&O&&(x+="/"),(T?"/":"")+x},dirname:function(x){var T=PATH.splitPath(x),O=T[0],M=T[1];return!O&&!M?".":(M&&(M=M.substr(0,M.length-1)),O+M)},basename:function(x){if(x==="/")return"/";var T=x.lastIndexOf("/");return T===-1?x:x.substr(T+1)},extname:function(x){return PATH.splitPath(x)[3]},join:function(){var x=Array.prototype.slice.call(arguments,0);return PATH.normalize(x.join("/"))},join2:function(x,T){return PATH.normalize(x+"/"+T)},resolve:function(){for(var x="",T=!1,O=arguments.length-1;O>=-1&&!T;O--){var M=O>=0?arguments[O]:FS.cwd();if(typeof M!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!M)return"";x=M+"/"+x,T=M.charAt(0)==="/"}return x=PATH.normalizeArray(x.split("/").filter(function(E){return!!E}),!T).join("/"),(T?"/":"")+x||"."},relative:function(x,T){x=PATH.resolve(x).substr(1),T=PATH.resolve(T).substr(1);function O(P){for(var A=0;A<P.length&&P[A]==="";A++);for(var C=P.length-1;C>=0&&P[C]==="";C--);return A>C?[]:P.slice(A,C-A+1)}for(var M=O(x.split("/")),E=O(T.split("/")),e=Math.min(M.length,E.length),B=e,N=0;N<e;N++)if(M[N]!==E[N]){B=N;break}for(var Q=[],N=B;N<M.length;N++)Q.push("..");return Q=Q.concat(E.slice(B)),Q.join("/")}},TTY={ttys:[],init:function(){},shutdown:function(){},register:function(x,T){TTY.ttys[x]={input:[],output:[],ops:T},FS.registerDevice(x,TTY.stream_ops)},stream_ops:{open:function(x){var T=TTY.ttys[x.node.rdev];if(!T)throw new FS.ErrnoError(ERRNO_CODES.ENODEV);x.tty=T,x.seekable=!1},close:function(x){x.tty.ops.flush(x.tty)},flush:function(x){x.tty.ops.flush(x.tty)},read:function(x,T,O,M,E){if(!x.tty||!x.tty.ops.get_char)throw new FS.ErrnoError(ERRNO_CODES.ENXIO);for(var e=0,B=0;B<M;B++){var N;try{N=x.tty.ops.get_char(x.tty)}catch{throw new FS.ErrnoError(ERRNO_CODES.EIO)}if(N===void 0&&e===0)throw new FS.ErrnoError(ERRNO_CODES.EAGAIN);if(N==null)break;e++,T[O+B]=N}return e&&(x.node.timestamp=Date.now()),e},write:function(x,T,O,M,E){if(!x.tty||!x.tty.ops.put_char)throw new FS.ErrnoError(ERRNO_CODES.ENXIO);for(var e=0;e<M;e++)try{x.tty.ops.put_char(x.tty,T[O+e])}catch{throw new FS.ErrnoError(ERRNO_CODES.EIO)}return M&&(x.node.timestamp=Date.now()),e}},default_tty_ops:{get_char:function(x){if(!x.input.length){var T=null;if(ENVIRONMENT_IS_NODE){var O=256,M=new Buffer(O),E=0,e=process.stdin.fd,B=!1;try{e=fs.openSync("/dev/stdin","r"),B=!0}catch{}E=fs.readSync(e,M,0,O,null),B&&fs.closeSync(e),E>0?T=M.slice(0,E).toString("utf-8"):T=null}else typeof window<"u"&&typeof window.prompt=="function"?(T=window.prompt("Input: "),T!==null&&(T+=`
`)):typeof readline=="function"&&(T=readline(),T!==null&&(T+=`
`));if(!T)return null;x.input=intArrayFromString(T,!0)}return x.input.shift()},put_char:function(x,T){T===null||T===10?(Module.print(UTF8ArrayToString(x.output,0)),x.output=[]):T!=0&&x.output.push(T)},flush:function(x){x.output&&x.output.length>0&&(Module.print(UTF8ArrayToString(x.output,0)),x.output=[])}},default_tty1_ops:{put_char:function(x,T){T===null||T===10?(Module.printErr(UTF8ArrayToString(x.output,0)),x.output=[]):T!=0&&x.output.push(T)},flush:function(x){x.output&&x.output.length>0&&(Module.printErr(UTF8ArrayToString(x.output,0)),x.output=[])}}},MEMFS={ops_table:null,mount:function(x){return MEMFS.createNode(null,"/",16895,0)},createNode:function(x,T,O,M){if(FS.isBlkdev(O)||FS.isFIFO(O))throw new FS.ErrnoError(ERRNO_CODES.EPERM);MEMFS.ops_table||(MEMFS.ops_table={dir:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,lookup:MEMFS.node_ops.lookup,mknod:MEMFS.node_ops.mknod,rename:MEMFS.node_ops.rename,unlink:MEMFS.node_ops.unlink,rmdir:MEMFS.node_ops.rmdir,readdir:MEMFS.node_ops.readdir,symlink:MEMFS.node_ops.symlink},stream:{llseek:MEMFS.stream_ops.llseek}},file:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:{llseek:MEMFS.stream_ops.llseek,read:MEMFS.stream_ops.read,write:MEMFS.stream_ops.write,allocate:MEMFS.stream_ops.allocate,mmap:MEMFS.stream_ops.mmap,msync:MEMFS.stream_ops.msync}},link:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,readlink:MEMFS.node_ops.readlink},stream:{}},chrdev:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:FS.chrdev_stream_ops}});var E=FS.createNode(x,T,O,M);return FS.isDir(E.mode)?(E.node_ops=MEMFS.ops_table.dir.node,E.stream_ops=MEMFS.ops_table.dir.stream,E.contents={}):FS.isFile(E.mode)?(E.node_ops=MEMFS.ops_table.file.node,E.stream_ops=MEMFS.ops_table.file.stream,E.usedBytes=0,E.contents=null):FS.isLink(E.mode)?(E.node_ops=MEMFS.ops_table.link.node,E.stream_ops=MEMFS.ops_table.link.stream):FS.isChrdev(E.mode)&&(E.node_ops=MEMFS.ops_table.chrdev.node,E.stream_ops=MEMFS.ops_table.chrdev.stream),E.timestamp=Date.now(),x&&(x.contents[T]=E),E},getFileDataAsRegularArray:function(x){if(x.contents&&x.contents.subarray){for(var T=[],O=0;O<x.usedBytes;++O)T.push(x.contents[O]);return T}return x.contents},getFileDataAsTypedArray:function(x){return x.contents?x.contents.subarray?x.contents.subarray(0,x.usedBytes):new Uint8Array(x.contents):new Uint8Array},expandFileStorage:function(x,T){if(x.contents&&x.contents.subarray&&T>x.contents.length&&(x.contents=MEMFS.getFileDataAsRegularArray(x),x.usedBytes=x.contents.length),!x.contents||x.contents.subarray){var O=x.contents?x.contents.buffer.byteLength:0;if(O>=T)return;var M=1024*1024;T=Math.max(T,O*(O<M?2:1.125)|0),O!=0&&(T=Math.max(T,256));var E=x.contents;x.contents=new Uint8Array(T),x.usedBytes>0&&x.contents.set(E.subarray(0,x.usedBytes),0);return}for(!x.contents&&T>0&&(x.contents=[]);x.contents.length<T;)x.contents.push(0)},resizeFileStorage:function(x,T){if(x.usedBytes!=T){if(T==0){x.contents=null,x.usedBytes=0;return}if(!x.contents||x.contents.subarray){var O=x.contents;x.contents=new Uint8Array(new ArrayBuffer(T)),O&&x.contents.set(O.subarray(0,Math.min(T,x.usedBytes))),x.usedBytes=T;return}if(x.contents||(x.contents=[]),x.contents.length>T)x.contents.length=T;else for(;x.contents.length<T;)x.contents.push(0);x.usedBytes=T}},node_ops:{getattr:function(x){var T={};return T.dev=FS.isChrdev(x.mode)?x.id:1,T.ino=x.id,T.mode=x.mode,T.nlink=1,T.uid=0,T.gid=0,T.rdev=x.rdev,FS.isDir(x.mode)?T.size=4096:FS.isFile(x.mode)?T.size=x.usedBytes:FS.isLink(x.mode)?T.size=x.link.length:T.size=0,T.atime=new Date(x.timestamp),T.mtime=new Date(x.timestamp),T.ctime=new Date(x.timestamp),T.blksize=4096,T.blocks=Math.ceil(T.size/T.blksize),T},setattr:function(x,T){T.mode!==void 0&&(x.mode=T.mode),T.timestamp!==void 0&&(x.timestamp=T.timestamp),T.size!==void 0&&MEMFS.resizeFileStorage(x,T.size)},lookup:function(x,T){throw FS.genericErrors[ERRNO_CODES.ENOENT]},mknod:function(x,T,O,M){return MEMFS.createNode(x,T,O,M)},rename:function(x,T,O){if(FS.isDir(x.mode)){var M;try{M=FS.lookupNode(T,O)}catch{}if(M)for(var E in M.contents)throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY)}delete x.parent.contents[x.name],x.name=O,T.contents[O]=x,x.parent=T},unlink:function(x,T){delete x.contents[T]},rmdir:function(x,T){var O=FS.lookupNode(x,T);for(var M in O.contents)throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY);delete x.contents[T]},readdir:function(x){var T=[".",".."];for(var O in x.contents)x.contents.hasOwnProperty(O)&&T.push(O);return T},symlink:function(x,T,O){var M=MEMFS.createNode(x,T,41471,0);return M.link=O,M},readlink:function(x){if(!FS.isLink(x.mode))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return x.link}},stream_ops:{read:function(x,T,O,M,E){var e=x.node.contents;if(E>=x.node.usedBytes)return 0;var B=Math.min(x.node.usedBytes-E,M);if(assert(B>=0),B>8&&e.subarray)T.set(e.subarray(E,E+B),O);else for(var N=0;N<B;N++)T[O+N]=e[E+N];return B},write:function(x,T,O,M,E,e){if(!M)return 0;var B=x.node;if(B.timestamp=Date.now(),T.subarray&&(!B.contents||B.contents.subarray)){if(e)return B.contents=T.subarray(O,O+M),B.usedBytes=M,M;if(B.usedBytes===0&&E===0)return B.contents=new Uint8Array(T.subarray(O,O+M)),B.usedBytes=M,M;if(E+M<=B.usedBytes)return B.contents.set(T.subarray(O,O+M),E),M}if(MEMFS.expandFileStorage(B,E+M),B.contents.subarray&&T.subarray)B.contents.set(T.subarray(O,O+M),E);else for(var N=0;N<M;N++)B.contents[E+N]=T[O+N];return B.usedBytes=Math.max(B.usedBytes,E+M),M},llseek:function(x,T,O){var M=T;if(O===1?M+=x.position:O===2&&FS.isFile(x.node.mode)&&(M+=x.node.usedBytes),M<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return M},allocate:function(x,T,O){MEMFS.expandFileStorage(x.node,T+O),x.node.usedBytes=Math.max(x.node.usedBytes,T+O)},mmap:function(x,T,O,M,E,e,B){if(!FS.isFile(x.node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENODEV);var N,Q,P=x.node.contents;if(!(B&2)&&(P.buffer===T||P.buffer===T.buffer))Q=!1,N=P.byteOffset;else{if((E>0||E+M<x.node.usedBytes)&&(P.subarray?P=P.subarray(E,E+M):P=Array.prototype.slice.call(P,E,E+M)),Q=!0,N=_malloc(M),!N)throw new FS.ErrnoError(ERRNO_CODES.ENOMEM);T.set(P,N)}return{ptr:N,allocated:Q}},msync:function(x,T,O,M,E){if(!FS.isFile(x.node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENODEV);if(E&2)return 0;var e=MEMFS.stream_ops.write(x,T,0,M,O,!1);return 0}}},IDBFS={dbs:{},indexedDB:function(){if(typeof indexedDB<"u")return indexedDB;var x=null;return typeof window=="object"&&(x=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),assert(x,"IDBFS used, but indexedDB not supported"),x},DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(x){return MEMFS.mount.apply(null,arguments)},syncfs:function(x,T,O){IDBFS.getLocalSet(x,function(M,E){if(M)return O(M);IDBFS.getRemoteSet(x,function(e,B){if(e)return O(e);var N=T?B:E,Q=T?E:B;IDBFS.reconcile(N,Q,O)})})},getDB:function(x,T){var O=IDBFS.dbs[x];if(O)return T(null,O);var M;try{M=IDBFS.indexedDB().open(x,IDBFS.DB_VERSION)}catch(E){return T(E)}M.onupgradeneeded=function(E){var e=E.target.result,B=E.target.transaction,N;e.objectStoreNames.contains(IDBFS.DB_STORE_NAME)?N=B.objectStore(IDBFS.DB_STORE_NAME):N=e.createObjectStore(IDBFS.DB_STORE_NAME),N.indexNames.contains("timestamp")||N.createIndex("timestamp","timestamp",{unique:!1})},M.onsuccess=function(){O=M.result,IDBFS.dbs[x]=O,T(null,O)},M.onerror=function(E){T(this.error),E.preventDefault()}},getLocalSet:function(x,T){var O={};function M(Q){return Q!=="."&&Q!==".."}function E(Q){return function(P){return PATH.join2(Q,P)}}for(var e=FS.readdir(x.mountpoint).filter(M).map(E(x.mountpoint));e.length;){var B=e.pop(),N;try{N=FS.stat(B)}catch(Q){return T(Q)}FS.isDir(N.mode)&&e.push.apply(e,FS.readdir(B).filter(M).map(E(B))),O[B]={timestamp:N.mtime}}return T(null,{type:"local",entries:O})},getRemoteSet:function(x,T){var O={};IDBFS.getDB(x.mountpoint,function(M,E){if(M)return T(M);var e=E.transaction([IDBFS.DB_STORE_NAME],"readonly");e.onerror=function(Q){T(this.error),Q.preventDefault()};var B=e.objectStore(IDBFS.DB_STORE_NAME),N=B.index("timestamp");N.openKeyCursor().onsuccess=function(Q){var P=Q.target.result;if(!P)return T(null,{type:"remote",db:E,entries:O});O[P.primaryKey]={timestamp:P.key},P.continue()}})},loadLocalEntry:function(x,T){var O,M;try{var E=FS.lookupPath(x);M=E.node,O=FS.stat(x)}catch(e){return T(e)}return FS.isDir(O.mode)?T(null,{timestamp:O.mtime,mode:O.mode}):FS.isFile(O.mode)?(M.contents=MEMFS.getFileDataAsTypedArray(M),T(null,{timestamp:O.mtime,mode:O.mode,contents:M.contents})):T(new Error("node type not supported"))},storeLocalEntry:function(x,T,O){try{if(FS.isDir(T.mode))FS.mkdir(x,T.mode);else if(FS.isFile(T.mode))FS.writeFile(x,T.contents,{encoding:"binary",canOwn:!0});else return O(new Error("node type not supported"));FS.chmod(x,T.mode),FS.utime(x,T.timestamp,T.timestamp)}catch(M){return O(M)}O(null)},removeLocalEntry:function(x,T){try{var O=FS.lookupPath(x),M=FS.stat(x);FS.isDir(M.mode)?FS.rmdir(x):FS.isFile(M.mode)&&FS.unlink(x)}catch(E){return T(E)}T(null)},loadRemoteEntry:function(x,T,O){var M=x.get(T);M.onsuccess=function(E){O(null,E.target.result)},M.onerror=function(E){O(this.error),E.preventDefault()}},storeRemoteEntry:function(x,T,O,M){var E=x.put(O,T);E.onsuccess=function(){M(null)},E.onerror=function(e){M(this.error),e.preventDefault()}},removeRemoteEntry:function(x,T,O){var M=x.delete(T);M.onsuccess=function(){O(null)},M.onerror=function(E){O(this.error),E.preventDefault()}},reconcile:function(x,T,O){var M=0,E=[];Object.keys(x.entries).forEach(function(V){var z=x.entries[V],H=T.entries[V];(!H||z.timestamp>H.timestamp)&&(E.push(V),M++)});var e=[];if(Object.keys(T.entries).forEach(function(V){var z=T.entries[V],H=x.entries[V];H||(e.push(V),M++)}),!M)return O(null);var B=!1,N=0,Q=x.type==="remote"?x.db:T.db,P=Q.transaction([IDBFS.DB_STORE_NAME],"readwrite"),A=P.objectStore(IDBFS.DB_STORE_NAME);function C(V){if(V)return C.errored?void 0:(C.errored=!0,O(V));if(++N>=M)return O(null)}P.onerror=function(V){C(this.error),V.preventDefault()},E.sort().forEach(function(V){T.type==="local"?IDBFS.loadRemoteEntry(A,V,function(z,H){if(z)return C(z);IDBFS.storeLocalEntry(V,H,C)}):IDBFS.loadLocalEntry(V,function(z,H){if(z)return C(z);IDBFS.storeRemoteEntry(A,V,H,C)})}),e.sort().reverse().forEach(function(V){T.type==="local"?IDBFS.removeLocalEntry(V,C):IDBFS.removeRemoteEntry(A,V,C)})}},NODEFS={isWindows:!1,staticInit:function(){NODEFS.isWindows=!!process.platform.match(/^win/)},mount:function(x){return assert(ENVIRONMENT_IS_NODE),NODEFS.createNode(null,"/",NODEFS.getMode(x.opts.root),0)},createNode:function(x,T,O,M){if(!FS.isDir(O)&&!FS.isFile(O)&&!FS.isLink(O))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var E=FS.createNode(x,T,O);return E.node_ops=NODEFS.node_ops,E.stream_ops=NODEFS.stream_ops,E},getMode:function(x){var T;try{T=fs.lstatSync(x),NODEFS.isWindows&&(T.mode=T.mode|(T.mode&146)>>1)}catch(O){throw O.code?new FS.ErrnoError(ERRNO_CODES[O.code]):O}return T.mode},realPath:function(x){for(var T=[];x.parent!==x;)T.push(x.name),x=x.parent;return T.push(x.mount.opts.root),T.reverse(),PATH.join.apply(null,T)},flagsToPermissionStringMap:{0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},flagsToPermissionString:function(x){if(x&=-32769,x in NODEFS.flagsToPermissionStringMap)return NODEFS.flagsToPermissionStringMap[x];throw new FS.ErrnoError(ERRNO_CODES.EINVAL)},node_ops:{getattr:function(x){var T=NODEFS.realPath(x),O;try{O=fs.lstatSync(T)}catch(M){throw M.code?new FS.ErrnoError(ERRNO_CODES[M.code]):M}return NODEFS.isWindows&&!O.blksize&&(O.blksize=4096),NODEFS.isWindows&&!O.blocks&&(O.blocks=(O.size+O.blksize-1)/O.blksize|0),{dev:O.dev,ino:O.ino,mode:O.mode,nlink:O.nlink,uid:O.uid,gid:O.gid,rdev:O.rdev,size:O.size,atime:O.atime,mtime:O.mtime,ctime:O.ctime,blksize:O.blksize,blocks:O.blocks}},setattr:function(x,T){var O=NODEFS.realPath(x);try{if(T.mode!==void 0&&(fs.chmodSync(O,T.mode),x.mode=T.mode),T.timestamp!==void 0){var M=new Date(T.timestamp);fs.utimesSync(O,M,M)}T.size!==void 0&&fs.truncateSync(O,T.size)}catch(E){throw E.code?new FS.ErrnoError(ERRNO_CODES[E.code]):E}},lookup:function(x,T){var O=PATH.join2(NODEFS.realPath(x),T),M=NODEFS.getMode(O);return NODEFS.createNode(x,T,M)},mknod:function(x,T,O,M){var E=NODEFS.createNode(x,T,O,M),e=NODEFS.realPath(E);try{FS.isDir(E.mode)?fs.mkdirSync(e,E.mode):fs.writeFileSync(e,"",{mode:E.mode})}catch(B){throw B.code?new FS.ErrnoError(ERRNO_CODES[B.code]):B}return E},rename:function(x,T,O){var M=NODEFS.realPath(x),E=PATH.join2(NODEFS.realPath(T),O);try{fs.renameSync(M,E)}catch(e){throw e.code?new FS.ErrnoError(ERRNO_CODES[e.code]):e}},unlink:function(x,T){var O=PATH.join2(NODEFS.realPath(x),T);try{fs.unlinkSync(O)}catch(M){throw M.code?new FS.ErrnoError(ERRNO_CODES[M.code]):M}},rmdir:function(x,T){var O=PATH.join2(NODEFS.realPath(x),T);try{fs.rmdirSync(O)}catch(M){throw M.code?new FS.ErrnoError(ERRNO_CODES[M.code]):M}},readdir:function(x){var T=NODEFS.realPath(x);try{return fs.readdirSync(T)}catch(O){throw O.code?new FS.ErrnoError(ERRNO_CODES[O.code]):O}},symlink:function(x,T,O){var M=PATH.join2(NODEFS.realPath(x),T);try{fs.symlinkSync(O,M)}catch(E){throw E.code?new FS.ErrnoError(ERRNO_CODES[E.code]):E}},readlink:function(x){var T=NODEFS.realPath(x);try{return T=fs.readlinkSync(T),T=NODEJS_PATH.relative(NODEJS_PATH.resolve(x.mount.opts.root),T),T}catch(O){throw O.code?new FS.ErrnoError(ERRNO_CODES[O.code]):O}}},stream_ops:{open:function(x){var T=NODEFS.realPath(x.node);try{FS.isFile(x.node.mode)&&(x.nfd=fs.openSync(T,NODEFS.flagsToPermissionString(x.flags)))}catch(O){throw O.code?new FS.ErrnoError(ERRNO_CODES[O.code]):O}},close:function(x){try{FS.isFile(x.node.mode)&&x.nfd&&fs.closeSync(x.nfd)}catch(T){throw T.code?new FS.ErrnoError(ERRNO_CODES[T.code]):T}},read:function(x,T,O,M,E){if(M===0)return 0;var e=new Buffer(M),B;try{B=fs.readSync(x.nfd,e,0,M,E)}catch(Q){throw new FS.ErrnoError(ERRNO_CODES[Q.code])}if(B>0)for(var N=0;N<B;N++)T[O+N]=e[N];return B},write:function(x,T,O,M,E){var e=new Buffer(T.subarray(O,O+M)),B;try{B=fs.writeSync(x.nfd,e,0,M,E)}catch(N){throw new FS.ErrnoError(ERRNO_CODES[N.code])}return B},llseek:function(x,T,O){var M=T;if(O===1)M+=x.position;else if(O===2&&FS.isFile(x.node.mode))try{var E=fs.fstatSync(x.nfd);M+=E.size}catch(e){throw new FS.ErrnoError(ERRNO_CODES[e.code])}if(M<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return M}}},WORKERFS={DIR_MODE:16895,FILE_MODE:33279,reader:null,mount:function(x){assert(ENVIRONMENT_IS_WORKER),WORKERFS.reader||(WORKERFS.reader=new FileReaderSync);var T=WORKERFS.createNode(null,"/",WORKERFS.DIR_MODE,0),O={};function M(e){for(var B=e.split("/"),N=T,Q=0;Q<B.length-1;Q++){var P=B.slice(0,Q+1).join("/");O[P]||(O[P]=WORKERFS.createNode(N,P,WORKERFS.DIR_MODE,0)),N=O[P]}return N}function E(e){var B=e.split("/");return B[B.length-1]}return Array.prototype.forEach.call(x.opts.files||[],function(e){WORKERFS.createNode(M(e.name),E(e.name),WORKERFS.FILE_MODE,0,e,e.lastModifiedDate)}),(x.opts.blobs||[]).forEach(function(e){WORKERFS.createNode(M(e.name),E(e.name),WORKERFS.FILE_MODE,0,e.data)}),(x.opts.packages||[]).forEach(function(e){e.metadata.files.forEach(function(B){var N=B.filename.substr(1);WORKERFS.createNode(M(N),E(N),WORKERFS.FILE_MODE,0,e.blob.slice(B.start,B.end))})}),T},createNode:function(x,T,O,M,E,e){var B=FS.createNode(x,T,O);return B.mode=O,B.node_ops=WORKERFS.node_ops,B.stream_ops=WORKERFS.stream_ops,B.timestamp=(e||new Date).getTime(),assert(WORKERFS.FILE_MODE!==WORKERFS.DIR_MODE),O===WORKERFS.FILE_MODE?(B.size=E.size,B.contents=E):(B.size=4096,B.contents={}),x&&(x.contents[T]=B),B},node_ops:{getattr:function(x){return{dev:1,ino:void 0,mode:x.mode,nlink:1,uid:0,gid:0,rdev:void 0,size:x.size,atime:new Date(x.timestamp),mtime:new Date(x.timestamp),ctime:new Date(x.timestamp),blksize:4096,blocks:Math.ceil(x.size/4096)}},setattr:function(x,T){T.mode!==void 0&&(x.mode=T.mode),T.timestamp!==void 0&&(x.timestamp=T.timestamp)},lookup:function(x,T){throw new FS.ErrnoError(ERRNO_CODES.ENOENT)},mknod:function(x,T,O,M){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},rename:function(x,T,O){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},unlink:function(x,T){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},rmdir:function(x,T){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},readdir:function(x){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},symlink:function(x,T,O){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},readlink:function(x){throw new FS.ErrnoError(ERRNO_CODES.EPERM)}},stream_ops:{read:function(x,T,O,M,E){if(E>=x.node.size)return 0;var e=x.node.contents.slice(E,E+M),B=WORKERFS.reader.readAsArrayBuffer(e);return T.set(new Uint8Array(B),O),e.size},write:function(x,T,O,M,E){throw new FS.ErrnoError(ERRNO_CODES.EIO)},llseek:function(x,T,O){var M=T;if(O===1?M+=x.position:O===2&&FS.isFile(x.node.mode)&&(M+=x.node.size),M<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return M}}},_stdin=allocate(1,"i32*",ALLOC_STATIC),_stdout=allocate(1,"i32*",ALLOC_STATIC),_stderr=allocate(1,"i32*",ALLOC_STATIC),FS={root:null,mounts:[],devices:[null],streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,handleFSError:function(x){if(!(x instanceof FS.ErrnoError))throw x+" : "+stackTrace();return ___setErrNo(x.errno)},lookupPath:function(x,T){if(x=PATH.resolve(FS.cwd(),x),T=T||{},!x)return{path:"",node:null};var O={follow_mount:!0,recurse_count:0};for(var M in O)T[M]===void 0&&(T[M]=O[M]);if(T.recurse_count>8)throw new FS.ErrnoError(ERRNO_CODES.ELOOP);for(var E=PATH.normalizeArray(x.split("/").filter(function(V){return!!V}),!1),e=FS.root,B="/",N=0;N<E.length;N++){var Q=N===E.length-1;if(Q&&T.parent)break;if(e=FS.lookupNode(e,E[N]),B=PATH.join2(B,E[N]),FS.isMountpoint(e)&&(!Q||Q&&T.follow_mount)&&(e=e.mounted.root),!Q||T.follow)for(var P=0;FS.isLink(e.mode);){var A=FS.readlink(B);B=PATH.resolve(PATH.dirname(B),A);var C=FS.lookupPath(B,{recurse_count:T.recurse_count});if(e=C.node,P++>40)throw new FS.ErrnoError(ERRNO_CODES.ELOOP)}}return{path:B,node:e}},getPath:function(x){for(var T;;){if(FS.isRoot(x)){var O=x.mount.mountpoint;return T?O[O.length-1]!=="/"?O+"/"+T:O+T:O}T=T?x.name+"/"+T:x.name,x=x.parent}},hashName:function(x,T){for(var O=0,M=0;M<T.length;M++)O=(O<<5)-O+T.charCodeAt(M)|0;return(x+O>>>0)%FS.nameTable.length},hashAddNode:function(x){var T=FS.hashName(x.parent.id,x.name);x.name_next=FS.nameTable[T],FS.nameTable[T]=x},hashRemoveNode:function(x){var T=FS.hashName(x.parent.id,x.name);if(FS.nameTable[T]===x)FS.nameTable[T]=x.name_next;else for(var O=FS.nameTable[T];O;){if(O.name_next===x){O.name_next=x.name_next;break}O=O.name_next}},lookupNode:function(x,T){var O=FS.mayLookup(x);if(O)throw new FS.ErrnoError(O,x);for(var M=FS.hashName(x.id,T),E=FS.nameTable[M];E;E=E.name_next){var e=E.name;if(E.parent.id===x.id&&e===T)return E}return FS.lookup(x,T)},createNode:function(x,T,O,M){if(!FS.FSNode){FS.FSNode=function(N,Q,P,A){N||(N=this),this.parent=N,this.mount=N.mount,this.mounted=null,this.id=FS.nextInode++,this.name=Q,this.mode=P,this.node_ops={},this.stream_ops={},this.rdev=A},FS.FSNode.prototype={};var E=365,e=146;Object.defineProperties(FS.FSNode.prototype,{read:{get:function(){return(this.mode&E)===E},set:function(N){N?this.mode|=E:this.mode&=~E}},write:{get:function(){return(this.mode&e)===e},set:function(N){N?this.mode|=e:this.mode&=~e}},isFolder:{get:function(){return FS.isDir(this.mode)}},isDevice:{get:function(){return FS.isChrdev(this.mode)}}})}var B=new FS.FSNode(x,T,O,M);return FS.hashAddNode(B),B},destroyNode:function(x){FS.hashRemoveNode(x)},isRoot:function(x){return x===x.parent},isMountpoint:function(x){return!!x.mounted},isFile:function(x){return(x&61440)===32768},isDir:function(x){return(x&61440)===16384},isLink:function(x){return(x&61440)===40960},isChrdev:function(x){return(x&61440)===8192},isBlkdev:function(x){return(x&61440)===24576},isFIFO:function(x){return(x&61440)===4096},isSocket:function(x){return(x&49152)===49152},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(x){var T=FS.flagModes[x];if(typeof T>"u")throw new Error("Unknown file open mode: "+x);return T},flagsToPermissionString:function(x){var T=["r","w","rw"][x&3];return x&512&&(T+="w"),T},nodePermissions:function(x,T){return FS.ignorePermissions?0:T.indexOf("r")!==-1&&!(x.mode&292)||T.indexOf("w")!==-1&&!(x.mode&146)||T.indexOf("x")!==-1&&!(x.mode&73)?ERRNO_CODES.EACCES:0},mayLookup:function(x){var T=FS.nodePermissions(x,"x");return T||(x.node_ops.lookup?0:ERRNO_CODES.EACCES)},mayCreate:function(x,T){try{var O=FS.lookupNode(x,T);return ERRNO_CODES.EEXIST}catch{}return FS.nodePermissions(x,"wx")},mayDelete:function(x,T,O){var M;try{M=FS.lookupNode(x,T)}catch(e){return e.errno}var E=FS.nodePermissions(x,"wx");if(E)return E;if(O){if(!FS.isDir(M.mode))return ERRNO_CODES.ENOTDIR;if(FS.isRoot(M)||FS.getPath(M)===FS.cwd())return ERRNO_CODES.EBUSY}else if(FS.isDir(M.mode))return ERRNO_CODES.EISDIR;return 0},mayOpen:function(x,T){return x?FS.isLink(x.mode)?ERRNO_CODES.ELOOP:FS.isDir(x.mode)&&(T&2097155||T&512)?ERRNO_CODES.EISDIR:FS.nodePermissions(x,FS.flagsToPermissionString(T)):ERRNO_CODES.ENOENT},MAX_OPEN_FDS:4096,nextfd:function(x,T){x=x||0,T=T||FS.MAX_OPEN_FDS;for(var O=x;O<=T;O++)if(!FS.streams[O])return O;throw new FS.ErrnoError(ERRNO_CODES.EMFILE)},getStream:function(x){return FS.streams[x]},createStream:function(x,T,O){FS.FSStream||(FS.FSStream=function(){},FS.FSStream.prototype={},Object.defineProperties(FS.FSStream.prototype,{object:{get:function(){return this.node},set:function(B){this.node=B}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}}));var M=new FS.FSStream;for(var E in x)M[E]=x[E];x=M;var e=FS.nextfd(T,O);return x.fd=e,FS.streams[e]=x,x},closeStream:function(x){FS.streams[x]=null},chrdev_stream_ops:{open:function(x){var T=FS.getDevice(x.node.rdev);x.stream_ops=T.stream_ops,x.stream_ops.open&&x.stream_ops.open(x)},llseek:function(){throw new FS.ErrnoError(ERRNO_CODES.ESPIPE)}},major:function(x){return x>>8},minor:function(x){return x&255},makedev:function(x,T){return x<<8|T},registerDevice:function(x,T){FS.devices[x]={stream_ops:T}},getDevice:function(x){return FS.devices[x]},getMounts:function(x){for(var T=[],O=[x];O.length;){var M=O.pop();T.push(M),O.push.apply(O,M.mounts)}return T},syncfs:function(x,T){typeof x=="function"&&(T=x,x=!1);var O=FS.getMounts(FS.root.mount),M=0;function E(e){if(e)return E.errored?void 0:(E.errored=!0,T(e));++M>=O.length&&T(null)}O.forEach(function(e){if(!e.type.syncfs)return E(null);e.type.syncfs(e,x,E)})},mount:function(x,T,O){var M=O==="/",E=!O,e;if(M&&FS.root)throw new FS.ErrnoError(ERRNO_CODES.EBUSY);if(!M&&!E){var B=FS.lookupPath(O,{follow_mount:!1});if(O=B.path,e=B.node,FS.isMountpoint(e))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);if(!FS.isDir(e.mode))throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR)}var N={type:x,opts:T,mountpoint:O,mounts:[]},Q=x.mount(N);return Q.mount=N,N.root=Q,M?FS.root=Q:e&&(e.mounted=N,e.mount&&e.mount.mounts.push(N)),Q},unmount:function(x){var T=FS.lookupPath(x,{follow_mount:!1});if(!FS.isMountpoint(T.node))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var O=T.node,M=O.mounted,E=FS.getMounts(M);Object.keys(FS.nameTable).forEach(function(B){for(var N=FS.nameTable[B];N;){var Q=N.name_next;E.indexOf(N.mount)!==-1&&FS.destroyNode(N),N=Q}}),O.mounted=null;var e=O.mount.mounts.indexOf(M);assert(e!==-1),O.mount.mounts.splice(e,1)},lookup:function(x,T){return x.node_ops.lookup(x,T)},mknod:function(x,T,O){var M=FS.lookupPath(x,{parent:!0}),E=M.node,e=PATH.basename(x);if(!e||e==="."||e==="..")throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var B=FS.mayCreate(E,e);if(B)throw new FS.ErrnoError(B);if(!E.node_ops.mknod)throw new FS.ErrnoError(ERRNO_CODES.EPERM);return E.node_ops.mknod(E,e,T,O)},create:function(x,T){return T=T!==void 0?T:438,T&=4095,T|=32768,FS.mknod(x,T,0)},mkdir:function(x,T){return T=T!==void 0?T:511,T&=1023,T|=16384,FS.mknod(x,T,0)},mkdev:function(x,T,O){return typeof O>"u"&&(O=T,T=438),T|=8192,FS.mknod(x,T,O)},symlink:function(x,T){if(!PATH.resolve(x))throw new FS.ErrnoError(ERRNO_CODES.ENOENT);var O=FS.lookupPath(T,{parent:!0}),M=O.node;if(!M)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);var E=PATH.basename(T),e=FS.mayCreate(M,E);if(e)throw new FS.ErrnoError(e);if(!M.node_ops.symlink)throw new FS.ErrnoError(ERRNO_CODES.EPERM);return M.node_ops.symlink(M,E,x)},rename:function(x,T){var O=PATH.dirname(x),M=PATH.dirname(T),E=PATH.basename(x),e=PATH.basename(T),B,N,Q;try{B=FS.lookupPath(x,{parent:!0}),N=B.node,B=FS.lookupPath(T,{parent:!0}),Q=B.node}catch{throw new FS.ErrnoError(ERRNO_CODES.EBUSY)}if(!N||!Q)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(N.mount!==Q.mount)throw new FS.ErrnoError(ERRNO_CODES.EXDEV);var P=FS.lookupNode(N,E),A=PATH.relative(x,M);if(A.charAt(0)!==".")throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(A=PATH.relative(T,O),A.charAt(0)!==".")throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY);var C;try{C=FS.lookupNode(Q,e)}catch{}if(P!==C){var V=FS.isDir(P.mode),z=FS.mayDelete(N,E,V);if(z)throw new FS.ErrnoError(z);if(z=C?FS.mayDelete(Q,e,V):FS.mayCreate(Q,e),z)throw new FS.ErrnoError(z);if(!N.node_ops.rename)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isMountpoint(P)||C&&FS.isMountpoint(C))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);if(Q!==N&&(z=FS.nodePermissions(N,"w"),z))throw new FS.ErrnoError(z);try{FS.trackingDelegate.willMovePath&&FS.trackingDelegate.willMovePath(x,T)}catch(H){console.log("FS.trackingDelegate['willMovePath']('"+x+"', '"+T+"') threw an exception: "+H.message)}FS.hashRemoveNode(P);try{N.node_ops.rename(P,Q,e)}catch(H){throw H}finally{FS.hashAddNode(P)}try{FS.trackingDelegate.onMovePath&&FS.trackingDelegate.onMovePath(x,T)}catch(H){console.log("FS.trackingDelegate['onMovePath']('"+x+"', '"+T+"') threw an exception: "+H.message)}}},rmdir:function(x){var T=FS.lookupPath(x,{parent:!0}),O=T.node,M=PATH.basename(x),E=FS.lookupNode(O,M),e=FS.mayDelete(O,M,!0);if(e)throw new FS.ErrnoError(e);if(!O.node_ops.rmdir)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isMountpoint(E))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);try{FS.trackingDelegate.willDeletePath&&FS.trackingDelegate.willDeletePath(x)}catch(B){console.log("FS.trackingDelegate['willDeletePath']('"+x+"') threw an exception: "+B.message)}O.node_ops.rmdir(O,M),FS.destroyNode(E);try{FS.trackingDelegate.onDeletePath&&FS.trackingDelegate.onDeletePath(x)}catch(B){console.log("FS.trackingDelegate['onDeletePath']('"+x+"') threw an exception: "+B.message)}},readdir:function(x){var T=FS.lookupPath(x,{follow:!0}),O=T.node;if(!O.node_ops.readdir)throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR);return O.node_ops.readdir(O)},unlink:function(x){var T=FS.lookupPath(x,{parent:!0}),O=T.node,M=PATH.basename(x),E=FS.lookupNode(O,M),e=FS.mayDelete(O,M,!1);if(e)throw e===ERRNO_CODES.EISDIR&&(e=ERRNO_CODES.EPERM),new FS.ErrnoError(e);if(!O.node_ops.unlink)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isMountpoint(E))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);try{FS.trackingDelegate.willDeletePath&&FS.trackingDelegate.willDeletePath(x)}catch(B){console.log("FS.trackingDelegate['willDeletePath']('"+x+"') threw an exception: "+B.message)}O.node_ops.unlink(O,M),FS.destroyNode(E);try{FS.trackingDelegate.onDeletePath&&FS.trackingDelegate.onDeletePath(x)}catch(B){console.log("FS.trackingDelegate['onDeletePath']('"+x+"') threw an exception: "+B.message)}},readlink:function(x){var T=FS.lookupPath(x),O=T.node;if(!O)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(!O.node_ops.readlink)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return PATH.resolve(FS.getPath(O.parent),O.node_ops.readlink(O))},stat:function(x,T){var O=FS.lookupPath(x,{follow:!T}),M=O.node;if(!M)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(!M.node_ops.getattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);return M.node_ops.getattr(M)},lstat:function(x){return FS.stat(x,!0)},chmod:function(x,T,O){var M;if(typeof x=="string"){var E=FS.lookupPath(x,{follow:!O});M=E.node}else M=x;if(!M.node_ops.setattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);M.node_ops.setattr(M,{mode:T&4095|M.mode&-4096,timestamp:Date.now()})},lchmod:function(x,T){FS.chmod(x,T,!0)},fchmod:function(x,T){var O=FS.getStream(x);if(!O)throw new FS.ErrnoError(ERRNO_CODES.EBADF);FS.chmod(O.node,T)},chown:function(x,T,O,M){var E;if(typeof x=="string"){var e=FS.lookupPath(x,{follow:!M});E=e.node}else E=x;if(!E.node_ops.setattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);E.node_ops.setattr(E,{timestamp:Date.now()})},lchown:function(x,T,O){FS.chown(x,T,O,!0)},fchown:function(x,T,O){var M=FS.getStream(x);if(!M)throw new FS.ErrnoError(ERRNO_CODES.EBADF);FS.chown(M.node,T,O)},truncate:function(x,T){if(T<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var O;if(typeof x=="string"){var M=FS.lookupPath(x,{follow:!0});O=M.node}else O=x;if(!O.node_ops.setattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isDir(O.mode))throw new FS.ErrnoError(ERRNO_CODES.EISDIR);if(!FS.isFile(O.mode))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var E=FS.nodePermissions(O,"w");if(E)throw new FS.ErrnoError(E);O.node_ops.setattr(O,{size:T,timestamp:Date.now()})},ftruncate:function(x,T){var O=FS.getStream(x);if(!O)throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(!(O.flags&2097155))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);FS.truncate(O.node,T)},utime:function(x,T,O){var M=FS.lookupPath(x,{follow:!0}),E=M.node;E.node_ops.setattr(E,{timestamp:Math.max(T,O)})},open:function(x,T,O,M,E){if(x==="")throw new FS.ErrnoError(ERRNO_CODES.ENOENT);T=typeof T=="string"?FS.modeStringToFlags(T):T,O=typeof O>"u"?438:O,T&64?O=O&4095|32768:O=0;var e;if(typeof x=="object")e=x;else{x=PATH.normalize(x);try{var B=FS.lookupPath(x,{follow:!(T&131072)});e=B.node}catch{}}var N=!1;if(T&64)if(e){if(T&128)throw new FS.ErrnoError(ERRNO_CODES.EEXIST)}else e=FS.mknod(x,O,0),N=!0;if(!e)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(FS.isChrdev(e.mode)&&(T&=-513),T&65536&&!FS.isDir(e.mode))throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR);if(!N){var Q=FS.mayOpen(e,T);if(Q)throw new FS.ErrnoError(Q)}T&512&&FS.truncate(e,0),T&=-641;var P=FS.createStream({node:e,path:FS.getPath(e),flags:T,seekable:!0,position:0,stream_ops:e.stream_ops,ungotten:[],error:!1},M,E);P.stream_ops.open&&P.stream_ops.open(P),Module.logReadFiles&&!(T&1)&&(FS.readFiles||(FS.readFiles={}),x in FS.readFiles||(FS.readFiles[x]=1,Module.printErr("read file: "+x)));try{if(FS.trackingDelegate.onOpenFile){var A=0;(T&2097155)!==1&&(A|=FS.tracking.openFlags.READ),T&2097155&&(A|=FS.tracking.openFlags.WRITE),FS.trackingDelegate.onOpenFile(x,A)}}catch(C){console.log("FS.trackingDelegate['onOpenFile']('"+x+"', flags) threw an exception: "+C.message)}return P},close:function(x){x.getdents&&(x.getdents=null);try{x.stream_ops.close&&x.stream_ops.close(x)}catch(T){throw T}finally{FS.closeStream(x.fd)}},llseek:function(x,T,O){if(!x.seekable||!x.stream_ops.llseek)throw new FS.ErrnoError(ERRNO_CODES.ESPIPE);return x.position=x.stream_ops.llseek(x,T,O),x.ungotten=[],x.position},read:function(x,T,O,M,E){if(M<0||E<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if((x.flags&2097155)===1)throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(FS.isDir(x.node.mode))throw new FS.ErrnoError(ERRNO_CODES.EISDIR);if(!x.stream_ops.read)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var e=!0;if(typeof E>"u")E=x.position,e=!1;else if(!x.seekable)throw new FS.ErrnoError(ERRNO_CODES.ESPIPE);var B=x.stream_ops.read(x,T,O,M,E);return e||(x.position+=B),B},write:function(x,T,O,M,E,e){if(M<0||E<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(!(x.flags&2097155))throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(FS.isDir(x.node.mode))throw new FS.ErrnoError(ERRNO_CODES.EISDIR);if(!x.stream_ops.write)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);x.flags&1024&&FS.llseek(x,0,2);var B=!0;if(typeof E>"u")E=x.position,B=!1;else if(!x.seekable)throw new FS.ErrnoError(ERRNO_CODES.ESPIPE);var N=x.stream_ops.write(x,T,O,M,E,e);B||(x.position+=N);try{x.path&&FS.trackingDelegate.onWriteToFile&&FS.trackingDelegate.onWriteToFile(x.path)}catch(Q){console.log("FS.trackingDelegate['onWriteToFile']('"+path+"') threw an exception: "+Q.message)}return N},allocate:function(x,T,O){if(T<0||O<=0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(!(x.flags&2097155))throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(!FS.isFile(x.node.mode)&&!FS.isDir(node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENODEV);if(!x.stream_ops.allocate)throw new FS.ErrnoError(ERRNO_CODES.EOPNOTSUPP);x.stream_ops.allocate(x,T,O)},mmap:function(x,T,O,M,E,e,B){if((x.flags&2097155)===1)throw new FS.ErrnoError(ERRNO_CODES.EACCES);if(!x.stream_ops.mmap)throw new FS.ErrnoError(ERRNO_CODES.ENODEV);return x.stream_ops.mmap(x,T,O,M,E,e,B)},msync:function(x,T,O,M,E){return!x||!x.stream_ops.msync?0:x.stream_ops.msync(x,T,O,M,E)},munmap:function(x){return 0},ioctl:function(x,T,O){if(!x.stream_ops.ioctl)throw new FS.ErrnoError(ERRNO_CODES.ENOTTY);return x.stream_ops.ioctl(x,T,O)},readFile:function(x,T){if(T=T||{},T.flags=T.flags||"r",T.encoding=T.encoding||"binary",T.encoding!=="utf8"&&T.encoding!=="binary")throw new Error('Invalid encoding type "'+T.encoding+'"');var O,M=FS.open(x,T.flags),E=FS.stat(x),e=E.size,B=new Uint8Array(e);return FS.read(M,B,0,e,0),T.encoding==="utf8"?O=UTF8ArrayToString(B,0):T.encoding==="binary"&&(O=B),FS.close(M),O},writeFile:function(x,T,O){if(O=O||{},O.flags=O.flags||"w",O.encoding=O.encoding||"utf8",O.encoding!=="utf8"&&O.encoding!=="binary")throw new Error('Invalid encoding type "'+O.encoding+'"');var M=FS.open(x,O.flags,O.mode);if(O.encoding==="utf8"){var E=new Uint8Array(lengthBytesUTF8(T)+1),e=stringToUTF8Array(T,E,0,E.length);FS.write(M,E,0,e,0,O.canOwn)}else O.encoding==="binary"&&FS.write(M,T,0,T.length,0,O.canOwn);FS.close(M)},cwd:function(){return FS.currentPath},chdir:function(x){var T=FS.lookupPath(x,{follow:!0});if(!FS.isDir(T.node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR);var O=FS.nodePermissions(T.node,"x");if(O)throw new FS.ErrnoError(O);FS.currentPath=T.path},createDefaultDirectories:function(){FS.mkdir("/tmp"),FS.mkdir("/home"),FS.mkdir("/home/web_user")},createDefaultDevices:function(){FS.mkdir("/dev"),FS.registerDevice(FS.makedev(1,3),{read:function(){return 0},write:function(O,M,E,e,B){return e}}),FS.mkdev("/dev/null",FS.makedev(1,3)),TTY.register(FS.makedev(5,0),TTY.default_tty_ops),TTY.register(FS.makedev(6,0),TTY.default_tty1_ops),FS.mkdev("/dev/tty",FS.makedev(5,0)),FS.mkdev("/dev/tty1",FS.makedev(6,0));var x;if(typeof crypto<"u"){var T=new Uint8Array(1);x=function(){return crypto.getRandomValues(T),T[0]}}else ENVIRONMENT_IS_NODE?x=function(){return require("crypto").randomBytes(1)[0]}:x=function(){return Math.random()*256|0};FS.createDevice("/dev","random",x),FS.createDevice("/dev","urandom",x),FS.mkdir("/dev/shm"),FS.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){FS.mkdir("/proc"),FS.mkdir("/proc/self"),FS.mkdir("/proc/self/fd"),FS.mount({mount:function(){var x=FS.createNode("/proc/self","fd",16895,73);return x.node_ops={lookup:function(T,O){var M=+O,E=FS.getStream(M);if(!E)throw new FS.ErrnoError(ERRNO_CODES.EBADF);var e={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return E.path}}};return e.parent=e,e}},x}},{},"/proc/self/fd")},createStandardStreams:function(){Module.stdin?FS.createDevice("/dev","stdin",Module.stdin):FS.symlink("/dev/tty","/dev/stdin"),Module.stdout?FS.createDevice("/dev","stdout",null,Module.stdout):FS.symlink("/dev/tty","/dev/stdout"),Module.stderr?FS.createDevice("/dev","stderr",null,Module.stderr):FS.symlink("/dev/tty1","/dev/stderr");var x=FS.open("/dev/stdin","r");assert(x.fd===0,"invalid handle for stdin ("+x.fd+")");var T=FS.open("/dev/stdout","w");assert(T.fd===1,"invalid handle for stdout ("+T.fd+")");var O=FS.open("/dev/stderr","w");assert(O.fd===2,"invalid handle for stderr ("+O.fd+")")},ensureErrnoError:function(){FS.ErrnoError||(FS.ErrnoError=function(T,O){this.node=O,this.setErrno=function(M){this.errno=M;for(var E in ERRNO_CODES)if(ERRNO_CODES[E]===M){this.code=E;break}},this.setErrno(T),this.message=ERRNO_MESSAGES[T]},FS.ErrnoError.prototype=new Error,FS.ErrnoError.prototype.constructor=FS.ErrnoError,[ERRNO_CODES.ENOENT].forEach(function(x){FS.genericErrors[x]=new FS.ErrnoError(x),FS.genericErrors[x].stack="<generic error, no stack>"}))},staticInit:function(){FS.ensureErrnoError(),FS.nameTable=new Array(4096),FS.mount(MEMFS,{},"/"),FS.createDefaultDirectories(),FS.createDefaultDevices(),FS.createSpecialDirectories(),FS.filesystems={MEMFS,IDBFS,NODEFS,WORKERFS}},init:function(x,T,O){assert(!FS.init.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),FS.init.initialized=!0,FS.ensureErrnoError(),Module.stdin=x||Module.stdin,Module.stdout=T||Module.stdout,Module.stderr=O||Module.stderr,FS.createStandardStreams()},quit:function(){FS.init.initialized=!1;var x=Module._fflush;x&&x(0);for(var T=0;T<FS.streams.length;T++){var O=FS.streams[T];O&&FS.close(O)}},getMode:function(x,T){var O=0;return x&&(O|=365),T&&(O|=146),O},joinPath:function(x,T){var O=PATH.join.apply(null,x);return T&&O[0]=="/"&&(O=O.substr(1)),O},absolutePath:function(x,T){return PATH.resolve(T,x)},standardizePath:function(x){return PATH.normalize(x)},findObject:function(x,T){var O=FS.analyzePath(x,T);return O.exists?O.object:(___setErrNo(O.error),null)},analyzePath:function(x,T){try{var O=FS.lookupPath(x,{follow:!T});x=O.path}catch{}var M={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var O=FS.lookupPath(x,{parent:!0});M.parentExists=!0,M.parentPath=O.path,M.parentObject=O.node,M.name=PATH.basename(x),O=FS.lookupPath(x,{follow:!T}),M.exists=!0,M.path=O.path,M.object=O.node,M.name=O.node.name,M.isRoot=O.path==="/"}catch(E){M.error=E.errno}return M},createFolder:function(x,T,O,M){var E=PATH.join2(typeof x=="string"?x:FS.getPath(x),T),e=FS.getMode(O,M);return FS.mkdir(E,e)},createPath:function(x,T,O,M){x=typeof x=="string"?x:FS.getPath(x);for(var E=T.split("/").reverse();E.length;){var e=E.pop();if(e){var B=PATH.join2(x,e);try{FS.mkdir(B)}catch{}x=B}}return B},createFile:function(x,T,O,M,E){var e=PATH.join2(typeof x=="string"?x:FS.getPath(x),T),B=FS.getMode(M,E);return FS.create(e,B)},createDataFile:function(x,T,O,M,E,e){var B=T?PATH.join2(typeof x=="string"?x:FS.getPath(x),T):x,N=FS.getMode(M,E),Q=FS.create(B,N);if(O){if(typeof O=="string"){for(var P=new Array(O.length),A=0,C=O.length;A<C;++A)P[A]=O.charCodeAt(A);O=P}FS.chmod(Q,N|146);var V=FS.open(Q,"w");FS.write(V,O,0,O.length,0,e),FS.close(V),FS.chmod(Q,N)}return Q},createDevice:function(x,T,O,M){var E=PATH.join2(typeof x=="string"?x:FS.getPath(x),T),e=FS.getMode(!!O,!!M);FS.createDevice.major||(FS.createDevice.major=64);var B=FS.makedev(FS.createDevice.major++,0);return FS.registerDevice(B,{open:function(N){N.seekable=!1},close:function(N){M&&M.buffer&&M.buffer.length&&M(10)},read:function(N,Q,P,A,C){for(var V=0,z=0;z<A;z++){var H;try{H=O()}catch{throw new FS.ErrnoError(ERRNO_CODES.EIO)}if(H===void 0&&V===0)throw new FS.ErrnoError(ERRNO_CODES.EAGAIN);if(H==null)break;V++,Q[P+z]=H}return V&&(N.node.timestamp=Date.now()),V},write:function(N,Q,P,A,C){for(var V=0;V<A;V++)try{M(Q[P+V])}catch{throw new FS.ErrnoError(ERRNO_CODES.EIO)}return A&&(N.node.timestamp=Date.now()),V}}),FS.mkdev(E,e,B)},createLink:function(x,T,O,M,E){var e=PATH.join2(typeof x=="string"?x:FS.getPath(x),T);return FS.symlink(O,e)},forceLoadFile:function(x){if(x.isDevice||x.isFolder||x.link||x.contents)return!0;var T=!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(Module.read)try{x.contents=intArrayFromString(Module.read(x.url),!0),x.usedBytes=x.contents.length}catch{T=!1}else throw new Error("Cannot load without read() or XMLHttpRequest.");return T||___setErrNo(ERRNO_CODES.EIO),T},createLazyFile:function(x,T,O,M,E){function e(){this.lengthKnown=!1,this.chunks=[]}if(e.prototype.get=function(V){if(!(V>this.length-1||V<0)){var z=V%this.chunkSize,H=V/this.chunkSize|0;return this.getter(H)[z]}},e.prototype.setDataGetter=function(V){this.getter=V},e.prototype.cacheLength=function(){var V=new XMLHttpRequest;if(V.open("HEAD",O,!1),V.send(null),!(V.status>=200&&V.status<300||V.status===304))throw new Error("Couldn't load "+O+". Status: "+V.status);var z=Number(V.getResponseHeader("Content-length")),H,G=(H=V.getResponseHeader("Accept-Ranges"))&&H==="bytes",$=1024*1024;G||($=z);var k=function(Z,ee){if(Z>ee)throw new Error("invalid range ("+Z+", "+ee+") or no bytes requested!");if(ee>z-1)throw new Error("only "+z+" bytes available! programmer error!");var he=new XMLHttpRequest;if(he.open("GET",O,!1),z!==$&&he.setRequestHeader("Range","bytes="+Z+"-"+ee),typeof Uint8Array<"u"&&(he.responseType="arraybuffer"),he.overrideMimeType&&he.overrideMimeType("text/plain; charset=x-user-defined"),he.send(null),!(he.status>=200&&he.status<300||he.status===304))throw new Error("Couldn't load "+O+". Status: "+he.status);return he.response!==void 0?new Uint8Array(he.response||[]):intArrayFromString(he.responseText||"",!0)},K=this;K.setDataGetter(function(Z){var ee=Z*$,he=(Z+1)*$-1;if(he=Math.min(he,z-1),typeof K.chunks[Z]>"u"&&(K.chunks[Z]=k(ee,he)),typeof K.chunks[Z]>"u")throw new Error("doXHR failed!");return K.chunks[Z]}),this._length=z,this._chunkSize=$,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!ENVIRONMENT_IS_WORKER)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var B=new e;Object.defineProperty(B,"length",{get:function(){return this.lengthKnown||this.cacheLength(),this._length}}),Object.defineProperty(B,"chunkSize",{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}});var N={isDevice:!1,contents:B}}else var N={isDevice:!1,url:O};var Q=FS.createFile(x,T,N,M,E);N.contents?Q.contents=N.contents:N.url&&(Q.contents=null,Q.url=N.url),Object.defineProperty(Q,"usedBytes",{get:function(){return this.contents.length}});var P={},A=Object.keys(Q.stream_ops);return A.forEach(function(C){var V=Q.stream_ops[C];P[C]=function(){if(!FS.forceLoadFile(Q))throw new FS.ErrnoError(ERRNO_CODES.EIO);return V.apply(null,arguments)}}),P.read=function(V,z,H,G,$){if(!FS.forceLoadFile(Q))throw new FS.ErrnoError(ERRNO_CODES.EIO);var k=V.node.contents;if($>=k.length)return 0;var K=Math.min(k.length-$,G);if(assert(K>=0),k.slice)for(var Z=0;Z<K;Z++)z[H+Z]=k[$+Z];else for(var Z=0;Z<K;Z++)z[H+Z]=k.get($+Z);return K},Q.stream_ops=P,Q},createPreloadedFile:function(x,T,O,M,E,e,B,N,Q,P){Browser.init();var A=T?PATH.resolve(PATH.join2(x,T)):x,C="cp "+A;function V(z){function H($){P&&P(),N||FS.createDataFile(x,T,$,M,E,Q),e&&e(),removeRunDependency(C)}var G=!1;Module.preloadPlugins.forEach(function($){G||$.canHandle(A)&&($.handle(z,A,H,function(){B&&B(),removeRunDependency(C)}),G=!0)}),G||H(z)}addRunDependency(C),typeof O=="string"?Browser.asyncLoad(O,function(z){V(z)},B):V(O)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(x,T,O){T=T||function(){},O=O||function(){};var M=FS.indexedDB();try{var E=M.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return O(e)}E.onupgradeneeded=function(){console.log("creating db");var B=E.result;B.createObjectStore(FS.DB_STORE_NAME)},E.onsuccess=function(){var B=E.result,N=B.transaction([FS.DB_STORE_NAME],"readwrite"),Q=N.objectStore(FS.DB_STORE_NAME),P=0,A=0,C=x.length;function V(){A==0?T():O()}x.forEach(function(z){var H=Q.put(FS.analyzePath(z).object.contents,z);H.onsuccess=function(){P++,P+A==C&&V()},H.onerror=function(){A++,P+A==C&&V()}}),N.onerror=O},E.onerror=O},loadFilesFromDB:function(x,T,O){T=T||function(){},O=O||function(){};var M=FS.indexedDB();try{var E=M.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return O(e)}E.onupgradeneeded=O,E.onsuccess=function(){var B=E.result;try{var N=B.transaction([FS.DB_STORE_NAME],"readonly")}catch(z){O(z);return}var Q=N.objectStore(FS.DB_STORE_NAME),P=0,A=0,C=x.length;function V(){A==0?T():O()}x.forEach(function(z){var H=Q.get(z);H.onsuccess=function(){FS.analyzePath(z).exists&&FS.unlink(z),FS.createDataFile(PATH.dirname(z),PATH.basename(z),H.result,!0,!0,!0),P++,P+A==C&&V()},H.onerror=function(){A++,P+A==C&&V()}}),N.onerror=O},E.onerror=O}},SYSCALLS={DEFAULT_POLLMASK:5,mappings:{},umask:511,calculateAt:function(x,T){if(T[0]!=="/"){var O;if(x===-100)O=FS.cwd();else{var M=FS.getStream(x);if(!M)throw new FS.ErrnoError(ERRNO_CODES.EBADF);O=M.path}T=PATH.join2(O,T)}return T},doStat:function(x,T,O){try{var M=x(T)}catch(E){if(E&&E.node&&PATH.normalize(T)!==PATH.normalize(FS.getPath(E.node)))return-ERRNO_CODES.ENOTDIR;throw E}return HEAP32[O>>2]=M.dev,HEAP32[O+4>>2]=0,HEAP32[O+8>>2]=M.ino,HEAP32[O+12>>2]=M.mode,HEAP32[O+16>>2]=M.nlink,HEAP32[O+20>>2]=M.uid,HEAP32[O+24>>2]=M.gid,HEAP32[O+28>>2]=M.rdev,HEAP32[O+32>>2]=0,HEAP32[O+36>>2]=M.size,HEAP32[O+40>>2]=4096,HEAP32[O+44>>2]=M.blocks,HEAP32[O+48>>2]=M.atime.getTime()/1e3|0,HEAP32[O+52>>2]=0,HEAP32[O+56>>2]=M.mtime.getTime()/1e3|0,HEAP32[O+60>>2]=0,HEAP32[O+64>>2]=M.ctime.getTime()/1e3|0,HEAP32[O+68>>2]=0,HEAP32[O+72>>2]=M.ino,0},doMsync:function(x,T,O,M){var E=new Uint8Array(HEAPU8.subarray(x,x+O));FS.msync(T,E,0,O,M)},doMkdir:function(x,T){return x=PATH.normalize(x),x[x.length-1]==="/"&&(x=x.substr(0,x.length-1)),FS.mkdir(x,T,0),0},doMknod:function(x,T,O){switch(T&61440){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-ERRNO_CODES.EINVAL}return FS.mknod(x,T,O),0},doReadlink:function(x,T,O){if(O<=0)return-ERRNO_CODES.EINVAL;var M=FS.readlink(x);return M=M.slice(0,Math.max(0,O)),writeStringToMemory(M,T,!0),M.length},doAccess:function(x,T){if(T&-8)return-ERRNO_CODES.EINVAL;var O,M=FS.lookupPath(x,{follow:!0});O=M.node;var E="";return T&4&&(E+="r"),T&2&&(E+="w"),T&1&&(E+="x"),E&&FS.nodePermissions(O,E)?-ERRNO_CODES.EACCES:0},doDup:function(x,T,O){var M=FS.getStream(O);return M&&FS.close(M),FS.open(x,T,0,O,O).fd},doReadv:function(x,T,O,M){for(var E=0,e=0;e<O;e++){var B=HEAP32[T+e*8>>2],N=HEAP32[T+(e*8+4)>>2],Q=FS.read(x,HEAP8,B,N,M);if(Q<0)return-1;if(E+=Q,Q<N)break}return E},doWritev:function(x,T,O,M){for(var E=0,e=0;e<O;e++){var B=HEAP32[T+e*8>>2],N=HEAP32[T+(e*8+4)>>2],Q=FS.write(x,HEAP8,B,N,M);if(Q<0)return-1;E+=Q}return E},varargs:0,get:function(x){SYSCALLS.varargs+=4;var T=HEAP32[SYSCALLS.varargs-4>>2];return T},getStr:function(){var x=Pointer_stringify(SYSCALLS.get());return x},getStreamFromFD:function(){var x=FS.getStream(SYSCALLS.get());if(!x)throw new FS.ErrnoError(ERRNO_CODES.EBADF);return x},getSocketFromFD:function(){var x=SOCKFS.getSocket(SYSCALLS.get());if(!x)throw new FS.ErrnoError(ERRNO_CODES.EBADF);return x},getSocketAddress:function(x){var T=SYSCALLS.get(),O=SYSCALLS.get();if(x&&T===0)return null;var M=__read_sockaddr(T,O);if(M.errno)throw new FS.ErrnoError(M.errno);return M.addr=DNS.lookup_addr(M.addr)||M.addr,M},get64:function(){var x=SYSCALLS.get(),T=SYSCALLS.get();return x>=0?assert(T===0):assert(T===-1),x},getZero:function(){assert(SYSCALLS.get()===0)}};function ___syscall5(x,T){SYSCALLS.varargs=T;try{var O=SYSCALLS.getStr(),M=SYSCALLS.get(),E=SYSCALLS.get(),e=FS.open(O,M,E);return e.fd}catch(B){return(typeof FS>"u"||!(B instanceof FS.ErrnoError))&&abort(B),-B.errno}}function _emscripten_memcpy_big(x,T,O){return HEAPU8.set(HEAPU8.subarray(T,T+O),x),x}Module._memcpy=_memcpy;function ___syscall6(x,T){SYSCALLS.varargs=T;try{var O=SYSCALLS.getStreamFromFD();return FS.close(O),0}catch(M){return(typeof FS>"u"||!(M instanceof FS.ErrnoError))&&abort(M),-M.errno}}var _cos=Math_cos;function _sbrk(x){var T=_sbrk;T.called||(DYNAMICTOP=alignMemoryPage(DYNAMICTOP),T.called=!0,assert(Runtime.dynamicAlloc),T.alloc=Runtime.dynamicAlloc,Runtime.dynamicAlloc=function(){abort("cannot dynamically allocate, sbrk now has control")});var O=DYNAMICTOP;if(x!=0){var M=T.alloc(x);if(!M)return-1>>>0}return O}var _BItoD=!0;function ___syscall54(x,T){SYSCALLS.varargs=T;try{var O=SYSCALLS.getStreamFromFD(),M=SYSCALLS.get();switch(M){case 21505:return O.tty?0:-ERRNO_CODES.ENOTTY;case 21506:return O.tty?0:-ERRNO_CODES.ENOTTY;case 21519:{if(!O.tty)return-ERRNO_CODES.ENOTTY;var E=SYSCALLS.get();return HEAP32[E>>2]=0,0}case 21520:return O.tty?-ERRNO_CODES.EINVAL:-ERRNO_CODES.ENOTTY;case 21531:{var E=SYSCALLS.get();return FS.ioctl(O,M,E)}default:abort("bad ioctl syscall "+M)}}catch(e){return(typeof FS>"u"||!(e instanceof FS.ErrnoError))&&abort(e),-e.errno}}var _ceilf=Math_ceil;function __embind_register_memory_view(x,T,O){var M=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],E=M[T];function e(B){B=B>>2;var N=HEAPU32,Q=N[B],P=N[B+1];return new E(N.buffer,P,Q)}O=readLatin1String(O),registerType(x,{name:O,fromWireType:e,argPackAdvance:8,readValueFromPointer:e},{ignoreDuplicateRegistrations:!0})}function _time(x){var T=Date.now()/1e3|0;return x&&(HEAP32[x>>2]=T),T}function _pthread_self(){return 0}function ___syscall140(x,T){SYSCALLS.varargs=T;try{var O=SYSCALLS.getStreamFromFD(),M=SYSCALLS.get(),E=SYSCALLS.get(),e=SYSCALLS.get(),B=SYSCALLS.get(),N=E;return assert(M===0),FS.llseek(O,N,B),HEAP32[e>>2]=O.position,O.getdents&&N===0&&B===0&&(O.getdents=null),0}catch(Q){return(typeof FS>"u"||!(Q instanceof FS.ErrnoError))&&abort(Q),-Q.errno}}function ___syscall146(x,T){SYSCALLS.varargs=T;try{var O=SYSCALLS.getStreamFromFD(),M=SYSCALLS.get(),E=SYSCALLS.get();return SYSCALLS.doWritev(O,M,E)}catch(e){return(typeof FS>"u"||!(e instanceof FS.ErrnoError))&&abort(e),-e.errno}}function ___syscall221(x,T){SYSCALLS.varargs=T;try{var O=SYSCALLS.getStreamFromFD(),M=SYSCALLS.get();switch(M){case 0:{var E=SYSCALLS.get();if(E<0)return-ERRNO_CODES.EINVAL;var e;return e=FS.open(O.path,O.flags,0,E),e.fd}case 1:case 2:return 0;case 3:return O.flags;case 4:{var E=SYSCALLS.get();return O.flags|=E,0}case 12:case 12:{var E=SYSCALLS.get(),B=0;return HEAP16[E+B>>1]=2,0}case 13:case 14:case 13:case 14:return 0;case 16:case 8:return-ERRNO_CODES.EINVAL;case 9:return ___setErrNo(ERRNO_CODES.EINVAL),-1;default:return-ERRNO_CODES.EINVAL}}catch(N){return(typeof FS>"u"||!(N instanceof FS.ErrnoError))&&abort(N),-N.errno}}function ___syscall145(x,T){SYSCALLS.varargs=T;try{var O=SYSCALLS.getStreamFromFD(),M=SYSCALLS.get(),E=SYSCALLS.get();return SYSCALLS.doReadv(O,M,E)}catch(e){return(typeof FS>"u"||!(e instanceof FS.ErrnoError))&&abort(e),-e.errno}}var ___dso_handle=allocate(1,"i32*",ALLOC_STATIC);if(embind_init_charCodes(),BindingError=Module.BindingError=extendError(Error,"BindingError"),InternalError=Module.InternalError=extendError(Error,"InternalError"),init_emval(),UnboundTypeError=Module.UnboundTypeError=extendError(Error,"UnboundTypeError"),FS.staticInit(),__ATINIT__.unshift(function(){!Module.noFSInit&&!FS.init.initialized&&FS.init()}),__ATMAIN__.push(function(){FS.ignorePermissions=!1}),__ATEXIT__.push(function(){FS.quit()}),Module.FS_createFolder=FS.createFolder,Module.FS_createPath=FS.createPath,Module.FS_createDataFile=FS.createDataFile,Module.FS_createPreloadedFile=FS.createPreloadedFile,Module.FS_createLazyFile=FS.createLazyFile,Module.FS_createLink=FS.createLink,Module.FS_createDevice=FS.createDevice,Module.FS_unlink=FS.unlink,__ATINIT__.unshift(function(){TTY.init()}),__ATEXIT__.push(function(){TTY.shutdown()}),ENVIRONMENT_IS_NODE){var fs=require("fs"),NODEJS_PATH=require("path");NODEFS.staticInit()}STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP),staticSealed=!0,STACK_MAX=STACK_BASE+TOTAL_STACK,DYNAMIC_BASE=DYNAMICTOP=Runtime.alignMemory(STACK_MAX),assert(DYNAMIC_BASE<TOTAL_MEMORY,"TOTAL_MEMORY not big enough for stack");var cttz_i8=allocate([8,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,7,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0],"i8",ALLOC_DYNAMIC);function invoke_iiii(x,T,O,M){try{return Module.dynCall_iiii(x,T,O,M)}catch(E){if(typeof E!="number"&&E!=="longjmp")throw E;asm.setThrew(1,0)}}function invoke_viiiii(x,T,O,M,E,e){try{Module.dynCall_viiiii(x,T,O,M,E,e)}catch(B){if(typeof B!="number"&&B!=="longjmp")throw B;asm.setThrew(1,0)}}function invoke_dii(x,T,O){try{return Module.dynCall_dii(x,T,O)}catch(M){if(typeof M!="number"&&M!=="longjmp")throw M;asm.setThrew(1,0)}}function invoke_vid(x,T,O){try{Module.dynCall_vid(x,T,O)}catch(M){if(typeof M!="number"&&M!=="longjmp")throw M;asm.setThrew(1,0)}}function invoke_di(x,T){try{return Module.dynCall_di(x,T)}catch(O){if(typeof O!="number"&&O!=="longjmp")throw O;asm.setThrew(1,0)}}function invoke_i(x){try{return Module.dynCall_i(x)}catch(T){if(typeof T!="number"&&T!=="longjmp")throw T;asm.setThrew(1,0)}}function invoke_vi(x,T){try{Module.dynCall_vi(x,T)}catch(O){if(typeof O!="number"&&O!=="longjmp")throw O;asm.setThrew(1,0)}}function invoke_vii(x,T,O){try{Module.dynCall_vii(x,T,O)}catch(M){if(typeof M!="number"&&M!=="longjmp")throw M;asm.setThrew(1,0)}}function invoke_ii(x,T){try{return Module.dynCall_ii(x,T)}catch(O){if(typeof O!="number"&&O!=="longjmp")throw O;asm.setThrew(1,0)}}function invoke_viii(x,T,O,M){try{Module.dynCall_viii(x,T,O,M)}catch(E){if(typeof E!="number"&&E!=="longjmp")throw E;asm.setThrew(1,0)}}function invoke_v(x){try{Module.dynCall_v(x)}catch(T){if(typeof T!="number"&&T!=="longjmp")throw T;asm.setThrew(1,0)}}function invoke_viid(x,T,O,M){try{Module.dynCall_viid(x,T,O,M)}catch(E){if(typeof E!="number"&&E!=="longjmp")throw E;asm.setThrew(1,0)}}function invoke_iiiii(x,T,O,M,E){try{return Module.dynCall_iiiii(x,T,O,M,E)}catch(e){if(typeof e!="number"&&e!=="longjmp")throw e;asm.setThrew(1,0)}}function invoke_viiiiii(x,T,O,M,E,e,B){try{Module.dynCall_viiiiii(x,T,O,M,E,e,B)}catch(N){if(typeof N!="number"&&N!=="longjmp")throw N;asm.setThrew(1,0)}}function invoke_iii(x,T,O){try{return Module.dynCall_iii(x,T,O)}catch(M){if(typeof M!="number"&&M!=="longjmp")throw M;asm.setThrew(1,0)}}function invoke_viiii(x,T,O,M,E){try{Module.dynCall_viiii(x,T,O,M,E)}catch(e){if(typeof e!="number"&&e!=="longjmp")throw e;asm.setThrew(1,0)}}Module.asmGlobalArg={Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0},Module.asmLibraryArg={abort,assert,invoke_iiii,invoke_viiiii,invoke_dii,invoke_vid,invoke_di,invoke_i,invoke_vi,invoke_vii,invoke_ii,invoke_viii,invoke_v,invoke_viid,invoke_iiiii,invoke_viiiiii,invoke_iii,invoke_viiii,_fabs,___syscall221,_sin,floatReadValueFromPointer,simpleReadValueFromPointer,integerReadValueFromPointer,__embind_register_memory_view,throwInternalError,get_first_emval,_abort,count_emval_handles,_pthread_cleanup_push,__embind_register_integer,extendError,___assert_fail,init_emval,__embind_register_void,___cxa_find_matching_catch,_ceilf,getShiftFromSize,__embind_register_function,embind_init_charCodes,_emscripten_asm_const_33,throwBindingError,___setErrNo,__emval_register,_sbrk,readLatin1String,___cxa_allocate_exception,_emscripten_memcpy_big,__embind_register_bool,___resumeException,__ZSt18uncaught_exceptionv,_sysconf,_embind_repr,__embind_register_std_wstring,createNamedFunction,__embind_register_emval,_cos,throwUnboundTypeError,_pthread_self,craftInvokerFunction,__emval_decref,_sqrt,__embind_register_float,makeLegalFunctionName,___syscall54,___unlock,heap32VectorToArray,_pthread_cleanup_pop,whenDependentTypesAreResolved,_exit,__embind_register_std_string,new_,___cxa_atexit,registerType,___cxa_throw,__exit,___lock,___syscall6,___syscall5,ensureOverloadTable,__embind_register_constant,_time,requireFunction,runDestructors,getTypeName,_atexit,___syscall140,exposePublicSymbol,_emscripten_asm_const_5,_emscripten_asm_const_4,replacePublicSymbol,___syscall145,___syscall146,STACKTOP,STACK_MAX,tempDoublePtr,ABORT,cttz_i8,___dso_handle};var asm=function(x,T,O){var M=new x.Int8Array(O),E=new x.Int16Array(O),e=new x.Int32Array(O),B=new x.Uint8Array(O),N=new x.Uint16Array(O),Q=new x.Uint32Array(O),P=new x.Float32Array(O),A=new x.Float64Array(O),C=T.STACKTOP|0,V=T.STACK_MAX|0,z=T.tempDoublePtr|0,H=T.ABORT|0,G=T.cttz_i8|0,$=T.___dso_handle|0,k=0,K=0,Z=0,ee=0,he=x.NaN,ue=x.Infinity,ve=0,be=0,Te=0,ye=0,De=0,Ce=0,Re=0,Qe=0,ot=0,Je=0,Mt=0,Zt=0,kt=0,si=0,_i=0,Ri=0,er=0,Ki=0,p0=0,ln=x.Math.floor,Ur=x.Math.abs,tr=x.Math.sqrt,K0=x.Math.pow,I0=x.Math.cos,A0=x.Math.sin,os=x.Math.tan,J0=x.Math.acos,as=x.Math.asin,R0=x.Math.atan,Hn=x.Math.atan2,Z0=x.Math.exp,ls=x.Math.log,tn=x.Math.ceil,Oe=x.Math.imul,fe=x.Math.min,Ee=x.Math.clz32,_e=T.abort,et=T.assert,dt=T.invoke_iiii,vt=T.invoke_viiiii,Yt=T.invoke_dii,zi=T.invoke_vid,cr=T.invoke_di,qr=T.invoke_i,ur=T.invoke_vi,Nr=T.invoke_vii,Is=T.invoke_ii,rn=T.invoke_viii,Pn=T.invoke_v,cs=T.invoke_viid,Tr=T.invoke_iiiii,B0=T.invoke_viiiiii,yn=T.invoke_iii,He=T.invoke_viiii,Ke=T._fabs,pt=T.___syscall221,Xt=T._sin,Kt=T.floatReadValueFromPointer,Bt=T.simpleReadValueFromPointer,ti=T.integerReadValueFromPointer,Wt=T.__embind_register_memory_view,ui=T.throwInternalError,Ut=T.get_first_emval,st=T._abort,dr=T.count_emval_handles,Di=T._pthread_cleanup_push,Mi=T.__embind_register_integer,Ir=T.extendError,Vi=T.___assert_fail,_r=T.init_emval,Li=T.__embind_register_void,wi=T.___cxa_find_matching_catch,Ji=T._ceilf,Qr=T.getShiftFromSize,ki=T.__embind_register_function,Hr=T.embind_init_charCodes,Xr=T._emscripten_asm_const_33,Yr=T.throwBindingError,gr=T.___setErrNo,ir=T.__emval_register,Fn=T._sbrk,$0=T.readLatin1String,zr=T.___cxa_allocate_exception,r0=T._emscripten_memcpy_big,m0=T.__embind_register_bool,D0=T.___resumeException,n0=T.__ZSt18uncaught_exceptionv,x0=T._sysconf,Vn=T._embind_repr,g0=T.__embind_register_std_wstring,L0=T.createNamedFunction,s0=T.__embind_register_emval,v0=T._cos,hs=T.throwUnboundTypeError,Pr=T._pthread_self,La=T.craftInvokerFunction,po=T.__emval_decref,hn=T._sqrt,oe=T.__embind_register_float,ge=T.makeLegalFunctionName,Me=T.___syscall54,Ie=T.___unlock,Ue=T.heap32VectorToArray,Xe=T._pthread_cleanup_pop,Ct=T.whenDependentTypesAreResolved,yt=T._exit,$t=T.__embind_register_std_string,xt=T.new_,_t=T.___cxa_atexit,bi=T.registerType,Bi=T.___cxa_throw,Wi=T.__exit,qi=T.___lock,Zi=T.___syscall6,rr=T.___syscall5,vr=T.ensureOverloadTable,di=T.__embind_register_constant,wn=T._time,nn=T.requireFunction,On=T.runDestructors,o0=T.getTypeName,E0=T._atexit,bn=T.___syscall140,Tn=T.exposePublicSymbol,sn=T._emscripten_asm_const_5,a0=T._emscripten_asm_const_4,Rs=T.replacePublicSymbol,_0=T.___syscall145,M0=T.___syscall146,us=0;function Bs(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0;if(We=C,C=C+16|0,se=We,U=(a|0)/2|0,Ae=(c|0)/2|0,d=e[r>>2]|0,ae=Ae+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ae,U)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(U|0));)h=h+2|0,l=l+2|0;if(ie=U+-1|0,(c|0)>1)for(t=0,h=d,l=d+(ie<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(Ae|0));)h=h+(U<<1)|0,l=l+(U<<1)|0;l=r+1179664|0,h=U+1|0,J=0-U|0,F=1-U|0,ne=~U,R=a+4|0;e:do if((ae|0)>1){W=(ie|0)>1,t=(e[r+4>>2]|0)+h|0,q=1,c=s+((a<<1)+2)|0,s=d+(h<<1)|0,h=0;t:for(;;){if(W)for(_=1,y=c,g=h;;){do if((B[y>>0]|0|0)>(o|0))E[s>>1]=0,M[t>>0]=0,h=g;else{if(M[t>>0]=-1,h=E[s+(J<<1)>>1]|0,h<<16>>16>0){E[s>>1]=h,h=(h<<16>>16)*7|0,f=r+1310736+(h+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(h+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(h+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,e[r+1310736+(h+-1<<2)>>2]=q,h=g;break}if(a=E[s+(F<<1)>>1]|0,d=a<<16>>16,h=E[s+(ne<<1)>>1]|0,f=h<<16>>16,c=h<<16>>16>0,a<<16>>16<=0){if(c){E[s>>1]=h,h=f*7|0,c=r+1310736+(h+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=r+1310736+(h+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+_,c=r+1310736+(h+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+q,c=r+1310736+(h+-3<<2)|0,(e[c>>2]|0)<(_|0)&&(e[c>>2]=_),e[r+1310736+(h+-1<<2)>>2]=q,h=g;break}if(h=E[s+-2>>1]|0,h<<16>>16>0){if(E[s>>1]=h,h=(h<<16>>16)*7|0,f=r+1310736+(h+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(h+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(h+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,h=r+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(_|0)){h=g;break}e[h>>2]=_,h=g;break}else{if(h=g+1|0,(g|0)>32767)break t;E[s>>1]=h,e[r+1179664+(g<<2)>>2]=h<<16>>16,g=g*7|0,e[r+1310736+(g<<2)>>2]=1,e[r+1310736+(g+1<<2)>>2]=_,e[r+1310736+(g+2<<2)>>2]=q,e[r+1310736+(g+3<<2)>>2]=_,e[r+1310736+(g+4<<2)>>2]=_,e[r+1310736+(g+5<<2)>>2]=q,e[r+1310736+(g+6<<2)>>2]=q;break}}if(c){if(h=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+(f+-1<<2)>>2]|0,(h|0)>(d|0))if(E[s>>1]=d,(g|0)>0)for(c=0,a=l;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),c=c+1|0,(c|0)>=(g|0)){h=d;break}else a=a+4|0;else h=d;else if(E[s>>1]=h,(h|0)<(d|0)&(g|0)>0)for(c=0,a=l;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),c=c+1|0,!((c|0)>=(g|0));)a=a+4|0;h=(h<<16>>16)*7|0,f=r+1310736+(h+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(h+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(h+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,e[r+1310736+(h+-1<<2)>>2]=q,h=g;break}if(c=E[s+-2>>1]|0,c<<16>>16<=0){E[s>>1]=a,h=d*7|0,c=r+1310736+(h+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=r+1310736+(h+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+_,c=r+1310736+(h+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+q,c=r+1310736+(h+-4<<2)|0,(e[c>>2]|0)>(_|0)&&(e[c>>2]=_),e[r+1310736+(h+-1<<2)>>2]=q,h=g;break}if(h=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+((c<<16>>16)+-1<<2)>>2]|0,(h|0)>(d|0))if(E[s>>1]=d,(g|0)>0)for(c=0,a=l;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),c=c+1|0,(c|0)>=(g|0)){h=d;break}else a=a+4|0;else h=d;else if(E[s>>1]=h,(h|0)<(d|0)&(g|0)>0)for(c=0,a=l;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),c=c+1|0,!((c|0)>=(g|0));)a=a+4|0;h=(h<<16>>16)*7|0,f=r+1310736+(h+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(h+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,h=r+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+q,h=g}while(!1);if(_=_+1|0,c=y+2|0,s=s+2|0,t=t+1|0,(_|0)>=(ie|0))break;y=c,g=h}if(q=q+1|0,(q|0)>=(ae|0)){d=h,X=52;break e}else t=t+2|0,c=c+R|0,s=s+4|0}ft(3,3904,se),t=-1}else d=0,X=52;while(!1);if((X|0)==52){if(s=r+12|0,(d|0)<1)h=1;else for(c=1,h=1;t=e[l>>2]|0,(t|0)==(c|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(c|0)<(d|0);)c=c+1|0,l=l+4|0;if(a=r+8|0,t=h+-1|0,e[a>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=U,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=Ae,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[a>>2]|0))}if((d|0)>0){s=0;do l=(e[r+1179664+(s<<2)>>2]|0)+-1|0,c=s*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(c<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(c+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(c+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(c+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(c+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(c+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(c+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),s=s+1|0;while((s|0)<(d|0))}if((e[a>>2]|0)>0){t=0;do U=r+12+(t<<2)|0,Ae=t<<1,X=r+655376+(Ae<<3)|0,A[X>>3]=+A[X>>3]/+(e[U>>2]|0),Ae=r+655376+((Ae|1)<<3)|0,A[Ae>>3]=+A[Ae>>3]/+(e[U>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0));t=0}else t=0}else t=0}return C=We,t|0}function Ds(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0;if(We=C,C=C+16|0,se=We,U=(a|0)/2|0,Ae=(c|0)/2|0,d=e[r>>2]|0,ae=Ae+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ae,U)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(U|0));)h=h+2|0,l=l+2|0;if(ie=U+-1|0,(c|0)>1)for(t=0,h=d,l=d+(ie<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(Ae|0));)h=h+(U<<1)|0,l=l+(U<<1)|0;l=r+1179664|0,h=U+1|0,J=0-U|0,F=1-U|0,ne=~U,R=(a<<1)+8|0;e:do if((ae|0)>1){W=(ie|0)>1,t=(e[r+4>>2]|0)+h|0,q=1,c=s+((a<<2)+4)|0,s=d+(h<<1)|0,h=0;t:for(;;){if(W)for(_=1,y=c,g=h;;){do if((B[y+1>>0]|0|0)>(o|0))E[s>>1]=0,M[t>>0]=0,h=g;else{if(M[t>>0]=-1,h=E[s+(J<<1)>>1]|0,h<<16>>16>0){E[s>>1]=h,h=(h<<16>>16)*7|0,f=r+1310736+(h+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(h+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(h+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,e[r+1310736+(h+-1<<2)>>2]=q,h=g;break}if(a=E[s+(F<<1)>>1]|0,d=a<<16>>16,h=E[s+(ne<<1)>>1]|0,f=h<<16>>16,c=h<<16>>16>0,a<<16>>16<=0){if(c){E[s>>1]=h,h=f*7|0,c=r+1310736+(h+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=r+1310736+(h+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+_,c=r+1310736+(h+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+q,c=r+1310736+(h+-3<<2)|0,(e[c>>2]|0)<(_|0)&&(e[c>>2]=_),e[r+1310736+(h+-1<<2)>>2]=q,h=g;break}if(h=E[s+-2>>1]|0,h<<16>>16>0){if(E[s>>1]=h,h=(h<<16>>16)*7|0,f=r+1310736+(h+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(h+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(h+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,h=r+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(_|0)){h=g;break}e[h>>2]=_,h=g;break}else{if(h=g+1|0,(g|0)>32767)break t;E[s>>1]=h,e[r+1179664+(g<<2)>>2]=h<<16>>16,g=g*7|0,e[r+1310736+(g<<2)>>2]=1,e[r+1310736+(g+1<<2)>>2]=_,e[r+1310736+(g+2<<2)>>2]=q,e[r+1310736+(g+3<<2)>>2]=_,e[r+1310736+(g+4<<2)>>2]=_,e[r+1310736+(g+5<<2)>>2]=q,e[r+1310736+(g+6<<2)>>2]=q;break}}if(c){if(h=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+(f+-1<<2)>>2]|0,(h|0)>(d|0))if(E[s>>1]=d,(g|0)>0)for(c=0,a=l;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),c=c+1|0,(c|0)>=(g|0)){h=d;break}else a=a+4|0;else h=d;else if(E[s>>1]=h,(h|0)<(d|0)&(g|0)>0)for(c=0,a=l;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),c=c+1|0,!((c|0)>=(g|0));)a=a+4|0;h=(h<<16>>16)*7|0,f=r+1310736+(h+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(h+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(h+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,e[r+1310736+(h+-1<<2)>>2]=q,h=g;break}if(c=E[s+-2>>1]|0,c<<16>>16<=0){E[s>>1]=a,h=d*7|0,c=r+1310736+(h+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=r+1310736+(h+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+_,c=r+1310736+(h+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+q,c=r+1310736+(h+-4<<2)|0,(e[c>>2]|0)>(_|0)&&(e[c>>2]=_),e[r+1310736+(h+-1<<2)>>2]=q,h=g;break}if(h=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+((c<<16>>16)+-1<<2)>>2]|0,(h|0)>(d|0))if(E[s>>1]=d,(g|0)>0)for(c=0,a=l;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),c=c+1|0,(c|0)>=(g|0)){h=d;break}else a=a+4|0;else h=d;else if(E[s>>1]=h,(h|0)<(d|0)&(g|0)>0)for(c=0,a=l;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),c=c+1|0,!((c|0)>=(g|0));)a=a+4|0;h=(h<<16>>16)*7|0,f=r+1310736+(h+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(h+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,h=r+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+q,h=g}while(!1);if(_=_+1|0,c=y+4|0,s=s+2|0,t=t+1|0,(_|0)>=(ie|0))break;y=c,g=h}if(q=q+1|0,(q|0)>=(ae|0)){d=h,X=52;break e}else t=t+2|0,c=c+R|0,s=s+4|0}ft(3,3904,se),t=-1}else d=0,X=52;while(!1);if((X|0)==52){if(s=r+12|0,(d|0)<1)h=1;else for(c=1,h=1;t=e[l>>2]|0,(t|0)==(c|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(c|0)<(d|0);)c=c+1|0,l=l+4|0;if(a=r+8|0,t=h+-1|0,e[a>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=U,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=Ae,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[a>>2]|0))}if((d|0)>0){s=0;do l=(e[r+1179664+(s<<2)>>2]|0)+-1|0,c=s*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(c<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(c+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(c+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(c+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(c+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(c+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(c+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),s=s+1|0;while((s|0)<(d|0))}if((e[a>>2]|0)>0){t=0;do U=r+12+(t<<2)|0,Ae=t<<1,X=r+655376+(Ae<<3)|0,A[X>>3]=+A[X>>3]/+(e[U>>2]|0),Ae=r+655376+((Ae|1)<<3)|0,A[Ae>>3]=+A[Ae>>3]/+(e[U>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0));t=0}else t=0}else t=0}return C=We,t|0}function Xs(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0;if(We=C,C=C+16|0,se=We,U=(a|0)/2|0,Ae=(c|0)/2|0,d=e[r>>2]|0,ae=Ae+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ae,U)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(U|0));)h=h+2|0,l=l+2|0;if(ie=U+-1|0,(c|0)>1)for(t=0,h=d,l=d+(ie<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(Ae|0));)h=h+(U<<1)|0,l=l+(U<<1)|0;l=r+1179664|0,h=U+1|0,J=0-U|0,F=1-U|0,ne=~U,R=(a<<1)+8|0;e:do if((ae|0)>1){W=(ie|0)>1,t=(e[r+4>>2]|0)+h|0,q=1,c=s+((a<<2)+4)|0,s=d+(h<<1)|0,h=0;t:for(;;){if(W)for(_=1,y=c,g=h;;){do if((B[y>>0]|0|0)>(o|0))E[s>>1]=0,M[t>>0]=0,h=g;else{if(M[t>>0]=-1,h=E[s+(J<<1)>>1]|0,h<<16>>16>0){E[s>>1]=h,h=(h<<16>>16)*7|0,f=r+1310736+(h+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(h+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(h+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,e[r+1310736+(h+-1<<2)>>2]=q,h=g;break}if(a=E[s+(F<<1)>>1]|0,d=a<<16>>16,h=E[s+(ne<<1)>>1]|0,f=h<<16>>16,c=h<<16>>16>0,a<<16>>16<=0){if(c){E[s>>1]=h,h=f*7|0,c=r+1310736+(h+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=r+1310736+(h+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+_,c=r+1310736+(h+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+q,c=r+1310736+(h+-3<<2)|0,(e[c>>2]|0)<(_|0)&&(e[c>>2]=_),e[r+1310736+(h+-1<<2)>>2]=q,h=g;break}if(h=E[s+-2>>1]|0,h<<16>>16>0){if(E[s>>1]=h,h=(h<<16>>16)*7|0,f=r+1310736+(h+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(h+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(h+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,h=r+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(_|0)){h=g;break}e[h>>2]=_,h=g;break}else{if(h=g+1|0,(g|0)>32767)break t;E[s>>1]=h,e[r+1179664+(g<<2)>>2]=h<<16>>16,g=g*7|0,e[r+1310736+(g<<2)>>2]=1,e[r+1310736+(g+1<<2)>>2]=_,e[r+1310736+(g+2<<2)>>2]=q,e[r+1310736+(g+3<<2)>>2]=_,e[r+1310736+(g+4<<2)>>2]=_,e[r+1310736+(g+5<<2)>>2]=q,e[r+1310736+(g+6<<2)>>2]=q;break}}if(c){if(h=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+(f+-1<<2)>>2]|0,(h|0)>(d|0))if(E[s>>1]=d,(g|0)>0)for(c=0,a=l;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),c=c+1|0,(c|0)>=(g|0)){h=d;break}else a=a+4|0;else h=d;else if(E[s>>1]=h,(h|0)<(d|0)&(g|0)>0)for(c=0,a=l;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),c=c+1|0,!((c|0)>=(g|0));)a=a+4|0;h=(h<<16>>16)*7|0,f=r+1310736+(h+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(h+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(h+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,e[r+1310736+(h+-1<<2)>>2]=q,h=g;break}if(c=E[s+-2>>1]|0,c<<16>>16<=0){E[s>>1]=a,h=d*7|0,c=r+1310736+(h+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=r+1310736+(h+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+_,c=r+1310736+(h+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+q,c=r+1310736+(h+-4<<2)|0,(e[c>>2]|0)>(_|0)&&(e[c>>2]=_),e[r+1310736+(h+-1<<2)>>2]=q,h=g;break}if(h=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+((c<<16>>16)+-1<<2)>>2]|0,(h|0)>(d|0))if(E[s>>1]=d,(g|0)>0)for(c=0,a=l;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),c=c+1|0,(c|0)>=(g|0)){h=d;break}else a=a+4|0;else h=d;else if(E[s>>1]=h,(h|0)<(d|0)&(g|0)>0)for(c=0,a=l;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),c=c+1|0,!((c|0)>=(g|0));)a=a+4|0;h=(h<<16>>16)*7|0,f=r+1310736+(h+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(h+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,h=r+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+q,h=g}while(!1);if(_=_+1|0,c=y+4|0,s=s+2|0,t=t+1|0,(_|0)>=(ie|0))break;y=c,g=h}if(q=q+1|0,(q|0)>=(ae|0)){d=h,X=52;break e}else t=t+2|0,c=c+R|0,s=s+4|0}ft(3,3904,se),t=-1}else d=0,X=52;while(!1);if((X|0)==52){if(s=r+12|0,(d|0)<1)h=1;else for(c=1,h=1;t=e[l>>2]|0,(t|0)==(c|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(c|0)<(d|0);)c=c+1|0,l=l+4|0;if(a=r+8|0,t=h+-1|0,e[a>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=U,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=Ae,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[a>>2]|0))}if((d|0)>0){s=0;do l=(e[r+1179664+(s<<2)>>2]|0)+-1|0,c=s*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(c<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(c+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(c+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(c+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(c+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(c+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(c+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),s=s+1|0;while((s|0)<(d|0))}if((e[a>>2]|0)>0){t=0;do U=r+12+(t<<2)|0,Ae=t<<1,X=r+655376+(Ae<<3)|0,A[X>>3]=+A[X>>3]/+(e[U>>2]|0),Ae=r+655376+((Ae|1)<<3)|0,A[Ae>>3]=+A[Ae>>3]/+(e[U>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0));t=0}else t=0}else t=0}return C=We,t|0}function Ls(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,X=Ae,f=e[r>>2]|0,se=c+-1|0,(a|0)>0)for(t=0,h=f,l=f+((Oe(se,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ae=o*3|0,ie=a+-1|0,(c|0)>0)for(t=0,o=f,h=f+(ie<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(c|0));)o=o+(a<<1)|0,h=h+(a<<1)|0;h=r+1179664|0,t=a+1|0,J=0-a|0,F=1-a|0,ne=~a;e:do if((se|0)>1){W=(ie|0)>1,d=(e[r+4>>2]|0)+t|0,q=1,l=s+(t*3|0)|0,s=f+(t<<1)|0,o=0;t:for(;;){if(W)for(t=d,R=1,_=l,y=o;;){do if(((B[_+1>>0]|0)+(B[_>>0]|0)+(B[_+2>>0]|0)|0)>(ae|0))E[s>>1]=0,M[t>>0]=0,o=y;else{if(M[t>>0]=-1,o=E[s+(J<<1)>>1]|0,o<<16>>16>0){E[s>>1]=o,o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(d=E[s+(F<<1)>>1]|0,f=d<<16>>16,o=E[s+(ne<<1)>>1]|0,g=o<<16>>16,l=o<<16>>16>0,d<<16>>16<=0){if(l){E[s>>1]=o,o=g*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+R,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=r+1310736+(o+-3<<2)|0,(e[l>>2]|0)<(R|0)&&(e[l>>2]=R),e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(o=E[s+-2>>1]|0,o<<16>>16>0){if(E[s>>1]=o,o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,o=r+1310736+(o+-3<<2)|0,(e[o>>2]|0)>=(R|0)){o=y;break}e[o>>2]=R,o=y;break}else{if(o=y+1|0,(y|0)>32767)break t;E[s>>1]=o,e[r+1179664+(y<<2)>>2]=o<<16>>16,y=y*7|0,e[r+1310736+(y<<2)>>2]=1,e[r+1310736+(y+1<<2)>>2]=R,e[r+1310736+(y+2<<2)>>2]=q,e[r+1310736+(y+3<<2)>>2]=R,e[r+1310736+(y+4<<2)>>2]=R,e[r+1310736+(y+5<<2)>>2]=q,e[r+1310736+(y+6<<2)>>2]=q;break}}if(l){if(o=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+(g+-1<<2)>>2]|0,(o|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(l=0,d=h;;)if((e[d>>2]|0)==(o|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(y|0)){o=f;break}else d=d+4|0;else o=f;else if(E[s>>1]=o,(o|0)<(f|0)&(y|0)>0)for(l=0,d=h;(e[d>>2]|0)==(f|0)&&(e[d>>2]=o),l=l+1|0,!((l|0)>=(y|0));)d=d+4|0;o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(l=E[s+-2>>1]|0,l<<16>>16<=0){E[s>>1]=d,o=f*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+R,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=r+1310736+(o+-4<<2)|0,(e[l>>2]|0)>(R|0)&&(e[l>>2]=R),e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(o=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(o|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(l=0,d=h;;)if((e[d>>2]|0)==(o|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(y|0)){o=f;break}else d=d+4|0;else o=f;else if(E[s>>1]=o,(o|0)<(f|0)&(y|0)>0)for(l=0,d=h;(e[d>>2]|0)==(f|0)&&(e[d>>2]=o),l=l+1|0,!((l|0)>=(y|0));)d=d+4|0;o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,o=r+1310736+(o+-5<<2)|0,e[o>>2]=(e[o>>2]|0)+q,o=y}while(!1);if(R=R+1|0,l=_+3|0,s=s+2|0,t=t+1|0,(R|0)>=(ie|0))break;_=l,y=o}else t=d;if(q=q+1|0,(q|0)>=(se|0)){f=o,U=52;break e}else d=t+2|0,l=l+6|0,s=s+4|0}ft(3,3904,X),t=-1}else f=0,U=52;while(!1);if((U|0)==52){if(s=r+12|0,(f|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(f|0);)l=l+1|0,h=h+4|0;if(d=r+8|0,t=o+-1|0,e[d>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do U=t<<2,e[r+131084+(U<<2)>>2]=a,e[r+131084+((U|1)<<2)>>2]=0,e[r+131084+((U|2)<<2)>>2]=c,e[r+131084+((U|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){s=0;do h=(e[r+1179664+(s<<2)>>2]|0)+-1|0,l=s*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),s=s+1|0;while((s|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,U=r+655376+(c<<3)|0,A[U>>3]=+A[U>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function ds(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,X=Ae,f=e[r>>2]|0,se=c+-1|0,(a|0)>0)for(t=0,h=f,l=f+((Oe(se,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ae=o*3|0,ie=a+-1|0,(c|0)>0)for(t=0,o=f,h=f+(ie<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(c|0));)o=o+(a<<1)|0,h=h+(a<<1)|0;h=r+1179664|0,t=a+1|0,J=0-a|0,F=1-a|0,ne=~a;e:do if((se|0)>1){W=(ie|0)>1,d=(e[r+4>>2]|0)+t|0,q=1,l=s+(t<<1)|0,s=f+(t<<1)|0,o=0;t:for(;;){if(W)for(t=d,R=1,_=l,y=o;;){f=B[_>>0]|0,g=B[_+1>>0]|0;do if(((f&248)+10+(f<<5&224)+(g>>>3&28)+(g<<3&248)|0)>(ae|0))E[s>>1]=0,M[t>>0]=0,o=y;else{if(M[t>>0]=-1,o=E[s+(J<<1)>>1]|0,o<<16>>16>0){E[s>>1]=o,o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(d=E[s+(F<<1)>>1]|0,f=d<<16>>16,o=E[s+(ne<<1)>>1]|0,g=o<<16>>16,l=o<<16>>16>0,d<<16>>16<=0){if(l){E[s>>1]=o,o=g*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+R,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=r+1310736+(o+-3<<2)|0,(e[l>>2]|0)<(R|0)&&(e[l>>2]=R),e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(o=E[s+-2>>1]|0,o<<16>>16>0){if(E[s>>1]=o,o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,o=r+1310736+(o+-3<<2)|0,(e[o>>2]|0)>=(R|0)){o=y;break}e[o>>2]=R,o=y;break}else{if(o=y+1|0,(y|0)>32767)break t;E[s>>1]=o,e[r+1179664+(y<<2)>>2]=o<<16>>16,y=y*7|0,e[r+1310736+(y<<2)>>2]=1,e[r+1310736+(y+1<<2)>>2]=R,e[r+1310736+(y+2<<2)>>2]=q,e[r+1310736+(y+3<<2)>>2]=R,e[r+1310736+(y+4<<2)>>2]=R,e[r+1310736+(y+5<<2)>>2]=q,e[r+1310736+(y+6<<2)>>2]=q;break}}if(l){if(o=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+(g+-1<<2)>>2]|0,(o|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(l=0,d=h;;)if((e[d>>2]|0)==(o|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(y|0)){o=f;break}else d=d+4|0;else o=f;else if(E[s>>1]=o,(o|0)<(f|0)&(y|0)>0)for(l=0,d=h;(e[d>>2]|0)==(f|0)&&(e[d>>2]=o),l=l+1|0,!((l|0)>=(y|0));)d=d+4|0;o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(l=E[s+-2>>1]|0,l<<16>>16<=0){E[s>>1]=d,o=f*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+R,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=r+1310736+(o+-4<<2)|0,(e[l>>2]|0)>(R|0)&&(e[l>>2]=R),e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(o=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(o|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(l=0,d=h;;)if((e[d>>2]|0)==(o|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(y|0)){o=f;break}else d=d+4|0;else o=f;else if(E[s>>1]=o,(o|0)<(f|0)&(y|0)>0)for(l=0,d=h;(e[d>>2]|0)==(f|0)&&(e[d>>2]=o),l=l+1|0,!((l|0)>=(y|0));)d=d+4|0;o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,o=r+1310736+(o+-5<<2)|0,e[o>>2]=(e[o>>2]|0)+q,o=y}while(!1);if(R=R+1|0,l=_+2|0,s=s+2|0,t=t+1|0,(R|0)>=(ie|0))break;_=l,y=o}else t=d;if(q=q+1|0,(q|0)>=(se|0)){f=o,U=52;break e}else d=t+2|0,l=l+4|0,s=s+4|0}ft(3,3904,X),t=-1}else f=0,U=52;while(!1);if((U|0)==52){if(s=r+12|0,(f|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(f|0);)l=l+1|0,h=h+4|0;if(d=r+8|0,t=o+-1|0,e[d>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do U=t<<2,e[r+131084+(U<<2)>>2]=a,e[r+131084+((U|1)<<2)>>2]=0,e[r+131084+((U|2)<<2)>>2]=c,e[r+131084+((U|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){s=0;do h=(e[r+1179664+(s<<2)>>2]|0)+-1|0,l=s*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),s=s+1|0;while((s|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,U=r+655376+(c<<3)|0,A[U>>3]=+A[U>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function Ys(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,X=Ae,f=e[r>>2]|0,se=c+-1|0,(a|0)>0)for(t=0,h=f,l=f+((Oe(se,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ae=o*3|0,ie=a+-1|0,(c|0)>0)for(t=0,o=f,h=f+(ie<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(c|0));)o=o+(a<<1)|0,h=h+(a<<1)|0;h=r+1179664|0,t=a+1|0,J=0-a|0,F=1-a|0,ne=~a;e:do if((se|0)>1){W=(ie|0)>1,d=(e[r+4>>2]|0)+t|0,q=1,l=s+(t<<2)|0,s=f+(t<<1)|0,o=0;t:for(;;){if(W)for(t=d,R=1,_=l,y=o;;){do if(((B[_+1>>0]|0)+(B[_>>0]|0)+(B[_+2>>0]|0)|0)>(ae|0))E[s>>1]=0,M[t>>0]=0,o=y;else{if(M[t>>0]=-1,o=E[s+(J<<1)>>1]|0,o<<16>>16>0){E[s>>1]=o,o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(d=E[s+(F<<1)>>1]|0,f=d<<16>>16,o=E[s+(ne<<1)>>1]|0,g=o<<16>>16,l=o<<16>>16>0,d<<16>>16<=0){if(l){E[s>>1]=o,o=g*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+R,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=r+1310736+(o+-3<<2)|0,(e[l>>2]|0)<(R|0)&&(e[l>>2]=R),e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(o=E[s+-2>>1]|0,o<<16>>16>0){if(E[s>>1]=o,o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,o=r+1310736+(o+-3<<2)|0,(e[o>>2]|0)>=(R|0)){o=y;break}e[o>>2]=R,o=y;break}else{if(o=y+1|0,(y|0)>32767)break t;E[s>>1]=o,e[r+1179664+(y<<2)>>2]=o<<16>>16,y=y*7|0,e[r+1310736+(y<<2)>>2]=1,e[r+1310736+(y+1<<2)>>2]=R,e[r+1310736+(y+2<<2)>>2]=q,e[r+1310736+(y+3<<2)>>2]=R,e[r+1310736+(y+4<<2)>>2]=R,e[r+1310736+(y+5<<2)>>2]=q,e[r+1310736+(y+6<<2)>>2]=q;break}}if(l){if(o=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+(g+-1<<2)>>2]|0,(o|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(l=0,d=h;;)if((e[d>>2]|0)==(o|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(y|0)){o=f;break}else d=d+4|0;else o=f;else if(E[s>>1]=o,(o|0)<(f|0)&(y|0)>0)for(l=0,d=h;(e[d>>2]|0)==(f|0)&&(e[d>>2]=o),l=l+1|0,!((l|0)>=(y|0));)d=d+4|0;o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(l=E[s+-2>>1]|0,l<<16>>16<=0){E[s>>1]=d,o=f*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+R,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=r+1310736+(o+-4<<2)|0,(e[l>>2]|0)>(R|0)&&(e[l>>2]=R),e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(o=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(o|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(l=0,d=h;;)if((e[d>>2]|0)==(o|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(y|0)){o=f;break}else d=d+4|0;else o=f;else if(E[s>>1]=o,(o|0)<(f|0)&(y|0)>0)for(l=0,d=h;(e[d>>2]|0)==(f|0)&&(e[d>>2]=o),l=l+1|0,!((l|0)>=(y|0));)d=d+4|0;o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,o=r+1310736+(o+-5<<2)|0,e[o>>2]=(e[o>>2]|0)+q,o=y}while(!1);if(R=R+1|0,l=_+4|0,s=s+2|0,t=t+1|0,(R|0)>=(ie|0))break;_=l,y=o}else t=d;if(q=q+1|0,(q|0)>=(se|0)){f=o,U=52;break e}else d=t+2|0,l=l+8|0,s=s+4|0}ft(3,3904,X),t=-1}else f=0,U=52;while(!1);if((U|0)==52){if(s=r+12|0,(f|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(f|0);)l=l+1|0,h=h+4|0;if(d=r+8|0,t=o+-1|0,e[d>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do U=t<<2,e[r+131084+(U<<2)>>2]=a,e[r+131084+((U|1)<<2)>>2]=0,e[r+131084+((U|2)<<2)>>2]=c,e[r+131084+((U|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){s=0;do h=(e[r+1179664+(s<<2)>>2]|0)+-1|0,l=s*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),s=s+1|0;while((s|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,U=r+655376+(c<<3)|0,A[U>>3]=+A[U>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function Ks(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,X=Ae,f=e[r>>2]|0,se=c+-1|0,(a|0)>0)for(t=0,h=f,l=f+((Oe(se,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ae=o*3|0,ie=a+-1|0,(c|0)>0)for(t=0,o=f,h=f+(ie<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(c|0));)o=o+(a<<1)|0,h=h+(a<<1)|0;h=r+1179664|0,t=a+1|0,J=0-a|0,F=1-a|0,ne=~a;e:do if((se|0)>1){W=(ie|0)>1,d=(e[r+4>>2]|0)+t|0,q=1,l=s+(t<<1)|0,s=f+(t<<1)|0,o=0;t:for(;;){if(W)for(t=d,R=1,_=l,y=o;;){g=B[_>>0]|0;do if(((g&240)+24+(g<<4&240)+((B[_+1>>0]|0)&240)|0)>(ae|0))E[s>>1]=0,M[t>>0]=0,o=y;else{if(M[t>>0]=-1,o=E[s+(J<<1)>>1]|0,o<<16>>16>0){E[s>>1]=o,o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(d=E[s+(F<<1)>>1]|0,f=d<<16>>16,o=E[s+(ne<<1)>>1]|0,g=o<<16>>16,l=o<<16>>16>0,d<<16>>16<=0){if(l){E[s>>1]=o,o=g*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+R,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=r+1310736+(o+-3<<2)|0,(e[l>>2]|0)<(R|0)&&(e[l>>2]=R),e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(o=E[s+-2>>1]|0,o<<16>>16>0){if(E[s>>1]=o,o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,o=r+1310736+(o+-3<<2)|0,(e[o>>2]|0)>=(R|0)){o=y;break}e[o>>2]=R,o=y;break}else{if(o=y+1|0,(y|0)>32767)break t;E[s>>1]=o,e[r+1179664+(y<<2)>>2]=o<<16>>16,y=y*7|0,e[r+1310736+(y<<2)>>2]=1,e[r+1310736+(y+1<<2)>>2]=R,e[r+1310736+(y+2<<2)>>2]=q,e[r+1310736+(y+3<<2)>>2]=R,e[r+1310736+(y+4<<2)>>2]=R,e[r+1310736+(y+5<<2)>>2]=q,e[r+1310736+(y+6<<2)>>2]=q;break}}if(l){if(o=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+(g+-1<<2)>>2]|0,(o|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(l=0,d=h;;)if((e[d>>2]|0)==(o|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(y|0)){o=f;break}else d=d+4|0;else o=f;else if(E[s>>1]=o,(o|0)<(f|0)&(y|0)>0)for(l=0,d=h;(e[d>>2]|0)==(f|0)&&(e[d>>2]=o),l=l+1|0,!((l|0)>=(y|0));)d=d+4|0;o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(l=E[s+-2>>1]|0,l<<16>>16<=0){E[s>>1]=d,o=f*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+R,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=r+1310736+(o+-4<<2)|0,(e[l>>2]|0)>(R|0)&&(e[l>>2]=R),e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(o=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(o|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(l=0,d=h;;)if((e[d>>2]|0)==(o|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(y|0)){o=f;break}else d=d+4|0;else o=f;else if(E[s>>1]=o,(o|0)<(f|0)&(y|0)>0)for(l=0,d=h;(e[d>>2]|0)==(f|0)&&(e[d>>2]=o),l=l+1|0,!((l|0)>=(y|0));)d=d+4|0;o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,o=r+1310736+(o+-5<<2)|0,e[o>>2]=(e[o>>2]|0)+q,o=y}while(!1);if(R=R+1|0,l=_+2|0,s=s+2|0,t=t+1|0,(R|0)>=(ie|0))break;_=l,y=o}else t=d;if(q=q+1|0,(q|0)>=(se|0)){f=o,U=52;break e}else d=t+2|0,l=l+4|0,s=s+4|0}ft(3,3904,X),t=-1}else f=0,U=52;while(!1);if((U|0)==52){if(s=r+12|0,(f|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(f|0);)l=l+1|0,h=h+4|0;if(d=r+8|0,t=o+-1|0,e[d>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do U=t<<2,e[r+131084+(U<<2)>>2]=a,e[r+131084+((U|1)<<2)>>2]=0,e[r+131084+((U|2)<<2)>>2]=c,e[r+131084+((U|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){s=0;do h=(e[r+1179664+(s<<2)>>2]|0)+-1|0,l=s*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),s=s+1|0;while((s|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,U=r+655376+(c<<3)|0,A[U>>3]=+A[U>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function Kr(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,X=Ae,f=e[r>>2]|0,se=c+-1|0,(a|0)>0)for(t=0,h=f,l=f+((Oe(se,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ae=o*3|0,ie=a+-1|0,(c|0)>0)for(t=0,o=f,h=f+(ie<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(c|0));)o=o+(a<<1)|0,h=h+(a<<1)|0;h=r+1179664|0,t=a+1|0,J=0-a|0,F=1-a|0,ne=~a;e:do if((se|0)>1){W=(ie|0)>1,d=(e[r+4>>2]|0)+t|0,q=1,l=s+(t<<1)|0,s=f+(t<<1)|0,o=0;t:for(;;){if(W)for(t=d,R=1,_=l,y=o;;){f=B[_>>0]|0,g=B[_+1>>0]|0;do if(((f&248)+12+(f<<5&224)+(g>>>3&24)+(g<<2&248)|0)>(ae|0))E[s>>1]=0,M[t>>0]=0,o=y;else{if(M[t>>0]=-1,o=E[s+(J<<1)>>1]|0,o<<16>>16>0){E[s>>1]=o,o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(d=E[s+(F<<1)>>1]|0,f=d<<16>>16,o=E[s+(ne<<1)>>1]|0,g=o<<16>>16,l=o<<16>>16>0,d<<16>>16<=0){if(l){E[s>>1]=o,o=g*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+R,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=r+1310736+(o+-3<<2)|0,(e[l>>2]|0)<(R|0)&&(e[l>>2]=R),e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(o=E[s+-2>>1]|0,o<<16>>16>0){if(E[s>>1]=o,o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,o=r+1310736+(o+-3<<2)|0,(e[o>>2]|0)>=(R|0)){o=y;break}e[o>>2]=R,o=y;break}else{if(o=y+1|0,(y|0)>32767)break t;E[s>>1]=o,e[r+1179664+(y<<2)>>2]=o<<16>>16,y=y*7|0,e[r+1310736+(y<<2)>>2]=1,e[r+1310736+(y+1<<2)>>2]=R,e[r+1310736+(y+2<<2)>>2]=q,e[r+1310736+(y+3<<2)>>2]=R,e[r+1310736+(y+4<<2)>>2]=R,e[r+1310736+(y+5<<2)>>2]=q,e[r+1310736+(y+6<<2)>>2]=q;break}}if(l){if(o=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+(g+-1<<2)>>2]|0,(o|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(l=0,d=h;;)if((e[d>>2]|0)==(o|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(y|0)){o=f;break}else d=d+4|0;else o=f;else if(E[s>>1]=o,(o|0)<(f|0)&(y|0)>0)for(l=0,d=h;(e[d>>2]|0)==(f|0)&&(e[d>>2]=o),l=l+1|0,!((l|0)>=(y|0));)d=d+4|0;o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(l=E[s+-2>>1]|0,l<<16>>16<=0){E[s>>1]=d,o=f*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+R,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=r+1310736+(o+-4<<2)|0,(e[l>>2]|0)>(R|0)&&(e[l>>2]=R),e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(o=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(o|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(l=0,d=h;;)if((e[d>>2]|0)==(o|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(y|0)){o=f;break}else d=d+4|0;else o=f;else if(E[s>>1]=o,(o|0)<(f|0)&(y|0)>0)for(l=0,d=h;(e[d>>2]|0)==(f|0)&&(e[d>>2]=o),l=l+1|0,!((l|0)>=(y|0));)d=d+4|0;o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,o=r+1310736+(o+-5<<2)|0,e[o>>2]=(e[o>>2]|0)+q,o=y}while(!1);if(R=R+1|0,l=_+2|0,s=s+2|0,t=t+1|0,(R|0)>=(ie|0))break;_=l,y=o}else t=d;if(q=q+1|0,(q|0)>=(se|0)){f=o,U=52;break e}else d=t+2|0,l=l+4|0,s=s+4|0}ft(3,3904,X),t=-1}else f=0,U=52;while(!1);if((U|0)==52){if(s=r+12|0,(f|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(f|0);)l=l+1|0,h=h+4|0;if(d=r+8|0,t=o+-1|0,e[d>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do U=t<<2,e[r+131084+(U<<2)>>2]=a,e[r+131084+((U|1)<<2)>>2]=0,e[r+131084+((U|2)<<2)>>2]=c,e[r+131084+((U|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){s=0;do h=(e[r+1179664+(s<<2)>>2]|0)+-1|0,l=s*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),s=s+1|0;while((s|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,U=r+655376+(c<<3)|0,A[U>>3]=+A[U>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function xc(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,X=Ae,f=e[r>>2]|0,se=c+-1|0,(a|0)>0)for(t=0,h=f,l=f+((Oe(se,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ae=o*3|0,ie=a+-1|0,(c|0)>0)for(t=0,o=f,h=f+(ie<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(c|0));)o=o+(a<<1)|0,h=h+(a<<1)|0;h=r+1179664|0,t=a+1|0,J=0-a|0,F=1-a|0,ne=~a;e:do if((se|0)>1){W=(ie|0)>1,d=(e[r+4>>2]|0)+t|0,q=1,l=s+(t<<2)|0,s=f+(t<<1)|0,o=0;t:for(;;){if(W)for(t=d,R=1,_=l,y=o;;){do if(((B[_+2>>0]|0)+(B[_+1>>0]|0)+(B[_+3>>0]|0)|0)>(ae|0))E[s>>1]=0,M[t>>0]=0,o=y;else{if(M[t>>0]=-1,o=E[s+(J<<1)>>1]|0,o<<16>>16>0){E[s>>1]=o,o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(d=E[s+(F<<1)>>1]|0,f=d<<16>>16,o=E[s+(ne<<1)>>1]|0,g=o<<16>>16,l=o<<16>>16>0,d<<16>>16<=0){if(l){E[s>>1]=o,o=g*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+R,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=r+1310736+(o+-3<<2)|0,(e[l>>2]|0)<(R|0)&&(e[l>>2]=R),e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(o=E[s+-2>>1]|0,o<<16>>16>0){if(E[s>>1]=o,o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,o=r+1310736+(o+-3<<2)|0,(e[o>>2]|0)>=(R|0)){o=y;break}e[o>>2]=R,o=y;break}else{if(o=y+1|0,(y|0)>32767)break t;E[s>>1]=o,e[r+1179664+(y<<2)>>2]=o<<16>>16,y=y*7|0,e[r+1310736+(y<<2)>>2]=1,e[r+1310736+(y+1<<2)>>2]=R,e[r+1310736+(y+2<<2)>>2]=q,e[r+1310736+(y+3<<2)>>2]=R,e[r+1310736+(y+4<<2)>>2]=R,e[r+1310736+(y+5<<2)>>2]=q,e[r+1310736+(y+6<<2)>>2]=q;break}}if(l){if(o=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+(g+-1<<2)>>2]|0,(o|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(l=0,d=h;;)if((e[d>>2]|0)==(o|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(y|0)){o=f;break}else d=d+4|0;else o=f;else if(E[s>>1]=o,(o|0)<(f|0)&(y|0)>0)for(l=0,d=h;(e[d>>2]|0)==(f|0)&&(e[d>>2]=o),l=l+1|0,!((l|0)>=(y|0));)d=d+4|0;o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(l=E[s+-2>>1]|0,l<<16>>16<=0){E[s>>1]=d,o=f*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+R,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=r+1310736+(o+-4<<2)|0,(e[l>>2]|0)>(R|0)&&(e[l>>2]=R),e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(o=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(o|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(l=0,d=h;;)if((e[d>>2]|0)==(o|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(y|0)){o=f;break}else d=d+4|0;else o=f;else if(E[s>>1]=o,(o|0)<(f|0)&(y|0)>0)for(l=0,d=h;(e[d>>2]|0)==(f|0)&&(e[d>>2]=o),l=l+1|0,!((l|0)>=(y|0));)d=d+4|0;o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,o=r+1310736+(o+-5<<2)|0,e[o>>2]=(e[o>>2]|0)+q,o=y}while(!1);if(R=R+1|0,l=_+4|0,s=s+2|0,t=t+1|0,(R|0)>=(ie|0))break;_=l,y=o}else t=d;if(q=q+1|0,(q|0)>=(se|0)){f=o,U=52;break e}else d=t+2|0,l=l+8|0,s=s+4|0}ft(3,3904,X),t=-1}else f=0,U=52;while(!1);if((U|0)==52){if(s=r+12|0,(f|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(f|0);)l=l+1|0,h=h+4|0;if(d=r+8|0,t=o+-1|0,e[d>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do U=t<<2,e[r+131084+(U<<2)>>2]=a,e[r+131084+((U|1)<<2)>>2]=0,e[r+131084+((U|2)<<2)>>2]=c,e[r+131084+((U|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){s=0;do h=(e[r+1179664+(s<<2)>>2]|0)+-1|0,l=s*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),s=s+1|0;while((s|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,U=r+655376+(c<<3)|0,A[U>>3]=+A[U>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function j0(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,X=Ae,d=e[r>>2]|0,se=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(se,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ae=a+-1|0,(c|0)>0)for(t=0,h=d,l=d+(ae<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(c|0));)h=h+(a<<1)|0,l=l+(a<<1)|0;l=r+1179664|0,t=a+1|0,W=0-a|0,ne=1-a|0,J=~a;e:do if((se|0)>1){q=(ae|0)>1,f=(e[r+4>>2]|0)+t|0,ie=1,s=s+t|0,d=d+(t<<1)|0,h=0;t:for(;;){if(q)for(t=f,F=1,R=s,_=h;;){do if((B[R>>0]|0|0)>(o|0))E[d>>1]=0,M[t>>0]=0,h=_;else{if(M[t>>0]=-1,h=E[d+(W<<1)>>1]|0,h<<16>>16>0){E[d>>1]=h,h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,y=r+1310736+(h+-5<<2)|0,e[y>>2]=(e[y>>2]|0)+ie,e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(f=E[d+(ne<<1)>>1]|0,g=f<<16>>16,h=E[d+(J<<1)>>1]|0,y=h<<16>>16,s=h<<16>>16>0,f<<16>>16<=0){if(s){E[d>>1]=h,h=y*7|0,s=r+1310736+(h+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(h+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+F,s=r+1310736+(h+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+ie,s=r+1310736+(h+-3<<2)|0,(e[s>>2]|0)<(F|0)&&(e[s>>2]=F),e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(h=E[d+-2>>1]|0,h<<16>>16>0){if(E[d>>1]=h,h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,y=r+1310736+(h+-5<<2)|0,e[y>>2]=(e[y>>2]|0)+ie,h=r+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(F|0)){h=_;break}e[h>>2]=F,h=_;break}else{if(h=_+1|0,(_|0)>32767)break t;E[d>>1]=h,e[r+1179664+(_<<2)>>2]=h<<16>>16,_=_*7|0,e[r+1310736+(_<<2)>>2]=1,e[r+1310736+(_+1<<2)>>2]=F,e[r+1310736+(_+2<<2)>>2]=ie,e[r+1310736+(_+3<<2)>>2]=F,e[r+1310736+(_+4<<2)>>2]=F,e[r+1310736+(_+5<<2)>>2]=ie,e[r+1310736+(_+6<<2)>>2]=ie;break}}if(s){if(h=e[r+1179664+(g+-1<<2)>>2]|0,g=e[r+1179664+(y+-1<<2)>>2]|0,(h|0)>(g|0))if(E[d>>1]=g,(_|0)>0)for(s=0,f=l;;)if((e[f>>2]|0)==(h|0)&&(e[f>>2]=g),s=s+1|0,(s|0)>=(_|0)){h=g;break}else f=f+4|0;else h=g;else if(E[d>>1]=h,(h|0)<(g|0)&(_|0)>0)for(s=0,f=l;(e[f>>2]|0)==(g|0)&&(e[f>>2]=h),s=s+1|0,!((s|0)>=(_|0));)f=f+4|0;h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,y=r+1310736+(h+-5<<2)|0,e[y>>2]=(e[y>>2]|0)+ie,e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(s=E[d+-2>>1]|0,s<<16>>16<=0){E[d>>1]=f,h=g*7|0,s=r+1310736+(h+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(h+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+F,s=r+1310736+(h+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+ie,s=r+1310736+(h+-4<<2)|0,(e[s>>2]|0)>(F|0)&&(e[s>>2]=F),e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(h=e[r+1179664+(g+-1<<2)>>2]|0,g=e[r+1179664+((s<<16>>16)+-1<<2)>>2]|0,(h|0)>(g|0))if(E[d>>1]=g,(_|0)>0)for(s=0,f=l;;)if((e[f>>2]|0)==(h|0)&&(e[f>>2]=g),s=s+1|0,(s|0)>=(_|0)){h=g;break}else f=f+4|0;else h=g;else if(E[d>>1]=h,(h|0)<(g|0)&(_|0)>0)for(s=0,f=l;(e[f>>2]|0)==(g|0)&&(e[f>>2]=h),s=s+1|0,!((s|0)>=(_|0));)f=f+4|0;h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,h=r+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+ie,h=_}while(!1);if(F=F+1|0,s=R+1|0,d=d+2|0,t=t+1|0,(F|0)>=(ae|0))break;R=s,_=h}else t=f;if(ie=ie+1|0,(ie|0)>=(se|0)){g=h,U=52;break e}else f=t+2|0,s=s+2|0,d=d+4|0}ft(3,3904,X),t=-1}else g=0,U=52;while(!1);if((U|0)==52){if(d=r+12|0,(g|0)<1)h=1;else for(s=1,h=1;t=e[l>>2]|0,(t|0)==(s|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(s|0)<(g|0);)s=s+1|0,l=l+4|0;if(f=r+8|0,t=h+-1|0,e[f>>2]=t,t){if(gt(d|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do U=t<<2,e[r+131084+(U<<2)>>2]=a,e[r+131084+((U|1)<<2)>>2]=0,e[r+131084+((U|2)<<2)>>2]=c,e[r+131084+((U|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[f>>2]|0))}if((g|0)>0){d=0;do l=(e[r+1179664+(d<<2)>>2]|0)+-1|0,s=d*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(s<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(s+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(s+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(s+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(s+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(s+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(s+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),d=d+1|0;while((d|0)<(g|0))}if((e[f>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,U=r+655376+(c<<3)|0,A[U>>3]=+A[U>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[f>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function An(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,X=Ae,d=e[r>>2]|0,se=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(se,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ae=a+-1|0,(c|0)>0)for(t=0,h=d,l=d+(ae<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(c|0));)h=h+(a<<1)|0,l=l+(a<<1)|0;l=r+1179664|0,t=a+1|0,W=0-a|0,ne=1-a|0,J=~a;e:do if((se|0)>1){q=(ae|0)>1,f=(e[r+4>>2]|0)+t|0,ie=1,s=s+(t<<1)|0,d=d+(t<<1)|0,h=0;t:for(;;){if(q)for(t=f,F=1,R=s,_=h;;){do if((B[R+1>>0]|0|0)>(o|0))E[d>>1]=0,M[t>>0]=0,h=_;else{if(M[t>>0]=-1,h=E[d+(W<<1)>>1]|0,h<<16>>16>0){E[d>>1]=h,h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,y=r+1310736+(h+-5<<2)|0,e[y>>2]=(e[y>>2]|0)+ie,e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(f=E[d+(ne<<1)>>1]|0,g=f<<16>>16,h=E[d+(J<<1)>>1]|0,y=h<<16>>16,s=h<<16>>16>0,f<<16>>16<=0){if(s){E[d>>1]=h,h=y*7|0,s=r+1310736+(h+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(h+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+F,s=r+1310736+(h+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+ie,s=r+1310736+(h+-3<<2)|0,(e[s>>2]|0)<(F|0)&&(e[s>>2]=F),e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(h=E[d+-2>>1]|0,h<<16>>16>0){if(E[d>>1]=h,h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,y=r+1310736+(h+-5<<2)|0,e[y>>2]=(e[y>>2]|0)+ie,h=r+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(F|0)){h=_;break}e[h>>2]=F,h=_;break}else{if(h=_+1|0,(_|0)>32767)break t;E[d>>1]=h,e[r+1179664+(_<<2)>>2]=h<<16>>16,_=_*7|0,e[r+1310736+(_<<2)>>2]=1,e[r+1310736+(_+1<<2)>>2]=F,e[r+1310736+(_+2<<2)>>2]=ie,e[r+1310736+(_+3<<2)>>2]=F,e[r+1310736+(_+4<<2)>>2]=F,e[r+1310736+(_+5<<2)>>2]=ie,e[r+1310736+(_+6<<2)>>2]=ie;break}}if(s){if(h=e[r+1179664+(g+-1<<2)>>2]|0,g=e[r+1179664+(y+-1<<2)>>2]|0,(h|0)>(g|0))if(E[d>>1]=g,(_|0)>0)for(s=0,f=l;;)if((e[f>>2]|0)==(h|0)&&(e[f>>2]=g),s=s+1|0,(s|0)>=(_|0)){h=g;break}else f=f+4|0;else h=g;else if(E[d>>1]=h,(h|0)<(g|0)&(_|0)>0)for(s=0,f=l;(e[f>>2]|0)==(g|0)&&(e[f>>2]=h),s=s+1|0,!((s|0)>=(_|0));)f=f+4|0;h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,y=r+1310736+(h+-5<<2)|0,e[y>>2]=(e[y>>2]|0)+ie,e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(s=E[d+-2>>1]|0,s<<16>>16<=0){E[d>>1]=f,h=g*7|0,s=r+1310736+(h+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(h+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+F,s=r+1310736+(h+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+ie,s=r+1310736+(h+-4<<2)|0,(e[s>>2]|0)>(F|0)&&(e[s>>2]=F),e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(h=e[r+1179664+(g+-1<<2)>>2]|0,g=e[r+1179664+((s<<16>>16)+-1<<2)>>2]|0,(h|0)>(g|0))if(E[d>>1]=g,(_|0)>0)for(s=0,f=l;;)if((e[f>>2]|0)==(h|0)&&(e[f>>2]=g),s=s+1|0,(s|0)>=(_|0)){h=g;break}else f=f+4|0;else h=g;else if(E[d>>1]=h,(h|0)<(g|0)&(_|0)>0)for(s=0,f=l;(e[f>>2]|0)==(g|0)&&(e[f>>2]=h),s=s+1|0,!((s|0)>=(_|0));)f=f+4|0;h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,h=r+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+ie,h=_}while(!1);if(F=F+1|0,s=R+2|0,d=d+2|0,t=t+1|0,(F|0)>=(ae|0))break;R=s,_=h}else t=f;if(ie=ie+1|0,(ie|0)>=(se|0)){g=h,U=52;break e}else f=t+2|0,s=s+4|0,d=d+4|0}ft(3,3904,X),t=-1}else g=0,U=52;while(!1);if((U|0)==52){if(d=r+12|0,(g|0)<1)h=1;else for(s=1,h=1;t=e[l>>2]|0,(t|0)==(s|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(s|0)<(g|0);)s=s+1|0,l=l+4|0;if(f=r+8|0,t=h+-1|0,e[f>>2]=t,t){if(gt(d|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do U=t<<2,e[r+131084+(U<<2)>>2]=a,e[r+131084+((U|1)<<2)>>2]=0,e[r+131084+((U|2)<<2)>>2]=c,e[r+131084+((U|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[f>>2]|0))}if((g|0)>0){d=0;do l=(e[r+1179664+(d<<2)>>2]|0)+-1|0,s=d*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(s<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(s+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(s+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(s+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(s+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(s+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(s+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),d=d+1|0;while((d|0)<(g|0))}if((e[f>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,U=r+655376+(c<<3)|0,A[U>>3]=+A[U>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[f>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function Cn(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,X=Ae,d=e[r>>2]|0,se=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(se,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ae=a+-1|0,(c|0)>0)for(t=0,h=d,l=d+(ae<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(c|0));)h=h+(a<<1)|0,l=l+(a<<1)|0;l=r+1179664|0,t=a+1|0,W=0-a|0,ne=1-a|0,J=~a;e:do if((se|0)>1){q=(ae|0)>1,f=(e[r+4>>2]|0)+t|0,ie=1,s=s+(t<<1)|0,d=d+(t<<1)|0,h=0;t:for(;;){if(q)for(t=f,F=1,R=s,_=h;;){do if((B[R>>0]|0|0)>(o|0))E[d>>1]=0,M[t>>0]=0,h=_;else{if(M[t>>0]=-1,h=E[d+(W<<1)>>1]|0,h<<16>>16>0){E[d>>1]=h,h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,y=r+1310736+(h+-5<<2)|0,e[y>>2]=(e[y>>2]|0)+ie,e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(f=E[d+(ne<<1)>>1]|0,g=f<<16>>16,h=E[d+(J<<1)>>1]|0,y=h<<16>>16,s=h<<16>>16>0,f<<16>>16<=0){if(s){E[d>>1]=h,h=y*7|0,s=r+1310736+(h+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(h+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+F,s=r+1310736+(h+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+ie,s=r+1310736+(h+-3<<2)|0,(e[s>>2]|0)<(F|0)&&(e[s>>2]=F),e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(h=E[d+-2>>1]|0,h<<16>>16>0){if(E[d>>1]=h,h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,y=r+1310736+(h+-5<<2)|0,e[y>>2]=(e[y>>2]|0)+ie,h=r+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(F|0)){h=_;break}e[h>>2]=F,h=_;break}else{if(h=_+1|0,(_|0)>32767)break t;E[d>>1]=h,e[r+1179664+(_<<2)>>2]=h<<16>>16,_=_*7|0,e[r+1310736+(_<<2)>>2]=1,e[r+1310736+(_+1<<2)>>2]=F,e[r+1310736+(_+2<<2)>>2]=ie,e[r+1310736+(_+3<<2)>>2]=F,e[r+1310736+(_+4<<2)>>2]=F,e[r+1310736+(_+5<<2)>>2]=ie,e[r+1310736+(_+6<<2)>>2]=ie;break}}if(s){if(h=e[r+1179664+(g+-1<<2)>>2]|0,g=e[r+1179664+(y+-1<<2)>>2]|0,(h|0)>(g|0))if(E[d>>1]=g,(_|0)>0)for(s=0,f=l;;)if((e[f>>2]|0)==(h|0)&&(e[f>>2]=g),s=s+1|0,(s|0)>=(_|0)){h=g;break}else f=f+4|0;else h=g;else if(E[d>>1]=h,(h|0)<(g|0)&(_|0)>0)for(s=0,f=l;(e[f>>2]|0)==(g|0)&&(e[f>>2]=h),s=s+1|0,!((s|0)>=(_|0));)f=f+4|0;h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,y=r+1310736+(h+-5<<2)|0,e[y>>2]=(e[y>>2]|0)+ie,e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(s=E[d+-2>>1]|0,s<<16>>16<=0){E[d>>1]=f,h=g*7|0,s=r+1310736+(h+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(h+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+F,s=r+1310736+(h+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+ie,s=r+1310736+(h+-4<<2)|0,(e[s>>2]|0)>(F|0)&&(e[s>>2]=F),e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(h=e[r+1179664+(g+-1<<2)>>2]|0,g=e[r+1179664+((s<<16>>16)+-1<<2)>>2]|0,(h|0)>(g|0))if(E[d>>1]=g,(_|0)>0)for(s=0,f=l;;)if((e[f>>2]|0)==(h|0)&&(e[f>>2]=g),s=s+1|0,(s|0)>=(_|0)){h=g;break}else f=f+4|0;else h=g;else if(E[d>>1]=h,(h|0)<(g|0)&(_|0)>0)for(s=0,f=l;(e[f>>2]|0)==(g|0)&&(e[f>>2]=h),s=s+1|0,!((s|0)>=(_|0));)f=f+4|0;h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,h=r+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+ie,h=_}while(!1);if(F=F+1|0,s=R+2|0,d=d+2|0,t=t+1|0,(F|0)>=(ae|0))break;R=s,_=h}else t=f;if(ie=ie+1|0,(ie|0)>=(se|0)){g=h,U=52;break e}else f=t+2|0,s=s+4|0,d=d+4|0}ft(3,3904,X),t=-1}else g=0,U=52;while(!1);if((U|0)==52){if(d=r+12|0,(g|0)<1)h=1;else for(s=1,h=1;t=e[l>>2]|0,(t|0)==(s|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(s|0)<(g|0);)s=s+1|0,l=l+4|0;if(f=r+8|0,t=h+-1|0,e[f>>2]=t,t){if(gt(d|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do U=t<<2,e[r+131084+(U<<2)>>2]=a,e[r+131084+((U|1)<<2)>>2]=0,e[r+131084+((U|2)<<2)>>2]=c,e[r+131084+((U|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[f>>2]|0))}if((g|0)>0){d=0;do l=(e[r+1179664+(d<<2)>>2]|0)+-1|0,s=d*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(s<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(s+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(s+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(s+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(s+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(s+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(s+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),d=d+1|0;while((d|0)<(g|0))}if((e[f>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,U=r+655376+(c<<3)|0,A[U>>3]=+A[U>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[f>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function Pa(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,X=Ae,d=e[r>>2]|0,se=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(se,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ae=a+-1|0,(c|0)>0)for(t=0,h=d,l=d+(ae<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(c|0));)h=h+(a<<1)|0,l=l+(a<<1)|0;l=r+1179664|0,h=a+1|0,W=0-a|0,ne=1-a|0,J=~a;e:do if((se|0)>1){q=(ae|0)>1,t=(e[r+4>>2]|0)+h|0,ie=1,s=s+h|0,d=d+(h<<1)|0,o=o+h|0,h=0;t:for(;;){if(q)for(F=1,R=s,_=h;;){do if((B[R>>0]|0)>(B[o>>0]|0))E[d>>1]=0,M[t>>0]=0,h=_;else{if(M[t>>0]=-1,h=E[d+(W<<1)>>1]|0,h<<16>>16>0){E[d>>1]=h,h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,y=r+1310736+(h+-5<<2)|0,e[y>>2]=(e[y>>2]|0)+ie,e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(f=E[d+(ne<<1)>>1]|0,g=f<<16>>16,h=E[d+(J<<1)>>1]|0,y=h<<16>>16,s=h<<16>>16>0,f<<16>>16<=0){if(s){E[d>>1]=h,h=y*7|0,s=r+1310736+(h+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(h+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+F,s=r+1310736+(h+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+ie,s=r+1310736+(h+-3<<2)|0,(e[s>>2]|0)<(F|0)&&(e[s>>2]=F),e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(h=E[d+-2>>1]|0,h<<16>>16>0){if(E[d>>1]=h,h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,y=r+1310736+(h+-5<<2)|0,e[y>>2]=(e[y>>2]|0)+ie,h=r+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(F|0)){h=_;break}e[h>>2]=F,h=_;break}else{if(h=_+1|0,(_|0)>32767)break t;E[d>>1]=h,e[r+1179664+(_<<2)>>2]=h<<16>>16,_=_*7|0,e[r+1310736+(_<<2)>>2]=1,e[r+1310736+(_+1<<2)>>2]=F,e[r+1310736+(_+2<<2)>>2]=ie,e[r+1310736+(_+3<<2)>>2]=F,e[r+1310736+(_+4<<2)>>2]=F,e[r+1310736+(_+5<<2)>>2]=ie,e[r+1310736+(_+6<<2)>>2]=ie;break}}if(s){if(h=e[r+1179664+(g+-1<<2)>>2]|0,g=e[r+1179664+(y+-1<<2)>>2]|0,(h|0)>(g|0))if(E[d>>1]=g,(_|0)>0)for(s=0,f=l;;)if((e[f>>2]|0)==(h|0)&&(e[f>>2]=g),s=s+1|0,(s|0)>=(_|0)){h=g;break}else f=f+4|0;else h=g;else if(E[d>>1]=h,(h|0)<(g|0)&(_|0)>0)for(s=0,f=l;(e[f>>2]|0)==(g|0)&&(e[f>>2]=h),s=s+1|0,!((s|0)>=(_|0));)f=f+4|0;h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,y=r+1310736+(h+-5<<2)|0,e[y>>2]=(e[y>>2]|0)+ie,e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(s=E[d+-2>>1]|0,s<<16>>16<=0){E[d>>1]=f,h=g*7|0,s=r+1310736+(h+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(h+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+F,s=r+1310736+(h+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+ie,s=r+1310736+(h+-4<<2)|0,(e[s>>2]|0)>(F|0)&&(e[s>>2]=F),e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(h=e[r+1179664+(g+-1<<2)>>2]|0,g=e[r+1179664+((s<<16>>16)+-1<<2)>>2]|0,(h|0)>(g|0))if(E[d>>1]=g,(_|0)>0)for(s=0,f=l;;)if((e[f>>2]|0)==(h|0)&&(e[f>>2]=g),s=s+1|0,(s|0)>=(_|0)){h=g;break}else f=f+4|0;else h=g;else if(E[d>>1]=h,(h|0)<(g|0)&(_|0)>0)for(s=0,f=l;(e[f>>2]|0)==(g|0)&&(e[f>>2]=h),s=s+1|0,!((s|0)>=(_|0));)f=f+4|0;h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,h=r+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+ie,h=_}while(!1);if(F=F+1|0,s=R+1|0,o=o+1|0,d=d+2|0,t=t+1|0,(F|0)>=(ae|0))break;R=s,_=h}if(ie=ie+1|0,(ie|0)>=(se|0)){f=h,U=52;break e}else t=t+2|0,s=s+2|0,d=d+4|0,o=o+2|0}ft(3,3904,X),t=-1}else f=0,U=52;while(!1);if((U|0)==52){if(d=r+12|0,(f|0)<1)h=1;else for(s=1,h=1;t=e[l>>2]|0,(t|0)==(s|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(s|0)<(f|0);)s=s+1|0,l=l+4|0;if(o=r+8|0,t=h+-1|0,e[o>>2]=t,t){if(gt(d|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do U=t<<2,e[r+131084+(U<<2)>>2]=a,e[r+131084+((U|1)<<2)>>2]=0,e[r+131084+((U|2)<<2)>>2]=c,e[r+131084+((U|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[o>>2]|0))}if((f|0)>0){d=0;do l=(e[r+1179664+(d<<2)>>2]|0)+-1|0,s=d*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(s<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(s+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(s+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(s+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(s+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(s+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(s+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),d=d+1|0;while((d|0)<(f|0))}if((e[o>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,U=r+655376+(c<<3)|0,A[U>>3]=+A[U>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[o>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function Yo(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0;if(We=C,C=C+16|0,se=We,U=(a|0)/2|0,Ae=(c|0)/2|0,d=e[r>>2]|0,ae=Ae+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ae,U)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(U|0));)h=h+2|0,l=l+2|0;if(q=o*3|0,ie=U+-1|0,(c|0)>1)for(t=0,o=d,h=d+(ie<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(Ae|0));)o=o+(U<<1)|0,h=h+(U<<1)|0;h=r+1179664|0,o=U+1|0,ne=0-U|0,R=1-U|0,F=~U,_=(a*3|0)+12|0;e:do if((ae|0)>1){J=(ie|0)>1,t=(e[r+4>>2]|0)+o|0,W=1,l=s+((a*6|0)+6)|0,c=d+(o<<1)|0,o=0;t:for(;;){if(J)for(y=1,g=l,f=o;;){do if(((B[g+1>>0]|0)+(B[g>>0]|0)+(B[g+2>>0]|0)|0)>(q|0)){if(M[t>>0]=-1,o=E[c+(ne<<1)>>1]|0,o<<16>>16>0){E[c>>1]=o,o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(s=E[c+(R<<1)>>1]|0,a=s<<16>>16,o=E[c+(F<<1)>>1]|0,d=o<<16>>16,l=o<<16>>16>0,s<<16>>16<=0){if(l){E[c>>1]=o,o=d*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+y,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(o+-3<<2)|0,(e[l>>2]|0)<(y|0)&&(e[l>>2]=y),e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(o=E[c+-2>>1]|0,o<<16>>16>0){if(E[c>>1]=o,o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,o=r+1310736+(o+-3<<2)|0,(e[o>>2]|0)>=(y|0)){o=f;break}e[o>>2]=y,o=f;break}else{if(o=f+1|0,(f|0)>32767)break t;E[c>>1]=o,e[r+1179664+(f<<2)>>2]=o<<16>>16,f=f*7|0,e[r+1310736+(f<<2)>>2]=1,e[r+1310736+(f+1<<2)>>2]=y,e[r+1310736+(f+2<<2)>>2]=W,e[r+1310736+(f+3<<2)>>2]=y,e[r+1310736+(f+4<<2)>>2]=y,e[r+1310736+(f+5<<2)>>2]=W,e[r+1310736+(f+6<<2)>>2]=W;break}}if(l){if(o=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+(d+-1<<2)>>2]|0,(o|0)>(a|0))if(E[c>>1]=a,(f|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(o|0)&&(e[s>>2]=a),l=l+1|0,(l|0)>=(f|0)){o=a;break}else s=s+4|0;else o=a;else if(E[c>>1]=o,(o|0)<(a|0)&(f|0)>0)for(l=0,s=h;(e[s>>2]|0)==(a|0)&&(e[s>>2]=o),l=l+1|0,!((l|0)>=(f|0));)s=s+4|0;o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(l=E[c+-2>>1]|0,l<<16>>16<=0){E[c>>1]=s,o=a*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+y,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(o+-4<<2)|0,(e[l>>2]|0)>(y|0)&&(e[l>>2]=y),e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(o=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(o|0)>(a|0))if(E[c>>1]=a,(f|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(o|0)&&(e[s>>2]=a),l=l+1|0,(l|0)>=(f|0)){o=a;break}else s=s+4|0;else o=a;else if(E[c>>1]=o,(o|0)<(a|0)&(f|0)>0)for(l=0,s=h;(e[s>>2]|0)==(a|0)&&(e[s>>2]=o),l=l+1|0,!((l|0)>=(f|0));)s=s+4|0;o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,o=r+1310736+(o+-5<<2)|0,e[o>>2]=(e[o>>2]|0)+W,o=f}else E[c>>1]=0,M[t>>0]=0,o=f;while(!1);if(y=y+1|0,l=g+6|0,c=c+2|0,t=t+1|0,(y|0)>=(ie|0))break;g=l,f=o}if(W=W+1|0,(W|0)>=(ae|0)){a=o,X=52;break e}else t=t+2|0,l=l+_|0,c=c+4|0}ft(3,3904,se),t=-1}else a=0,X=52;while(!1);if((X|0)==52){if(c=r+12|0,(a|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(a|0);)l=l+1|0,h=h+4|0;if(s=r+8|0,t=o+-1|0,e[s>>2]=t,t){if(gt(c|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=U,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=Ae,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((a|0)>0){c=0;do h=(e[r+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[s>>2]|0)>0){t=0;do U=r+12+(t<<2)|0,Ae=t<<1,X=r+655376+(Ae<<3)|0,A[X>>3]=+A[X>>3]/+(e[U>>2]|0),Ae=r+655376+((Ae|1)<<3)|0,A[Ae>>3]=+A[Ae>>3]/+(e[U>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return C=We,t|0}function Fa(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0;if(We=C,C=C+16|0,se=We,U=(a|0)/2|0,Ae=(c|0)/2|0,d=e[r>>2]|0,ae=Ae+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ae,U)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(U|0));)h=h+2|0,l=l+2|0;if(q=o*3|0,ie=U+-1|0,(c|0)>1)for(t=0,o=d,h=d+(ie<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(Ae|0));)o=o+(U<<1)|0,h=h+(U<<1)|0;h=r+1179664|0,o=U+1|0,ne=0-U|0,R=1-U|0,F=~U,_=(a<<1)+8|0;e:do if((ae|0)>1){J=(ie|0)>1,t=(e[r+4>>2]|0)+o|0,W=1,l=s+((a<<2)+4)|0,c=d+(o<<1)|0,o=0;t:for(;;){if(J)for(y=1,g=l,f=o;;){a=B[g>>0]|0,d=B[g+1>>0]|0;do if(((a&248)+10+(a<<5&224)+(d>>>3&28)+(d<<3&248)|0)>(q|0)){if(M[t>>0]=-1,o=E[c+(ne<<1)>>1]|0,o<<16>>16>0){E[c>>1]=o,o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(s=E[c+(R<<1)>>1]|0,a=s<<16>>16,o=E[c+(F<<1)>>1]|0,d=o<<16>>16,l=o<<16>>16>0,s<<16>>16<=0){if(l){E[c>>1]=o,o=d*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+y,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(o+-3<<2)|0,(e[l>>2]|0)<(y|0)&&(e[l>>2]=y),e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(o=E[c+-2>>1]|0,o<<16>>16>0){if(E[c>>1]=o,o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,o=r+1310736+(o+-3<<2)|0,(e[o>>2]|0)>=(y|0)){o=f;break}e[o>>2]=y,o=f;break}else{if(o=f+1|0,(f|0)>32767)break t;E[c>>1]=o,e[r+1179664+(f<<2)>>2]=o<<16>>16,f=f*7|0,e[r+1310736+(f<<2)>>2]=1,e[r+1310736+(f+1<<2)>>2]=y,e[r+1310736+(f+2<<2)>>2]=W,e[r+1310736+(f+3<<2)>>2]=y,e[r+1310736+(f+4<<2)>>2]=y,e[r+1310736+(f+5<<2)>>2]=W,e[r+1310736+(f+6<<2)>>2]=W;break}}if(l){if(o=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+(d+-1<<2)>>2]|0,(o|0)>(a|0))if(E[c>>1]=a,(f|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(o|0)&&(e[s>>2]=a),l=l+1|0,(l|0)>=(f|0)){o=a;break}else s=s+4|0;else o=a;else if(E[c>>1]=o,(o|0)<(a|0)&(f|0)>0)for(l=0,s=h;(e[s>>2]|0)==(a|0)&&(e[s>>2]=o),l=l+1|0,!((l|0)>=(f|0));)s=s+4|0;o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(l=E[c+-2>>1]|0,l<<16>>16<=0){E[c>>1]=s,o=a*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+y,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(o+-4<<2)|0,(e[l>>2]|0)>(y|0)&&(e[l>>2]=y),e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(o=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(o|0)>(a|0))if(E[c>>1]=a,(f|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(o|0)&&(e[s>>2]=a),l=l+1|0,(l|0)>=(f|0)){o=a;break}else s=s+4|0;else o=a;else if(E[c>>1]=o,(o|0)<(a|0)&(f|0)>0)for(l=0,s=h;(e[s>>2]|0)==(a|0)&&(e[s>>2]=o),l=l+1|0,!((l|0)>=(f|0));)s=s+4|0;o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,o=r+1310736+(o+-5<<2)|0,e[o>>2]=(e[o>>2]|0)+W,o=f}else E[c>>1]=0,M[t>>0]=0,o=f;while(!1);if(y=y+1|0,l=g+4|0,c=c+2|0,t=t+1|0,(y|0)>=(ie|0))break;g=l,f=o}if(W=W+1|0,(W|0)>=(ae|0)){a=o,X=52;break e}else t=t+2|0,l=l+_|0,c=c+4|0}ft(3,3904,se),t=-1}else a=0,X=52;while(!1);if((X|0)==52){if(c=r+12|0,(a|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(a|0);)l=l+1|0,h=h+4|0;if(s=r+8|0,t=o+-1|0,e[s>>2]=t,t){if(gt(c|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=U,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=Ae,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((a|0)>0){c=0;do h=(e[r+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[s>>2]|0)>0){t=0;do U=r+12+(t<<2)|0,Ae=t<<1,X=r+655376+(Ae<<3)|0,A[X>>3]=+A[X>>3]/+(e[U>>2]|0),Ae=r+655376+((Ae|1)<<3)|0,A[Ae>>3]=+A[Ae>>3]/+(e[U>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return C=We,t|0}function jr(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0;if(We=C,C=C+16|0,se=We,U=(a|0)/2|0,Ae=(c|0)/2|0,d=e[r>>2]|0,ae=Ae+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ae,U)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(U|0));)h=h+2|0,l=l+2|0;if(q=o*3|0,ie=U+-1|0,(c|0)>1)for(t=0,o=d,h=d+(ie<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(Ae|0));)o=o+(U<<1)|0,h=h+(U<<1)|0;h=r+1179664|0,o=U+1|0,ne=0-U|0,R=1-U|0,F=~U,_=(a<<2)+16|0;e:do if((ae|0)>1){J=(ie|0)>1,t=(e[r+4>>2]|0)+o|0,W=1,l=s+((a<<3)+8)|0,c=d+(o<<1)|0,o=0;t:for(;;){if(J)for(y=1,g=l,f=o;;){do if(((B[g+1>>0]|0)+(B[g>>0]|0)+(B[g+2>>0]|0)|0)>(q|0)){if(M[t>>0]=-1,o=E[c+(ne<<1)>>1]|0,o<<16>>16>0){E[c>>1]=o,o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(s=E[c+(R<<1)>>1]|0,a=s<<16>>16,o=E[c+(F<<1)>>1]|0,d=o<<16>>16,l=o<<16>>16>0,s<<16>>16<=0){if(l){E[c>>1]=o,o=d*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+y,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(o+-3<<2)|0,(e[l>>2]|0)<(y|0)&&(e[l>>2]=y),e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(o=E[c+-2>>1]|0,o<<16>>16>0){if(E[c>>1]=o,o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,o=r+1310736+(o+-3<<2)|0,(e[o>>2]|0)>=(y|0)){o=f;break}e[o>>2]=y,o=f;break}else{if(o=f+1|0,(f|0)>32767)break t;E[c>>1]=o,e[r+1179664+(f<<2)>>2]=o<<16>>16,f=f*7|0,e[r+1310736+(f<<2)>>2]=1,e[r+1310736+(f+1<<2)>>2]=y,e[r+1310736+(f+2<<2)>>2]=W,e[r+1310736+(f+3<<2)>>2]=y,e[r+1310736+(f+4<<2)>>2]=y,e[r+1310736+(f+5<<2)>>2]=W,e[r+1310736+(f+6<<2)>>2]=W;break}}if(l){if(o=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+(d+-1<<2)>>2]|0,(o|0)>(a|0))if(E[c>>1]=a,(f|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(o|0)&&(e[s>>2]=a),l=l+1|0,(l|0)>=(f|0)){o=a;break}else s=s+4|0;else o=a;else if(E[c>>1]=o,(o|0)<(a|0)&(f|0)>0)for(l=0,s=h;(e[s>>2]|0)==(a|0)&&(e[s>>2]=o),l=l+1|0,!((l|0)>=(f|0));)s=s+4|0;o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(l=E[c+-2>>1]|0,l<<16>>16<=0){E[c>>1]=s,o=a*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+y,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(o+-4<<2)|0,(e[l>>2]|0)>(y|0)&&(e[l>>2]=y),e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(o=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(o|0)>(a|0))if(E[c>>1]=a,(f|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(o|0)&&(e[s>>2]=a),l=l+1|0,(l|0)>=(f|0)){o=a;break}else s=s+4|0;else o=a;else if(E[c>>1]=o,(o|0)<(a|0)&(f|0)>0)for(l=0,s=h;(e[s>>2]|0)==(a|0)&&(e[s>>2]=o),l=l+1|0,!((l|0)>=(f|0));)s=s+4|0;o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,o=r+1310736+(o+-5<<2)|0,e[o>>2]=(e[o>>2]|0)+W,o=f}else E[c>>1]=0,M[t>>0]=0,o=f;while(!1);if(y=y+1|0,l=g+8|0,c=c+2|0,t=t+1|0,(y|0)>=(ie|0))break;g=l,f=o}if(W=W+1|0,(W|0)>=(ae|0)){a=o,X=52;break e}else t=t+2|0,l=l+_|0,c=c+4|0}ft(3,3904,se),t=-1}else a=0,X=52;while(!1);if((X|0)==52){if(c=r+12|0,(a|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(a|0);)l=l+1|0,h=h+4|0;if(s=r+8|0,t=o+-1|0,e[s>>2]=t,t){if(gt(c|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=U,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=Ae,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((a|0)>0){c=0;do h=(e[r+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[s>>2]|0)>0){t=0;do U=r+12+(t<<2)|0,Ae=t<<1,X=r+655376+(Ae<<3)|0,A[X>>3]=+A[X>>3]/+(e[U>>2]|0),Ae=r+655376+((Ae|1)<<3)|0,A[Ae>>3]=+A[Ae>>3]/+(e[U>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return C=We,t|0}function Oa(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0;if(We=C,C=C+16|0,se=We,U=(a|0)/2|0,Ae=(c|0)/2|0,d=e[r>>2]|0,ae=Ae+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ae,U)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(U|0));)h=h+2|0,l=l+2|0;if(q=o*3|0,ie=U+-1|0,(c|0)>1)for(t=0,o=d,h=d+(ie<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(Ae|0));)o=o+(U<<1)|0,h=h+(U<<1)|0;h=r+1179664|0,o=U+1|0,ne=0-U|0,R=1-U|0,F=~U,_=(a<<1)+8|0;e:do if((ae|0)>1){J=(ie|0)>1,t=(e[r+4>>2]|0)+o|0,W=1,l=s+((a<<2)+4)|0,c=d+(o<<1)|0,o=0;t:for(;;){if(J)for(y=1,g=l,f=o;;){d=B[g>>0]|0;do if(((d&240)+24+(d<<4&240)+((B[g+1>>0]|0)&240)|0)>(q|0)){if(M[t>>0]=-1,o=E[c+(ne<<1)>>1]|0,o<<16>>16>0){E[c>>1]=o,o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(s=E[c+(R<<1)>>1]|0,a=s<<16>>16,o=E[c+(F<<1)>>1]|0,d=o<<16>>16,l=o<<16>>16>0,s<<16>>16<=0){if(l){E[c>>1]=o,o=d*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+y,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(o+-3<<2)|0,(e[l>>2]|0)<(y|0)&&(e[l>>2]=y),e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(o=E[c+-2>>1]|0,o<<16>>16>0){if(E[c>>1]=o,o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,o=r+1310736+(o+-3<<2)|0,(e[o>>2]|0)>=(y|0)){o=f;break}e[o>>2]=y,o=f;break}else{if(o=f+1|0,(f|0)>32767)break t;E[c>>1]=o,e[r+1179664+(f<<2)>>2]=o<<16>>16,f=f*7|0,e[r+1310736+(f<<2)>>2]=1,e[r+1310736+(f+1<<2)>>2]=y,e[r+1310736+(f+2<<2)>>2]=W,e[r+1310736+(f+3<<2)>>2]=y,e[r+1310736+(f+4<<2)>>2]=y,e[r+1310736+(f+5<<2)>>2]=W,e[r+1310736+(f+6<<2)>>2]=W;break}}if(l){if(o=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+(d+-1<<2)>>2]|0,(o|0)>(a|0))if(E[c>>1]=a,(f|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(o|0)&&(e[s>>2]=a),l=l+1|0,(l|0)>=(f|0)){o=a;break}else s=s+4|0;else o=a;else if(E[c>>1]=o,(o|0)<(a|0)&(f|0)>0)for(l=0,s=h;(e[s>>2]|0)==(a|0)&&(e[s>>2]=o),l=l+1|0,!((l|0)>=(f|0));)s=s+4|0;o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(l=E[c+-2>>1]|0,l<<16>>16<=0){E[c>>1]=s,o=a*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+y,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(o+-4<<2)|0,(e[l>>2]|0)>(y|0)&&(e[l>>2]=y),e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(o=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(o|0)>(a|0))if(E[c>>1]=a,(f|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(o|0)&&(e[s>>2]=a),l=l+1|0,(l|0)>=(f|0)){o=a;break}else s=s+4|0;else o=a;else if(E[c>>1]=o,(o|0)<(a|0)&(f|0)>0)for(l=0,s=h;(e[s>>2]|0)==(a|0)&&(e[s>>2]=o),l=l+1|0,!((l|0)>=(f|0));)s=s+4|0;o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,o=r+1310736+(o+-5<<2)|0,e[o>>2]=(e[o>>2]|0)+W,o=f}else E[c>>1]=0,M[t>>0]=0,o=f;while(!1);if(y=y+1|0,l=g+4|0,c=c+2|0,t=t+1|0,(y|0)>=(ie|0))break;g=l,f=o}if(W=W+1|0,(W|0)>=(ae|0)){a=o,X=52;break e}else t=t+2|0,l=l+_|0,c=c+4|0}ft(3,3904,se),t=-1}else a=0,X=52;while(!1);if((X|0)==52){if(c=r+12|0,(a|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(a|0);)l=l+1|0,h=h+4|0;if(s=r+8|0,t=o+-1|0,e[s>>2]=t,t){if(gt(c|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=U,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=Ae,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((a|0)>0){c=0;do h=(e[r+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[s>>2]|0)>0){t=0;do U=r+12+(t<<2)|0,Ae=t<<1,X=r+655376+(Ae<<3)|0,A[X>>3]=+A[X>>3]/+(e[U>>2]|0),Ae=r+655376+((Ae|1)<<3)|0,A[Ae>>3]=+A[Ae>>3]/+(e[U>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return C=We,t|0}function ka(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0;if(We=C,C=C+16|0,se=We,U=(a|0)/2|0,Ae=(c|0)/2|0,d=e[r>>2]|0,ae=Ae+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ae,U)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(U|0));)h=h+2|0,l=l+2|0;if(q=o*3|0,ie=U+-1|0,(c|0)>1)for(t=0,o=d,h=d+(ie<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(Ae|0));)o=o+(U<<1)|0,h=h+(U<<1)|0;h=r+1179664|0,o=U+1|0,ne=0-U|0,R=1-U|0,F=~U,_=(a<<1)+8|0;e:do if((ae|0)>1){J=(ie|0)>1,t=(e[r+4>>2]|0)+o|0,W=1,l=s+((a<<2)+4)|0,c=d+(o<<1)|0,o=0;t:for(;;){if(J)for(y=1,g=l,f=o;;){a=B[g>>0]|0,d=B[g+1>>0]|0;do if(((a&248)+12+(a<<5&224)+(d>>>3&24)+(d<<2&248)|0)>(q|0)){if(M[t>>0]=-1,o=E[c+(ne<<1)>>1]|0,o<<16>>16>0){E[c>>1]=o,o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(s=E[c+(R<<1)>>1]|0,a=s<<16>>16,o=E[c+(F<<1)>>1]|0,d=o<<16>>16,l=o<<16>>16>0,s<<16>>16<=0){if(l){E[c>>1]=o,o=d*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+y,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(o+-3<<2)|0,(e[l>>2]|0)<(y|0)&&(e[l>>2]=y),e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(o=E[c+-2>>1]|0,o<<16>>16>0){if(E[c>>1]=o,o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,o=r+1310736+(o+-3<<2)|0,(e[o>>2]|0)>=(y|0)){o=f;break}e[o>>2]=y,o=f;break}else{if(o=f+1|0,(f|0)>32767)break t;E[c>>1]=o,e[r+1179664+(f<<2)>>2]=o<<16>>16,f=f*7|0,e[r+1310736+(f<<2)>>2]=1,e[r+1310736+(f+1<<2)>>2]=y,e[r+1310736+(f+2<<2)>>2]=W,e[r+1310736+(f+3<<2)>>2]=y,e[r+1310736+(f+4<<2)>>2]=y,e[r+1310736+(f+5<<2)>>2]=W,e[r+1310736+(f+6<<2)>>2]=W;break}}if(l){if(o=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+(d+-1<<2)>>2]|0,(o|0)>(a|0))if(E[c>>1]=a,(f|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(o|0)&&(e[s>>2]=a),l=l+1|0,(l|0)>=(f|0)){o=a;break}else s=s+4|0;else o=a;else if(E[c>>1]=o,(o|0)<(a|0)&(f|0)>0)for(l=0,s=h;(e[s>>2]|0)==(a|0)&&(e[s>>2]=o),l=l+1|0,!((l|0)>=(f|0));)s=s+4|0;o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(l=E[c+-2>>1]|0,l<<16>>16<=0){E[c>>1]=s,o=a*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+y,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(o+-4<<2)|0,(e[l>>2]|0)>(y|0)&&(e[l>>2]=y),e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(o=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(o|0)>(a|0))if(E[c>>1]=a,(f|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(o|0)&&(e[s>>2]=a),l=l+1|0,(l|0)>=(f|0)){o=a;break}else s=s+4|0;else o=a;else if(E[c>>1]=o,(o|0)<(a|0)&(f|0)>0)for(l=0,s=h;(e[s>>2]|0)==(a|0)&&(e[s>>2]=o),l=l+1|0,!((l|0)>=(f|0));)s=s+4|0;o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,o=r+1310736+(o+-5<<2)|0,e[o>>2]=(e[o>>2]|0)+W,o=f}else E[c>>1]=0,M[t>>0]=0,o=f;while(!1);if(y=y+1|0,l=g+4|0,c=c+2|0,t=t+1|0,(y|0)>=(ie|0))break;g=l,f=o}if(W=W+1|0,(W|0)>=(ae|0)){a=o,X=52;break e}else t=t+2|0,l=l+_|0,c=c+4|0}ft(3,3904,se),t=-1}else a=0,X=52;while(!1);if((X|0)==52){if(c=r+12|0,(a|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(a|0);)l=l+1|0,h=h+4|0;if(s=r+8|0,t=o+-1|0,e[s>>2]=t,t){if(gt(c|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=U,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=Ae,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((a|0)>0){c=0;do h=(e[r+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[s>>2]|0)>0){t=0;do U=r+12+(t<<2)|0,Ae=t<<1,X=r+655376+(Ae<<3)|0,A[X>>3]=+A[X>>3]/+(e[U>>2]|0),Ae=r+655376+((Ae|1)<<3)|0,A[Ae>>3]=+A[Ae>>3]/+(e[U>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return C=We,t|0}function bu(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0;if(We=C,C=C+16|0,se=We,U=(a|0)/2|0,Ae=(c|0)/2|0,d=e[r>>2]|0,ae=Ae+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ae,U)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(U|0));)h=h+2|0,l=l+2|0;if(q=o*3|0,ie=U+-1|0,(c|0)>1)for(t=0,o=d,h=d+(ie<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(Ae|0));)o=o+(U<<1)|0,h=h+(U<<1)|0;h=r+1179664|0,o=U+1|0,ne=0-U|0,R=1-U|0,F=~U,_=(a<<2)+16|0;e:do if((ae|0)>1){J=(ie|0)>1,t=(e[r+4>>2]|0)+o|0,W=1,l=s+((a<<3)+8)|0,c=d+(o<<1)|0,o=0;t:for(;;){if(J)for(y=1,g=l,f=o;;){do if(((B[g+2>>0]|0)+(B[g+1>>0]|0)+(B[g+3>>0]|0)|0)>(q|0)){if(M[t>>0]=-1,o=E[c+(ne<<1)>>1]|0,o<<16>>16>0){E[c>>1]=o,o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(s=E[c+(R<<1)>>1]|0,a=s<<16>>16,o=E[c+(F<<1)>>1]|0,d=o<<16>>16,l=o<<16>>16>0,s<<16>>16<=0){if(l){E[c>>1]=o,o=d*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+y,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(o+-3<<2)|0,(e[l>>2]|0)<(y|0)&&(e[l>>2]=y),e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(o=E[c+-2>>1]|0,o<<16>>16>0){if(E[c>>1]=o,o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,o=r+1310736+(o+-3<<2)|0,(e[o>>2]|0)>=(y|0)){o=f;break}e[o>>2]=y,o=f;break}else{if(o=f+1|0,(f|0)>32767)break t;E[c>>1]=o,e[r+1179664+(f<<2)>>2]=o<<16>>16,f=f*7|0,e[r+1310736+(f<<2)>>2]=1,e[r+1310736+(f+1<<2)>>2]=y,e[r+1310736+(f+2<<2)>>2]=W,e[r+1310736+(f+3<<2)>>2]=y,e[r+1310736+(f+4<<2)>>2]=y,e[r+1310736+(f+5<<2)>>2]=W,e[r+1310736+(f+6<<2)>>2]=W;break}}if(l){if(o=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+(d+-1<<2)>>2]|0,(o|0)>(a|0))if(E[c>>1]=a,(f|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(o|0)&&(e[s>>2]=a),l=l+1|0,(l|0)>=(f|0)){o=a;break}else s=s+4|0;else o=a;else if(E[c>>1]=o,(o|0)<(a|0)&(f|0)>0)for(l=0,s=h;(e[s>>2]|0)==(a|0)&&(e[s>>2]=o),l=l+1|0,!((l|0)>=(f|0));)s=s+4|0;o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(l=E[c+-2>>1]|0,l<<16>>16<=0){E[c>>1]=s,o=a*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+y,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(o+-4<<2)|0,(e[l>>2]|0)>(y|0)&&(e[l>>2]=y),e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(o=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(o|0)>(a|0))if(E[c>>1]=a,(f|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(o|0)&&(e[s>>2]=a),l=l+1|0,(l|0)>=(f|0)){o=a;break}else s=s+4|0;else o=a;else if(E[c>>1]=o,(o|0)<(a|0)&(f|0)>0)for(l=0,s=h;(e[s>>2]|0)==(a|0)&&(e[s>>2]=o),l=l+1|0,!((l|0)>=(f|0));)s=s+4|0;o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,o=r+1310736+(o+-5<<2)|0,e[o>>2]=(e[o>>2]|0)+W,o=f}else E[c>>1]=0,M[t>>0]=0,o=f;while(!1);if(y=y+1|0,l=g+8|0,c=c+2|0,t=t+1|0,(y|0)>=(ie|0))break;g=l,f=o}if(W=W+1|0,(W|0)>=(ae|0)){a=o,X=52;break e}else t=t+2|0,l=l+_|0,c=c+4|0}ft(3,3904,se),t=-1}else a=0,X=52;while(!1);if((X|0)==52){if(c=r+12|0,(a|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(a|0);)l=l+1|0,h=h+4|0;if(s=r+8|0,t=o+-1|0,e[s>>2]=t,t){if(gt(c|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=U,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=Ae,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((a|0)>0){c=0;do h=(e[r+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[s>>2]|0)>0){t=0;do U=r+12+(t<<2)|0,Ae=t<<1,X=r+655376+(Ae<<3)|0,A[X>>3]=+A[X>>3]/+(e[U>>2]|0),Ae=r+655376+((Ae|1)<<3)|0,A[Ae>>3]=+A[Ae>>3]/+(e[U>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return C=We,t|0}function Ao(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0;if(We=C,C=C+16|0,se=We,U=(a|0)/2|0,Ae=(c|0)/2|0,d=e[r>>2]|0,ae=Ae+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ae,U)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(U|0));)h=h+2|0,l=l+2|0;if(ie=U+-1|0,(c|0)>1)for(t=0,h=d,l=d+(ie<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(Ae|0));)h=h+(U<<1)|0,l=l+(U<<1)|0;l=r+1179664|0,h=U+1|0,J=0-U|0,F=1-U|0,ne=~U,R=a+4|0;e:do if((ae|0)>1){W=(ie|0)>1,t=(e[r+4>>2]|0)+h|0,q=1,c=s+((a<<1)+2)|0,s=d+(h<<1)|0,h=0;t:for(;;){if(W)for(_=1,y=c,g=h;;){do if((B[y>>0]|0|0)>(o|0)){if(M[t>>0]=-1,h=E[s+(J<<1)>>1]|0,h<<16>>16>0){E[s>>1]=h,h=(h<<16>>16)*7|0,f=r+1310736+(h+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(h+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(h+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,e[r+1310736+(h+-1<<2)>>2]=q,h=g;break}if(a=E[s+(F<<1)>>1]|0,d=a<<16>>16,h=E[s+(ne<<1)>>1]|0,f=h<<16>>16,c=h<<16>>16>0,a<<16>>16<=0){if(c){E[s>>1]=h,h=f*7|0,c=r+1310736+(h+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=r+1310736+(h+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+_,c=r+1310736+(h+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+q,c=r+1310736+(h+-3<<2)|0,(e[c>>2]|0)<(_|0)&&(e[c>>2]=_),e[r+1310736+(h+-1<<2)>>2]=q,h=g;break}if(h=E[s+-2>>1]|0,h<<16>>16>0){if(E[s>>1]=h,h=(h<<16>>16)*7|0,f=r+1310736+(h+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(h+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(h+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,h=r+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(_|0)){h=g;break}e[h>>2]=_,h=g;break}else{if(h=g+1|0,(g|0)>32767)break t;E[s>>1]=h,e[r+1179664+(g<<2)>>2]=h<<16>>16,g=g*7|0,e[r+1310736+(g<<2)>>2]=1,e[r+1310736+(g+1<<2)>>2]=_,e[r+1310736+(g+2<<2)>>2]=q,e[r+1310736+(g+3<<2)>>2]=_,e[r+1310736+(g+4<<2)>>2]=_,e[r+1310736+(g+5<<2)>>2]=q,e[r+1310736+(g+6<<2)>>2]=q;break}}if(c){if(h=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+(f+-1<<2)>>2]|0,(h|0)>(d|0))if(E[s>>1]=d,(g|0)>0)for(c=0,a=l;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),c=c+1|0,(c|0)>=(g|0)){h=d;break}else a=a+4|0;else h=d;else if(E[s>>1]=h,(h|0)<(d|0)&(g|0)>0)for(c=0,a=l;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),c=c+1|0,!((c|0)>=(g|0));)a=a+4|0;h=(h<<16>>16)*7|0,f=r+1310736+(h+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(h+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(h+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,e[r+1310736+(h+-1<<2)>>2]=q,h=g;break}if(c=E[s+-2>>1]|0,c<<16>>16<=0){E[s>>1]=a,h=d*7|0,c=r+1310736+(h+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=r+1310736+(h+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+_,c=r+1310736+(h+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+q,c=r+1310736+(h+-4<<2)|0,(e[c>>2]|0)>(_|0)&&(e[c>>2]=_),e[r+1310736+(h+-1<<2)>>2]=q,h=g;break}if(h=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+((c<<16>>16)+-1<<2)>>2]|0,(h|0)>(d|0))if(E[s>>1]=d,(g|0)>0)for(c=0,a=l;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),c=c+1|0,(c|0)>=(g|0)){h=d;break}else a=a+4|0;else h=d;else if(E[s>>1]=h,(h|0)<(d|0)&(g|0)>0)for(c=0,a=l;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),c=c+1|0,!((c|0)>=(g|0));)a=a+4|0;h=(h<<16>>16)*7|0,f=r+1310736+(h+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(h+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,h=r+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+q,h=g}else E[s>>1]=0,M[t>>0]=0,h=g;while(!1);if(_=_+1|0,c=y+2|0,s=s+2|0,t=t+1|0,(_|0)>=(ie|0))break;y=c,g=h}if(q=q+1|0,(q|0)>=(ae|0)){d=h,X=52;break e}else t=t+2|0,c=c+R|0,s=s+4|0}ft(3,3904,se),t=-1}else d=0,X=52;while(!1);if((X|0)==52){if(s=r+12|0,(d|0)<1)h=1;else for(c=1,h=1;t=e[l>>2]|0,(t|0)==(c|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(c|0)<(d|0);)c=c+1|0,l=l+4|0;if(a=r+8|0,t=h+-1|0,e[a>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=U,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=Ae,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[a>>2]|0))}if((d|0)>0){s=0;do l=(e[r+1179664+(s<<2)>>2]|0)+-1|0,c=s*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(c<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(c+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(c+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(c+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(c+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(c+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(c+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),s=s+1|0;while((s|0)<(d|0))}if((e[a>>2]|0)>0){t=0;do U=r+12+(t<<2)|0,Ae=t<<1,X=r+655376+(Ae<<3)|0,A[X>>3]=+A[X>>3]/+(e[U>>2]|0),Ae=r+655376+((Ae|1)<<3)|0,A[Ae>>3]=+A[Ae>>3]/+(e[U>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0));t=0}else t=0}else t=0}return C=We,t|0}function Cu(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0;if(We=C,C=C+16|0,se=We,U=(a|0)/2|0,Ae=(c|0)/2|0,d=e[r>>2]|0,ae=Ae+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ae,U)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(U|0));)h=h+2|0,l=l+2|0;if(ie=U+-1|0,(c|0)>1)for(t=0,h=d,l=d+(ie<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(Ae|0));)h=h+(U<<1)|0,l=l+(U<<1)|0;l=r+1179664|0,h=U+1|0,J=0-U|0,F=1-U|0,ne=~U,R=(a<<1)+8|0;e:do if((ae|0)>1){W=(ie|0)>1,t=(e[r+4>>2]|0)+h|0,q=1,c=s+((a<<2)+4)|0,s=d+(h<<1)|0,h=0;t:for(;;){if(W)for(_=1,y=c,g=h;;){do if((B[y+1>>0]|0|0)>(o|0)){if(M[t>>0]=-1,h=E[s+(J<<1)>>1]|0,h<<16>>16>0){E[s>>1]=h,h=(h<<16>>16)*7|0,f=r+1310736+(h+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(h+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(h+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,e[r+1310736+(h+-1<<2)>>2]=q,h=g;break}if(a=E[s+(F<<1)>>1]|0,d=a<<16>>16,h=E[s+(ne<<1)>>1]|0,f=h<<16>>16,c=h<<16>>16>0,a<<16>>16<=0){if(c){E[s>>1]=h,h=f*7|0,c=r+1310736+(h+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=r+1310736+(h+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+_,c=r+1310736+(h+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+q,c=r+1310736+(h+-3<<2)|0,(e[c>>2]|0)<(_|0)&&(e[c>>2]=_),e[r+1310736+(h+-1<<2)>>2]=q,h=g;break}if(h=E[s+-2>>1]|0,h<<16>>16>0){if(E[s>>1]=h,h=(h<<16>>16)*7|0,f=r+1310736+(h+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(h+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(h+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,h=r+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(_|0)){h=g;break}e[h>>2]=_,h=g;break}else{if(h=g+1|0,(g|0)>32767)break t;E[s>>1]=h,e[r+1179664+(g<<2)>>2]=h<<16>>16,g=g*7|0,e[r+1310736+(g<<2)>>2]=1,e[r+1310736+(g+1<<2)>>2]=_,e[r+1310736+(g+2<<2)>>2]=q,e[r+1310736+(g+3<<2)>>2]=_,e[r+1310736+(g+4<<2)>>2]=_,e[r+1310736+(g+5<<2)>>2]=q,e[r+1310736+(g+6<<2)>>2]=q;break}}if(c){if(h=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+(f+-1<<2)>>2]|0,(h|0)>(d|0))if(E[s>>1]=d,(g|0)>0)for(c=0,a=l;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),c=c+1|0,(c|0)>=(g|0)){h=d;break}else a=a+4|0;else h=d;else if(E[s>>1]=h,(h|0)<(d|0)&(g|0)>0)for(c=0,a=l;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),c=c+1|0,!((c|0)>=(g|0));)a=a+4|0;h=(h<<16>>16)*7|0,f=r+1310736+(h+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(h+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(h+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,e[r+1310736+(h+-1<<2)>>2]=q,h=g;break}if(c=E[s+-2>>1]|0,c<<16>>16<=0){E[s>>1]=a,h=d*7|0,c=r+1310736+(h+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=r+1310736+(h+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+_,c=r+1310736+(h+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+q,c=r+1310736+(h+-4<<2)|0,(e[c>>2]|0)>(_|0)&&(e[c>>2]=_),e[r+1310736+(h+-1<<2)>>2]=q,h=g;break}if(h=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+((c<<16>>16)+-1<<2)>>2]|0,(h|0)>(d|0))if(E[s>>1]=d,(g|0)>0)for(c=0,a=l;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),c=c+1|0,(c|0)>=(g|0)){h=d;break}else a=a+4|0;else h=d;else if(E[s>>1]=h,(h|0)<(d|0)&(g|0)>0)for(c=0,a=l;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),c=c+1|0,!((c|0)>=(g|0));)a=a+4|0;h=(h<<16>>16)*7|0,f=r+1310736+(h+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(h+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,h=r+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+q,h=g}else E[s>>1]=0,M[t>>0]=0,h=g;while(!1);if(_=_+1|0,c=y+4|0,s=s+2|0,t=t+1|0,(_|0)>=(ie|0))break;y=c,g=h}if(q=q+1|0,(q|0)>=(ae|0)){d=h,X=52;break e}else t=t+2|0,c=c+R|0,s=s+4|0}ft(3,3904,se),t=-1}else d=0,X=52;while(!1);if((X|0)==52){if(s=r+12|0,(d|0)<1)h=1;else for(c=1,h=1;t=e[l>>2]|0,(t|0)==(c|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(c|0)<(d|0);)c=c+1|0,l=l+4|0;if(a=r+8|0,t=h+-1|0,e[a>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=U,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=Ae,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[a>>2]|0))}if((d|0)>0){s=0;do l=(e[r+1179664+(s<<2)>>2]|0)+-1|0,c=s*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(c<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(c+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(c+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(c+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(c+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(c+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(c+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),s=s+1|0;while((s|0)<(d|0))}if((e[a>>2]|0)>0){t=0;do U=r+12+(t<<2)|0,Ae=t<<1,X=r+655376+(Ae<<3)|0,A[X>>3]=+A[X>>3]/+(e[U>>2]|0),Ae=r+655376+((Ae|1)<<3)|0,A[Ae>>3]=+A[Ae>>3]/+(e[U>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0));t=0}else t=0}else t=0}return C=We,t|0}function xu(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0;if(We=C,C=C+16|0,se=We,U=(a|0)/2|0,Ae=(c|0)/2|0,d=e[r>>2]|0,ae=Ae+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ae,U)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(U|0));)h=h+2|0,l=l+2|0;if(ie=U+-1|0,(c|0)>1)for(t=0,h=d,l=d+(ie<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(Ae|0));)h=h+(U<<1)|0,l=l+(U<<1)|0;l=r+1179664|0,h=U+1|0,J=0-U|0,F=1-U|0,ne=~U,R=(a<<1)+8|0;e:do if((ae|0)>1){W=(ie|0)>1,t=(e[r+4>>2]|0)+h|0,q=1,c=s+((a<<2)+4)|0,s=d+(h<<1)|0,h=0;t:for(;;){if(W)for(_=1,y=c,g=h;;){do if((B[y>>0]|0|0)>(o|0)){if(M[t>>0]=-1,h=E[s+(J<<1)>>1]|0,h<<16>>16>0){E[s>>1]=h,h=(h<<16>>16)*7|0,f=r+1310736+(h+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(h+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(h+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,e[r+1310736+(h+-1<<2)>>2]=q,h=g;break}if(a=E[s+(F<<1)>>1]|0,d=a<<16>>16,h=E[s+(ne<<1)>>1]|0,f=h<<16>>16,c=h<<16>>16>0,a<<16>>16<=0){if(c){E[s>>1]=h,h=f*7|0,c=r+1310736+(h+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=r+1310736+(h+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+_,c=r+1310736+(h+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+q,c=r+1310736+(h+-3<<2)|0,(e[c>>2]|0)<(_|0)&&(e[c>>2]=_),e[r+1310736+(h+-1<<2)>>2]=q,h=g;break}if(h=E[s+-2>>1]|0,h<<16>>16>0){if(E[s>>1]=h,h=(h<<16>>16)*7|0,f=r+1310736+(h+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(h+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(h+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,h=r+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(_|0)){h=g;break}e[h>>2]=_,h=g;break}else{if(h=g+1|0,(g|0)>32767)break t;E[s>>1]=h,e[r+1179664+(g<<2)>>2]=h<<16>>16,g=g*7|0,e[r+1310736+(g<<2)>>2]=1,e[r+1310736+(g+1<<2)>>2]=_,e[r+1310736+(g+2<<2)>>2]=q,e[r+1310736+(g+3<<2)>>2]=_,e[r+1310736+(g+4<<2)>>2]=_,e[r+1310736+(g+5<<2)>>2]=q,e[r+1310736+(g+6<<2)>>2]=q;break}}if(c){if(h=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+(f+-1<<2)>>2]|0,(h|0)>(d|0))if(E[s>>1]=d,(g|0)>0)for(c=0,a=l;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),c=c+1|0,(c|0)>=(g|0)){h=d;break}else a=a+4|0;else h=d;else if(E[s>>1]=h,(h|0)<(d|0)&(g|0)>0)for(c=0,a=l;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),c=c+1|0,!((c|0)>=(g|0));)a=a+4|0;h=(h<<16>>16)*7|0,f=r+1310736+(h+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(h+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(h+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,e[r+1310736+(h+-1<<2)>>2]=q,h=g;break}if(c=E[s+-2>>1]|0,c<<16>>16<=0){E[s>>1]=a,h=d*7|0,c=r+1310736+(h+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=r+1310736+(h+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+_,c=r+1310736+(h+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+q,c=r+1310736+(h+-4<<2)|0,(e[c>>2]|0)>(_|0)&&(e[c>>2]=_),e[r+1310736+(h+-1<<2)>>2]=q,h=g;break}if(h=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+((c<<16>>16)+-1<<2)>>2]|0,(h|0)>(d|0))if(E[s>>1]=d,(g|0)>0)for(c=0,a=l;;)if((e[a>>2]|0)==(h|0)&&(e[a>>2]=d),c=c+1|0,(c|0)>=(g|0)){h=d;break}else a=a+4|0;else h=d;else if(E[s>>1]=h,(h|0)<(d|0)&(g|0)>0)for(c=0,a=l;(e[a>>2]|0)==(d|0)&&(e[a>>2]=h),c=c+1|0,!((c|0)>=(g|0));)a=a+4|0;h=(h<<16>>16)*7|0,f=r+1310736+(h+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(h+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,h=r+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+q,h=g}else E[s>>1]=0,M[t>>0]=0,h=g;while(!1);if(_=_+1|0,c=y+4|0,s=s+2|0,t=t+1|0,(_|0)>=(ie|0))break;y=c,g=h}if(q=q+1|0,(q|0)>=(ae|0)){d=h,X=52;break e}else t=t+2|0,c=c+R|0,s=s+4|0}ft(3,3904,se),t=-1}else d=0,X=52;while(!1);if((X|0)==52){if(s=r+12|0,(d|0)<1)h=1;else for(c=1,h=1;t=e[l>>2]|0,(t|0)==(c|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(c|0)<(d|0);)c=c+1|0,l=l+4|0;if(a=r+8|0,t=h+-1|0,e[a>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=U,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=Ae,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[a>>2]|0))}if((d|0)>0){s=0;do l=(e[r+1179664+(s<<2)>>2]|0)+-1|0,c=s*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(c<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(c+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(c+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(c+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(c+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(c+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(c+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),s=s+1|0;while((s|0)<(d|0))}if((e[a>>2]|0)>0){t=0;do U=r+12+(t<<2)|0,Ae=t<<1,X=r+655376+(Ae<<3)|0,A[X>>3]=+A[X>>3]/+(e[U>>2]|0),Ae=r+655376+((Ae|1)<<3)|0,A[Ae>>3]=+A[Ae>>3]/+(e[U>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0));t=0}else t=0}else t=0}return C=We,t|0}function _u(s){s=s|0;var a=0;return a=C,C=C+s|0,C=C+15&-16,a|0}function Mu(){return C|0}function Su(s){s=s|0,C=s}function Tu(s,a){s=s|0,a=a|0,C=s,V=a}function Iu(s,a){s=s|0,a=a|0,k||(k=s,K=a)}function Af(s){s=s|0,M[z>>0]=M[s>>0],M[z+1>>0]=M[s+1>>0],M[z+2>>0]=M[s+2>>0],M[z+3>>0]=M[s+3>>0]}function mf(s){s=s|0,M[z>>0]=M[s>>0],M[z+1>>0]=M[s+1>>0],M[z+2>>0]=M[s+2>>0],M[z+3>>0]=M[s+3>>0],M[z+4>>0]=M[s+4>>0],M[z+5>>0]=M[s+5>>0],M[z+6>>0]=M[s+6>>0],M[z+7>>0]=M[s+7>>0]}function Ru(s){s=s|0,Je=s}function Bu(){return Je|0}function Du(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,ae=Ae,X=(a|0)/2|0,U=(c|0)/2|0,d=e[r>>2]|0,ie=U+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ie,X)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(X|0));)h=h+2|0,l=l+2|0;if(W=o*3|0,q=X+-1|0,(c|0)>1)for(t=0,o=d,h=d+(q<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(U|0));)o=o+(X<<1)|0,h=h+(X<<1)|0;h=r+1179664|0,F=0-X|0,_=1-X|0,R=~X,y=(a*3|0)+12|0;e:do if((ie|0)>1){ne=(q|0)>1,J=1,o=s+((a*6|0)+6)|0,l=d+(X+1<<1)|0,t=0;t:for(;;){if(ne)for(g=1,f=l,d=t;;){do if(((B[o+1>>0]|0)+(B[o>>0]|0)+(B[o+2>>0]|0)|0)>(W|0))E[f>>1]=0,t=d;else{if(t=E[f+(F<<1)>>1]|0,t<<16>>16>0){E[f>>1]=t,t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(c=E[f+(_<<1)>>1]|0,s=c<<16>>16,t=E[f+(R<<1)>>1]|0,a=t<<16>>16,l=t<<16>>16>0,c<<16>>16<=0){if(l){E[f>>1]=t,t=a*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+g,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+J,l=r+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(g|0)&&(e[l>>2]=g),e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(t=E[f+-2>>1]|0,t<<16>>16>0){if(E[f>>1]=t,t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(g|0)){t=d;break}e[t>>2]=g,t=d;break}else{if(t=d+1|0,(d|0)>32767)break t;E[f>>1]=t,e[r+1179664+(d<<2)>>2]=t<<16>>16,d=d*7|0,e[r+1310736+(d<<2)>>2]=1,e[r+1310736+(d+1<<2)>>2]=g,e[r+1310736+(d+2<<2)>>2]=J,e[r+1310736+(d+3<<2)>>2]=g,e[r+1310736+(d+4<<2)>>2]=g,e[r+1310736+(d+5<<2)>>2]=J,e[r+1310736+(d+6<<2)>>2]=J;break}}if(l){if(t=e[r+1179664+(s+-1<<2)>>2]|0,s=e[r+1179664+(a+-1<<2)>>2]|0,(t|0)>(s|0))if(E[f>>1]=s,(d|0)>0)for(l=0,c=h;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=s),l=l+1|0,(l|0)>=(d|0)){t=s;break}else c=c+4|0;else t=s;else if(E[f>>1]=t,(t|0)<(s|0)&(d|0)>0)for(l=0,c=h;(e[c>>2]|0)==(s|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(l=E[f+-2>>1]|0,l<<16>>16<=0){E[f>>1]=c,t=s*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+g,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+J,l=r+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(g|0)&&(e[l>>2]=g),e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(t=e[r+1179664+(s+-1<<2)>>2]|0,s=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(s|0))if(E[f>>1]=s,(d|0)>0)for(l=0,c=h;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=s),l=l+1|0,(l|0)>=(d|0)){t=s;break}else c=c+4|0;else t=s;else if(E[f>>1]=t,(t|0)<(s|0)&(d|0)>0)for(l=0,c=h;(e[c>>2]|0)==(s|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+J,t=d}while(!1);if(g=g+1|0,o=o+6|0,l=f+2|0,(g|0)>=(q|0))break;f=l,d=t}if(J=J+1|0,(J|0)>=(ie|0)){a=t,se=52;break e}else o=o+y|0,l=l+4|0}ft(3,3904,ae),t=-1}else a=0,se=52;while(!1);if((se|0)==52){if(c=r+12|0,(a|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(a|0);)l=l+1|0,h=h+4|0;if(s=r+8|0,t=o+-1|0,e[s>>2]=t,t){if(gt(c|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do se=t<<2,e[r+131084+(se<<2)>>2]=X,e[r+131084+((se|1)<<2)>>2]=0,e[r+131084+((se|2)<<2)>>2]=U,e[r+131084+((se|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((a|0)>0){c=0;do h=(e[r+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[s>>2]|0)>0){t=0;do X=r+12+(t<<2)|0,U=t<<1,se=r+655376+(U<<3)|0,A[se>>3]=+A[se>>3]/+(e[X>>2]|0),U=r+655376+((U|1)<<3)|0,A[U>>3]=+A[U>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function Lu(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,ae=Ae,X=(a|0)/2|0,U=(c|0)/2|0,d=e[r>>2]|0,ie=U+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ie,X)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(X|0));)h=h+2|0,l=l+2|0;if(W=o*3|0,q=X+-1|0,(c|0)>1)for(t=0,o=d,h=d+(q<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(U|0));)o=o+(X<<1)|0,h=h+(X<<1)|0;h=r+1179664|0,F=0-X|0,_=1-X|0,R=~X,y=(a<<1)+8|0;e:do if((ie|0)>1){ne=(q|0)>1,J=1,o=s+((a<<2)+4)|0,l=d+(X+1<<1)|0,t=0;t:for(;;){if(ne)for(g=1,f=l,d=t;;){s=B[o>>0]|0,a=B[o+1>>0]|0;do if(((s&248)+10+(s<<5&224)+(a>>>3&28)+(a<<3&248)|0)>(W|0))E[f>>1]=0,t=d;else{if(t=E[f+(F<<1)>>1]|0,t<<16>>16>0){E[f>>1]=t,t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(c=E[f+(_<<1)>>1]|0,s=c<<16>>16,t=E[f+(R<<1)>>1]|0,a=t<<16>>16,l=t<<16>>16>0,c<<16>>16<=0){if(l){E[f>>1]=t,t=a*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+g,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+J,l=r+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(g|0)&&(e[l>>2]=g),e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(t=E[f+-2>>1]|0,t<<16>>16>0){if(E[f>>1]=t,t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(g|0)){t=d;break}e[t>>2]=g,t=d;break}else{if(t=d+1|0,(d|0)>32767)break t;E[f>>1]=t,e[r+1179664+(d<<2)>>2]=t<<16>>16,d=d*7|0,e[r+1310736+(d<<2)>>2]=1,e[r+1310736+(d+1<<2)>>2]=g,e[r+1310736+(d+2<<2)>>2]=J,e[r+1310736+(d+3<<2)>>2]=g,e[r+1310736+(d+4<<2)>>2]=g,e[r+1310736+(d+5<<2)>>2]=J,e[r+1310736+(d+6<<2)>>2]=J;break}}if(l){if(t=e[r+1179664+(s+-1<<2)>>2]|0,s=e[r+1179664+(a+-1<<2)>>2]|0,(t|0)>(s|0))if(E[f>>1]=s,(d|0)>0)for(l=0,c=h;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=s),l=l+1|0,(l|0)>=(d|0)){t=s;break}else c=c+4|0;else t=s;else if(E[f>>1]=t,(t|0)<(s|0)&(d|0)>0)for(l=0,c=h;(e[c>>2]|0)==(s|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(l=E[f+-2>>1]|0,l<<16>>16<=0){E[f>>1]=c,t=s*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+g,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+J,l=r+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(g|0)&&(e[l>>2]=g),e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(t=e[r+1179664+(s+-1<<2)>>2]|0,s=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(s|0))if(E[f>>1]=s,(d|0)>0)for(l=0,c=h;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=s),l=l+1|0,(l|0)>=(d|0)){t=s;break}else c=c+4|0;else t=s;else if(E[f>>1]=t,(t|0)<(s|0)&(d|0)>0)for(l=0,c=h;(e[c>>2]|0)==(s|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+J,t=d}while(!1);if(g=g+1|0,o=o+4|0,l=f+2|0,(g|0)>=(q|0))break;f=l,d=t}if(J=J+1|0,(J|0)>=(ie|0)){a=t,se=52;break e}else o=o+y|0,l=l+4|0}ft(3,3904,ae),t=-1}else a=0,se=52;while(!1);if((se|0)==52){if(c=r+12|0,(a|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(a|0);)l=l+1|0,h=h+4|0;if(s=r+8|0,t=o+-1|0,e[s>>2]=t,t){if(gt(c|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do se=t<<2,e[r+131084+(se<<2)>>2]=X,e[r+131084+((se|1)<<2)>>2]=0,e[r+131084+((se|2)<<2)>>2]=U,e[r+131084+((se|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((a|0)>0){c=0;do h=(e[r+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[s>>2]|0)>0){t=0;do X=r+12+(t<<2)|0,U=t<<1,se=r+655376+(U<<3)|0,A[se>>3]=+A[se>>3]/+(e[X>>2]|0),U=r+655376+((U|1)<<3)|0,A[U>>3]=+A[U>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function xl(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,ae=Ae,X=(a|0)/2|0,U=(c|0)/2|0,d=e[r>>2]|0,ie=U+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ie,X)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(X|0));)h=h+2|0,l=l+2|0;if(W=o*3|0,q=X+-1|0,(c|0)>1)for(t=0,o=d,h=d+(q<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(U|0));)o=o+(X<<1)|0,h=h+(X<<1)|0;h=r+1179664|0,F=0-X|0,_=1-X|0,R=~X,y=(a<<2)+16|0;e:do if((ie|0)>1){ne=(q|0)>1,J=1,o=s+((a<<3)+8)|0,l=d+(X+1<<1)|0,t=0;t:for(;;){if(ne)for(g=1,f=l,d=t;;){do if(((B[o+1>>0]|0)+(B[o>>0]|0)+(B[o+2>>0]|0)|0)>(W|0))E[f>>1]=0,t=d;else{if(t=E[f+(F<<1)>>1]|0,t<<16>>16>0){E[f>>1]=t,t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(c=E[f+(_<<1)>>1]|0,s=c<<16>>16,t=E[f+(R<<1)>>1]|0,a=t<<16>>16,l=t<<16>>16>0,c<<16>>16<=0){if(l){E[f>>1]=t,t=a*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+g,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+J,l=r+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(g|0)&&(e[l>>2]=g),e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(t=E[f+-2>>1]|0,t<<16>>16>0){if(E[f>>1]=t,t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(g|0)){t=d;break}e[t>>2]=g,t=d;break}else{if(t=d+1|0,(d|0)>32767)break t;E[f>>1]=t,e[r+1179664+(d<<2)>>2]=t<<16>>16,d=d*7|0,e[r+1310736+(d<<2)>>2]=1,e[r+1310736+(d+1<<2)>>2]=g,e[r+1310736+(d+2<<2)>>2]=J,e[r+1310736+(d+3<<2)>>2]=g,e[r+1310736+(d+4<<2)>>2]=g,e[r+1310736+(d+5<<2)>>2]=J,e[r+1310736+(d+6<<2)>>2]=J;break}}if(l){if(t=e[r+1179664+(s+-1<<2)>>2]|0,s=e[r+1179664+(a+-1<<2)>>2]|0,(t|0)>(s|0))if(E[f>>1]=s,(d|0)>0)for(l=0,c=h;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=s),l=l+1|0,(l|0)>=(d|0)){t=s;break}else c=c+4|0;else t=s;else if(E[f>>1]=t,(t|0)<(s|0)&(d|0)>0)for(l=0,c=h;(e[c>>2]|0)==(s|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(l=E[f+-2>>1]|0,l<<16>>16<=0){E[f>>1]=c,t=s*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+g,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+J,l=r+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(g|0)&&(e[l>>2]=g),e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(t=e[r+1179664+(s+-1<<2)>>2]|0,s=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(s|0))if(E[f>>1]=s,(d|0)>0)for(l=0,c=h;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=s),l=l+1|0,(l|0)>=(d|0)){t=s;break}else c=c+4|0;else t=s;else if(E[f>>1]=t,(t|0)<(s|0)&(d|0)>0)for(l=0,c=h;(e[c>>2]|0)==(s|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+J,t=d}while(!1);if(g=g+1|0,o=o+8|0,l=f+2|0,(g|0)>=(q|0))break;f=l,d=t}if(J=J+1|0,(J|0)>=(ie|0)){a=t,se=52;break e}else o=o+y|0,l=l+4|0}ft(3,3904,ae),t=-1}else a=0,se=52;while(!1);if((se|0)==52){if(c=r+12|0,(a|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(a|0);)l=l+1|0,h=h+4|0;if(s=r+8|0,t=o+-1|0,e[s>>2]=t,t){if(gt(c|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do se=t<<2,e[r+131084+(se<<2)>>2]=X,e[r+131084+((se|1)<<2)>>2]=0,e[r+131084+((se|2)<<2)>>2]=U,e[r+131084+((se|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((a|0)>0){c=0;do h=(e[r+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[s>>2]|0)>0){t=0;do X=r+12+(t<<2)|0,U=t<<1,se=r+655376+(U<<3)|0,A[se>>3]=+A[se>>3]/+(e[X>>2]|0),U=r+655376+((U|1)<<3)|0,A[U>>3]=+A[U>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function _c(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,ae=Ae,X=(a|0)/2|0,U=(c|0)/2|0,d=e[r>>2]|0,ie=U+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ie,X)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(X|0));)h=h+2|0,l=l+2|0;if(W=o*3|0,q=X+-1|0,(c|0)>1)for(t=0,o=d,h=d+(q<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(U|0));)o=o+(X<<1)|0,h=h+(X<<1)|0;h=r+1179664|0,F=0-X|0,_=1-X|0,R=~X,y=(a<<1)+8|0;e:do if((ie|0)>1){ne=(q|0)>1,J=1,o=s+((a<<2)+4)|0,l=d+(X+1<<1)|0,t=0;t:for(;;){if(ne)for(g=1,f=l,d=t;;){a=B[o>>0]|0;do if(((a&240)+24+(a<<4&240)+((B[o+1>>0]|0)&240)|0)>(W|0))E[f>>1]=0,t=d;else{if(t=E[f+(F<<1)>>1]|0,t<<16>>16>0){E[f>>1]=t,t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(c=E[f+(_<<1)>>1]|0,s=c<<16>>16,t=E[f+(R<<1)>>1]|0,a=t<<16>>16,l=t<<16>>16>0,c<<16>>16<=0){if(l){E[f>>1]=t,t=a*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+g,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+J,l=r+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(g|0)&&(e[l>>2]=g),e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(t=E[f+-2>>1]|0,t<<16>>16>0){if(E[f>>1]=t,t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(g|0)){t=d;break}e[t>>2]=g,t=d;break}else{if(t=d+1|0,(d|0)>32767)break t;E[f>>1]=t,e[r+1179664+(d<<2)>>2]=t<<16>>16,d=d*7|0,e[r+1310736+(d<<2)>>2]=1,e[r+1310736+(d+1<<2)>>2]=g,e[r+1310736+(d+2<<2)>>2]=J,e[r+1310736+(d+3<<2)>>2]=g,e[r+1310736+(d+4<<2)>>2]=g,e[r+1310736+(d+5<<2)>>2]=J,e[r+1310736+(d+6<<2)>>2]=J;break}}if(l){if(t=e[r+1179664+(s+-1<<2)>>2]|0,s=e[r+1179664+(a+-1<<2)>>2]|0,(t|0)>(s|0))if(E[f>>1]=s,(d|0)>0)for(l=0,c=h;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=s),l=l+1|0,(l|0)>=(d|0)){t=s;break}else c=c+4|0;else t=s;else if(E[f>>1]=t,(t|0)<(s|0)&(d|0)>0)for(l=0,c=h;(e[c>>2]|0)==(s|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(l=E[f+-2>>1]|0,l<<16>>16<=0){E[f>>1]=c,t=s*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+g,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+J,l=r+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(g|0)&&(e[l>>2]=g),e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(t=e[r+1179664+(s+-1<<2)>>2]|0,s=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(s|0))if(E[f>>1]=s,(d|0)>0)for(l=0,c=h;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=s),l=l+1|0,(l|0)>=(d|0)){t=s;break}else c=c+4|0;else t=s;else if(E[f>>1]=t,(t|0)<(s|0)&(d|0)>0)for(l=0,c=h;(e[c>>2]|0)==(s|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+J,t=d}while(!1);if(g=g+1|0,o=o+4|0,l=f+2|0,(g|0)>=(q|0))break;f=l,d=t}if(J=J+1|0,(J|0)>=(ie|0)){a=t,se=52;break e}else o=o+y|0,l=l+4|0}ft(3,3904,ae),t=-1}else a=0,se=52;while(!1);if((se|0)==52){if(c=r+12|0,(a|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(a|0);)l=l+1|0,h=h+4|0;if(s=r+8|0,t=o+-1|0,e[s>>2]=t,t){if(gt(c|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do se=t<<2,e[r+131084+(se<<2)>>2]=X,e[r+131084+((se|1)<<2)>>2]=0,e[r+131084+((se|2)<<2)>>2]=U,e[r+131084+((se|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((a|0)>0){c=0;do h=(e[r+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[s>>2]|0)>0){t=0;do X=r+12+(t<<2)|0,U=t<<1,se=r+655376+(U<<3)|0,A[se>>3]=+A[se>>3]/+(e[X>>2]|0),U=r+655376+((U|1)<<3)|0,A[U>>3]=+A[U>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function Mc(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,ae=Ae,X=(a|0)/2|0,U=(c|0)/2|0,d=e[r>>2]|0,ie=U+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ie,X)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(X|0));)h=h+2|0,l=l+2|0;if(W=o*3|0,q=X+-1|0,(c|0)>1)for(t=0,o=d,h=d+(q<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(U|0));)o=o+(X<<1)|0,h=h+(X<<1)|0;h=r+1179664|0,F=0-X|0,_=1-X|0,R=~X,y=(a<<1)+8|0;e:do if((ie|0)>1){ne=(q|0)>1,J=1,o=s+((a<<2)+4)|0,l=d+(X+1<<1)|0,t=0;t:for(;;){if(ne)for(g=1,f=l,d=t;;){s=B[o>>0]|0,a=B[o+1>>0]|0;do if(((s&248)+12+(s<<5&224)+(a>>>3&24)+(a<<2&248)|0)>(W|0))E[f>>1]=0,t=d;else{if(t=E[f+(F<<1)>>1]|0,t<<16>>16>0){E[f>>1]=t,t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(c=E[f+(_<<1)>>1]|0,s=c<<16>>16,t=E[f+(R<<1)>>1]|0,a=t<<16>>16,l=t<<16>>16>0,c<<16>>16<=0){if(l){E[f>>1]=t,t=a*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+g,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+J,l=r+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(g|0)&&(e[l>>2]=g),e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(t=E[f+-2>>1]|0,t<<16>>16>0){if(E[f>>1]=t,t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(g|0)){t=d;break}e[t>>2]=g,t=d;break}else{if(t=d+1|0,(d|0)>32767)break t;E[f>>1]=t,e[r+1179664+(d<<2)>>2]=t<<16>>16,d=d*7|0,e[r+1310736+(d<<2)>>2]=1,e[r+1310736+(d+1<<2)>>2]=g,e[r+1310736+(d+2<<2)>>2]=J,e[r+1310736+(d+3<<2)>>2]=g,e[r+1310736+(d+4<<2)>>2]=g,e[r+1310736+(d+5<<2)>>2]=J,e[r+1310736+(d+6<<2)>>2]=J;break}}if(l){if(t=e[r+1179664+(s+-1<<2)>>2]|0,s=e[r+1179664+(a+-1<<2)>>2]|0,(t|0)>(s|0))if(E[f>>1]=s,(d|0)>0)for(l=0,c=h;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=s),l=l+1|0,(l|0)>=(d|0)){t=s;break}else c=c+4|0;else t=s;else if(E[f>>1]=t,(t|0)<(s|0)&(d|0)>0)for(l=0,c=h;(e[c>>2]|0)==(s|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(l=E[f+-2>>1]|0,l<<16>>16<=0){E[f>>1]=c,t=s*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+g,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+J,l=r+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(g|0)&&(e[l>>2]=g),e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(t=e[r+1179664+(s+-1<<2)>>2]|0,s=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(s|0))if(E[f>>1]=s,(d|0)>0)for(l=0,c=h;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=s),l=l+1|0,(l|0)>=(d|0)){t=s;break}else c=c+4|0;else t=s;else if(E[f>>1]=t,(t|0)<(s|0)&(d|0)>0)for(l=0,c=h;(e[c>>2]|0)==(s|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+J,t=d}while(!1);if(g=g+1|0,o=o+4|0,l=f+2|0,(g|0)>=(q|0))break;f=l,d=t}if(J=J+1|0,(J|0)>=(ie|0)){a=t,se=52;break e}else o=o+y|0,l=l+4|0}ft(3,3904,ae),t=-1}else a=0,se=52;while(!1);if((se|0)==52){if(c=r+12|0,(a|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(a|0);)l=l+1|0,h=h+4|0;if(s=r+8|0,t=o+-1|0,e[s>>2]=t,t){if(gt(c|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do se=t<<2,e[r+131084+(se<<2)>>2]=X,e[r+131084+((se|1)<<2)>>2]=0,e[r+131084+((se|2)<<2)>>2]=U,e[r+131084+((se|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((a|0)>0){c=0;do h=(e[r+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[s>>2]|0)>0){t=0;do X=r+12+(t<<2)|0,U=t<<1,se=r+655376+(U<<3)|0,A[se>>3]=+A[se>>3]/+(e[X>>2]|0),U=r+655376+((U|1)<<3)|0,A[U>>3]=+A[U>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function Sc(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,ae=Ae,X=(a|0)/2|0,U=(c|0)/2|0,d=e[r>>2]|0,ie=U+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ie,X)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(X|0));)h=h+2|0,l=l+2|0;if(W=o*3|0,q=X+-1|0,(c|0)>1)for(t=0,o=d,h=d+(q<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(U|0));)o=o+(X<<1)|0,h=h+(X<<1)|0;h=r+1179664|0,F=0-X|0,_=1-X|0,R=~X,y=(a<<2)+16|0;e:do if((ie|0)>1){ne=(q|0)>1,J=1,o=s+((a<<3)+8)|0,l=d+(X+1<<1)|0,t=0;t:for(;;){if(ne)for(g=1,f=l,d=t;;){do if(((B[o+2>>0]|0)+(B[o+1>>0]|0)+(B[o+3>>0]|0)|0)>(W|0))E[f>>1]=0,t=d;else{if(t=E[f+(F<<1)>>1]|0,t<<16>>16>0){E[f>>1]=t,t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(c=E[f+(_<<1)>>1]|0,s=c<<16>>16,t=E[f+(R<<1)>>1]|0,a=t<<16>>16,l=t<<16>>16>0,c<<16>>16<=0){if(l){E[f>>1]=t,t=a*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+g,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+J,l=r+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(g|0)&&(e[l>>2]=g),e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(t=E[f+-2>>1]|0,t<<16>>16>0){if(E[f>>1]=t,t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(g|0)){t=d;break}e[t>>2]=g,t=d;break}else{if(t=d+1|0,(d|0)>32767)break t;E[f>>1]=t,e[r+1179664+(d<<2)>>2]=t<<16>>16,d=d*7|0,e[r+1310736+(d<<2)>>2]=1,e[r+1310736+(d+1<<2)>>2]=g,e[r+1310736+(d+2<<2)>>2]=J,e[r+1310736+(d+3<<2)>>2]=g,e[r+1310736+(d+4<<2)>>2]=g,e[r+1310736+(d+5<<2)>>2]=J,e[r+1310736+(d+6<<2)>>2]=J;break}}if(l){if(t=e[r+1179664+(s+-1<<2)>>2]|0,s=e[r+1179664+(a+-1<<2)>>2]|0,(t|0)>(s|0))if(E[f>>1]=s,(d|0)>0)for(l=0,c=h;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=s),l=l+1|0,(l|0)>=(d|0)){t=s;break}else c=c+4|0;else t=s;else if(E[f>>1]=t,(t|0)<(s|0)&(d|0)>0)for(l=0,c=h;(e[c>>2]|0)==(s|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(l=E[f+-2>>1]|0,l<<16>>16<=0){E[f>>1]=c,t=s*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+g,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+J,l=r+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(g|0)&&(e[l>>2]=g),e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(t=e[r+1179664+(s+-1<<2)>>2]|0,s=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(s|0))if(E[f>>1]=s,(d|0)>0)for(l=0,c=h;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=s),l=l+1|0,(l|0)>=(d|0)){t=s;break}else c=c+4|0;else t=s;else if(E[f>>1]=t,(t|0)<(s|0)&(d|0)>0)for(l=0,c=h;(e[c>>2]|0)==(s|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+J,t=d}while(!1);if(g=g+1|0,o=o+8|0,l=f+2|0,(g|0)>=(q|0))break;f=l,d=t}if(J=J+1|0,(J|0)>=(ie|0)){a=t,se=52;break e}else o=o+y|0,l=l+4|0}ft(3,3904,ae),t=-1}else a=0,se=52;while(!1);if((se|0)==52){if(c=r+12|0,(a|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(a|0);)l=l+1|0,h=h+4|0;if(s=r+8|0,t=o+-1|0,e[s>>2]=t,t){if(gt(c|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do se=t<<2,e[r+131084+(se<<2)>>2]=X,e[r+131084+((se|1)<<2)>>2]=0,e[r+131084+((se|2)<<2)>>2]=U,e[r+131084+((se|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((a|0)>0){c=0;do h=(e[r+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[s>>2]|0)>0){t=0;do X=r+12+(t<<2)|0,U=t<<1,se=r+655376+(U<<3)|0,A[se>>3]=+A[se>>3]/+(e[X>>2]|0),U=r+655376+((U|1)<<3)|0,A[U>>3]=+A[U>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function _l(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,ae=Ae,X=(a|0)/2|0,U=(c|0)/2|0,d=e[r>>2]|0,ie=U+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ie,X)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(X|0));)h=h+2|0,l=l+2|0;if(q=X+-1|0,(c|0)>1)for(t=0,h=d,l=d+(q<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(U|0));)h=h+(X<<1)|0,l=l+(X<<1)|0;l=r+1179664|0,ne=0-X|0,R=1-X|0,F=~X,_=a+4|0;e:do if((ie|0)>1){J=(q|0)>1,W=1,h=s+((a<<1)+2)|0,c=d+(X+1<<1)|0,t=0;t:for(;;){if(J)for(y=1,g=c,f=t;;){do if((B[h>>0]|0|0)>(o|0))E[g>>1]=0,t=f;else{if(t=E[g+(ne<<1)>>1]|0,t<<16>>16>0){E[g>>1]=t,t=(t<<16>>16)*7|0,d=r+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=f;break}if(s=E[g+(R<<1)>>1]|0,a=s<<16>>16,t=E[g+(F<<1)>>1]|0,d=t<<16>>16,c=t<<16>>16>0,s<<16>>16<=0){if(c){E[g>>1]=t,t=d*7|0,c=r+1310736+(t+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=r+1310736+(t+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+y,c=r+1310736+(t+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+W,c=r+1310736+(t+-3<<2)|0,(e[c>>2]|0)<(y|0)&&(e[c>>2]=y),e[r+1310736+(t+-1<<2)>>2]=W,t=f;break}if(t=E[g+-2>>1]|0,t<<16>>16>0){if(E[g>>1]=t,t=(t<<16>>16)*7|0,d=r+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(y|0)){t=f;break}e[t>>2]=y,t=f;break}else{if(t=f+1|0,(f|0)>32767)break t;E[g>>1]=t,e[r+1179664+(f<<2)>>2]=t<<16>>16,f=f*7|0,e[r+1310736+(f<<2)>>2]=1,e[r+1310736+(f+1<<2)>>2]=y,e[r+1310736+(f+2<<2)>>2]=W,e[r+1310736+(f+3<<2)>>2]=y,e[r+1310736+(f+4<<2)>>2]=y,e[r+1310736+(f+5<<2)>>2]=W,e[r+1310736+(f+6<<2)>>2]=W;break}}if(c){if(t=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+(d+-1<<2)>>2]|0,(t|0)>(a|0))if(E[g>>1]=a,(f|0)>0)for(c=0,s=l;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=a),c=c+1|0,(c|0)>=(f|0)){t=a;break}else s=s+4|0;else t=a;else if(E[g>>1]=t,(t|0)<(a|0)&(f|0)>0)for(c=0,s=l;(e[s>>2]|0)==(a|0)&&(e[s>>2]=t),c=c+1|0,!((c|0)>=(f|0));)s=s+4|0;t=(t<<16>>16)*7|0,d=r+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=f;break}if(c=E[g+-2>>1]|0,c<<16>>16<=0){E[g>>1]=s,t=a*7|0,c=r+1310736+(t+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=r+1310736+(t+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+y,c=r+1310736+(t+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+W,c=r+1310736+(t+-4<<2)|0,(e[c>>2]|0)>(y|0)&&(e[c>>2]=y),e[r+1310736+(t+-1<<2)>>2]=W,t=f;break}if(t=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+((c<<16>>16)+-1<<2)>>2]|0,(t|0)>(a|0))if(E[g>>1]=a,(f|0)>0)for(c=0,s=l;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=a),c=c+1|0,(c|0)>=(f|0)){t=a;break}else s=s+4|0;else t=a;else if(E[g>>1]=t,(t|0)<(a|0)&(f|0)>0)for(c=0,s=l;(e[s>>2]|0)==(a|0)&&(e[s>>2]=t),c=c+1|0,!((c|0)>=(f|0));)s=s+4|0;t=(t<<16>>16)*7|0,d=r+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+W,t=f}while(!1);if(y=y+1|0,h=h+2|0,c=g+2|0,(y|0)>=(q|0))break;g=c,f=t}if(W=W+1|0,(W|0)>=(ie|0)){d=t,se=52;break e}else h=h+_|0,c=c+4|0}ft(3,3904,ae),t=-1}else d=0,se=52;while(!1);if((se|0)==52){if(s=r+12|0,(d|0)<1)h=1;else for(c=1,h=1;t=e[l>>2]|0,(t|0)==(c|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(c|0)<(d|0);)c=c+1|0,l=l+4|0;if(a=r+8|0,t=h+-1|0,e[a>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do se=t<<2,e[r+131084+(se<<2)>>2]=X,e[r+131084+((se|1)<<2)>>2]=0,e[r+131084+((se|2)<<2)>>2]=U,e[r+131084+((se|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[a>>2]|0))}if((d|0)>0){s=0;do l=(e[r+1179664+(s<<2)>>2]|0)+-1|0,c=s*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(c<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(c+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(c+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(c+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(c+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(c+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(c+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),s=s+1|0;while((s|0)<(d|0))}if((e[a>>2]|0)>0){t=0;do X=r+12+(t<<2)|0,U=t<<1,se=r+655376+(U<<3)|0,A[se>>3]=+A[se>>3]/+(e[X>>2]|0),U=r+655376+((U|1)<<3)|0,A[U>>3]=+A[U>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function Tc(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,ae=Ae,X=(a|0)/2|0,U=(c|0)/2|0,d=e[r>>2]|0,ie=U+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ie,X)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(X|0));)h=h+2|0,l=l+2|0;if(q=X+-1|0,(c|0)>1)for(t=0,h=d,l=d+(q<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(U|0));)h=h+(X<<1)|0,l=l+(X<<1)|0;l=r+1179664|0,ne=0-X|0,R=1-X|0,F=~X,_=(a<<1)+8|0;e:do if((ie|0)>1){J=(q|0)>1,W=1,h=s+((a<<2)+4)|0,c=d+(X+1<<1)|0,t=0;t:for(;;){if(J)for(y=1,g=c,f=t;;){do if((B[h+1>>0]|0|0)>(o|0))E[g>>1]=0,t=f;else{if(t=E[g+(ne<<1)>>1]|0,t<<16>>16>0){E[g>>1]=t,t=(t<<16>>16)*7|0,d=r+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=f;break}if(s=E[g+(R<<1)>>1]|0,a=s<<16>>16,t=E[g+(F<<1)>>1]|0,d=t<<16>>16,c=t<<16>>16>0,s<<16>>16<=0){if(c){E[g>>1]=t,t=d*7|0,c=r+1310736+(t+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=r+1310736+(t+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+y,c=r+1310736+(t+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+W,c=r+1310736+(t+-3<<2)|0,(e[c>>2]|0)<(y|0)&&(e[c>>2]=y),e[r+1310736+(t+-1<<2)>>2]=W,t=f;break}if(t=E[g+-2>>1]|0,t<<16>>16>0){if(E[g>>1]=t,t=(t<<16>>16)*7|0,d=r+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(y|0)){t=f;break}e[t>>2]=y,t=f;break}else{if(t=f+1|0,(f|0)>32767)break t;E[g>>1]=t,e[r+1179664+(f<<2)>>2]=t<<16>>16,f=f*7|0,e[r+1310736+(f<<2)>>2]=1,e[r+1310736+(f+1<<2)>>2]=y,e[r+1310736+(f+2<<2)>>2]=W,e[r+1310736+(f+3<<2)>>2]=y,e[r+1310736+(f+4<<2)>>2]=y,e[r+1310736+(f+5<<2)>>2]=W,e[r+1310736+(f+6<<2)>>2]=W;break}}if(c){if(t=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+(d+-1<<2)>>2]|0,(t|0)>(a|0))if(E[g>>1]=a,(f|0)>0)for(c=0,s=l;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=a),c=c+1|0,(c|0)>=(f|0)){t=a;break}else s=s+4|0;else t=a;else if(E[g>>1]=t,(t|0)<(a|0)&(f|0)>0)for(c=0,s=l;(e[s>>2]|0)==(a|0)&&(e[s>>2]=t),c=c+1|0,!((c|0)>=(f|0));)s=s+4|0;t=(t<<16>>16)*7|0,d=r+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=f;break}if(c=E[g+-2>>1]|0,c<<16>>16<=0){E[g>>1]=s,t=a*7|0,c=r+1310736+(t+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=r+1310736+(t+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+y,c=r+1310736+(t+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+W,c=r+1310736+(t+-4<<2)|0,(e[c>>2]|0)>(y|0)&&(e[c>>2]=y),e[r+1310736+(t+-1<<2)>>2]=W,t=f;break}if(t=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+((c<<16>>16)+-1<<2)>>2]|0,(t|0)>(a|0))if(E[g>>1]=a,(f|0)>0)for(c=0,s=l;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=a),c=c+1|0,(c|0)>=(f|0)){t=a;break}else s=s+4|0;else t=a;else if(E[g>>1]=t,(t|0)<(a|0)&(f|0)>0)for(c=0,s=l;(e[s>>2]|0)==(a|0)&&(e[s>>2]=t),c=c+1|0,!((c|0)>=(f|0));)s=s+4|0;t=(t<<16>>16)*7|0,d=r+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+W,t=f}while(!1);if(y=y+1|0,h=h+4|0,c=g+2|0,(y|0)>=(q|0))break;g=c,f=t}if(W=W+1|0,(W|0)>=(ie|0)){d=t,se=52;break e}else h=h+_|0,c=c+4|0}ft(3,3904,ae),t=-1}else d=0,se=52;while(!1);if((se|0)==52){if(s=r+12|0,(d|0)<1)h=1;else for(c=1,h=1;t=e[l>>2]|0,(t|0)==(c|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(c|0)<(d|0);)c=c+1|0,l=l+4|0;if(a=r+8|0,t=h+-1|0,e[a>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do se=t<<2,e[r+131084+(se<<2)>>2]=X,e[r+131084+((se|1)<<2)>>2]=0,e[r+131084+((se|2)<<2)>>2]=U,e[r+131084+((se|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[a>>2]|0))}if((d|0)>0){s=0;do l=(e[r+1179664+(s<<2)>>2]|0)+-1|0,c=s*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(c<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(c+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(c+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(c+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(c+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(c+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(c+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),s=s+1|0;while((s|0)<(d|0))}if((e[a>>2]|0)>0){t=0;do X=r+12+(t<<2)|0,U=t<<1,se=r+655376+(U<<3)|0,A[se>>3]=+A[se>>3]/+(e[X>>2]|0),U=r+655376+((U|1)<<3)|0,A[U>>3]=+A[U>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function Ic(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,ae=Ae,X=(a|0)/2|0,U=(c|0)/2|0,d=e[r>>2]|0,ie=U+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ie,X)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(X|0));)h=h+2|0,l=l+2|0;if(q=X+-1|0,(c|0)>1)for(t=0,h=d,l=d+(q<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(U|0));)h=h+(X<<1)|0,l=l+(X<<1)|0;l=r+1179664|0,ne=0-X|0,R=1-X|0,F=~X,_=(a<<1)+8|0;e:do if((ie|0)>1){J=(q|0)>1,W=1,h=s+((a<<2)+4)|0,c=d+(X+1<<1)|0,t=0;t:for(;;){if(J)for(y=1,g=c,f=t;;){do if((B[h>>0]|0|0)>(o|0))E[g>>1]=0,t=f;else{if(t=E[g+(ne<<1)>>1]|0,t<<16>>16>0){E[g>>1]=t,t=(t<<16>>16)*7|0,d=r+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=f;break}if(s=E[g+(R<<1)>>1]|0,a=s<<16>>16,t=E[g+(F<<1)>>1]|0,d=t<<16>>16,c=t<<16>>16>0,s<<16>>16<=0){if(c){E[g>>1]=t,t=d*7|0,c=r+1310736+(t+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=r+1310736+(t+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+y,c=r+1310736+(t+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+W,c=r+1310736+(t+-3<<2)|0,(e[c>>2]|0)<(y|0)&&(e[c>>2]=y),e[r+1310736+(t+-1<<2)>>2]=W,t=f;break}if(t=E[g+-2>>1]|0,t<<16>>16>0){if(E[g>>1]=t,t=(t<<16>>16)*7|0,d=r+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(y|0)){t=f;break}e[t>>2]=y,t=f;break}else{if(t=f+1|0,(f|0)>32767)break t;E[g>>1]=t,e[r+1179664+(f<<2)>>2]=t<<16>>16,f=f*7|0,e[r+1310736+(f<<2)>>2]=1,e[r+1310736+(f+1<<2)>>2]=y,e[r+1310736+(f+2<<2)>>2]=W,e[r+1310736+(f+3<<2)>>2]=y,e[r+1310736+(f+4<<2)>>2]=y,e[r+1310736+(f+5<<2)>>2]=W,e[r+1310736+(f+6<<2)>>2]=W;break}}if(c){if(t=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+(d+-1<<2)>>2]|0,(t|0)>(a|0))if(E[g>>1]=a,(f|0)>0)for(c=0,s=l;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=a),c=c+1|0,(c|0)>=(f|0)){t=a;break}else s=s+4|0;else t=a;else if(E[g>>1]=t,(t|0)<(a|0)&(f|0)>0)for(c=0,s=l;(e[s>>2]|0)==(a|0)&&(e[s>>2]=t),c=c+1|0,!((c|0)>=(f|0));)s=s+4|0;t=(t<<16>>16)*7|0,d=r+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=f;break}if(c=E[g+-2>>1]|0,c<<16>>16<=0){E[g>>1]=s,t=a*7|0,c=r+1310736+(t+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=r+1310736+(t+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+y,c=r+1310736+(t+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+W,c=r+1310736+(t+-4<<2)|0,(e[c>>2]|0)>(y|0)&&(e[c>>2]=y),e[r+1310736+(t+-1<<2)>>2]=W,t=f;break}if(t=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+((c<<16>>16)+-1<<2)>>2]|0,(t|0)>(a|0))if(E[g>>1]=a,(f|0)>0)for(c=0,s=l;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=a),c=c+1|0,(c|0)>=(f|0)){t=a;break}else s=s+4|0;else t=a;else if(E[g>>1]=t,(t|0)<(a|0)&(f|0)>0)for(c=0,s=l;(e[s>>2]|0)==(a|0)&&(e[s>>2]=t),c=c+1|0,!((c|0)>=(f|0));)s=s+4|0;t=(t<<16>>16)*7|0,d=r+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+W,t=f}while(!1);if(y=y+1|0,h=h+4|0,c=g+2|0,(y|0)>=(q|0))break;g=c,f=t}if(W=W+1|0,(W|0)>=(ie|0)){d=t,se=52;break e}else h=h+_|0,c=c+4|0}ft(3,3904,ae),t=-1}else d=0,se=52;while(!1);if((se|0)==52){if(s=r+12|0,(d|0)<1)h=1;else for(c=1,h=1;t=e[l>>2]|0,(t|0)==(c|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(c|0)<(d|0);)c=c+1|0,l=l+4|0;if(a=r+8|0,t=h+-1|0,e[a>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do se=t<<2,e[r+131084+(se<<2)>>2]=X,e[r+131084+((se|1)<<2)>>2]=0,e[r+131084+((se|2)<<2)>>2]=U,e[r+131084+((se|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[a>>2]|0))}if((d|0)>0){s=0;do l=(e[r+1179664+(s<<2)>>2]|0)+-1|0,c=s*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(c<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(c+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(c+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(c+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(c+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(c+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(c+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),s=s+1|0;while((s|0)<(d|0))}if((e[a>>2]|0)>0){t=0;do X=r+12+(t<<2)|0,U=t<<1,se=r+655376+(U<<3)|0,A[se>>3]=+A[se>>3]/+(e[X>>2]|0),U=r+655376+((U|1)<<3)|0,A[U>>3]=+A[U>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function Rc(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0;if(U=C,C=C+16|0,se=U,d=e[r>>2]|0,ae=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(ae,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ie=o*3|0,q=a+-1|0,(c|0)>0)for(t=0,o=d,h=d+(q<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(c|0));)o=o+(a<<1)|0,h=h+(a<<1)|0;h=r+1179664|0,t=a+1|0,ne=0-a|0,R=1-a|0,F=~a;e:do if((ae|0)>1){J=(q|0)>1,W=1,o=s+(t*3|0)|0,l=d+(t<<1)|0,t=0;t:for(;;){if(J)for(_=1,y=l,g=t;;){do if(((B[o+1>>0]|0)+(B[o>>0]|0)+(B[o+2>>0]|0)|0)>(ie|0))E[y>>1]=0,t=g;else{if(t=E[y+(ne<<1)>>1]|0,t<<16>>16>0){E[y>>1]=t,t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(s=E[y+(R<<1)>>1]|0,d=s<<16>>16,t=E[y+(F<<1)>>1]|0,f=t<<16>>16,l=t<<16>>16>0,s<<16>>16<=0){if(l){E[y>>1]=t,t=f*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+_,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(_|0)&&(e[l>>2]=_),e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(t=E[y+-2>>1]|0,t<<16>>16>0){if(E[y>>1]=t,t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(_|0)){t=g;break}e[t>>2]=_,t=g;break}else{if(t=g+1|0,(g|0)>32767)break t;E[y>>1]=t,e[r+1179664+(g<<2)>>2]=t<<16>>16,g=g*7|0,e[r+1310736+(g<<2)>>2]=1,e[r+1310736+(g+1<<2)>>2]=_,e[r+1310736+(g+2<<2)>>2]=W,e[r+1310736+(g+3<<2)>>2]=_,e[r+1310736+(g+4<<2)>>2]=_,e[r+1310736+(g+5<<2)>>2]=W,e[r+1310736+(g+6<<2)>>2]=W;break}}if(l){if(t=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+(f+-1<<2)>>2]|0,(t|0)>(d|0))if(E[y>>1]=d,(g|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=d),l=l+1|0,(l|0)>=(g|0)){t=d;break}else s=s+4|0;else t=d;else if(E[y>>1]=t,(t|0)<(d|0)&(g|0)>0)for(l=0,s=h;(e[s>>2]|0)==(d|0)&&(e[s>>2]=t),l=l+1|0,!((l|0)>=(g|0));)s=s+4|0;t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(l=E[y+-2>>1]|0,l<<16>>16<=0){E[y>>1]=s,t=d*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+_,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(_|0)&&(e[l>>2]=_),e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(t=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(d|0))if(E[y>>1]=d,(g|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=d),l=l+1|0,(l|0)>=(g|0)){t=d;break}else s=s+4|0;else t=d;else if(E[y>>1]=t,(t|0)<(d|0)&(g|0)>0)for(l=0,s=h;(e[s>>2]|0)==(d|0)&&(e[s>>2]=t),l=l+1|0,!((l|0)>=(g|0));)s=s+4|0;t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+W,t=g}while(!1);if(_=_+1|0,o=o+3|0,l=y+2|0,(_|0)>=(q|0))break;y=l,g=t}if(W=W+1|0,(W|0)>=(ae|0)){f=t,X=52;break e}else o=o+6|0,l=l+4|0}ft(3,3904,se),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(s=r+12|0,(f|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(f|0);)l=l+1|0,h=h+4|0;if(d=r+8|0,t=o+-1|0,e[d>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=a,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=c,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){s=0;do h=(e[r+1179664+(s<<2)>>2]|0)+-1|0,l=s*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),s=s+1|0;while((s|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,X=r+655376+(c<<3)|0,A[X>>3]=+A[X>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return C=U,t|0}function Bc(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0;if(U=C,C=C+16|0,se=U,d=e[r>>2]|0,ae=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(ae,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ie=o*3|0,q=a+-1|0,(c|0)>0)for(t=0,o=d,h=d+(q<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(c|0));)o=o+(a<<1)|0,h=h+(a<<1)|0;h=r+1179664|0,t=a+1|0,ne=0-a|0,R=1-a|0,F=~a;e:do if((ae|0)>1){J=(q|0)>1,W=1,o=s+(t<<1)|0,l=d+(t<<1)|0,t=0;t:for(;;){if(J)for(_=1,y=l,g=t;;){d=B[o>>0]|0,f=B[o+1>>0]|0;do if(((d&248)+10+(d<<5&224)+(f>>>3&28)+(f<<3&248)|0)>(ie|0))E[y>>1]=0,t=g;else{if(t=E[y+(ne<<1)>>1]|0,t<<16>>16>0){E[y>>1]=t,t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(s=E[y+(R<<1)>>1]|0,d=s<<16>>16,t=E[y+(F<<1)>>1]|0,f=t<<16>>16,l=t<<16>>16>0,s<<16>>16<=0){if(l){E[y>>1]=t,t=f*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+_,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(_|0)&&(e[l>>2]=_),e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(t=E[y+-2>>1]|0,t<<16>>16>0){if(E[y>>1]=t,t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(_|0)){t=g;break}e[t>>2]=_,t=g;break}else{if(t=g+1|0,(g|0)>32767)break t;E[y>>1]=t,e[r+1179664+(g<<2)>>2]=t<<16>>16,g=g*7|0,e[r+1310736+(g<<2)>>2]=1,e[r+1310736+(g+1<<2)>>2]=_,e[r+1310736+(g+2<<2)>>2]=W,e[r+1310736+(g+3<<2)>>2]=_,e[r+1310736+(g+4<<2)>>2]=_,e[r+1310736+(g+5<<2)>>2]=W,e[r+1310736+(g+6<<2)>>2]=W;break}}if(l){if(t=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+(f+-1<<2)>>2]|0,(t|0)>(d|0))if(E[y>>1]=d,(g|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=d),l=l+1|0,(l|0)>=(g|0)){t=d;break}else s=s+4|0;else t=d;else if(E[y>>1]=t,(t|0)<(d|0)&(g|0)>0)for(l=0,s=h;(e[s>>2]|0)==(d|0)&&(e[s>>2]=t),l=l+1|0,!((l|0)>=(g|0));)s=s+4|0;t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(l=E[y+-2>>1]|0,l<<16>>16<=0){E[y>>1]=s,t=d*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+_,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(_|0)&&(e[l>>2]=_),e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(t=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(d|0))if(E[y>>1]=d,(g|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=d),l=l+1|0,(l|0)>=(g|0)){t=d;break}else s=s+4|0;else t=d;else if(E[y>>1]=t,(t|0)<(d|0)&(g|0)>0)for(l=0,s=h;(e[s>>2]|0)==(d|0)&&(e[s>>2]=t),l=l+1|0,!((l|0)>=(g|0));)s=s+4|0;t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+W,t=g}while(!1);if(_=_+1|0,o=o+2|0,l=y+2|0,(_|0)>=(q|0))break;y=l,g=t}if(W=W+1|0,(W|0)>=(ae|0)){f=t,X=52;break e}else o=o+4|0,l=l+4|0}ft(3,3904,se),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(s=r+12|0,(f|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(f|0);)l=l+1|0,h=h+4|0;if(d=r+8|0,t=o+-1|0,e[d>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=a,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=c,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){s=0;do h=(e[r+1179664+(s<<2)>>2]|0)+-1|0,l=s*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),s=s+1|0;while((s|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,X=r+655376+(c<<3)|0,A[X>>3]=+A[X>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return C=U,t|0}function Na(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0;if(U=C,C=C+16|0,se=U,d=e[r>>2]|0,ae=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(ae,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ie=o*3|0,q=a+-1|0,(c|0)>0)for(t=0,o=d,h=d+(q<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(c|0));)o=o+(a<<1)|0,h=h+(a<<1)|0;h=r+1179664|0,t=a+1|0,ne=0-a|0,R=1-a|0,F=~a;e:do if((ae|0)>1){J=(q|0)>1,W=1,o=s+(t<<2)|0,l=d+(t<<1)|0,t=0;t:for(;;){if(J)for(_=1,y=l,g=t;;){do if(((B[o+1>>0]|0)+(B[o>>0]|0)+(B[o+2>>0]|0)|0)>(ie|0))E[y>>1]=0,t=g;else{if(t=E[y+(ne<<1)>>1]|0,t<<16>>16>0){E[y>>1]=t,t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(s=E[y+(R<<1)>>1]|0,d=s<<16>>16,t=E[y+(F<<1)>>1]|0,f=t<<16>>16,l=t<<16>>16>0,s<<16>>16<=0){if(l){E[y>>1]=t,t=f*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+_,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(_|0)&&(e[l>>2]=_),e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(t=E[y+-2>>1]|0,t<<16>>16>0){if(E[y>>1]=t,t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(_|0)){t=g;break}e[t>>2]=_,t=g;break}else{if(t=g+1|0,(g|0)>32767)break t;E[y>>1]=t,e[r+1179664+(g<<2)>>2]=t<<16>>16,g=g*7|0,e[r+1310736+(g<<2)>>2]=1,e[r+1310736+(g+1<<2)>>2]=_,e[r+1310736+(g+2<<2)>>2]=W,e[r+1310736+(g+3<<2)>>2]=_,e[r+1310736+(g+4<<2)>>2]=_,e[r+1310736+(g+5<<2)>>2]=W,e[r+1310736+(g+6<<2)>>2]=W;break}}if(l){if(t=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+(f+-1<<2)>>2]|0,(t|0)>(d|0))if(E[y>>1]=d,(g|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=d),l=l+1|0,(l|0)>=(g|0)){t=d;break}else s=s+4|0;else t=d;else if(E[y>>1]=t,(t|0)<(d|0)&(g|0)>0)for(l=0,s=h;(e[s>>2]|0)==(d|0)&&(e[s>>2]=t),l=l+1|0,!((l|0)>=(g|0));)s=s+4|0;t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(l=E[y+-2>>1]|0,l<<16>>16<=0){E[y>>1]=s,t=d*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+_,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(_|0)&&(e[l>>2]=_),e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(t=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(d|0))if(E[y>>1]=d,(g|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=d),l=l+1|0,(l|0)>=(g|0)){t=d;break}else s=s+4|0;else t=d;else if(E[y>>1]=t,(t|0)<(d|0)&(g|0)>0)for(l=0,s=h;(e[s>>2]|0)==(d|0)&&(e[s>>2]=t),l=l+1|0,!((l|0)>=(g|0));)s=s+4|0;t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+W,t=g}while(!1);if(_=_+1|0,o=o+4|0,l=y+2|0,(_|0)>=(q|0))break;y=l,g=t}if(W=W+1|0,(W|0)>=(ae|0)){f=t,X=52;break e}else o=o+8|0,l=l+4|0}ft(3,3904,se),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(s=r+12|0,(f|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(f|0);)l=l+1|0,h=h+4|0;if(d=r+8|0,t=o+-1|0,e[d>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=a,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=c,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){s=0;do h=(e[r+1179664+(s<<2)>>2]|0)+-1|0,l=s*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),s=s+1|0;while((s|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,X=r+655376+(c<<3)|0,A[X>>3]=+A[X>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return C=U,t|0}function Pu(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0;if(U=C,C=C+16|0,se=U,d=e[r>>2]|0,ae=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(ae,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ie=o*3|0,q=a+-1|0,(c|0)>0)for(t=0,o=d,h=d+(q<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(c|0));)o=o+(a<<1)|0,h=h+(a<<1)|0;h=r+1179664|0,t=a+1|0,ne=0-a|0,R=1-a|0,F=~a;e:do if((ae|0)>1){J=(q|0)>1,W=1,o=s+(t<<1)|0,l=d+(t<<1)|0,t=0;t:for(;;){if(J)for(_=1,y=l,g=t;;){f=B[o>>0]|0;do if(((f&240)+24+(f<<4&240)+((B[o+1>>0]|0)&240)|0)>(ie|0))E[y>>1]=0,t=g;else{if(t=E[y+(ne<<1)>>1]|0,t<<16>>16>0){E[y>>1]=t,t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(s=E[y+(R<<1)>>1]|0,d=s<<16>>16,t=E[y+(F<<1)>>1]|0,f=t<<16>>16,l=t<<16>>16>0,s<<16>>16<=0){if(l){E[y>>1]=t,t=f*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+_,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(_|0)&&(e[l>>2]=_),e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(t=E[y+-2>>1]|0,t<<16>>16>0){if(E[y>>1]=t,t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(_|0)){t=g;break}e[t>>2]=_,t=g;break}else{if(t=g+1|0,(g|0)>32767)break t;E[y>>1]=t,e[r+1179664+(g<<2)>>2]=t<<16>>16,g=g*7|0,e[r+1310736+(g<<2)>>2]=1,e[r+1310736+(g+1<<2)>>2]=_,e[r+1310736+(g+2<<2)>>2]=W,e[r+1310736+(g+3<<2)>>2]=_,e[r+1310736+(g+4<<2)>>2]=_,e[r+1310736+(g+5<<2)>>2]=W,e[r+1310736+(g+6<<2)>>2]=W;break}}if(l){if(t=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+(f+-1<<2)>>2]|0,(t|0)>(d|0))if(E[y>>1]=d,(g|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=d),l=l+1|0,(l|0)>=(g|0)){t=d;break}else s=s+4|0;else t=d;else if(E[y>>1]=t,(t|0)<(d|0)&(g|0)>0)for(l=0,s=h;(e[s>>2]|0)==(d|0)&&(e[s>>2]=t),l=l+1|0,!((l|0)>=(g|0));)s=s+4|0;t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(l=E[y+-2>>1]|0,l<<16>>16<=0){E[y>>1]=s,t=d*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+_,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(_|0)&&(e[l>>2]=_),e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(t=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(d|0))if(E[y>>1]=d,(g|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=d),l=l+1|0,(l|0)>=(g|0)){t=d;break}else s=s+4|0;else t=d;else if(E[y>>1]=t,(t|0)<(d|0)&(g|0)>0)for(l=0,s=h;(e[s>>2]|0)==(d|0)&&(e[s>>2]=t),l=l+1|0,!((l|0)>=(g|0));)s=s+4|0;t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+W,t=g}while(!1);if(_=_+1|0,o=o+2|0,l=y+2|0,(_|0)>=(q|0))break;y=l,g=t}if(W=W+1|0,(W|0)>=(ae|0)){f=t,X=52;break e}else o=o+4|0,l=l+4|0}ft(3,3904,se),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(s=r+12|0,(f|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(f|0);)l=l+1|0,h=h+4|0;if(d=r+8|0,t=o+-1|0,e[d>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=a,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=c,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){s=0;do h=(e[r+1179664+(s<<2)>>2]|0)+-1|0,l=s*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),s=s+1|0;while((s|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,X=r+655376+(c<<3)|0,A[X>>3]=+A[X>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return C=U,t|0}function Fu(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0;if(U=C,C=C+16|0,se=U,d=e[r>>2]|0,ae=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(ae,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ie=o*3|0,q=a+-1|0,(c|0)>0)for(t=0,o=d,h=d+(q<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(c|0));)o=o+(a<<1)|0,h=h+(a<<1)|0;h=r+1179664|0,t=a+1|0,ne=0-a|0,R=1-a|0,F=~a;e:do if((ae|0)>1){J=(q|0)>1,W=1,o=s+(t<<1)|0,l=d+(t<<1)|0,t=0;t:for(;;){if(J)for(_=1,y=l,g=t;;){d=B[o>>0]|0,f=B[o+1>>0]|0;do if(((d&248)+12+(d<<5&224)+(f>>>3&24)+(f<<2&248)|0)>(ie|0))E[y>>1]=0,t=g;else{if(t=E[y+(ne<<1)>>1]|0,t<<16>>16>0){E[y>>1]=t,t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(s=E[y+(R<<1)>>1]|0,d=s<<16>>16,t=E[y+(F<<1)>>1]|0,f=t<<16>>16,l=t<<16>>16>0,s<<16>>16<=0){if(l){E[y>>1]=t,t=f*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+_,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(_|0)&&(e[l>>2]=_),e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(t=E[y+-2>>1]|0,t<<16>>16>0){if(E[y>>1]=t,t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(_|0)){t=g;break}e[t>>2]=_,t=g;break}else{if(t=g+1|0,(g|0)>32767)break t;E[y>>1]=t,e[r+1179664+(g<<2)>>2]=t<<16>>16,g=g*7|0,e[r+1310736+(g<<2)>>2]=1,e[r+1310736+(g+1<<2)>>2]=_,e[r+1310736+(g+2<<2)>>2]=W,e[r+1310736+(g+3<<2)>>2]=_,e[r+1310736+(g+4<<2)>>2]=_,e[r+1310736+(g+5<<2)>>2]=W,e[r+1310736+(g+6<<2)>>2]=W;break}}if(l){if(t=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+(f+-1<<2)>>2]|0,(t|0)>(d|0))if(E[y>>1]=d,(g|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=d),l=l+1|0,(l|0)>=(g|0)){t=d;break}else s=s+4|0;else t=d;else if(E[y>>1]=t,(t|0)<(d|0)&(g|0)>0)for(l=0,s=h;(e[s>>2]|0)==(d|0)&&(e[s>>2]=t),l=l+1|0,!((l|0)>=(g|0));)s=s+4|0;t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(l=E[y+-2>>1]|0,l<<16>>16<=0){E[y>>1]=s,t=d*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+_,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(_|0)&&(e[l>>2]=_),e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(t=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(d|0))if(E[y>>1]=d,(g|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=d),l=l+1|0,(l|0)>=(g|0)){t=d;break}else s=s+4|0;else t=d;else if(E[y>>1]=t,(t|0)<(d|0)&(g|0)>0)for(l=0,s=h;(e[s>>2]|0)==(d|0)&&(e[s>>2]=t),l=l+1|0,!((l|0)>=(g|0));)s=s+4|0;t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+W,t=g}while(!1);if(_=_+1|0,o=o+2|0,l=y+2|0,(_|0)>=(q|0))break;y=l,g=t}if(W=W+1|0,(W|0)>=(ae|0)){f=t,X=52;break e}else o=o+4|0,l=l+4|0}ft(3,3904,se),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(s=r+12|0,(f|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(f|0);)l=l+1|0,h=h+4|0;if(d=r+8|0,t=o+-1|0,e[d>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=a,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=c,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){s=0;do h=(e[r+1179664+(s<<2)>>2]|0)+-1|0,l=s*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),s=s+1|0;while((s|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,X=r+655376+(c<<3)|0,A[X>>3]=+A[X>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return C=U,t|0}function Ou(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0;if(U=C,C=C+16|0,se=U,d=e[r>>2]|0,ae=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(ae,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ie=o*3|0,q=a+-1|0,(c|0)>0)for(t=0,o=d,h=d+(q<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(c|0));)o=o+(a<<1)|0,h=h+(a<<1)|0;h=r+1179664|0,t=a+1|0,ne=0-a|0,R=1-a|0,F=~a;e:do if((ae|0)>1){J=(q|0)>1,W=1,o=s+(t<<2)|0,l=d+(t<<1)|0,t=0;t:for(;;){if(J)for(_=1,y=l,g=t;;){do if(((B[o+2>>0]|0)+(B[o+1>>0]|0)+(B[o+3>>0]|0)|0)>(ie|0))E[y>>1]=0,t=g;else{if(t=E[y+(ne<<1)>>1]|0,t<<16>>16>0){E[y>>1]=t,t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(s=E[y+(R<<1)>>1]|0,d=s<<16>>16,t=E[y+(F<<1)>>1]|0,f=t<<16>>16,l=t<<16>>16>0,s<<16>>16<=0){if(l){E[y>>1]=t,t=f*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+_,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(_|0)&&(e[l>>2]=_),e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(t=E[y+-2>>1]|0,t<<16>>16>0){if(E[y>>1]=t,t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(_|0)){t=g;break}e[t>>2]=_,t=g;break}else{if(t=g+1|0,(g|0)>32767)break t;E[y>>1]=t,e[r+1179664+(g<<2)>>2]=t<<16>>16,g=g*7|0,e[r+1310736+(g<<2)>>2]=1,e[r+1310736+(g+1<<2)>>2]=_,e[r+1310736+(g+2<<2)>>2]=W,e[r+1310736+(g+3<<2)>>2]=_,e[r+1310736+(g+4<<2)>>2]=_,e[r+1310736+(g+5<<2)>>2]=W,e[r+1310736+(g+6<<2)>>2]=W;break}}if(l){if(t=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+(f+-1<<2)>>2]|0,(t|0)>(d|0))if(E[y>>1]=d,(g|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=d),l=l+1|0,(l|0)>=(g|0)){t=d;break}else s=s+4|0;else t=d;else if(E[y>>1]=t,(t|0)<(d|0)&(g|0)>0)for(l=0,s=h;(e[s>>2]|0)==(d|0)&&(e[s>>2]=t),l=l+1|0,!((l|0)>=(g|0));)s=s+4|0;t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(l=E[y+-2>>1]|0,l<<16>>16<=0){E[y>>1]=s,t=d*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+_,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(_|0)&&(e[l>>2]=_),e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(t=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(d|0))if(E[y>>1]=d,(g|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=d),l=l+1|0,(l|0)>=(g|0)){t=d;break}else s=s+4|0;else t=d;else if(E[y>>1]=t,(t|0)<(d|0)&(g|0)>0)for(l=0,s=h;(e[s>>2]|0)==(d|0)&&(e[s>>2]=t),l=l+1|0,!((l|0)>=(g|0));)s=s+4|0;t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+W,t=g}while(!1);if(_=_+1|0,o=o+4|0,l=y+2|0,(_|0)>=(q|0))break;y=l,g=t}if(W=W+1|0,(W|0)>=(ae|0)){f=t,X=52;break e}else o=o+8|0,l=l+4|0}ft(3,3904,se),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(s=r+12|0,(f|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(f|0);)l=l+1|0,h=h+4|0;if(d=r+8|0,t=o+-1|0,e[d>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=a,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=c,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){s=0;do h=(e[r+1179664+(s<<2)>>2]|0)+-1|0,l=s*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),s=s+1|0;while((s|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,X=r+655376+(c<<3)|0,A[X>>3]=+A[X>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return C=U,t|0}function ku(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0;if(U=C,C=C+16|0,se=U,d=e[r>>2]|0,ae=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(ae,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ie=a+-1|0,(c|0)>0)for(t=0,h=d,l=d+(ie<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(c|0));)h=h+(a<<1)|0,l=l+(a<<1)|0;l=r+1179664|0,t=a+1|0,J=0-a|0,F=1-a|0,ne=~a;e:do if((ae|0)>1){W=(ie|0)>1,q=1,h=s+t|0,s=d+(t<<1)|0,t=0;t:for(;;){if(W)for(R=1,_=s,y=t;;){do if((B[h>>0]|0|0)>(o|0))E[_>>1]=0,t=y;else{if(t=E[_+(J<<1)>>1]|0,t<<16>>16>0){E[_>>1]=t,t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(t+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(d=E[_+(F<<1)>>1]|0,f=d<<16>>16,t=E[_+(ne<<1)>>1]|0,g=t<<16>>16,s=t<<16>>16>0,d<<16>>16<=0){if(s){E[_>>1]=t,t=g*7|0,s=r+1310736+(t+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(t+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+R,s=r+1310736+(t+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+q,s=r+1310736+(t+-3<<2)|0,(e[s>>2]|0)<(R|0)&&(e[s>>2]=R),e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(t=E[_+-2>>1]|0,t<<16>>16>0){if(E[_>>1]=t,t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(t+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(R|0)){t=y;break}e[t>>2]=R,t=y;break}else{if(t=y+1|0,(y|0)>32767)break t;E[_>>1]=t,e[r+1179664+(y<<2)>>2]=t<<16>>16,y=y*7|0,e[r+1310736+(y<<2)>>2]=1,e[r+1310736+(y+1<<2)>>2]=R,e[r+1310736+(y+2<<2)>>2]=q,e[r+1310736+(y+3<<2)>>2]=R,e[r+1310736+(y+4<<2)>>2]=R,e[r+1310736+(y+5<<2)>>2]=q,e[r+1310736+(y+6<<2)>>2]=q;break}}if(s){if(t=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+(g+-1<<2)>>2]|0,(t|0)>(f|0))if(E[_>>1]=f,(y|0)>0)for(s=0,d=l;;)if((e[d>>2]|0)==(t|0)&&(e[d>>2]=f),s=s+1|0,(s|0)>=(y|0)){t=f;break}else d=d+4|0;else t=f;else if(E[_>>1]=t,(t|0)<(f|0)&(y|0)>0)for(s=0,d=l;(e[d>>2]|0)==(f|0)&&(e[d>>2]=t),s=s+1|0,!((s|0)>=(y|0));)d=d+4|0;t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(t+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(t=E[_+-2>>1]|0,t<<16>>16<=0){E[_>>1]=d,t=f*7|0,s=r+1310736+(t+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(t+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+R,s=r+1310736+(t+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+q,s=r+1310736+(t+-4<<2)|0,(e[s>>2]|0)>(R|0)&&(e[s>>2]=R),e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(f=e[r+1179664+(f+-1<<2)>>2]|0,t=e[r+1179664+((t<<16>>16)+-1<<2)>>2]|0,(f|0)>(t|0)){if(E[_>>1]=t,(y|0)>0)for(s=0,d=l;(e[d>>2]|0)==(f|0)&&(e[d>>2]=t),s=s+1|0,!((s|0)>=(y|0));)d=d+4|0}else if(E[_>>1]=f,(f|0)<(t|0)&(y|0)>0)for(s=0,d=l;;)if((e[d>>2]|0)==(t|0)&&(e[d>>2]=f),s=s+1|0,(s|0)>=(y|0)){t=f;break}else d=d+4|0;else t=f;t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+q,t=y}while(!1);if(R=R+1|0,h=h+1|0,s=_+2|0,(R|0)>=(ie|0))break;_=s,y=t}if(q=q+1|0,(q|0)>=(ae|0)){g=t,X=52;break e}else h=h+2|0,s=s+4|0}ft(3,3904,se),t=-1}else g=0,X=52;while(!1);if((X|0)==52){if(d=r+12|0,(g|0)<1)h=1;else for(s=1,h=1;t=e[l>>2]|0,(t|0)==(s|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(s|0)<(g|0);)s=s+1|0,l=l+4|0;if(f=r+8|0,t=h+-1|0,e[f>>2]=t,t){if(gt(d|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=a,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=c,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[f>>2]|0))}if((g|0)>0){d=0;do l=(e[r+1179664+(d<<2)>>2]|0)+-1|0,s=d*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(s<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(s+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(s+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(s+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(s+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(s+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(s+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),d=d+1|0;while((d|0)<(g|0))}if((e[f>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,X=r+655376+(c<<3)|0,A[X>>3]=+A[X>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[f>>2]|0));t=0}else t=0}else t=0}return C=U,t|0}function Nu(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0;if(U=C,C=C+16|0,se=U,d=e[r>>2]|0,ae=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(ae,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ie=a+-1|0,(c|0)>0)for(t=0,h=d,l=d+(ie<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(c|0));)h=h+(a<<1)|0,l=l+(a<<1)|0;l=r+1179664|0,t=a+1|0,J=0-a|0,F=1-a|0,ne=~a;e:do if((ae|0)>1){W=(ie|0)>1,q=1,h=s+(t<<1)|0,s=d+(t<<1)|0,t=0;t:for(;;){if(W)for(R=1,_=s,y=t;;){do if((B[h+1>>0]|0|0)>(o|0))E[_>>1]=0,t=y;else{if(t=E[_+(J<<1)>>1]|0,t<<16>>16>0){E[_>>1]=t,t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(t+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(d=E[_+(F<<1)>>1]|0,f=d<<16>>16,t=E[_+(ne<<1)>>1]|0,g=t<<16>>16,s=t<<16>>16>0,d<<16>>16<=0){if(s){E[_>>1]=t,t=g*7|0,s=r+1310736+(t+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(t+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+R,s=r+1310736+(t+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+q,s=r+1310736+(t+-3<<2)|0,(e[s>>2]|0)<(R|0)&&(e[s>>2]=R),e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(t=E[_+-2>>1]|0,t<<16>>16>0){if(E[_>>1]=t,t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(t+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(R|0)){t=y;break}e[t>>2]=R,t=y;break}else{if(t=y+1|0,(y|0)>32767)break t;E[_>>1]=t,e[r+1179664+(y<<2)>>2]=t<<16>>16,y=y*7|0,e[r+1310736+(y<<2)>>2]=1,e[r+1310736+(y+1<<2)>>2]=R,e[r+1310736+(y+2<<2)>>2]=q,e[r+1310736+(y+3<<2)>>2]=R,e[r+1310736+(y+4<<2)>>2]=R,e[r+1310736+(y+5<<2)>>2]=q,e[r+1310736+(y+6<<2)>>2]=q;break}}if(s){if(t=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+(g+-1<<2)>>2]|0,(t|0)>(f|0))if(E[_>>1]=f,(y|0)>0)for(s=0,d=l;;)if((e[d>>2]|0)==(t|0)&&(e[d>>2]=f),s=s+1|0,(s|0)>=(y|0)){t=f;break}else d=d+4|0;else t=f;else if(E[_>>1]=t,(t|0)<(f|0)&(y|0)>0)for(s=0,d=l;(e[d>>2]|0)==(f|0)&&(e[d>>2]=t),s=s+1|0,!((s|0)>=(y|0));)d=d+4|0;t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(t+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(s=E[_+-2>>1]|0,s<<16>>16<=0){E[_>>1]=d,t=f*7|0,s=r+1310736+(t+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(t+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+R,s=r+1310736+(t+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+q,s=r+1310736+(t+-4<<2)|0,(e[s>>2]|0)>(R|0)&&(e[s>>2]=R),e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(t=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+((s<<16>>16)+-1<<2)>>2]|0,(t|0)>(f|0))if(E[_>>1]=f,(y|0)>0)for(s=0,d=l;;)if((e[d>>2]|0)==(t|0)&&(e[d>>2]=f),s=s+1|0,(s|0)>=(y|0)){t=f;break}else d=d+4|0;else t=f;else if(E[_>>1]=t,(t|0)<(f|0)&(y|0)>0)for(s=0,d=l;(e[d>>2]|0)==(f|0)&&(e[d>>2]=t),s=s+1|0,!((s|0)>=(y|0));)d=d+4|0;t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+q,t=y}while(!1);if(R=R+1|0,h=h+2|0,s=_+2|0,(R|0)>=(ie|0))break;_=s,y=t}if(q=q+1|0,(q|0)>=(ae|0)){g=t,X=52;break e}else h=h+4|0,s=s+4|0}ft(3,3904,se),t=-1}else g=0,X=52;while(!1);if((X|0)==52){if(d=r+12|0,(g|0)<1)h=1;else for(s=1,h=1;t=e[l>>2]|0,(t|0)==(s|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(s|0)<(g|0);)s=s+1|0,l=l+4|0;if(f=r+8|0,t=h+-1|0,e[f>>2]=t,t){if(gt(d|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=a,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=c,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[f>>2]|0))}if((g|0)>0){d=0;do l=(e[r+1179664+(d<<2)>>2]|0)+-1|0,s=d*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(s<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(s+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(s+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(s+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(s+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(s+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(s+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),d=d+1|0;while((d|0)<(g|0))}if((e[f>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,X=r+655376+(c<<3)|0,A[X>>3]=+A[X>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[f>>2]|0));t=0}else t=0}else t=0}return C=U,t|0}function Uu(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0;if(U=C,C=C+16|0,se=U,d=e[r>>2]|0,ae=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(ae,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ie=a+-1|0,(c|0)>0)for(t=0,h=d,l=d+(ie<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(c|0));)h=h+(a<<1)|0,l=l+(a<<1)|0;l=r+1179664|0,t=a+1|0,J=0-a|0,F=1-a|0,ne=~a;e:do if((ae|0)>1){W=(ie|0)>1,q=1,h=s+(t<<1)|0,s=d+(t<<1)|0,t=0;t:for(;;){if(W)for(R=1,_=s,y=t;;){do if((B[h>>0]|0|0)>(o|0))E[_>>1]=0,t=y;else{if(t=E[_+(J<<1)>>1]|0,t<<16>>16>0){E[_>>1]=t,t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(t+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(d=E[_+(F<<1)>>1]|0,f=d<<16>>16,t=E[_+(ne<<1)>>1]|0,g=t<<16>>16,s=t<<16>>16>0,d<<16>>16<=0){if(s){E[_>>1]=t,t=g*7|0,s=r+1310736+(t+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(t+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+R,s=r+1310736+(t+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+q,s=r+1310736+(t+-3<<2)|0,(e[s>>2]|0)<(R|0)&&(e[s>>2]=R),e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(t=E[_+-2>>1]|0,t<<16>>16>0){if(E[_>>1]=t,t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(t+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(R|0)){t=y;break}e[t>>2]=R,t=y;break}else{if(t=y+1|0,(y|0)>32767)break t;E[_>>1]=t,e[r+1179664+(y<<2)>>2]=t<<16>>16,y=y*7|0,e[r+1310736+(y<<2)>>2]=1,e[r+1310736+(y+1<<2)>>2]=R,e[r+1310736+(y+2<<2)>>2]=q,e[r+1310736+(y+3<<2)>>2]=R,e[r+1310736+(y+4<<2)>>2]=R,e[r+1310736+(y+5<<2)>>2]=q,e[r+1310736+(y+6<<2)>>2]=q;break}}if(s){if(t=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+(g+-1<<2)>>2]|0,(t|0)>(f|0))if(E[_>>1]=f,(y|0)>0)for(s=0,d=l;;)if((e[d>>2]|0)==(t|0)&&(e[d>>2]=f),s=s+1|0,(s|0)>=(y|0)){t=f;break}else d=d+4|0;else t=f;else if(E[_>>1]=t,(t|0)<(f|0)&(y|0)>0)for(s=0,d=l;(e[d>>2]|0)==(f|0)&&(e[d>>2]=t),s=s+1|0,!((s|0)>=(y|0));)d=d+4|0;t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(t+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(t=E[_+-2>>1]|0,t<<16>>16<=0){E[_>>1]=d,t=f*7|0,s=r+1310736+(t+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(t+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+R,s=r+1310736+(t+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+q,s=r+1310736+(t+-4<<2)|0,(e[s>>2]|0)>(R|0)&&(e[s>>2]=R),e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(f=e[r+1179664+(f+-1<<2)>>2]|0,t=e[r+1179664+((t<<16>>16)+-1<<2)>>2]|0,(f|0)>(t|0)){if(E[_>>1]=t,(y|0)>0)for(s=0,d=l;(e[d>>2]|0)==(f|0)&&(e[d>>2]=t),s=s+1|0,!((s|0)>=(y|0));)d=d+4|0}else if(E[_>>1]=f,(f|0)<(t|0)&(y|0)>0)for(s=0,d=l;;)if((e[d>>2]|0)==(t|0)&&(e[d>>2]=f),s=s+1|0,(s|0)>=(y|0)){t=f;break}else d=d+4|0;else t=f;t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+q,t=y}while(!1);if(R=R+1|0,h=h+2|0,s=_+2|0,(R|0)>=(ie|0))break;_=s,y=t}if(q=q+1|0,(q|0)>=(ae|0)){g=t,X=52;break e}else h=h+4|0,s=s+4|0}ft(3,3904,se),t=-1}else g=0,X=52;while(!1);if((X|0)==52){if(d=r+12|0,(g|0)<1)h=1;else for(s=1,h=1;t=e[l>>2]|0,(t|0)==(s|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(s|0)<(g|0);)s=s+1|0,l=l+4|0;if(f=r+8|0,t=h+-1|0,e[f>>2]=t,t){if(gt(d|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=a,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=c,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[f>>2]|0))}if((g|0)>0){d=0;do l=(e[r+1179664+(d<<2)>>2]|0)+-1|0,s=d*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(s<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(s+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(s+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(s+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(s+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(s+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(s+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),d=d+1|0;while((d|0)<(g|0))}if((e[f>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,X=r+655376+(c<<3)|0,A[X>>3]=+A[X>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[f>>2]|0));t=0}else t=0}else t=0}return C=U,t|0}function Qu(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0;if(U=C,C=C+16|0,se=U,d=e[r>>2]|0,ae=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(ae,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ie=a+-1|0,(c|0)>0)for(t=0,h=d,l=d+(ie<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(c|0));)h=h+(a<<1)|0,l=l+(a<<1)|0;l=r+1179664|0,t=a+1|0,J=0-a|0,F=1-a|0,ne=~a;e:do if((ae|0)>1){W=(ie|0)>1,q=1,h=s+t|0,s=d+(t<<1)|0,d=o+t|0,t=0;t:for(;;){if(W)for(R=1,_=h,y=t;;){do if((B[_>>0]|0)>(B[d>>0]|0))E[s>>1]=0,t=y;else{if(t=E[s+(J<<1)>>1]|0,t<<16>>16>0){E[s>>1]=t,t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(t+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(o=E[s+(F<<1)>>1]|0,f=o<<16>>16,t=E[s+(ne<<1)>>1]|0,g=t<<16>>16,h=t<<16>>16>0,o<<16>>16<=0){if(h){E[s>>1]=t,t=g*7|0,h=r+1310736+(t+-7<<2)|0,e[h>>2]=(e[h>>2]|0)+1,h=r+1310736+(t+-6<<2)|0,e[h>>2]=(e[h>>2]|0)+R,h=r+1310736+(t+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+q,h=r+1310736+(t+-3<<2)|0,(e[h>>2]|0)<(R|0)&&(e[h>>2]=R),e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(t=E[s+-2>>1]|0,t<<16>>16>0){if(E[s>>1]=t,t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(t+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(R|0)){t=y;break}e[t>>2]=R,t=y;break}else{if(t=y+1|0,(y|0)>32767)break t;E[s>>1]=t,e[r+1179664+(y<<2)>>2]=t<<16>>16,y=y*7|0,e[r+1310736+(y<<2)>>2]=1,e[r+1310736+(y+1<<2)>>2]=R,e[r+1310736+(y+2<<2)>>2]=q,e[r+1310736+(y+3<<2)>>2]=R,e[r+1310736+(y+4<<2)>>2]=R,e[r+1310736+(y+5<<2)>>2]=q,e[r+1310736+(y+6<<2)>>2]=q;break}}if(h){if(t=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+(g+-1<<2)>>2]|0,(t|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(h=0,o=l;;)if((e[o>>2]|0)==(t|0)&&(e[o>>2]=f),h=h+1|0,(h|0)>=(y|0)){t=f;break}else o=o+4|0;else t=f;else if(E[s>>1]=t,(t|0)<(f|0)&(y|0)>0)for(h=0,o=l;(e[o>>2]|0)==(f|0)&&(e[o>>2]=t),h=h+1|0,!((h|0)>=(y|0));)o=o+4|0;t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(t+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(t=E[s+-2>>1]|0,t<<16>>16<=0){E[s>>1]=o,t=f*7|0,h=r+1310736+(t+-7<<2)|0,e[h>>2]=(e[h>>2]|0)+1,h=r+1310736+(t+-6<<2)|0,e[h>>2]=(e[h>>2]|0)+R,h=r+1310736+(t+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+q,h=r+1310736+(t+-4<<2)|0,(e[h>>2]|0)>(R|0)&&(e[h>>2]=R),e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(f=e[r+1179664+(f+-1<<2)>>2]|0,t=e[r+1179664+((t<<16>>16)+-1<<2)>>2]|0,(f|0)>(t|0)){if(E[s>>1]=t,(y|0)>0)for(h=0,o=l;(e[o>>2]|0)==(f|0)&&(e[o>>2]=t),h=h+1|0,!((h|0)>=(y|0));)o=o+4|0}else if(E[s>>1]=f,(f|0)<(t|0)&(y|0)>0)for(h=0,o=l;;)if((e[o>>2]|0)==(t|0)&&(e[o>>2]=f),h=h+1|0,(h|0)>=(y|0)){t=f;break}else o=o+4|0;else t=f;t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+q,t=y}while(!1);if(R=R+1|0,h=_+1|0,d=d+1|0,s=s+2|0,(R|0)>=(ie|0))break;_=h,y=t}if(q=q+1|0,(q|0)>=(ae|0)){f=t,X=52;break e}else h=h+2|0,s=s+4|0,d=d+2|0}ft(3,3904,se),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(d=r+12|0,(f|0)<1)h=1;else for(s=1,h=1;t=e[l>>2]|0,(t|0)==(s|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(s|0)<(f|0);)s=s+1|0,l=l+4|0;if(o=r+8|0,t=h+-1|0,e[o>>2]=t,t){if(gt(d|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=a,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=c,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[o>>2]|0))}if((f|0)>0){d=0;do l=(e[r+1179664+(d<<2)>>2]|0)+-1|0,s=d*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(s<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(s+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(s+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(s+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(s+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(s+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(s+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),d=d+1|0;while((d|0)<(f|0))}if((e[o>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,X=r+655376+(c<<3)|0,A[X>>3]=+A[X>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[o>>2]|0));t=0}else t=0}else t=0}return C=U,t|0}function Hu(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,ae=Ae,X=(a|0)/2|0,U=(c|0)/2|0,d=e[r>>2]|0,ie=U+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ie,X)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(X|0));)h=h+2|0,l=l+2|0;if(W=o*3|0,q=X+-1|0,(c|0)>1)for(t=0,o=d,h=d+(q<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(U|0));)o=o+(X<<1)|0,h=h+(X<<1)|0;h=r+1179664|0,F=0-X|0,_=1-X|0,R=~X,y=(a*3|0)+12|0;e:do if((ie|0)>1){ne=(q|0)>1,J=1,o=s+((a*6|0)+6)|0,l=d+(X+1<<1)|0,t=0;t:for(;;){if(ne)for(g=1,f=l,d=t;;){do if(((B[o+1>>0]|0)+(B[o>>0]|0)+(B[o+2>>0]|0)|0)>(W|0)){if(t=E[f+(F<<1)>>1]|0,t<<16>>16>0){E[f>>1]=t,t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(c=E[f+(_<<1)>>1]|0,s=c<<16>>16,t=E[f+(R<<1)>>1]|0,a=t<<16>>16,l=t<<16>>16>0,c<<16>>16<=0){if(l){E[f>>1]=t,t=a*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+g,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+J,l=r+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(g|0)&&(e[l>>2]=g),e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(t=E[f+-2>>1]|0,t<<16>>16>0){if(E[f>>1]=t,t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(g|0)){t=d;break}e[t>>2]=g,t=d;break}else{if(t=d+1|0,(d|0)>32767)break t;E[f>>1]=t,e[r+1179664+(d<<2)>>2]=t<<16>>16,d=d*7|0,e[r+1310736+(d<<2)>>2]=1,e[r+1310736+(d+1<<2)>>2]=g,e[r+1310736+(d+2<<2)>>2]=J,e[r+1310736+(d+3<<2)>>2]=g,e[r+1310736+(d+4<<2)>>2]=g,e[r+1310736+(d+5<<2)>>2]=J,e[r+1310736+(d+6<<2)>>2]=J;break}}if(l){if(t=e[r+1179664+(s+-1<<2)>>2]|0,s=e[r+1179664+(a+-1<<2)>>2]|0,(t|0)>(s|0))if(E[f>>1]=s,(d|0)>0)for(l=0,c=h;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=s),l=l+1|0,(l|0)>=(d|0)){t=s;break}else c=c+4|0;else t=s;else if(E[f>>1]=t,(t|0)<(s|0)&(d|0)>0)for(l=0,c=h;(e[c>>2]|0)==(s|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(l=E[f+-2>>1]|0,l<<16>>16<=0){E[f>>1]=c,t=s*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+g,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+J,l=r+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(g|0)&&(e[l>>2]=g),e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(t=e[r+1179664+(s+-1<<2)>>2]|0,s=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(s|0))if(E[f>>1]=s,(d|0)>0)for(l=0,c=h;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=s),l=l+1|0,(l|0)>=(d|0)){t=s;break}else c=c+4|0;else t=s;else if(E[f>>1]=t,(t|0)<(s|0)&(d|0)>0)for(l=0,c=h;(e[c>>2]|0)==(s|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+J,t=d}else E[f>>1]=0,t=d;while(!1);if(g=g+1|0,o=o+6|0,l=f+2|0,(g|0)>=(q|0))break;f=l,d=t}if(J=J+1|0,(J|0)>=(ie|0)){a=t,se=52;break e}else o=o+y|0,l=l+4|0}ft(3,3904,ae),t=-1}else a=0,se=52;while(!1);if((se|0)==52){if(c=r+12|0,(a|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(a|0);)l=l+1|0,h=h+4|0;if(s=r+8|0,t=o+-1|0,e[s>>2]=t,t){if(gt(c|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do se=t<<2,e[r+131084+(se<<2)>>2]=X,e[r+131084+((se|1)<<2)>>2]=0,e[r+131084+((se|2)<<2)>>2]=U,e[r+131084+((se|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((a|0)>0){c=0;do h=(e[r+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[s>>2]|0)>0){t=0;do X=r+12+(t<<2)|0,U=t<<1,se=r+655376+(U<<3)|0,A[se>>3]=+A[se>>3]/+(e[X>>2]|0),U=r+655376+((U|1)<<3)|0,A[U>>3]=+A[U>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function zu(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,ae=Ae,X=(a|0)/2|0,U=(c|0)/2|0,d=e[r>>2]|0,ie=U+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ie,X)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(X|0));)h=h+2|0,l=l+2|0;if(W=o*3|0,q=X+-1|0,(c|0)>1)for(t=0,o=d,h=d+(q<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(U|0));)o=o+(X<<1)|0,h=h+(X<<1)|0;h=r+1179664|0,F=0-X|0,_=1-X|0,R=~X,y=(a<<1)+8|0;e:do if((ie|0)>1){ne=(q|0)>1,J=1,o=s+((a<<2)+4)|0,l=d+(X+1<<1)|0,t=0;t:for(;;){if(ne)for(g=1,f=l,d=t;;){s=B[o>>0]|0,a=B[o+1>>0]|0;do if(((s&248)+10+(s<<5&224)+(a>>>3&28)+(a<<3&248)|0)>(W|0)){if(t=E[f+(F<<1)>>1]|0,t<<16>>16>0){E[f>>1]=t,t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(c=E[f+(_<<1)>>1]|0,s=c<<16>>16,t=E[f+(R<<1)>>1]|0,a=t<<16>>16,l=t<<16>>16>0,c<<16>>16<=0){if(l){E[f>>1]=t,t=a*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+g,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+J,l=r+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(g|0)&&(e[l>>2]=g),e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(t=E[f+-2>>1]|0,t<<16>>16>0){if(E[f>>1]=t,t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(g|0)){t=d;break}e[t>>2]=g,t=d;break}else{if(t=d+1|0,(d|0)>32767)break t;E[f>>1]=t,e[r+1179664+(d<<2)>>2]=t<<16>>16,d=d*7|0,e[r+1310736+(d<<2)>>2]=1,e[r+1310736+(d+1<<2)>>2]=g,e[r+1310736+(d+2<<2)>>2]=J,e[r+1310736+(d+3<<2)>>2]=g,e[r+1310736+(d+4<<2)>>2]=g,e[r+1310736+(d+5<<2)>>2]=J,e[r+1310736+(d+6<<2)>>2]=J;break}}if(l){if(t=e[r+1179664+(s+-1<<2)>>2]|0,s=e[r+1179664+(a+-1<<2)>>2]|0,(t|0)>(s|0))if(E[f>>1]=s,(d|0)>0)for(l=0,c=h;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=s),l=l+1|0,(l|0)>=(d|0)){t=s;break}else c=c+4|0;else t=s;else if(E[f>>1]=t,(t|0)<(s|0)&(d|0)>0)for(l=0,c=h;(e[c>>2]|0)==(s|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(l=E[f+-2>>1]|0,l<<16>>16<=0){E[f>>1]=c,t=s*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+g,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+J,l=r+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(g|0)&&(e[l>>2]=g),e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(t=e[r+1179664+(s+-1<<2)>>2]|0,s=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(s|0))if(E[f>>1]=s,(d|0)>0)for(l=0,c=h;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=s),l=l+1|0,(l|0)>=(d|0)){t=s;break}else c=c+4|0;else t=s;else if(E[f>>1]=t,(t|0)<(s|0)&(d|0)>0)for(l=0,c=h;(e[c>>2]|0)==(s|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+J,t=d}else E[f>>1]=0,t=d;while(!1);if(g=g+1|0,o=o+4|0,l=f+2|0,(g|0)>=(q|0))break;f=l,d=t}if(J=J+1|0,(J|0)>=(ie|0)){a=t,se=52;break e}else o=o+y|0,l=l+4|0}ft(3,3904,ae),t=-1}else a=0,se=52;while(!1);if((se|0)==52){if(c=r+12|0,(a|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(a|0);)l=l+1|0,h=h+4|0;if(s=r+8|0,t=o+-1|0,e[s>>2]=t,t){if(gt(c|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do se=t<<2,e[r+131084+(se<<2)>>2]=X,e[r+131084+((se|1)<<2)>>2]=0,e[r+131084+((se|2)<<2)>>2]=U,e[r+131084+((se|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((a|0)>0){c=0;do h=(e[r+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[s>>2]|0)>0){t=0;do X=r+12+(t<<2)|0,U=t<<1,se=r+655376+(U<<3)|0,A[se>>3]=+A[se>>3]/+(e[X>>2]|0),U=r+655376+((U|1)<<3)|0,A[U>>3]=+A[U>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function Ml(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,ae=Ae,X=(a|0)/2|0,U=(c|0)/2|0,d=e[r>>2]|0,ie=U+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ie,X)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(X|0));)h=h+2|0,l=l+2|0;if(W=o*3|0,q=X+-1|0,(c|0)>1)for(t=0,o=d,h=d+(q<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(U|0));)o=o+(X<<1)|0,h=h+(X<<1)|0;h=r+1179664|0,F=0-X|0,_=1-X|0,R=~X,y=(a<<2)+16|0;e:do if((ie|0)>1){ne=(q|0)>1,J=1,o=s+((a<<3)+8)|0,l=d+(X+1<<1)|0,t=0;t:for(;;){if(ne)for(g=1,f=l,d=t;;){do if(((B[o+1>>0]|0)+(B[o>>0]|0)+(B[o+2>>0]|0)|0)>(W|0)){if(t=E[f+(F<<1)>>1]|0,t<<16>>16>0){E[f>>1]=t,t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(c=E[f+(_<<1)>>1]|0,s=c<<16>>16,t=E[f+(R<<1)>>1]|0,a=t<<16>>16,l=t<<16>>16>0,c<<16>>16<=0){if(l){E[f>>1]=t,t=a*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+g,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+J,l=r+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(g|0)&&(e[l>>2]=g),e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(t=E[f+-2>>1]|0,t<<16>>16>0){if(E[f>>1]=t,t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(g|0)){t=d;break}e[t>>2]=g,t=d;break}else{if(t=d+1|0,(d|0)>32767)break t;E[f>>1]=t,e[r+1179664+(d<<2)>>2]=t<<16>>16,d=d*7|0,e[r+1310736+(d<<2)>>2]=1,e[r+1310736+(d+1<<2)>>2]=g,e[r+1310736+(d+2<<2)>>2]=J,e[r+1310736+(d+3<<2)>>2]=g,e[r+1310736+(d+4<<2)>>2]=g,e[r+1310736+(d+5<<2)>>2]=J,e[r+1310736+(d+6<<2)>>2]=J;break}}if(l){if(t=e[r+1179664+(s+-1<<2)>>2]|0,s=e[r+1179664+(a+-1<<2)>>2]|0,(t|0)>(s|0))if(E[f>>1]=s,(d|0)>0)for(l=0,c=h;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=s),l=l+1|0,(l|0)>=(d|0)){t=s;break}else c=c+4|0;else t=s;else if(E[f>>1]=t,(t|0)<(s|0)&(d|0)>0)for(l=0,c=h;(e[c>>2]|0)==(s|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(l=E[f+-2>>1]|0,l<<16>>16<=0){E[f>>1]=c,t=s*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+g,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+J,l=r+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(g|0)&&(e[l>>2]=g),e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(t=e[r+1179664+(s+-1<<2)>>2]|0,s=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(s|0))if(E[f>>1]=s,(d|0)>0)for(l=0,c=h;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=s),l=l+1|0,(l|0)>=(d|0)){t=s;break}else c=c+4|0;else t=s;else if(E[f>>1]=t,(t|0)<(s|0)&(d|0)>0)for(l=0,c=h;(e[c>>2]|0)==(s|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+J,t=d}else E[f>>1]=0,t=d;while(!1);if(g=g+1|0,o=o+8|0,l=f+2|0,(g|0)>=(q|0))break;f=l,d=t}if(J=J+1|0,(J|0)>=(ie|0)){a=t,se=52;break e}else o=o+y|0,l=l+4|0}ft(3,3904,ae),t=-1}else a=0,se=52;while(!1);if((se|0)==52){if(c=r+12|0,(a|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(a|0);)l=l+1|0,h=h+4|0;if(s=r+8|0,t=o+-1|0,e[s>>2]=t,t){if(gt(c|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do se=t<<2,e[r+131084+(se<<2)>>2]=X,e[r+131084+((se|1)<<2)>>2]=0,e[r+131084+((se|2)<<2)>>2]=U,e[r+131084+((se|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((a|0)>0){c=0;do h=(e[r+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[s>>2]|0)>0){t=0;do X=r+12+(t<<2)|0,U=t<<1,se=r+655376+(U<<3)|0,A[se>>3]=+A[se>>3]/+(e[X>>2]|0),U=r+655376+((U|1)<<3)|0,A[U>>3]=+A[U>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function ps(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,ae=Ae,X=(a|0)/2|0,U=(c|0)/2|0,d=e[r>>2]|0,ie=U+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ie,X)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(X|0));)h=h+2|0,l=l+2|0;if(W=o*3|0,q=X+-1|0,(c|0)>1)for(t=0,o=d,h=d+(q<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(U|0));)o=o+(X<<1)|0,h=h+(X<<1)|0;h=r+1179664|0,F=0-X|0,_=1-X|0,R=~X,y=(a<<1)+8|0;e:do if((ie|0)>1){ne=(q|0)>1,J=1,o=s+((a<<2)+4)|0,l=d+(X+1<<1)|0,t=0;t:for(;;){if(ne)for(g=1,f=l,d=t;;){a=B[o>>0]|0;do if(((a&240)+24+(a<<4&240)+((B[o+1>>0]|0)&240)|0)>(W|0)){if(t=E[f+(F<<1)>>1]|0,t<<16>>16>0){E[f>>1]=t,t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(c=E[f+(_<<1)>>1]|0,s=c<<16>>16,t=E[f+(R<<1)>>1]|0,a=t<<16>>16,l=t<<16>>16>0,c<<16>>16<=0){if(l){E[f>>1]=t,t=a*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+g,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+J,l=r+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(g|0)&&(e[l>>2]=g),e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(t=E[f+-2>>1]|0,t<<16>>16>0){if(E[f>>1]=t,t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(g|0)){t=d;break}e[t>>2]=g,t=d;break}else{if(t=d+1|0,(d|0)>32767)break t;E[f>>1]=t,e[r+1179664+(d<<2)>>2]=t<<16>>16,d=d*7|0,e[r+1310736+(d<<2)>>2]=1,e[r+1310736+(d+1<<2)>>2]=g,e[r+1310736+(d+2<<2)>>2]=J,e[r+1310736+(d+3<<2)>>2]=g,e[r+1310736+(d+4<<2)>>2]=g,e[r+1310736+(d+5<<2)>>2]=J,e[r+1310736+(d+6<<2)>>2]=J;break}}if(l){if(t=e[r+1179664+(s+-1<<2)>>2]|0,s=e[r+1179664+(a+-1<<2)>>2]|0,(t|0)>(s|0))if(E[f>>1]=s,(d|0)>0)for(l=0,c=h;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=s),l=l+1|0,(l|0)>=(d|0)){t=s;break}else c=c+4|0;else t=s;else if(E[f>>1]=t,(t|0)<(s|0)&(d|0)>0)for(l=0,c=h;(e[c>>2]|0)==(s|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(l=E[f+-2>>1]|0,l<<16>>16<=0){E[f>>1]=c,t=s*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+g,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+J,l=r+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(g|0)&&(e[l>>2]=g),e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(t=e[r+1179664+(s+-1<<2)>>2]|0,s=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(s|0))if(E[f>>1]=s,(d|0)>0)for(l=0,c=h;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=s),l=l+1|0,(l|0)>=(d|0)){t=s;break}else c=c+4|0;else t=s;else if(E[f>>1]=t,(t|0)<(s|0)&(d|0)>0)for(l=0,c=h;(e[c>>2]|0)==(s|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+J,t=d}else E[f>>1]=0,t=d;while(!1);if(g=g+1|0,o=o+4|0,l=f+2|0,(g|0)>=(q|0))break;f=l,d=t}if(J=J+1|0,(J|0)>=(ie|0)){a=t,se=52;break e}else o=o+y|0,l=l+4|0}ft(3,3904,ae),t=-1}else a=0,se=52;while(!1);if((se|0)==52){if(c=r+12|0,(a|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(a|0);)l=l+1|0,h=h+4|0;if(s=r+8|0,t=o+-1|0,e[s>>2]=t,t){if(gt(c|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do se=t<<2,e[r+131084+(se<<2)>>2]=X,e[r+131084+((se|1)<<2)>>2]=0,e[r+131084+((se|2)<<2)>>2]=U,e[r+131084+((se|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((a|0)>0){c=0;do h=(e[r+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[s>>2]|0)>0){t=0;do X=r+12+(t<<2)|0,U=t<<1,se=r+655376+(U<<3)|0,A[se>>3]=+A[se>>3]/+(e[X>>2]|0),U=r+655376+((U|1)<<3)|0,A[U>>3]=+A[U>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function Ua(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,ae=Ae,X=(a|0)/2|0,U=(c|0)/2|0,d=e[r>>2]|0,ie=U+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ie,X)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(X|0));)h=h+2|0,l=l+2|0;if(W=o*3|0,q=X+-1|0,(c|0)>1)for(t=0,o=d,h=d+(q<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(U|0));)o=o+(X<<1)|0,h=h+(X<<1)|0;h=r+1179664|0,F=0-X|0,_=1-X|0,R=~X,y=(a<<1)+8|0;e:do if((ie|0)>1){ne=(q|0)>1,J=1,o=s+((a<<2)+4)|0,l=d+(X+1<<1)|0,t=0;t:for(;;){if(ne)for(g=1,f=l,d=t;;){s=B[o>>0]|0,a=B[o+1>>0]|0;do if(((s&248)+12+(s<<5&224)+(a>>>3&24)+(a<<2&248)|0)>(W|0)){if(t=E[f+(F<<1)>>1]|0,t<<16>>16>0){E[f>>1]=t,t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(c=E[f+(_<<1)>>1]|0,s=c<<16>>16,t=E[f+(R<<1)>>1]|0,a=t<<16>>16,l=t<<16>>16>0,c<<16>>16<=0){if(l){E[f>>1]=t,t=a*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+g,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+J,l=r+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(g|0)&&(e[l>>2]=g),e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(t=E[f+-2>>1]|0,t<<16>>16>0){if(E[f>>1]=t,t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(g|0)){t=d;break}e[t>>2]=g,t=d;break}else{if(t=d+1|0,(d|0)>32767)break t;E[f>>1]=t,e[r+1179664+(d<<2)>>2]=t<<16>>16,d=d*7|0,e[r+1310736+(d<<2)>>2]=1,e[r+1310736+(d+1<<2)>>2]=g,e[r+1310736+(d+2<<2)>>2]=J,e[r+1310736+(d+3<<2)>>2]=g,e[r+1310736+(d+4<<2)>>2]=g,e[r+1310736+(d+5<<2)>>2]=J,e[r+1310736+(d+6<<2)>>2]=J;break}}if(l){if(t=e[r+1179664+(s+-1<<2)>>2]|0,s=e[r+1179664+(a+-1<<2)>>2]|0,(t|0)>(s|0))if(E[f>>1]=s,(d|0)>0)for(l=0,c=h;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=s),l=l+1|0,(l|0)>=(d|0)){t=s;break}else c=c+4|0;else t=s;else if(E[f>>1]=t,(t|0)<(s|0)&(d|0)>0)for(l=0,c=h;(e[c>>2]|0)==(s|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(l=E[f+-2>>1]|0,l<<16>>16<=0){E[f>>1]=c,t=s*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+g,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+J,l=r+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(g|0)&&(e[l>>2]=g),e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(t=e[r+1179664+(s+-1<<2)>>2]|0,s=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(s|0))if(E[f>>1]=s,(d|0)>0)for(l=0,c=h;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=s),l=l+1|0,(l|0)>=(d|0)){t=s;break}else c=c+4|0;else t=s;else if(E[f>>1]=t,(t|0)<(s|0)&(d|0)>0)for(l=0,c=h;(e[c>>2]|0)==(s|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+J,t=d}else E[f>>1]=0,t=d;while(!1);if(g=g+1|0,o=o+4|0,l=f+2|0,(g|0)>=(q|0))break;f=l,d=t}if(J=J+1|0,(J|0)>=(ie|0)){a=t,se=52;break e}else o=o+y|0,l=l+4|0}ft(3,3904,ae),t=-1}else a=0,se=52;while(!1);if((se|0)==52){if(c=r+12|0,(a|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(a|0);)l=l+1|0,h=h+4|0;if(s=r+8|0,t=o+-1|0,e[s>>2]=t,t){if(gt(c|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do se=t<<2,e[r+131084+(se<<2)>>2]=X,e[r+131084+((se|1)<<2)>>2]=0,e[r+131084+((se|2)<<2)>>2]=U,e[r+131084+((se|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((a|0)>0){c=0;do h=(e[r+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[s>>2]|0)>0){t=0;do X=r+12+(t<<2)|0,U=t<<1,se=r+655376+(U<<3)|0,A[se>>3]=+A[se>>3]/+(e[X>>2]|0),U=r+655376+((U|1)<<3)|0,A[U>>3]=+A[U>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function P0(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,ae=Ae,X=(a|0)/2|0,U=(c|0)/2|0,d=e[r>>2]|0,ie=U+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ie,X)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(X|0));)h=h+2|0,l=l+2|0;if(W=o*3|0,q=X+-1|0,(c|0)>1)for(t=0,o=d,h=d+(q<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(U|0));)o=o+(X<<1)|0,h=h+(X<<1)|0;h=r+1179664|0,F=0-X|0,_=1-X|0,R=~X,y=(a<<2)+16|0;e:do if((ie|0)>1){ne=(q|0)>1,J=1,o=s+((a<<3)+8)|0,l=d+(X+1<<1)|0,t=0;t:for(;;){if(ne)for(g=1,f=l,d=t;;){do if(((B[o+2>>0]|0)+(B[o+1>>0]|0)+(B[o+3>>0]|0)|0)>(W|0)){if(t=E[f+(F<<1)>>1]|0,t<<16>>16>0){E[f>>1]=t,t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(c=E[f+(_<<1)>>1]|0,s=c<<16>>16,t=E[f+(R<<1)>>1]|0,a=t<<16>>16,l=t<<16>>16>0,c<<16>>16<=0){if(l){E[f>>1]=t,t=a*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+g,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+J,l=r+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(g|0)&&(e[l>>2]=g),e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(t=E[f+-2>>1]|0,t<<16>>16>0){if(E[f>>1]=t,t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(g|0)){t=d;break}e[t>>2]=g,t=d;break}else{if(t=d+1|0,(d|0)>32767)break t;E[f>>1]=t,e[r+1179664+(d<<2)>>2]=t<<16>>16,d=d*7|0,e[r+1310736+(d<<2)>>2]=1,e[r+1310736+(d+1<<2)>>2]=g,e[r+1310736+(d+2<<2)>>2]=J,e[r+1310736+(d+3<<2)>>2]=g,e[r+1310736+(d+4<<2)>>2]=g,e[r+1310736+(d+5<<2)>>2]=J,e[r+1310736+(d+6<<2)>>2]=J;break}}if(l){if(t=e[r+1179664+(s+-1<<2)>>2]|0,s=e[r+1179664+(a+-1<<2)>>2]|0,(t|0)>(s|0))if(E[f>>1]=s,(d|0)>0)for(l=0,c=h;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=s),l=l+1|0,(l|0)>=(d|0)){t=s;break}else c=c+4|0;else t=s;else if(E[f>>1]=t,(t|0)<(s|0)&(d|0)>0)for(l=0,c=h;(e[c>>2]|0)==(s|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,a=r+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+J,e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(l=E[f+-2>>1]|0,l<<16>>16<=0){E[f>>1]=c,t=s*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+g,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+J,l=r+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(g|0)&&(e[l>>2]=g),e[r+1310736+(t+-1<<2)>>2]=J,t=d;break}if(t=e[r+1179664+(s+-1<<2)>>2]|0,s=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(s|0))if(E[f>>1]=s,(d|0)>0)for(l=0,c=h;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=s),l=l+1|0,(l|0)>=(d|0)){t=s;break}else c=c+4|0;else t=s;else if(E[f>>1]=t,(t|0)<(s|0)&(d|0)>0)for(l=0,c=h;(e[c>>2]|0)==(s|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=r+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=r+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+g,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+J,t=d}else E[f>>1]=0,t=d;while(!1);if(g=g+1|0,o=o+8|0,l=f+2|0,(g|0)>=(q|0))break;f=l,d=t}if(J=J+1|0,(J|0)>=(ie|0)){a=t,se=52;break e}else o=o+y|0,l=l+4|0}ft(3,3904,ae),t=-1}else a=0,se=52;while(!1);if((se|0)==52){if(c=r+12|0,(a|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(a|0);)l=l+1|0,h=h+4|0;if(s=r+8|0,t=o+-1|0,e[s>>2]=t,t){if(gt(c|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do se=t<<2,e[r+131084+(se<<2)>>2]=X,e[r+131084+((se|1)<<2)>>2]=0,e[r+131084+((se|2)<<2)>>2]=U,e[r+131084+((se|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((a|0)>0){c=0;do h=(e[r+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[s>>2]|0)>0){t=0;do X=r+12+(t<<2)|0,U=t<<1,se=r+655376+(U<<3)|0,A[se>>3]=+A[se>>3]/+(e[X>>2]|0),U=r+655376+((U|1)<<3)|0,A[U>>3]=+A[U>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function l0(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,ae=Ae,X=(a|0)/2|0,U=(c|0)/2|0,d=e[r>>2]|0,ie=U+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ie,X)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(X|0));)h=h+2|0,l=l+2|0;if(q=X+-1|0,(c|0)>1)for(t=0,h=d,l=d+(q<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(U|0));)h=h+(X<<1)|0,l=l+(X<<1)|0;l=r+1179664|0,ne=0-X|0,R=1-X|0,F=~X,_=a+4|0;e:do if((ie|0)>1){J=(q|0)>1,W=1,h=s+((a<<1)+2)|0,c=d+(X+1<<1)|0,t=0;t:for(;;){if(J)for(y=1,g=c,f=t;;){do if((B[h>>0]|0|0)>(o|0)){if(t=E[g+(ne<<1)>>1]|0,t<<16>>16>0){E[g>>1]=t,t=(t<<16>>16)*7|0,d=r+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=f;break}if(s=E[g+(R<<1)>>1]|0,a=s<<16>>16,t=E[g+(F<<1)>>1]|0,d=t<<16>>16,c=t<<16>>16>0,s<<16>>16<=0){if(c){E[g>>1]=t,t=d*7|0,c=r+1310736+(t+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=r+1310736+(t+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+y,c=r+1310736+(t+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+W,c=r+1310736+(t+-3<<2)|0,(e[c>>2]|0)<(y|0)&&(e[c>>2]=y),e[r+1310736+(t+-1<<2)>>2]=W,t=f;break}if(t=E[g+-2>>1]|0,t<<16>>16>0){if(E[g>>1]=t,t=(t<<16>>16)*7|0,d=r+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(y|0)){t=f;break}e[t>>2]=y,t=f;break}else{if(t=f+1|0,(f|0)>32767)break t;E[g>>1]=t,e[r+1179664+(f<<2)>>2]=t<<16>>16,f=f*7|0,e[r+1310736+(f<<2)>>2]=1,e[r+1310736+(f+1<<2)>>2]=y,e[r+1310736+(f+2<<2)>>2]=W,e[r+1310736+(f+3<<2)>>2]=y,e[r+1310736+(f+4<<2)>>2]=y,e[r+1310736+(f+5<<2)>>2]=W,e[r+1310736+(f+6<<2)>>2]=W;break}}if(c){if(t=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+(d+-1<<2)>>2]|0,(t|0)>(a|0))if(E[g>>1]=a,(f|0)>0)for(c=0,s=l;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=a),c=c+1|0,(c|0)>=(f|0)){t=a;break}else s=s+4|0;else t=a;else if(E[g>>1]=t,(t|0)<(a|0)&(f|0)>0)for(c=0,s=l;(e[s>>2]|0)==(a|0)&&(e[s>>2]=t),c=c+1|0,!((c|0)>=(f|0));)s=s+4|0;t=(t<<16>>16)*7|0,d=r+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=f;break}if(c=E[g+-2>>1]|0,c<<16>>16<=0){E[g>>1]=s,t=a*7|0,c=r+1310736+(t+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=r+1310736+(t+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+y,c=r+1310736+(t+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+W,c=r+1310736+(t+-4<<2)|0,(e[c>>2]|0)>(y|0)&&(e[c>>2]=y),e[r+1310736+(t+-1<<2)>>2]=W,t=f;break}if(t=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+((c<<16>>16)+-1<<2)>>2]|0,(t|0)>(a|0))if(E[g>>1]=a,(f|0)>0)for(c=0,s=l;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=a),c=c+1|0,(c|0)>=(f|0)){t=a;break}else s=s+4|0;else t=a;else if(E[g>>1]=t,(t|0)<(a|0)&(f|0)>0)for(c=0,s=l;(e[s>>2]|0)==(a|0)&&(e[s>>2]=t),c=c+1|0,!((c|0)>=(f|0));)s=s+4|0;t=(t<<16>>16)*7|0,d=r+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+W,t=f}else E[g>>1]=0,t=f;while(!1);if(y=y+1|0,h=h+2|0,c=g+2|0,(y|0)>=(q|0))break;g=c,f=t}if(W=W+1|0,(W|0)>=(ie|0)){d=t,se=52;break e}else h=h+_|0,c=c+4|0}ft(3,3904,ae),t=-1}else d=0,se=52;while(!1);if((se|0)==52){if(s=r+12|0,(d|0)<1)h=1;else for(c=1,h=1;t=e[l>>2]|0,(t|0)==(c|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(c|0)<(d|0);)c=c+1|0,l=l+4|0;if(a=r+8|0,t=h+-1|0,e[a>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do se=t<<2,e[r+131084+(se<<2)>>2]=X,e[r+131084+((se|1)<<2)>>2]=0,e[r+131084+((se|2)<<2)>>2]=U,e[r+131084+((se|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[a>>2]|0))}if((d|0)>0){s=0;do l=(e[r+1179664+(s<<2)>>2]|0)+-1|0,c=s*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(c<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(c+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(c+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(c+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(c+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(c+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(c+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),s=s+1|0;while((s|0)<(d|0))}if((e[a>>2]|0)>0){t=0;do X=r+12+(t<<2)|0,U=t<<1,se=r+655376+(U<<3)|0,A[se>>3]=+A[se>>3]/+(e[X>>2]|0),U=r+655376+((U|1)<<3)|0,A[U>>3]=+A[U>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function Dc(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,ae=Ae,X=(a|0)/2|0,U=(c|0)/2|0,d=e[r>>2]|0,ie=U+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ie,X)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(X|0));)h=h+2|0,l=l+2|0;if(q=X+-1|0,(c|0)>1)for(t=0,h=d,l=d+(q<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(U|0));)h=h+(X<<1)|0,l=l+(X<<1)|0;l=r+1179664|0,ne=0-X|0,R=1-X|0,F=~X,_=(a<<1)+8|0;e:do if((ie|0)>1){J=(q|0)>1,W=1,h=s+((a<<2)+4)|0,c=d+(X+1<<1)|0,t=0;t:for(;;){if(J)for(y=1,g=c,f=t;;){do if((B[h+1>>0]|0|0)>(o|0)){if(t=E[g+(ne<<1)>>1]|0,t<<16>>16>0){E[g>>1]=t,t=(t<<16>>16)*7|0,d=r+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=f;break}if(s=E[g+(R<<1)>>1]|0,a=s<<16>>16,t=E[g+(F<<1)>>1]|0,d=t<<16>>16,c=t<<16>>16>0,s<<16>>16<=0){if(c){E[g>>1]=t,t=d*7|0,c=r+1310736+(t+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=r+1310736+(t+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+y,c=r+1310736+(t+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+W,c=r+1310736+(t+-3<<2)|0,(e[c>>2]|0)<(y|0)&&(e[c>>2]=y),e[r+1310736+(t+-1<<2)>>2]=W,t=f;break}if(t=E[g+-2>>1]|0,t<<16>>16>0){if(E[g>>1]=t,t=(t<<16>>16)*7|0,d=r+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(y|0)){t=f;break}e[t>>2]=y,t=f;break}else{if(t=f+1|0,(f|0)>32767)break t;E[g>>1]=t,e[r+1179664+(f<<2)>>2]=t<<16>>16,f=f*7|0,e[r+1310736+(f<<2)>>2]=1,e[r+1310736+(f+1<<2)>>2]=y,e[r+1310736+(f+2<<2)>>2]=W,e[r+1310736+(f+3<<2)>>2]=y,e[r+1310736+(f+4<<2)>>2]=y,e[r+1310736+(f+5<<2)>>2]=W,e[r+1310736+(f+6<<2)>>2]=W;break}}if(c){if(t=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+(d+-1<<2)>>2]|0,(t|0)>(a|0))if(E[g>>1]=a,(f|0)>0)for(c=0,s=l;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=a),c=c+1|0,(c|0)>=(f|0)){t=a;break}else s=s+4|0;else t=a;else if(E[g>>1]=t,(t|0)<(a|0)&(f|0)>0)for(c=0,s=l;(e[s>>2]|0)==(a|0)&&(e[s>>2]=t),c=c+1|0,!((c|0)>=(f|0));)s=s+4|0;t=(t<<16>>16)*7|0,d=r+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=f;break}if(c=E[g+-2>>1]|0,c<<16>>16<=0){E[g>>1]=s,t=a*7|0,c=r+1310736+(t+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=r+1310736+(t+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+y,c=r+1310736+(t+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+W,c=r+1310736+(t+-4<<2)|0,(e[c>>2]|0)>(y|0)&&(e[c>>2]=y),e[r+1310736+(t+-1<<2)>>2]=W,t=f;break}if(t=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+((c<<16>>16)+-1<<2)>>2]|0,(t|0)>(a|0))if(E[g>>1]=a,(f|0)>0)for(c=0,s=l;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=a),c=c+1|0,(c|0)>=(f|0)){t=a;break}else s=s+4|0;else t=a;else if(E[g>>1]=t,(t|0)<(a|0)&(f|0)>0)for(c=0,s=l;(e[s>>2]|0)==(a|0)&&(e[s>>2]=t),c=c+1|0,!((c|0)>=(f|0));)s=s+4|0;t=(t<<16>>16)*7|0,d=r+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+W,t=f}else E[g>>1]=0,t=f;while(!1);if(y=y+1|0,h=h+4|0,c=g+2|0,(y|0)>=(q|0))break;g=c,f=t}if(W=W+1|0,(W|0)>=(ie|0)){d=t,se=52;break e}else h=h+_|0,c=c+4|0}ft(3,3904,ae),t=-1}else d=0,se=52;while(!1);if((se|0)==52){if(s=r+12|0,(d|0)<1)h=1;else for(c=1,h=1;t=e[l>>2]|0,(t|0)==(c|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(c|0)<(d|0);)c=c+1|0,l=l+4|0;if(a=r+8|0,t=h+-1|0,e[a>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do se=t<<2,e[r+131084+(se<<2)>>2]=X,e[r+131084+((se|1)<<2)>>2]=0,e[r+131084+((se|2)<<2)>>2]=U,e[r+131084+((se|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[a>>2]|0))}if((d|0)>0){s=0;do l=(e[r+1179664+(s<<2)>>2]|0)+-1|0,c=s*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(c<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(c+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(c+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(c+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(c+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(c+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(c+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),s=s+1|0;while((s|0)<(d|0))}if((e[a>>2]|0)>0){t=0;do X=r+12+(t<<2)|0,U=t<<1,se=r+655376+(U<<3)|0,A[se>>3]=+A[se>>3]/+(e[X>>2]|0),U=r+655376+((U|1)<<3)|0,A[U>>3]=+A[U>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function mo(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,ae=Ae,X=(a|0)/2|0,U=(c|0)/2|0,d=e[r>>2]|0,ie=U+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ie,X)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(X|0));)h=h+2|0,l=l+2|0;if(q=X+-1|0,(c|0)>1)for(t=0,h=d,l=d+(q<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(U|0));)h=h+(X<<1)|0,l=l+(X<<1)|0;l=r+1179664|0,ne=0-X|0,R=1-X|0,F=~X,_=(a<<1)+8|0;e:do if((ie|0)>1){J=(q|0)>1,W=1,h=s+((a<<2)+4)|0,c=d+(X+1<<1)|0,t=0;t:for(;;){if(J)for(y=1,g=c,f=t;;){do if((B[h>>0]|0|0)>(o|0)){if(t=E[g+(ne<<1)>>1]|0,t<<16>>16>0){E[g>>1]=t,t=(t<<16>>16)*7|0,d=r+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=f;break}if(s=E[g+(R<<1)>>1]|0,a=s<<16>>16,t=E[g+(F<<1)>>1]|0,d=t<<16>>16,c=t<<16>>16>0,s<<16>>16<=0){if(c){E[g>>1]=t,t=d*7|0,c=r+1310736+(t+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=r+1310736+(t+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+y,c=r+1310736+(t+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+W,c=r+1310736+(t+-3<<2)|0,(e[c>>2]|0)<(y|0)&&(e[c>>2]=y),e[r+1310736+(t+-1<<2)>>2]=W,t=f;break}if(t=E[g+-2>>1]|0,t<<16>>16>0){if(E[g>>1]=t,t=(t<<16>>16)*7|0,d=r+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(y|0)){t=f;break}e[t>>2]=y,t=f;break}else{if(t=f+1|0,(f|0)>32767)break t;E[g>>1]=t,e[r+1179664+(f<<2)>>2]=t<<16>>16,f=f*7|0,e[r+1310736+(f<<2)>>2]=1,e[r+1310736+(f+1<<2)>>2]=y,e[r+1310736+(f+2<<2)>>2]=W,e[r+1310736+(f+3<<2)>>2]=y,e[r+1310736+(f+4<<2)>>2]=y,e[r+1310736+(f+5<<2)>>2]=W,e[r+1310736+(f+6<<2)>>2]=W;break}}if(c){if(t=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+(d+-1<<2)>>2]|0,(t|0)>(a|0))if(E[g>>1]=a,(f|0)>0)for(c=0,s=l;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=a),c=c+1|0,(c|0)>=(f|0)){t=a;break}else s=s+4|0;else t=a;else if(E[g>>1]=t,(t|0)<(a|0)&(f|0)>0)for(c=0,s=l;(e[s>>2]|0)==(a|0)&&(e[s>>2]=t),c=c+1|0,!((c|0)>=(f|0));)s=s+4|0;t=(t<<16>>16)*7|0,d=r+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=f;break}if(c=E[g+-2>>1]|0,c<<16>>16<=0){E[g>>1]=s,t=a*7|0,c=r+1310736+(t+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=r+1310736+(t+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+y,c=r+1310736+(t+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+W,c=r+1310736+(t+-4<<2)|0,(e[c>>2]|0)>(y|0)&&(e[c>>2]=y),e[r+1310736+(t+-1<<2)>>2]=W,t=f;break}if(t=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+((c<<16>>16)+-1<<2)>>2]|0,(t|0)>(a|0))if(E[g>>1]=a,(f|0)>0)for(c=0,s=l;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=a),c=c+1|0,(c|0)>=(f|0)){t=a;break}else s=s+4|0;else t=a;else if(E[g>>1]=t,(t|0)<(a|0)&(f|0)>0)for(c=0,s=l;(e[s>>2]|0)==(a|0)&&(e[s>>2]=t),c=c+1|0,!((c|0)>=(f|0));)s=s+4|0;t=(t<<16>>16)*7|0,d=r+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+W,t=f}else E[g>>1]=0,t=f;while(!1);if(y=y+1|0,h=h+4|0,c=g+2|0,(y|0)>=(q|0))break;g=c,f=t}if(W=W+1|0,(W|0)>=(ie|0)){d=t,se=52;break e}else h=h+_|0,c=c+4|0}ft(3,3904,ae),t=-1}else d=0,se=52;while(!1);if((se|0)==52){if(s=r+12|0,(d|0)<1)h=1;else for(c=1,h=1;t=e[l>>2]|0,(t|0)==(c|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(c|0)<(d|0);)c=c+1|0,l=l+4|0;if(a=r+8|0,t=h+-1|0,e[a>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do se=t<<2,e[r+131084+(se<<2)>>2]=X,e[r+131084+((se|1)<<2)>>2]=0,e[r+131084+((se|2)<<2)>>2]=U,e[r+131084+((se|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[a>>2]|0))}if((d|0)>0){s=0;do l=(e[r+1179664+(s<<2)>>2]|0)+-1|0,c=s*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(c<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(c+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(c+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(c+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(c+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(c+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(c+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),s=s+1|0;while((s|0)<(d|0))}if((e[a>>2]|0)>0){t=0;do X=r+12+(t<<2)|0,U=t<<1,se=r+655376+(U<<3)|0,A[se>>3]=+A[se>>3]/+(e[X>>2]|0),U=r+655376+((U|1)<<3)|0,A[U>>3]=+A[U>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function Ko(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0;if(U=C,C=C+16|0,se=U,d=e[r>>2]|0,ae=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(ae,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ie=o*3|0,q=a+-1|0,(c|0)>0)for(t=0,o=d,h=d+(q<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(c|0));)o=o+(a<<1)|0,h=h+(a<<1)|0;h=r+1179664|0,t=a+1|0,ne=0-a|0,R=1-a|0,F=~a;e:do if((ae|0)>1){J=(q|0)>1,W=1,o=s+(t*3|0)|0,l=d+(t<<1)|0,t=0;t:for(;;){if(J)for(_=1,y=l,g=t;;){do if(((B[o+1>>0]|0)+(B[o>>0]|0)+(B[o+2>>0]|0)|0)>(ie|0)){if(t=E[y+(ne<<1)>>1]|0,t<<16>>16>0){E[y>>1]=t,t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(s=E[y+(R<<1)>>1]|0,d=s<<16>>16,t=E[y+(F<<1)>>1]|0,f=t<<16>>16,l=t<<16>>16>0,s<<16>>16<=0){if(l){E[y>>1]=t,t=f*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+_,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(_|0)&&(e[l>>2]=_),e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(t=E[y+-2>>1]|0,t<<16>>16>0){if(E[y>>1]=t,t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(_|0)){t=g;break}e[t>>2]=_,t=g;break}else{if(t=g+1|0,(g|0)>32767)break t;E[y>>1]=t,e[r+1179664+(g<<2)>>2]=t<<16>>16,g=g*7|0,e[r+1310736+(g<<2)>>2]=1,e[r+1310736+(g+1<<2)>>2]=_,e[r+1310736+(g+2<<2)>>2]=W,e[r+1310736+(g+3<<2)>>2]=_,e[r+1310736+(g+4<<2)>>2]=_,e[r+1310736+(g+5<<2)>>2]=W,e[r+1310736+(g+6<<2)>>2]=W;break}}if(l){if(t=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+(f+-1<<2)>>2]|0,(t|0)>(d|0))if(E[y>>1]=d,(g|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=d),l=l+1|0,(l|0)>=(g|0)){t=d;break}else s=s+4|0;else t=d;else if(E[y>>1]=t,(t|0)<(d|0)&(g|0)>0)for(l=0,s=h;(e[s>>2]|0)==(d|0)&&(e[s>>2]=t),l=l+1|0,!((l|0)>=(g|0));)s=s+4|0;t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(l=E[y+-2>>1]|0,l<<16>>16<=0){E[y>>1]=s,t=d*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+_,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(_|0)&&(e[l>>2]=_),e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(t=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(d|0))if(E[y>>1]=d,(g|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=d),l=l+1|0,(l|0)>=(g|0)){t=d;break}else s=s+4|0;else t=d;else if(E[y>>1]=t,(t|0)<(d|0)&(g|0)>0)for(l=0,s=h;(e[s>>2]|0)==(d|0)&&(e[s>>2]=t),l=l+1|0,!((l|0)>=(g|0));)s=s+4|0;t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+W,t=g}else E[y>>1]=0,t=g;while(!1);if(_=_+1|0,o=o+3|0,l=y+2|0,(_|0)>=(q|0))break;y=l,g=t}if(W=W+1|0,(W|0)>=(ae|0)){f=t,X=52;break e}else o=o+6|0,l=l+4|0}ft(3,3904,se),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(s=r+12|0,(f|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(f|0);)l=l+1|0,h=h+4|0;if(d=r+8|0,t=o+-1|0,e[d>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=a,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=c,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){s=0;do h=(e[r+1179664+(s<<2)>>2]|0)+-1|0,l=s*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),s=s+1|0;while((s|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,X=r+655376+(c<<3)|0,A[X>>3]=+A[X>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return C=U,t|0}function F0(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0;if(U=C,C=C+16|0,se=U,d=e[r>>2]|0,ae=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(ae,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ie=o*3|0,q=a+-1|0,(c|0)>0)for(t=0,o=d,h=d+(q<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(c|0));)o=o+(a<<1)|0,h=h+(a<<1)|0;h=r+1179664|0,t=a+1|0,ne=0-a|0,R=1-a|0,F=~a;e:do if((ae|0)>1){J=(q|0)>1,W=1,o=s+(t<<1)|0,l=d+(t<<1)|0,t=0;t:for(;;){if(J)for(_=1,y=l,g=t;;){d=B[o>>0]|0,f=B[o+1>>0]|0;do if(((d&248)+10+(d<<5&224)+(f>>>3&28)+(f<<3&248)|0)>(ie|0)){if(t=E[y+(ne<<1)>>1]|0,t<<16>>16>0){E[y>>1]=t,t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(s=E[y+(R<<1)>>1]|0,d=s<<16>>16,t=E[y+(F<<1)>>1]|0,f=t<<16>>16,l=t<<16>>16>0,s<<16>>16<=0){if(l){E[y>>1]=t,t=f*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+_,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(_|0)&&(e[l>>2]=_),e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(t=E[y+-2>>1]|0,t<<16>>16>0){if(E[y>>1]=t,t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(_|0)){t=g;break}e[t>>2]=_,t=g;break}else{if(t=g+1|0,(g|0)>32767)break t;E[y>>1]=t,e[r+1179664+(g<<2)>>2]=t<<16>>16,g=g*7|0,e[r+1310736+(g<<2)>>2]=1,e[r+1310736+(g+1<<2)>>2]=_,e[r+1310736+(g+2<<2)>>2]=W,e[r+1310736+(g+3<<2)>>2]=_,e[r+1310736+(g+4<<2)>>2]=_,e[r+1310736+(g+5<<2)>>2]=W,e[r+1310736+(g+6<<2)>>2]=W;break}}if(l){if(t=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+(f+-1<<2)>>2]|0,(t|0)>(d|0))if(E[y>>1]=d,(g|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=d),l=l+1|0,(l|0)>=(g|0)){t=d;break}else s=s+4|0;else t=d;else if(E[y>>1]=t,(t|0)<(d|0)&(g|0)>0)for(l=0,s=h;(e[s>>2]|0)==(d|0)&&(e[s>>2]=t),l=l+1|0,!((l|0)>=(g|0));)s=s+4|0;t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(l=E[y+-2>>1]|0,l<<16>>16<=0){E[y>>1]=s,t=d*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+_,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(_|0)&&(e[l>>2]=_),e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(t=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(d|0))if(E[y>>1]=d,(g|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=d),l=l+1|0,(l|0)>=(g|0)){t=d;break}else s=s+4|0;else t=d;else if(E[y>>1]=t,(t|0)<(d|0)&(g|0)>0)for(l=0,s=h;(e[s>>2]|0)==(d|0)&&(e[s>>2]=t),l=l+1|0,!((l|0)>=(g|0));)s=s+4|0;t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+W,t=g}else E[y>>1]=0,t=g;while(!1);if(_=_+1|0,o=o+2|0,l=y+2|0,(_|0)>=(q|0))break;y=l,g=t}if(W=W+1|0,(W|0)>=(ae|0)){f=t,X=52;break e}else o=o+4|0,l=l+4|0}ft(3,3904,se),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(s=r+12|0,(f|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(f|0);)l=l+1|0,h=h+4|0;if(d=r+8|0,t=o+-1|0,e[d>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=a,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=c,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){s=0;do h=(e[r+1179664+(s<<2)>>2]|0)+-1|0,l=s*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),s=s+1|0;while((s|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,X=r+655376+(c<<3)|0,A[X>>3]=+A[X>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return C=U,t|0}function mn(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0;if(U=C,C=C+16|0,se=U,d=e[r>>2]|0,ae=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(ae,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ie=o*3|0,q=a+-1|0,(c|0)>0)for(t=0,o=d,h=d+(q<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(c|0));)o=o+(a<<1)|0,h=h+(a<<1)|0;h=r+1179664|0,t=a+1|0,ne=0-a|0,R=1-a|0,F=~a;e:do if((ae|0)>1){J=(q|0)>1,W=1,o=s+(t<<2)|0,l=d+(t<<1)|0,t=0;t:for(;;){if(J)for(_=1,y=l,g=t;;){do if(((B[o+1>>0]|0)+(B[o>>0]|0)+(B[o+2>>0]|0)|0)>(ie|0)){if(t=E[y+(ne<<1)>>1]|0,t<<16>>16>0){E[y>>1]=t,t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(s=E[y+(R<<1)>>1]|0,d=s<<16>>16,t=E[y+(F<<1)>>1]|0,f=t<<16>>16,l=t<<16>>16>0,s<<16>>16<=0){if(l){E[y>>1]=t,t=f*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+_,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(_|0)&&(e[l>>2]=_),e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(t=E[y+-2>>1]|0,t<<16>>16>0){if(E[y>>1]=t,t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(_|0)){t=g;break}e[t>>2]=_,t=g;break}else{if(t=g+1|0,(g|0)>32767)break t;E[y>>1]=t,e[r+1179664+(g<<2)>>2]=t<<16>>16,g=g*7|0,e[r+1310736+(g<<2)>>2]=1,e[r+1310736+(g+1<<2)>>2]=_,e[r+1310736+(g+2<<2)>>2]=W,e[r+1310736+(g+3<<2)>>2]=_,e[r+1310736+(g+4<<2)>>2]=_,e[r+1310736+(g+5<<2)>>2]=W,e[r+1310736+(g+6<<2)>>2]=W;break}}if(l){if(t=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+(f+-1<<2)>>2]|0,(t|0)>(d|0))if(E[y>>1]=d,(g|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=d),l=l+1|0,(l|0)>=(g|0)){t=d;break}else s=s+4|0;else t=d;else if(E[y>>1]=t,(t|0)<(d|0)&(g|0)>0)for(l=0,s=h;(e[s>>2]|0)==(d|0)&&(e[s>>2]=t),l=l+1|0,!((l|0)>=(g|0));)s=s+4|0;t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(l=E[y+-2>>1]|0,l<<16>>16<=0){E[y>>1]=s,t=d*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+_,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(_|0)&&(e[l>>2]=_),e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(t=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(d|0))if(E[y>>1]=d,(g|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=d),l=l+1|0,(l|0)>=(g|0)){t=d;break}else s=s+4|0;else t=d;else if(E[y>>1]=t,(t|0)<(d|0)&(g|0)>0)for(l=0,s=h;(e[s>>2]|0)==(d|0)&&(e[s>>2]=t),l=l+1|0,!((l|0)>=(g|0));)s=s+4|0;t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+W,t=g}else E[y>>1]=0,t=g;while(!1);if(_=_+1|0,o=o+4|0,l=y+2|0,(_|0)>=(q|0))break;y=l,g=t}if(W=W+1|0,(W|0)>=(ae|0)){f=t,X=52;break e}else o=o+8|0,l=l+4|0}ft(3,3904,se),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(s=r+12|0,(f|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(f|0);)l=l+1|0,h=h+4|0;if(d=r+8|0,t=o+-1|0,e[d>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=a,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=c,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){s=0;do h=(e[r+1179664+(s<<2)>>2]|0)+-1|0,l=s*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),s=s+1|0;while((s|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,X=r+655376+(c<<3)|0,A[X>>3]=+A[X>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return C=U,t|0}function Sl(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0;if(U=C,C=C+16|0,se=U,d=e[r>>2]|0,ae=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(ae,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ie=o*3|0,q=a+-1|0,(c|0)>0)for(t=0,o=d,h=d+(q<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(c|0));)o=o+(a<<1)|0,h=h+(a<<1)|0;h=r+1179664|0,t=a+1|0,ne=0-a|0,R=1-a|0,F=~a;e:do if((ae|0)>1){J=(q|0)>1,W=1,o=s+(t<<1)|0,l=d+(t<<1)|0,t=0;t:for(;;){if(J)for(_=1,y=l,g=t;;){f=B[o>>0]|0;do if(((f&240)+24+(f<<4&240)+((B[o+1>>0]|0)&240)|0)>(ie|0)){if(t=E[y+(ne<<1)>>1]|0,t<<16>>16>0){E[y>>1]=t,t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(s=E[y+(R<<1)>>1]|0,d=s<<16>>16,t=E[y+(F<<1)>>1]|0,f=t<<16>>16,l=t<<16>>16>0,s<<16>>16<=0){if(l){E[y>>1]=t,t=f*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+_,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(_|0)&&(e[l>>2]=_),e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(t=E[y+-2>>1]|0,t<<16>>16>0){if(E[y>>1]=t,t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(_|0)){t=g;break}e[t>>2]=_,t=g;break}else{if(t=g+1|0,(g|0)>32767)break t;E[y>>1]=t,e[r+1179664+(g<<2)>>2]=t<<16>>16,g=g*7|0,e[r+1310736+(g<<2)>>2]=1,e[r+1310736+(g+1<<2)>>2]=_,e[r+1310736+(g+2<<2)>>2]=W,e[r+1310736+(g+3<<2)>>2]=_,e[r+1310736+(g+4<<2)>>2]=_,e[r+1310736+(g+5<<2)>>2]=W,e[r+1310736+(g+6<<2)>>2]=W;break}}if(l){if(t=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+(f+-1<<2)>>2]|0,(t|0)>(d|0))if(E[y>>1]=d,(g|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=d),l=l+1|0,(l|0)>=(g|0)){t=d;break}else s=s+4|0;else t=d;else if(E[y>>1]=t,(t|0)<(d|0)&(g|0)>0)for(l=0,s=h;(e[s>>2]|0)==(d|0)&&(e[s>>2]=t),l=l+1|0,!((l|0)>=(g|0));)s=s+4|0;t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(l=E[y+-2>>1]|0,l<<16>>16<=0){E[y>>1]=s,t=d*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+_,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(_|0)&&(e[l>>2]=_),e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(t=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(d|0))if(E[y>>1]=d,(g|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=d),l=l+1|0,(l|0)>=(g|0)){t=d;break}else s=s+4|0;else t=d;else if(E[y>>1]=t,(t|0)<(d|0)&(g|0)>0)for(l=0,s=h;(e[s>>2]|0)==(d|0)&&(e[s>>2]=t),l=l+1|0,!((l|0)>=(g|0));)s=s+4|0;t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+W,t=g}else E[y>>1]=0,t=g;while(!1);if(_=_+1|0,o=o+2|0,l=y+2|0,(_|0)>=(q|0))break;y=l,g=t}if(W=W+1|0,(W|0)>=(ae|0)){f=t,X=52;break e}else o=o+4|0,l=l+4|0}ft(3,3904,se),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(s=r+12|0,(f|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(f|0);)l=l+1|0,h=h+4|0;if(d=r+8|0,t=o+-1|0,e[d>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=a,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=c,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){s=0;do h=(e[r+1179664+(s<<2)>>2]|0)+-1|0,l=s*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),s=s+1|0;while((s|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,X=r+655376+(c<<3)|0,A[X>>3]=+A[X>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return C=U,t|0}function Qa(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0;if(U=C,C=C+16|0,se=U,d=e[r>>2]|0,ae=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(ae,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ie=o*3|0,q=a+-1|0,(c|0)>0)for(t=0,o=d,h=d+(q<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(c|0));)o=o+(a<<1)|0,h=h+(a<<1)|0;h=r+1179664|0,t=a+1|0,ne=0-a|0,R=1-a|0,F=~a;e:do if((ae|0)>1){J=(q|0)>1,W=1,o=s+(t<<1)|0,l=d+(t<<1)|0,t=0;t:for(;;){if(J)for(_=1,y=l,g=t;;){d=B[o>>0]|0,f=B[o+1>>0]|0;do if(((d&248)+12+(d<<5&224)+(f>>>3&24)+(f<<2&248)|0)>(ie|0)){if(t=E[y+(ne<<1)>>1]|0,t<<16>>16>0){E[y>>1]=t,t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(s=E[y+(R<<1)>>1]|0,d=s<<16>>16,t=E[y+(F<<1)>>1]|0,f=t<<16>>16,l=t<<16>>16>0,s<<16>>16<=0){if(l){E[y>>1]=t,t=f*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+_,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(_|0)&&(e[l>>2]=_),e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(t=E[y+-2>>1]|0,t<<16>>16>0){if(E[y>>1]=t,t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(_|0)){t=g;break}e[t>>2]=_,t=g;break}else{if(t=g+1|0,(g|0)>32767)break t;E[y>>1]=t,e[r+1179664+(g<<2)>>2]=t<<16>>16,g=g*7|0,e[r+1310736+(g<<2)>>2]=1,e[r+1310736+(g+1<<2)>>2]=_,e[r+1310736+(g+2<<2)>>2]=W,e[r+1310736+(g+3<<2)>>2]=_,e[r+1310736+(g+4<<2)>>2]=_,e[r+1310736+(g+5<<2)>>2]=W,e[r+1310736+(g+6<<2)>>2]=W;break}}if(l){if(t=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+(f+-1<<2)>>2]|0,(t|0)>(d|0))if(E[y>>1]=d,(g|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=d),l=l+1|0,(l|0)>=(g|0)){t=d;break}else s=s+4|0;else t=d;else if(E[y>>1]=t,(t|0)<(d|0)&(g|0)>0)for(l=0,s=h;(e[s>>2]|0)==(d|0)&&(e[s>>2]=t),l=l+1|0,!((l|0)>=(g|0));)s=s+4|0;t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(l=E[y+-2>>1]|0,l<<16>>16<=0){E[y>>1]=s,t=d*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+_,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(_|0)&&(e[l>>2]=_),e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(t=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(d|0))if(E[y>>1]=d,(g|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=d),l=l+1|0,(l|0)>=(g|0)){t=d;break}else s=s+4|0;else t=d;else if(E[y>>1]=t,(t|0)<(d|0)&(g|0)>0)for(l=0,s=h;(e[s>>2]|0)==(d|0)&&(e[s>>2]=t),l=l+1|0,!((l|0)>=(g|0));)s=s+4|0;t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+W,t=g}else E[y>>1]=0,t=g;while(!1);if(_=_+1|0,o=o+2|0,l=y+2|0,(_|0)>=(q|0))break;y=l,g=t}if(W=W+1|0,(W|0)>=(ae|0)){f=t,X=52;break e}else o=o+4|0,l=l+4|0}ft(3,3904,se),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(s=r+12|0,(f|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(f|0);)l=l+1|0,h=h+4|0;if(d=r+8|0,t=o+-1|0,e[d>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=a,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=c,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){s=0;do h=(e[r+1179664+(s<<2)>>2]|0)+-1|0,l=s*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),s=s+1|0;while((s|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,X=r+655376+(c<<3)|0,A[X>>3]=+A[X>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return C=U,t|0}function y0(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0;if(U=C,C=C+16|0,se=U,d=e[r>>2]|0,ae=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(ae,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ie=o*3|0,q=a+-1|0,(c|0)>0)for(t=0,o=d,h=d+(q<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(c|0));)o=o+(a<<1)|0,h=h+(a<<1)|0;h=r+1179664|0,t=a+1|0,ne=0-a|0,R=1-a|0,F=~a;e:do if((ae|0)>1){J=(q|0)>1,W=1,o=s+(t<<2)|0,l=d+(t<<1)|0,t=0;t:for(;;){if(J)for(_=1,y=l,g=t;;){do if(((B[o+2>>0]|0)+(B[o+1>>0]|0)+(B[o+3>>0]|0)|0)>(ie|0)){if(t=E[y+(ne<<1)>>1]|0,t<<16>>16>0){E[y>>1]=t,t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(s=E[y+(R<<1)>>1]|0,d=s<<16>>16,t=E[y+(F<<1)>>1]|0,f=t<<16>>16,l=t<<16>>16>0,s<<16>>16<=0){if(l){E[y>>1]=t,t=f*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+_,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(_|0)&&(e[l>>2]=_),e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(t=E[y+-2>>1]|0,t<<16>>16>0){if(E[y>>1]=t,t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(_|0)){t=g;break}e[t>>2]=_,t=g;break}else{if(t=g+1|0,(g|0)>32767)break t;E[y>>1]=t,e[r+1179664+(g<<2)>>2]=t<<16>>16,g=g*7|0,e[r+1310736+(g<<2)>>2]=1,e[r+1310736+(g+1<<2)>>2]=_,e[r+1310736+(g+2<<2)>>2]=W,e[r+1310736+(g+3<<2)>>2]=_,e[r+1310736+(g+4<<2)>>2]=_,e[r+1310736+(g+5<<2)>>2]=W,e[r+1310736+(g+6<<2)>>2]=W;break}}if(l){if(t=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+(f+-1<<2)>>2]|0,(t|0)>(d|0))if(E[y>>1]=d,(g|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=d),l=l+1|0,(l|0)>=(g|0)){t=d;break}else s=s+4|0;else t=d;else if(E[y>>1]=t,(t|0)<(d|0)&(g|0)>0)for(l=0,s=h;(e[s>>2]|0)==(d|0)&&(e[s>>2]=t),l=l+1|0,!((l|0)>=(g|0));)s=s+4|0;t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,f=r+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+W,e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(l=E[y+-2>>1]|0,l<<16>>16<=0){E[y>>1]=s,t=d*7|0,l=r+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+_,l=r+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(_|0)&&(e[l>>2]=_),e[r+1310736+(t+-1<<2)>>2]=W,t=g;break}if(t=e[r+1179664+(d+-1<<2)>>2]|0,d=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(d|0))if(E[y>>1]=d,(g|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=d),l=l+1|0,(l|0)>=(g|0)){t=d;break}else s=s+4|0;else t=d;else if(E[y>>1]=t,(t|0)<(d|0)&(g|0)>0)for(l=0,s=h;(e[s>>2]|0)==(d|0)&&(e[s>>2]=t),l=l+1|0,!((l|0)>=(g|0));)s=s+4|0;t=(t<<16>>16)*7|0,f=r+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=r+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+_,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+W,t=g}else E[y>>1]=0,t=g;while(!1);if(_=_+1|0,o=o+4|0,l=y+2|0,(_|0)>=(q|0))break;y=l,g=t}if(W=W+1|0,(W|0)>=(ae|0)){f=t,X=52;break e}else o=o+8|0,l=l+4|0}ft(3,3904,se),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(s=r+12|0,(f|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(f|0);)l=l+1|0,h=h+4|0;if(d=r+8|0,t=o+-1|0,e[d>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=a,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=c,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){s=0;do h=(e[r+1179664+(s<<2)>>2]|0)+-1|0,l=s*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),s=s+1|0;while((s|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,X=r+655376+(c<<3)|0,A[X>>3]=+A[X>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return C=U,t|0}function ar(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0;if(U=C,C=C+16|0,se=U,d=e[r>>2]|0,ae=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(ae,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ie=a+-1|0,(c|0)>0)for(t=0,h=d,l=d+(ie<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(c|0));)h=h+(a<<1)|0,l=l+(a<<1)|0;l=r+1179664|0,t=a+1|0,J=0-a|0,F=1-a|0,ne=~a;e:do if((ae|0)>1){W=(ie|0)>1,q=1,h=s+t|0,s=d+(t<<1)|0,t=0;t:for(;;){if(W)for(R=1,_=s,y=t;;){do if((B[h>>0]|0|0)>(o|0)){if(t=E[_+(J<<1)>>1]|0,t<<16>>16>0){E[_>>1]=t,t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(t+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(d=E[_+(F<<1)>>1]|0,f=d<<16>>16,t=E[_+(ne<<1)>>1]|0,g=t<<16>>16,s=t<<16>>16>0,d<<16>>16<=0){if(s){E[_>>1]=t,t=g*7|0,s=r+1310736+(t+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(t+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+R,s=r+1310736+(t+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+q,s=r+1310736+(t+-3<<2)|0,(e[s>>2]|0)<(R|0)&&(e[s>>2]=R),e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(t=E[_+-2>>1]|0,t<<16>>16>0){if(E[_>>1]=t,t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(t+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(R|0)){t=y;break}e[t>>2]=R,t=y;break}else{if(t=y+1|0,(y|0)>32767)break t;E[_>>1]=t,e[r+1179664+(y<<2)>>2]=t<<16>>16,y=y*7|0,e[r+1310736+(y<<2)>>2]=1,e[r+1310736+(y+1<<2)>>2]=R,e[r+1310736+(y+2<<2)>>2]=q,e[r+1310736+(y+3<<2)>>2]=R,e[r+1310736+(y+4<<2)>>2]=R,e[r+1310736+(y+5<<2)>>2]=q,e[r+1310736+(y+6<<2)>>2]=q;break}}if(s){if(t=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+(g+-1<<2)>>2]|0,(t|0)>(f|0))if(E[_>>1]=f,(y|0)>0)for(s=0,d=l;;)if((e[d>>2]|0)==(t|0)&&(e[d>>2]=f),s=s+1|0,(s|0)>=(y|0)){t=f;break}else d=d+4|0;else t=f;else if(E[_>>1]=t,(t|0)<(f|0)&(y|0)>0)for(s=0,d=l;(e[d>>2]|0)==(f|0)&&(e[d>>2]=t),s=s+1|0,!((s|0)>=(y|0));)d=d+4|0;t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(t+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(t=E[_+-2>>1]|0,t<<16>>16<=0){E[_>>1]=d,t=f*7|0,s=r+1310736+(t+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(t+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+R,s=r+1310736+(t+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+q,s=r+1310736+(t+-4<<2)|0,(e[s>>2]|0)>(R|0)&&(e[s>>2]=R),e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(f=e[r+1179664+(f+-1<<2)>>2]|0,t=e[r+1179664+((t<<16>>16)+-1<<2)>>2]|0,(f|0)>(t|0)){if(E[_>>1]=t,(y|0)>0)for(s=0,d=l;(e[d>>2]|0)==(f|0)&&(e[d>>2]=t),s=s+1|0,!((s|0)>=(y|0));)d=d+4|0}else if(E[_>>1]=f,(f|0)<(t|0)&(y|0)>0)for(s=0,d=l;;)if((e[d>>2]|0)==(t|0)&&(e[d>>2]=f),s=s+1|0,(s|0)>=(y|0)){t=f;break}else d=d+4|0;else t=f;t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+q,t=y}else E[_>>1]=0,t=y;while(!1);if(R=R+1|0,h=h+1|0,s=_+2|0,(R|0)>=(ie|0))break;_=s,y=t}if(q=q+1|0,(q|0)>=(ae|0)){g=t,X=52;break e}else h=h+2|0,s=s+4|0}ft(3,3904,se),t=-1}else g=0,X=52;while(!1);if((X|0)==52){if(d=r+12|0,(g|0)<1)h=1;else for(s=1,h=1;t=e[l>>2]|0,(t|0)==(s|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(s|0)<(g|0);)s=s+1|0,l=l+4|0;if(f=r+8|0,t=h+-1|0,e[f>>2]=t,t){if(gt(d|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=a,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=c,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[f>>2]|0))}if((g|0)>0){d=0;do l=(e[r+1179664+(d<<2)>>2]|0)+-1|0,s=d*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(s<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(s+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(s+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(s+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(s+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(s+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(s+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),d=d+1|0;while((d|0)<(g|0))}if((e[f>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,X=r+655376+(c<<3)|0,A[X>>3]=+A[X>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[f>>2]|0));t=0}else t=0}else t=0}return C=U,t|0}function Ha(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0;if(U=C,C=C+16|0,se=U,d=e[r>>2]|0,ae=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(ae,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ie=a+-1|0,(c|0)>0)for(t=0,h=d,l=d+(ie<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(c|0));)h=h+(a<<1)|0,l=l+(a<<1)|0;l=r+1179664|0,t=a+1|0,J=0-a|0,F=1-a|0,ne=~a;e:do if((ae|0)>1){W=(ie|0)>1,q=1,h=s+(t<<1)|0,s=d+(t<<1)|0,t=0;t:for(;;){if(W)for(R=1,_=s,y=t;;){do if((B[h+1>>0]|0|0)>(o|0)){if(t=E[_+(J<<1)>>1]|0,t<<16>>16>0){E[_>>1]=t,t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(t+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(d=E[_+(F<<1)>>1]|0,f=d<<16>>16,t=E[_+(ne<<1)>>1]|0,g=t<<16>>16,s=t<<16>>16>0,d<<16>>16<=0){if(s){E[_>>1]=t,t=g*7|0,s=r+1310736+(t+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(t+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+R,s=r+1310736+(t+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+q,s=r+1310736+(t+-3<<2)|0,(e[s>>2]|0)<(R|0)&&(e[s>>2]=R),e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(t=E[_+-2>>1]|0,t<<16>>16>0){if(E[_>>1]=t,t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(t+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(R|0)){t=y;break}e[t>>2]=R,t=y;break}else{if(t=y+1|0,(y|0)>32767)break t;E[_>>1]=t,e[r+1179664+(y<<2)>>2]=t<<16>>16,y=y*7|0,e[r+1310736+(y<<2)>>2]=1,e[r+1310736+(y+1<<2)>>2]=R,e[r+1310736+(y+2<<2)>>2]=q,e[r+1310736+(y+3<<2)>>2]=R,e[r+1310736+(y+4<<2)>>2]=R,e[r+1310736+(y+5<<2)>>2]=q,e[r+1310736+(y+6<<2)>>2]=q;break}}if(s){if(t=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+(g+-1<<2)>>2]|0,(t|0)>(f|0))if(E[_>>1]=f,(y|0)>0)for(s=0,d=l;;)if((e[d>>2]|0)==(t|0)&&(e[d>>2]=f),s=s+1|0,(s|0)>=(y|0)){t=f;break}else d=d+4|0;else t=f;else if(E[_>>1]=t,(t|0)<(f|0)&(y|0)>0)for(s=0,d=l;(e[d>>2]|0)==(f|0)&&(e[d>>2]=t),s=s+1|0,!((s|0)>=(y|0));)d=d+4|0;t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(t+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(s=E[_+-2>>1]|0,s<<16>>16<=0){E[_>>1]=d,t=f*7|0,s=r+1310736+(t+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(t+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+R,s=r+1310736+(t+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+q,s=r+1310736+(t+-4<<2)|0,(e[s>>2]|0)>(R|0)&&(e[s>>2]=R),e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(t=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+((s<<16>>16)+-1<<2)>>2]|0,(t|0)>(f|0))if(E[_>>1]=f,(y|0)>0)for(s=0,d=l;;)if((e[d>>2]|0)==(t|0)&&(e[d>>2]=f),s=s+1|0,(s|0)>=(y|0)){t=f;break}else d=d+4|0;else t=f;else if(E[_>>1]=t,(t|0)<(f|0)&(y|0)>0)for(s=0,d=l;(e[d>>2]|0)==(f|0)&&(e[d>>2]=t),s=s+1|0,!((s|0)>=(y|0));)d=d+4|0;t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+q,t=y}else E[_>>1]=0,t=y;while(!1);if(R=R+1|0,h=h+2|0,s=_+2|0,(R|0)>=(ie|0))break;_=s,y=t}if(q=q+1|0,(q|0)>=(ae|0)){g=t,X=52;break e}else h=h+4|0,s=s+4|0}ft(3,3904,se),t=-1}else g=0,X=52;while(!1);if((X|0)==52){if(d=r+12|0,(g|0)<1)h=1;else for(s=1,h=1;t=e[l>>2]|0,(t|0)==(s|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(s|0)<(g|0);)s=s+1|0,l=l+4|0;if(f=r+8|0,t=h+-1|0,e[f>>2]=t,t){if(gt(d|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=a,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=c,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[f>>2]|0))}if((g|0)>0){d=0;do l=(e[r+1179664+(d<<2)>>2]|0)+-1|0,s=d*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(s<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(s+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(s+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(s+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(s+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(s+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(s+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),d=d+1|0;while((d|0)<(g|0))}if((e[f>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,X=r+655376+(c<<3)|0,A[X>>3]=+A[X>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[f>>2]|0));t=0}else t=0}else t=0}return C=U,t|0}function zt(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0;if(U=C,C=C+16|0,se=U,d=e[r>>2]|0,ae=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(ae,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ie=a+-1|0,(c|0)>0)for(t=0,h=d,l=d+(ie<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(c|0));)h=h+(a<<1)|0,l=l+(a<<1)|0;l=r+1179664|0,t=a+1|0,J=0-a|0,F=1-a|0,ne=~a;e:do if((ae|0)>1){W=(ie|0)>1,q=1,h=s+(t<<1)|0,s=d+(t<<1)|0,t=0;t:for(;;){if(W)for(R=1,_=s,y=t;;){do if((B[h>>0]|0|0)>(o|0)){if(t=E[_+(J<<1)>>1]|0,t<<16>>16>0){E[_>>1]=t,t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(t+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(d=E[_+(F<<1)>>1]|0,f=d<<16>>16,t=E[_+(ne<<1)>>1]|0,g=t<<16>>16,s=t<<16>>16>0,d<<16>>16<=0){if(s){E[_>>1]=t,t=g*7|0,s=r+1310736+(t+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(t+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+R,s=r+1310736+(t+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+q,s=r+1310736+(t+-3<<2)|0,(e[s>>2]|0)<(R|0)&&(e[s>>2]=R),e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(t=E[_+-2>>1]|0,t<<16>>16>0){if(E[_>>1]=t,t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(t+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(R|0)){t=y;break}e[t>>2]=R,t=y;break}else{if(t=y+1|0,(y|0)>32767)break t;E[_>>1]=t,e[r+1179664+(y<<2)>>2]=t<<16>>16,y=y*7|0,e[r+1310736+(y<<2)>>2]=1,e[r+1310736+(y+1<<2)>>2]=R,e[r+1310736+(y+2<<2)>>2]=q,e[r+1310736+(y+3<<2)>>2]=R,e[r+1310736+(y+4<<2)>>2]=R,e[r+1310736+(y+5<<2)>>2]=q,e[r+1310736+(y+6<<2)>>2]=q;break}}if(s){if(t=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+(g+-1<<2)>>2]|0,(t|0)>(f|0))if(E[_>>1]=f,(y|0)>0)for(s=0,d=l;;)if((e[d>>2]|0)==(t|0)&&(e[d>>2]=f),s=s+1|0,(s|0)>=(y|0)){t=f;break}else d=d+4|0;else t=f;else if(E[_>>1]=t,(t|0)<(f|0)&(y|0)>0)for(s=0,d=l;(e[d>>2]|0)==(f|0)&&(e[d>>2]=t),s=s+1|0,!((s|0)>=(y|0));)d=d+4|0;t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(t+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(t=E[_+-2>>1]|0,t<<16>>16<=0){E[_>>1]=d,t=f*7|0,s=r+1310736+(t+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(t+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+R,s=r+1310736+(t+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+q,s=r+1310736+(t+-4<<2)|0,(e[s>>2]|0)>(R|0)&&(e[s>>2]=R),e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(f=e[r+1179664+(f+-1<<2)>>2]|0,t=e[r+1179664+((t<<16>>16)+-1<<2)>>2]|0,(f|0)>(t|0)){if(E[_>>1]=t,(y|0)>0)for(s=0,d=l;(e[d>>2]|0)==(f|0)&&(e[d>>2]=t),s=s+1|0,!((s|0)>=(y|0));)d=d+4|0}else if(E[_>>1]=f,(f|0)<(t|0)&(y|0)>0)for(s=0,d=l;;)if((e[d>>2]|0)==(t|0)&&(e[d>>2]=f),s=s+1|0,(s|0)>=(y|0)){t=f;break}else d=d+4|0;else t=f;t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+q,t=y}else E[_>>1]=0,t=y;while(!1);if(R=R+1|0,h=h+2|0,s=_+2|0,(R|0)>=(ie|0))break;_=s,y=t}if(q=q+1|0,(q|0)>=(ae|0)){g=t,X=52;break e}else h=h+4|0,s=s+4|0}ft(3,3904,se),t=-1}else g=0,X=52;while(!1);if((X|0)==52){if(d=r+12|0,(g|0)<1)h=1;else for(s=1,h=1;t=e[l>>2]|0,(t|0)==(s|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(s|0)<(g|0);)s=s+1|0,l=l+4|0;if(f=r+8|0,t=h+-1|0,e[f>>2]=t,t){if(gt(d|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=a,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=c,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[f>>2]|0))}if((g|0)>0){d=0;do l=(e[r+1179664+(d<<2)>>2]|0)+-1|0,s=d*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(s<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(s+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(s+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(s+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(s+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(s+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(s+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),d=d+1|0;while((d|0)<(g|0))}if((e[f>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,X=r+655376+(c<<3)|0,A[X>>3]=+A[X>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[f>>2]|0));t=0}else t=0}else t=0}return C=U,t|0}function $i(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0;if(U=C,C=C+16|0,se=U,d=e[r>>2]|0,ae=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(ae,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ie=a+-1|0,(c|0)>0)for(t=0,h=d,l=d+(ie<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(c|0));)h=h+(a<<1)|0,l=l+(a<<1)|0;l=r+1179664|0,t=a+1|0,J=0-a|0,F=1-a|0,ne=~a;e:do if((ae|0)>1){W=(ie|0)>1,q=1,h=s+t|0,s=d+(t<<1)|0,d=o+t|0,t=0;t:for(;;){if(W)for(R=1,_=h,y=t;;){do if((B[_>>0]|0)>(B[d>>0]|0)){if(t=E[s+(J<<1)>>1]|0,t<<16>>16>0){E[s>>1]=t,t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(t+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(o=E[s+(F<<1)>>1]|0,f=o<<16>>16,t=E[s+(ne<<1)>>1]|0,g=t<<16>>16,h=t<<16>>16>0,o<<16>>16<=0){if(h){E[s>>1]=t,t=g*7|0,h=r+1310736+(t+-7<<2)|0,e[h>>2]=(e[h>>2]|0)+1,h=r+1310736+(t+-6<<2)|0,e[h>>2]=(e[h>>2]|0)+R,h=r+1310736+(t+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+q,h=r+1310736+(t+-3<<2)|0,(e[h>>2]|0)<(R|0)&&(e[h>>2]=R),e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(t=E[s+-2>>1]|0,t<<16>>16>0){if(E[s>>1]=t,t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(t+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,t=r+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(R|0)){t=y;break}e[t>>2]=R,t=y;break}else{if(t=y+1|0,(y|0)>32767)break t;E[s>>1]=t,e[r+1179664+(y<<2)>>2]=t<<16>>16,y=y*7|0,e[r+1310736+(y<<2)>>2]=1,e[r+1310736+(y+1<<2)>>2]=R,e[r+1310736+(y+2<<2)>>2]=q,e[r+1310736+(y+3<<2)>>2]=R,e[r+1310736+(y+4<<2)>>2]=R,e[r+1310736+(y+5<<2)>>2]=q,e[r+1310736+(y+6<<2)>>2]=q;break}}if(h){if(t=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+(g+-1<<2)>>2]|0,(t|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(h=0,o=l;;)if((e[o>>2]|0)==(t|0)&&(e[o>>2]=f),h=h+1|0,(h|0)>=(y|0)){t=f;break}else o=o+4|0;else t=f;else if(E[s>>1]=t,(t|0)<(f|0)&(y|0)>0)for(h=0,o=l;(e[o>>2]|0)==(f|0)&&(e[o>>2]=t),h=h+1|0,!((h|0)>=(y|0));)o=o+4|0;t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(t+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(t=E[s+-2>>1]|0,t<<16>>16<=0){E[s>>1]=o,t=f*7|0,h=r+1310736+(t+-7<<2)|0,e[h>>2]=(e[h>>2]|0)+1,h=r+1310736+(t+-6<<2)|0,e[h>>2]=(e[h>>2]|0)+R,h=r+1310736+(t+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+q,h=r+1310736+(t+-4<<2)|0,(e[h>>2]|0)>(R|0)&&(e[h>>2]=R),e[r+1310736+(t+-1<<2)>>2]=q,t=y;break}if(f=e[r+1179664+(f+-1<<2)>>2]|0,t=e[r+1179664+((t<<16>>16)+-1<<2)>>2]|0,(f|0)>(t|0)){if(E[s>>1]=t,(y|0)>0)for(h=0,o=l;(e[o>>2]|0)==(f|0)&&(e[o>>2]=t),h=h+1|0,!((h|0)>=(y|0));)o=o+4|0}else if(E[s>>1]=f,(f|0)<(t|0)&(y|0)>0)for(h=0,o=l;;)if((e[o>>2]|0)==(t|0)&&(e[o>>2]=f),h=h+1|0,(h|0)>=(y|0)){t=f;break}else o=o+4|0;else t=f;t=(t<<16>>16)*7|0,g=r+1310736+(t+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(t+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,t=r+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+q,t=y}else E[s>>1]=0,t=y;while(!1);if(R=R+1|0,h=_+1|0,d=d+1|0,s=s+2|0,(R|0)>=(ie|0))break;_=h,y=t}if(q=q+1|0,(q|0)>=(ae|0)){f=t,X=52;break e}else h=h+2|0,s=s+4|0,d=d+2|0}ft(3,3904,se),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(d=r+12|0,(f|0)<1)h=1;else for(s=1,h=1;t=e[l>>2]|0,(t|0)==(s|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(s|0)<(f|0);)s=s+1|0,l=l+4|0;if(o=r+8|0,t=h+-1|0,e[o>>2]=t,t){if(gt(d|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=a,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=c,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[o>>2]|0))}if((f|0)>0){d=0;do l=(e[r+1179664+(d<<2)>>2]|0)+-1|0,s=d*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(s<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(s+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(s+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(s+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(s+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(s+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(s+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),d=d+1|0;while((d|0)<(f|0))}if((e[o>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,X=r+655376+(c<<3)|0,A[X>>3]=+A[X>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[o>>2]|0));t=0}else t=0}else t=0}return C=U,t|0}function Tl(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0;if(We=C,C=C+16|0,se=We,U=(a|0)/2|0,Ae=(c|0)/2|0,d=e[r>>2]|0,ae=Ae+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ae,U)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(U|0));)h=h+2|0,l=l+2|0;if(q=o*3|0,ie=U+-1|0,(c|0)>1)for(t=0,o=d,h=d+(ie<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(Ae|0));)o=o+(U<<1)|0,h=h+(U<<1)|0;h=r+1179664|0,o=U+1|0,ne=0-U|0,R=1-U|0,F=~U,_=(a*3|0)+12|0;e:do if((ae|0)>1){J=(ie|0)>1,t=(e[r+4>>2]|0)+o|0,W=1,l=s+((a*6|0)+6)|0,c=d+(o<<1)|0,o=0;t:for(;;){if(J)for(y=1,g=l,f=o;;){do if(((B[g+1>>0]|0)+(B[g>>0]|0)+(B[g+2>>0]|0)|0)>(q|0))E[c>>1]=0,M[t>>0]=0,o=f;else{if(M[t>>0]=-1,o=E[c+(ne<<1)>>1]|0,o<<16>>16>0){E[c>>1]=o,o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(s=E[c+(R<<1)>>1]|0,a=s<<16>>16,o=E[c+(F<<1)>>1]|0,d=o<<16>>16,l=o<<16>>16>0,s<<16>>16<=0){if(l){E[c>>1]=o,o=d*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+y,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(o+-3<<2)|0,(e[l>>2]|0)<(y|0)&&(e[l>>2]=y),e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(o=E[c+-2>>1]|0,o<<16>>16>0){if(E[c>>1]=o,o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,o=r+1310736+(o+-3<<2)|0,(e[o>>2]|0)>=(y|0)){o=f;break}e[o>>2]=y,o=f;break}else{if(o=f+1|0,(f|0)>32767)break t;E[c>>1]=o,e[r+1179664+(f<<2)>>2]=o<<16>>16,f=f*7|0,e[r+1310736+(f<<2)>>2]=1,e[r+1310736+(f+1<<2)>>2]=y,e[r+1310736+(f+2<<2)>>2]=W,e[r+1310736+(f+3<<2)>>2]=y,e[r+1310736+(f+4<<2)>>2]=y,e[r+1310736+(f+5<<2)>>2]=W,e[r+1310736+(f+6<<2)>>2]=W;break}}if(l){if(o=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+(d+-1<<2)>>2]|0,(o|0)>(a|0))if(E[c>>1]=a,(f|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(o|0)&&(e[s>>2]=a),l=l+1|0,(l|0)>=(f|0)){o=a;break}else s=s+4|0;else o=a;else if(E[c>>1]=o,(o|0)<(a|0)&(f|0)>0)for(l=0,s=h;(e[s>>2]|0)==(a|0)&&(e[s>>2]=o),l=l+1|0,!((l|0)>=(f|0));)s=s+4|0;o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(l=E[c+-2>>1]|0,l<<16>>16<=0){E[c>>1]=s,o=a*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+y,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(o+-4<<2)|0,(e[l>>2]|0)>(y|0)&&(e[l>>2]=y),e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(o=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(o|0)>(a|0))if(E[c>>1]=a,(f|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(o|0)&&(e[s>>2]=a),l=l+1|0,(l|0)>=(f|0)){o=a;break}else s=s+4|0;else o=a;else if(E[c>>1]=o,(o|0)<(a|0)&(f|0)>0)for(l=0,s=h;(e[s>>2]|0)==(a|0)&&(e[s>>2]=o),l=l+1|0,!((l|0)>=(f|0));)s=s+4|0;o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,o=r+1310736+(o+-5<<2)|0,e[o>>2]=(e[o>>2]|0)+W,o=f}while(!1);if(y=y+1|0,l=g+6|0,c=c+2|0,t=t+1|0,(y|0)>=(ie|0))break;g=l,f=o}if(W=W+1|0,(W|0)>=(ae|0)){a=o,X=52;break e}else t=t+2|0,l=l+_|0,c=c+4|0}ft(3,3904,se),t=-1}else a=0,X=52;while(!1);if((X|0)==52){if(c=r+12|0,(a|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(a|0);)l=l+1|0,h=h+4|0;if(s=r+8|0,t=o+-1|0,e[s>>2]=t,t){if(gt(c|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=U,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=Ae,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((a|0)>0){c=0;do h=(e[r+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[s>>2]|0)>0){t=0;do U=r+12+(t<<2)|0,Ae=t<<1,X=r+655376+(Ae<<3)|0,A[X>>3]=+A[X>>3]/+(e[U>>2]|0),Ae=r+655376+((Ae|1)<<3)|0,A[Ae>>3]=+A[Ae>>3]/+(e[U>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return C=We,t|0}function Lc(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0;if(We=C,C=C+16|0,se=We,U=(a|0)/2|0,Ae=(c|0)/2|0,d=e[r>>2]|0,ae=Ae+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ae,U)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(U|0));)h=h+2|0,l=l+2|0;if(q=o*3|0,ie=U+-1|0,(c|0)>1)for(t=0,o=d,h=d+(ie<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(Ae|0));)o=o+(U<<1)|0,h=h+(U<<1)|0;h=r+1179664|0,o=U+1|0,ne=0-U|0,R=1-U|0,F=~U,_=(a<<1)+8|0;e:do if((ae|0)>1){J=(ie|0)>1,t=(e[r+4>>2]|0)+o|0,W=1,l=s+((a<<2)+4)|0,c=d+(o<<1)|0,o=0;t:for(;;){if(J)for(y=1,g=l,f=o;;){a=B[g>>0]|0,d=B[g+1>>0]|0;do if(((a&248)+10+(a<<5&224)+(d>>>3&28)+(d<<3&248)|0)>(q|0))E[c>>1]=0,M[t>>0]=0,o=f;else{if(M[t>>0]=-1,o=E[c+(ne<<1)>>1]|0,o<<16>>16>0){E[c>>1]=o,o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(s=E[c+(R<<1)>>1]|0,a=s<<16>>16,o=E[c+(F<<1)>>1]|0,d=o<<16>>16,l=o<<16>>16>0,s<<16>>16<=0){if(l){E[c>>1]=o,o=d*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+y,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(o+-3<<2)|0,(e[l>>2]|0)<(y|0)&&(e[l>>2]=y),e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(o=E[c+-2>>1]|0,o<<16>>16>0){if(E[c>>1]=o,o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,o=r+1310736+(o+-3<<2)|0,(e[o>>2]|0)>=(y|0)){o=f;break}e[o>>2]=y,o=f;break}else{if(o=f+1|0,(f|0)>32767)break t;E[c>>1]=o,e[r+1179664+(f<<2)>>2]=o<<16>>16,f=f*7|0,e[r+1310736+(f<<2)>>2]=1,e[r+1310736+(f+1<<2)>>2]=y,e[r+1310736+(f+2<<2)>>2]=W,e[r+1310736+(f+3<<2)>>2]=y,e[r+1310736+(f+4<<2)>>2]=y,e[r+1310736+(f+5<<2)>>2]=W,e[r+1310736+(f+6<<2)>>2]=W;break}}if(l){if(o=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+(d+-1<<2)>>2]|0,(o|0)>(a|0))if(E[c>>1]=a,(f|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(o|0)&&(e[s>>2]=a),l=l+1|0,(l|0)>=(f|0)){o=a;break}else s=s+4|0;else o=a;else if(E[c>>1]=o,(o|0)<(a|0)&(f|0)>0)for(l=0,s=h;(e[s>>2]|0)==(a|0)&&(e[s>>2]=o),l=l+1|0,!((l|0)>=(f|0));)s=s+4|0;o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(l=E[c+-2>>1]|0,l<<16>>16<=0){E[c>>1]=s,o=a*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+y,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(o+-4<<2)|0,(e[l>>2]|0)>(y|0)&&(e[l>>2]=y),e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(o=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(o|0)>(a|0))if(E[c>>1]=a,(f|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(o|0)&&(e[s>>2]=a),l=l+1|0,(l|0)>=(f|0)){o=a;break}else s=s+4|0;else o=a;else if(E[c>>1]=o,(o|0)<(a|0)&(f|0)>0)for(l=0,s=h;(e[s>>2]|0)==(a|0)&&(e[s>>2]=o),l=l+1|0,!((l|0)>=(f|0));)s=s+4|0;o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,o=r+1310736+(o+-5<<2)|0,e[o>>2]=(e[o>>2]|0)+W,o=f}while(!1);if(y=y+1|0,l=g+4|0,c=c+2|0,t=t+1|0,(y|0)>=(ie|0))break;g=l,f=o}if(W=W+1|0,(W|0)>=(ae|0)){a=o,X=52;break e}else t=t+2|0,l=l+_|0,c=c+4|0}ft(3,3904,se),t=-1}else a=0,X=52;while(!1);if((X|0)==52){if(c=r+12|0,(a|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(a|0);)l=l+1|0,h=h+4|0;if(s=r+8|0,t=o+-1|0,e[s>>2]=t,t){if(gt(c|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=U,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=Ae,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((a|0)>0){c=0;do h=(e[r+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[s>>2]|0)>0){t=0;do U=r+12+(t<<2)|0,Ae=t<<1,X=r+655376+(Ae<<3)|0,A[X>>3]=+A[X>>3]/+(e[U>>2]|0),Ae=r+655376+((Ae|1)<<3)|0,A[Ae>>3]=+A[Ae>>3]/+(e[U>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return C=We,t|0}function Gu(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0;if(We=C,C=C+16|0,se=We,U=(a|0)/2|0,Ae=(c|0)/2|0,d=e[r>>2]|0,ae=Ae+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ae,U)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(U|0));)h=h+2|0,l=l+2|0;if(q=o*3|0,ie=U+-1|0,(c|0)>1)for(t=0,o=d,h=d+(ie<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(Ae|0));)o=o+(U<<1)|0,h=h+(U<<1)|0;h=r+1179664|0,o=U+1|0,ne=0-U|0,R=1-U|0,F=~U,_=(a<<2)+16|0;e:do if((ae|0)>1){J=(ie|0)>1,t=(e[r+4>>2]|0)+o|0,W=1,l=s+((a<<3)+8)|0,c=d+(o<<1)|0,o=0;t:for(;;){if(J)for(y=1,g=l,f=o;;){do if(((B[g+1>>0]|0)+(B[g>>0]|0)+(B[g+2>>0]|0)|0)>(q|0))E[c>>1]=0,M[t>>0]=0,o=f;else{if(M[t>>0]=-1,o=E[c+(ne<<1)>>1]|0,o<<16>>16>0){E[c>>1]=o,o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(s=E[c+(R<<1)>>1]|0,a=s<<16>>16,o=E[c+(F<<1)>>1]|0,d=o<<16>>16,l=o<<16>>16>0,s<<16>>16<=0){if(l){E[c>>1]=o,o=d*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+y,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(o+-3<<2)|0,(e[l>>2]|0)<(y|0)&&(e[l>>2]=y),e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(o=E[c+-2>>1]|0,o<<16>>16>0){if(E[c>>1]=o,o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,o=r+1310736+(o+-3<<2)|0,(e[o>>2]|0)>=(y|0)){o=f;break}e[o>>2]=y,o=f;break}else{if(o=f+1|0,(f|0)>32767)break t;E[c>>1]=o,e[r+1179664+(f<<2)>>2]=o<<16>>16,f=f*7|0,e[r+1310736+(f<<2)>>2]=1,e[r+1310736+(f+1<<2)>>2]=y,e[r+1310736+(f+2<<2)>>2]=W,e[r+1310736+(f+3<<2)>>2]=y,e[r+1310736+(f+4<<2)>>2]=y,e[r+1310736+(f+5<<2)>>2]=W,e[r+1310736+(f+6<<2)>>2]=W;break}}if(l){if(o=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+(d+-1<<2)>>2]|0,(o|0)>(a|0))if(E[c>>1]=a,(f|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(o|0)&&(e[s>>2]=a),l=l+1|0,(l|0)>=(f|0)){o=a;break}else s=s+4|0;else o=a;else if(E[c>>1]=o,(o|0)<(a|0)&(f|0)>0)for(l=0,s=h;(e[s>>2]|0)==(a|0)&&(e[s>>2]=o),l=l+1|0,!((l|0)>=(f|0));)s=s+4|0;o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(l=E[c+-2>>1]|0,l<<16>>16<=0){E[c>>1]=s,o=a*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+y,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(o+-4<<2)|0,(e[l>>2]|0)>(y|0)&&(e[l>>2]=y),e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(o=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(o|0)>(a|0))if(E[c>>1]=a,(f|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(o|0)&&(e[s>>2]=a),l=l+1|0,(l|0)>=(f|0)){o=a;break}else s=s+4|0;else o=a;else if(E[c>>1]=o,(o|0)<(a|0)&(f|0)>0)for(l=0,s=h;(e[s>>2]|0)==(a|0)&&(e[s>>2]=o),l=l+1|0,!((l|0)>=(f|0));)s=s+4|0;o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,o=r+1310736+(o+-5<<2)|0,e[o>>2]=(e[o>>2]|0)+W,o=f}while(!1);if(y=y+1|0,l=g+8|0,c=c+2|0,t=t+1|0,(y|0)>=(ie|0))break;g=l,f=o}if(W=W+1|0,(W|0)>=(ae|0)){a=o,X=52;break e}else t=t+2|0,l=l+_|0,c=c+4|0}ft(3,3904,se),t=-1}else a=0,X=52;while(!1);if((X|0)==52){if(c=r+12|0,(a|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(a|0);)l=l+1|0,h=h+4|0;if(s=r+8|0,t=o+-1|0,e[s>>2]=t,t){if(gt(c|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=U,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=Ae,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((a|0)>0){c=0;do h=(e[r+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[s>>2]|0)>0){t=0;do U=r+12+(t<<2)|0,Ae=t<<1,X=r+655376+(Ae<<3)|0,A[X>>3]=+A[X>>3]/+(e[U>>2]|0),Ae=r+655376+((Ae|1)<<3)|0,A[Ae>>3]=+A[Ae>>3]/+(e[U>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return C=We,t|0}function Jo(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0;if(We=C,C=C+16|0,se=We,U=(a|0)/2|0,Ae=(c|0)/2|0,d=e[r>>2]|0,ae=Ae+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ae,U)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(U|0));)h=h+2|0,l=l+2|0;if(q=o*3|0,ie=U+-1|0,(c|0)>1)for(t=0,o=d,h=d+(ie<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(Ae|0));)o=o+(U<<1)|0,h=h+(U<<1)|0;h=r+1179664|0,o=U+1|0,ne=0-U|0,R=1-U|0,F=~U,_=(a<<1)+8|0;e:do if((ae|0)>1){J=(ie|0)>1,t=(e[r+4>>2]|0)+o|0,W=1,l=s+((a<<2)+4)|0,c=d+(o<<1)|0,o=0;t:for(;;){if(J)for(y=1,g=l,f=o;;){d=B[g>>0]|0;do if(((d&240)+24+(d<<4&240)+((B[g+1>>0]|0)&240)|0)>(q|0))E[c>>1]=0,M[t>>0]=0,o=f;else{if(M[t>>0]=-1,o=E[c+(ne<<1)>>1]|0,o<<16>>16>0){E[c>>1]=o,o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(s=E[c+(R<<1)>>1]|0,a=s<<16>>16,o=E[c+(F<<1)>>1]|0,d=o<<16>>16,l=o<<16>>16>0,s<<16>>16<=0){if(l){E[c>>1]=o,o=d*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+y,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(o+-3<<2)|0,(e[l>>2]|0)<(y|0)&&(e[l>>2]=y),e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(o=E[c+-2>>1]|0,o<<16>>16>0){if(E[c>>1]=o,o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,o=r+1310736+(o+-3<<2)|0,(e[o>>2]|0)>=(y|0)){o=f;break}e[o>>2]=y,o=f;break}else{if(o=f+1|0,(f|0)>32767)break t;E[c>>1]=o,e[r+1179664+(f<<2)>>2]=o<<16>>16,f=f*7|0,e[r+1310736+(f<<2)>>2]=1,e[r+1310736+(f+1<<2)>>2]=y,e[r+1310736+(f+2<<2)>>2]=W,e[r+1310736+(f+3<<2)>>2]=y,e[r+1310736+(f+4<<2)>>2]=y,e[r+1310736+(f+5<<2)>>2]=W,e[r+1310736+(f+6<<2)>>2]=W;break}}if(l){if(o=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+(d+-1<<2)>>2]|0,(o|0)>(a|0))if(E[c>>1]=a,(f|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(o|0)&&(e[s>>2]=a),l=l+1|0,(l|0)>=(f|0)){o=a;break}else s=s+4|0;else o=a;else if(E[c>>1]=o,(o|0)<(a|0)&(f|0)>0)for(l=0,s=h;(e[s>>2]|0)==(a|0)&&(e[s>>2]=o),l=l+1|0,!((l|0)>=(f|0));)s=s+4|0;o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(l=E[c+-2>>1]|0,l<<16>>16<=0){E[c>>1]=s,o=a*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+y,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(o+-4<<2)|0,(e[l>>2]|0)>(y|0)&&(e[l>>2]=y),e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(o=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(o|0)>(a|0))if(E[c>>1]=a,(f|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(o|0)&&(e[s>>2]=a),l=l+1|0,(l|0)>=(f|0)){o=a;break}else s=s+4|0;else o=a;else if(E[c>>1]=o,(o|0)<(a|0)&(f|0)>0)for(l=0,s=h;(e[s>>2]|0)==(a|0)&&(e[s>>2]=o),l=l+1|0,!((l|0)>=(f|0));)s=s+4|0;o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,o=r+1310736+(o+-5<<2)|0,e[o>>2]=(e[o>>2]|0)+W,o=f}while(!1);if(y=y+1|0,l=g+4|0,c=c+2|0,t=t+1|0,(y|0)>=(ie|0))break;g=l,f=o}if(W=W+1|0,(W|0)>=(ae|0)){a=o,X=52;break e}else t=t+2|0,l=l+_|0,c=c+4|0}ft(3,3904,se),t=-1}else a=0,X=52;while(!1);if((X|0)==52){if(c=r+12|0,(a|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(a|0);)l=l+1|0,h=h+4|0;if(s=r+8|0,t=o+-1|0,e[s>>2]=t,t){if(gt(c|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=U,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=Ae,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((a|0)>0){c=0;do h=(e[r+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[s>>2]|0)>0){t=0;do U=r+12+(t<<2)|0,Ae=t<<1,X=r+655376+(Ae<<3)|0,A[X>>3]=+A[X>>3]/+(e[U>>2]|0),Ae=r+655376+((Ae|1)<<3)|0,A[Ae>>3]=+A[Ae>>3]/+(e[U>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return C=We,t|0}function za(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0;if(We=C,C=C+16|0,se=We,U=(a|0)/2|0,Ae=(c|0)/2|0,d=e[r>>2]|0,ae=Ae+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ae,U)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(U|0));)h=h+2|0,l=l+2|0;if(q=o*3|0,ie=U+-1|0,(c|0)>1)for(t=0,o=d,h=d+(ie<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(Ae|0));)o=o+(U<<1)|0,h=h+(U<<1)|0;h=r+1179664|0,o=U+1|0,ne=0-U|0,R=1-U|0,F=~U,_=(a<<1)+8|0;e:do if((ae|0)>1){J=(ie|0)>1,t=(e[r+4>>2]|0)+o|0,W=1,l=s+((a<<2)+4)|0,c=d+(o<<1)|0,o=0;t:for(;;){if(J)for(y=1,g=l,f=o;;){a=B[g>>0]|0,d=B[g+1>>0]|0;do if(((a&248)+12+(a<<5&224)+(d>>>3&24)+(d<<2&248)|0)>(q|0))E[c>>1]=0,M[t>>0]=0,o=f;else{if(M[t>>0]=-1,o=E[c+(ne<<1)>>1]|0,o<<16>>16>0){E[c>>1]=o,o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(s=E[c+(R<<1)>>1]|0,a=s<<16>>16,o=E[c+(F<<1)>>1]|0,d=o<<16>>16,l=o<<16>>16>0,s<<16>>16<=0){if(l){E[c>>1]=o,o=d*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+y,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(o+-3<<2)|0,(e[l>>2]|0)<(y|0)&&(e[l>>2]=y),e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(o=E[c+-2>>1]|0,o<<16>>16>0){if(E[c>>1]=o,o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,o=r+1310736+(o+-3<<2)|0,(e[o>>2]|0)>=(y|0)){o=f;break}e[o>>2]=y,o=f;break}else{if(o=f+1|0,(f|0)>32767)break t;E[c>>1]=o,e[r+1179664+(f<<2)>>2]=o<<16>>16,f=f*7|0,e[r+1310736+(f<<2)>>2]=1,e[r+1310736+(f+1<<2)>>2]=y,e[r+1310736+(f+2<<2)>>2]=W,e[r+1310736+(f+3<<2)>>2]=y,e[r+1310736+(f+4<<2)>>2]=y,e[r+1310736+(f+5<<2)>>2]=W,e[r+1310736+(f+6<<2)>>2]=W;break}}if(l){if(o=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+(d+-1<<2)>>2]|0,(o|0)>(a|0))if(E[c>>1]=a,(f|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(o|0)&&(e[s>>2]=a),l=l+1|0,(l|0)>=(f|0)){o=a;break}else s=s+4|0;else o=a;else if(E[c>>1]=o,(o|0)<(a|0)&(f|0)>0)for(l=0,s=h;(e[s>>2]|0)==(a|0)&&(e[s>>2]=o),l=l+1|0,!((l|0)>=(f|0));)s=s+4|0;o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(l=E[c+-2>>1]|0,l<<16>>16<=0){E[c>>1]=s,o=a*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+y,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(o+-4<<2)|0,(e[l>>2]|0)>(y|0)&&(e[l>>2]=y),e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(o=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(o|0)>(a|0))if(E[c>>1]=a,(f|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(o|0)&&(e[s>>2]=a),l=l+1|0,(l|0)>=(f|0)){o=a;break}else s=s+4|0;else o=a;else if(E[c>>1]=o,(o|0)<(a|0)&(f|0)>0)for(l=0,s=h;(e[s>>2]|0)==(a|0)&&(e[s>>2]=o),l=l+1|0,!((l|0)>=(f|0));)s=s+4|0;o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,o=r+1310736+(o+-5<<2)|0,e[o>>2]=(e[o>>2]|0)+W,o=f}while(!1);if(y=y+1|0,l=g+4|0,c=c+2|0,t=t+1|0,(y|0)>=(ie|0))break;g=l,f=o}if(W=W+1|0,(W|0)>=(ae|0)){a=o,X=52;break e}else t=t+2|0,l=l+_|0,c=c+4|0}ft(3,3904,se),t=-1}else a=0,X=52;while(!1);if((X|0)==52){if(c=r+12|0,(a|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(a|0);)l=l+1|0,h=h+4|0;if(s=r+8|0,t=o+-1|0,e[s>>2]=t,t){if(gt(c|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=U,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=Ae,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((a|0)>0){c=0;do h=(e[r+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[s>>2]|0)>0){t=0;do U=r+12+(t<<2)|0,Ae=t<<1,X=r+655376+(Ae<<3)|0,A[X>>3]=+A[X>>3]/+(e[U>>2]|0),Ae=r+655376+((Ae|1)<<3)|0,A[Ae>>3]=+A[Ae>>3]/+(e[U>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return C=We,t|0}function Pc(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0;if(We=C,C=C+16|0,se=We,U=(a|0)/2|0,Ae=(c|0)/2|0,d=e[r>>2]|0,ae=Ae+-1|0,(a|0)>1)for(t=0,h=d,l=d+((Oe(ae,U)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(U|0));)h=h+2|0,l=l+2|0;if(q=o*3|0,ie=U+-1|0,(c|0)>1)for(t=0,o=d,h=d+(ie<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(Ae|0));)o=o+(U<<1)|0,h=h+(U<<1)|0;h=r+1179664|0,o=U+1|0,ne=0-U|0,R=1-U|0,F=~U,_=(a<<2)+16|0;e:do if((ae|0)>1){J=(ie|0)>1,t=(e[r+4>>2]|0)+o|0,W=1,l=s+((a<<3)+8)|0,c=d+(o<<1)|0,o=0;t:for(;;){if(J)for(y=1,g=l,f=o;;){do if(((B[g+2>>0]|0)+(B[g+1>>0]|0)+(B[g+3>>0]|0)|0)>(q|0))E[c>>1]=0,M[t>>0]=0,o=f;else{if(M[t>>0]=-1,o=E[c+(ne<<1)>>1]|0,o<<16>>16>0){E[c>>1]=o,o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(s=E[c+(R<<1)>>1]|0,a=s<<16>>16,o=E[c+(F<<1)>>1]|0,d=o<<16>>16,l=o<<16>>16>0,s<<16>>16<=0){if(l){E[c>>1]=o,o=d*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+y,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(o+-3<<2)|0,(e[l>>2]|0)<(y|0)&&(e[l>>2]=y),e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(o=E[c+-2>>1]|0,o<<16>>16>0){if(E[c>>1]=o,o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,o=r+1310736+(o+-3<<2)|0,(e[o>>2]|0)>=(y|0)){o=f;break}e[o>>2]=y,o=f;break}else{if(o=f+1|0,(f|0)>32767)break t;E[c>>1]=o,e[r+1179664+(f<<2)>>2]=o<<16>>16,f=f*7|0,e[r+1310736+(f<<2)>>2]=1,e[r+1310736+(f+1<<2)>>2]=y,e[r+1310736+(f+2<<2)>>2]=W,e[r+1310736+(f+3<<2)>>2]=y,e[r+1310736+(f+4<<2)>>2]=y,e[r+1310736+(f+5<<2)>>2]=W,e[r+1310736+(f+6<<2)>>2]=W;break}}if(l){if(o=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+(d+-1<<2)>>2]|0,(o|0)>(a|0))if(E[c>>1]=a,(f|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(o|0)&&(e[s>>2]=a),l=l+1|0,(l|0)>=(f|0)){o=a;break}else s=s+4|0;else o=a;else if(E[c>>1]=o,(o|0)<(a|0)&(f|0)>0)for(l=0,s=h;(e[s>>2]|0)==(a|0)&&(e[s>>2]=o),l=l+1|0,!((l|0)>=(f|0));)s=s+4|0;o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,d=r+1310736+(o+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+W,e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(l=E[c+-2>>1]|0,l<<16>>16<=0){E[c>>1]=s,o=a*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+y,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+W,l=r+1310736+(o+-4<<2)|0,(e[l>>2]|0)>(y|0)&&(e[l>>2]=y),e[r+1310736+(o+-1<<2)>>2]=W,o=f;break}if(o=e[r+1179664+(a+-1<<2)>>2]|0,a=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(o|0)>(a|0))if(E[c>>1]=a,(f|0)>0)for(l=0,s=h;;)if((e[s>>2]|0)==(o|0)&&(e[s>>2]=a),l=l+1|0,(l|0)>=(f|0)){o=a;break}else s=s+4|0;else o=a;else if(E[c>>1]=o,(o|0)<(a|0)&(f|0)>0)for(l=0,s=h;(e[s>>2]|0)==(a|0)&&(e[s>>2]=o),l=l+1|0,!((l|0)>=(f|0));)s=s+4|0;o=(o<<16>>16)*7|0,d=r+1310736+(o+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=r+1310736+(o+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+y,o=r+1310736+(o+-5<<2)|0,e[o>>2]=(e[o>>2]|0)+W,o=f}while(!1);if(y=y+1|0,l=g+8|0,c=c+2|0,t=t+1|0,(y|0)>=(ie|0))break;g=l,f=o}if(W=W+1|0,(W|0)>=(ae|0)){a=o,X=52;break e}else t=t+2|0,l=l+_|0,c=c+4|0}ft(3,3904,se),t=-1}else a=0,X=52;while(!1);if((X|0)==52){if(c=r+12|0,(a|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(a|0);)l=l+1|0,h=h+4|0;if(s=r+8|0,t=o+-1|0,e[s>>2]=t,t){if(gt(c|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do X=t<<2,e[r+131084+(X<<2)>>2]=U,e[r+131084+((X|1)<<2)>>2]=0,e[r+131084+((X|2)<<2)>>2]=Ae,e[r+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((a|0)>0){c=0;do h=(e[r+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[s>>2]|0)>0){t=0;do U=r+12+(t<<2)|0,Ae=t<<1,X=r+655376+(Ae<<3)|0,A[X>>3]=+A[X>>3]/+(e[U>>2]|0),Ae=r+655376+((Ae|1)<<3)|0,A[Ae>>3]=+A[Ae>>3]/+(e[U>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return C=We,t|0}function Fc(s,a){s=s|0,a=a|0;var c=0,o=0,r=0;(a|0)!=1?a+-1&a&&(a=cl(a)|0):a=2,r=e[s+4>>2]|0,a>>>0<=r>>>0?a>>>0<r>>>0&&(r>>>0>2?o=(r+-1&r|0)==0:o=0,c=~~+tn(+(+((e[s+12>>2]|0)>>>0)/+P[s+16>>2]))>>>0,o?c=1<<32-(Ee(c+-1|0)|0):c=cl(c)|0,a=a>>>0<c>>>0?c:a,a>>>0<r>>>0&&Il(s,a)):Il(s,a)}function Il(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0;o=s+4|0;e:do if(a){if(y=Wn(a<<2)|0,c=e[s>>2]|0,e[s>>2]=y,c&&gn(c),e[o>>2]=a,a){c=0;do e[(e[s>>2]|0)+(c<<2)>>2]=0,c=c+1|0;while((c|0)!=(a|0))}if(o=s+8|0,r=e[o>>2]|0,r&&(c=e[r+4>>2]|0,g=a+-1|0,y=(g&a|0)==0,y?h=c&g:h=(c>>>0)%(a>>>0)|0,e[(e[s>>2]|0)+(h<<2)>>2]=o,c=e[r>>2]|0,c))for(t=r,o=r;;){f=o;t:for(;;){for(;;){if(o=e[c+4>>2]|0,y?d=o&g:d=(o>>>0)%(a>>>0)|0,(d|0)==(h|0)){o=c;break}if(o=(e[s>>2]|0)+(d<<2)|0,!(e[o>>2]|0)){h=d,r=c;break t}for(l=c+8|0,o=c;r=e[o>>2]|0,!!r;)if((e[l>>2]|0)==(e[r+8>>2]|0))o=r;else break;if(e[t>>2]=r,e[o>>2]=e[e[(e[s>>2]|0)+(d<<2)>>2]>>2],e[e[(e[s>>2]|0)+(d<<2)>>2]>>2]=c,c=e[f>>2]|0,!c)break e}if(c=e[o>>2]|0,c)t=o,f=o;else break e}if(e[o>>2]=t,c=e[r>>2]|0,c)t=r,o=r;else break}}else c=e[s>>2]|0,e[s>>2]=0,c&&gn(c),e[o>>2]=0;while(!1)}function Oc(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0;return r=C,C=C+32|0,t=r+16|0,o=r+4|0,h=r,a=e[a>>2]|0,c=e[a>>2]|0,e[h>>2]=a,e[t>>2]=e[h>>2],kc(o,s,t),a=e[o>>2]|0,e[o>>2]=0,a&&(M[o+8>>0]|0&&j1(a+264|0),gn(a)),C=r,c|0}function kc(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0;for(_=e[c>>2]|0,f=e[a+4>>2]|0,c=e[_+4>>2]|0,g=f+-1|0,y=(g&f|0)==0,y?d=g&c:d=(c>>>0)%(f>>>0)|0,r=(e[a>>2]|0)+(d<<2)|0,o=e[r>>2]|0;;)if(c=e[o>>2]|0,(c|0)==(_|0)){l=o;break}else o=c;h=a+8|0,(l|0)!=(h|0)?(c=e[l+4>>2]|0,y?c=c&g:c=(c>>>0)%(f>>>0)|0,(c|0)==(d|0)?r=_:t=12):t=12;do if((t|0)==12){if(c=e[_>>2]|0,c&&(c=e[c+4>>2]|0,y?c=c&g:c=(c>>>0)%(f>>>0)|0,(c|0)==(d|0))){r=_;break}e[r>>2]=0,r=_}while(!1);o=e[r>>2]|0,c=o,o&&(o=e[o+4>>2]|0,y?o=o&g:o=(o>>>0)%(f>>>0)|0,(o|0)!=(d|0)&&(e[(e[a>>2]|0)+(o<<2)>>2]=l,c=e[_>>2]|0)),e[l>>2]=c,e[r>>2]=0,a=a+12|0,e[a>>2]=(e[a>>2]|0)+-1,e[s>>2]=_,e[s+4>>2]=h,M[s+8>>0]=1}function B1(s,a,c){s=s|0,a=a|0,c=c|0;var o=0;o=Wn(408)|0,e[o+8>>2]=e[c>>2],gt(o+16|0,0,392)|0,A[o+248>>3]=1e-4,A[o+256>>3]=1e3,c=o+264|0,e[c>>2]=0,e[c+4>>2]=0,e[c+8>>2]=0,e[c+12>>2]=0,e[s>>2]=o,s=s+4|0,e[s>>2]=a+8,e[s+4>>2]=257}function Vu(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0;f=e[c+8>>2]|0,ne=c+4|0,e[ne>>2]=f,F=a+4|0,d=e[F>>2]|0,R=(d|0)==0;e:do if(R)r=0,_=12;else if(g=d+-1|0,y=(g&d|0)==0,y?r=g&f:r=(f>>>0)%(d>>>0)|0,o=e[(e[a>>2]|0)+(r<<2)>>2]|0,!o)_=12;else for(;;){if(t=e[o>>2]|0,!t){_=12;break e}if(o=e[t+4>>2]|0,y?o=o&g:o=(o>>>0)%(d>>>0)|0,(o|0)!=(r|0)){_=12;break e}if((e[t+8>>2]|0)==(f|0)){o=0,c=t;break}else o=t}while(!1);if((_|0)==12){f=a+12|0,h=+(((e[f>>2]|0)+1|0)>>>0),l=+P[a+16>>2];do if(R|h>+(d>>>0)*l)if(d>>>0>2?o=(d+-1&d|0)==0:o=0,t=(o&1|d<<1)^1,o=~~+tn(+(h/l))>>>0,Fr(a,t>>>0<o>>>0?o:t),t=e[F>>2]|0,o=e[ne>>2]|0,r=t+-1|0,r&t){d=t,r=(o>>>0)%(t>>>0)|0;break}else{d=t,r=r&o;break}while(!1);o=e[(e[a>>2]|0)+(r<<2)>>2]|0,o?(e[c>>2]=e[o>>2],e[o>>2]=c):(o=a+8|0,e[c>>2]=e[o>>2],e[o>>2]=c,e[(e[a>>2]|0)+(r<<2)>>2]=o,o=e[c>>2]|0,o&&(o=e[o+4>>2]|0,r=d+-1|0,r&d?o=(o>>>0)%(d>>>0)|0:o=o&r,e[(e[a>>2]|0)+(o<<2)>>2]=c)),e[f>>2]=(e[f>>2]|0)+1,o=1}e[s>>2]=c,M[s+4>>0]=o}function Fr(s,a){s=s|0,a=a|0;var c=0,o=0,r=0;(a|0)!=1?a+-1&a&&(a=cl(a)|0):a=2,r=e[s+4>>2]|0,a>>>0<=r>>>0?a>>>0<r>>>0&&(r>>>0>2?o=(r+-1&r|0)==0:o=0,c=~~+tn(+(+((e[s+12>>2]|0)>>>0)/+P[s+16>>2]))>>>0,o?c=1<<32-(Ee(c+-1|0)|0):c=cl(c)|0,a=a>>>0<c>>>0?c:a,a>>>0<r>>>0&&go(s,a)):go(s,a)}function go(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0;o=s+4|0;e:do if(a){if(y=Wn(a<<2)|0,c=e[s>>2]|0,e[s>>2]=y,c&&gn(c),e[o>>2]=a,a){c=0;do e[(e[s>>2]|0)+(c<<2)>>2]=0,c=c+1|0;while((c|0)!=(a|0))}if(o=s+8|0,r=e[o>>2]|0,r&&(c=e[r+4>>2]|0,g=a+-1|0,y=(g&a|0)==0,y?h=c&g:h=(c>>>0)%(a>>>0)|0,e[(e[s>>2]|0)+(h<<2)>>2]=o,c=e[r>>2]|0,c))for(t=r,o=r;;){f=o;t:for(;;){for(;;){if(o=e[c+4>>2]|0,y?d=o&g:d=(o>>>0)%(a>>>0)|0,(d|0)==(h|0)){o=c;break}if(o=(e[s>>2]|0)+(d<<2)|0,!(e[o>>2]|0)){h=d,r=c;break t}for(l=c+8|0,o=c;r=e[o>>2]|0,!!r;)if((e[l>>2]|0)==(e[r+8>>2]|0))o=r;else break;if(e[t>>2]=r,e[o>>2]=e[e[(e[s>>2]|0)+(d<<2)>>2]>>2],e[e[(e[s>>2]|0)+(d<<2)>>2]>>2]=c,c=e[f>>2]|0,!c)break e}if(c=e[o>>2]|0,c)t=o,f=o;else break e}if(e[o>>2]=t,c=e[r>>2]|0,c)t=r,o=r;else break}}else c=e[s>>2]|0,e[s>>2]=0,c&&gn(c),e[o>>2]=0;while(!1)}function Rl(s){return s=s|0,z1(e[s+4>>2]|0)|0}function Zo(s){s=s|0,Li(624,10917),m0(632,10922,1,1,0),Mi(640,10927,1,-128,127),Mi(656,10932,1,-128,127),Mi(648,10944,1,0,255),Mi(664,10958,2,-32768,32767),Mi(672,10964,2,0,65535),Mi(680,10979,4,-2147483648,2147483647),Mi(688,10983,4,0,-1),Mi(696,10996,4,-2147483648,2147483647),Mi(704,11001,4,0,-1),oe(712,11015,4),oe(720,11021,8),$t(360,11028),$t(392,11040),g0(416,4,11073),s0(440,11086),Wt(448,0,11102),Uc(11132),Js(11169),D1(11208),Qc(11239),on(11279),Rr(11308),Wt(456,4,11346),Wt(464,5,11376),Uc(11415),Js(11447),D1(11480),Qc(11513),on(11547),Rr(11580),Wt(472,6,11614),Wt(480,7,11645),Wt(488,7,11677)}function Nc(){Zo(0)}function Uc(s){s=s|0,Wt(536,0,s|0)}function Js(s){s=s|0,Wt(528,1,s|0)}function D1(s){s=s|0,Wt(520,2,s|0)}function Qc(s){s=s|0,Wt(512,3,s|0)}function on(s){s=s|0,Wt(504,4,s|0)}function Rr(s){s=s|0,Wt(496,5,s|0)}function Hc(s){s=s|0,Vi(12478,12501,303,12589)}function Wn(s){s=s|0;var a=0;a=s|0?s:1,s=Pi(a)|0;e:do if(!s){for(;s=qn()|0,!!s;)if(pc[s&0](),s=Pi(a)|0,s)break e;a=zr(4)|0,e[a>>2]=2224,Bi(a|0,544,1)}while(!1);return s|0}function gn(s){s=s|0,li(s)}function Wu(s){s=s|0}function L1(s){s=s|0,gn(s)}function qu(s){return s=s|0,12610}function qn(){var s=0;return s=e[559]|0,e[559]=s+0,s|0}function Le(s){s=s|0}function zc(s){s=s|0}function Gc(s){s=s|0}function Xn(s){s=s|0}function Ps(s){s=s|0}function es(s){s=s|0,gn(s)}function P1(s){s=s|0,gn(s)}function $o(s){s=s|0,gn(s)}function jo(s){s=s|0,gn(s)}function ea(s,a,c){return s=s|0,a=a|0,c=c|0,(s|0)==(a|0)|0}function Zs(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0;if(h=C,C=C+64|0,t=h,(s|0)!=(a|0))if(a|0&&(r=Eo(a,576,592,0)|0,(r|0)!=0)){a=t,o=a+56|0;do e[a>>2]=0,a=a+4|0;while((a|0)<(o|0));e[t>>2]=r,e[t+8>>2]=s,e[t+12>>2]=-1,e[t+48>>2]=1,p1[e[(e[r>>2]|0)+28>>2]&3](r,t,e[c>>2]|0,1),(e[t+24>>2]|0)==1?(e[c>>2]=e[t+16>>2],a=1):a=0}else a=0;else a=1;return C=h,a|0}function As(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0;var r=0;s=a+16|0,r=e[s>>2]|0;do if(r){if((r|0)!=(c|0)){o=a+36|0,e[o>>2]=(e[o>>2]|0)+1,e[a+24>>2]=2,M[a+54>>0]=1;break}s=a+24|0,(e[s>>2]|0)==2&&(e[s>>2]=o)}else e[s>>2]=c,e[a+24>>2]=o,e[a+36>>2]=1;while(!1)}function vo(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0,(s|0)==(e[a+8>>2]|0)&&As(0,a,c,o)}function Ga(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0,(s|0)==(e[a+8>>2]|0)?As(0,a,c,o):(s=e[s+8>>2]|0,p1[e[(e[s>>2]|0)+28>>2]&3](s,a,c,o))}function Va(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0;var r=0,t=0;t=e[s+4>>2]|0,r=t>>8,t&1&&(r=e[(e[c>>2]|0)+r>>2]|0),s=e[s>>2]|0,p1[e[(e[s>>2]|0)+28>>2]&3](s,a,c+r|0,t&2|0?o:2)}function F1(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0;var r=0,t=0;e:do if((s|0)!=(e[a+8>>2]|0)){if(t=e[s+12>>2]|0,r=s+16+(t<<3)|0,Va(s+16|0,a,c,o),(t|0)>1){t=a+54|0,s=s+24|0;do{if(Va(s,a,c,o),M[t>>0]|0)break e;s=s+8|0}while(s>>>0<r>>>0)}}else As(0,a,c,o);while(!1)}function Eo(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0;var r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0;R=C,C=C+64|0,_=R,y=e[s>>2]|0,g=s+(e[y+-8>>2]|0)|0,y=e[y+-4>>2]|0,e[_>>2]=c,e[_+4>>2]=s,e[_+8>>2]=a,e[_+12>>2]=o,o=_+16|0,s=_+20|0,a=_+24|0,r=_+28|0,t=_+32|0,h=_+40|0,l=(y|0)==(c|0),d=o,f=d+36|0;do e[d>>2]=0,d=d+4|0;while((d|0)<(f|0));E[o+36>>1]=0,M[o+38>>0]=0;e:do if(l)e[_+48>>2]=1,C0[e[(e[c>>2]|0)+20>>2]&3](c,_,g,g,1,0),o=(e[a>>2]|0)==1?g:0;else{switch(d1[e[(e[y>>2]|0)+24>>2]&3](y,_,g,1,0),e[_+36>>2]|0){case 0:{o=(e[h>>2]|0)==1&(e[r>>2]|0)==1&(e[t>>2]|0)==1?e[s>>2]|0:0;break e}case 1:break;default:{o=0;break e}}if((e[a>>2]|0)!=1&&!((e[h>>2]|0)==0&(e[r>>2]|0)==1&(e[t>>2]|0)==1)){o=0;break}o=e[o>>2]|0}while(!1);return C=R,o|0}function Wa(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0,M[a+53>>0]=1;do if((e[a+4>>2]|0)==(o|0)){if(M[a+52>>0]=1,o=a+16|0,s=e[o>>2]|0,!s){if(e[o>>2]=c,e[a+24>>2]=r,e[a+36>>2]=1,!((r|0)==1&&(e[a+48>>2]|0)==1))break;M[a+54>>0]=1;break}if((s|0)!=(c|0)){r=a+36|0,e[r>>2]=(e[r>>2]|0)+1,M[a+54>>0]=1;break}s=a+24|0,o=e[s>>2]|0,(o|0)==2&&(e[s>>2]=r,o=r),(o|0)==1&&(e[a+48>>2]|0)==1&&(M[a+54>>0]=1)}while(!1)}function Xu(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0;e:do if((s|0)==(e[a+8>>2]|0))(e[a+4>>2]|0)==(c|0)&&(t=a+28|0,(e[t>>2]|0)!=1)&&(e[t>>2]=o);else{if((s|0)!=(e[a>>2]|0)){if(F=e[s+12>>2]|0,l=s+16+(F<<3)|0,ta(s+16|0,a,c,o,r),t=s+24|0,(F|0)<=1)break;if(h=e[s+8>>2]|0,!(h&2|0)&&(d=a+36|0,(e[d>>2]|0)!=1)){if(!(h&1)){for(h=a+54|0;;)if(M[h>>0]|0||(e[d>>2]|0)==1||(ta(t,a,c,o,r),t=t+8|0,t>>>0>=l>>>0))break e}for(h=a+24|0,s=a+54|0;;)if(M[s>>0]|0||(e[d>>2]|0)==1&&(e[h>>2]|0)==1||(ta(t,a,c,o,r),t=t+8|0,t>>>0>=l>>>0))break e}for(h=a+54|0;;)if(M[h>>0]|0||(ta(t,a,c,o,r),t=t+8|0,t>>>0>=l>>>0))break e}if((e[a+16>>2]|0)!=(c|0)&&(R=a+20|0,(e[R>>2]|0)!=(c|0))){if(e[a+32>>2]=o,g=a+44|0,(e[g>>2]|0)==4)break;h=e[s+12>>2]|0,l=s+16+(h<<3)|0,d=a+52|0,o=a+53|0,y=a+54|0,f=s+8|0,_=a+24|0;t:do if((h|0)>0)for(h=0,t=0,s=s+16|0;;){if(M[d>>0]=0,M[o>>0]=0,yo(s,a,c,c,1,r),M[y>>0]|0){F=20;break t}do if(M[o>>0]|0){if(!(M[d>>0]|0))if(e[f>>2]&1){t=1;break}else{t=1,F=20;break t}if((e[_>>2]|0)==1)break t;if(e[f>>2]&2)h=1,t=1;else break t}while(!1);if(s=s+8|0,s>>>0>=l>>>0){F=20;break}}else h=0,t=0,F=20;while(!1);do if((F|0)==20){if(!h&&(e[R>>2]=c,c=a+40|0,e[c>>2]=(e[c>>2]|0)+1,(e[a+36>>2]|0)==1)&&(e[_>>2]|0)==2){if(M[y>>0]=1,t)break}else F=24;if((F|0)==24&&t)break;e[g>>2]=4;break e}while(!1);e[g>>2]=3;break}(o|0)==1&&(e[a+32>>2]=1)}while(!1)}function yo(s,a,c,o,r,t){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0,t=t|0;var h=0,l=0;l=e[s+4>>2]|0,h=l>>8,l&1&&(h=e[(e[o>>2]|0)+h>>2]|0),s=e[s>>2]|0,C0[e[(e[s>>2]|0)+20>>2]&3](s,a,c,o+h|0,l&2|0?r:2,t)}function ta(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0;h=e[s+4>>2]|0,t=h>>8,h&1&&(t=e[(e[c>>2]|0)+t>>2]|0),s=e[s>>2]|0,d1[e[(e[s>>2]|0)+24>>2]&3](s,a,c+t|0,h&2|0?o:2,r)}function Yn(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0;e:do if((s|0)==(e[a+8>>2]|0))(e[a+4>>2]|0)==(c|0)&&(t=a+28|0,(e[t>>2]|0)!=1)&&(e[t>>2]=o);else{if((s|0)!=(e[a>>2]|0)){l=e[s+8>>2]|0,d1[e[(e[l>>2]|0)+24>>2]&3](l,a,c,o,r);break}if((e[a+16>>2]|0)!=(c|0)&&(h=a+20|0,(e[h>>2]|0)!=(c|0))){if(e[a+32>>2]=o,o=a+44|0,(e[o>>2]|0)==4)break;t=a+52|0,M[t>>0]=0,d=a+53|0,M[d>>0]=0,s=e[s+8>>2]|0,C0[e[(e[s>>2]|0)+20>>2]&3](s,a,c,c,1,r),M[d>>0]|0?M[t>>0]|0||(t=1,l=13):(t=0,l=13);do if((l|0)==13){if(e[h>>2]=c,d=a+40|0,e[d>>2]=(e[d>>2]|0)+1,(e[a+36>>2]|0)==1&&(e[a+24>>2]|0)==2){if(M[a+54>>0]=1,t)break}else l=16;if((l|0)==16&&t)break;e[o>>2]=4;break e}while(!1);e[o>>2]=3;break}(o|0)==1&&(e[a+32>>2]=1)}while(!1)}function Fs(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0;do if((s|0)==(e[a+8>>2]|0))(e[a+4>>2]|0)==(c|0)&&(h=a+28|0,(e[h>>2]|0)!=1)&&(e[h>>2]=o);else if((s|0)==(e[a>>2]|0)){if((e[a+16>>2]|0)!=(c|0)&&(t=a+20|0,(e[t>>2]|0)!=(c|0))){e[a+32>>2]=o,e[t>>2]=c,r=a+40|0,e[r>>2]=(e[r>>2]|0)+1,(e[a+36>>2]|0)==1&&(e[a+24>>2]|0)==2&&(M[a+54>>0]=1),e[a+44>>2]=4;break}(o|0)==1&&(e[a+32>>2]=1)}while(!1)}function Bl(s,a,c,o,r,t){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0,t=t|0;var h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0;if((s|0)==(e[a+8>>2]|0))Wa(0,a,c,o,r);else{g=a+52|0,y=M[g>>0]|0,_=a+53|0,R=M[_>>0]|0,f=e[s+12>>2]|0,h=s+16+(f<<3)|0,M[g>>0]=0,M[_>>0]=0,yo(s+16|0,a,c,o,r,t);e:do if((f|0)>1){l=a+24|0,d=s+8|0,f=a+54|0,s=s+24|0;do{if(M[f>>0]|0)break e;if(M[g>>0]|0){if((e[l>>2]|0)==1||!(e[d>>2]&2))break e}else if(M[_>>0]|0&&!(e[d>>2]&1|0))break e;M[g>>0]=0,M[_>>0]=0,yo(s,a,c,o,r,t),s=s+8|0}while(s>>>0<h>>>0)}while(!1);M[g>>0]=y,M[_>>0]=R}}function O1(s,a,c,o,r,t){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0,t=t|0,(s|0)==(e[a+8>>2]|0)?Wa(0,a,c,o,r):(s=e[s+8>>2]|0,C0[e[(e[s>>2]|0)+20>>2]&3](s,a,c,o,r,t))}function $s(s,a,c,o,r,t){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0,t=t|0,(s|0)==(e[a+8>>2]|0)&&Wa(0,a,c,o,r)}function Dl(s){s=s|0,Vi(12625,12654,1164,12589)}function ms(s){return s=s|0,((s|0)==32|(s+-9|0)>>>0<5)&1|0}function Or(){var s=0;return e[597]|0?s=e[(Pr()|0)+60>>2]|0:s=2644,s|0}function ts(s){s=s|0;var a=0,c=0;for(a=0;;){if((B[12742+a>>0]|0)==(s|0)){c=2;break}if(a=a+1|0,(a|0)==87){a=87,s=12830,c=5;break}}if((c|0)==2&&(a?(s=12830,c=5):s=12830),(c|0)==5)for(;;){for(c=s;s=c+1|0,M[c>>0]|0;)c=s;if(a=a+-1|0,a)c=5;else break}return s|0}function Ii(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0,Ze=0,nt=0,lt=0,Ye=0,Qt=0,Et=0;switch(Qt=C,C=C+512|0,Ze=Qt,a|0){case 0:{Ye=24,lt=-149,ae=4;break}case 1:{Ye=53,lt=-1074,ae=4;break}case 2:{Ye=53,lt=-1074,ae=4;break}default:o=0}e:do if((ae|0)==4){U=s+4|0,X=s+100|0;do a=e[U>>2]|0,a>>>0<(e[X>>2]|0)>>>0?(e[U>>2]=a+1,a=B[a>>0]|0):a=fr(s)|0;while(ms(a)|0);t:do switch(a|0){case 43:case 45:if(r=1-(((a|0)==45&1)<<1)|0,a=e[U>>2]|0,a>>>0<(e[X>>2]|0)>>>0){e[U>>2]=a+1,a=B[a>>0]|0,nt=r;break t}else{a=fr(s)|0,nt=r;break t}default:nt=1}while(!1);r=a,a=0;do{if((r|32|0)!=(M[14634+a>>0]|0))break;do if(a>>>0<7)if(r=e[U>>2]|0,r>>>0<(e[X>>2]|0)>>>0){e[U>>2]=r+1,r=B[r>>0]|0;break}else{r=fr(s)|0;break}while(!1);a=a+1|0}while(a>>>0<8);t:do switch(a|0){case 8:break;case 3:{ae=23;break}default:{if(h=(c|0)!=0,h&a>>>0>3){if((a|0)==8)break t;ae=23;break t}i:do if(!a){a=0;do{if((r|32|0)!=(M[16477+a>>0]|0))break i;do if(a>>>0<2)if(r=e[U>>2]|0,r>>>0<(e[X>>2]|0)>>>0){e[U>>2]=r+1,r=B[r>>0]|0;break}else{r=fr(s)|0;break}while(!1);a=a+1|0}while(a>>>0<3)}while(!1);switch(a|0){case 3:{if(a=e[U>>2]|0,a>>>0<(e[X>>2]|0)>>>0?(e[U>>2]=a+1,a=B[a>>0]|0):a=fr(s)|0,(a|0)==40)a=1;else{if(!(e[X>>2]|0)){o=he;break e}e[U>>2]=(e[U>>2]|0)+-1,o=he;break e}for(;r=e[U>>2]|0,r>>>0<(e[X>>2]|0)>>>0?(e[U>>2]=r+1,r=B[r>>0]|0):r=fr(s)|0,!(!((r+-48|0)>>>0<10|(r+-65|0)>>>0<26)&&!((r|0)==95|(r+-97|0)>>>0<26));)a=a+1|0;if((r|0)==41){o=he;break e}if(r=(e[X>>2]|0)==0,r||(e[U>>2]=(e[U>>2]|0)+-1),!h){e[(Or()|0)>>2]=22,vn(s,0),o=0;break e}if(!a){o=he;break e}for(;;)if(a=a+-1|0,r||(e[U>>2]=(e[U>>2]|0)+-1),!a){o=he;break e}}case 0:{do if((r|0)==48){if(a=e[U>>2]|0,a>>>0<(e[X>>2]|0)>>>0?(e[U>>2]=a+1,a=B[a>>0]|0):a=fr(s)|0,(a|32|0)!=120){if(!(e[X>>2]|0)){a=48;break}e[U>>2]=(e[U>>2]|0)+-1,a=48;break}a=e[U>>2]|0,a>>>0<(e[X>>2]|0)>>>0?(e[U>>2]=a+1,a=B[a>>0]|0,h=0):(a=fr(s)|0,h=0);i:for(;;){switch(a|0){case 46:{ae=74;break i}case 48:break;default:{q=0,l=0,W=0,r=0,f=h,g=0,J=0,d=1,h=0,o=0;break i}}if(a=e[U>>2]|0,a>>>0<(e[X>>2]|0)>>>0){e[U>>2]=a+1,a=B[a>>0]|0,h=1;continue}else{a=fr(s)|0,h=1;continue}}if((ae|0)==74)if(a=e[U>>2]|0,a>>>0<(e[X>>2]|0)>>>0?(e[U>>2]=a+1,a=B[a>>0]|0):a=fr(s)|0,(a|0)==48){h=0,r=0;do a=e[U>>2]|0,a>>>0<(e[X>>2]|0)>>>0?(e[U>>2]=a+1,a=B[a>>0]|0):a=fr(s)|0,h=Gr(h|0,r|0,-1,-1)|0,r=Je;while((a|0)==48);q=0,l=0,W=h,f=1,g=1,J=0,d=1,h=0,o=0}else q=0,l=0,W=0,r=0,f=h,g=1,J=0,d=1,h=0,o=0;for(;;){if(F=a+-48|0,y=a|32,F>>>0>=10){if(ne=(a|0)==46,!(ne|(y+-97|0)>>>0<6)){y=W,F=q;break}if(ne)if(!g)ne=l,r=q,F=q,g=1,y=J,t=d;else{y=W,F=q,a=46;break}else ae=86}else ae=86;if((ae|0)==86){ae=0,a=(a|0)>57?y+-87|0:F;do if((q|0)<0|(q|0)==0&l>>>0<8)y=J,t=d,h=a+(h<<4)|0;else{if((q|0)<0|(q|0)==0&l>>>0<14){R=d*.0625,y=J,t=R,o=o+R*+(a|0);break}(J|0)!=0|(a|0)==0?(y=J,t=d):(y=1,t=d,o=o+d*.5)}while(!1);l=Gr(l|0,q|0,1,0)|0,ne=W,F=Je,f=1}if(a=e[U>>2]|0,a>>>0<(e[X>>2]|0)>>>0){e[U>>2]=a+1,q=F,W=ne,a=B[a>>0]|0,J=y,d=t;continue}else{q=F,W=ne,a=fr(s)|0,J=y,d=t;continue}}if(!f){a=(e[X>>2]|0)==0,a||(e[U>>2]=(e[U>>2]|0)+-1),c?!a&&(ie=e[U>>2]|0,e[U>>2]=ie+-1,(g|0)!=0)&&(e[U>>2]=ie+-2):vn(s,0),o=+(nt|0)*0;break e}if(f=(g|0)==0,g=f?l:y,f=f?F:r,(F|0)<0|(F|0)==0&l>>>0<8){r=F;do h=h<<4,l=Gr(l|0,r|0,1,0)|0,r=Je;while((r|0)<0|(r|0)==0&l>>>0<8)}if((a|32|0)==112){if(r=T0(s,c)|0,a=Je,(r|0)==0&(a|0)==-2147483648){if(!c){vn(s,0),o=0;break e}e[X>>2]|0?(e[U>>2]=(e[U>>2]|0)+-1,r=0,a=0):(r=0,a=0)}}else e[X>>2]|0?(e[U>>2]=(e[U>>2]|0)+-1,r=0,a=0):(r=0,a=0);if(Ze=an(g|0,f|0,2)|0,Ze=Gr(Ze|0,Je|0,-32,-1)|0,a=Gr(Ze|0,Je|0,r|0,a|0)|0,r=Je,!h){o=+(nt|0)*0;break e}if((r|0)>0|(r|0)==0&a>>>0>(0-lt|0)>>>0){e[(Or()|0)>>2]=34,o=+(nt|0)*17976931348623157e292*17976931348623157e292;break e}if(Ze=lt+-106|0,We=((Ze|0)<0)<<31>>31,(r|0)<(We|0)|(r|0)==(We|0)&a>>>0<Ze>>>0){e[(Or()|0)>>2]=34,o=+(nt|0)*22250738585072014e-324*22250738585072014e-324;break e}if((h|0)>-1){do We=!(o>=.5),Ze=We&1|h<<1,h=Ze^1,o=o+(We?o:o+-1),a=Gr(a|0,r|0,-1,-1)|0,r=Je;while((Ze|0)>-1);l=a,d=o}else l=a,d=o;a=Jn(32,0,lt|0,((lt|0)<0)<<31>>31|0)|0,a=Gr(l|0,r|0,a|0,Je|0)|0,lt=Je,0>(lt|0)|(lt|0)==0&Ye>>>0>a>>>0?(a|0)<0?(a=0,ae=127):ae=125:(a=Ye,ae=125),(ae|0)==125&&((a|0)<53?ae=127:(r=a,t=+(nt|0),o=0)),(ae|0)==127&&(o=+(nt|0),r=a,t=o,o=+qa(+bo(1,84-a|0),o)),Ye=(h&1|0)==0&(d!=0&(r|0)<32),o=t*(Ye?0:d)+(o+t*+(((Ye&1)+h|0)>>>0))-o,o==0&&(e[(Or()|0)>>2]=34),o=+Vc(o,l);break e}else a=r;while(!1);Ae=lt+Ye|0,We=0-Ae|0,h=0;i:for(;;){switch(a|0){case 46:{ae=138;break i}case 48:break;default:{r=0,y=0,g=0;break i}}if(a=e[U>>2]|0,a>>>0<(e[X>>2]|0)>>>0){e[U>>2]=a+1,a=B[a>>0]|0,h=1;continue}else{a=fr(s)|0,h=1;continue}}if((ae|0)==138)if(a=e[U>>2]|0,a>>>0<(e[X>>2]|0)>>>0?(e[U>>2]=a+1,a=B[a>>0]|0):a=fr(s)|0,(a|0)==48)for(r=0,a=0;;)if(r=Gr(r|0,a|0,-1,-1)|0,h=Je,a=e[U>>2]|0,a>>>0<(e[X>>2]|0)>>>0?(e[U>>2]=a+1,a=B[a>>0]|0):a=fr(s)|0,(a|0)==48)a=h;else{y=h,h=1,g=1;break}else r=0,y=0,g=1;e[Ze>>2]=0,f=a+-48|0,l=(a|0)==46;i:do if(l|f>>>0<10){se=Ze+496|0,q=0,ne=0,J=l,ae=y,F=h,ie=g,h=0,l=0,g=0;s:for(;;){do if(J)if(!ie)r=q,y=ne,ie=1;else{y=ae,a=q,f=ne;break s}else{if(J=Gr(q|0,ne|0,1,0)|0,ne=Je,W=(a|0)!=48,(l|0)>=125){if(!W){y=ae,q=J;break}e[se>>2]=e[se>>2]|1,y=ae,q=J;break}y=Ze+(l<<2)|0,h&&(f=a+-48+((e[y>>2]|0)*10|0)|0),e[y>>2]=f,h=h+1|0,f=(h|0)==9,y=ae,q=J,F=1,h=f?0:h,l=(f&1)+l|0,g=W?J:g}while(!1);if(a=e[U>>2]|0,a>>>0<(e[X>>2]|0)>>>0?(e[U>>2]=a+1,a=B[a>>0]|0):a=fr(s)|0,f=a+-48|0,J=(a|0)==46,J|f>>>0<10)ae=y;else{f=ie,ae=161;break i}}F=(F|0)!=0,ae=169}else q=0,ne=0,F=h,f=g,h=0,l=0,g=0,ae=161;while(!1);do if((ae|0)==161){if(se=(f|0)==0,r=se?q:r,y=se?ne:y,F=(F|0)!=0,!((a|32|0)==101&F))if((a|0)>-1){a=q,f=ne,ae=169;break}else{a=q,f=ne,ae=171;break}if(f=T0(s,c)|0,a=Je,(f|0)==0&(a|0)==-2147483648){if(!c){vn(s,0),o=0;break}e[X>>2]|0?(e[U>>2]=(e[U>>2]|0)+-1,f=0,a=0):(f=0,a=0)}r=Gr(f|0,a|0,r|0,y|0)|0,F=q,y=Je,f=ne,ae=173}while(!1);(ae|0)==169&&(e[X>>2]|0?(e[U>>2]=(e[U>>2]|0)+-1,F?(F=a,ae=173):ae=172):ae=171),(ae|0)==171&&(F?(F=a,ae=173):ae=172);do if((ae|0)==172)e[(Or()|0)>>2]=22,vn(s,0),o=0;else if((ae|0)==173){if(a=e[Ze>>2]|0,!a){o=+(nt|0)*0;break}if(((f|0)<0|(f|0)==0&F>>>0<10)&((r|0)==(F|0)&(y|0)==(f|0))&&Ye>>>0>30|(a>>>Ye|0)==0){o=+(nt|0)*+(a>>>0);break}if(s=(lt|0)/-2|0,U=((s|0)<0)<<31>>31,(y|0)>(U|0)|(y|0)==(U|0)&r>>>0>s>>>0){e[(Or()|0)>>2]=34,o=+(nt|0)*17976931348623157e292*17976931348623157e292;break}if(s=lt+-106|0,U=((s|0)<0)<<31>>31,(y|0)<(U|0)|(y|0)==(U|0)&r>>>0<s>>>0){e[(Or()|0)>>2]=34,o=+(nt|0)*22250738585072014e-324*22250738585072014e-324;break}if(h){if((h|0)<9){f=Ze+(l<<2)|0,a=e[f>>2]|0;do a=a*10|0,h=h+1|0;while((h|0)!=9);e[f>>2]=a}l=l+1|0}if((g|0)<9&&(g|0)<=(r|0)&(r|0)<18){if((r|0)==9){o=+(nt|0)*+((e[Ze>>2]|0)>>>0);break}if((r|0)<9){o=+(nt|0)*+((e[Ze>>2]|0)>>>0)/+(e[2648+(8-r<<2)>>2]|0);break}if(s=Ye+27+(Oe(r,-3)|0)|0,a=e[Ze>>2]|0,(s|0)>30|(a>>>s|0)==0){o=+(nt|0)*+(a>>>0)*+(e[2648+(r+-10<<2)>>2]|0);break}}if(a=(r|0)%9|0,!a)h=0,a=0;else{if(F=(r|0)>-1?a:a+9|0,f=e[2648+(8-F<<2)>>2]|0,l){g=1e9/(f|0)|0,h=0,a=0,y=0;do X=Ze+(y<<2)|0,U=e[X>>2]|0,s=((U>>>0)/(f>>>0)|0)+a|0,e[X>>2]=s,a=Oe((U>>>0)%(f>>>0)|0,g)|0,s=(y|0)==(h|0)&(s|0)==0,y=y+1|0,r=s?r+-9|0:r,h=s?y&127:h;while((y|0)!=(l|0));a&&(e[Ze+(l<<2)>>2]=a,l=l+1|0)}else h=0,l=0;a=0,r=9-F+r|0}i:for(;;){ne=(r|0)<18,J=(r|0)==18,W=Ze+(h<<2)|0;do{if(!ne){if(!J)break i;if((e[W>>2]|0)>>>0>=9007199){r=18;break i}}for(f=0,g=l+127|0;F=g&127,y=Ze+(F<<2)|0,g=an(e[y>>2]|0,0,29)|0,g=Gr(g|0,Je|0,f|0,0)|0,f=Je,f>>>0>0|(f|0)==0&g>>>0>1e9?(s=fl(g|0,f|0,1e9,0)|0,g=Oo(g|0,f|0,1e9,0)|0,f=s):f=0,e[y>>2]=g,s=(F|0)==(h|0),l=(F|0)!=(l+127&127|0)|s||g|0?l:F,!s;)g=F+-1|0;a=a+-29|0}while(!(f|0));h=h+127&127,(h|0)==(l|0)&&(s=l+127&127,l=Ze+((l+126&127)<<2)|0,e[l>>2]=e[l>>2]|e[Ze+(s<<2)>>2],l=s),e[Ze+(h<<2)>>2]=f,r=r+9|0}i:for(;;){for(q=l+1&127,W=Ze+((l+127&127)<<2)|0;;){for(ne=(r|0)==18,J=(r|0)>27?9:1,F=ne^1;;){g=h&127,y=(g|0)==(l|0);do if(y)ae=219;else{if(f=e[Ze+(g<<2)>>2]|0,f>>>0<9007199){ae=219;break}if(f>>>0>9007199)break;if(f=h+1&127,(f|0)==(l|0)){ae=219;break}if(f=e[Ze+(f<<2)>>2]|0,f>>>0<254740991){ae=219;break}if(!(f>>>0>254740991|F)){r=g;break i}}while(!1);if((ae|0)==219&&(ae=0,ne)){ae=220;break i}if(a=a+J|0,(h|0)==(l|0))h=l;else break}for(F=(1<<J)+-1|0,ne=1e9>>>J,g=h,f=0,y=h;U=Ze+(y<<2)|0,s=e[U>>2]|0,h=(s>>>J)+f|0,e[U>>2]=h,f=Oe(s&F,ne)|0,h=(y|0)==(g|0)&(h|0)==0,y=y+1&127,r=h?r+-9|0:r,h=h?y:g,(y|0)!=(l|0);)g=h;if(f){if((q|0)!=(h|0))break;e[W>>2]=e[W>>2]|1}}e[Ze+(l<<2)>>2]=f,l=q}(ae|0)==220&&(y?(e[Ze+(q+-1<<2)>>2]=0,r=l,l=q):r=g),o=+((e[Ze+(r<<2)>>2]|0)>>>0),r=h+1&127,(r|0)==(l|0)&&(l=h+2&127,e[Ze+(l+-1<<2)>>2]=0),R=+(nt|0),t=R*(o*1e9+ +((e[Ze+(r<<2)>>2]|0)>>>0)),ne=a+53|0,y=ne-lt|0,F=(y|0)<(Ye|0),r=F&1,g=F?(y|0)<0?0:y:Ye,(g|0)<53?(Et=+qa(+bo(1,105-g|0),t),d=+Ll(t,+bo(1,53-g|0)),_=Et,o=d,d=Et+(t-d)):(_=0,o=0,d=t),f=h+2&127;do if((f|0)==(l|0))t=o;else{f=e[Ze+(f<<2)>>2]|0;do if(f>>>0>=5e8){if(f>>>0>5e8){o=R*.75+o;break}if((h+3&127|0)==(l|0)){o=R*.5+o;break}else{o=R*.75+o;break}}else{if(!(f|0)&&(h+3&127|0)==(l|0))break;o=R*.25+o}while(!1);if((53-g|0)<=1){t=o;break}if(+Ll(o,1)!=0){t=o;break}t=o+1}while(!1);o=d+t-_;do if((ne&2147483647|0)>(-2-Ae|0)){if(+Ur(+o)>=9007199254740992&&(r=F&(g|0)==(y|0)?0:r,a=a+1|0,o=o*.5),(a+50|0)<=(We|0)&&!(t!=0&(r|0)!=0))break;e[(Or()|0)>>2]=34}while(!1);o=+Vc(o,a)}while(!1);break e}default:{e[X>>2]|0&&(e[U>>2]=(e[U>>2]|0)+-1),e[(Or()|0)>>2]=22,vn(s,0),o=0;break e}}}}while(!1);if((ae|0)==23&&(r=(e[X>>2]|0)==0,r||(e[U>>2]=(e[U>>2]|0)+-1),(c|0)!=0&a>>>0>3))do r||(e[U>>2]=(e[U>>2]|0)+-1),a=a+-1|0;while(a>>>0>3);o=+(nt|0)*ue}while(!1);return C=Qt,+o}function ia(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0;e:do if(a>>>0>36)e[(Or()|0)>>2]=22,r=0,o=0;else{F=s+4|0,R=s+100|0;do t=e[F>>2]|0,t>>>0<(e[R>>2]|0)>>>0?(e[F>>2]=t+1,t=B[t>>0]|0):t=fr(s)|0;while(ms(t)|0);t:do switch(t|0){case 43:case 45:if(h=((t|0)==45)<<31>>31,t=e[F>>2]|0,t>>>0<(e[R>>2]|0)>>>0){e[F>>2]=t+1,t=B[t>>0]|0,_=h;break t}else{t=fr(s)|0,_=h;break t}default:_=0}while(!1);h=(a|0)==0;do if((a&-17|0)==0&(t|0)==48){if(t=e[F>>2]|0,t>>>0<(e[R>>2]|0)>>>0?(e[F>>2]=t+1,t=B[t>>0]|0):t=fr(s)|0,(t|32|0)!=120)if(h){a=8,g=46;break}else{g=32;break}if(a=e[F>>2]|0,a>>>0<(e[R>>2]|0)>>>0?(e[F>>2]=a+1,t=B[a>>0]|0):t=fr(s)|0,(B[14643+(t+1)>>0]|0)>15){if(o=(e[R>>2]|0)==0,o||(e[F>>2]=(e[F>>2]|0)+-1),!c){vn(s,0),r=0,o=0;break e}if(o){r=0,o=0;break e}e[F>>2]=(e[F>>2]|0)+-1,r=0,o=0;break e}else a=16,g=46}else if(a=h?10:a,(B[14643+(t+1)>>0]|0)>>>0<a>>>0)g=32;else{e[R>>2]|0&&(e[F>>2]=(e[F>>2]|0)+-1),vn(s,0),e[(Or()|0)>>2]=22,r=0,o=0;break e}while(!1);if((g|0)==32)if((a|0)==10){if(a=t+-48|0,a>>>0<10){for(t=0;;)if(h=(t*10|0)+a|0,a=e[F>>2]|0,a>>>0<(e[R>>2]|0)>>>0?(e[F>>2]=a+1,t=B[a>>0]|0):t=fr(s)|0,a=t+-48|0,a>>>0<10&h>>>0<429496729)t=h;else{a=h;break}h=0}else a=0,h=0;if(c=t+-48|0,c>>>0<10){for(;;){if(l=c1(a|0,h|0,10,0)|0,d=Je,f=((c|0)<0)<<31>>31,y=~f,d>>>0>y>>>0|(d|0)==(y|0)&l>>>0>~c>>>0){l=a;break}if(a=Gr(l|0,d|0,c|0,f|0)|0,h=Je,t=e[F>>2]|0,t>>>0<(e[R>>2]|0)>>>0?(e[F>>2]=t+1,t=B[t>>0]|0):t=fr(s)|0,c=t+-48|0,!(c>>>0<10&(h>>>0<429496729|(h|0)==429496729&a>>>0<2576980378))){l=a;break}}c>>>0>9?(t=l,a=_):(a=10,g=72)}else t=a,a=_}else g=46;t:do if((g|0)==46){if(!(a+-1&a)){if(g=M[14900+((a*23|0)>>>5&7)>>0]|0,h=M[14643+(t+1)>>0]|0,c=h&255,c>>>0<a>>>0){for(t=0;l=c|t<<g,t=e[F>>2]|0,t>>>0<(e[R>>2]|0)>>>0?(e[F>>2]=t+1,t=B[t>>0]|0):t=fr(s)|0,h=M[14643+(t+1)>>0]|0,c=h&255,l>>>0<134217728&c>>>0<a>>>0;)t=l;c=0}else c=0,l=0;if(d=ws(-1,-1,g|0)|0,f=Je,(h&255)>>>0>=a>>>0|(c>>>0>f>>>0|(c|0)==(f|0)&l>>>0>d>>>0)){h=c,g=72;break}else t=c;for(;;)if(l=an(l|0,t|0,g|0)|0,c=Je,l=h&255|l,t=e[F>>2]|0,t>>>0<(e[R>>2]|0)>>>0?(e[F>>2]=t+1,t=B[t>>0]|0):t=fr(s)|0,h=M[14643+(t+1)>>0]|0,(h&255)>>>0>=a>>>0|(c>>>0>f>>>0|(c|0)==(f|0)&l>>>0>d>>>0)){h=c,g=72;break t}else t=c}if(h=M[14643+(t+1)>>0]|0,c=h&255,c>>>0<a>>>0){for(t=0;l=c+(Oe(t,a)|0)|0,t=e[F>>2]|0,t>>>0<(e[R>>2]|0)>>>0?(e[F>>2]=t+1,t=B[t>>0]|0):t=fr(s)|0,h=M[14643+(t+1)>>0]|0,c=h&255,l>>>0<119304647&c>>>0<a>>>0;)t=l;c=0}else l=0,c=0;if((h&255)>>>0<a>>>0)for(g=fl(-1,-1,a|0,0)|0,y=Je,f=c;;){if(f>>>0>y>>>0|(f|0)==(y|0)&l>>>0>g>>>0){h=f,g=72;break t}if(c=c1(l|0,f|0,a|0,0)|0,d=Je,h=h&255,d>>>0>4294967295|(d|0)==-1&c>>>0>~h>>>0){h=f,g=72;break t}if(l=Gr(h|0,0,c|0,d|0)|0,c=Je,t=e[F>>2]|0,t>>>0<(e[R>>2]|0)>>>0?(e[F>>2]=t+1,t=B[t>>0]|0):t=fr(s)|0,h=M[14643+(t+1)>>0]|0,(h&255)>>>0>=a>>>0){h=c,g=72;break}else f=c}else h=c,g=72}while(!1);if((g|0)==72)if((B[14643+(t+1)>>0]|0)>>>0<a>>>0){do t=e[F>>2]|0,t>>>0<(e[R>>2]|0)>>>0?(e[F>>2]=t+1,t=B[t>>0]|0):t=fr(s)|0;while((B[14643+(t+1)>>0]|0)>>>0<a>>>0);e[(Or()|0)>>2]=34,h=r,t=o,a=(o&1|0)==0&!0?_:0}else t=l,a=_;if(e[R>>2]|0&&(e[F>>2]=(e[F>>2]|0)+-1),!(h>>>0<r>>>0|(h|0)==(r|0)&t>>>0<o>>>0)){if(!((o&1|0)!=0|!1|(a|0)!=0)){e[(Or()|0)>>2]=34,o=Gr(o|0,r|0,-1,-1)|0,r=Je;break}if(h>>>0>r>>>0|(h|0)==(r|0)&t>>>0>o>>>0){e[(Or()|0)>>2]=34;break}}o=((a|0)<0)<<31>>31,o=Jn(t^a|0,h^o|0,a|0,o|0)|0,r=Je}while(!1);return Je=r,o|0}function vn(s,a){s=s|0,a=a|0;var c=0,o=0,r=0;e[s+104>>2]=a,c=e[s+4>>2]|0,o=e[s+8>>2]|0,r=o-c|0,e[s+108>>2]=r,(a|0)!=0&(r|0)>(a|0)?e[s+100>>2]=c+a:e[s+100>>2]=o}function fr(s){s=s|0;var a=0,c=0,o=0,r=0,t=0,h=0;return c=s+104|0,t=e[c>>2]|0,t|0&&(e[s+108>>2]|0)>=(t|0)?h=4:(a=gs(s)|0,(a|0)>=0?(r=e[c>>2]|0,c=s+8|0,r?(o=e[c>>2]|0,t=e[s+4>>2]|0,c=o,r=r-(e[s+108>>2]|0)+-1|0,(c-t|0)>(r|0)?e[s+100>>2]=t+r:h=9):(o=e[c>>2]|0,c=o,h=9),(h|0)==9&&(e[s+100>>2]=c),c=e[s+4>>2]|0,o&&(s=s+108|0,e[s>>2]=o+1-c+(e[s>>2]|0)),c=c+-1|0,(B[c>>0]|0|0)!=(a|0)&&(M[c>>0]=a)):h=4),(h|0)==4&&(e[s+100>>2]=0,a=-1),a|0}function wo(s){return s=s|0,s>>>0>4294963200&&(e[(Or()|0)>>2]=0-s,s=-1),s|0}function js(s,a){s=+s,a=+a;var c=0,o=0;return A[z>>3]=s,o=e[z>>2]|0,c=e[z+4>>2]|0,A[z>>3]=a,c=e[z+4>>2]&-2147483648|c&2147483647,e[z>>2]=o,e[z+4>>2]=c,+ +A[z>>3]}function qa(s,a){return s=+s,a=+a,+ +js(s,a)}function O0(s,a){s=+s,a=+a;var c=0,o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0;A[z>>3]=s,c=e[z>>2]|0,f=e[z+4>>2]|0,A[z>>3]=a,g=e[z>>2]|0,y=e[z+4>>2]|0,o=ws(c|0,f|0,52)|0,o=o&2047,l=ws(g|0,y|0,52)|0,l=l&2047,_=f&-2147483648,h=an(g|0,y|0,1)|0,d=Je;e:do if(!((h|0)==0&(d|0)==0)&&(t=y&2147483647,!(t>>>0>2146435072|(t|0)==2146435072&g>>>0>0|(o|0)==2047))){if(r=an(c|0,f|0,1)|0,t=Je,!(t>>>0>d>>>0|(t|0)==(d|0)&r>>>0>h>>>0))return+((r|0)==(h|0)&(t|0)==(d|0)?s*0:s);if(o)r=f&1048575|1048576;else{if(o=an(c|0,f|0,12)|0,r=Je,(r|0)>-1|(r|0)==-1&o>>>0>4294967295){t=o,o=0;do o=o+-1|0,t=an(t|0,r|0,1)|0,r=Je;while((r|0)>-1|(r|0)==-1&t>>>0>4294967295)}else o=0;c=an(c|0,f|0,1-o|0)|0,r=Je}if(l)f=y&1048575|1048576;else{if(t=an(g|0,y|0,12)|0,h=Je,(h|0)>-1|(h|0)==-1&t>>>0>4294967295){l=0;do l=l+-1|0,t=an(t|0,h|0,1)|0,h=Je;while((h|0)>-1|(h|0)==-1&t>>>0>4294967295)}else l=0;g=an(g|0,y|0,1-l|0)|0,f=Je}d=Jn(c|0,r|0,g|0,f|0)|0,h=Je,t=(h|0)>-1|(h|0)==-1&d>>>0>4294967295;t:do if((o|0)>(l|0)){for(;;){if(t){if((c|0)==(g|0)&(r|0)==(f|0))break;c=d,r=h}if(c=an(c|0,r|0,1)|0,r=Je,o=o+-1|0,d=Jn(c|0,r|0,g|0,f|0)|0,h=Je,t=(h|0)>-1|(h|0)==-1&d>>>0>4294967295,(o|0)<=(l|0))break t}a=s*0;break e}while(!1);if(t)if((c|0)==(g|0)&(r|0)==(f|0)){a=s*0;break}else r=h,c=d;if(r>>>0<1048576|(r|0)==1048576&c>>>0<0)do c=an(c|0,r|0,1)|0,r=Je,o=o+-1|0;while(r>>>0<1048576|(r|0)==1048576&c>>>0<0);(o|0)>0?(y=Gr(c|0,r|0,0,-1048576)|0,c=Je,o=an(o|0,0,52)|0,c=c|Je,o=y|o):(o=ws(c|0,r|0,1-o|0)|0,c=Je),e[z>>2]=o,e[z+4>>2]=c|_,a=+A[z>>3]}else R=3;while(!1);return(R|0)==3&&(a=s*a,a=a/a),+a}function Ll(s,a){return s=+s,a=+a,+ +O0(s,a)}function Pl(s,a){s=+s,a=a|0;var c=0,o=0,r=0;switch(A[z>>3]=s,c=e[z>>2]|0,o=e[z+4>>2]|0,r=ws(c|0,o|0,52)|0,r=r&2047,r|0){case 0:{s!=0?(s=+Pl(s*18446744073709552e3,a),c=(e[a>>2]|0)+-64|0):c=0,e[a>>2]=c;break}case 2047:break;default:e[a>>2]=r+-1022,e[z>>2]=c,e[z+4>>2]=o&-2146435073|1071644672,s=+A[z>>3]}return+s}function k0(s,a){return s=+s,a=a|0,+ +Pl(s,a)}function bo(s,a){s=+s,a=a|0;var c=0;return(a|0)>1023?(s=s*898846567431158e293,c=a+-1023|0,(c|0)>1023&&(c=a+-2046|0,c=(c|0)>1023?1023:c,s=s*898846567431158e293)):(a|0)<-1022?(s=s*22250738585072014e-324,c=a+1022|0,(c|0)<-1022&&(c=a+2044|0,c=(c|0)<-1022?-1022:c,s=s*22250738585072014e-324)):c=a,c=an(c+1023|0,0,52)|0,a=Je,e[z>>2]=c,e[z+4>>2]=a,+(s*+A[z>>3])}function Vc(s,a){return s=+s,a=a|0,+ +bo(s,a)}function Wc(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0;var r=0,t=0,h=0,l=0,d=0,f=0;d=C,C=C+16|0,r=d,h=o|0?o:2680,o=e[h>>2]|0;e:do if(!a)o?l=15:o=0;else if(t=s|0?s:r,!c)o=-2;else{if(o)r=c,l=9;else{if(o=M[a>>0]|0,r=o&255,o<<24>>24>-1){e[t>>2]=r,o=o<<24>>24!=0&1;break}if(o=r+-194|0,o>>>0>50){l=15;break}o=e[2432+(o<<2)>>2]|0,r=c+-1|0,r&&(a=a+1|0,l=9)}t:do if((l|0)==9){if(s=M[a>>0]|0,f=(s&255)>>>3,(f+-16|f+(o>>26))>>>0>7){l=15;break e}for(;a=a+1|0,o=(s&255)+-128|o<<6,r=r+-1|0,!((o|0)>=0);){if(!r)break t;if(s=M[a>>0]|0,(s&-64)<<24>>24!=-128){l=15;break e}}e[h>>2]=0,e[t>>2]=o,o=c-r|0;break e}while(!1);e[h>>2]=o,o=-2}while(!1);return(l|0)==15&&(e[h>>2]=0,e[(Or()|0)>>2]=84,o=-1),C=d,o|0}function ra(s){return s=s|0,s?s=(e[s>>2]|0)==0:s=1,s&1|0}function Os(s,a,c){s=s|0,a=a|0,c=c|0;do if(s){if(a>>>0<128){M[s>>0]=a,s=1;break}if(a>>>0<2048){M[s>>0]=a>>>6|192,M[s+1>>0]=a&63|128,s=2;break}if(a>>>0<55296|(a&-8192|0)==57344){M[s>>0]=a>>>12|224,M[s+1>>0]=a>>>6&63|128,M[s+2>>0]=a&63|128,s=3;break}if((a+-65536|0)>>>0<1048576){M[s>>0]=a>>>18|240,M[s+1>>0]=a>>>12&63|128,M[s+2>>0]=a>>>6&63|128,M[s+3>>0]=a&63|128,s=4;break}else{e[(Or()|0)>>2]=84,s=-1;break}}else s=1;while(!1);return s|0}function Xa(s,a){return s=s|0,a=a|0,s?s=Os(s,a,0)|0:s=0,s|0}function Ya(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0;if(y=C,C=C+112|0,g=y+40|0,d=y+24|0,l=y+16|0,r=y,f=y+52|0,o=M[a>>0]|0,io(14909,o<<24>>24,4)|0)if(c=Pi(1144)|0,!c)c=0;else{t=c,h=t+112|0;do e[t>>2]=0,t=t+4|0;while((t|0)<(h|0));Za(a,43)|0||(e[c>>2]=o<<24>>24==114?8:4),Za(a,101)|0&&(e[r>>2]=s,e[r+4>>2]=2,e[r+8>>2]=1,pt(221,r|0)|0,o=M[a>>0]|0),o<<24>>24==97?(e[l>>2]=s,e[l+4>>2]=3,o=pt(221,l|0)|0,o&1024||(e[d>>2]=s,e[d+4>>2]=4,e[d+8>>2]=o|1024,pt(221,d|0)|0),a=e[c>>2]|128,e[c>>2]=a):a=e[c>>2]|0,e[c+60>>2]=s,e[c+44>>2]=c+120,e[c+48>>2]=1024,o=c+75|0,M[o>>0]=-1,!(a&8|0)&&(e[g>>2]=s,e[g+4>>2]=21505,e[g+8>>2]=f,(Me(54,g|0)|0)==0)&&(M[o>>0]=10),e[c+32>>2]=14,e[c+36>>2]=4,e[c+40>>2]=5,e[c+12>>2]=2,e[598]|0||(e[c+76>>2]=-1),qi(2416),o=e[603]|0,e[c+56>>2]=o,o&&(e[o+52>>2]=c),e[603]=c,Ie(2416)}else e[(Or()|0)>>2]=22,c=0;return C=y,c|0}function Yu(s){s=s|0;var a=0,c=0,o=0;return c=(Za(s,43)|0)==0,a=M[s>>0]|0,c=c?a<<24>>24!=114&1:2,o=(Za(s,120)|0)==0,c=o?c:c|128,s=(Za(s,101)|0)==0,s=s?c:c|524288,s=a<<24>>24==114?s:s|64,s=a<<24>>24==119?s|512:s,(a<<24>>24==97?s|1024:s)|0}function is(s){return s=s|0,0}function S0(s){s=s|0}function qc(s){s=s|0;var a=0,c=0;return a=C,C=C+16|0,c=a,e[c>>2]=e[s+60>>2],s=wo(Zi(6,c|0)|0)|0,C=a,s|0}function Xc(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0;return f=C,C=C+48|0,t=f+16|0,r=f,o=f+32|0,e[o>>2]=a,h=o+4|0,d=s+48|0,g=e[d>>2]|0,e[h>>2]=c-((g|0)!=0&1),l=s+44|0,e[o+8>>2]=e[l>>2],e[o+12>>2]=g,e[597]|0?(Di(13,s|0),e[r>>2]=e[s+60>>2],e[r+4>>2]=o,e[r+8>>2]=2,o=wo(_0(145,r|0)|0)|0,Xe(0)):(e[t>>2]=e[s+60>>2],e[t+4>>2]=o,e[t+8>>2]=2,o=wo(_0(145,t|0)|0)|0),(o|0)>=1?(h=e[h>>2]|0,o>>>0>h>>>0&&(t=e[l>>2]|0,r=s+4|0,e[r>>2]=t,e[s+8>>2]=t+(o-h),e[d>>2]|0&&(e[r>>2]=t+1,M[a+(c+-1)>>0]=M[t>>0]|0),o=c)):(e[s>>2]=e[s>>2]|o&48^16,e[s+8>>2]=0,e[s+4>>2]=0),C=f,o|0}function Yc(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0;return r=C,C=C+32|0,t=r,o=r+20|0,e[t>>2]=e[s+60>>2],e[t+4>>2]=0,e[t+8>>2]=a,e[t+12>>2]=o,e[t+16>>2]=c,(wo(bn(140,t|0)|0)|0)<0?(e[o>>2]=-1,s=-1):s=e[o>>2]|0,C=r,s|0}function Kc(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0;for(F=C,C=C+48|0,y=F+16|0,g=F,o=F+32|0,_=s+28|0,r=e[_>>2]|0,e[o>>2]=r,R=s+20|0,r=(e[R>>2]|0)-r|0,e[o+4>>2]=r,e[o+8>>2]=a,e[o+12>>2]=c,d=s+60|0,f=s+44|0,a=2,r=r+c|0;;){if(e[597]|0?(Di(14,s|0),e[g>>2]=e[d>>2],e[g+4>>2]=o,e[g+8>>2]=a,h=wo(M0(146,g|0)|0)|0,Xe(0)):(e[y>>2]=e[d>>2],e[y+4>>2]=o,e[y+8>>2]=a,h=wo(M0(146,y|0)|0)|0),(r|0)==(h|0)){r=6;break}if((h|0)<0){r=8;break}r=r-h|0,t=e[o+4>>2]|0,h>>>0<=t>>>0?(a|0)==2?(e[_>>2]=(e[_>>2]|0)+h,l=t,a=2):l=t:(l=e[f>>2]|0,e[_>>2]=l,e[R>>2]=l,l=e[o+12>>2]|0,h=h-t|0,o=o+8|0,a=a+-1|0),e[o>>2]=(e[o>>2]|0)+h,e[o+4>>2]=l-h}return(r|0)==6?(y=e[f>>2]|0,e[s+16>>2]=y+(e[s+48>>2]|0),s=y,e[_>>2]=s,e[R>>2]=s):(r|0)==8&&(e[s+16>>2]=0,e[_>>2]=0,e[R>>2]=0,e[s>>2]=e[s>>2]|32,(a|0)==2?c=0:c=c-(e[o+4>>2]|0)|0),C=F,c|0}function na(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0;return r=C,C=C+80|0,o=r,e[s+36>>2]=4,!(e[s>>2]&64|0)&&(e[o>>2]=e[s+60>>2],e[o+4>>2]=21505,e[o+8>>2]=r+12,(Me(54,o|0)|0)!=0)&&(M[s+75>>0]=-1),o=Kc(s,a,c)|0,C=r,o|0}function Fl(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0;return o=s+84|0,t=e[o>>2]|0,h=c+256|0,r=io(t,0,h)|0,r=r|0?r-t|0:h,c=r>>>0<c>>>0?r:c,un(a|0,t|0,c|0)|0,e[s+4>>2]=t+c,a=t+r|0,e[s+8>>2]=a,e[o>>2]=a,c|0}function yr(s){s=s|0;var a=0,c=0;return a=s+74|0,c=M[a>>0]|0,M[a>>0]=c+255|c,a=s+20|0,c=s+44|0,(e[a>>2]|0)>>>0>(e[c>>2]|0)>>>0&&Bn[e[s+36>>2]&15](s,0,0)|0,e[s+16>>2]=0,e[s+28>>2]=0,e[a>>2]=0,a=e[s>>2]|0,a&20?(a&4&&(e[s>>2]=a|32),a=-1):(a=e[c>>2]|0,e[s+8>>2]=a,e[s+4>>2]=a,a=0),a|0}function rs(s){s=s|0;var a=0,c=0;return a=s+74|0,c=M[a>>0]|0,M[a>>0]=c+255|c,a=e[s>>2]|0,a&8?(e[s>>2]=a|32,a=-1):(e[s+8>>2]=0,e[s+4>>2]=0,a=e[s+44>>2]|0,e[s+28>>2]=a,e[s+20>>2]=a,e[s+16>>2]=a+(e[s+48>>2]|0),a=0),a|0}function gs(s){s=s|0;var a=0,c=0;return c=C,C=C+16|0,a=c,!(e[s+8>>2]|0)&&yr(s)|0?a=-1:(Bn[e[s+32>>2]&15](s,a,1)|0)==1?a=B[a>>0]|0:a=-1,C=c,a|0}function eo(s){s=s|0;var a=0,c=0,o=0;return o=(e[s>>2]&1|0)!=0,o||(qi(2416),c=e[s+52>>2]|0,a=s+56|0,c&&(e[c+56>>2]=e[a>>2]),a=e[a>>2]|0,a&&(e[a+52>>2]=c),(e[603]|0)==(s|0)&&(e[603]=a),Ie(2416)),a=to(s)|0,a=El[e[s+12>>2]&31](s)|0|a,c=e[s+92>>2]|0,c&&li(c),o||li(s),a|0}function ks(s){s=s|0;var a=0;return(e[s+76>>2]|0)>-1&&(a=(is(s)|0)==0),s=(e[s>>2]|0)>>>5&1,s|0}function to(s){s=s|0;var a=0,c=0;do if(s){if((e[s+76>>2]|0)<=-1){a=Xi(s)|0;break}c=(is(s)|0)==0,a=Xi(s)|0,c||S0(s)}else{if(e[660]|0?a=to(e[660]|0)|0:a=0,qi(2416),s=e[603]|0,s)do(e[s+76>>2]|0)>-1?c=is(s)|0:c=0,(e[s+20>>2]|0)>>>0>(e[s+28>>2]|0)>>>0&&(a=Xi(s)|0|a),c&&S0(s),s=e[s+56>>2]|0;while(s|0);Ie(2416)}while(!1);return a|0}function Co(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0;if((e[c+76>>2]|0)>-1?y=is(c)|0:y=0,o=a+-1|0,(a|0)<2)_=c+74|0,g=M[_>>0]|0,M[_>>0]=g+255|g,y&&S0(c),o?s=0:M[s>>0]=0;else{e:do if(o){for(f=c+4|0,g=c+8|0,r=s;;){if(t=e[f>>2]|0,R=t,l=(e[g>>2]|0)-R|0,h=io(t,10,l)|0,F=(h|0)==0,h=F?l:1-R+h|0,R=h>>>0<o>>>0,h=R?h:o,un(r|0,t|0,h|0)|0,t=e[f>>2]|0,l=t+h|0,e[f>>2]=l,a=r+h|0,d=o-h|0,!(F&R)){_=18;break e}if(l>>>0<(e[g>>2]|0)>>>0)h=h+1|0,e[f>>2]=t+h,t=B[l>>0]|0;else{if(o=gs(c)|0,(o|0)<0)break;h=h+1|0,t=o}if(o=d+-1|0,r=r+h|0,M[a>>0]=t,!((o|0)!=0&(t&255|0)!=10)){a=r,_=18;break e}}(a|0)!=(s|0)&&e[c>>2]&16|0?_=18:s=0}else a=s,_=18;while(!1);(_|0)==18&&(s?M[a>>0]=0:s=0),y&&S0(c)}return s|0}function k1(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0;return r=C,C=C+32|0,o=r+16|0,c=r,io(14909,M[a>>0]|0,4)|0?(t=Yu(a)|0|32768,e[c>>2]=s,e[c+4>>2]=t,e[c+8>>2]=438,c=wo(rr(5,c|0)|0)|0,(c|0)>=0?(s=Ya(c,a)|0,s||(e[o>>2]=c,Zi(6,o|0)|0,s=0)):s=0):(e[(Or()|0)>>2]=22,s=0),C=r,s|0}function Ol(s,a){return s=s|0,a=a|0,(c0(s,xo(s)|0,1,a)|0)+-1|0}function Ka(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0;var r=0,t=0,h=0,l=0,d=0,f=0;l=Oe(c,a)|0,(e[o+76>>2]|0)>-1?d=is(o)|0:d=0,r=o+74|0,t=M[r>>0]|0,M[r>>0]=t+255|t,r=o+4|0,t=e[r>>2]|0,h=(e[o+8>>2]|0)-t|0,(h|0)>0?(h=h>>>0<l>>>0?h:l,un(s|0,t|0,h|0)|0,e[r>>2]=t+h,s=s+h|0,r=l-h|0):r=l;e:do if(!r)f=13;else{for(h=o+32|0,t=r;;){if(yr(o)|0){c=t;break}if(r=Bn[e[h>>2]&15](o,s,t)|0,(r+1|0)>>>0<2){c=t;break}if((t|0)==(r|0)){f=13;break e}else s=s+r|0,t=t-r|0}d&&S0(o),c=((l-c|0)>>>0)/(a>>>0)|0}while(!1);return(f|0)==13&&d&&S0(o),c|0}function sa(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0;return(c|0)==1&&(a=a-(e[s+8>>2]|0)+(e[s+4>>2]|0)|0),r=s+20|0,o=s+28|0,(e[r>>2]|0)>>>0>(e[o>>2]|0)>>>0&&(Bn[e[s+36>>2]&15](s,0,0)|0,(e[r>>2]|0)==0)?a=-1:(e[s+16>>2]=0,e[o>>2]=0,e[r>>2]=0,(Bn[e[s+40>>2]&15](s,a,c)|0)<0?a=-1:(e[s+8>>2]=0,e[s+4>>2]=0,e[s>>2]=e[s>>2]&-17,a=0)),a|0}function N0(s,a,c){s=s|0,a=a|0,c=c|0;var o=0;return(e[s+76>>2]|0)>-1?(o=(is(s)|0)==0,a=sa(s,a,c)|0,o||S0(s)):a=sa(s,a,c)|0,a|0}function N1(s,a,c){return s=s|0,a=a|0,c=c|0,N0(s,a,c)|0}function Ns(s){s=s|0;var a=0;return e[s>>2]&128?a=(e[s+20>>2]|0)>>>0>(e[s+28>>2]|0)>>>0?2:1:a=1,a=Bn[e[s+40>>2]&15](s,0,a)|0,(a|0)>=0&&(a=a-(e[s+8>>2]|0)+(e[s+4>>2]|0)+(e[s+20>>2]|0)-(e[s+28>>2]|0)|0),a|0}function U1(s){s=s|0;var a=0;return(e[s+76>>2]|0)>-1&&(a=(is(s)|0)==0),s=Ns(s)|0,s|0}function Q1(s){return s=s|0,U1(s)|0}function Jt(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0;o=c+16|0,r=e[o>>2]|0,r?t=4:rs(c)|0?o=0:(r=e[o>>2]|0,t=4);e:do if((t|0)==4){if(h=c+20|0,t=e[h>>2]|0,(r-t|0)>>>0<a>>>0){o=Bn[e[c+36>>2]&15](c,s,a)|0;break}t:do if((M[c+75>>0]|0)>-1){for(o=a;;){if(!o){r=t,o=0;break t}if(r=o+-1|0,(M[s+r>>0]|0)==10)break;o=r}if((Bn[e[c+36>>2]&15](c,s,o)|0)>>>0<o>>>0)break e;a=a-o|0,s=s+o|0,r=e[h>>2]|0}else r=t,o=0;while(!1);un(r|0,s|0,a|0)|0,e[h>>2]=(e[h>>2]|0)+a,o=o+a|0}while(!1);return o|0}function c0(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0;var r=0,t=0;return r=Oe(c,a)|0,(e[o+76>>2]|0)>-1?(t=(is(o)|0)==0,s=Jt(s,r,o)|0,t||S0(o)):s=Jt(s,r,o)|0,(s|0)!=(r|0)&&(c=(s>>>0)/(a>>>0)|0),c|0}function Ku(s){s=s|0;var a=0;(e[s+76>>2]|0)>-1?(a=(is(s)|0)==0,sa(s,0,0)|0,e[s>>2]=e[s>>2]&-33,a||S0(s)):(sa(s,0,0)|0,e[s>>2]=e[s>>2]&-33)}function en(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0;return o=C,C=C+16|0,r=o,e[r>>2]=c,c=Ja(s,a,r)|0,C=o,c|0}function U0(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0,l=0;l=C,C=C+16|0,o=l,r=Pi(240)|0;do if(r){if(e[o>>2]=e[c>>2],o=w0(r,240,a,o)|0,o>>>0<240){a=V1(r,o+1|0)|0,e[s>>2]=a|0?a:r;break}li(r),(o|0)>=0&&(h=o+1|0,t=Pi(h)|0,e[s>>2]=t,(t|0)!=0)?o=w0(t,h,a,c)|0:o=-1}else o=-1;while(!1);return C=l,o|0}function Us(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0;ne=C,C=C+224|0,y=ne+80|0,F=ne+96|0,R=ne,_=ne+136|0,o=F,r=o+40|0;do e[o>>2]=0,o=o+4|0;while((o|0)<(r|0));return e[y>>2]=e[c>>2],(G1(0,a,y,R,F)|0)<0?c=-1:((e[s+76>>2]|0)>-1?f=is(s)|0:f=0,c=e[s>>2]|0,g=c&32,(M[s+74>>0]|0)<1&&(e[s>>2]=c&-33),c=s+48|0,e[c>>2]|0?o=G1(s,a,y,R,F)|0:(r=s+44|0,t=e[r>>2]|0,e[r>>2]=_,h=s+28|0,e[h>>2]=_,l=s+20|0,e[l>>2]=_,e[c>>2]=80,d=s+16|0,e[d>>2]=_+80,o=G1(s,a,y,R,F)|0,t&&(Bn[e[s+36>>2]&15](s,0,0)|0,o=e[l>>2]|0?o:-1,e[r>>2]=t,e[c>>2]=0,e[d>>2]=0,e[h>>2]=0,e[l>>2]=0)),c=e[s>>2]|0,e[s>>2]=c|g,f&&S0(s),c=c&32|0?-1:o),C=ne,c|0}function Ju(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0,Ze=0,nt=0,lt=0,Ye=0,Qt=0,Et=0,Ft=0,Ht=0,St=0;Ht=C,C=C+304|0,We=Ht+16|0,nt=Ht+8|0,Ze=Ht+33|0,lt=Ht,W=Ht+32|0,(e[s+76>>2]|0)>-1?Ft=is(s)|0:Ft=0,o=M[a>>0]|0;e:do if(o<<24>>24){Ye=s+4|0,Qt=s+100|0,Ae=s+108|0,q=s+8|0,ie=Ze+10|0,ae=Ze+33|0,se=nt+4|0,X=Ze+46|0,U=Ze+94|0,t=o,o=0,h=a,y=0,r=0,a=0;t:for(;;){i:do if(ms(t&255)|0){for(;t=h+1|0,ms(B[t>>0]|0)|0;)h=t;vn(s,0);do t=e[Ye>>2]|0,t>>>0<(e[Qt>>2]|0)>>>0?(e[Ye>>2]=t+1,t=B[t>>0]|0):t=fr(s)|0;while(ms(t)|0);t=e[Ye>>2]|0,e[Qt>>2]|0&&(t=t+-1|0,e[Ye>>2]=t),l=(e[Ae>>2]|0)+y+t-(e[q>>2]|0)|0}else{t=(M[h>>0]|0)==37;s:do if(t){f=h+1|0,l=M[f>>0]|0;r:do switch(l<<24>>24){case 37:break s;case 42:{J=0,l=h+2|0;break}default:{if(l=(l&255)+-48|0,l>>>0<10&&(M[h+2>>0]|0)==36){for(e[We>>2]=e[c>>2];J=(e[We>>2]|0)+3&-4,t=e[J>>2]|0,e[We>>2]=J+4,l>>>0>1;)l=l+-1|0;J=t,l=h+3|0;break r}l=(e[c>>2]|0)+3&-4,J=e[l>>2]|0,e[c>>2]=l+4,l=f}}while(!1);if(t=M[l>>0]|0,h=t&255,(h+-48|0)>>>0<10)for(t=0;f=(t*10|0)+-48+h|0,l=l+1|0,t=M[l>>0]|0,h=t&255,!((h+-48|0)>>>0>=10);)t=f;else f=0;switch(t<<24>>24==109?(l=l+1|0,g=M[l>>0]|0,t=(J|0)!=0&1,r=0,a=0):(g=t,t=0),h=l+1|0,g&255|0){case 104:{ne=(M[h>>0]|0)==104,h=ne?l+2|0:h,l=ne?-2:-1;break}case 108:{ne=(M[h>>0]|0)==108,h=ne?l+2|0:h,l=ne?3:1;break}case 106:{l=3;break}case 116:case 122:{l=1;break}case 76:{l=2;break}case 110:case 112:case 67:case 83:case 91:case 99:case 115:case 88:case 71:case 70:case 69:case 65:case 103:case 102:case 101:case 97:case 120:case 117:case 111:case 105:case 100:{h=l,l=0;break}default:{Et=152;break t}}switch(g=B[h>>0]|0,_=(g&47|0)==3,g=_?g|32:g,_=_?1:l,g|0){case 99:{ne=y,F=(f|0)<1?1:f;break}case 91:{ne=y,F=f;break}case 110:{if(!J){l=y;break i}switch(_|0){case-2:{M[J>>0]=y,l=y;break i}case-1:{E[J>>1]=y,l=y;break i}case 0:{e[J>>2]=y,l=y;break i}case 1:{e[J>>2]=y,l=y;break i}case 3:{l=J,e[l>>2]=y,e[l+4>>2]=((y|0)<0)<<31>>31,l=y;break i}default:{l=y;break i}}}default:{vn(s,0);do l=e[Ye>>2]|0,l>>>0<(e[Qt>>2]|0)>>>0?(e[Ye>>2]=l+1,l=B[l>>0]|0):l=fr(s)|0;while(ms(l)|0);l=e[Ye>>2]|0,e[Qt>>2]|0&&(l=l+-1|0,e[Ye>>2]=l),ne=(e[Ae>>2]|0)+y+l-(e[q>>2]|0)|0,F=f}}if(vn(s,F),l=e[Ye>>2]|0,f=e[Qt>>2]|0,l>>>0<f>>>0)e[Ye>>2]=l+1;else{if((fr(s)|0)<0){Et=152;break t}f=e[Qt>>2]|0}f&&(e[Ye>>2]=(e[Ye>>2]|0)+-1);r:do switch(g|0){case 91:case 99:case 115:{R=(g|0)==99;n:do if((g&239|0)==99)gt(Ze|0,-1,257)|0,M[Ze>>0]=0,(g|0)==115&&(M[ae>>0]=0,M[ie>>0]=0,M[ie+1>>0]=0,M[ie+2>>0]=0,M[ie+3>>0]=0,M[ie+4>>0]=0);else{switch(St=h+1|0,y=(M[St>>0]|0)==94,l=y&1,g=y?St:h,h=y?h+2|0:St,gt(Ze|0,y&1|0,257)|0,M[Ze>>0]=0,M[h>>0]|0){case 45:{y=(l^1)&255,M[X>>0]=y,h=g+2|0;break}case 93:{y=(l^1)&255,M[U>>0]=y,h=g+2|0;break}default:y=(l^1)&255}for(;;){l=M[h>>0]|0;o:do switch(l<<24>>24){case 0:{Et=152;break t}case 93:break n;case 45:{switch(g=h+1|0,l=M[g>>0]|0,l<<24>>24){case 93:case 0:{l=45;break o}default:}if(h=M[h+-1>>0]|0,(h&255)<(l&255)){h=h&255;do h=h+1|0,M[Ze+h>>0]=y,l=M[g>>0]|0;while((h|0)<(l&255|0));h=g}else h=g;break}default:}while(!1);M[Ze+((l&255)+1)>>0]=y,h=h+1|0}}while(!1);g=R?F+1|0:31,y=(_|0)==1,_=(t|0)!=0;n:do if(y){if(_){if(a=Pi(g<<2)|0,!a){r=0,Et=152;break t}}else a=J;e[nt>>2]=0,e[se>>2]=0,r=0;o:for(;;){f=(a|0)==0;do{a:for(;;){if(l=e[Ye>>2]|0,l>>>0<(e[Qt>>2]|0)>>>0?(e[Ye>>2]=l+1,l=B[l>>0]|0):l=fr(s)|0,!(M[Ze+(l+1)>>0]|0))break o;switch(M[W>>0]=l,Wc(lt,W,1,nt)|0){case-1:{r=0,Et=152;break t}case-2:break;default:break a}}f||(e[a+(r<<2)>>2]=e[lt>>2],r=r+1|0)}while(!(_&(r|0)==(g|0)));if(r=g<<1|1,l=V1(a,r<<2)|0,!l){r=0,Et=152;break t}St=g,g=r,a=l,r=St}if(ra(nt)|0)f=r,r=0;else{r=0,Et=152;break t}}else{if(_){if(r=Pi(g)|0,r)l=0;else{r=0,a=0,Et=152;break t}for(;;){do{if(a=e[Ye>>2]|0,a>>>0<(e[Qt>>2]|0)>>>0?(e[Ye>>2]=a+1,a=B[a>>0]|0):a=fr(s)|0,!(M[Ze+(a+1)>>0]|0)){f=l,a=0;break n}M[r+l>>0]=a,l=l+1|0}while((l|0)!=(g|0));if(a=g<<1|1,l=V1(r,a)|0,l)St=g,g=a,r=l,l=St;else{a=0,Et=152;break t}}}if(J)for(r=0;;){if(a=e[Ye>>2]|0,a>>>0<f>>>0?(e[Ye>>2]=a+1,a=B[a>>0]|0):a=fr(s)|0,!(M[Ze+(a+1)>>0]|0)){f=r,r=J,a=0;break n}M[J+r>>0]=a,f=e[Qt>>2]|0,r=r+1|0}else for(r=f;;){if(a=e[Ye>>2]|0,a>>>0<r>>>0?(e[Ye>>2]=a+1,a=B[a>>0]|0):a=fr(s)|0,!(M[Ze+(a+1)>>0]|0)){f=0,r=0,a=0;break n}r=e[Qt>>2]|0}}while(!1);if(l=e[Ye>>2]|0,e[Qt>>2]|0&&(l=l+-1|0,e[Ye>>2]=l),l=l-(e[q>>2]|0)+(e[Ae>>2]|0)|0,!l||!((l|0)==(F|0)|R^1))break t;do if(_)if(y){e[J>>2]=a;break}else{e[J>>2]=r;break}while(!1);if(!R){if(a&&(e[a+(f<<2)>>2]=0),!r){r=0;break r}M[r+f>>0]=0}break}case 120:case 88:case 112:{l=16,Et=134;break}case 111:{l=8,Et=134;break}case 117:case 100:{l=10,Et=134;break}case 105:{l=0,Et=134;break}case 71:case 103:case 70:case 102:case 69:case 101:case 65:case 97:{if(d=+Ii(s,_,0),(e[Ae>>2]|0)==((e[q>>2]|0)-(e[Ye>>2]|0)|0))break t;if(J)switch(_|0){case 0:{P[J>>2]=d;break r}case 1:{A[J>>3]=d;break r}case 2:{A[J>>3]=d;break r}default:break r}break}default:}while(!1);r:do if((Et|0)==134){if(Et=0,l=ia(s,l,0,-1,-1)|0,(e[Ae>>2]|0)==((e[q>>2]|0)-(e[Ye>>2]|0)|0))break t;if((J|0)!=0&(g|0)==112){e[J>>2]=l;break}if(J)switch(_|0){case-2:{M[J>>0]=l;break r}case-1:{E[J>>1]=l;break r}case 0:{e[J>>2]=l;break r}case 1:{e[J>>2]=l;break r}case 3:{St=J,e[St>>2]=l,e[St+4>>2]=Je;break r}default:break r}}while(!1);o=((J|0)!=0&1)+o|0,l=(e[Ae>>2]|0)+ne+(e[Ye>>2]|0)-(e[q>>2]|0)|0;break i}while(!1);if(h=h+(t&1)|0,vn(s,0),t=e[Ye>>2]|0,t>>>0<(e[Qt>>2]|0)>>>0?(e[Ye>>2]=t+1,t=B[t>>0]|0):t=fr(s)|0,(t|0)!=(B[h>>0]|0)){Et=21;break t}l=y+1|0}while(!1);if(h=h+1|0,t=M[h>>0]|0,t<<24>>24)y=l;else break e}if((Et|0)==21){if(e[Qt>>2]|0&&(e[Ye>>2]=(e[Ye>>2]|0)+-1),(o|0)!=0|(t|0)>-1)break;o=0,Et=153}else(Et|0)==152&&(o||(o=t,Et=153));(Et|0)==153&&(t=o,o=-1),t&&(li(r),li(a))}else o=0;while(!1);return Ft&&S0(s),C=Ht,o|0}function w0(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0;var r=0,t=0,h=0,l=0,d=0,f=0,g=0;g=C,C=C+128|0,r=g+112|0,f=g,t=f,h=2684,l=t+112|0;do e[t>>2]=e[h>>2],t=t+4|0,h=h+4|0;while((t|0)<(l|0));return(a+-1|0)>>>0>2147483646?a?(e[(Or()|0)>>2]=75,a=-1):(a=1,d=4):(r=s,d=4),(d|0)==4&&(d=-2-r|0,d=a>>>0>d>>>0?d:a,e[f+48>>2]=d,s=f+20|0,e[s>>2]=r,e[f+44>>2]=r,a=r+d|0,r=f+16|0,e[r>>2]=a,e[f+28>>2]=a,a=Us(f,c,o)|0,d&&(c=e[s>>2]|0,M[c+(((c|0)==(e[r>>2]|0))<<31>>31)>>0]=0)),C=g,a|0}function Ja(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0;t=C,C=C+112|0,o=t,r=o,h=r+112|0;do e[r>>2]=0,r=r+4|0;while((r|0)<(h|0));return e[o+32>>2]=15,e[o+44>>2]=s,e[o+76>>2]=-1,e[o+84>>2]=s,h=Ju(o,a,c)|0,C=t,h|0}function H1(s){s=s|0;for(var a=0,c=0,o=0,r=0;a=s+1|0,ms(M[s>>0]|0)|0;)s=a;switch(c=M[s>>0]|0,c<<24>>24|0){case 45:{o=1,r=5;break}case 43:{o=0,r=5;break}default:o=0}if((r|0)==5&&(s=a,c=M[a>>0]|0),a=(c<<24>>24)+-48|0,a>>>0<10){c=s,s=0;do c=c+1|0,s=(s*10|0)-a|0,a=(M[c>>0]|0)+-48|0;while(a>>>0<10)}else s=0;return(o|0?s:0-s|0)|0}function In(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0;var r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0;if(ne=C,C=C+208|0,_=ne+8|0,R=ne,r=Oe(c,a)|0,y=R,e[y>>2]=1,e[y+4>>2]=0,r){for(l=r-c|0,e[_+4>>2]=c,e[_>>2]=c,t=c,a=c,h=2;a=a+c+t|0,e[_+(h<<2)>>2]=a,a>>>0<r>>>0;)y=t,t=a,h=h+1|0,a=y;if(y=0-c|0,d=s+l|0,g=R+4|0,(l|0)>0)for(l=d,r=1,h=1;;){do if((r&3|0)==3)oa(s,c,o,h,_),f=e[g>>2]|0,a=f<<30|(e[R>>2]|0)>>>2,e[R>>2]=a,e[g>>2]=f>>>2,h=h+2|0;else{if(a=h+-1|0,(e[_+(a<<2)>>2]|0)>>>0<(l-s|0)>>>0?oa(s,c,o,h,_):ja(s,c,o,R,h,0,_),(h|0)==1){a=e[R>>2]|0,e[g>>2]=a>>>31|e[g>>2]<<1,a=a<<1,e[R>>2]=a,h=0;break}a>>>0>31?(r=e[R>>2]|0,e[g>>2]=r,e[R>>2]=0,a=h+-33|0,t=0):(r=e[g>>2]|0,t=e[R>>2]|0),e[g>>2]=t>>>(32-a|0)|r<<a,a=t<<a,e[R>>2]=a,h=1}while(!1);if(r=a|1,e[R>>2]=r,a=s+c|0,a>>>0>=d>>>0){r=a;break}else s=a}else r=s,h=1;if(ja(r,c,o,R,h,0,_),f=R+4|0,a=e[R>>2]|0,!((h|0)==1&(a|0)==1&(e[f>>2]|0)==0))for(t=r;;){if((h|0)<2){r=a+-1|0;do if(r){if(r&1)F=24;else{l=r,r=0;do r=r+1|0,l=l>>>1;while(!(l&1|0));r||(F=24)}if((F|0)==24){if(F=0,d=e[g>>2]|0,!d){r=64,F=30;break}if(!(d&1))l=d,r=0;else{s=0,l=d,r=0;break}for(;;)if(s=r+1|0,l=l>>>1,l&1){l=s;break}else r=s;if(l)r=r+33|0;else{s=0,l=d,r=0;break}}r>>>0>31?F=30:(s=r,l=e[g>>2]|0)}else r=32,F=30;while(!1);(F|0)==30&&(F=0,a=e[g>>2]|0,e[R>>2]=a,e[g>>2]=0,s=r+-32|0,l=0),e[R>>2]=l<<32-s|a>>>s,e[g>>2]=l>>>s,t=t+y|0,r=r+h|0}else s=a>>>30,d=s|e[g>>2]<<2,r=h+-2|0,e[R>>2]=(a<<1&2147483646|s<<31)^3,e[g>>2]=d>>>1,ja(t+(0-((e[_+(r<<2)>>2]|0)+c))|0,c,o,R,h+-1|0,1,_),d=e[R>>2]|0,e[g>>2]=d>>>31|e[g>>2]<<1,e[R>>2]=d<<1|1,t=t+y|0,ja(t,c,o,R,r,1,_);if(a=e[R>>2]|0,(r|0)==1&(a|0)==1&(e[f>>2]|0)==0)break;h=r}}C=ne}function io(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0;t=a&255,o=(c|0)!=0;e:do if(o&(s&3|0)!=0)for(r=a&255;;){if((M[s>>0]|0)==r<<24>>24){h=6;break e}if(s=s+1|0,c=c+-1|0,o=(c|0)!=0,!(o&(s&3|0)!=0)){h=5;break}}else h=5;while(!1);(h|0)==5&&(o?h=6:c=0);e:do if((h|0)==6&&(r=a&255,(M[s>>0]|0)!=r<<24>>24)){o=Oe(t,16843009)|0;t:do if(c>>>0>3){for(;t=e[s>>2]^o,!((t&-2139062144^-2139062144)&t+-16843009);)if(s=s+4|0,c=c+-4|0,c>>>0<=3){h=11;break t}}else h=11;while(!1);if((h|0)==11&&!c){c=0;break}for(;;){if((M[s>>0]|0)==r<<24>>24)break e;if(s=s+1|0,c=c+-1|0,!c){c=0;break}}}while(!1);return(c|0?s:0)|0}function nr(s,a,c){s=s|0,a=a|0,c=c|0;var o=0;o=a&255;do{if(!c){a=0;break}c=c+-1|0,a=s+c|0}while((M[a>>0]|0)!=o<<24>>24);return a|0}function Zu(s,a){s=s|0,a=a|0;var c=0,o=0;c=a;e:do if((c^s)&3)o=8;else{if(c&3)do{if(c=M[a>>0]|0,M[s>>0]=c,!(c<<24>>24))break e;a=a+1|0,s=s+1|0}while(a&3|0);if(c=e[a>>2]|0,!((c&-2139062144^-2139062144)&c+-16843009))for(o=s;a=a+4|0,s=o+4|0,e[o>>2]=c,c=e[a>>2]|0,!((c&-2139062144^-2139062144)&c+-16843009);)o=s;o=8}while(!1);if((o|0)==8&&(o=M[a>>0]|0,M[s>>0]=o,o<<24>>24))do a=a+1|0,s=s+1|0,o=M[a>>0]|0,M[s>>0]=o;while(o<<24>>24);return s|0}function $u(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0;r=a;do if((r^s)&3)t=11;else{o=(c|0)!=0;e:do if(o&(r&3|0)!=0)for(;;){if(r=M[a>>0]|0,M[s>>0]=r,!(r<<24>>24))break e;if(c=c+-1|0,a=a+1|0,s=s+1|0,o=(c|0)!=0,!(o&(a&3|0)!=0)){t=5;break}}else t=5;while(!1);if((t|0)==5&&!o){c=0;break}if(M[a>>0]|0){e:do if(c>>>0>3)do{if(o=e[a>>2]|0,(o&-2139062144^-2139062144)&o+-16843009)break e;e[s>>2]=o,c=c+-4|0,a=a+4|0,s=s+4|0}while(c>>>0>3);while(!1);t=11}}while(!1);e:do if((t|0)==11)if(!c)c=0;else for(;;){if(t=M[a>>0]|0,M[s>>0]=t,!(t<<24>>24))break e;if(c=c+-1|0,s=s+1|0,c)a=a+1|0;else{c=0;break}}while(!1);return gt(s|0,0,c|0)|0,s|0}function Za(s,a){return s=s|0,a=a|0,s=Jc(s,a)|0,((M[s>>0]|0)==(a&255)<<24>>24?s:0)|0}function Jc(s,a){s=s|0,a=a|0;var c=0,o=0,r=0;o=a&255;e:do if(!o)s=s+(xo(s)|0)|0;else{if(s&3){c=a&255;do{if(r=M[s>>0]|0,!(r<<24>>24)||r<<24>>24==c<<24>>24)break e;s=s+1|0}while(s&3|0)}o=Oe(o,16843009)|0,c=e[s>>2]|0;t:do if(!((c&-2139062144^-2139062144)&c+-16843009))do{if(r=c^o,(r&-2139062144^-2139062144)&r+-16843009)break t;s=s+4|0,c=e[s>>2]|0}while(!((c&-2139062144^-2139062144)&c+-16843009|0));while(!1);for(c=a&255;r=M[s>>0]|0,!(!(r<<24>>24)||r<<24>>24==c<<24>>24);)s=s+1|0}while(!1);return s|0}function kl(s,a){return s=s|0,a=a|0,Zu(s,a)|0,s|0}function ju(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0;if(r=C,C=C+32|0,o=r,c=M[a>>0]|0,c<<24>>24&&M[a+1>>0]|0){e[o>>2]=0,e[o+4>>2]=0,e[o+8>>2]=0,e[o+12>>2]=0,e[o+16>>2]=0,e[o+20>>2]=0,e[o+24>>2]=0,e[o+28>>2]=0;do t=o+(((c&255)>>>5&255)<<2)|0,e[t>>2]=e[t>>2]|1<<(c&31),a=a+1|0,c=M[a>>0]|0;while(c<<24>>24);a=M[s>>0]|0;e:do if(!(a<<24>>24))c=s;else{c=s;do{if(e[o+(((a&255)>>>5&255)<<2)>>2]&1<<(a&31))break e;c=c+1|0,a=M[c>>0]|0}while(a<<24>>24)}while(!1);c=c-s|0}else c=(Jc(s,c<<24>>24)|0)-s|0;return C=r,c|0}function z1(s){s=s|0;var a=0,c=0;return c=(xo(s)|0)+1|0,a=Pi(c)|0,a?un(a|0,s|0,c|0)|0:a=0,a|0}function xo(s){s=s|0;var a=0,c=0,o=0;o=s;e:do if(!(o&3))c=4;else for(a=s,s=o;;){if(!(M[a>>0]|0))break e;if(a=a+1|0,s=a,!(s&3)){s=a,c=4;break}}while(!1);if((c|0)==4){for(;a=e[s>>2]|0,!((a&-2139062144^-2139062144)&a+-16843009);)s=s+4|0;if((a&255)<<24>>24)do s=s+1|0;while(M[s>>0]|0)}return s-o|0}function vi(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0;o=s+(xo(s)|0)|0;e:do if(c)for(;;){if(r=M[a>>0]|0,!(r<<24>>24))break e;if(c=c+-1|0,t=o+1|0,M[o>>0]=r,c)a=a+1|0,o=t;else{o=t;break}}while(!1);return M[o>>0]=0,s|0}function e2(s,a,c){return s=s|0,a=a|0,c=c|0,$u(s,a,c)|0,s|0}function W0(s,a){return s=s|0,a=a|0,nr(s,a,(xo(s)|0)+1|0)|0}function Nl(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0;t=C,C=C+32|0,r=t,e[r>>2]=0,e[r+4>>2]=0,e[r+8>>2]=0,e[r+12>>2]=0,e[r+16>>2]=0,e[r+20>>2]=0,e[r+24>>2]=0,e[r+28>>2]=0,o=M[a>>0]|0;do if(!(o<<24>>24))a=0;else{if(M[a+1>>0]|0)c=a,a=o;else{for(a=s;(M[a>>0]|0)==o<<24>>24;)a=a+1|0;a=a-s|0;break}do o=r+(((a&255)>>>5&255)<<2)|0,e[o>>2]=e[o>>2]|1<<(a&31),c=c+1|0,a=M[c>>0]|0;while(a<<24>>24);c=M[s>>0]|0;e:do if(!(c<<24>>24))a=s;else{a=s;do{if(!(e[r+(((c&255)>>>5&255)<<2)>>2]&1<<(c&31)))break e;a=a+1|0,c=M[a>>0]|0}while(c<<24>>24)}while(!1);a=a-s|0}while(!1);return C=t,a|0}function _o(s,a){s=s|0,a=a|0;var c=0,o=0;s?(o=s,c=3):(s=e[699]|0,s?(o=s,c=3):s=0);do if((c|0)==3){if(c=Nl(o,a)|0,s=o+c|0,!(M[s>>0]|0)){e[699]=0,s=0;break}if(c=(ju(s,a)|0)+c|0,a=o+c|0,e[699]=a,M[a>>0]|0){e[699]=o+(c+1),M[a>>0]=0;break}else{e[699]=0;break}}while(!1);return s|0}function T0(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0,l=0;switch(h=s+4|0,c=e[h>>2]|0,l=s+100|0,c>>>0<(e[l>>2]|0)>>>0?(e[h>>2]=c+1,c=B[c>>0]|0):c=fr(s)|0,c|0){case 43:case 45:{o=(c|0)==45&1,c=e[h>>2]|0,c>>>0<(e[l>>2]|0)>>>0?(e[h>>2]=c+1,c=B[c>>0]|0):c=fr(s)|0,(a|0)!=0&(c+-48|0)>>>0>9&&e[l>>2]|0&&(e[h>>2]=(e[h>>2]|0)+-1),t=o;break}default:t=0}if((c+-48|0)>>>0>9)e[l>>2]|0?(e[h>>2]=(e[h>>2]|0)+-1,o=-2147483648,c=0):(o=-2147483648,c=0);else{o=0;do o=c+-48+(o*10|0)|0,c=e[h>>2]|0,c>>>0<(e[l>>2]|0)>>>0?(e[h>>2]=c+1,c=B[c>>0]|0):c=fr(s)|0;while((c+-48|0)>>>0<10&(o|0)<214748364);if(a=((o|0)<0)<<31>>31,(c+-48|0)>>>0<10){do a=c1(o|0,a|0,10,0)|0,o=Je,c=Gr(c|0,((c|0)<0)<<31>>31|0,-48,-1)|0,o=Gr(c|0,Je|0,a|0,o|0)|0,a=Je,c=e[h>>2]|0,c>>>0<(e[l>>2]|0)>>>0?(e[h>>2]=c+1,c=B[c>>0]|0):c=fr(s)|0;while((c+-48|0)>>>0<10&((a|0)<21474836|(a|0)==21474836&o>>>0<2061584302));r=o}else r=o;if((c+-48|0)>>>0<10)do c=e[h>>2]|0,c>>>0<(e[l>>2]|0)>>>0?(e[h>>2]=c+1,c=B[c>>0]|0):c=fr(s)|0;while((c+-48|0)>>>0<10);e[l>>2]|0&&(e[h>>2]=(e[h>>2]|0)+-1),s=(t|0)!=0,c=Jn(0,0,r|0,a|0)|0,o=s?Je:a,c=s?c:r}return Je=o,c|0}function $a(s){s=s|0,e[s+68>>2]|0||S0(s)}function zn(s){s=s|0,e[s+68>>2]|0||S0(s)}function Xi(s){s=s|0;var a=0,c=0,o=0,r=0,t=0,h=0;return a=s+20|0,t=s+28|0,(e[a>>2]|0)>>>0>(e[t>>2]|0)>>>0&&(Bn[e[s+36>>2]&15](s,0,0)|0,(e[a>>2]|0)==0)?a=-1:(h=s+4|0,c=e[h>>2]|0,o=s+8|0,r=e[o>>2]|0,c>>>0<r>>>0&&Bn[e[s+40>>2]&15](s,c-r|0,1)|0,e[s+16>>2]=0,e[t>>2]=0,e[a>>2]=0,e[o>>2]=0,e[h>>2]=0,a=0),a|0}function G1(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0,Ze=0,nt=0,lt=0,Ye=0,Qt=0,Et=0,Ft=0,Ht=0,St=0,Ge=0,mt=0,qe=0,Ei=0,ri=0,Yi=0,Er=0,ji=0,Rt=0,Gt=0,ii=0,Ti=0,Si=0,G0=0,$n=0,Uo=0,co=0,ss=0;ss=C,C=C+624|0,Si=ss+24|0,$n=ss+16|0,G0=ss+588|0,ji=ss+576|0,Ti=ss,ri=ss+536|0,co=ss+8|0,Uo=ss+528|0,Qt=(s|0)!=0,Et=ri+40|0,Ei=Et,ri=ri+39|0,Yi=co+4|0,Er=ji+12|0,ji=ji+11|0,Rt=G0,Gt=Er,ii=Gt-Rt|0,Ft=-2-Rt|0,Ht=Gt+2|0,St=Si+288|0,Ge=G0+9|0,mt=Ge,qe=G0+8|0,t=0,ne=a,h=0,a=0;e:for(;;){do if((t|0)>-1)if((h|0)>(2147483647-t|0)){e[(Or()|0)>>2]=75,t=-1;break}else{t=h+t|0;break}while(!1);if(h=M[ne>>0]|0,h<<24>>24)l=ne;else{Ye=245;break}t:for(;;){switch(h<<24>>24){case 37:{h=l,Ye=9;break t}case 0:{h=l;break t}default:}lt=l+1|0,h=M[lt>>0]|0,l=lt}t:do if((Ye|0)==9)for(;;){if(Ye=0,(M[h+1>>0]|0)!=37)break t;if(l=l+1|0,h=h+2|0,(M[h>>0]|0)==37)Ye=9;else break}while(!1);if(W=l-ne|0,Qt&&!(e[s>>2]&32|0)&&Jt(ne,W,s)|0,(l|0)!=(ne|0)){ne=h,h=W;continue}g=h+1|0,l=M[g>>0]|0,d=(l<<24>>24)+-48|0,d>>>0<10?(lt=(M[h+2>>0]|0)==36,g=lt?h+3|0:g,l=M[g>>0]|0,R=lt?d:-1,a=lt?1:a):R=-1,h=l<<24>>24;t:do if((h&-32|0)==32)for(d=0;;){if(!(1<<h+-32&75913)){y=d,h=g;break t}if(d=1<<(l<<24>>24)+-32|d,g=g+1|0,l=M[g>>0]|0,h=l<<24>>24,(h&-32|0)!=32){y=d,h=g;break}}else y=0,h=g;while(!1);do if(l<<24>>24==42){if(d=h+1|0,l=(M[d>>0]|0)+-48|0,l>>>0<10&&(M[h+2>>0]|0)==36)e[r+(l<<2)>>2]=10,a=1,h=h+3|0,l=e[o+((M[d>>0]|0)+-48<<3)>>2]|0;else{if(a){t=-1;break e}if(!Qt){J=y,h=d,a=0,lt=0;break}a=(e[c>>2]|0)+3&-4,l=e[a>>2]|0,e[c>>2]=a+4,a=0,h=d}(l|0)<0?(J=y|8192,lt=0-l|0):(J=y,lt=l)}else if(d=(l<<24>>24)+-48|0,d>>>0<10){l=0;do l=(l*10|0)+d|0,h=h+1|0,d=(M[h>>0]|0)+-48|0;while(d>>>0<10);if((l|0)<0){t=-1;break e}else J=y,lt=l}else J=y,lt=0;while(!1);t:do if((M[h>>0]|0)==46){if(d=h+1|0,l=M[d>>0]|0,l<<24>>24!=42){if(g=(l<<24>>24)+-48|0,g>>>0<10)h=d,l=0;else{h=d,g=0;break}for(;;)if(l=(l*10|0)+g|0,h=h+1|0,g=(M[h>>0]|0)+-48|0,g>>>0>=10){g=l;break t}}if(d=h+2|0,l=(M[d>>0]|0)+-48|0,l>>>0<10&&(M[h+3>>0]|0)==36){e[r+(l<<2)>>2]=10,h=h+4|0,g=e[o+((M[d>>0]|0)+-48<<3)>>2]|0;break}if(a){t=-1;break e}Qt?(h=(e[c>>2]|0)+3&-4,g=e[h>>2]|0,e[c>>2]=h+4,h=d):(h=d,g=0)}else g=-1;while(!1);for(_=0;;){if(l=(M[h>>0]|0)+-65|0,l>>>0>57){t=-1;break e}if(d=h+1|0,l=M[15953+(_*58|0)+l>>0]|0,y=l&255,(y+-1|0)>>>0<8)h=d,_=y;else{nt=d;break}}if(!(l<<24>>24)){t=-1;break}d=(R|0)>-1;do if(l<<24>>24==19)if(d){t=-1;break e}else Ye=52;else{if(d){e[r+(R<<2)>>2]=y,We=o+(R<<3)|0,Ze=e[We+4>>2]|0,Ye=Ti,e[Ye>>2]=e[We>>2],e[Ye+4>>2]=Ze,Ye=52;break}if(!Qt){t=0;break e}To(Ti,y,c)}while(!1);if((Ye|0)==52&&(Ye=0,!Qt)){ne=nt,h=W;continue}R=M[h>>0]|0,R=(_|0)!=0&(R&15|0)==3?R&-33:R,d=J&-65537,Ze=J&8192|0?d:J;t:do switch(R|0){case 110:switch(_|0){case 0:{e[e[Ti>>2]>>2]=t,ne=nt,h=W;continue e}case 1:{e[e[Ti>>2]>>2]=t,ne=nt,h=W;continue e}case 2:{ne=e[Ti>>2]|0,e[ne>>2]=t,e[ne+4>>2]=((t|0)<0)<<31>>31,ne=nt,h=W;continue e}case 3:{E[e[Ti>>2]>>1]=t,ne=nt,h=W;continue e}case 4:{M[e[Ti>>2]>>0]=t,ne=nt,h=W;continue e}case 6:{e[e[Ti>>2]>>2]=t,ne=nt,h=W;continue e}case 7:{ne=e[Ti>>2]|0,e[ne>>2]=t,e[ne+4>>2]=((t|0)<0)<<31>>31,ne=nt,h=W;continue e}default:{ne=nt,h=W;continue e}}case 112:{_=Ze|8,g=g>>>0>8?g:8,R=120,Ye=64;break}case 88:case 120:{_=Ze,Ye=64;break}case 111:{if(d=Ti,l=e[d>>2]|0,d=e[d+4>>2]|0,(l|0)==0&(d|0)==0)h=Et;else{h=Et;do h=h+-1|0,M[h>>0]=l&7|48,l=ws(l|0,d|0,3)|0,d=Je;while(!((l|0)==0&(d|0)==0))}Ze&8?(_=Ei-h+1|0,l=Ze,g=(g|0)<(_|0)?_:g,_=0,y=16433,Ye=77):(l=Ze,_=0,y=16433,Ye=77);break}case 105:case 100:{if(l=Ti,h=e[l>>2]|0,l=e[l+4>>2]|0,(l|0)<0){h=Jn(0,0,h|0,l|0)|0,l=Je,d=Ti,e[d>>2]=h,e[d+4>>2]=l,d=1,y=16433,Ye=76;break t}Ze&2048?(d=1,y=16434,Ye=76):(y=Ze&1,d=y,y=y|0?16435:16433,Ye=76);break}case 117:{l=Ti,h=e[l>>2]|0,l=e[l+4>>2]|0,d=0,y=16433,Ye=76;break}case 99:{M[ri>>0]=e[Ti>>2],ne=ri,l=1,_=0,R=16433,h=Et;break}case 109:{h=ts(e[(Or()|0)>>2]|0)|0,Ye=82;break}case 115:{h=e[Ti>>2]|0,h=h|0?h:16443,Ye=82;break}case 67:{e[co>>2]=e[Ti>>2],e[Yi>>2]=0,e[Ti>>2]=co,g=-1,Ye=86;break}case 83:{g?Ye=86:(xn(s,32,lt,0,Ze),h=0,Ye=98);break}case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:{f=+A[Ti>>3],e[$n>>2]=0,A[z>>3]=f,(e[z+4>>2]|0)>=0?Ze&2048?(Ae=1,We=16453):(We=Ze&1,Ae=We,We=We|0?16456:16451):(f=-f,Ae=1,We=16450),A[z>>3]=f,U=e[z+4>>2]&2146435072;do if(U>>>0<2146435072|(U|0)==2146435072&!1){if(F=+k0(f,$n)*2,l=F!=0,l&&(e[$n>>2]=(e[$n>>2]|0)+-1),se=R|32,(se|0)==97){ne=R&32,W=ne|0?We+9|0:We,J=Ae|2,h=12-g|0;do if(g>>>0>11|(h|0)==0)f=F;else{f=8;do h=h+-1|0,f=f*16;while(h|0);if((M[W>>0]|0)==45){f=-(f+(-F-f));break}else{f=F+f-f;break}}while(!1);for(l=e[$n>>2]|0,h=(l|0)<0?0-l|0:l,h=ro(h,((h|0)<0)<<31>>31,Er)|0,(h|0)==(Er|0)&&(M[ji>>0]=48,h=ji),M[h+-1>>0]=(l>>31&2)+43,_=h+-2|0,M[_>>0]=R+15,y=(g|0)<1,d=(Ze&8|0)==0,l=G0;;){We=~~f,h=l+1|0,M[l>>0]=B[16417+We>>0]|ne,f=(f-+(We|0))*16;do if((h-Rt|0)==1){if(d&(y&f==0))break;M[h>>0]=46,h=l+2|0}while(!1);if(f==0)break;l=h}g=(g|0)!=0&(Ft+h|0)<(g|0)?Ht+g-_|0:ii-_+h|0,d=g+J|0,xn(s,32,lt,d,Ze),e[s>>2]&32||Jt(W,J,s)|0,xn(s,48,lt,d,Ze^65536),h=h-Rt|0,e[s>>2]&32||Jt(G0,h,s)|0,l=Gt-_|0,xn(s,48,g-(h+l)|0,0,0),e[s>>2]&32||Jt(_,l,s)|0,xn(s,32,lt,d,Ze^8192),h=(d|0)<(lt|0)?lt:d;break}h=(g|0)<0?6:g,l?(l=(e[$n>>2]|0)+-28|0,e[$n>>2]=l,f=F*268435456):(f=F,l=e[$n>>2]|0),U=(l|0)<0?Si:St,X=U,l=U;do ae=~~f>>>0,e[l>>2]=ae,l=l+4|0,f=(f-+(ae>>>0))*1e9;while(f!=0);if(d=l,l=e[$n>>2]|0,(l|0)>0)for(y=U;;){_=(l|0)>29?29:l,g=d+-4|0;do if(g>>>0<y>>>0)g=y;else{l=0;do ae=an(e[g>>2]|0,0,_|0)|0,ae=Gr(ae|0,Je|0,l|0,0)|0,l=Je,ie=Oo(ae|0,l|0,1e9,0)|0,e[g>>2]=ie,l=fl(ae|0,l|0,1e9,0)|0,g=g+-4|0;while(g>>>0>=y>>>0);if(!l){g=y;break}g=y+-4|0,e[g>>2]=l}while(!1);for(;!(d>>>0<=g>>>0);)if(l=d+-4|0,!(e[l>>2]|0))d=l;else break;if(l=(e[$n>>2]|0)-_|0,e[$n>>2]=l,(l|0)>0)y=g;else break}else g=U;if((l|0)<0)for(W=((h+25|0)/9|0)+1|0,q=(se|0)==102,ne=g;;){J=0-l|0,J=(J|0)>9?9:J;do if(ne>>>0<d>>>0){l=(1<<J)+-1|0,y=1e9>>>J,g=0,_=ne;do ae=e[_>>2]|0,e[_>>2]=(ae>>>J)+g,g=Oe(ae&l,y)|0,_=_+4|0;while(_>>>0<d>>>0);if(l=e[ne>>2]|0?ne:ne+4|0,!g){g=l;break}e[d>>2]=g,g=l,d=d+4|0}else g=e[ne>>2]|0?ne:ne+4|0;while(!1);if(l=q?U:g,d=(d-l>>2|0)>(W|0)?l+(W<<2)|0:d,l=(e[$n>>2]|0)+J|0,e[$n>>2]=l,(l|0)>=0){ne=g;break}else ne=g}else ne=g;do if(ne>>>0<d>>>0){if(l=(X-ne>>2)*9|0,y=e[ne>>2]|0,y>>>0<10)break;g=10;do g=g*10|0,l=l+1|0;while(y>>>0>=g>>>0)}else l=0;while(!1);if(ie=(se|0)==103,ae=(h|0)!=0,g=h-((se|0)!=102?l:0)+((ae&ie)<<31>>31)|0,(g|0)<(((d-X>>2)*9|0)+-9|0)){if(_=g+9216|0,q=(_|0)/9|0,g=U+(q+-1023<<2)|0,_=((_|0)%9|0)+1|0,(_|0)<9){y=10;do y=y*10|0,_=_+1|0;while((_|0)!=9)}else y=10;J=e[g>>2]|0,W=(J>>>0)%(y>>>0)|0,!(W|0)&&(U+(q+-1022<<2)|0)==(d|0)?y=ne:Ye=163;do if((Ye|0)==163){Ye=0,F=((J>>>0)/(y>>>0)|0)&1|0?9007199254740994:9007199254740992,_=(y|0)/2|0;do if(W>>>0<_>>>0)f=.5;else{if((W|0)==(_|0)&&(U+(q+-1022<<2)|0)==(d|0)){f=1;break}f=1.5}while(!1);do if(Ae){if((M[We>>0]|0)!=45)break;F=-F,f=-f}while(!1);if(_=J-W|0,e[g>>2]=_,F+f==F){y=ne;break}if(se=_+y|0,e[g>>2]=se,se>>>0>999999999)for(l=ne;;)if(y=g+-4|0,e[g>>2]=0,y>>>0<l>>>0&&(l=l+-4|0,e[l>>2]=0),se=(e[y>>2]|0)+1|0,e[y>>2]=se,se>>>0>999999999)g=y;else{ne=l,g=y;break}if(l=(X-ne>>2)*9|0,_=e[ne>>2]|0,_>>>0<10){y=ne;break}else y=10;do y=y*10|0,l=l+1|0;while(_>>>0>=y>>>0);y=ne}while(!1);se=g+4|0,ne=y,d=d>>>0>se>>>0?se:d}for(W=0-l|0;;){if(d>>>0<=ne>>>0){q=0,se=d;break}if(g=d+-4|0,!(e[g>>2]|0))d=g;else{q=1,se=d;break}}do if(ie){if(h=(ae&1^1)+h|0,(h|0)>(l|0)&(l|0)>-5?(R=R+-1|0,h=h+-1-l|0):(R=R+-2|0,h=h+-1|0),d=Ze&8,d)break;do if(q){if(d=e[se+-4>>2]|0,!d){g=9;break}if(!((d>>>0)%10|0))y=10,g=0;else{g=0;break}do y=y*10|0,g=g+1|0;while(!((d>>>0)%(y>>>0)|0|0))}else g=9;while(!1);if(d=((se-X>>2)*9|0)+-9|0,(R|32|0)==102){d=d-g|0,d=(d|0)<0?0:d,h=(h|0)<(d|0)?h:d,d=0;break}else{d=d+l-g|0,d=(d|0)<0?0:d,h=(h|0)<(d|0)?h:d,d=0;break}}else d=Ze&8;while(!1);if(J=h|d,y=(J|0)!=0&1,_=(R|32|0)==102,_)l=(l|0)>0?l:0,R=0;else{if(g=(l|0)<0?W:l,g=ro(g,((g|0)<0)<<31>>31,Er)|0,(Gt-g|0)<2)do g=g+-1|0,M[g>>0]=48;while((Gt-g|0)<2);M[g+-1>>0]=(l>>31&2)+43,X=g+-2|0,M[X>>0]=R,l=Gt-X|0,R=X}W=Ae+1+h+y+l|0,xn(s,32,lt,W,Ze),e[s>>2]&32||Jt(We,Ae,s)|0,xn(s,48,lt,W,Ze^65536);do if(_){g=ne>>>0>U>>>0?U:ne,l=g;do{d=ro(e[l>>2]|0,0,Ge)|0;do if((l|0)==(g|0)){if((d|0)!=(Ge|0))break;M[qe>>0]=48,d=qe}else{if(d>>>0<=G0>>>0)break;do d=d+-1|0,M[d>>0]=48;while(d>>>0>G0>>>0)}while(!1);e[s>>2]&32||Jt(d,mt-d|0,s)|0,l=l+4|0}while(l>>>0<=U>>>0);do if(J){if(e[s>>2]&32)break;Jt(16485,1,s)|0}while(!1);if((h|0)>0&l>>>0<se>>>0)for(d=l;;){if(l=ro(e[d>>2]|0,0,Ge)|0,l>>>0>G0>>>0)do l=l+-1|0,M[l>>0]=48;while(l>>>0>G0>>>0);if(e[s>>2]&32||Jt(l,(h|0)>9?9:h,s)|0,d=d+4|0,l=h+-9|0,(h|0)>9&d>>>0<se>>>0)h=l;else{h=l;break}}xn(s,48,h+9|0,9,0)}else{if(_=q?se:ne+4|0,(h|0)>-1){y=(d|0)==0,g=ne;do{l=ro(e[g>>2]|0,0,Ge)|0,(l|0)==(Ge|0)&&(M[qe>>0]=48,l=qe);do if((g|0)==(ne|0)){if(d=l+1|0,e[s>>2]&32||Jt(l,1,s)|0,y&(h|0)<1){l=d;break}if(e[s>>2]&32){l=d;break}Jt(16485,1,s)|0,l=d}else{if(l>>>0<=G0>>>0)break;do l=l+-1|0,M[l>>0]=48;while(l>>>0>G0>>>0)}while(!1);d=mt-l|0,e[s>>2]&32||Jt(l,(h|0)>(d|0)?d:h,s)|0,h=h-d|0,g=g+4|0}while(g>>>0<_>>>0&(h|0)>-1)}if(xn(s,48,h+18|0,18,0),e[s>>2]&32)break;Jt(R,Gt-R|0,s)|0}while(!1);xn(s,32,lt,W,Ze^8192),h=(W|0)<(lt|0)?lt:W}else _=(R&32|0)!=0,y=f!=f|!1,l=y?0:Ae,g=l+3|0,xn(s,32,lt,g,d),h=e[s>>2]|0,h&32||(Jt(We,l,s)|0,h=e[s>>2]|0),h&32||Jt(y?_?16477:16481:_?16469:16473,3,s)|0,xn(s,32,lt,g,Ze^8192),h=(g|0)<(lt|0)?lt:g;while(!1);ne=nt;continue e}default:d=Ze,l=g,_=0,R=16433,h=Et}while(!1);t:do if((Ye|0)==64)if(d=Ti,l=e[d>>2]|0,d=e[d+4>>2]|0,y=R&32,(l|0)==0&(d|0)==0)h=Et,l=_,_=0,y=16433,Ye=77;else{h=Et;do h=h+-1|0,M[h>>0]=B[16417+(l&15)>>0]|y,l=ws(l|0,d|0,4)|0,d=Je;while(!((l|0)==0&(d|0)==0));Ye=Ti,(_&8|0)==0|(e[Ye>>2]|0)==0&(e[Ye+4>>2]|0)==0?(l=_,_=0,y=16433,Ye=77):(l=_,_=2,y=16433+(R>>4)|0,Ye=77)}else if((Ye|0)==76)h=ro(h,l,Et)|0,l=Ze,_=d,Ye=77;else if((Ye|0)==82)Ye=0,Ze=io(h,0,g)|0,We=(Ze|0)==0,ne=h,l=We?g:Ze-h|0,_=0,R=16433,h=We?h+g|0:Ze;else if((Ye|0)==86){for(Ye=0,l=0,h=0,y=e[Ti>>2]|0;d=e[y>>2]|0,!(!d||(h=Xa(Uo,d)|0,(h|0)<0|h>>>0>(g-l|0)>>>0));)if(l=h+l|0,g>>>0>l>>>0)y=y+4|0;else break;if((h|0)<0){t=-1;break e}if(xn(s,32,lt,l,Ze),!l)h=0,Ye=98;else for(d=0,g=e[Ti>>2]|0;;){if(h=e[g>>2]|0,!h){h=l,Ye=98;break t}if(h=Xa(Uo,h)|0,d=h+d|0,(d|0)>(l|0)){h=l,Ye=98;break t}if(e[s>>2]&32||Jt(Uo,h,s)|0,d>>>0>=l>>>0){h=l,Ye=98;break}else g=g+4|0}}while(!1);if((Ye|0)==98){Ye=0,xn(s,32,lt,h,Ze^8192),ne=nt,h=(lt|0)>(h|0)?lt:h;continue}(Ye|0)==77&&(Ye=0,d=(g|0)>-1?l&-65537:l,l=Ti,l=(e[l>>2]|0)!=0|(e[l+4>>2]|0)!=0,(g|0)!=0|l?(l=(l&1^1)+(Ei-h)|0,ne=h,l=(g|0)>(l|0)?g:l,R=y,h=Et):(ne=Et,l=0,R=y,h=Et)),y=h-ne|0,l=(l|0)<(y|0)?y:l,g=_+l|0,h=(lt|0)<(g|0)?g:lt,xn(s,32,h,g,d),e[s>>2]&32||Jt(R,_,s)|0,xn(s,48,h,g,d^65536),xn(s,48,l,y,0),e[s>>2]&32||Jt(ne,y,s)|0,xn(s,32,h,g,d^8192),ne=nt}e:do if((Ye|0)==245&&!s)if(a){for(t=1;a=e[r+(t<<2)>>2]|0,!!a;)if(To(o+(t<<3)|0,a,c),t=t+1|0,(t|0)>=10){t=1;break e}if((t|0)<10)for(;;){if(e[r+(t<<2)>>2]|0){t=-1;break e}if(t=t+1|0,(t|0)>=10){t=1;break}}else t=1}else t=0;while(!1);return C=ss,t|0}function Mo(s,a,c){return s=s|0,a=a|0,c=c|0,Fl(s,a,c)|0}function oa(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0;R=C,C=C+240|0,_=R,e[_>>2]=s;e:do if((o|0)>1)for(y=0-a|0,t=o,h=s,d=s,f=1;;){if(s=h+y|0,g=t+-2|0,l=h+(0-((e[r+(g<<2)>>2]|0)+a))|0,(z0[c&15](d,l)|0)>-1&&(z0[c&15](d,s)|0)>-1){o=f;break e}if(o=f+1|0,h=_+(f<<2)|0,(z0[c&15](l,s)|0)>-1?(e[h>>2]=l,s=l,t=t+-1|0):(e[h>>2]=s,t=g),(t|0)<=1)break e;h=s,d=e[_>>2]|0,f=o}else o=1;while(!1);So(a,_,o),C=R}function ja(s,a,c,o,r,t,h){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0,t=t|0,h=h|0;var l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0;ne=C,C=C+240|0,R=ne,d=e[o>>2]|0,o=e[o+4>>2]|0,e[R>>2]=s,_=0-a|0;e:do if((o|0)!=0|(d|0)!=1&&(l=s+(0-(e[h+(r<<2)>>2]|0))|0,(z0[c&15](l,s)|0)>=1))for(t=(t|0)==0,y=l,f=d,g=o,l=1;;){if(t&(r|0)>1){if(o=e[h+(r+-2<<2)>>2]|0,(z0[c&15](s+_|0,y)|0)>-1){t=r,o=l,F=20;break e}if((z0[c&15](s+(0-(o+a))|0,y)|0)>-1){t=r,o=l,F=20;break e}}o=l+1|0,e[R+(l<<2)>>2]=y,t=f+-1|0;do if(t){if(t&1)F=11;else{s=t,t=0;do t=t+1|0,s=s>>>1;while(!(s&1|0));t||(F=11)}if((F|0)==11){if(F=0,!g){t=64,F=16;break}if(!(g&1))s=g,t=0;else{d=0,s=f,l=g,t=0;break}for(;;)if(l=t+1|0,s=s>>>1,s&1){s=l;break}else t=l;if(s)t=t+33|0;else{d=0,s=f,l=g,t=0;break}}t>>>0>31?F=16:(d=t,s=f,l=g)}else t=32,F=16;while(!1);if((F|0)==16&&(F=0,d=t+-32|0,s=g,l=0),f=l<<32-d|s>>>d,g=l>>>d,t=t+r|0,!((g|0)!=0|(f|0)!=1)){s=y,F=20;break e}if(s=y+(0-(e[h+(t<<2)>>2]|0))|0,(z0[c&15](s,e[R>>2]|0)|0)<1){s=y,r=t,t=0,F=19;break}else d=y,r=t,t=1,y=s,l=o,s=d}else o=1,F=19;while(!1);(F|0)==19&&!(t|0)&&(t=r,F=20),(F|0)==20&&(So(a,R,o),oa(s,a,c,t,h)),C=ne}function So(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0,l=0;h=C,C=C+256|0,o=h;e:do if((c|0)>=2&&(t=a+(c<<2)|0,e[t>>2]=o,(s|0)!=0))for(;;){r=s>>>0>256?256:s,un(o|0,e[a>>2]|0,r|0)|0,o=0;do l=a+(o<<2)|0,o=o+1|0,un(e[l>>2]|0,e[a+(o<<2)>>2]|0,r|0)|0,e[l>>2]=(e[l>>2]|0)+r;while((o|0)!=(c|0));if((s|0)==(r|0))break e;s=s-r|0,o=e[t>>2]|0}while(!1);C=h}function aa(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0;return o=s+20|0,r=e[o>>2]|0,s=(e[s+16>>2]|0)-r|0,s=s>>>0>c>>>0?c:s,un(r|0,a|0,s|0)|0,e[o>>2]=(e[o>>2]|0)+s,c|0}function To(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0;e:do if(a>>>0<=20)do switch(a|0){case 9:{o=(e[c>>2]|0)+3&-4,a=e[o>>2]|0,e[c>>2]=o+4,e[s>>2]=a;break e}case 10:{o=(e[c>>2]|0)+3&-4,a=e[o>>2]|0,e[c>>2]=o+4,o=s,e[o>>2]=a,e[o+4>>2]=((a|0)<0)<<31>>31;break e}case 11:{o=(e[c>>2]|0)+3&-4,a=e[o>>2]|0,e[c>>2]=o+4,o=s,e[o>>2]=a,e[o+4>>2]=0;break e}case 12:{o=(e[c>>2]|0)+7&-8,a=o,r=e[a>>2]|0,a=e[a+4>>2]|0,e[c>>2]=o+8,o=s,e[o>>2]=r,e[o+4>>2]=a;break e}case 13:{r=(e[c>>2]|0)+3&-4,o=e[r>>2]|0,e[c>>2]=r+4,o=(o&65535)<<16>>16,r=s,e[r>>2]=o,e[r+4>>2]=((o|0)<0)<<31>>31;break e}case 14:{r=(e[c>>2]|0)+3&-4,o=e[r>>2]|0,e[c>>2]=r+4,r=s,e[r>>2]=o&65535,e[r+4>>2]=0;break e}case 15:{r=(e[c>>2]|0)+3&-4,o=e[r>>2]|0,e[c>>2]=r+4,o=(o&255)<<24>>24,r=s,e[r>>2]=o,e[r+4>>2]=((o|0)<0)<<31>>31;break e}case 16:{r=(e[c>>2]|0)+3&-4,o=e[r>>2]|0,e[c>>2]=r+4,r=s,e[r>>2]=o&255,e[r+4>>2]=0;break e}case 17:{r=(e[c>>2]|0)+7&-8,t=+A[r>>3],e[c>>2]=r+8,A[s>>3]=t;break e}case 18:{r=(e[c>>2]|0)+7&-8,t=+A[r>>3],e[c>>2]=r+8,A[s>>3]=t;break e}default:break e}while(!1);while(!1)}function ro(s,a,c){s=s|0,a=a|0,c=c|0;var o=0;if(a>>>0>0|(a|0)==0&s>>>0>4294967295)for(;;)if(o=Oo(s|0,a|0,10,0)|0,c=c+-1|0,M[c>>0]=o|48,o=fl(s|0,a|0,10,0)|0,a>>>0>9|(a|0)==9&s>>>0>4294967295)s=o,a=Je;else{s=o;break}if(s)for(;c=c+-1|0,M[c>>0]=(s>>>0)%10|0|48,!(s>>>0<10);)s=(s>>>0)/10|0;return c|0}function xn(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0;l=C,C=C+256|0,h=l;do if((c|0)>(o|0)&(r&73728|0)==0){if(r=c-o|0,gt(h|0,a|0,(r>>>0>256?256:r)|0)|0,a=e[s>>2]|0,t=(a&32|0)==0,r>>>0>255){o=c-o|0;do t&&(Jt(h,256,s)|0,a=e[s>>2]|0),r=r+-256|0,t=(a&32|0)==0;while(r>>>0>255);if(t)r=o&255;else break}else if(!t)break;Jt(h,r,s)|0}while(!1);C=l}function Pi(s){s=s|0;var a=0,c=0,o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0,Ze=0,nt=0,lt=0,Ye=0,Qt=0,Et=0,Ft=0,Ht=0,St=0,Ge=0,mt=0,qe=0;do if(s>>>0<245){if(R=s>>>0<11?16:s+11&-8,s=R>>>3,l=e[756]|0,c=l>>>s,c&3){s=(c&1^1)+s|0,o=s<<1,c=3064+(o<<2)|0,o=3064+(o+2<<2)|0,r=e[o>>2]|0,t=r+8|0,h=e[t>>2]|0;do if((c|0)!=(h|0))if(h>>>0<(e[760]|0)>>>0&&st(),a=h+12|0,(e[a>>2]|0)==(r|0)){e[a>>2]=c,e[o>>2]=h;break}else st();else e[756]=l&~(1<<s);while(!1);return qe=s<<3,e[r+4>>2]=qe|3,qe=r+(qe|4)|0,e[qe>>2]=e[qe>>2]|1,qe=t,qe|0}if(h=e[758]|0,R>>>0>h>>>0){if(c){o=2<<s,o=c<<s&(o|0-o),o=(o&0-o)+-1|0,d=o>>>12&16,o=o>>>d,r=o>>>5&8,o=o>>>r,t=o>>>2&4,o=o>>>t,c=o>>>1&2,o=o>>>c,s=o>>>1&1,s=(r|d|t|c|s)+(o>>>s)|0,o=s<<1,c=3064+(o<<2)|0,o=3064+(o+2<<2)|0,t=e[o>>2]|0,d=t+8|0,r=e[d>>2]|0;do if((c|0)!=(r|0))if(r>>>0<(e[760]|0)>>>0&&st(),a=r+12|0,(e[a>>2]|0)==(t|0)){e[a>>2]=c,e[o>>2]=r,f=e[758]|0;break}else st();else e[756]=l&~(1<<s),f=h;while(!1);return qe=s<<3,h=qe-R|0,e[t+4>>2]=R|3,l=t+R|0,e[t+(R|4)>>2]=h|1,e[t+qe>>2]=h,f&&(r=e[761]|0,c=f>>>3,a=c<<1,o=3064+(a<<2)|0,s=e[756]|0,c=1<<c,s&c?(s=3064+(a+2<<2)|0,a=e[s>>2]|0,a>>>0<(e[760]|0)>>>0?st():(g=s,y=a)):(e[756]=s|c,g=3064+(a+2<<2)|0,y=o),e[g>>2]=r,e[y+12>>2]=r,e[r+8>>2]=y,e[r+12>>2]=o),e[758]=h,e[761]=l,qe=d,qe|0}if(s=e[757]|0,s){for(c=(s&0-s)+-1|0,mt=c>>>12&16,c=c>>>mt,Ge=c>>>5&8,c=c>>>Ge,qe=c>>>2&4,c=c>>>qe,s=c>>>1&2,c=c>>>s,o=c>>>1&1,o=e[3328+((Ge|mt|qe|s|o)+(c>>>o)<<2)>>2]|0,c=(e[o+4>>2]&-8)-R|0,s=o;;){if(a=e[s+16>>2]|0,!a&&(a=e[s+20>>2]|0,!a)){d=c;break}s=(e[a+4>>2]&-8)-R|0,qe=s>>>0<c>>>0,c=qe?s:c,s=a,o=qe?a:o}t=e[760]|0,o>>>0<t>>>0&&st(),l=o+R|0,o>>>0>=l>>>0&&st(),h=e[o+24>>2]|0,c=e[o+12>>2]|0;do if((c|0)==(o|0)){if(s=o+20|0,a=e[s>>2]|0,!a&&(s=o+16|0,a=e[s>>2]|0,!a)){_=0;break}for(;;){if(c=a+20|0,r=e[c>>2]|0,r){a=r,s=c;continue}if(c=a+16|0,r=e[c>>2]|0,r)a=r,s=c;else break}if(s>>>0<t>>>0)st();else{e[s>>2]=0,_=a;break}}else if(r=e[o+8>>2]|0,r>>>0<t>>>0&&st(),a=r+12|0,(e[a>>2]|0)!=(o|0)&&st(),s=c+8|0,(e[s>>2]|0)==(o|0)){e[a>>2]=c,e[s>>2]=r,_=c;break}else st();while(!1);do if(h){if(a=e[o+28>>2]|0,s=3328+(a<<2)|0,(o|0)==(e[s>>2]|0)){if(e[s>>2]=_,!_){e[757]=e[757]&~(1<<a);break}}else if(h>>>0<(e[760]|0)>>>0&&st(),a=h+16|0,(e[a>>2]|0)==(o|0)?e[a>>2]=_:e[h+20>>2]=_,!_)break;s=e[760]|0,_>>>0<s>>>0&&st(),e[_+24>>2]=h,a=e[o+16>>2]|0;do if(a)if(a>>>0<s>>>0)st();else{e[_+16>>2]=a,e[a+24>>2]=_;break}while(!1);if(a=e[o+20>>2]|0,a)if(a>>>0<(e[760]|0)>>>0)st();else{e[_+20>>2]=a,e[a+24>>2]=_;break}}while(!1);return d>>>0<16?(qe=d+R|0,e[o+4>>2]=qe|3,qe=o+(qe+4)|0,e[qe>>2]=e[qe>>2]|1):(e[o+4>>2]=R|3,e[o+(R|4)>>2]=d|1,e[o+(d+R)>>2]=d,a=e[758]|0,a&&(t=e[761]|0,c=a>>>3,a=c<<1,r=3064+(a<<2)|0,s=e[756]|0,c=1<<c,s&c?(a=3064+(a+2<<2)|0,s=e[a>>2]|0,s>>>0<(e[760]|0)>>>0?st():(F=a,ne=s)):(e[756]=s|c,F=3064+(a+2<<2)|0,ne=r),e[F>>2]=t,e[ne+12>>2]=t,e[t+8>>2]=ne,e[t+12>>2]=r),e[758]=d,e[761]=l),qe=o+8|0,qe|0}else ne=R}else ne=R}else if(s>>>0<=4294967231)if(s=s+11|0,y=s&-8,g=e[757]|0,g){c=0-y|0,s=s>>>8,s?y>>>0>16777215?f=31:(ne=(s+1048320|0)>>>16&8,ae=s<<ne,F=(ae+520192|0)>>>16&4,ae=ae<<F,f=(ae+245760|0)>>>16&2,f=14-(F|ne|f)+(ae<<f>>>15)|0,f=y>>>(f+7|0)&1|f<<1):f=0,s=e[3328+(f<<2)>>2]|0;e:do if(!s)r=0,s=0,ae=86;else for(h=c,r=0,l=y<<((f|0)==31?0:25-(f>>>1)|0),d=s,s=0;;){if(t=e[d+4>>2]&-8,c=t-y|0,c>>>0<h>>>0)if((t|0)==(y|0)){t=d,s=d,ae=90;break e}else s=d;else c=h;if(ae=e[d+20>>2]|0,d=e[d+16+(l>>>31<<2)>>2]|0,r=(ae|0)==0|(ae|0)==(d|0)?r:ae,d)h=c,l=l<<1;else{ae=86;break}}while(!1);if((ae|0)==86){if((r|0)==0&(s|0)==0){if(s=2<<f,s=g&(s|0-s),!s){ne=y;break}s=(s&0-s)+-1|0,_=s>>>12&16,s=s>>>_,g=s>>>5&8,s=s>>>g,F=s>>>2&4,s=s>>>F,ne=s>>>1&2,s=s>>>ne,r=s>>>1&1,r=e[3328+((g|_|F|ne|r)+(s>>>r)<<2)>>2]|0,s=0}r?(t=r,ae=90):(l=c,d=s)}if((ae|0)==90)for(;;){if(ae=0,ne=(e[t+4>>2]&-8)-y|0,r=ne>>>0<c>>>0,c=r?ne:c,s=r?t:s,r=e[t+16>>2]|0,r){t=r,ae=90;continue}if(t=e[t+20>>2]|0,t)ae=90;else{l=c,d=s;break}}if(d|0&&l>>>0<((e[758]|0)-y|0)>>>0){r=e[760]|0,d>>>0<r>>>0&&st(),h=d+y|0,d>>>0>=h>>>0&&st(),t=e[d+24>>2]|0,c=e[d+12>>2]|0;do if((c|0)==(d|0)){if(s=d+20|0,a=e[s>>2]|0,!a&&(s=d+16|0,a=e[s>>2]|0,!a)){R=0;break}for(;;){if(c=a+20|0,o=e[c>>2]|0,o){a=o,s=c;continue}if(c=a+16|0,o=e[c>>2]|0,o)a=o,s=c;else break}if(s>>>0<r>>>0)st();else{e[s>>2]=0,R=a;break}}else if(o=e[d+8>>2]|0,o>>>0<r>>>0&&st(),a=o+12|0,(e[a>>2]|0)!=(d|0)&&st(),s=c+8|0,(e[s>>2]|0)==(d|0)){e[a>>2]=c,e[s>>2]=o,R=c;break}else st();while(!1);do if(t){if(a=e[d+28>>2]|0,s=3328+(a<<2)|0,(d|0)==(e[s>>2]|0)){if(e[s>>2]=R,!R){e[757]=e[757]&~(1<<a);break}}else if(t>>>0<(e[760]|0)>>>0&&st(),a=t+16|0,(e[a>>2]|0)==(d|0)?e[a>>2]=R:e[t+20>>2]=R,!R)break;s=e[760]|0,R>>>0<s>>>0&&st(),e[R+24>>2]=t,a=e[d+16>>2]|0;do if(a)if(a>>>0<s>>>0)st();else{e[R+16>>2]=a,e[a+24>>2]=R;break}while(!1);if(a=e[d+20>>2]|0,a)if(a>>>0<(e[760]|0)>>>0)st();else{e[R+20>>2]=a,e[a+24>>2]=R;break}}while(!1);e:do if(l>>>0>=16){if(e[d+4>>2]=y|3,e[d+(y|4)>>2]=l|1,e[d+(l+y)>>2]=l,a=l>>>3,l>>>0<256){s=a<<1,o=3064+(s<<2)|0,c=e[756]|0,a=1<<a,c&a?(a=3064+(s+2<<2)|0,s=e[a>>2]|0,s>>>0<(e[760]|0)>>>0?st():(W=a,q=s)):(e[756]=c|a,W=3064+(s+2<<2)|0,q=o),e[W>>2]=h,e[q+12>>2]=h,e[d+(y+8)>>2]=q,e[d+(y+12)>>2]=o;break}if(a=l>>>8,a?l>>>0>16777215?o=31:(mt=(a+1048320|0)>>>16&8,qe=a<<mt,Ge=(qe+520192|0)>>>16&4,qe=qe<<Ge,o=(qe+245760|0)>>>16&2,o=14-(Ge|mt|o)+(qe<<o>>>15)|0,o=l>>>(o+7|0)&1|o<<1):o=0,a=3328+(o<<2)|0,e[d+(y+28)>>2]=o,e[d+(y+20)>>2]=0,e[d+(y+16)>>2]=0,s=e[757]|0,c=1<<o,!(s&c)){e[757]=s|c,e[a>>2]=h,e[d+(y+24)>>2]=a,e[d+(y+12)>>2]=h,e[d+(y+8)>>2]=h;break}a=e[a>>2]|0;t:do if((e[a+4>>2]&-8|0)!=(l|0)){for(o=l<<((o|0)==31?0:25-(o>>>1)|0);s=a+16+(o>>>31<<2)|0,c=e[s>>2]|0,!!c;)if((e[c+4>>2]&-8|0)==(l|0)){U=c;break t}else o=o<<1,a=c;if(s>>>0<(e[760]|0)>>>0)st();else{e[s>>2]=h,e[d+(y+24)>>2]=a,e[d+(y+12)>>2]=h,e[d+(y+8)>>2]=h;break e}}else U=a;while(!1);if(a=U+8|0,s=e[a>>2]|0,qe=e[760]|0,s>>>0>=qe>>>0&U>>>0>=qe>>>0){e[s+12>>2]=h,e[a>>2]=h,e[d+(y+8)>>2]=s,e[d+(y+12)>>2]=U,e[d+(y+24)>>2]=0;break}else st()}else qe=l+y|0,e[d+4>>2]=qe|3,qe=d+(qe+4)|0,e[qe>>2]=e[qe>>2]|1;while(!1);return qe=d+8|0,qe|0}else ne=y}else ne=y;else ne=-1;while(!1);if(c=e[758]|0,c>>>0>=ne>>>0)return a=c-ne|0,s=e[761]|0,a>>>0>15?(e[761]=s+ne,e[758]=a,e[s+(ne+4)>>2]=a|1,e[s+c>>2]=a,e[s+4>>2]=ne|3):(e[758]=0,e[761]=0,e[s+4>>2]=c|3,qe=s+(c+4)|0,e[qe>>2]=e[qe>>2]|1),qe=s+8|0,qe|0;if(s=e[759]|0,s>>>0>ne>>>0)return mt=s-ne|0,e[759]=mt,qe=e[762]|0,e[762]=qe+ne,e[qe+(ne+4)>>2]=mt|1,e[qe+4>>2]=ne|3,qe=qe+8|0,qe|0;do if(!(e[874]|0))if(s=x0(30)|0,s+-1&s)st();else{e[876]=s,e[875]=s,e[877]=-1,e[878]=-1,e[879]=0,e[867]=0,e[874]=(wn(0)|0)&-16^1431655768;break}while(!1);if(d=ne+48|0,l=e[876]|0,f=ne+47|0,h=l+f|0,l=0-l|0,g=h&l,g>>>0<=ne>>>0||(s=e[866]|0,s|0&&(q=e[864]|0,U=q+g|0,U>>>0<=q>>>0|U>>>0>s>>>0)))return qe=0,qe|0;e:do if(e[867]&4)s=0,ae=191;else{s=e[762]|0;t:do if(s){for(r=3472;;){if(c=e[r>>2]|0,c>>>0<=s>>>0&&(J=r+4|0,(c+(e[J>>2]|0)|0)>>>0>s>>>0)){t=r,s=J;break}if(r=e[r+8>>2]|0,!r){ae=174;break t}}if(c=h-(e[759]|0)&l,c>>>0<2147483647)if(r=Fn(c|0)|0,U=(r|0)==((e[t>>2]|0)+(e[s>>2]|0)|0),s=U?c:0,U){if((r|0)!=-1){se=r,F=s,ae=194;break e}}else ae=184;else s=0}else ae=174;while(!1);do if((ae|0)==174)if(t=Fn(0)|0,(t|0)!=-1)if(s=t,c=e[875]|0,r=c+-1|0,r&s?c=g-s+(r+s&0-c)|0:c=g,s=e[864]|0,r=s+c|0,c>>>0>ne>>>0&c>>>0<2147483647){if(U=e[866]|0,U|0&&r>>>0<=s>>>0|r>>>0>U>>>0){s=0;break}if(r=Fn(c|0)|0,U=(r|0)==(t|0),s=U?c:0,U){se=t,F=s,ae=194;break e}else ae=184}else s=0;else s=0;while(!1);t:do if((ae|0)==184){t=0-c|0;do if(d>>>0>c>>>0&(c>>>0<2147483647&(r|0)!=-1)&&(ie=e[876]|0,ie=f-c+ie&0-ie,ie>>>0<2147483647))if((Fn(ie|0)|0)==-1){Fn(t|0)|0;break t}else{c=ie+c|0;break}while(!1);if((r|0)!=-1){se=r,F=c,ae=194;break e}}while(!1);e[867]=e[867]|4,ae=191}while(!1);if((ae|0)==191&&g>>>0<2147483647&&(se=Fn(g|0)|0,X=Fn(0)|0,se>>>0<X>>>0&((se|0)!=-1&(X|0)!=-1))&&(Ae=X-se|0,We=Ae>>>0>(ne+40|0)>>>0,We)&&(F=We?Ae:s,ae=194),(ae|0)==194){s=(e[864]|0)+F|0,e[864]=s,s>>>0>(e[865]|0)>>>0&&(e[865]=s),h=e[762]|0;e:do if(h){t=3472;do{if(s=e[t>>2]|0,c=t+4|0,r=e[c>>2]|0,(se|0)==(s+r|0)){Ze=s,nt=c,lt=r,Ye=t,ae=204;break}t=e[t+8>>2]|0}while(t|0);if((ae|0)==204&&!(e[Ye+12>>2]&8|0)&&h>>>0<se>>>0&h>>>0>=Ze>>>0){e[nt>>2]=lt+F,qe=(e[759]|0)+F|0,mt=h+8|0,mt=mt&7|0?0-mt&7:0,Ge=qe-mt|0,e[762]=h+mt,e[759]=Ge,e[h+(mt+4)>>2]=Ge|1,e[h+(qe+4)>>2]=40,e[763]=e[878];break}for(s=e[760]|0,se>>>0<s>>>0&&(e[760]=se,s=se),c=se+F|0,t=3472;;){if((e[t>>2]|0)==(c|0)){r=t,c=t,ae=212;break}if(t=e[t+8>>2]|0,!t){c=3472;break}}if((ae|0)==212)if(e[c+12>>2]&8)c=3472;else{e[r>>2]=se,_=c+4|0,e[_>>2]=(e[_>>2]|0)+F,_=se+8|0,_=_&7|0?0-_&7:0,f=se+(F+8)|0,f=f&7|0?0-f&7:0,a=se+(f+F)|0,y=_+ne|0,R=se+y|0,g=a-(se+_)-ne|0,e[se+(_+4)>>2]=ne|3;t:do if((a|0)!=(h|0)){if((a|0)==(e[761]|0)){qe=(e[758]|0)+g|0,e[758]=qe,e[761]=R,e[se+(y+4)>>2]=qe|1,e[se+(qe+y)>>2]=qe;break}if(l=F+4|0,c=e[se+(l+f)>>2]|0,(c&3|0)==1){d=c&-8,t=c>>>3;i:do if(c>>>0>=256){h=e[se+((f|24)+F)>>2]|0,o=e[se+(F+12+f)>>2]|0;do if((o|0)==(a|0)){if(r=f|16,o=se+(l+r)|0,c=e[o>>2]|0,!c&&(o=se+(r+F)|0,c=e[o>>2]|0,!c)){St=0;break}for(;;){if(r=c+20|0,t=e[r>>2]|0,t){c=t,o=r;continue}if(r=c+16|0,t=e[r>>2]|0,t)c=t,o=r;else break}if(o>>>0<s>>>0)st();else{e[o>>2]=0,St=c;break}}else if(r=e[se+((f|8)+F)>>2]|0,r>>>0<s>>>0&&st(),s=r+12|0,(e[s>>2]|0)!=(a|0)&&st(),c=o+8|0,(e[c>>2]|0)==(a|0)){e[s>>2]=o,e[c>>2]=r,St=o;break}else st();while(!1);if(!h)break;s=e[se+(F+28+f)>>2]|0,c=3328+(s<<2)|0;do if((a|0)!=(e[c>>2]|0)){if(h>>>0<(e[760]|0)>>>0&&st(),s=h+16|0,(e[s>>2]|0)==(a|0)?e[s>>2]=St:e[h+20>>2]=St,!St)break i}else{if(e[c>>2]=St,St)break;e[757]=e[757]&~(1<<s);break i}while(!1);c=e[760]|0,St>>>0<c>>>0&&st(),e[St+24>>2]=h,a=f|16,s=e[se+(a+F)>>2]|0;do if(s)if(s>>>0<c>>>0)st();else{e[St+16>>2]=s,e[s+24>>2]=St;break}while(!1);if(a=e[se+(l+a)>>2]|0,!a)break;if(a>>>0<(e[760]|0)>>>0)st();else{e[St+20>>2]=a,e[a+24>>2]=St;break}}else{o=e[se+((f|8)+F)>>2]|0,r=e[se+(F+12+f)>>2]|0,c=3064+(t<<1<<2)|0;do if((o|0)!=(c|0)){if(o>>>0<s>>>0&&st(),(e[o+12>>2]|0)==(a|0))break;st()}while(!1);if((r|0)==(o|0)){e[756]=e[756]&~(1<<t);break}do if((r|0)==(c|0))Qt=r+8|0;else{if(r>>>0<s>>>0&&st(),s=r+8|0,(e[s>>2]|0)==(a|0)){Qt=s;break}st()}while(!1);e[o+12>>2]=r,e[Qt>>2]=o}while(!1);a=se+((d|f)+F)|0,r=d+g|0}else r=g;if(a=a+4|0,e[a>>2]=e[a>>2]&-2,e[se+(y+4)>>2]=r|1,e[se+(r+y)>>2]=r,a=r>>>3,r>>>0<256){s=a<<1,o=3064+(s<<2)|0,c=e[756]|0,a=1<<a;do if(!(c&a))e[756]=c|a,Ge=3064+(s+2<<2)|0,mt=o;else{if(a=3064+(s+2<<2)|0,s=e[a>>2]|0,s>>>0>=(e[760]|0)>>>0){Ge=a,mt=s;break}st()}while(!1);e[Ge>>2]=R,e[mt+12>>2]=R,e[se+(y+8)>>2]=mt,e[se+(y+12)>>2]=o;break}a=r>>>8;do if(!a)o=0;else{if(r>>>0>16777215){o=31;break}Ge=(a+1048320|0)>>>16&8,mt=a<<Ge,St=(mt+520192|0)>>>16&4,mt=mt<<St,o=(mt+245760|0)>>>16&2,o=14-(St|Ge|o)+(mt<<o>>>15)|0,o=r>>>(o+7|0)&1|o<<1}while(!1);if(a=3328+(o<<2)|0,e[se+(y+28)>>2]=o,e[se+(y+20)>>2]=0,e[se+(y+16)>>2]=0,s=e[757]|0,c=1<<o,!(s&c)){e[757]=s|c,e[a>>2]=R,e[se+(y+24)>>2]=a,e[se+(y+12)>>2]=R,e[se+(y+8)>>2]=R;break}a=e[a>>2]|0;i:do if((e[a+4>>2]&-8|0)!=(r|0)){for(o=r<<((o|0)==31?0:25-(o>>>1)|0);s=a+16+(o>>>31<<2)|0,c=e[s>>2]|0,!!c;)if((e[c+4>>2]&-8|0)==(r|0)){qe=c;break i}else o=o<<1,a=c;if(s>>>0<(e[760]|0)>>>0)st();else{e[s>>2]=R,e[se+(y+24)>>2]=a,e[se+(y+12)>>2]=R,e[se+(y+8)>>2]=R;break t}}else qe=a;while(!1);if(a=qe+8|0,s=e[a>>2]|0,mt=e[760]|0,s>>>0>=mt>>>0&qe>>>0>=mt>>>0){e[s+12>>2]=R,e[a>>2]=R,e[se+(y+8)>>2]=s,e[se+(y+12)>>2]=qe,e[se+(y+24)>>2]=0;break}else st()}else qe=(e[759]|0)+g|0,e[759]=qe,e[762]=R,e[se+(y+4)>>2]=qe|1;while(!1);return qe=se+(_|8)|0,qe|0}for(;s=e[c>>2]|0,!(s>>>0<=h>>>0&&(a=e[c+4>>2]|0,o=s+a|0,o>>>0>h>>>0));)c=e[c+8>>2]|0;if(r=s+(a+-39)|0,s=s+(a+-47+(r&7|0?0-r&7:0))|0,r=h+16|0,s=s>>>0<r>>>0?h:s,a=s+8|0,c=se+8|0,c=c&7|0?0-c&7:0,qe=F+-40-c|0,e[762]=se+c,e[759]=qe,e[se+(c+4)>>2]=qe|1,e[se+(F+-36)>>2]=40,e[763]=e[878],c=s+4|0,e[c>>2]=27,e[a>>2]=e[868],e[a+4>>2]=e[869],e[a+8>>2]=e[870],e[a+12>>2]=e[871],e[868]=se,e[869]=F,e[871]=0,e[870]=a,a=s+28|0,e[a>>2]=7,(s+32|0)>>>0<o>>>0)do qe=a,a=a+4|0,e[a>>2]=7;while((qe+8|0)>>>0<o>>>0);if((s|0)!=(h|0)){if(t=s-h|0,e[c>>2]=e[c>>2]&-2,e[h+4>>2]=t|1,e[s>>2]=t,a=t>>>3,t>>>0<256){s=a<<1,o=3064+(s<<2)|0,c=e[756]|0,a=1<<a,c&a?(a=3064+(s+2<<2)|0,s=e[a>>2]|0,s>>>0<(e[760]|0)>>>0?st():(Et=a,Ft=s)):(e[756]=c|a,Et=3064+(s+2<<2)|0,Ft=o),e[Et>>2]=h,e[Ft+12>>2]=h,e[h+8>>2]=Ft,e[h+12>>2]=o;break}if(a=t>>>8,a?t>>>0>16777215?o=31:(mt=(a+1048320|0)>>>16&8,qe=a<<mt,Ge=(qe+520192|0)>>>16&4,qe=qe<<Ge,o=(qe+245760|0)>>>16&2,o=14-(Ge|mt|o)+(qe<<o>>>15)|0,o=t>>>(o+7|0)&1|o<<1):o=0,c=3328+(o<<2)|0,e[h+28>>2]=o,e[h+20>>2]=0,e[r>>2]=0,a=e[757]|0,s=1<<o,!(a&s)){e[757]=a|s,e[c>>2]=h,e[h+24>>2]=c,e[h+12>>2]=h,e[h+8>>2]=h;break}a=e[c>>2]|0;t:do if((e[a+4>>2]&-8|0)!=(t|0)){for(o=t<<((o|0)==31?0:25-(o>>>1)|0);s=a+16+(o>>>31<<2)|0,c=e[s>>2]|0,!!c;)if((e[c+4>>2]&-8|0)==(t|0)){Ht=c;break t}else o=o<<1,a=c;if(s>>>0<(e[760]|0)>>>0)st();else{e[s>>2]=h,e[h+24>>2]=a,e[h+12>>2]=h,e[h+8>>2]=h;break e}}else Ht=a;while(!1);if(a=Ht+8|0,s=e[a>>2]|0,qe=e[760]|0,s>>>0>=qe>>>0&Ht>>>0>=qe>>>0){e[s+12>>2]=h,e[a>>2]=h,e[h+8>>2]=s,e[h+12>>2]=Ht,e[h+24>>2]=0;break}else st()}}else{qe=e[760]|0,(qe|0)==0|se>>>0<qe>>>0&&(e[760]=se),e[868]=se,e[869]=F,e[871]=0,e[765]=e[874],e[764]=-1,a=0;do qe=a<<1,mt=3064+(qe<<2)|0,e[3064+(qe+3<<2)>>2]=mt,e[3064+(qe+2<<2)>>2]=mt,a=a+1|0;while((a|0)!=32);qe=se+8|0,qe=qe&7|0?0-qe&7:0,mt=F+-40-qe|0,e[762]=se+qe,e[759]=mt,e[se+(qe+4)>>2]=mt|1,e[se+(F+-36)>>2]=40,e[763]=e[878]}while(!1);if(a=e[759]|0,a>>>0>ne>>>0)return mt=a-ne|0,e[759]=mt,qe=e[762]|0,e[762]=qe+ne,e[qe+(ne+4)>>2]=mt|1,e[qe+4>>2]=ne|3,qe=qe+8|0,qe|0}return e[(Or()|0)>>2]=12,qe=0,qe|0}function li(s){s=s|0;var a=0,c=0,o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0;if(s){a=s+-8|0,l=e[760]|0,a>>>0<l>>>0&&st(),c=e[s+-4>>2]|0,o=c&3,(o|0)==1&&st(),R=c&-8,ne=s+(R+-8)|0;do if(c&1)ie=a,t=R;else{if(a=e[a>>2]|0,!o)return;if(d=-8-a|0,g=s+d|0,y=a+R|0,g>>>0<l>>>0&&st(),(g|0)==(e[761]|0)){if(a=s+(R+-4)|0,c=e[a>>2]|0,(c&3|0)!=3){ie=g,t=y;break}e[758]=y,e[a>>2]=c&-2,e[s+(d+4)>>2]=y|1,e[ne>>2]=y;return}if(r=a>>>3,a>>>0<256){if(o=e[s+(d+8)>>2]|0,c=e[s+(d+12)>>2]|0,a=3064+(r<<1<<2)|0,(o|0)!=(a|0)&&(o>>>0<l>>>0&&st(),(e[o+12>>2]|0)!=(g|0)&&st()),(c|0)==(o|0)){e[756]=e[756]&~(1<<r),ie=g,t=y;break}(c|0)!=(a|0)?(c>>>0<l>>>0&&st(),a=c+8|0,(e[a>>2]|0)==(g|0)?h=a:st()):h=c+8|0,e[o+12>>2]=c,e[h>>2]=o,ie=g,t=y;break}h=e[s+(d+24)>>2]|0,o=e[s+(d+12)>>2]|0;do if((o|0)==(g|0)){if(c=s+(d+20)|0,a=e[c>>2]|0,!a&&(c=s+(d+16)|0,a=e[c>>2]|0,!a)){f=0;break}for(;;){if(o=a+20|0,r=e[o>>2]|0,r){a=r,c=o;continue}if(o=a+16|0,r=e[o>>2]|0,r)a=r,c=o;else break}if(c>>>0<l>>>0)st();else{e[c>>2]=0,f=a;break}}else if(r=e[s+(d+8)>>2]|0,r>>>0<l>>>0&&st(),a=r+12|0,(e[a>>2]|0)!=(g|0)&&st(),c=o+8|0,(e[c>>2]|0)==(g|0)){e[a>>2]=o,e[c>>2]=r,f=o;break}else st();while(!1);if(h){if(a=e[s+(d+28)>>2]|0,c=3328+(a<<2)|0,(g|0)==(e[c>>2]|0)){if(e[c>>2]=f,!f){e[757]=e[757]&~(1<<a),ie=g,t=y;break}}else if(h>>>0<(e[760]|0)>>>0&&st(),a=h+16|0,(e[a>>2]|0)==(g|0)?e[a>>2]=f:e[h+20>>2]=f,!f){ie=g,t=y;break}c=e[760]|0,f>>>0<c>>>0&&st(),e[f+24>>2]=h,a=e[s+(d+16)>>2]|0;do if(a)if(a>>>0<c>>>0)st();else{e[f+16>>2]=a,e[a+24>>2]=f;break}while(!1);if(a=e[s+(d+20)>>2]|0,a)if(a>>>0<(e[760]|0)>>>0)st();else{e[f+20>>2]=a,e[a+24>>2]=f,ie=g,t=y;break}else ie=g,t=y}else ie=g,t=y}while(!1);if(ie>>>0>=ne>>>0&&st(),a=s+(R+-4)|0,c=e[a>>2]|0,c&1||st(),c&2)e[a>>2]=c&-2,e[ie+4>>2]=t|1,e[ie+t>>2]=t;else{if((ne|0)==(e[762]|0)){if(q=(e[759]|0)+t|0,e[759]=q,e[762]=ie,e[ie+4>>2]=q|1,(ie|0)!=(e[761]|0))return;e[761]=0,e[758]=0;return}if((ne|0)==(e[761]|0)){q=(e[758]|0)+t|0,e[758]=q,e[761]=ie,e[ie+4>>2]=q|1,e[ie+q>>2]=q;return}t=(c&-8)+t|0,r=c>>>3;do if(c>>>0>=256){h=e[s+(R+16)>>2]|0,a=e[s+(R|4)>>2]|0;do if((a|0)==(ne|0)){if(c=s+(R+12)|0,a=e[c>>2]|0,!a&&(c=s+(R+8)|0,a=e[c>>2]|0,!a)){F=0;break}for(;;){if(o=a+20|0,r=e[o>>2]|0,r){a=r,c=o;continue}if(o=a+16|0,r=e[o>>2]|0,r)a=r,c=o;else break}if(c>>>0<(e[760]|0)>>>0)st();else{e[c>>2]=0,F=a;break}}else if(c=e[s+R>>2]|0,c>>>0<(e[760]|0)>>>0&&st(),o=c+12|0,(e[o>>2]|0)!=(ne|0)&&st(),r=a+8|0,(e[r>>2]|0)==(ne|0)){e[o>>2]=a,e[r>>2]=c,F=a;break}else st();while(!1);if(h){if(a=e[s+(R+20)>>2]|0,c=3328+(a<<2)|0,(ne|0)==(e[c>>2]|0)){if(e[c>>2]=F,!F){e[757]=e[757]&~(1<<a);break}}else if(h>>>0<(e[760]|0)>>>0&&st(),a=h+16|0,(e[a>>2]|0)==(ne|0)?e[a>>2]=F:e[h+20>>2]=F,!F)break;c=e[760]|0,F>>>0<c>>>0&&st(),e[F+24>>2]=h,a=e[s+(R+8)>>2]|0;do if(a)if(a>>>0<c>>>0)st();else{e[F+16>>2]=a,e[a+24>>2]=F;break}while(!1);if(a=e[s+(R+12)>>2]|0,a)if(a>>>0<(e[760]|0)>>>0)st();else{e[F+20>>2]=a,e[a+24>>2]=F;break}}}else{if(o=e[s+R>>2]|0,c=e[s+(R|4)>>2]|0,a=3064+(r<<1<<2)|0,(o|0)!=(a|0)&&(o>>>0<(e[760]|0)>>>0&&st(),(e[o+12>>2]|0)!=(ne|0)&&st()),(c|0)==(o|0)){e[756]=e[756]&~(1<<r);break}(c|0)!=(a|0)?(c>>>0<(e[760]|0)>>>0&&st(),a=c+8|0,(e[a>>2]|0)==(ne|0)?_=a:st()):_=c+8|0,e[o+12>>2]=c,e[_>>2]=o}while(!1);if(e[ie+4>>2]=t|1,e[ie+t>>2]=t,(ie|0)==(e[761]|0)){e[758]=t;return}}if(a=t>>>3,t>>>0<256){c=a<<1,r=3064+(c<<2)|0,o=e[756]|0,a=1<<a,o&a?(a=3064+(c+2<<2)|0,c=e[a>>2]|0,c>>>0<(e[760]|0)>>>0?st():(J=a,W=c)):(e[756]=o|a,J=3064+(c+2<<2)|0,W=r),e[J>>2]=ie,e[W+12>>2]=ie,e[ie+8>>2]=W,e[ie+12>>2]=r;return}a=t>>>8,a?t>>>0>16777215?r=31:(J=(a+1048320|0)>>>16&8,W=a<<J,ne=(W+520192|0)>>>16&4,W=W<<ne,r=(W+245760|0)>>>16&2,r=14-(ne|J|r)+(W<<r>>>15)|0,r=t>>>(r+7|0)&1|r<<1):r=0,a=3328+(r<<2)|0,e[ie+28>>2]=r,e[ie+20>>2]=0,e[ie+16>>2]=0,c=e[757]|0,o=1<<r;e:do if(c&o){a=e[a>>2]|0;t:do if((e[a+4>>2]&-8|0)!=(t|0)){for(r=t<<((r|0)==31?0:25-(r>>>1)|0);c=a+16+(r>>>31<<2)|0,o=e[c>>2]|0,!!o;)if((e[o+4>>2]&-8|0)==(t|0)){q=o;break t}else r=r<<1,a=o;if(c>>>0<(e[760]|0)>>>0)st();else{e[c>>2]=ie,e[ie+24>>2]=a,e[ie+12>>2]=ie,e[ie+8>>2]=ie;break e}}else q=a;while(!1);if(a=q+8|0,c=e[a>>2]|0,W=e[760]|0,c>>>0>=W>>>0&q>>>0>=W>>>0){e[c+12>>2]=ie,e[a>>2]=ie,e[ie+8>>2]=c,e[ie+12>>2]=q,e[ie+24>>2]=0;break}else st()}else e[757]=c|o,e[a>>2]=ie,e[ie+24>>2]=a,e[ie+12>>2]=ie,e[ie+8>>2]=ie;while(!1);if(ie=(e[764]|0)+-1|0,e[764]=ie,!ie)a=3480;else return;for(;a=e[a>>2]|0,a;)a=a+8|0;e[764]=-1}}function e1(s,a){s=s|0,a=a|0;var c=0;return s?(c=Oe(a,s)|0,(a|s)>>>0>65535&&(c=((c>>>0)/(s>>>0)|0|0)==(a|0)?c:-1)):c=0,a=Pi(c)|0,!a||!(e[a+-4>>2]&3)||gt(a|0,0,c|0)|0,a|0}function V1(s,a){s=s|0,a=a|0;var c=0,o=0;return s?a>>>0>4294967231?(e[(Or()|0)>>2]=12,s=0,s|0):(c=Zc(s+-8|0,a>>>0<11?16:a+11&-8)|0,c?(s=c+8|0,s|0):(c=Pi(a)|0,c?(o=e[s+-4>>2]|0,o=(o&-8)-(o&3|0?4:8)|0,un(c|0,s|0,(o>>>0<a>>>0?o:a)|0)|0,li(s),s=c,s|0):(s=0,s|0))):(s=Pi(a)|0,s|0)}function Zc(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0;if(R=s+4|0,F=e[R>>2]|0,d=F&-8,g=s+d|0,l=e[760]|0,c=F&3,(c|0)!=1&s>>>0>=l>>>0&s>>>0<g>>>0||st(),o=s+(d|4)|0,r=e[o>>2]|0,r&1||st(),!c)return a>>>0<256?(s=0,s|0):(d>>>0>=(a+4|0)>>>0&&(d-a|0)>>>0<=e[876]<<1>>>0||(s=0),s|0);if(d>>>0>=a>>>0)return c=d-a|0,c>>>0<=15||(e[R>>2]=F&1|a|2,e[s+(a+4)>>2]=c|3,e[o>>2]=e[o>>2]|1,Ul(s+a|0,c)),s|0;if((g|0)==(e[762]|0))return c=(e[759]|0)+d|0,c>>>0<=a>>>0?(s=0,s|0):(_=c-a|0,e[R>>2]=F&1|a|2,e[s+(a+4)>>2]=_|1,e[762]=s+a,e[759]=_,s|0);if((g|0)==(e[761]|0))return o=(e[758]|0)+d|0,o>>>0<a>>>0?(s=0,s|0):(c=o-a|0,c>>>0>15?(e[R>>2]=F&1|a|2,e[s+(a+4)>>2]=c|1,e[s+o>>2]=c,o=s+(o+4)|0,e[o>>2]=e[o>>2]&-2,o=s+a|0):(e[R>>2]=F&1|o|2,o=s+(o+4)|0,e[o>>2]=e[o>>2]|1,o=0,c=0),e[758]=c,e[761]=o,s|0);if(r&2||(y=(r&-8)+d|0,y>>>0<a>>>0))return s=0,s|0;_=y-a|0,t=r>>>3;do if(r>>>0>=256){h=e[s+(d+24)>>2]|0,t=e[s+(d+12)>>2]|0;do if((t|0)==(g|0)){if(o=s+(d+20)|0,c=e[o>>2]|0,!c&&(o=s+(d+16)|0,c=e[o>>2]|0,!c)){f=0;break}for(;;){if(r=c+20|0,t=e[r>>2]|0,t){c=t,o=r;continue}if(r=c+16|0,t=e[r>>2]|0,t)c=t,o=r;else break}if(o>>>0<l>>>0)st();else{e[o>>2]=0,f=c;break}}else if(r=e[s+(d+8)>>2]|0,r>>>0<l>>>0&&st(),c=r+12|0,(e[c>>2]|0)!=(g|0)&&st(),o=t+8|0,(e[o>>2]|0)==(g|0)){e[c>>2]=t,e[o>>2]=r,f=t;break}else st();while(!1);if(h){if(c=e[s+(d+28)>>2]|0,o=3328+(c<<2)|0,(g|0)==(e[o>>2]|0)){if(e[o>>2]=f,!f){e[757]=e[757]&~(1<<c);break}}else if(h>>>0<(e[760]|0)>>>0&&st(),c=h+16|0,(e[c>>2]|0)==(g|0)?e[c>>2]=f:e[h+20>>2]=f,!f)break;o=e[760]|0,f>>>0<o>>>0&&st(),e[f+24>>2]=h,c=e[s+(d+16)>>2]|0;do if(c)if(c>>>0<o>>>0)st();else{e[f+16>>2]=c,e[c+24>>2]=f;break}while(!1);if(c=e[s+(d+20)>>2]|0,c)if(c>>>0<(e[760]|0)>>>0)st();else{e[f+20>>2]=c,e[c+24>>2]=f;break}}}else{if(r=e[s+(d+8)>>2]|0,o=e[s+(d+12)>>2]|0,c=3064+(t<<1<<2)|0,(r|0)!=(c|0)&&(r>>>0<l>>>0&&st(),(e[r+12>>2]|0)!=(g|0)&&st()),(o|0)==(r|0)){e[756]=e[756]&~(1<<t);break}(o|0)!=(c|0)?(o>>>0<l>>>0&&st(),c=o+8|0,(e[c>>2]|0)==(g|0)?h=c:st()):h=o+8|0,e[r+12>>2]=o,e[h>>2]=r}while(!1);return _>>>0<16?(e[R>>2]=y|F&1|2,a=s+(y|4)|0,e[a>>2]=e[a>>2]|1,s|0):(e[R>>2]=F&1|a|2,e[s+(a+4)>>2]=_|3,F=s+(y|4)|0,e[F>>2]=e[F>>2]|1,Ul(s+a|0,_),s|0)}function Ul(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0;ne=s+a|0,c=e[s+4>>2]|0;do if(c&1)q=s,h=a;else{if(f=e[s>>2]|0,!(c&3))return;if(_=s+(0-f)|0,y=f+a|0,d=e[760]|0,_>>>0<d>>>0&&st(),(_|0)==(e[761]|0)){if(o=s+(a+4)|0,c=e[o>>2]|0,(c&3|0)!=3){q=_,h=y;break}e[758]=y,e[o>>2]=c&-2,e[s+(4-f)>>2]=y|1,e[ne>>2]=y;return}if(t=f>>>3,f>>>0<256){if(r=e[s+(8-f)>>2]|0,o=e[s+(12-f)>>2]|0,c=3064+(t<<1<<2)|0,(r|0)!=(c|0)&&(r>>>0<d>>>0&&st(),(e[r+12>>2]|0)!=(_|0)&&st()),(o|0)==(r|0)){e[756]=e[756]&~(1<<t),q=_,h=y;break}(o|0)!=(c|0)?(o>>>0<d>>>0&&st(),c=o+8|0,(e[c>>2]|0)==(_|0)?l=c:st()):l=o+8|0,e[r+12>>2]=o,e[l>>2]=r,q=_,h=y;break}l=e[s+(24-f)>>2]|0,r=e[s+(12-f)>>2]|0;do if((r|0)==(_|0)){if(r=16-f|0,o=s+(r+4)|0,c=e[o>>2]|0,!c&&(o=s+r|0,c=e[o>>2]|0,!c)){g=0;break}for(;;){if(r=c+20|0,t=e[r>>2]|0,t){c=t,o=r;continue}if(r=c+16|0,t=e[r>>2]|0,t)c=t,o=r;else break}if(o>>>0<d>>>0)st();else{e[o>>2]=0,g=c;break}}else if(t=e[s+(8-f)>>2]|0,t>>>0<d>>>0&&st(),c=t+12|0,(e[c>>2]|0)!=(_|0)&&st(),o=r+8|0,(e[o>>2]|0)==(_|0)){e[c>>2]=r,e[o>>2]=t,g=r;break}else st();while(!1);if(l){if(c=e[s+(28-f)>>2]|0,o=3328+(c<<2)|0,(_|0)==(e[o>>2]|0)){if(e[o>>2]=g,!g){e[757]=e[757]&~(1<<c),q=_,h=y;break}}else if(l>>>0<(e[760]|0)>>>0&&st(),c=l+16|0,(e[c>>2]|0)==(_|0)?e[c>>2]=g:e[l+20>>2]=g,!g){q=_,h=y;break}r=e[760]|0,g>>>0<r>>>0&&st(),e[g+24>>2]=l,c=16-f|0,o=e[s+c>>2]|0;do if(o)if(o>>>0<r>>>0)st();else{e[g+16>>2]=o,e[o+24>>2]=g;break}while(!1);if(c=e[s+(c+4)>>2]|0,c)if(c>>>0<(e[760]|0)>>>0)st();else{e[g+20>>2]=c,e[c+24>>2]=g,q=_,h=y;break}else q=_,h=y}else q=_,h=y}while(!1);if(d=e[760]|0,ne>>>0<d>>>0&&st(),c=s+(a+4)|0,o=e[c>>2]|0,o&2)e[c>>2]=o&-2,e[q+4>>2]=h|1,e[q+h>>2]=h;else{if((ne|0)==(e[762]|0)){if(W=(e[759]|0)+h|0,e[759]=W,e[762]=q,e[q+4>>2]=W|1,(q|0)!=(e[761]|0))return;e[761]=0,e[758]=0;return}if((ne|0)==(e[761]|0)){W=(e[758]|0)+h|0,e[758]=W,e[761]=q,e[q+4>>2]=W|1,e[q+W>>2]=W;return}h=(o&-8)+h|0,t=o>>>3;do if(o>>>0>=256){l=e[s+(a+24)>>2]|0,r=e[s+(a+12)>>2]|0;do if((r|0)==(ne|0)){if(o=s+(a+20)|0,c=e[o>>2]|0,!c&&(o=s+(a+16)|0,c=e[o>>2]|0,!c)){F=0;break}for(;;){if(r=c+20|0,t=e[r>>2]|0,t){c=t,o=r;continue}if(r=c+16|0,t=e[r>>2]|0,t)c=t,o=r;else break}if(o>>>0<d>>>0)st();else{e[o>>2]=0,F=c;break}}else if(t=e[s+(a+8)>>2]|0,t>>>0<d>>>0&&st(),c=t+12|0,(e[c>>2]|0)!=(ne|0)&&st(),o=r+8|0,(e[o>>2]|0)==(ne|0)){e[c>>2]=r,e[o>>2]=t,F=r;break}else st();while(!1);if(l){if(c=e[s+(a+28)>>2]|0,o=3328+(c<<2)|0,(ne|0)==(e[o>>2]|0)){if(e[o>>2]=F,!F){e[757]=e[757]&~(1<<c);break}}else if(l>>>0<(e[760]|0)>>>0&&st(),c=l+16|0,(e[c>>2]|0)==(ne|0)?e[c>>2]=F:e[l+20>>2]=F,!F)break;o=e[760]|0,F>>>0<o>>>0&&st(),e[F+24>>2]=l,c=e[s+(a+16)>>2]|0;do if(c)if(c>>>0<o>>>0)st();else{e[F+16>>2]=c,e[c+24>>2]=F;break}while(!1);if(c=e[s+(a+20)>>2]|0,c)if(c>>>0<(e[760]|0)>>>0)st();else{e[F+20>>2]=c,e[c+24>>2]=F;break}}}else{if(r=e[s+(a+8)>>2]|0,o=e[s+(a+12)>>2]|0,c=3064+(t<<1<<2)|0,(r|0)!=(c|0)&&(r>>>0<d>>>0&&st(),(e[r+12>>2]|0)!=(ne|0)&&st()),(o|0)==(r|0)){e[756]=e[756]&~(1<<t);break}(o|0)!=(c|0)?(o>>>0<d>>>0&&st(),c=o+8|0,(e[c>>2]|0)==(ne|0)?R=c:st()):R=o+8|0,e[r+12>>2]=o,e[R>>2]=r}while(!1);if(e[q+4>>2]=h|1,e[q+h>>2]=h,(q|0)==(e[761]|0)){e[758]=h;return}}if(c=h>>>3,h>>>0<256){o=c<<1,t=3064+(o<<2)|0,r=e[756]|0,c=1<<c,r&c?(c=3064+(o+2<<2)|0,o=e[c>>2]|0,o>>>0<(e[760]|0)>>>0?st():(J=c,W=o)):(e[756]=r|c,J=3064+(o+2<<2)|0,W=t),e[J>>2]=q,e[W+12>>2]=q,e[q+8>>2]=W,e[q+12>>2]=t;return}if(c=h>>>8,c?h>>>0>16777215?t=31:(J=(c+1048320|0)>>>16&8,W=c<<J,ne=(W+520192|0)>>>16&4,W=W<<ne,t=(W+245760|0)>>>16&2,t=14-(ne|J|t)+(W<<t>>>15)|0,t=h>>>(t+7|0)&1|t<<1):t=0,c=3328+(t<<2)|0,e[q+28>>2]=t,e[q+20>>2]=0,e[q+16>>2]=0,o=e[757]|0,r=1<<t,!(o&r)){e[757]=o|r,e[c>>2]=q,e[q+24>>2]=c,e[q+12>>2]=q,e[q+8>>2]=q;return}c=e[c>>2]|0;e:do if((e[c+4>>2]&-8|0)!=(h|0)){for(t=h<<((t|0)==31?0:25-(t>>>1)|0);o=c+16+(t>>>31<<2)|0,r=e[o>>2]|0,!!r;)if((e[r+4>>2]&-8|0)==(h|0)){c=r;break e}else t=t<<1,c=r;o>>>0<(e[760]|0)>>>0&&st(),e[o>>2]=q,e[q+24>>2]=c,e[q+12>>2]=q,e[q+8>>2]=q;return}while(!1);o=c+8|0,r=e[o>>2]|0,W=e[760]|0,r>>>0>=W>>>0&c>>>0>=W>>>0||st(),e[r+12>>2]=q,e[o>>2]=q,e[q+8>>2]=r,e[q+12>>2]=c,e[q+24>>2]=0}function Io(s,a,c,o,r,t,h,l,d,f,g,y){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0,t=t|0,h=h|0,l=l|0,d=d|0,f=f|0,g=+g,y=y|0;var _=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0,Ze=0,nt=0,lt=0,Ye=0,Qt=0,Et=0,Ft=0,Ht=0,St=0,Ge=0,mt=0,qe=0,Ei=0,ri=0,Yi=0,Er=0,ji=0,Rt=0,Gt=0,ii=0;if(ri=C,C=C+240|0,W=ri+224|0,J=ri+216|0,X=ri+208|0,se=ri+200|0,_=ri+136|0,Ht=ri+72|0,Ge=ri,mt=ri+232|0,qe=ri+228|0,A[_>>3]=100,A[_+8>>3]=100,A[_+16>>3]=110,A[_+24>>3]=100,A[_+32>>3]=110,A[_+40>>3]=110,A[_+48>>3]=100,A[_+56>>3]=110,A[Ht>>3]=+A[f>>3],A[Ht+8>>3]=+A[f+8>>3],A[Ht+16>>3]=+A[f+16>>3],A[Ht+24>>3]=+A[f+24>>3],A[Ht+32>>3]=+A[f+32>>3],A[Ht+40>>3]=+A[f+40>>3],A[Ht+48>>3]=+A[f+48>>3],A[Ht+56>>3]=+A[f+56>>3],q1(_,Ht,Ge),ae=+A[Ht>>3],Er=+A[Ht+16>>3],q=ae-Er,Ye=+A[Ht+8>>3],Yi=+A[Ht+24>>3],F=Ye-Yi,_=~~(q*q+F*F),F=+A[Ht+32>>3],q=+A[Ht+48>>3],Rt=F-q,ne=+A[Ht+40>>3],ie=+A[Ht+56>>3],ji=ne-ie,Ht=~~(Rt*Rt+ji*ji),F=Er-F,ne=Yi-ne,R=~~(F*F+ne*ne),ae=q-ae,Ye=ie-Ye,St=~~(ae*ae+Ye*Ye),_=~~(+(((Ht|0)>(_|0)?Ht:_)|0)*g*g),R=~~(+(((St|0)>(R|0)?St:R)|0)*g*g),s){for(f=c;(f|0)<(o|0)&(Oe(f<<2,f)|0)<(_|0);)f=f<<1;for(_=c;(_|0)<(o|0)&(Oe(_<<2,_)|0)<(R|0);)_=_<<1}else{for(f=c;(f|0)<(o|0)&(Oe(f,f)|0)<(_|0);)f=f<<1;for(_=c;(_|0)<(o|0)&(Oe(_,_)|0)<(R|0);)_=_<<1}St=(f|0)>(o|0)?o:f,Ft=(_|0)>(o|0)?o:_,Et=(St|0)/(c|0)|0,Qt=(Ft|0)/(c|0)|0,F=(1-g)*.5*10,Ye=g*10,Ht=Oe(c,c)|0;e:do if(a){f=e1(Ht,4)|0,f||(ft(3,5472,J),yt(1));t:do if(l>>>0<2){if(q=F+100,ie=+(Ft|0),ae=+(St|0),se=Ge+48|0,X=Ge+56|0,l=Ge+64|0,U=Ge+8|0,Ae=Ge+16|0,We=Ge+24|0,Ze=Ge+32|0,nt=Ge+40|0,o=(s|0)==1,(Ft|0)>0){a=(St|0)>0,W=0;do{if(ne=q+Ye*(+(W|0)+.5)/ie,a){J=0;do{if(F=q+Ye*(+(J|0)+.5)/ae,g=+A[l>>3]+(+A[se>>3]*F+ne*+A[X>>3]),g==0){Ei=278;break e}Rt=(+A[Ae>>3]+(F*+A[Ge>>3]+ne*+A[U>>3]))/g,P[mt>>2]=Rt,F=(+A[nt>>3]+(F*+A[We>>3]+ne*+A[Ze>>3]))/g,P[qe>>2]=F,_n(d,Rt,F,mt,qe)|0,F=+P[mt>>2],o?(_=((~~(F+1)|0)/2|0)<<1,R=((~~(+P[qe>>2]+1)|0)/2|0)<<1):(_=~~(F+.5),R=~~(+P[qe>>2]+.5)),(_|0)>-1&&(R|0)<(h|0)&((R|0)>-1&(_|0)<(t|0))&&(Gt=((Oe(R,t)|0)+_|0)*3|0,ii=f+((Oe((W|0)/(Qt|0)|0,c)|0)+((J|0)/(Et|0)|0)<<2)|0,e[ii>>2]=(e[ii>>2]|0)+((((B[r+(Gt+1)>>0]|0)+(B[r+Gt>>0]|0)+(B[r+(Gt+2)>>0]|0)|0)>>>0)/3|0)),J=J+1|0}while((J|0)<(St|0))}W=W+1|0}while((W|0)<(Ft|0))}}else{if((l&-2|0)==2){if(q=F+100,ie=+(Ft|0),ae=+(St|0),se=Ge+48|0,X=Ge+56|0,l=Ge+64|0,U=Ge+8|0,Ae=Ge+16|0,We=Ge+24|0,Ze=Ge+32|0,nt=Ge+40|0,o=(s|0)==1,(Ft|0)<=0)break;for(a=(St|0)>0,W=0;;){if(ne=q+Ye*(+(W|0)+.5)/ie,a){J=0;do{if(F=q+Ye*(+(J|0)+.5)/ae,g=+A[l>>3]+(+A[se>>3]*F+ne*+A[X>>3]),g==0){Ei=278;break e}Rt=(+A[Ae>>3]+(F*+A[Ge>>3]+ne*+A[U>>3]))/g,P[mt>>2]=Rt,F=(+A[nt>>3]+(F*+A[We>>3]+ne*+A[Ze>>3]))/g,P[qe>>2]=F,_n(d,Rt,F,mt,qe)|0,F=+P[mt>>2],o?(_=((~~(F+1)|0)/2|0)<<1,R=((~~(+P[qe>>2]+1)|0)/2|0)<<1):(_=~~(F+.5),R=~~(+P[qe>>2]+.5)),(_|0)>-1&&(R|0)<(h|0)&((R|0)>-1&(_|0)<(t|0))&&(Gt=(Oe(R,t)|0)+_<<2,ii=f+((Oe((W|0)/(Qt|0)|0,c)|0)+((J|0)/(Et|0)|0)<<2)|0,e[ii>>2]=(e[ii>>2]|0)+((((B[r+(Gt|1)>>0]|0)+(B[r+Gt>>0]|0)+(B[r+(Gt|2)>>0]|0)|0)>>>0)/3|0)),J=J+1|0}while((J|0)<(St|0))}if(W=W+1|0,(W|0)>=(Ft|0))break t}}if((l&-3|0)==4){if(q=F+100,ie=+(Ft|0),ae=+(St|0),se=Ge+48|0,X=Ge+56|0,l=Ge+64|0,U=Ge+8|0,Ae=Ge+16|0,We=Ge+24|0,Ze=Ge+32|0,nt=Ge+40|0,o=(s|0)==1,(Ft|0)<=0)break;for(a=(St|0)>0,W=0;;){if(ne=q+Ye*(+(W|0)+.5)/ie,a){J=0;do{if(F=q+Ye*(+(J|0)+.5)/ae,g=+A[l>>3]+(+A[se>>3]*F+ne*+A[X>>3]),g==0){Ei=278;break e}Rt=(+A[Ae>>3]+(F*+A[Ge>>3]+ne*+A[U>>3]))/g,P[mt>>2]=Rt,F=(+A[nt>>3]+(F*+A[We>>3]+ne*+A[Ze>>3]))/g,P[qe>>2]=F,_n(d,Rt,F,mt,qe)|0,F=+P[mt>>2],o?(_=((~~(F+1)|0)/2|0)<<1,R=((~~(+P[qe>>2]+1)|0)/2|0)<<1):(_=~~(F+.5),R=~~(+P[qe>>2]+.5)),(_|0)>-1&&(R|0)<(h|0)&((R|0)>-1&(_|0)<(t|0))&&(Gt=(Oe(R,t)|0)+_<<2,ii=f+((Oe((W|0)/(Qt|0)|0,c)|0)+((J|0)/(Et|0)|0)<<2)|0,e[ii>>2]=(e[ii>>2]|0)+((((B[r+(Gt|2)>>0]|0)+(B[r+(Gt|1)>>0]|0)+(B[r+(Gt|3)>>0]|0)|0)>>>0)/3|0)),J=J+1|0}while((J|0)<(St|0))}if(W=W+1|0,(W|0)>=(Ft|0))break t}}switch(l|0){case 5:case 12:case 13:case 14:{if(q=F+100,ie=+(Ft|0),ae=+(St|0),se=Ge+48|0,X=Ge+56|0,l=Ge+64|0,U=Ge+8|0,Ae=Ge+16|0,We=Ge+24|0,Ze=Ge+32|0,nt=Ge+40|0,o=(s|0)==1,(Ft|0)<=0)break t;a=(St|0)>0,W=0;do{if(ne=q+Ye*(+(W|0)+.5)/ie,a){J=0;do{if(F=q+Ye*(+(J|0)+.5)/ae,g=+A[l>>3]+(+A[se>>3]*F+ne*+A[X>>3]),g==0){Ei=278;break e}Rt=(+A[Ae>>3]+(F*+A[Ge>>3]+ne*+A[U>>3]))/g,P[mt>>2]=Rt,F=(+A[nt>>3]+(F*+A[We>>3]+ne*+A[Ze>>3]))/g,P[qe>>2]=F,_n(d,Rt,F,mt,qe)|0,F=+P[mt>>2],o?(_=((~~(F+1)|0)/2|0)<<1,R=((~~(+P[qe>>2]+1)|0)/2|0)<<1):(_=~~(F+.5),R=~~(+P[qe>>2]+.5)),(_|0)>-1&&(R|0)<(h|0)&((R|0)>-1&(_|0)<(t|0))&&(Gt=B[r+((Oe(R,t)|0)+_)>>0]|0,ii=f+((Oe((W|0)/(Qt|0)|0,c)|0)+((J|0)/(Et|0)|0)<<2)|0,e[ii>>2]=(e[ii>>2]|0)+Gt),J=J+1|0}while((J|0)<(St|0))}W=W+1|0}while((W|0)<(Ft|0));break}case 7:{if(q=F+100,ie=+(Ft|0),ae=+(St|0),se=Ge+48|0,X=Ge+56|0,l=Ge+64|0,U=Ge+8|0,Ae=Ge+16|0,We=Ge+24|0,Ze=Ge+32|0,nt=Ge+40|0,o=(s|0)==1,(Ft|0)<=0)break t;a=(St|0)>0,W=0;do{if(ne=q+Ye*(+(W|0)+.5)/ie,a){J=0;do{if(F=q+Ye*(+(J|0)+.5)/ae,g=+A[l>>3]+(+A[se>>3]*F+ne*+A[X>>3]),g==0){Ei=278;break e}Rt=(+A[Ae>>3]+(F*+A[Ge>>3]+ne*+A[U>>3]))/g,P[mt>>2]=Rt,F=(+A[nt>>3]+(F*+A[We>>3]+ne*+A[Ze>>3]))/g,P[qe>>2]=F,_n(d,Rt,F,mt,qe)|0,F=+P[mt>>2],o?(_=((~~(F+1)|0)/2|0)<<1,R=((~~(+P[qe>>2]+1)|0)/2|0)<<1):(_=~~(F+.5),R=~~(+P[qe>>2]+.5)),(_|0)>-1&&(R|0)<(h|0)&((R|0)>-1&(_|0)<(t|0))&&(Gt=B[r+((Oe(R,t)|0)+_<<1|1)>>0]|0,ii=f+((Oe((W|0)/(Qt|0)|0,c)|0)+((J|0)/(Et|0)|0)<<2)|0,e[ii>>2]=(e[ii>>2]|0)+Gt),J=J+1|0}while((J|0)<(St|0))}W=W+1|0}while((W|0)<(Ft|0));break}case 8:{if(q=F+100,ie=+(Ft|0),ae=+(St|0),se=Ge+48|0,X=Ge+56|0,l=Ge+64|0,U=Ge+8|0,Ae=Ge+16|0,We=Ge+24|0,Ze=Ge+32|0,nt=Ge+40|0,o=(s|0)==1,(Ft|0)<=0)break t;a=(St|0)>0,W=0;do{if(ne=q+Ye*(+(W|0)+.5)/ie,a){J=0;do{if(F=q+Ye*(+(J|0)+.5)/ae,g=+A[l>>3]+(+A[se>>3]*F+ne*+A[X>>3]),g==0){Ei=278;break e}Rt=(+A[Ae>>3]+(F*+A[Ge>>3]+ne*+A[U>>3]))/g,P[mt>>2]=Rt,F=(+A[nt>>3]+(F*+A[We>>3]+ne*+A[Ze>>3]))/g,P[qe>>2]=F,_n(d,Rt,F,mt,qe)|0,F=+P[mt>>2],o?(_=((~~(F+1)|0)/2|0)<<1,R=((~~(+P[qe>>2]+1)|0)/2|0)<<1):(_=~~(F+.5),R=~~(+P[qe>>2]+.5)),(_|0)>-1&&(R|0)<(h|0)&((R|0)>-1&(_|0)<(t|0))&&(Gt=B[r+((Oe(R,t)|0)+_<<1)>>0]|0,ii=f+((Oe((W|0)/(Qt|0)|0,c)|0)+((J|0)/(Et|0)|0)<<2)|0,e[ii>>2]=(e[ii>>2]|0)+Gt),J=J+1|0}while((J|0)<(St|0))}W=W+1|0}while((W|0)<(Ft|0));break}case 9:{if(q=F+100,ie=+(Ft|0),ae=+(St|0),se=Ge+48|0,X=Ge+56|0,l=Ge+64|0,U=Ge+8|0,Ae=Ge+16|0,We=Ge+24|0,Ze=Ge+32|0,nt=Ge+40|0,o=(s|0)==1,(Ft|0)<=0)break t;a=(St|0)>0,W=0;do{if(ne=q+Ye*(+(W|0)+.5)/ie,a){J=0;do{if(F=q+Ye*(+(J|0)+.5)/ae,g=+A[l>>3]+(+A[se>>3]*F+ne*+A[X>>3]),g==0){Ei=278;break e}Rt=(+A[Ae>>3]+(F*+A[Ge>>3]+ne*+A[U>>3]))/g,P[mt>>2]=Rt,F=(+A[nt>>3]+(F*+A[We>>3]+ne*+A[Ze>>3]))/g,P[qe>>2]=F,_n(d,Rt,F,mt,qe)|0,F=+P[mt>>2],o?(_=((~~(F+1)|0)/2|0)<<1,R=((~~(+P[qe>>2]+1)|0)/2|0)<<1):(_=~~(F+.5),R=~~(+P[qe>>2]+.5)),(_|0)>-1&&(R|0)<(h|0)&((R|0)>-1&(_|0)<(t|0))&&(Gt=(Oe(R,t)|0)+_<<1,lt=B[r+Gt>>0]|0,Gt=B[r+(Gt|1)>>0]|0,ii=f+((Oe((W|0)/(Qt|0)|0,c)|0)+((J|0)/(Et|0)|0)<<2)|0,e[ii>>2]=(e[ii>>2]|0)+((((Gt<<3&248|4)+(lt&248|4)+(lt<<5&224|Gt>>>3&28|2)|0)>>>0)/3|0)),J=J+1|0}while((J|0)<(St|0))}W=W+1|0}while((W|0)<(Ft|0));break}case 10:{if(q=F+100,ie=+(Ft|0),ae=+(St|0),se=Ge+48|0,X=Ge+56|0,l=Ge+64|0,U=Ge+8|0,Ae=Ge+16|0,We=Ge+24|0,Ze=Ge+32|0,nt=Ge+40|0,o=(s|0)==1,(Ft|0)<=0)break t;a=(St|0)>0,W=0;do{if(ne=q+Ye*(+(W|0)+.5)/ie,a){J=0;do{if(F=q+Ye*(+(J|0)+.5)/ae,g=+A[l>>3]+(+A[se>>3]*F+ne*+A[X>>3]),g==0){Ei=278;break e}Rt=(+A[Ae>>3]+(F*+A[Ge>>3]+ne*+A[U>>3]))/g,P[mt>>2]=Rt,F=(+A[nt>>3]+(F*+A[We>>3]+ne*+A[Ze>>3]))/g,P[qe>>2]=F,_n(d,Rt,F,mt,qe)|0,F=+P[mt>>2],o?(_=((~~(F+1)|0)/2|0)<<1,R=((~~(+P[qe>>2]+1)|0)/2|0)<<1):(_=~~(F+.5),R=~~(+P[qe>>2]+.5)),(_|0)>-1&&(R|0)<(h|0)&((R|0)>-1&(_|0)<(t|0))&&(Gt=(Oe(R,t)|0)+_<<1,lt=B[r+Gt>>0]|0,Gt=B[r+(Gt|1)>>0]|0,ii=f+((Oe((W|0)/(Qt|0)|0,c)|0)+((J|0)/(Et|0)|0)<<2)|0,e[ii>>2]=(e[ii>>2]|0)+((((Gt<<2&248|4)+(lt&248|4)+(lt<<5&224|Gt>>>3&24|4)|0)>>>0)/3|0)),J=J+1|0}while((J|0)<(St|0))}W=W+1|0}while((W|0)<(Ft|0));break}case 11:{if(q=F+100,ie=+(Ft|0),ae=+(St|0),se=Ge+48|0,X=Ge+56|0,l=Ge+64|0,U=Ge+8|0,Ae=Ge+16|0,We=Ge+24|0,Ze=Ge+32|0,nt=Ge+40|0,o=(s|0)==1,(Ft|0)<=0)break t;a=(St|0)>0,W=0;do{if(ne=q+Ye*(+(W|0)+.5)/ie,a){J=0;do{if(F=q+Ye*(+(J|0)+.5)/ae,g=+A[l>>3]+(+A[se>>3]*F+ne*+A[X>>3]),g==0){Ei=278;break e}Rt=(+A[Ae>>3]+(F*+A[Ge>>3]+ne*+A[U>>3]))/g,P[mt>>2]=Rt,F=(+A[nt>>3]+(F*+A[We>>3]+ne*+A[Ze>>3]))/g,P[qe>>2]=F,_n(d,Rt,F,mt,qe)|0,F=+P[mt>>2],o?(_=((~~(F+1)|0)/2|0)<<1,R=((~~(+P[qe>>2]+1)|0)/2|0)<<1):(_=~~(F+.5),R=~~(+P[qe>>2]+.5)),(_|0)>-1&&(R|0)<(h|0)&((R|0)>-1&(_|0)<(t|0))&&(Gt=(Oe(R,t)|0)+_<<1,lt=B[r+Gt>>0]|0,ii=f+((Oe((W|0)/(Qt|0)|0,c)|0)+((J|0)/(Et|0)|0)<<2)|0,e[ii>>2]=(e[ii>>2]|0)+((((lt<<4&240|8)+(lt&240|8)+((B[r+(Gt|1)>>0]|0)&240|8)|0)>>>0)/3|0)),J=J+1|0}while((J|0)<(St|0))}W=W+1|0}while((W|0)<(Ft|0));break}default:{ft(3,4615,W),Ei=278;break e}}}while(!1);if(_=Oe(Qt,Et)|0,Ht){R=0;do M[y+R>>0]=((e[f+(R<<2)>>2]|0)>>>0)/(_>>>0)|0,R=R+1|0;while((R|0)<(Ht|0))}li(f),f=0}else{lt=Ht*3|0,f=e1(lt,4)|0,f||(ft(3,5472,se),yt(1));do switch(l|0){case 0:{if(q=F+100,ie=+(Ft|0),ae=+(St|0),se=Ge+48|0,X=Ge+56|0,l=Ge+64|0,U=Ge+8|0,Ae=Ge+16|0,We=Ge+24|0,Ze=Ge+32|0,nt=Ge+40|0,o=(s|0)==1,(Ft|0)>0){a=(St|0)>0,W=0;do{if(ne=q+Ye*(+(W|0)+.5)/ie,a){J=0;do{if(F=q+Ye*(+(J|0)+.5)/ae,g=+A[l>>3]+(+A[se>>3]*F+ne*+A[X>>3]),g==0){Ei=278;break e}Rt=(+A[Ae>>3]+(F*+A[Ge>>3]+ne*+A[U>>3]))/g,P[mt>>2]=Rt,F=(+A[nt>>3]+(F*+A[We>>3]+ne*+A[Ze>>3]))/g,P[qe>>2]=F,_n(d,Rt,F,mt,qe)|0,F=+P[mt>>2],o?(_=((~~(F+1)|0)/2|0)<<1,R=((~~(+P[qe>>2]+1)|0)/2|0)<<1):(_=~~(F+.5),R=~~(+P[qe>>2]+.5)),(_|0)>-1&&(R|0)<(h|0)&((R|0)>-1&(_|0)<(t|0))&&(R=((Oe(R,t)|0)+_|0)*3|0,s=((Oe((W|0)/(Qt|0)|0,c)|0)+((J|0)/(Et|0)|0)|0)*3|0,_=f+(s<<2)|0,e[_>>2]=(e[_>>2]|0)+(B[r+(R+2)>>0]|0),_=f+(s+1<<2)|0,e[_>>2]=(e[_>>2]|0)+(B[r+(R+1)>>0]|0),s=f+(s+2<<2)|0,e[s>>2]=(e[s>>2]|0)+(B[r+R>>0]|0)),J=J+1|0}while((J|0)<(St|0))}W=W+1|0}while((W|0)<(Ft|0))}break}case 1:{if(q=F+100,ie=+(Ft|0),ae=+(St|0),se=Ge+48|0,X=Ge+56|0,l=Ge+64|0,U=Ge+8|0,Ae=Ge+16|0,We=Ge+24|0,Ze=Ge+32|0,nt=Ge+40|0,o=(s|0)==1,(Ft|0)>0){a=(St|0)>0,W=0;do{if(ne=q+Ye*(+(W|0)+.5)/ie,a){J=0;do{if(F=q+Ye*(+(J|0)+.5)/ae,g=+A[l>>3]+(+A[se>>3]*F+ne*+A[X>>3]),g==0){Ei=278;break e}Rt=(+A[Ae>>3]+(F*+A[Ge>>3]+ne*+A[U>>3]))/g,P[mt>>2]=Rt,F=(+A[nt>>3]+(F*+A[We>>3]+ne*+A[Ze>>3]))/g,P[qe>>2]=F,_n(d,Rt,F,mt,qe)|0,F=+P[mt>>2],o?(_=((~~(F+1)|0)/2|0)<<1,R=((~~(+P[qe>>2]+1)|0)/2|0)<<1):(_=~~(F+.5),R=~~(+P[qe>>2]+.5)),(_|0)>-1&&(R|0)<(h|0)&((R|0)>-1&(_|0)<(t|0))&&(R=((Oe(R,t)|0)+_|0)*3|0,s=((Oe((W|0)/(Qt|0)|0,c)|0)+((J|0)/(Et|0)|0)|0)*3|0,_=f+(s<<2)|0,e[_>>2]=(e[_>>2]|0)+(B[r+R>>0]|0),_=f+(s+1<<2)|0,e[_>>2]=(e[_>>2]|0)+(B[r+(R+1)>>0]|0),s=f+(s+2<<2)|0,e[s>>2]=(e[s>>2]|0)+(B[r+(R+2)>>0]|0)),J=J+1|0}while((J|0)<(St|0))}W=W+1|0}while((W|0)<(Ft|0))}break}case 2:{if(q=F+100,ie=+(Ft|0),ae=+(St|0),se=Ge+48|0,X=Ge+56|0,l=Ge+64|0,U=Ge+8|0,Ae=Ge+16|0,We=Ge+24|0,Ze=Ge+32|0,nt=Ge+40|0,o=(s|0)==1,(Ft|0)>0){a=(St|0)>0,W=0;do{if(ne=q+Ye*(+(W|0)+.5)/ie,a){J=0;do{if(F=q+Ye*(+(J|0)+.5)/ae,g=+A[l>>3]+(+A[se>>3]*F+ne*+A[X>>3]),g==0){Ei=278;break e}Rt=(+A[Ae>>3]+(F*+A[Ge>>3]+ne*+A[U>>3]))/g,P[mt>>2]=Rt,F=(+A[nt>>3]+(F*+A[We>>3]+ne*+A[Ze>>3]))/g,P[qe>>2]=F,_n(d,Rt,F,mt,qe)|0,F=+P[mt>>2],o?(_=((~~(F+1)|0)/2|0)<<1,R=((~~(+P[qe>>2]+1)|0)/2|0)<<1):(_=~~(F+.5),R=~~(+P[qe>>2]+.5)),(_|0)>-1&&(R|0)<(h|0)&((R|0)>-1&(_|0)<(t|0))&&(R=(Oe(R,t)|0)+_<<2,s=((Oe((W|0)/(Qt|0)|0,c)|0)+((J|0)/(Et|0)|0)|0)*3|0,_=f+(s<<2)|0,e[_>>2]=(e[_>>2]|0)+(B[r+(R|2)>>0]|0),_=f+(s+1<<2)|0,e[_>>2]=(e[_>>2]|0)+(B[r+(R|1)>>0]|0),s=f+(s+2<<2)|0,e[s>>2]=(e[s>>2]|0)+(B[r+R>>0]|0)),J=J+1|0}while((J|0)<(St|0))}W=W+1|0}while((W|0)<(Ft|0))}break}case 3:{if(q=F+100,ie=+(Ft|0),ae=+(St|0),se=Ge+48|0,X=Ge+56|0,l=Ge+64|0,U=Ge+8|0,Ae=Ge+16|0,We=Ge+24|0,Ze=Ge+32|0,nt=Ge+40|0,o=(s|0)==1,(Ft|0)>0){a=(St|0)>0,W=0;do{if(ne=q+Ye*(+(W|0)+.5)/ie,a){J=0;do{if(F=q+Ye*(+(J|0)+.5)/ae,g=+A[l>>3]+(+A[se>>3]*F+ne*+A[X>>3]),g==0){Ei=278;break e}Rt=(+A[Ae>>3]+(F*+A[Ge>>3]+ne*+A[U>>3]))/g,P[mt>>2]=Rt,F=(+A[nt>>3]+(F*+A[We>>3]+ne*+A[Ze>>3]))/g,P[qe>>2]=F,_n(d,Rt,F,mt,qe)|0,F=+P[mt>>2],o?(_=((~~(F+1)|0)/2|0)<<1,R=((~~(+P[qe>>2]+1)|0)/2|0)<<1):(_=~~(F+.5),R=~~(+P[qe>>2]+.5)),(_|0)>-1&&(R|0)<(h|0)&((R|0)>-1&(_|0)<(t|0))&&(R=(Oe(R,t)|0)+_<<2,s=((Oe((W|0)/(Qt|0)|0,c)|0)+((J|0)/(Et|0)|0)|0)*3|0,_=f+(s<<2)|0,e[_>>2]=(e[_>>2]|0)+(B[r+R>>0]|0),_=f+(s+1<<2)|0,e[_>>2]=(e[_>>2]|0)+(B[r+(R|1)>>0]|0),s=f+(s+2<<2)|0,e[s>>2]=(e[s>>2]|0)+(B[r+(R|2)>>0]|0)),J=J+1|0}while((J|0)<(St|0))}W=W+1|0}while((W|0)<(Ft|0))}break}case 4:{if(q=F+100,ie=+(Ft|0),ae=+(St|0),se=Ge+48|0,X=Ge+56|0,l=Ge+64|0,U=Ge+8|0,Ae=Ge+16|0,We=Ge+24|0,Ze=Ge+32|0,nt=Ge+40|0,o=(s|0)==1,(Ft|0)>0){a=(St|0)>0,W=0;do{if(ne=q+Ye*(+(W|0)+.5)/ie,a){J=0;do{if(F=q+Ye*(+(J|0)+.5)/ae,g=+A[l>>3]+(+A[se>>3]*F+ne*+A[X>>3]),g==0){Ei=278;break e}Rt=(+A[Ae>>3]+(F*+A[Ge>>3]+ne*+A[U>>3]))/g,P[mt>>2]=Rt,F=(+A[nt>>3]+(F*+A[We>>3]+ne*+A[Ze>>3]))/g,P[qe>>2]=F,_n(d,Rt,F,mt,qe)|0,F=+P[mt>>2],o?(_=((~~(F+1)|0)/2|0)<<1,R=((~~(+P[qe>>2]+1)|0)/2|0)<<1):(_=~~(F+.5),R=~~(+P[qe>>2]+.5)),(_|0)>-1&&(R|0)<(h|0)&((R|0)>-1&(_|0)<(t|0))&&(R=(Oe(R,t)|0)+_<<2,s=((Oe((W|0)/(Qt|0)|0,c)|0)+((J|0)/(Et|0)|0)|0)*3|0,_=f+(s<<2)|0,e[_>>2]=(e[_>>2]|0)+(B[r+(R|1)>>0]|0),_=f+(s+1<<2)|0,e[_>>2]=(e[_>>2]|0)+(B[r+(R|2)>>0]|0),s=f+(s+2<<2)|0,e[s>>2]=(e[s>>2]|0)+(B[r+(R|3)>>0]|0)),J=J+1|0}while((J|0)<(St|0))}W=W+1|0}while((W|0)<(Ft|0))}break}case 5:case 12:case 13:case 14:{if(q=F+100,ie=+(Ft|0),ae=+(St|0),se=Ge+48|0,X=Ge+56|0,l=Ge+64|0,U=Ge+8|0,Ae=Ge+16|0,We=Ge+24|0,Ze=Ge+32|0,nt=Ge+40|0,o=(s|0)==1,(Ft|0)>0){a=(St|0)>0,W=0;do{if(ne=q+Ye*(+(W|0)+.5)/ie,a){J=0;do{if(F=q+Ye*(+(J|0)+.5)/ae,g=+A[l>>3]+(+A[se>>3]*F+ne*+A[X>>3]),g==0){Ei=278;break e}Rt=(+A[Ae>>3]+(F*+A[Ge>>3]+ne*+A[U>>3]))/g,P[mt>>2]=Rt,F=(+A[nt>>3]+(F*+A[We>>3]+ne*+A[Ze>>3]))/g,P[qe>>2]=F,_n(d,Rt,F,mt,qe)|0,F=+P[mt>>2],o?(_=((~~(F+1)|0)/2|0)<<1,R=((~~(+P[qe>>2]+1)|0)/2|0)<<1):(_=~~(F+.5),R=~~(+P[qe>>2]+.5)),(_|0)>-1&&(R|0)<(h|0)&((R|0)>-1&(_|0)<(t|0))&&(R=B[r+((Oe(R,t)|0)+_)>>0]|0,s=((Oe((W|0)/(Qt|0)|0,c)|0)+((J|0)/(Et|0)|0)|0)*3|0,_=f+(s<<2)|0,e[_>>2]=(e[_>>2]|0)+R,_=f+(s+1<<2)|0,e[_>>2]=(e[_>>2]|0)+R,s=f+(s+2<<2)|0,e[s>>2]=(e[s>>2]|0)+R),J=J+1|0}while((J|0)<(St|0))}W=W+1|0}while((W|0)<(Ft|0))}break}case 6:{if(q=F+100,ie=+(Ft|0),ae=+(St|0),se=Ge+48|0,X=Ge+56|0,l=Ge+64|0,U=Ge+8|0,Ae=Ge+16|0,We=Ge+24|0,Ze=Ge+32|0,nt=Ge+40|0,o=(s|0)==1,(Ft|0)>0){a=(St|0)>0,W=0;do{if(ne=q+Ye*(+(W|0)+.5)/ie,a){J=0;do{if(F=q+Ye*(+(J|0)+.5)/ae,g=+A[l>>3]+(+A[se>>3]*F+ne*+A[X>>3]),g==0){Ei=278;break e}Rt=(+A[Ae>>3]+(F*+A[Ge>>3]+ne*+A[U>>3]))/g,P[mt>>2]=Rt,F=(+A[nt>>3]+(F*+A[We>>3]+ne*+A[Ze>>3]))/g,P[qe>>2]=F,_n(d,Rt,F,mt,qe)|0,F=+P[mt>>2],o?(_=((~~(F+1)|0)/2|0)<<1,R=((~~(+P[qe>>2]+1)|0)/2|0)<<1):(_=~~(F+.5),R=~~(+P[qe>>2]+.5)),(_|0)>-1&&(R|0)<(h|0)&((R|0)>-1&(_|0)<(t|0))&&(R=(Oe(R,t)|0)+_<<2,s=((Oe((W|0)/(Qt|0)|0,c)|0)+((J|0)/(Et|0)|0)|0)*3|0,_=f+(s<<2)|0,e[_>>2]=(e[_>>2]|0)+(B[r+(R|3)>>0]|0),_=f+(s+1<<2)|0,e[_>>2]=(e[_>>2]|0)+(B[r+(R|2)>>0]|0),s=f+(s+2<<2)|0,e[s>>2]=(e[s>>2]|0)+(B[r+(R|1)>>0]|0)),J=J+1|0}while((J|0)<(St|0))}W=W+1|0}while((W|0)<(Ft|0))}break}case 7:{if(q=F+100,ie=+(Ft|0),ae=+(St|0),se=Ge+48|0,X=Ge+56|0,l=Ge+64|0,U=Ge+8|0,Ae=Ge+16|0,We=Ge+24|0,Ze=Ge+32|0,nt=Ge+40|0,o=(s|0)==1,(Ft|0)>0){a=(St|0)>0,W=0;do{if(ne=q+Ye*(+(W|0)+.5)/ie,a){J=0;do{if(F=q+Ye*(+(J|0)+.5)/ae,g=+A[l>>3]+(+A[se>>3]*F+ne*+A[X>>3]),g==0){Ei=278;break e}Rt=(+A[Ae>>3]+(F*+A[Ge>>3]+ne*+A[U>>3]))/g,P[mt>>2]=Rt,F=(+A[nt>>3]+(F*+A[We>>3]+ne*+A[Ze>>3]))/g,P[qe>>2]=F,_n(d,Rt,F,mt,qe)|0,F=+P[mt>>2],o?(_=((~~(F+1)|0)/2|0)<<1,R=((~~(+P[qe>>2]+1)|0)/2|0)<<1):(_=~~(F+.5),R=~~(+P[qe>>2]+.5)),(_|0)>-1&&(R|0)<(h|0)&((R|0)>-1&(_|0)<(t|0))&&(ii=Oe(R,t)|0,Gt=(_&65534)+ii<<1,Er=+((B[r+Gt>>0]|0)+-128|0),Rt=+((B[r+(Gt+2)>>0]|0)+-128|0),ji=+((B[r+(ii+_<<1|1)>>0]|0)+-16|0)*298.0820007324219,ii=~~(Er*516.4110107421875+ji)>>8,Gt=~~(ji-Er*100.29100036621094-Rt*208.1199951171875)>>8,R=~~(ji+Rt*408.5830078125)>>8,ii=(ii|0)>0?ii:0,s=((Oe((W|0)/(Qt|0)|0,c)|0)+((J|0)/(Et|0)|0)|0)*3|0,_=f+(s<<2)|0,e[_>>2]=((ii|0)<255?ii:255)+(e[_>>2]|0),Gt=(Gt|0)>0?Gt:0,_=f+(s+1<<2)|0,e[_>>2]=((Gt|0)<255?Gt:255)+(e[_>>2]|0),R=(R|0)>0?R:0,s=f+(s+2<<2)|0,e[s>>2]=((R|0)<255?R:255)+(e[s>>2]|0)),J=J+1|0}while((J|0)<(St|0))}W=W+1|0}while((W|0)<(Ft|0))}break}case 8:{if(q=F+100,ie=+(Ft|0),ae=+(St|0),se=Ge+48|0,X=Ge+56|0,l=Ge+64|0,U=Ge+8|0,Ae=Ge+16|0,We=Ge+24|0,Ze=Ge+32|0,nt=Ge+40|0,o=(s|0)==1,(Ft|0)>0){a=(St|0)>0,W=0;do{if(ne=q+Ye*(+(W|0)+.5)/ie,a){J=0;do{if(F=q+Ye*(+(J|0)+.5)/ae,g=+A[l>>3]+(+A[se>>3]*F+ne*+A[X>>3]),g==0){Ei=278;break e}Rt=(+A[Ae>>3]+(F*+A[Ge>>3]+ne*+A[U>>3]))/g,P[mt>>2]=Rt,F=(+A[nt>>3]+(F*+A[We>>3]+ne*+A[Ze>>3]))/g,P[qe>>2]=F,_n(d,Rt,F,mt,qe)|0,F=+P[mt>>2],o?(_=((~~(F+1)|0)/2|0)<<1,R=((~~(+P[qe>>2]+1)|0)/2|0)<<1):(_=~~(F+.5),R=~~(+P[qe>>2]+.5)),(_|0)>-1&&(R|0)<(h|0)&((R|0)>-1&(_|0)<(t|0))&&(R=Oe(R,t)|0,Gt=(_&65534)+R<<1,Er=+((B[r+(Gt|1)>>0]|0)+-128|0),Rt=+((B[r+(Gt+3)>>0]|0)+-128|0),ji=+((B[r+(R+_<<1)>>0]|0)+-16|0)*298.0820007324219,_=~~(ji+Er*516.4110107421875)>>8,R=~~(ji-Er*100.29100036621094-Rt*208.1199951171875)>>8,Gt=~~(ji+Rt*408.5830078125)>>8,_=(_|0)>0?_:0,ii=((Oe((W|0)/(Qt|0)|0,c)|0)+((J|0)/(Et|0)|0)|0)*3|0,s=f+(ii<<2)|0,e[s>>2]=((_|0)<255?_:255)+(e[s>>2]|0),R=(R|0)>0?R:0,s=f+(ii+1<<2)|0,e[s>>2]=((R|0)<255?R:255)+(e[s>>2]|0),Gt=(Gt|0)>0?Gt:0,ii=f+(ii+2<<2)|0,e[ii>>2]=((Gt|0)<255?Gt:255)+(e[ii>>2]|0)),J=J+1|0}while((J|0)<(St|0))}W=W+1|0}while((W|0)<(Ft|0))}break}case 9:{if(q=F+100,ie=+(Ft|0),ae=+(St|0),se=Ge+48|0,X=Ge+56|0,l=Ge+64|0,U=Ge+8|0,Ae=Ge+16|0,We=Ge+24|0,Ze=Ge+32|0,nt=Ge+40|0,o=(s|0)==1,(Ft|0)>0){a=(St|0)>0,W=0;do{if(ne=q+Ye*(+(W|0)+.5)/ie,a){J=0;do{if(F=q+Ye*(+(J|0)+.5)/ae,g=+A[l>>3]+(+A[se>>3]*F+ne*+A[X>>3]),g==0){Ei=278;break e}Rt=(+A[Ae>>3]+(F*+A[Ge>>3]+ne*+A[U>>3]))/g,P[mt>>2]=Rt,F=(+A[nt>>3]+(F*+A[We>>3]+ne*+A[Ze>>3]))/g,P[qe>>2]=F,_n(d,Rt,F,mt,qe)|0,F=+P[mt>>2],o?(_=((~~(F+1)|0)/2|0)<<1,R=((~~(+P[qe>>2]+1)|0)/2|0)<<1):(_=~~(F+.5),R=~~(+P[qe>>2]+.5)),(_|0)>-1&&(R|0)<(h|0)&((R|0)>-1&(_|0)<(t|0))&&(Gt=(Oe(R,t)|0)+_<<1,R=B[r+(Gt|1)>>0]|0,ii=((Oe((W|0)/(Qt|0)|0,c)|0)+((J|0)/(Et|0)|0)|0)*3|0,s=f+(ii<<2)|0,e[s>>2]=(R<<3&248|4)+(e[s>>2]|0),Gt=B[r+Gt>>0]|0,s=f+(ii+1<<2)|0,e[s>>2]=(Gt<<5&224|R>>>3&28|2)+(e[s>>2]|0),ii=f+(ii+2<<2)|0,e[ii>>2]=(Gt&248|4)+(e[ii>>2]|0)),J=J+1|0}while((J|0)<(St|0))}W=W+1|0}while((W|0)<(Ft|0))}break}case 10:{if(q=F+100,ie=+(Ft|0),ae=+(St|0),se=Ge+48|0,X=Ge+56|0,l=Ge+64|0,U=Ge+8|0,Ae=Ge+16|0,We=Ge+24|0,Ze=Ge+32|0,nt=Ge+40|0,o=(s|0)==1,(Ft|0)>0){a=(St|0)>0,W=0;do{if(ne=q+Ye*(+(W|0)+.5)/ie,a){J=0;do{if(F=q+Ye*(+(J|0)+.5)/ae,g=+A[l>>3]+(+A[se>>3]*F+ne*+A[X>>3]),g==0){Ei=278;break e}Rt=(+A[Ae>>3]+(F*+A[Ge>>3]+ne*+A[U>>3]))/g,P[mt>>2]=Rt,F=(+A[nt>>3]+(F*+A[We>>3]+ne*+A[Ze>>3]))/g,P[qe>>2]=F,_n(d,Rt,F,mt,qe)|0,F=+P[mt>>2],o?(_=((~~(F+1)|0)/2|0)<<1,R=((~~(+P[qe>>2]+1)|0)/2|0)<<1):(_=~~(F+.5),R=~~(+P[qe>>2]+.5)),(_|0)>-1&&(R|0)<(h|0)&((R|0)>-1&(_|0)<(t|0))&&(Gt=(Oe(R,t)|0)+_<<1,R=B[r+(Gt|1)>>0]|0,ii=((Oe((W|0)/(Qt|0)|0,c)|0)+((J|0)/(Et|0)|0)|0)*3|0,s=f+(ii<<2)|0,e[s>>2]=(R<<2&248|4)+(e[s>>2]|0),Gt=B[r+Gt>>0]|0,s=f+(ii+1<<2)|0,e[s>>2]=(Gt<<5&224|R>>>3&24|4)+(e[s>>2]|0),ii=f+(ii+2<<2)|0,e[ii>>2]=(Gt&248|4)+(e[ii>>2]|0)),J=J+1|0}while((J|0)<(St|0))}W=W+1|0}while((W|0)<(Ft|0))}break}case 11:{if(q=F+100,ie=+(Ft|0),ae=+(St|0),se=Ge+48|0,X=Ge+56|0,l=Ge+64|0,U=Ge+8|0,Ae=Ge+16|0,We=Ge+24|0,Ze=Ge+32|0,nt=Ge+40|0,o=(s|0)==1,(Ft|0)>0){a=(St|0)>0,W=0;do{if(ne=q+Ye*(+(W|0)+.5)/ie,a){J=0;do{if(F=q+Ye*(+(J|0)+.5)/ae,g=+A[l>>3]+(+A[se>>3]*F+ne*+A[X>>3]),g==0){Ei=278;break e}Rt=(+A[Ae>>3]+(F*+A[Ge>>3]+ne*+A[U>>3]))/g,P[mt>>2]=Rt,F=(+A[nt>>3]+(F*+A[We>>3]+ne*+A[Ze>>3]))/g,P[qe>>2]=F,_n(d,Rt,F,mt,qe)|0,F=+P[mt>>2],o?(_=((~~(F+1)|0)/2|0)<<1,R=((~~(+P[qe>>2]+1)|0)/2|0)<<1):(_=~~(F+.5),R=~~(+P[qe>>2]+.5)),(_|0)>-1&&(R|0)<(h|0)&((R|0)>-1&(_|0)<(t|0))&&(Gt=(Oe(R,t)|0)+_<<1,ii=((Oe((W|0)/(Qt|0)|0,c)|0)+((J|0)/(Et|0)|0)|0)*3|0,s=f+(ii<<2)|0,e[s>>2]=(e[s>>2]|0)+((B[r+(Gt|1)>>0]|0)&240|8),Gt=B[r+Gt>>0]|0,s=f+(ii+1<<2)|0,e[s>>2]=(Gt<<4&240|8)+(e[s>>2]|0),ii=f+(ii+2<<2)|0,e[ii>>2]=(Gt&240|8)+(e[ii>>2]|0)),J=J+1|0}while((J|0)<(St|0))}W=W+1|0}while((W|0)<(Ft|0))}break}default:{ft(3,4615,X),Ei=278;break e}}while(!1);if(R=Oe(Qt,Et)|0,Ht){_=0;do M[y+_>>0]=((e[f+(_<<2)>>2]|0)>>>0)/(R>>>0)|0,_=_+1|0;while((_|0)<(lt|0))}li(f),f=0}while(!1);return(Ei|0)==278&&(li(f),f=-1),C=ri,f|0}function W1(s,a,c,o,r,t,h){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0,t=t|0,h=h|0;var l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0;J=C,C=C+32|0,g=J+24|0,f=J+8|0,ne=J;e:do if((a+-3|0)>>>0>5)e[c>>2]=-1,e[o>>2]=0,A[r>>3]=-1,l=-1;else{if(e[f>>2]=0,F=a+-1|0,e[f+4>>2]=Oe(F,a)|0,_=Oe(a,a)|0,e[f+8>>2]=_+-1,e[f+12>>2]=F,d=M[s+(e[f>>2]|0)>>0]|0,l=(d&255)>0?d:0,d=(d&255)<255?d:-1,R=M[s+(e[f+4>>2]|0)>>0]|0,l=(R&255)>(l&255)?R:l,d=(R&255)<(d&255)?R:d,R=M[s+(e[f+8>>2]|0)>>0]|0,l=(R&255)>(l&255)?R:l,d=(R&255)<(d&255)?R:d,R=M[s+(e[f+12>>2]|0)>>0]|0,l=((R&255)>(l&255)?R:l)&255,d=((R&255)<(d&255)?R:d)&255,(l-d|0)<30){e[c>>2]=-1,e[o>>2]=0,A[r>>3]=-1,l=-2;break}for(y=(l+d|0)>>>1,M[g>>0]=(B[s+(e[f>>2]|0)>>0]|0)>>>0<y>>>0&1,M[g+1>>0]=(B[s+(e[f+4>>2]|0)>>0]|0)>>>0<y>>>0&1,M[g+2>>0]=(B[s+(e[f+8>>2]|0)>>0]|0)>>>0<y>>>0&1,M[g+3>>0]=(B[s+(e[f+12>>2]|0)>>0]|0)>>>0<y>>>0&1,d=0;;){if(l=d+1|0,(M[g+d>>0]|0)==1&&(M[g+((l|0)%4|0)>>0]|0)==1&&!(M[g+((d+2|0)%4|0)>>0]|0)){l=d,d=10;break}if((l|0)<4)d=l;else{d=12;break}}if((d|0)==10)e[o>>2]=l;else if((d|0)==12&&(l|0)==4){e[c>>2]=-1,e[o>>2]=0,A[r>>3]=-1,l=-3;break}if(!_)R=255;else{l=255,d=0;do R=s+d|0,g=B[R>>0]|0,f=g-y|0,f=(f|0)<0?0-f|0:f,l=(f|0)<(l|0)?f:l,M[R>>0]=g>>>0<y>>>0&1,d=d+1|0;while((d|0)<(_|0));R=l}switch(e[o>>2]|0){case 0:{if((a|0)>0){_=(a|0)==0,d=0,l=0,o=0;do{if(g=(o|0)==(F|0),y=Oe(o,a)|0,!_){f=0;do f|o|0&&!(g&((f|0)==0|(f|0)==(F|0)))&&(d=an(d|0,l|0,1)|0,d=(M[s+(f+y)>>0]|0)!=0|d,l=Je),f=f+1|0;while((f|0)!=(a|0))}o=o+1|0}while((o|0)<(a|0))}else d=0,l=0;break}case 1:{if((a|0)>0){_=(a|0)>0,d=0,l=0,o=0;do{if(g=(o|0)==0,y=(o|0)==(F|0),_)for(f=F;W=(f|0)==(F|0),!(g&W)&&!(y&(W|(f|0)==0))&&(d=an(d|0,l|0,1)|0,d=(M[s+((Oe(f,a)|0)+o)>>0]|0)!=0|d,l=Je),(f|0)>0;)f=f+-1|0;o=o+1|0}while((o|0)<(a|0))}else d=0,l=0;break}case 2:{if((a|0)>0)for(_=(a|0)>0,d=0,l=0,o=F;;){if(y=(o|0)==(F|0)|(o|0)==0,g=Oe(o,a)|0,_)for(f=F;y&(f|0)==(F|0)|(f|o|0)==0||(d=an(d|0,l|0,1)|0,d=(M[s+(f+g)>>0]|0)!=0|d,l=Je),(f|0)>0;)f=f+-1|0;if((o|0)>0)o=o+-1|0;else break}else d=0,l=0;break}case 3:{if((a|0)>0)for(_=(a|0)>0,d=0,l=0,o=F;;){if(g=(o|0)==(F|0),y=(o|0)==0,_){f=0;do g&(f|0)==0|(f|o|0)==0|y&(f|0)==(F|0)||(d=an(d|0,l|0,1)|0,d=(M[s+((Oe(f,a)|0)+o)>>0]|0)!=0|d,l=Je),f=f+1|0;while((f|0)<(a|0))}if((o|0)>0)o=o+-1|0;else break}else d=0,l=0;break}default:d=0,l=0}switch(A[r>>3]=(R|0)>30?1:+(R|0)/30,t|0){case 259:{if(W=M[4551+d>>0]|0,t=W<<24>>24,h=ne,e[h>>2]=t,e[h+4>>2]=((t|0)<0)<<31>>31,W<<24>>24<0){e[c>>2]=-1,A[r>>3]=-1,l=-4;break e}break}case 515:{if(l=M[4423+d>>0]|0,t=l<<24>>24,W=ne,e[W>>2]=t,e[W+4>>2]=((t|0)<0)<<31>>31,h&&(e[h>>2]=B[4487+d>>0]),l<<24>>24<0){e[c>>2]=-1,A[r>>3]=-1,l=-4;break e}break}case 772:case 1028:{if(l=no(t,d,l,0,ne)|0,(l|0)<0){e[c>>2]=-1,A[r>>3]=-1,l=-4;break e}(h|0)!=0&(l|0)>0&&(e[h>>2]=l);break}default:W=ne,e[W>>2]=d,e[W+4>>2]=l}e[c>>2]=e[ne>>2],l=0}while(!1);return C=J,l|0}function cn(s,a,c,o,r,t,h){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0,t=t|0,h=h|0;var l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0;Ae=C,C=C+16|0,l=Ae+8|0,f=Ae;e:do if(!s)e[r>>2]=0,e[t>>2]=0,A[h>>3]=-1,a=-1;else switch(a|0){case 0:{if(g=Oe(o,o)|0,se=g*3|0,X=Pi(g*12|0)|0,X||(ft(3,5472,f),yt(1)),!g)a=0;else{a=0,l=0;do a=((B[c+l>>0]|0)^255)+a|0,l=l+1|0;while((l|0)<(se|0))}if(l=(a|0)/(se|0)|0,!g)d=0;else{f=0,a=0;do ie=((B[c+f>>0]|0)^255)-l|0,e[X+(f<<2)>>2]=ie,a=(Oe(ie,ie)|0)+a|0,f=f+1|0;while((f|0)<(se|0));d=+(a|0)}if(ae=+tr(+d),ae/(+(o|0)*1.7320508)<15){e[r>>2]=0,e[t>>2]=0,A[h>>3]=-1,li(X),a=-2;break e}if(W=e[s>>2]|0,q=s+12|0,ie=s+16|0,(W|0)>0){J=e[s+8>>2]|0,F=(g|0)==0,f=-1,ne=0,d=0,l=-1,a=-1;do{t:for(;;)switch(f=f+1|0,e[J+(f<<2)>>2]|0){case 0:break;case 2:break t;default:{U=17;break t}}if((U|0)==17){U=0,y=f<<2,_=e[ie>>2]|0,R=0;do{if(s=R+y|0,F)g=0;else{c=e[(e[q>>2]|0)+(s<<2)>>2]|0,o=0,g=0;do g=(Oe(e[c+(o<<2)>>2]|0,e[X+(o<<2)>>2]|0)|0)+g|0,o=o+1|0;while((o|0)<(se|0))}We=+(g|0)/+A[_+(s<<3)>>3]/ae,s=We>d,l=s?R:l,a=s?f:a,d=s?We:d,R=R+1|0}while((R|0)!=4)}ne=ne+1|0}while((ne|0)<(W|0))}else d=0,l=-1,a=-1;e[t>>2]=l,e[r>>2]=a,A[h>>3]=d,li(X),a=0;break e}case 1:{if(se=Oe(o,o)|0,X=Pi(se<<2)|0,X||(ft(3,5472,l),yt(1)),!se)a=0;else{a=0,l=0;do a=((B[c+l>>0]|0)^255)+a|0,l=l+1|0;while((l|0)<(se|0))}if(l=(a|0)/(se|0)|0,!se)d=0;else{f=0,a=0;do ie=((B[c+f>>0]|0)^255)-l|0,e[X+(f<<2)>>2]=ie,a=(Oe(ie,ie)|0)+a|0,f=f+1|0;while((f|0)<(se|0));d=+(a|0)}if(ae=+tr(+d),ae/+(o|0)<15){e[r>>2]=0,e[t>>2]=0,A[h>>3]=-1,li(X),a=-2;break e}if(W=e[s>>2]|0,q=s+20|0,ie=s+24|0,(W|0)>0){F=e[s+8>>2]|0,ne=(se|0)==0,f=-1,J=0,d=0,l=-1,a=-1;do{t:for(;;)switch(f=f+1|0,e[F+(f<<2)>>2]|0){case 0:break;case 2:break t;default:{U=37;break t}}if((U|0)==37){U=0,y=f<<2,_=e[ie>>2]|0,R=0;do{if(s=R+y|0,ne)g=0;else{c=e[(e[q>>2]|0)+(s<<2)>>2]|0,o=0,g=0;do g=(Oe(e[c+(o<<2)>>2]|0,e[X+(o<<2)>>2]|0)|0)+g|0,o=o+1|0;while((o|0)<(se|0))}We=+(g|0)/+A[_+(s<<3)>>3]/ae,s=We>d,l=s?R:l,a=s?f:a,d=s?We:d,R=R+1|0}while((R|0)!=4)}J=J+1|0}while((J|0)<(W|0))}else d=0,l=-1,a=-1;e[t>>2]=l,e[r>>2]=a,A[h>>3]=d,li(X),a=0;break e}default:{a=-1;break e}}while(!1);return C=Ae,a|0}function q1(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0;o=H0(8,8)|0,r=H0(8,1)|0,t=H0(8,1)|0,h=e[o>>2]|0,l=e[r>>2]|0,d=0;do R=s+(d<<4)|0,f=d<<4,A[h+(f<<3)>>3]=+A[R>>3],_=s+(d<<4)+8|0,A[h+((f|1)<<3)>>3]=+A[_>>3],A[h+((f|2)<<3)>>3]=1,A[h+((f|3)<<3)>>3]=0,A[h+((f|4)<<3)>>3]=0,A[h+((f|5)<<3)>>3]=0,y=a+(d<<4)|0,A[h+((f|6)<<3)>>3]=-(+A[R>>3]*+A[y>>3]),A[h+((f|7)<<3)>>3]=-(+A[_>>3]*+A[y>>3]),A[h+((f|8)<<3)>>3]=0,A[h+((f|9)<<3)>>3]=0,A[h+((f|10)<<3)>>3]=0,A[h+((f|11)<<3)>>3]=+A[R>>3],A[h+((f|12)<<3)>>3]=+A[_>>3],A[h+((f|13)<<3)>>3]=1,g=a+(d<<4)+8|0,A[h+((f|14)<<3)>>3]=-(+A[R>>3]*+A[g>>3]),A[h+((f|15)<<3)>>3]=-(+A[_>>3]*+A[g>>3]),f=d<<1,A[l+(f<<3)>>3]=+A[y>>3],A[l+((f|1)<<3)>>3]=+A[g>>3],d=d+1|0;while((d|0)!=4);ns(o)|0,i1(t,o,r)|0,R=e[t>>2]|0,A[c>>3]=+A[R>>3],A[c+8>>3]=+A[R+8>>3],A[c+16>>3]=+A[R+16>>3],R=e[t>>2]|0,A[c+24>>3]=+A[R+24>>3],A[c+32>>3]=+A[R+32>>3],A[c+40>>3]=+A[R+40>>3],R=e[t>>2]|0,A[c+48>>3]=+A[R+48>>3],A[c+56>>3]=+A[R+56>>3],A[c+64>>3]=1,Fi(o)|0,Fi(r)|0,Fi(t)|0}function no(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0,Ze=0,nt=0,lt=0,Ye=0;switch(Ye=C,C=C+2320|0,h=Ye+2304|0,ae=Ye+864|0,J=Ye+784|0,lt=Ye+704|0,q=Ye+624|0,W=Ye+548|0,nt=Ye+40|0,We=Ye,s|0){case 772:{o=9,t=1,l=3;break}case 1028:{o=5,t=2,l=3;break}case 2830:{X=900,F=1472,Ae=64,Ze=120,se=127,U=o,t=9,l=6;break}default:c=-1}if((l|0)==3){for(s=0;M[h+s>>0]=a&1,a=ws(a|0,c|0,1)|0,s=s+1|0,(s|0)!=13;)c=Je;X=840,F=1408,Ae=o,Ze=13,se=15,U=h,l=6}do if((l|0)==6){for(R=t<<1,h=1,c=0;;){o=W+(h<<2)|0,e[o>>2]=0,s=0,a=0;do M[U+a>>0]|0&&(s=s^e[X+(((Oe(a,h)|0)%(se|0)|0)<<2)>>2],e[o>>2]=s),a=a+1|0;while((a|0)<(Ze|0));if(c=s|0?1:c,e[o>>2]=e[F+(s<<2)>>2],(h|0)<(R|0))h=h+1|0;else break}if(ie=(c|0)!=0,ie){if(e[J>>2]=0,c=e[W+4>>2]|0,e[J+4>>2]=c,e[ae>>2]=0,e[ae+72>>2]=1,(R|0)>1){s=1;do e[ae+(s<<2)>>2]=-1,e[ae+72+(s<<2)>>2]=0,s=s+1|0;while((s|0)<(R|0))}for(e[lt>>2]=0,e[lt+4>>2]=0,e[q>>2]=-1,e[q+4>>2]=0,y=0,_=0;;){if(o=_,_=_+1|0,g=J+(_<<2)|0,(c|0)==-1)if(h=o+2|0,e[lt+(h<<2)>>2]=y,(y|0)<0)f=y;else for(c=0;;)if(g=ae+(_*72|0)+(c<<2)|0,f=e[g>>2]|0,e[ae+(h*72|0)+(c<<2)>>2]=f,e[g>>2]=e[F+(f<<2)>>2],(c|0)<(y|0))c=c+1|0;else{f=y;break}else{for(s=o;c=(s|0)>0,c&(e[J+(s<<2)>>2]|0)==-1;)s=s+-1|0;if(c){a=s;do c=a,a=a+-1|0,(e[J+(a<<2)>>2]|0)!=-1&&(s=(e[q+(s<<2)>>2]|0)<(e[q+(a<<2)>>2]|0)?a:s);while((c|0)>1)}a=lt+(s<<2)|0,d=_-s|0,f=d+(e[a>>2]|0)|0,h=o+2|0,f=(y|0)>(f|0)?y:f,e[lt+(h<<2)>>2]=f,c=0;do e[ae+(h*72|0)+(c<<2)>>2]=0,c=c+1|0;while((c|0)<(R|0));if(c=e[a>>2]|0,a=J+(s<<2)|0,(c|0)>=0)for(l=0;o=e[ae+(s*72|0)+(l<<2)>>2]|0,(o|0)!=-1&&(e[ae+(h*72|0)+(d+l<<2)>>2]=e[X+(((o+se+(e[g>>2]|0)-(e[a>>2]|0)|0)%(se|0)|0)<<2)>>2]),(l|0)<(c|0);)l=l+1|0;if((y|0)>=0)for(c=0;g=ae+(_*72|0)+(c<<2)|0,d=e[g>>2]|0,l=ae+(h*72|0)+(c<<2)|0,e[l>>2]=e[l>>2]^d,e[g>>2]=e[F+(d<<2)>>2],(c|0)<(y|0);)c=c+1|0}if(e[q+(h<<2)>>2]=_-f,(_|0)>=(R|0))break;if(c=e[W+(h<<2)>>2]|0,(c|0)==-1?c=0:c=e[X+(c<<2)>>2]|0,o=J+(h<<2)|0,e[o>>2]=c,(f|0)>=1)for(a=1;s=e[W+(h-a<<2)>>2]|0,(s|0)!=-1&&(ne=e[ae+(h*72|0)+(a<<2)>>2]|0,(ne|0)!=0)&&(c=c^e[X+((((e[F+(ne<<2)>>2]|0)+s|0)%(se|0)|0)<<2)>>2],e[o>>2]=c),(a|0)<(f|0);)a=a+1|0;if(c=e[F+(c<<2)>>2]|0,e[o>>2]=c,(f|0)>(t|0))break;y=f}if((f|0)>(t|0)){c=-1;break}if((f|0)>=0)for(c=0;q=ae+(h*72|0)+(c<<2)|0,e[q>>2]=e[F+(e[q>>2]<<2)>>2],(c|0)<(f|0);)c=c+1|0;if((f|0)>=1)for(c=1;e[We+(c<<2)>>2]=e[ae+(h*72|0)+(c<<2)>>2],(c|0)<(f|0);)c=c+1|0;l=(f|0)<1,c=0,d=1;do{if(l)s=1;else for(t=1,s=1;a=We+(t<<2)|0,o=e[a>>2]|0,(o|0)!=-1&&(ae=(o+t|0)%(se|0)|0,e[a>>2]=ae,s=e[X+(ae<<2)>>2]^s),(t|0)<(f|0);)t=t+1|0;s||(e[nt+(c<<2)>>2]=se-d,c=c+1|0),d=d+1|0}while((se|0)>=(d|0));if((c|0)!=(f|0)){c=-1;break}if((f|0)>0){c=0;do We=U+(e[nt+(c<<2)>>2]|0)|0,M[We>>0]=B[We>>0]^1,c=c+1|0;while((c|0)<(f|0))}}else h=0;for(s=r,e[s>>2]=0,e[s+4>>2]=0,s=1,a=0,o=0,t=0,c=Ze-Ae|0;nt=c1(B[U+c>>0]|0,0,s|0,a|0)|0,o=Gr(nt|0,Je|0,o|0,t|0)|0,t=Je,nt=r,e[nt>>2]=o,e[nt+4>>2]=t,s=an(s|0,a|0,1)|0,c=c+1|0,!((c|0)>=(Ze|0));)a=Je;ie?c=e[lt+(h<<2)>>2]|0:c=0}while(!1);return C=Ye,c|0}function la(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;U=C,C=C+32|0,X=U+24|0,t=U+16|0,c=U+8|0;do if(s){if(!a){ft(3,4674,c),c=-1;break}se=s+8|0,r=e[s+4>>2]|0;e:do if((r|0)>0){o=e[se>>2]|0,c=0;do{if(!(e[o+(c<<2)>>2]|0))break e;c=c+1|0}while((c|0)<(r|0))}else c=0;while(!1);if((c|0)!=(r|0)){if(ae=z1(a)|0,!ae){ft(3,4719,t),c=-1;break}F=s+28|0,ne=c<<2,J=s+12|0,W=s+20|0,q=s+16|0,ie=s+24|0,r=_o(ae,4742)|0,o=0;e:for(;;){R=o+ne|0,_=0,a=0;do{if(g=(_|0)==0,y=(_|0)==2,t=e[F>>2]|0,(t|0)>0){f=0;do{if((t|0)>0){d=0;do{if(!r){o=17;break e}t=H1(r)|0,r=_o(0,4742)|0,t=255-t|0,l=(((Oe(e[F>>2]|0,f)|0)+d|0)*3|0)+_|0,e[(e[(e[J>>2]|0)+(R<<2)>>2]|0)+(l<<2)>>2]=t,l=(Oe(e[F>>2]|0,f)|0)+d|0,h=e[(e[W>>2]|0)+(R<<2)>>2]|0,l=h+(l<<2)|0,g?e[l>>2]=t:(e[l>>2]=(e[l>>2]|0)+t,y&&(l=h+((Oe(e[F>>2]|0,f)|0)+d<<2)|0,e[l>>2]=(e[l>>2]|0)/3|0)),a=t+a|0,d=d+1|0,t=e[F>>2]|0}while((d|0)<(t|0))}f=f+1|0}while((f|0)<(t|0))}_=_+1|0}while((_|0)<3);if(t=e[F>>2]|0,d=(a|0)/(Oe(t*3|0,t)|0)|0,(Oe(t*3|0,t)|0)>0){h=e[(e[J>>2]|0)+(R<<2)>>2]|0,l=0,a=0;do _=h+(l<<2)|0,t=(e[_>>2]|0)-d|0,e[_>>2]=t,a=(Oe(t,t)|0)+a|0,l=l+1|0,t=e[F>>2]|0;while((l|0)<(Oe(t*3|0,t)|0))}else a=0;if(Ae=+tr(+ +(a|0)),A[(e[q>>2]|0)+(R<<3)>>3]=Ae==0?1e-7:Ae,!(Oe(t,t)|0))a=0;else{t=e[(e[W>>2]|0)+(R<<2)>>2]|0,h=0,a=0;do y=t+(h<<2)|0,_=(e[y>>2]|0)-d|0,e[y>>2]=_,a=(Oe(_,_)|0)+a|0,h=h+1|0,_=e[F>>2]|0;while((h|0)<(Oe(_,_)|0))}if(Ae=+tr(+ +(a|0)),A[(e[ie>>2]|0)+(R<<3)>>3]=Ae==0?1e-7:Ae,o=o+1|0,(o|0)>=4){o=32;break}}if((o|0)==17){ft(3,4747,X),li(ae),c=-1;break}else if((o|0)==32){li(ae),e[(e[se>>2]|0)+(c<<2)>>2]=1,e[s>>2]=(e[s>>2]|0)+1;break}}else c=-1}else ft(3,4649,U),c=-1;while(!1);return C=U,c|0}function h0(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0,l=0;l=C,C=C+32|0,h=l+16|0,t=l+8|0,c=l,r=k1(a,4854)|0;do if(r){if(N1(r,0,2)|0,c=Q1(r)|0,N1(r,0,0)|0,o=Pi(c+1|0)|0,!o){ft(3,5472,t),eo(r)|0,c=-1;break}if(t=Ka(o,c,1,r)|0,eo(r)|0,t){M[o+c>>0]=0,c=la(s,o)|0,li(o);break}else{e[h>>2]=a,ft(3,4820,h),li(o),c=-1;break}}else e[c>>2]=a,ft(3,4774,c),c=-1;while(!1);return C=l,c|0}function $c(s,a){return s=s|0,a=a|0,a=(e[s+8>>2]|0)+(a<<2)|0,e[a>>2]|0?(e[a>>2]=0,e[s>>2]=(e[s>>2]|0)+-1,a=1):a=-1,a|0}function ft(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0;if(h=C,C=C+32|0,t=h+16|0,o=h,e[t>>2]=0,(a|0)!=0&(e[496]|0)<=(s|0)&&M[a>>0]|0&&(e[o>>2]=c,r=U0(t,a,o)|0,(r|0)>-1)){o=e[497]|0;do if(o){if(!(e[498]|0)){xa[o&15](e[t>>2]|0);break}if(c=Pr()|0,s=e[500]|0,(c|0)==(e[499]|0)){(s|0)>0&&(xa[o&15](e[502]|0),e[500]=0,o=e[497]|0),xa[o&15](e[t>>2]|0);break}if(o=e[501]|0,(s|0)<(o|0))if(a=(e[502]|0)+s|0,(r|0)<(-3-s+o|0)){kl(a,e[t>>2]|0)|0,e[500]=(e[500]|0)+r;break}else{M[a>>0]=46,M[a+1>>0]=46,M[a+2>>0]=46,M[a+3>>0]=0,e[500]=e[501];break}}else Ol(e[t>>2]|0,e[659]|0)|0;while(!1);li(e[t>>2]|0)}C=h}function Q0(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0,l=0;l=0;do{o=s+(l<<5)|0,r=s+(l<<5)+8|0,t=s+(l<<5)+16|0,h=0;do A[c+(l<<5)+(h<<3)>>3]=+A[o>>3]*+A[a+(h<<3)>>3]+ +A[r>>3]*+A[a+32+(h<<3)>>3]+ +A[t>>3]*+A[a+64+(h<<3)>>3],h=h+1|0;while((h|0)!=4);h=c+(l<<5)+24|0,A[h>>3]=+A[s+(l<<5)+24>>3]+ +A[h>>3],l=l+1|0}while((l|0)!=3);return 0}function X1(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0,l=0,d=0;l=H0(4,4)|0,c=e[l>>2]|0,o=e[l>>2]|0,r=e[l>>2]|0,t=e[l>>2]|0,h=0;do d=h<<2,A[c+(d<<3)>>3]=+A[s+(h<<5)>>3],A[o+(1+d<<3)>>3]=+A[s+(h<<5)+8>>3],A[r+(2+d<<3)>>3]=+A[s+(h<<5)+16>>3],A[t+(3+d<<3)>>3]=+A[s+(h<<5)+24>>3],h=h+1|0;while((h|0)!=3);c=e[l>>2]|0,o=c+96|0,e[o>>2]=0,e[o+4>>2]=0,e[o+8>>2]=0,e[o+12>>2]=0,e[o+16>>2]=0,e[o+20>>2]=0,A[c+120>>3]=1,ns(l)|0,c=e[l>>2]|0,o=e[l>>2]|0,r=e[l>>2]|0,t=e[l>>2]|0,h=0;do d=h<<2,A[a+(h<<5)>>3]=+A[c+(d<<3)>>3],A[a+(h<<5)+8>>3]=+A[o+(1+d<<3)>>3],A[a+(h<<5)+16>>3]=+A[r+(2+d<<3)>>3],A[a+(h<<5)+24>>3]=+A[t+(3+d<<3)>>3],h=h+1|0;while((h|0)!=3);return Fi(l)|0,0}function so(s){switch(s=s|0,s|0){case 1:case 0:{s=3;break}case 6:case 4:case 3:case 2:{s=4;break}case 14:case 13:case 12:case 5:{s=1;break}case 11:case 10:case 9:case 8:case 7:{s=2;break}default:s=0}return s|0}function jc(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0;var r=0;do if((s|0)!=0&(a|0)!=0&(c|0)!=0){if(r=W0(a,47)|0,!r){M[s>>0]=0;break}r=r+((o|0)!=0&1)-a|0,(r+1|0)>>>0<=c>>>0?(e2(s,a,r)|0,M[s+r>>0]=0):s=0}else s=0;while(!1);return s|0}function H0(s,a){s=s|0,a=a|0;var c=0,o=0;c=Pi(12)|0;do if(c)if(o=Pi(Oe(s<<3,a)|0)|0,e[c>>2]=o,o){e[c+4>>2]=s,e[c+8>>2]=a;break}else{li(c),c=0;break}else c=0;while(!1);return c|0}function Rn(s){s=s|0;var a=0;return a=H0(e[s+4>>2]|0,e[s+8>>2]|0)|0,a?(t1(a,s)|0)<0&&(Fi(a)|0,a=0):a=0,a|0}function vs(s,a){s=s|0,a=a|0;var c=0;return c=H0(e[s+4>>2]|0,e[a+8>>2]|0)|0,c?(i1(c,s,a)|0)<0&&(Fi(c)|0,c=0):c=0,c|0}function Ql(s){s=s|0;var a=0;return a=H0(e[s+8>>2]|0,e[s+4>>2]|0)|0,a?(Ro(a,s)|0)<0&&(Fi(a)|0,a=0):a=0,a|0}function t1(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0;if(c=e[s+4>>2]|0,(c|0)==(e[a+4>>2]|0)&&(l=e[s+8>>2]|0,(l|0)==(e[a+8>>2]|0)))if((c|0)>0){o=(l|0)>0,f=0;do{if(r=Oe(l,f)|0,o){t=e[a>>2]|0,h=e[s>>2]|0,d=0;do g=r+d|0,A[h+(g<<3)>>3]=+A[t+(g<<3)>>3],d=d+1|0;while((d|0)<(l|0))}f=f+1|0}while((f|0)<(c|0));c=0}else c=0;else c=-1;return c|0}function Fi(s){return s=s|0,s&&(li(e[s>>2]|0),li(s)),0}function i1(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0;if(y=e[a+8>>2]|0,(y|0)==(e[c+4>>2]|0)&&(ne=e[s+4>>2]|0,(ne|0)==(e[a+4>>2]|0))&&(_=e[s+8>>2]|0,(_|0)==(e[c+8>>2]|0)))if(J=(_|0)>0?_:0,(ne|0)>0)for(R=(_|0)>0,F=(y|0)>0,d=e[s>>2]|0,g=0;;){if(s=Oe(y,g)|0,R)for(r=0,f=d;;){if(A[f>>3]=0,F)for(o=0,t=0,h=(e[a>>2]|0)+(s<<3)|0,l=(e[c>>2]|0)+(r<<3)|0;o=o+ +A[h>>3]*+A[l>>3],A[f>>3]=o,t=t+1|0,!((t|0)>=(y|0));)h=h+8|0,l=l+(_<<3)|0;if(r=r+1|0,(r|0)>=(_|0))break;f=f+8|0}if(g=g+1|0,(g|0)>=(ne|0)){s=0;break}else d=d+(J<<3)|0}else s=0;else s=-1;return s|0}function t2(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0;var r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0;F=e[s+4>>2]|0,J=e[s+8>>2]|0,r=(F|0)<(J|0)?F:J;e:do if(!((F|0)<2|(J|0)<2)&&(e[a+8>>2]|0)==(J|0)&&(e[a+4>>2]|0)==(r|0)&&(W=c+4|0,(e[W>>2]|0)==(r|0))&&(t=o+4|0,(e[t>>2]|0)==(J|0))&&(q=Rn(s)|0,(q|0)!=0)){if(ne=+tr(+ +(F|0)),_=e[q+4>>2]|0,R=e[q+8>>2]|0,!((_|0)<1|(R|0)<1)&&(e[t>>2]|0)==(R|0)){if(R){r=e[o>>2]|0,s=0;do A[r+(s<<3)>>3]=0,s=s+1|0;while((s|0)!=(R|0))}if(y=e[q>>2]|0,_)for(r=(R|0)==0,s=0,l=y;;){if(!r)for(t=0,d=l,f=e[o>>2]|0;A[f>>3]=+A[d>>3]+ +A[f>>3],t=t+1|0,(t|0)!=(R|0);)d=d+8|0,f=f+8|0;if(s=s+1|0,(s|0)==(_|0))break;l=l+(R<<3)|0}if(h=+(_|0),R){r=e[o>>2]|0,s=0;do g=r+(s<<3)|0,A[g>>3]=+A[g>>3]/h,s=s+1|0;while((s|0)!=(R|0))}if(f=(R|0)>0?R:0,(_|0)>0)for(r=(R|0)>0,s=0,l=y;;){if(r)for(t=0,d=l,g=e[o>>2]|0;A[d>>3]=+A[d>>3]-+A[g>>3],t=t+1|0,!((t|0)>=(R|0));)d=d+8|0,g=g+8|0;if(s=s+1|0,(s|0)>=(_|0))break;l=l+(f<<3)|0}if(r=Oe(J,F)|0,(r|0)>0){s=0;do o=y+(s<<3)|0,A[o>>3]=+A[o>>3]/ne,s=s+1|0;while((s|0)<(r|0))}if(r=i2(q,a,c)|0,Fi(q)|0,l=e[W>>2]|0,(l|0)>0){s=e[c>>2]|0,t=0,h=0;do h=h+ +A[s+(t<<3)>>3],t=t+1|0;while((t|0)<(l|0))}else h=0;if((l|0)<=0)break;for(s=e[c>>2]|0,t=0;;)if(c=s+(t<<3)|0,A[c>>3]=+A[c>>3]/h,t=t+1|0,(t|0)>=(l|0))break e}Fi(q)|0,r=-1}else r=-1;while(!1);return r|0}function i2(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0,Ze=0,nt=0,lt=0,Ye=0,Qt=0,Et=0,Ft=0,Ht=0,St=0,Ge=0,mt=0,qe=0,Ei=0,ri=0,Yi=0,Er=0,ji=0,Rt=0,Gt=0,ii=0,Ti=0;Er=C,C=C+16|0,ie=Er,lt=s+4|0,Et=e[lt>>2]|0,Ft=s+8|0,Ht=e[Ft>>2]|0,ri=(Ht|0)<(Et|0)?Ht:Et;e:do if(!((Et|0)<2|(Ht|0)<2)&&(Ei=a+8|0,(e[Ei>>2]|0)==(Ht|0))&&(St=a+4|0,(e[St>>2]|0)==(ri|0))&&(Ge=c+4|0,(e[Ge>>2]|0)==(ri|0))){if(Yi=H0(ri,ri)|0,mt=Yi+4|0,(e[mt>>2]|0)==(ri|0)&&(qe=Yi+8|0,(e[qe>>2]|0)==(ri|0))){if(Ye=(Et|0)<(Ht|0),ne=e[lt>>2]|0,J=e[Ft>>2]|0,Ye){if((ri|0)!=(ne|0)){Fi(Yi)|0,o=-1;break}if(t=e[Yi>>2]|0,(ri|0)>0)for(f=(ri|0)==0,h=(J|0)>0,g=0,F=t;;){if(d=Oe(g,J)|0,!f)for(_=0,ne=F;;){if((_|0)>=(g|0)){if(o=e[s>>2]|0,A[ne>>3]=0,h)for(l=0,y=o+(d<<3)|0,o=o+((Oe(_,J)|0)<<3)|0,r=0;l=l+ +A[y>>3]*+A[o>>3],A[ne>>3]=l,r=r+1|0,!((r|0)>=(J|0));)y=y+8|0,o=o+8|0}else A[ne>>3]=+A[t+((Oe(_,ri)|0)+g<<3)>>3];if(_=_+1|0,(_|0)==(ri|0))break;ne=ne+8|0}if(g=g+1|0,(g|0)>=(ri|0))break;F=F+(ri<<3)|0}}else{if((ri|0)!=(J|0)){Fi(Yi)|0,o=-1;break}if(t=e[Yi>>2]|0,(ri|0)>0)for(d=(ri|0)==0,h=(ne|0)>0,f=0,_=t;;){if(!d)for(y=0,F=_;;){if((y|0)>=(f|0)){if(o=e[s>>2]|0,A[F>>3]=0,h)for(l=0,g=o+(f<<3)|0,o=o+(y<<3)|0,r=0;l=l+ +A[g>>3]*+A[o>>3],A[F>>3]=l,r=r+1|0,!((r|0)>=(ne|0));)g=g+(ri<<3)|0,o=o+(ri<<3)|0}else A[F>>3]=+A[t+((Oe(y,ri)|0)+f<<3)>>3];if(y=y+1|0,(y|0)==(ri|0))break;F=F+8|0}if(f=f+1|0,(f|0)>=(ri|0))break;_=_+(ri<<3)|0}}do if((ri|0)>=2&&(e[Ge>>2]|0)==(ri|0)&&(Qt=zl(ri)|0,(Qt|0)!=0)){if(nt=ri+-1|0,e[ie+4>>2]=nt,e[ie>>2]=(e[Qt>>2]|0)+8,(s2(Yi,c,ie)|0)<0){ha(Qt)|0;break}if(Ae=e[Qt>>2]|0,A[Ae>>3]=0,(nt|0)>0){We=(ri|0)==0,Ze=nt;do{for(r=Ze;!((r|0)<=0);)if(q=+Ur(+ +A[Ae+(r<<3)>>3]),o=r+-1|0,U=e[c>>2]|0,ae=+Ur(+ +A[U+(o<<3)>>3]),q>(ae+ +Ur(+ +A[U+(r<<3)>>3]))*1e-6)r=o;else break;se=Ze,Ze=Ze+-1|0;t:do if((r|0)!=(se|0)){y=Ae+(se<<3)|0,_=Ae+(r+1<<3)|0,F=(r|0)<(se|0),X=0;do{if((X|0)>99)break t;if(X=X+1|0,ne=e[c>>2]|0,J=ne+(Ze<<3)|0,ie=ne+(se<<3)|0,l=+A[ie>>3],R=(+A[J>>3]-l)*.5,W=+A[y>>3],W=W*W,q=+tr(+(W+R*R)),F)for(U=r,R=+A[ne+(r<<3)>>3]-l+W/(R+(R<0?-q:q)),W=+A[_>>3];;){l=+Ur(+R);do if(!(l>=+Ur(+W)))q=-R/W,ae=1/+tr(+(q*q+1)),q=q*ae;else{if(!(l>1e-16)){q=1,ae=0;break}l=-W/R,ae=1/+tr(+(l*l+1)),q=ae,ae=l*ae}while(!1);if(h=ne+(U<<3)|0,Gt=+A[h>>3],g=U,U=U+1|0,d=ne+(U<<3)|0,Rt=+A[d>>3],l=Gt-Rt,f=Ae+(U<<3)|0,ji=ae*(ae*l+q*2*+A[f>>3]),A[h>>3]=Gt-ji,A[d>>3]=Rt+ji,(g|0)>(r|0)&&(d=Ae+(g<<3)|0,A[d>>3]=q*+A[d>>3]-W*ae),Gt=+A[f>>3],A[f>>3]=Gt+ae*(q*l-ae*2*Gt),h=Oe(g,ri)|0,d=Oe(U,ri)|0,We)l=W;else{o=e[Yi>>2]|0,t=0;do Ti=o+(t+h<<3)|0,R=+A[Ti>>3],ii=o+(t+d<<3)|0,l=+A[ii>>3],A[Ti>>3]=q*R-ae*l,A[ii>>3]=ae*R+q*l,t=t+1|0;while((t|0)!=(ri|0))}if((g|0)<(Ze|0)&&(R=+A[f>>3],Ti=Ae+(g+2<<3)|0,l=+A[Ti>>3],A[Ti>>3]=q*l,l=-(ae*l)),(U|0)>=(se|0))break;W=l}Rt=+Ur(+ +A[y>>3]),Gt=+Ur(+ +A[J>>3])}while(Rt>(Gt+ +Ur(+ +A[ie>>3]))*1e-6)}while(!1)}while((se|0)>1)}if(nt){d=e[c>>2]|0,f=e[Yi>>2]|0,g=(ri|0)==0,y=0;do{if(t=d+(y<<3)|0,R=+A[t>>3],h=y,y=y+1|0,(y|0)<(ri|0)){o=h,r=y,l=R;do Gt=+A[d+(r<<3)>>3],Ti=Gt>l,l=Ti?Gt:l,o=Ti?r:o,r=r+1|0;while((r|0)<(ri|0))}else o=h,l=R;if(A[d+(o<<3)>>3]=R,A[t>>3]=l,!g)for(t=0,r=f+((Oe(o,ri)|0)<<3)|0,o=f+((Oe(h,ri)|0)<<3)|0;Gt=+A[r>>3],A[r>>3]=+A[o>>3],A[o>>3]=Gt,t=t+1|0,(t|0)!=(ri|0);)r=r+8|0,o=o+8|0}while((y|0)!=(nt|0))}ha(Qt)|0;t:do if(Ye){ie=e[lt>>2]|0,J=e[Ft>>2]|0;do if(!((ie|0)<1|(J|0)<1)){if((e[mt>>2]|0)!=(ie|0)||(e[qe>>2]|0)!=(ie|0)||(e[St>>2]|0)!=(ie|0)||(e[Ei>>2]|0)!=(J|0)||(e[Ge>>2]|0)!=(ie|0))break;r=e[a>>2]|0;i:do if((ie|0)>0){_=e[c>>2]|0,ne=(J|0)==0,F=(ie|0)==0,o=0;do{if(l=+A[_+(o<<3)>>3],l<1e-16)break i;if(R=1/+tr(+ +Ur(+l)),f=Oe(o,ie)|0,!ne)for(g=0,y=r;;){if(F)l=0;else for(t=0,h=(e[Yi>>2]|0)+(f<<3)|0,d=(e[s>>2]|0)+(g<<3)|0,l=0;l=l+ +A[h>>3]*+A[d>>3],t=t+1|0,(t|0)!=(ie|0);)h=h+8|0,d=d+(J<<3)|0;if(A[y>>3]=R*l,g=g+1|0,(g|0)==(J|0))break;y=y+8|0}r=r+(J<<3)|0,o=o+1|0}while((o|0)<(ie|0))}else o=0;while(!1);if(g=(J|0)>0?J:0,(o|0)>=(ie|0))break t;for(d=e[c>>2]|0,f=(J|0)>0,t=r;;){if(A[d+(o<<3)>>3]=0,f)for(r=0,h=t;A[h>>3]=0,r=r+1|0,!((r|0)>=(J|0));)h=h+8|0;if(o=o+1|0,(o|0)>=(ie|0))break t;t=t+(g<<3)|0}}while(!1);Fi(Yi)|0,o=-1;break e}else{t=e[a>>2]|0,_=(Et|0)>(Ht|0)?Ht:Et;i:do if((ri|0)>0){f=e[c>>2]|0,g=(_|0)==0,o=0,y=e[Yi>>2]|0;do{if(+A[f+(o<<3)>>3]<1e-16)break i;if(!g)for(r=0,h=y,d=t;A[d>>3]=+A[h>>3],r=r+1|0,(r|0)!=(_|0);)h=h+8|0,d=d+8|0;y=y+(_<<3)|0,t=t+(_<<3)|0,o=o+1|0}while((o|0)<(ri|0))}else o=0;while(!1);if(g=(_|0)>0?_:0,(o|0)<(ri|0))for(d=e[c>>2]|0,f=(ri|0)>0;;){if(A[d+(o<<3)>>3]=0,f)for(r=0,h=t;A[h>>3]=0,r=r+1|0,!((r|0)>=(ri|0));)h=h+8|0;if(o=o+1|0,(o|0)>=(ri|0))break;t=t+(g<<3)|0}}while(!1);Fi(Yi)|0,o=0;break e}while(!1);Fi(Yi)|0,o=-1;break}Fi(Yi)|0,o=-1}else o=-1;while(!1);return C=Er,o|0}function ns(s){s=s|0;var a=0,c=0,o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0;q=C,C=C+2e3|0,W=q,a=e[s>>2]|0,J=e[s+4>>2]|0;e:do if((J|0)<=500){switch(J|0){case 0:{a=0;break e}case 1:{A[a>>3]=1/+A[a>>3];break e}default:}if((J|0)>0){s=0;do e[W+(s<<2)>>2]=s,s=s+1|0;while((s|0)<(J|0))}if(ne=a+(J+-1<<3)|0,(J|0)>0)for(f=(J|0)==0,_=(J|0)==1,y=(J|0)==0,g=(J|0)==1,R=ne,s=0,F=0;;){if(d=a+((Oe(F,J)|0)<<3)|0,(F|0)<(J|0))for(o=F,r=0,c=d;ie=+Ur(+ +A[c>>3]),l=r<ie,s=l?o:s,r=l?ie:r,o=o+1|0,!((o|0)>=(J|0));)c=c+(J<<3)|0;else r=0;if(r<=1e-10){a=0;break e}if(t=W+(s<<2)|0,h=e[t>>2]|0,l=W+(F<<2)|0,e[t>>2]=e[l>>2],e[l>>2]=h,!f)for(c=0,o=a+((Oe(s,J)|0)<<3)|0,t=d;ie=+A[o>>3],A[o>>3]=+A[t>>3],A[t>>3]=ie,c=c+1|0,(c|0)!=(J|0);)o=o+8|0,t=t+8|0;if(r=+A[d>>3],!_){c=1,o=d;do l=o,o=o+8|0,A[l>>3]=+A[o>>3]/r,c=c+1|0;while((c|0)!=(J|0))}if(A[R>>3]=1/r,!y)for(t=0,h=ne;;){if((t|0)!=(F|0)){if(c=a+((Oe(t,J)|0)<<3)|0,r=+A[c>>3],!g)for(l=1,o=d;ae=c,c=c+8|0,A[ae>>3]=+A[c>>3]-r*+A[o>>3],l=l+1|0,(l|0)!=(J|0);)o=o+8|0;A[h>>3]=-(r*+A[R>>3])}if(t=t+1|0,(t|0)==(J|0))break;h=h+(J<<3)|0}if(F=F+1|0,(F|0)>=(J|0))break;R=R+(J<<3)|0}if((J|0)>0){t=(J|0)>0,h=0;do{s=W+(h<<2)|0;t:do if((h|0)<(J|0)){c=h;do{if((e[s>>2]|0)==(h|0))break t;c=c+1|0,s=W+(c<<2)|0}while((c|0)<(J|0))}else c=h;while(!1);if(e[s>>2]=e[W+(h<<2)>>2],t)for(o=0,s=a+(c<<3)|0,c=a+(h<<3)|0;ie=+A[s>>3],A[s>>3]=+A[c>>3],A[c>>3]=ie,o=o+1|0,!((o|0)>=(J|0));)s=s+(J<<3)|0,c=c+(J<<3)|0;h=h+1|0}while((h|0)<(J|0))}}else a=0;while(!1);return C=q,((a|0)==0)<<31>>31|0}function Ro(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0,l=0,d=0,f=0;if(h=e[s+4>>2]|0,(h|0)==(e[a+8>>2]|0)&&(d=e[s+8>>2]|0,(d|0)==(e[a+4>>2]|0)))if(f=(d|0)>0?d:0,(h|0)>0)for(l=(d|0)>0,o=e[s>>2]|0,t=0;;){if(l)for(s=0,c=(e[a>>2]|0)+(t<<3)|0,r=o;A[r>>3]=+A[c>>3],s=s+1|0,!((s|0)>=(d|0));)c=c+(h<<3)|0,r=r+8|0;if(t=t+1|0,(t|0)>=(h|0)){s=0;break}else o=o+(f<<3)|0}else s=0;else s=-1;return s|0}function Y1(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0;var r=0,t=0,h=0;r=+(a|0)/+(e[s>>2]|0),t=+(c|0)/+(e[s+4>>2]|0),e[o>>2]=a,e[o+4>>2]=c,a=0;do A[o+8+(a<<3)>>3]=r*+A[s+8+(a<<3)>>3],A[o+40+(a<<3)>>3]=t*+A[s+40+(a<<3)>>3],A[o+72+(a<<3)>>3]=+A[s+72+(a<<3)>>3],a=a+1|0;while((a|0)!=4);switch(a=e[s+176>>2]|0,a|0){case 4:{A[o+104>>3]=+A[s+104>>3],A[o+112>>3]=+A[s+112>>3],A[o+120>>3]=+A[s+120>>3],A[o+128>>3]=+A[s+128>>3],A[o+136>>3]=r*+A[s+136>>3],A[o+144>>3]=t*+A[s+144>>3],A[o+152>>3]=r*+A[s+152>>3],A[o+160>>3]=t*+A[s+160>>3],A[o+168>>3]=+A[s+168>>3],h=8;break}case 3:{A[o+104>>3]=r*+A[s+104>>3],A[o+112>>3]=t*+A[s+112>>3],A[o+120>>3]=+A[s+120>>3],A[o+128>>3]=+A[s+128>>3],A[o+136>>3]=+A[s+136>>3]/(r*t),A[o+144>>3]=+A[s+144>>3]/(t*(r*r*t)),h=8;break}case 2:{A[o+104>>3]=r*+A[s+104>>3],A[o+112>>3]=t*+A[s+112>>3],A[o+120>>3]=+A[s+120>>3],A[o+128>>3]=+A[s+128>>3]/(r*t),A[o+136>>3]=+A[s+136>>3]/(t*(r*r*t)),h=8;break}case 1:{A[o+104>>3]=r*+A[s+104>>3],A[o+112>>3]=t*+A[s+112>>3],A[o+120>>3]=+A[s+120>>3],A[o+128>>3]=+A[s+128>>3]/(r*t),h=8;break}default:a=-1}return(h|0)==8&&(e[o+176>>2]=a,a=0),a|0}function r1(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0;if(t=C,C=C+96|0,r=t,+A[s+88>>3]>=0){o=0;do A[r+(o<<5)>>3]=+A[s+(o<<5)>>3],A[r+(o<<5)+8>>3]=+A[s+(o<<5)+8>>3],A[r+(o<<5)+16>>3]=+A[s+(o<<5)+16>>3],A[r+(o<<5)+24>>3]=+A[s+(o<<5)+24>>3],o=o+1|0;while((o|0)!=3)}else{o=0;do A[r+(o<<5)>>3]=-+A[s+(o<<5)>>3],A[r+(o<<5)+8>>3]=-+A[s+(o<<5)+8>>3],A[r+(o<<5)+16>>3]=-+A[s+(o<<5)+16>>3],A[r+(o<<5)+24>>3]=-+A[s+(o<<5)+24>>3],o=o+1|0;while((o|0)!=3)}A[a>>3]=0,A[a+8>>3]=0,A[a+16>>3]=0,A[a+24>>3]=0,A[a+32>>3]=0,A[a+40>>3]=0,A[a+48>>3]=0,A[a+56>>3]=0,A[a+64>>3]=0,A[a+72>>3]=0,A[a+80>>3]=0,A[a+88>>3]=0,h=+A[r+64>>3],_=+A[r+72>>3],R=+A[r+80>>3],se=+tr(+(h*h+_*_+R*R)),s=a+80|0,A[s>>3]=se,se=h/se,ie=c+64|0,A[ie>>3]=se,_=_/+A[s>>3],W=c+72|0,A[W>>3]=_,R=R/+A[s>>3],F=c+80|0,A[F>>3]=R,y=c+88|0,A[y>>3]=+A[r+88>>3]/+A[s>>3],h=+A[r+32>>3],d=+A[r+40>>3],J=+A[r+48>>3],R=se*h+_*d+R*J,g=a+48|0,A[g>>3]=R,h=h-R*+A[ie>>3],d=d-R*+A[W>>3],R=J-R*+A[F>>3],J=+tr(+(h*h+d*d+R*R)),f=a+40|0,A[f>>3]=J,ae=c+32|0,A[ae>>3]=h/J,q=c+40|0,A[q>>3]=d/+A[f>>3],ne=c+48|0,A[ne>>3]=R/+A[f>>3],R=+A[r>>3],d=+A[r+8>>3],J=+A[r+16>>3],h=+A[ie>>3]*R+ +A[W>>3]*d+ +A[F>>3]*J,o=a+16|0,A[o>>3]=h,_=+A[ae>>3]*R+ +A[q>>3]*d+ +A[ne>>3]*J,l=a+8|0,A[l>>3]=_,R=R-_*+A[ae>>3]-h*+A[ie>>3],d=d-_*+A[q>>3]-h*+A[W>>3],h=J-_*+A[ne>>3]-h*+A[F>>3],_=+tr(+(R*R+d*d+h*h)),A[a>>3]=_,A[c>>3]=R/_,A[c+8>>3]=d/+A[a>>3],A[c+16>>3]=h/+A[a>>3],h=+A[y>>3],d=(+A[r+56>>3]-+A[g>>3]*h)/+A[f>>3],A[c+56>>3]=d,A[c+24>>3]=(+A[r+24>>3]-d*+A[l>>3]-+A[o>>3]*h)/+A[a>>3],o=0;do ae=a+(o<<5)|0,A[ae>>3]=+A[ae>>3]/+A[s>>3],ae=a+(o<<5)+8|0,A[ae>>3]=+A[ae>>3]/+A[s>>3],ae=a+(o<<5)+16|0,A[ae>>3]=+A[ae>>3]/+A[s>>3],o=o+1|0;while((o|0)!=3);return C=t,0}function Hl(s,a,c,o,r,t){s=s|0,a=+a,c=+c,o=o|0,r=r|0,t=t|0;var h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0,Ze=0,nt=0;switch(t|0){case 4:{ne=+A[s>>3],J=+A[s+8>>3],W=+A[s+16>>3],q=+A[s+24>>3],U=+A[s+32>>3],ae=+A[s+40>>3],se=+A[s+48>>3],X=+A[s+56>>3],ie=+A[s+64>>3],F=(a-se)/U,d=(c-X)/ae,c=F*F,l=d*d,f=W*2,g=q*6,y=q*2,_=W*6;e:do if(l!=0|c!=0)for(t=1,h=F,a=d;;){if(nt=l+c,Ze=ne*nt+1+nt*(J*nt),Ae=c*3,We=l*Ae,h=h-(q*(nt+c*2)+(a*(f*h)+h*Ze)-F)/(g*h+(f*a+(ne*(l+Ae)+1+J*(l*l+(c*(c*5)+We))))),Ae=y*h,a=a-(W*(l*2+nt)+a*Ze+a*Ae-d)/(_*a+(ne*(c+l*3)+1+J*(l*(l*5)+(c*c+We)))+Ae),(t|0)==4)break e;if(c=h*h,l=a*a,l!=0|c!=0)t=t+1|0;else{h=0,a=0;break}}else h=0,a=0;while(!1);A[o>>3]=se+U*h/ie,A[r>>3]=X+ae*a/ie,t=0;break}case 3:{F=+A[s>>3],h=(a-F)/+A[s+24>>3],R=s+8|0,a=c-+A[R>>3],d=+A[s+32>>3]/1e8,f=+A[s+40>>3]/1e8/1e5,c=h*h+a*a,g=+tr(+c),y=d*3,_=f*5;e:do if(g!=0)for(t=1,l=g;;){if(nt=l-(l*(1-d*c-c*(f*c))-g)/(1-y*c-c*(_*c)),h=h*nt/l,a=a*nt/l,(t|0)==3)break e;if(c=h*h+a*a,l=+tr(+c),l==0){h=0,a=0;break}else t=t+1|0}else h=0,a=0;while(!1);t=s+16|0,A[o>>3]=h/+A[t>>3]+F,A[r>>3]=a/+A[t>>3]+ +A[R>>3],t=0;break}case 2:{F=+A[s>>3],h=a-F,R=s+8|0,a=c-+A[R>>3],d=+A[s+24>>3]/1e8,f=+A[s+32>>3]/1e8/1e5,c=h*h+a*a,g=+tr(+c),y=d*3,_=f*5;e:do if(g!=0)for(t=1,l=g;;){if(nt=l-(l*(1-d*c-c*(f*c))-g)/(1-y*c-c*(_*c)),h=h*nt/l,a=a*nt/l,(t|0)==3)break e;if(c=h*h+a*a,l=+tr(+c),l==0){h=0,a=0;break}else t=t+1|0}else h=0,a=0;while(!1);t=s+16|0,A[o>>3]=h/+A[t>>3]+F,A[r>>3]=a/+A[t>>3]+ +A[R>>3],t=0;break}case 1:{y=+A[s>>3],h=a-y,R=s+8|0,a=c-+A[R>>3],d=+A[s+24>>3]/1e8,c=h*h+a*a,f=+tr(+c),g=d*3;e:do if(f!=0)for(t=1,l=f;;){if(nt=l-(l*(1-d*c)-f)/(1-g*c),h=h*nt/l,a=a*nt/l,(t|0)==3)break e;if(c=h*h+a*a,l=+tr(+c),l==0){h=0,a=0;break}else t=t+1|0}else h=0,a=0;while(!1);t=s+16|0,A[o>>3]=h/+A[t>>3]+y,A[r>>3]=a/+A[t>>3]+ +A[R>>3],t=0;break}default:t=-1}return t|0}function r2(s,a,c,o,r,t){s=s|0,a=+a,c=+c,o=o|0,r=r|0,t=t|0;var h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0;switch(t|0){case 4:{d=+A[s+16>>3],f=+A[s+24>>3],_=+A[s+32>>3],g=+A[s+40>>3],R=+A[s+48>>3],y=+A[s+56>>3],l=+A[s+64>>3],a=(a-R)*l/_,l=(c-y)*l/g,h=a*a+l*l,c=+A[s>>3]*h+1+h*(+A[s+8>>3]*h),A[o>>3]=R+_*(f*(a*(a*2)+h)+(d*2*a*l+a*c)),A[r>>3]=y+g*(f*2*a*l+(d*(h+l*(l*2))+l*c)),t=0;break}case 3:{l=+A[s>>3],R=+A[s+16>>3],h=(a-l)*R,t=s+8|0,a=R*(c-+A[t>>3]),h==0&a==0?(A[o>>3]=l,a=+A[t>>3]):(R=h*h+a*a,R=1-R*(+A[s+32>>3]/1e8)-R*(R*(+A[s+40>>3]/1e8/1e5)),A[o>>3]=l+ +A[s+24>>3]*(h*R),a=+A[t>>3]+a*R),A[r>>3]=a,t=0;break}case 2:{l=+A[s>>3],R=+A[s+16>>3],h=(a-l)*R,t=s+8|0,a=R*(c-+A[t>>3]),h==0&a==0?(A[o>>3]=l,a=+A[t>>3]):(R=h*h+a*a,R=1-R*(+A[s+24>>3]/1e8)-R*(R*(+A[s+32>>3]/1e8/1e5)),A[o>>3]=l+h*R,a=+A[t>>3]+a*R),A[r>>3]=a,t=0;break}case 1:{l=+A[s>>3],R=+A[s+16>>3],h=(a-l)*R,t=s+8|0,a=R*(c-+A[t>>3]),h==0&a==0?(A[o>>3]=l,a=+A[t>>3]):(R=1-(h*h+a*a)*(+A[s+24>>3]/1e8),A[o>>3]=l+h*R,a=+A[t>>3]+a*R),A[r>>3]=a,t=0;break}default:t=-1}return t|0}function ca(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0;var r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0;ne=C,C=C+256|0,g=ne+232|0,f=ne+224|0,d=ne+216|0,l=ne+208|0,h=ne+200|0,t=ne+192|0,r=ne+184|0,_=ne+240|0,R=ne;do if((s|0)!=0&(a|0)>0&(c|0)!=0){if(F=k1(s,4854)|0,!F){F=Or()|0,e[r>>2]=e[F>>2],e[r+4>>2]=s,ft(3,4857,r),s=ts(e[F>>2]|0)|0,e[t>>2]=5367,e[t+4>>2]=s,ft(3,5361,t),s=-1;break}N1(F,0,2)|0;e:do if(ks(F)|0)s=Or()|0,e[h>>2]=e[s>>2],ft(3,4926,h),s=ts(e[s>>2]|0)|0,e[l>>2]=5367,e[l+4>>2]=s,ft(3,5361,l),s=-1;else{t=Q1(F)|0,Ku(F),s=0;do{if((s|0)>=4){y=9;break}r=e[2012+(s<<3)+4>>2]|0,s=s+1|0}while((t|0)%(r|0)|0|0);do if((y|0)==9)if((s|0)==4){ft(3,4971,d),s=-1;break e}else{r=e[504]|0,s=0;break}while(!1);if((Ka(R,r,1,F)|0)!=1){s=Or()|0,e[f>>2]=e[s>>2],ft(3,5051,f),s=ts(e[s>>2]|0)|0,e[g>>2]=5367,e[g+4>>2]=s,ft(3,5361,g),s=-1;break}if(d=R+176|0,e[d>>2]=s,lr(R),f=(s|0)==1,g=R+120|0,f?(J=+A[g>>3],l=R+128|0,A[g>>3]=+A[l>>3],A[l>>3]=J):l=R+128|0,un(c|0,R|0,184)|0,e[_>>2]=o,r=c+176|0,(a|0)>1)for(h=1;;){if(o=(e[_>>2]|0)+3&-4,t=e[o>>2]|0,e[_>>2]=o+4,e[t+176>>2]=e[r>>2],(Ka(R,e[2012+((e[r>>2]|0)+-1<<3)+4>>2]|0,1,F)|0)!=1){s=-1;break e}if(e[d>>2]=s,lr(R),f&&(J=+A[g>>3],A[g>>3]=+A[l>>3],A[l>>3]=J),un(t|0,R|0,184)|0,h=h+1|0,(h|0)>=(a|0)){s=0;break}}else s=0}while(!1);eo(F)|0}else s=-1;while(!1);return C=ne,s|0}function lr(s){s=s|0;var a=0,c=0,o=0,r=0,t=0;t=C,C=C+192|0,r=t,q0(s,r),q0(s+4|0,r+4|0),a=0;do ci(s+8+(a<<5)|0,r+8+(a<<5)|0),ci(s+8+(a<<5)+8|0,r+8+(a<<5)+8|0),ci(s+8+(a<<5)+16|0,r+8+(a<<5)+16|0),ci(s+8+(a<<5)+24|0,r+8+(a<<5)+24|0),a=a+1|0;while((a|0)!=3);c=s+176|0,o=0;do ci(s+104+(o<<3)|0,r+104+(o<<3)|0),o=o+1|0,a=e[c>>2]|0;while((o|0)<(e[2012+(a+-1<<3)>>2]|0));e[r+176>>2]=a,un(s|0,r|0,184)|0,C=t}function ci(s,a){s=s|0,a=a|0,M[a>>0]=M[s+7>>0]|0,M[a+1>>0]=M[s+6>>0]|0,M[a+2>>0]=M[s+5>>0]|0,M[a+3>>0]=M[s+4>>0]|0,M[a+4>>0]=M[s+3>>0]|0,M[a+5>>0]=M[s+2>>0]|0,M[a+6>>0]=M[s+1>>0]|0,M[a+7>>0]=M[s>>0]|0}function q0(s,a){s=s|0,a=a|0,M[a>>0]=M[s+3>>0]|0,M[a+1>>0]=M[s+2>>0]|0,M[a+2>>0]=M[s+1>>0]|0,M[a+3>>0]=M[s>>0]|0}function K1(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0;if(ie=C,C=C+64|0,ne=ie+24|0,J=ie+16|0,W=ie+8|0,q=ie,_=Pi(208)|0,_||(ft(3,5472,ie+32|0),yt(1)),un(_|0,s|0,184)|0,F=a<<1,R=(e[s>>2]|0)+F|0,e[_+192>>2]=R,F=(e[s+4>>2]|0)+F|0,e[_+196>>2]=F,e[_+200>>2]=a,e[_+204>>2]=a,c=Oe(R<<3,F)|0,o=Pi(c)|0,e[_+184>>2]=o,o||(ft(3,5472,ie+40|0),yt(1)),c=Pi(c)|0,e[_+188>>2]=c,c||(ft(3,5472,ie+48|0),yt(1)),y=s+104|0,d=e[s+176>>2]|0,f=(R|0)>0?R<<1:0,(F|0)>0)for(g=(R|0)>0,l=0;;){if(r=+(l-a|0),g)for(s=0,t=o,h=c;ae=+(s-a|0),r2(y,ae,r,W,q,d)|0,P[t>>2]=+A[W>>3],P[t+4>>2]=+A[q>>3],Hl(y,ae,r,ne,J,d)|0,P[h>>2]=+A[ne>>3],P[h+4>>2]=+A[J>>3],s=s+1|0,!((s|0)>=(R|0));)t=t+8|0,h=h+8|0;if(c=c+(f<<2)|0,l=l+1|0,(l|0)>=(F|0))break;o=o+(f<<2)|0}return C=ie,_|0}function Bo(s){s=s|0;var a=0;return s|0&&(a=e[s>>2]|0,(a|0)!=0)?(li(e[a+184>>2]|0),li(e[(e[s>>2]|0)+188>>2]|0),li(e[s>>2]|0),e[s>>2]=0,a=0):a=-1,a|0}function _n(s,a,c,o,r){s=s|0,a=+a,c=+c,o=o|0,r=r|0;var t=0,h=0,l=0;return h=(e[s+16>>2]|0)+~~(a+.5)|0,t=(e[s+20>>2]|0)+~~(c+.5)|0,(h|0)>=0&&(l=e[s+8>>2]|0,!((t|0)<0|(h|0)>=(l|0)))&&(t|0)<(e[s+12>>2]|0)?(s=e[s>>2]|0,t=(Oe(l,t)|0)+h<<1,e[o>>2]=e[s+(t<<2)>>2],e[r>>2]=e[s+((t|1)<<2)>>2],t=0):t=-1,t|0}function eh(s,a,c,o,r){s=s|0,a=+a,c=+c,o=o|0,r=r|0;var t=0,h=0,l=0;return h=(e[s+16>>2]|0)+~~(a+.5)|0,t=(e[s+20>>2]|0)+~~(c+.5)|0,(h|0)>=0&&(l=e[s+8>>2]|0,!((t|0)<0|(h|0)>=(l|0)))&&(t|0)<(e[s+12>>2]|0)?(s=e[s+4>>2]|0,t=(Oe(l,t)|0)+h<<1,e[o>>2]=e[s+(t<<2)>>2],e[r>>2]=e[s+((t|1)<<2)>>2],t=0):t=-1,t|0}function zl(s){s=s|0;var a=0,c=0;a=Pi(8)|0;do if(a)if(c=Pi(s<<3)|0,e[a>>2]=c,c){e[a+4>>2]=s;break}else{li(a),a=0;break}else a=0;while(!1);return a|0}function ha(s){return s=s|0,li(e[s>>2]|0),li(s),0}function n2(s){s=s|0;var a=0,c=0,o=0,r=0,t=0;if(a=+tr(+ +Gl(s,s)),a!=0&&(r=e[s>>2]|0,o=+A[r>>3],a=o<0?-a:a,o=o+a,A[r>>3]=o,o=1/+tr(+(o*a)),s=e[s+4>>2]|0,(s|0)>0)){c=0;do t=r+(c<<3)|0,A[t>>3]=o*+A[t>>3],c=c+1|0;while((c|0)<(s|0))}return+-a}function Gl(s,a){s=s|0,a=a|0;var c=0,o=0,r=0;if(r=e[s+4>>2]|0,(r|0)!=(e[a+4>>2]|0)&&yt(0),(r|0)>0){o=e[s>>2]|0,s=e[a>>2]|0,a=0,c=0;do c=c+ +A[o+(a<<3)>>3]*+A[s+(a<<3)>>3],a=a+1|0;while((a|0)<(r|0))}else c=0;return+c}function s2(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0,Ze=0,nt=0;if(nt=C,C=C+16|0,We=nt+8|0,Ze=nt,ie=e[s+8>>2]|0,(ie|0)==(e[s+4>>2]|0)&&(ie|0)==(e[a+4>>2]|0)&&(ie|0)==((e[c+4>>2]|0)+1|0)){if(X=ie+-2|0,U=We+4|0,Ae=Ze+4|0,(ie|0)>2){ne=ie+-1|0,J=0;do if(y=Oe(J,ie)|0,_=e[s>>2]|0,A[(e[a>>2]|0)+(J<<3)>>3]=+A[_+(y+J<<3)>>3],l=ie-J+-1|0,e[U>>2]=l,W=J,J=J+1|0,d=_+(y+J<<3)|0,e[We>>2]=d,F=+n2(We),A[(e[c>>2]|0)+(W<<3)>>3]=F,F!=0){if((J|0)<(ie|0)){f=e[a>>2]|0,g=J;do{if((J|0)<(g|0)){o=e[s>>2]|0,r=J,h=0;do F=+A[o+((Oe(r,ie)|0)+g<<3)>>3],h=h+F*+A[_+(r+y<<3)>>3],r=r+1|0;while((r|0)<(g|0))}else h=0;if(o=Oe(g,ie)|0,(g|0)<(ie|0)){r=e[s>>2]|0,t=g;do h=h+ +A[r+(t+o<<3)>>3]*+A[_+(t+y<<3)>>3],t=t+1|0;while((t|0)<(ie|0))}A[f+(g<<3)>>3]=h,g=g+1|0}while((g|0)<(ie|0))}if(e[Ae>>2]=l,e[U>>2]=l,e[We>>2]=d,e[Ze>>2]=(e[a>>2]|0)+(J<<3),h=+Gl(We,Ze)*.5,(ne|0)>(W|0)){o=e[a>>2]|0,l=ne;do{if(R=+A[_+(l+y<<3)>>3],r=o+(l<<3)|0,F=+A[r>>3]-h*R,A[r>>3]=F,r=Oe(l,ie)|0,(l|0)<(ie|0)){t=e[s>>2]|0,d=l;do g=t+(d+r<<3)|0,A[g>>3]=+A[g>>3]-(R*+A[o+(d<<3)>>3]+F*+A[_+(d+y<<3)>>3]),d=d+1|0;while((d|0)<(ie|0))}l=l+-1|0}while((l|0)>(W|0))}}while((J|0)<(X|0))}if((ie|0)<=1?(ie|0)>0&&(r=0,t=e[s>>2]|0,o=e[a>>2]|0,q=27):(q=Oe(X,ie)|0,t=e[s>>2]|0,o=e[a>>2]|0,A[o+(X<<3)>>3]=+A[t+(q+X<<3)>>3],r=ie+-1|0,A[(e[c>>2]|0)+(X<<3)>>3]=+A[t+(r+q<<3)>>3],q=27),(q|0)==27&&(A[o+(r<<3)>>3]=+A[t+((Oe(r,ie)|0)+r<<3)>>3]),(ie|0)>0){f=(ie|0)>0,_=ie;do{if(c=_,_=_+-1|0,g=Oe(_,ie)|0,y=e[s>>2]|0,(c|0)<=(X|0)&&(ae=ie-_+-1|0,se=y+(g+c<<3)|0,(c|0)<(ie|0))){o=(c|0)<(ie|0),l=c;do{if(e[Ae>>2]=ae,e[U>>2]=ae,e[We>>2]=se,r=Oe(l,ie)|0,e[Ze>>2]=(e[s>>2]|0)+(r+c<<3),h=+Gl(We,Ze),o){t=e[s>>2]|0,d=c;do q=t+(d+r<<3)|0,A[q>>3]=+A[q>>3]-h*+A[y+(d+g<<3)>>3],d=d+1|0;while((d|0)<(ie|0))}l=l+1|0}while((l|0)<(ie|0))}if(f){o=0;do A[y+(o+g<<3)>>3]=0,o=o+1|0;while((o|0)<(ie|0))}A[y+(g+_<<3)>>3]=1}while((c|0)>1);o=0}else o=0}else o=-1;return C=nt,o|0}function ua(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0,l=0;return t=+A[c>>3],h=+A[c+8>>3],r=+A[c+16>>3],o=+A[a+88>>3]+(t*+A[a+64>>3]+h*+A[a+72>>3]+r*+A[a+80>>3]),o==0?c=-1:(l=+A[a+56>>3]+(t*+A[a+32>>3]+h*+A[a+40>>3]+r*+A[a+48>>3]),A[s>>3]=(+A[a+24>>3]+(t*+A[a>>3]+h*+A[a+8>>3]+r*+A[a+16>>3]))/o,A[s+8>>3]=l/o,c=0),c|0}function Vl(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0;var r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0,Ze=0,nt=0,lt=0,Ye=0,Qt=0,Et=0,Ft=0,Ht=0;Ae=C,C=C+1072|0,se=Ae+1056|0,ae=Ae+768|0,ie=Ae+192|0,U=Ae+48|0,X=Ae,Ht=+A[c>>3],lt=+A[o>>3],ne=Ht*lt,Ft=+A[c+8>>3],J=o+8|0,nt=+A[J>>3],q=Ft*nt,h=+A[c+16>>3],Ye=+A[o+16>>3],d=h*Ye,f=+A[c+24>>3],Et=+A[c+32>>3],Qt=+A[c+40>>3],g=nt*Qt,l=+A[c+48>>3],y=Ye*l,_=+A[c+56>>3],Ze=+A[c+64>>3],We=+A[c+72>>3],R=nt*We,r=+A[c+80>>3],F=Ye*r,t=+A[c+88>>3],A[ae>>3]=ne,A[ae+8>>3]=Ht*nt,A[ae+16>>3]=Ht*Ye,A[ae+24>>3]=lt*Ft,A[ae+32>>3]=q,A[ae+40>>3]=Ye*Ft,A[ae+48>>3]=lt*h,A[ae+56>>3]=nt*h,A[ae+64>>3]=d,A[ae+72>>3]=Ht,A[ae+80>>3]=Ft,A[ae+88>>3]=h,h=lt*Et,A[ae+96>>3]=h,A[ae+104>>3]=nt*Et,A[ae+112>>3]=Ye*Et,A[ae+120>>3]=lt*Qt,A[ae+128>>3]=g,A[ae+136>>3]=Ye*Qt,A[ae+144>>3]=lt*l,A[ae+152>>3]=nt*l,A[ae+160>>3]=y,A[ae+168>>3]=Et,A[ae+176>>3]=Qt,A[ae+184>>3]=l,l=Ze*lt,A[ae+192>>3]=l,A[ae+200>>3]=nt*Ze,A[ae+208>>3]=Ye*Ze,A[ae+216>>3]=lt*We,nt=+A[J>>3],A[ae+224>>3]=We*nt,A[ae+232>>3]=Ye*We,A[ae+240>>3]=lt*r,A[ae+248>>3]=nt*r,A[ae+256>>3]=F,A[ae+264>>3]=Ze,A[ae+272>>3]=We,A[ae+280>>3]=r,o=ie+64|0,c=ie,J=c+64|0;do e[c>>2]=0,c=c+4|0;while((c|0)<(J|0));A[o>>3]=-1,o=ie+72|0,e[o>>2]=0,e[o+4>>2]=0,e[o+8>>2]=0,e[o+12>>2]=0,e[o+16>>2]=0,e[o+20>>2]=0,e[o+24>>2]=0,e[o+28>>2]=0,A[ie+104>>3]=1,o=ie+160|0,c=ie+112|0,J=c+48|0;do e[c>>2]=0,c=c+4|0;while((c|0)<(J|0));A[o>>3]=1,o=ie+240|0,c=ie+168|0,J=c+72|0;do e[c>>2]=0,c=c+4|0;while((c|0)<(J|0));A[o>>3]=-1,o=ie+296|0,c=ie+248|0,J=c+48|0;do e[c>>2]=0,c=c+4|0;while((c|0)<(J|0));A[o>>3]=-1,o=ie+304|0,e[o>>2]=0,e[o+4>>2]=0,e[o+8>>2]=0,e[o+12>>2]=0,e[o+16>>2]=0,e[o+20>>2]=0,e[o+24>>2]=0,e[o+28>>2]=0,A[ie+336>>3]=1,o=ie+456|0,c=ie+344|0,J=c+112|0;do e[c>>2]=0,c=c+4|0;while((c|0)<(J|0));A[o>>3]=1,o=ie+512|0,c=ie+464|0,J=c+48|0;do e[c>>2]=0,c=c+4|0;while((c|0)<(J|0));A[o>>3]=1,o=ie+568|0,c=ie+520|0,J=c+48|0;do e[c>>2]=0,c=c+4|0;while((c|0)<(J|0));A[o>>3]=1,W=0;do{J=0;do{c=U+(W*48|0)+(J<<3)|0,A[c>>3]=0,r=0,o=0;do r=r+ +A[ae+(W*96|0)+(o<<3)>>3]*+A[ie+(o*48|0)+(J<<3)>>3],o=o+1|0;while((o|0)!=12);A[c>>3]=r,J=J+1|0}while((J|0)!=6);W=W+1|0}while((W|0)!=3);if(Ft=f+(ne+q+d),Ht=_+(h+g+y),r=t+(l+R+F),t=+A[a>>3],h=+A[a+8>>3],l=+A[a+16>>3],d=+A[a+24>>3]+(Ft*t+Ht*h+r*l),f=+A[a+32>>3],g=+A[a+40>>3],y=+A[a+48>>3],_=+A[a+56>>3]+(Ft*f+Ht*g+r*y),R=+A[a+64>>3],F=+A[a+72>>3],ne=+A[a+80>>3],r=+A[a+88>>3]+(Ft*R+Ht*F+r*ne),r==0)ft(3,5089,se),o=-1;else{Ht=r*r,A[X>>3]=(t*r-d*R)/Ht,A[X+8>>3]=(r*h-d*F)/Ht,A[X+16>>3]=(r*l-d*ne)/Ht,A[X+24>>3]=(r*f-_*R)/Ht,A[X+32>>3]=(r*g-_*F)/Ht,A[X+40>>3]=(r*y-_*ne)/Ht,c=0;do{r=+A[X+(c*24|0)>>3],t=+A[X+(c*24|0)+8>>3],h=+A[X+(c*24|0)+16>>3],o=0;do se=s+(c*48|0)+(o<<3)|0,A[se>>3]=0,Ht=r*+A[U+(o<<3)>>3]+0,A[se>>3]=Ht,Ht=Ht+t*+A[U+48+(o<<3)>>3],A[se>>3]=Ht,A[se>>3]=Ht+h*+A[U+96+(o<<3)>>3],o=o+1|0;while((o|0)!=6);c=c+1|0}while((c|0)!=2);o=0}return C=Ae,o|0}function da(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0;var r=0,t=0,h=0,l=0;l=C,C=C+48|0,h=l+24|0,t=l+12|0,r=l,e[h+4>>2]=6,e[h+8>>2]=1,e[h>>2]=s,e[t+4>>2]=o,e[t+8>>2]=1,e[t>>2]=a,e[r+4>>2]=o,e[r+8>>2]=6,e[r>>2]=c,a=Ql(r)|0;do if(a){if(s=vs(a,r)|0,!s){Fi(a)|0,c=-1;break}if(c=vs(a,t)|0,!c){Fi(a)|0,Fi(s)|0,c=-1;break}if((ns(s)|0)<0){Fi(a)|0,Fi(s)|0,Fi(c)|0,c=-1;break}else{i1(h,s,c)|0,Fi(a)|0,Fi(s)|0,Fi(c)|0,c=0;break}}else c=-1;while(!1);return C=l,c|0}function J1(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0;y=C,C=C+192|0,f=y+96|0,g=y,h=+A[a>>3],d=+A[a+8>>3],o=+A[a+16>>3],c=h*h+d*d+o*o,c==0?(l=0,r=0,o=1,c=0):(c=+tr(+c),l=c,r=o/c,o=h/c,c=d/c),q=+A[a+24>>3],ne=+A[a+32>>3],d=+A[a+40>>3],_=+I0(+l),h=1-_,l=+A0(+l),A[f>>3]=_+o*o*h,W=c*o*h,J=r*l,A[f+8>>3]=W-J,F=o*r*h,R=c*l,A[f+16>>3]=F+R,A[f+24>>3]=q,A[f+32>>3]=W+J,A[f+40>>3]=_+c*c*h,c=c*r*h,l=o*l,A[f+48>>3]=c-l,A[f+56>>3]=ne,A[f+64>>3]=F-R,A[f+72>>3]=c+l,A[f+80>>3]=_+r*r*h,A[f+88>>3]=d,t=0;do{c=+A[s+(t<<5)>>3],o=+A[s+(t<<5)+8>>3],r=+A[s+(t<<5)+16>>3],a=0;do A[g+(t<<5)+(a<<3)>>3]=c*+A[f+(a<<3)>>3]+o*+A[f+32+(a<<3)>>3]+r*+A[f+64+(a<<3)>>3],a=a+1|0;while((a|0)!=4);a=g+(t<<5)+24|0,A[a>>3]=+A[s+(t<<5)+24>>3]+ +A[a>>3],t=t+1|0}while((t|0)!=3);a=0;do A[s+(a<<5)>>3]=+A[g+(a<<5)>>3],A[s+(a<<5)+8>>3]=+A[g+(a<<5)+8>>3],A[s+(a<<5)+16>>3]=+A[g+(a<<5)+16>>3],A[s+(a<<5)+24>>3]=+A[g+(a<<5)+24>>3],a=a+1|0;while((a|0)!=3);return C=y,0}function th(s){s=s|0;var a=0,c=0;if(a=Pi(136)|0,!a)a=0;else{c=0;do A[a+(c<<5)>>3]=+A[s+(c<<5)>>3],A[a+(c<<5)+8>>3]=+A[s+(c<<5)+8>>3],A[a+(c<<5)+16>>3]=+A[s+(c<<5)+16>>3],A[a+(c<<5)+24>>3]=+A[s+(c<<5)+24>>3],c=c+1|0;while((c|0)!=3);e[a+96>>2]=10,A[a+104>>3]=.10000000149011612,A[a+112>>3]=.9900000095367432,A[a+120>>3]=4,A[a+128>>3]=.5}return a|0}function Wl(s){s=s|0;var a=0;return a=e[s>>2]|0,a?(li(a),e[s>>2]=0,a=0):a=-1,a|0}function Es(s,a){return s=s|0,a=+a,s?(A[s+128>>3]=a,s=0):s=-1,s|0}function n1(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0;se=C,C=C+176|0,d=se+168|0,l=se+160|0,W=se+48|0,ie=se+64|0,q=se,ne=a+8|0,t=e[ne>>2]|0;do if((t|0)>=3){if(ae=Pi(t*96|0)|0,!ae){ft(3,5109,l),t=-1;break}if(J=Pi(t<<4)|0,J)t=0;else{ft(3,5109,d),li(ae),t=-1;break}do A[o+(t<<5)>>3]=+A[c+(t<<5)>>3],A[o+(t<<5)+8>>3]=+A[c+(t<<5)+8>>3],A[o+(t<<5)+16>>3]=+A[c+(t<<5)+16>>3],A[o+(t<<5)+24>>3]=+A[c+(t<<5)+24>>3],t=t+1|0;while((t|0)!=3);R=a+4|0,d=W+8|0,c=s+104|0,g=s+120|0,y=s+112|0,_=s+96|0,f=0,F=0;e:for(;;){if(Q0(s,o,ie)|0,t=e[ne>>2]|0,(t|0)>0){h=0,l=0;do{if((ua(W,ie,(e[R>>2]|0)+(l*24|0)|0)|0)<0){l=10;break e}t=e[a>>2]|0,U=+A[t+(l<<4)>>3]-+A[W>>3],X=+A[t+(l<<4)+8>>3]-+A[d>>3],h=h+(U*U+X*X),t=l<<1,A[J+(t<<3)>>3]=U,A[J+((t|1)<<3)>>3]=X,l=l+1|0,t=e[ne>>2]|0}while((l|0)<(t|0))}else h=0;if(h=h/+(t|0),h<+A[c>>3]){l=24;break}if((F|0)>0&&h<+A[g>>3]&&h/f>+A[y>>3]){l=24;break}if((F|0)==(e[_>>2]|0)){l=24;break}if((t|0)>0){l=0;do{if((Vl(ae+(l*12<<3)|0,s,o,(e[R>>2]|0)+(l*24|0)|0)|0)<0){l=20;break e}l=l+1|0,t=e[ne>>2]|0}while((l|0)<(t|0))}if((da(q,J,ae,t<<1)|0)<0){l=22;break}J1(o,q)|0,f=h,F=F+1|0}if((l|0)==10){s1(ae,J),t=-1;break}else if((l|0)==20){s1(ae,J),t=-1;break}else if((l|0)==22){s1(ae,J),t=-1;break}else if((l|0)==24){A[r>>3]=h,li(ae),li(J),t=0;break}}else t=-1;while(!1);return C=se,t|0}function s1(s,a){s=s|0,a=a|0,li(s),li(a)}function Do(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0,Ze=0,nt=0,lt=0,Ye=0;Ye=C,C=C+192|0,g=Ye+184|0,f=Ye+176|0,d=Ye+168|0,t=Ye+160|0,Ae=Ye+48|0,Ze=Ye+64|0,We=Ye,U=a+8|0,l=e[U>>2]|0;do if((l|0)>=4){if(y=~~(+(l|0)*+A[s+128>>3])+-1|0,y=(y|0)<3?3:y,lt=Pi(l*96|0)|0,!lt){ft(3,5109,t),t=-1;break}if(nt=Pi(l<<4)|0,!nt){ft(3,5109,d),li(lt),t=-1;break}if(t=l<<3,X=Pi(t)|0,!X){ft(3,5109,f),li(lt),li(nt),t=-1;break}if(se=Pi(t)|0,se)t=0;else{ft(3,5109,g),li(lt),li(nt),li(X),t=-1;break}do A[o+(t<<5)>>3]=+A[c+(t<<5)>>3],A[o+(t<<5)+8>>3]=+A[c+(t<<5)+8>>3],A[o+(t<<5)+16>>3]=+A[c+(t<<5)+16>>3],A[o+(t<<5)+24>>3]=+A[c+(t<<5)+24>>3],t=t+1|0;while((t|0)!=3);ie=a+4|0,ae=Ae+8|0,g=se+(y<<3)|0,c=s+104|0,y=s+120|0,J=s+112|0,W=s+96|0,F=0,q=0;e:for(;;){if(Q0(s,o,Ze)|0,t=e[U>>2]|0,(t|0)>0){l=0;do{if((ua(Ae,Ze,(e[ie>>2]|0)+(l*24|0)|0)|0)<0){l=14;break e}t=e[a>>2]|0,R=+A[t+(l<<4)>>3]-+A[Ae>>3],ne=+A[t+(l<<4)+8>>3]-+A[ae>>3],t=l<<1,A[nt+(t<<3)>>3]=R,A[nt+((t|1)<<3)>>3]=ne,ne=R*R+ne*ne,A[se+(l<<3)>>3]=ne,A[X+(l<<3)>>3]=ne,l=l+1|0,t=e[U>>2]|0}while((l|0)<(t|0))}if(In(se,t,8,1),ne=+A[g>>3]*4,ne=ne<16?16:ne,l=e[U>>2]|0,R=ne/6,(l|0)>0){h=0,t=0;do _=+A[se+(t<<3)>>3],_>ne?_=R:(_=1-_/ne,_=R*(1-_*(_*_))),h=h+_,t=t+1|0;while((t|0)<(l|0))}else h=0;if(h=h/+(l|0),h<+A[c>>3]){l=36;break}if((q|0)>0&&h<+A[y>>3]&&h/F>+A[J>>3]){l=36;break}if((q|0)==(e[W>>2]|0)){l=36;break}if((l|0)>0){f=0,t=0;do{if(_=+A[X+(f<<3)>>3],_<=ne){if(l=t*6|0,d=lt+(l<<3)|0,(Vl(d,s,o,(e[ie>>2]|0)+(f*24|0)|0)|0)<0){l=28;break e}F=1-_/ne,F=F*F,A[d>>3]=+A[d>>3]*F,d=lt+((l|1)<<3)|0,A[d>>3]=+A[d>>3]*F,d=lt+(l+2<<3)|0,A[d>>3]=F*+A[d>>3],d=lt+(l+3<<3)|0,A[d>>3]=F*+A[d>>3],d=lt+(l+4<<3)|0,A[d>>3]=F*+A[d>>3],d=lt+(l+5<<3)|0,A[d>>3]=F*+A[d>>3],d=lt+(l+6<<3)|0,A[d>>3]=F*+A[d>>3],d=lt+(l+7<<3)|0,A[d>>3]=F*+A[d>>3],d=lt+(l+8<<3)|0,A[d>>3]=F*+A[d>>3],d=lt+(l+9<<3)|0,A[d>>3]=F*+A[d>>3],d=lt+(l+10<<3)|0,A[d>>3]=F*+A[d>>3],l=lt+(l+11<<3)|0,A[l>>3]=F*+A[l>>3],l=f<<1,A[nt+(t<<3)>>3]=F*+A[nt+(l<<3)>>3],A[nt+(t+1<<3)>>3]=F*+A[nt+((l|1)<<3)>>3],l=e[U>>2]|0,t=t+2|0}f=f+1|0}while((f|0)<(l|0))}else t=0;if((t|0)<6){l=32;break}if((da(We,nt,lt,t)|0)<0){l=34;break}J1(o,We)|0,F=h,q=q+1|0}if((l|0)==14){Qs(lt,nt,X,se),t=-1;break}else if((l|0)==28){Qs(lt,nt,X,se),t=-1;break}else if((l|0)==32){Qs(lt,nt,X,se),t=-1;break}else if((l|0)==34){Qs(lt,nt,X,se),t=-1;break}else if((l|0)==36){A[r>>3]=h,li(lt),li(nt),li(X),li(se),t=0;break}}else t=-1;while(!1);return C=Ye,t|0}function Qs(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0,li(s),li(a),li(c),li(o)}function ih(s,a){s=s|0,a=a|0;var c=0;return c=+A[s>>3]-+A[a>>3],(c<0?-1:c>0&1)|0}function ql(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0,Ze=0,nt=0,lt=0,Ye=0,Qt=0,Et=0,Ft=0,Ht=0,St=0,Ge=0,mt=0,qe=0,Ei=0,ri=0,Yi=0,Er=0,ji=0,Rt=0,Gt=0,ii=0,Ti=0,Si=0;ji=C,C=C+64|0,Ze=ji+48|0,X=ji+40|0,se=ji+32|0,ae=ji+24|0,W=ji+16|0,y=ji+8|0,d=ji;e:do if((o|0)>=4){for(t=0;!((t|0)>=(o|0));)if(+A[c+(t*24|0)+16>>3]!=0){t=-1;break e}else t=t+1|0;if(+A[s>>3]!=0&&+A[s+32>>3]==0&&(Ae=s+40|0,+A[Ae>>3]!=0)&&+A[s+64>>3]==0&&+A[s+72>>3]==0&&+A[s+80>>3]==1&&+A[s+24>>3]==0&&+A[s+56>>3]==0&&+A[s+88>>3]==0){if(t=o<<1,We=H0(t,8)|0,!We){ft(3,5124,d),t=-1;break}if(ie=H0(t,1)|0,!ie){Fi(We)|0,ft(3,5150,y),t=-1;break}if(o){t=e[We>>2]|0,d=e[ie>>2]|0,y=0;do Si=c+(y*24|0)|0,Rt=y<<4,A[t+(Rt<<3)>>3]=+A[Si>>3],Ti=c+(y*24|0)+8|0,A[t+((Rt|1)<<3)>>3]=+A[Ti>>3],A[t+((Rt|2)<<3)>>3]=1,A[t+((Rt|3)<<3)>>3]=0,A[t+((Rt|4)<<3)>>3]=0,A[t+((Rt|5)<<3)>>3]=0,ii=a+(y<<4)|0,A[t+((Rt|6)<<3)>>3]=-(+A[Si>>3]*+A[ii>>3]),A[t+((Rt|7)<<3)>>3]=-(+A[Ti>>3]*+A[ii>>3]),A[t+((Rt|8)<<3)>>3]=0,A[t+((Rt|9)<<3)>>3]=0,A[t+((Rt|10)<<3)>>3]=0,A[t+((Rt|11)<<3)>>3]=+A[Si>>3],A[t+((Rt|12)<<3)>>3]=+A[Ti>>3],A[t+((Rt|13)<<3)>>3]=1,Gt=a+(y<<4)+8|0,A[t+((Rt|14)<<3)>>3]=-(+A[Si>>3]*+A[Gt>>3]),A[t+((Rt|15)<<3)>>3]=-(+A[Ti>>3]*+A[Gt>>3]),Rt=y<<1,A[d+(Rt<<3)>>3]=+A[ii>>3],A[d+((Rt|1)<<3)>>3]=+A[Gt>>3],y=y+1|0;while((y|0)!=(o|0))}if(o=Ql(We)|0,!o){Fi(We)|0,Fi(ie)|0,ft(3,5176,W),t=-1;break}if(y=vs(o,We)|0,!y){Fi(We)|0,Fi(ie)|0,Fi(o)|0,ft(3,5202,ae),t=-1;break}if(d=vs(o,ie)|0,!d){Fi(We)|0,Fi(ie)|0,Fi(o)|0,Fi(y)|0,ft(3,5228,se),t=-1;break}if((ns(y)|0)<0){Fi(We)|0,Fi(ie)|0,Fi(o)|0,Fi(y)|0,Fi(d)|0,ft(3,5254,X),t=-1;break}if(t=vs(y,d)|0,!t){Fi(We)|0,Fi(ie)|0,Fi(o)|0,Fi(y)|0,Fi(d)|0,ft(3,5280,Ze),t=-1;break}Si=e[t>>2]|0,_=+A[Si+48>>3],Yi=+A[s+48>>3],J=+A[Ae>>3],h=(+A[Si+24>>3]-_*Yi)/J,ne=+A[s+16>>3],Er=+A[s+8>>3],F=+A[s>>3],R=(+A[Si>>3]-_*ne-h*Er)/F,l=+A[Si+56>>3],f=(+A[Si+32>>3]-Yi*l)/J,g=(+A[Si+8>>3]-ne*l-Er*f)/F,J=(+A[Si+40>>3]-Yi)/J,F=(+A[Si+16>>3]-ne-Er*J)/F,Fi(We)|0,Fi(ie)|0,Fi(o)|0,Fi(y)|0,Fi(d)|0,Fi(t)|0,Er=+tr(+(_*_+(h*h+R*R))),ne=+tr(+(l*l+(f*f+g*g))),R=R/Er,h=h/Er,_=_/Er,g=g/ne,f=f/ne,l=l/ne,ne=(Er+ne)*.5,F=F/ne,Er=1/ne,Er<0?(qe=-h,l=-l,f=-f,_=-_,g=-g,Ei=-R,Yi=-F,ri=-Er):(qe=h,Ei=R,Yi=F,ri=J/ne),h=l*qe-f*_,R=g*_-l*Ei,F=f*Ei-g*qe,ne=+tr(+(F*F+(h*h+R*R)));do if(ne!=0){if(J=h/ne,R=R/ne,h=F/ne,mt=l*_+(f*qe+g*Ei),mt=mt<0?-mt:mt,mt=(+tr(+(mt+1))+ +tr(+(1-mt)))*.5,Ei*R-qe*J!=0?(t=0,nt=Ei,q=qe,lt=_,Et=J,Qt=R):(Si=Ei*h-_*J!=0,t=Si?1:2,nt=Si?Ei:_,q=Si?_:qe,lt=Si?qe:Ei,Et=Si?J:h,Qt=Si?h:R,h=Si?R:J),F=nt*Qt,ne=q*Et,R=F-ne,R==0){R=qe,h=Ei;break}if(Ye=(q*h-lt*Qt)/R,U=mt*Qt/R,F=ne-F,R=(nt*h-lt*Et)/F,F=mt*Et/F,ne=Ye*Ye+R*R+1,J=Ye*U+R*F,q=J*J-ne*(U*U+F*F+-1),q<0){R=qe,h=Ei;break}if(Ge=+tr(+q),St=(Ge-J)/ne,lt=U+Ye*St,Ht=F+R*St,Ge=(-J-Ge)/ne,Ye=U+Ye*Ge,F=F+R*Ge,Si=(t|0)==1,R=Si?Qt:h,ne=Si?h:Qt,Ft=Si?St:Ht,St=Si?Ht:St,Ht=Si?Ge:F,Qt=Si?F:Ge,Si=(t|0)==2&(Si^1),F=Si?Et:R,R=Si?R:Et,Ge=Si?St:lt,St=Si?lt:St,h=Si?Qt:Ye,Et=Si?Ye:Qt,g*ne-f*R!=0?(t=0,nt=g,q=f,lt=l,Qt=R,U=ne):(Si=g*F-l*R!=0,t=Si?1:2,nt=Si?g:l,q=Si?l:f,lt=Si?f:g,Qt=Si?R:F,U=Si?F:ne,F=Si?ne:R),ne=nt*U,J=q*Qt,R=ne-J,R==0){R=qe,h=Ei;break}if(Ye=(q*F-lt*U)/R,U=mt*U/R,R=J-ne,q=(nt*F-lt*Qt)/R,R=mt*Qt/R,F=Ye*Ye+q*q+1,ne=Ye*U+q*R,J=ne*ne-F*(U*U+R*R+-1),J<0){R=qe,h=Ei;break}if(J=+tr(+J),l=(J-ne)/F,Ei=U+Ye*l,qe=R+q*l,J=(-ne-J)/F,_=U+Ye*J,g=R+q*J,Si=(t|0)==1,f=Si?l:qe,l=Si?qe:l,q=Si?J:g,J=Si?g:J,Si=(t|0)==2&(Si^1),g=Si?l:Ei,l=Si?Ei:l,U=Si?J:_,J=Si?_:J,_=St*l+(Ft*f+Ge*g),_=_<0?-_:_,R=St*J+(Ft*q+Ge*U),R=R<0?-R:R,F=Et*l+(Ht*f+h*g),F=F<0?-F:F,ne=Et*J+(Ht*q+h*U),ne=ne<0?-ne:ne,_<R)if(_<F){if(_<ne){R=Ft,_=St,h=Ge;break}R=Ht,l=J,f=q,_=Et,g=U;break}else{if(F<ne){R=Ht,_=Et;break}R=Ht,l=J,f=q,_=Et,g=U;break}else if(R<F){if(R<ne){R=Ft,l=J,f=q,_=St,g=U,h=Ge;break}R=Ht,l=J,f=q,_=Et,g=U;break}else{if(F<ne){R=Ht,_=Et;break}R=Ht,l=J,f=q,_=Et,g=U;break}}else R=qe,h=Ei;while(!1);Ge=l*R-f*_,mt=g*_-l*h,qe=f*h-g*R,Ei=+tr(+(qe*qe+(Ge*Ge+mt*mt))),A[r>>3]=h,A[r+32>>3]=R,A[r+64>>3]=_,A[r+8>>3]=g,A[r+40>>3]=f,A[r+72>>3]=l,A[r+16>>3]=Ge/Ei,A[r+48>>3]=mt/Ei,A[r+80>>3]=qe/Ei,A[r+24>>3]=Yi,A[r+56>>3]=ri,A[r+88>>3]=Er,t=0}else t=-1}else t=-1;while(!1);return C=ji,t|0}function rh(s){return s=s|0,li(e[s>>2]|0),li(s),0}function Z1(s,a,c,o){return s=s|0,a=a|0,c=c|0,o=o|0,+ +Xl(s,a,c,o,0)}function nh(s,a,c,o){return s=s|0,a=a|0,c=c|0,o=o|0,+ +Xl(s,a,c,o,1)}function Xl(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0,Ze=0,nt=0,lt=0;if(lt=C,C=C+208|0,X=lt+200|0,se=lt+192|0,U=lt+96|0,Ae=lt,We=o+4|0,_=e[We>>2]|0,R=o+112|0,F=o+120|0,(_|0)>0){W=e[o>>2]|0,q=(c|0)>0,ie=(c|0)>0,ae=0;do{if(e[W+(ae*320|0)+4>>2]|0){if(d=W+(ae*320|0)+312|0,f=W+(ae*320|0)|0,ie){y=0,h=-1;do l=e[a+(y<<8)+12>>2]|0,!(l|0)&&(J=a+(y<<8)+248|0,ne=e[J>>2]|0,J=e[J+4>>2]|0,!((ne|0)==0&(J|0)==0))?(l=d,(ne|0)==(e[l>>2]|0)&&(J|0)==(e[l+4>>2]|0)&&(nt=20)):(l|0)==(e[f>>2]|0)&&(nt=20),(nt|0)==20&&(nt=0,t=+A[a+(y<<8)+48>>3],t<+A[F>>3]||(h|0)!=-1&&!(+A[a+(h<<8)+48>>3]<t)||(h=y)),y=y+1|0;while((y|0)<(c|0))}else h=-1;e[W+(ae*320|0)+304>>2]=h,(h|0)>-1&&(e[a+(h<<8)+16>>2]=e[a+(h<<8)+24>>2])}else{if(q){l=e[W+(ae*320|0)>>2]|0,d=0,h=-1;do(e[a+(d<<8)+8>>2]|0)==(l|0)&&(g=+A[a+(d<<8)+40>>3],!(g<+A[R>>3]))&&((h|0)!=-1&&!(+A[a+(h<<8)+40>>3]<g)||(h=d)),d=d+1|0;while((d|0)<(c|0))}else h=-1;e[W+(ae*320|0)+304>>2]=h,(h|0)>-1&&(e[a+(h<<8)+16>>2]=e[a+(h<<8)+20>>2])}ae=ae+1|0}while((ae|0)<(_|0))}if((_|0)>0)for(R=0,h=0,_=0,l=0;;){d=e[o>>2]|0,f=e[d+(R*320|0)+304>>2]|0;do if((f|0)<0)d=_;else{if(y=a+(f<<8)|0,+ma(s,y,+A[d+(R*320|0)+8>>3],Ae)>4){if(e[(e[o>>2]|0)+(R*320|0)+304>>2]=-1,d=a+(f<<8)+236|0,e[d>>2]|0){d=_;break}e[d>>2]=7,d=_;break}if(d=e[y>>2]|0,(l|0)==0|(_|0)<(d|0)){h=0;do A[U+(h<<5)>>3]=+A[Ae+(h<<5)>>3],A[U+(h<<5)+8>>3]=+A[Ae+(h<<5)+8>>3],A[U+(h<<5)+16>>3]=+A[Ae+(h<<5)+16>>3],A[U+(h<<5)+24>>3]=+A[Ae+(h<<5)+24>>3],h=h+1|0;while((h|0)!=3);h=R}else d=_;l=l+1|0}while(!1);if(R=R+1|0,(R|0)>=(e[We>>2]|0))break;_=d}else h=0,l=0;do if(l|0&&(l|0)>=(e[o+128>>2]|0)){if(Q0(U,(e[o>>2]|0)+(h*320|0)+112|0,Ae)|0,_=l<<2,F=Pi(l<<6)|0,F||(ft(3,5472,se),yt(1)),R=Pi(l*96|0)|0,R||(ft(3,5472,X),yt(1)),d=e[We>>2]|0,(d|0)>0){f=e[o>>2]|0,y=0,h=0;do l=e[f+(y*320|0)+304>>2]|0,(l|0)>=0&&(se=e[a+(l<<8)+16>>2]|0,c=(4-se|0)%4|0,X=h<<3,A[F+(X<<3)>>3]=+A[a+(l<<8)+168+(c<<4)>>3],A[F+((X|1)<<3)>>3]=+A[a+(l<<8)+168+(c<<4)+8>>3],c=(5-se|0)%4|0,A[F+((X|2)<<3)>>3]=+A[a+(l<<8)+168+(c<<4)>>3],A[F+((X|3)<<3)>>3]=+A[a+(l<<8)+168+(c<<4)+8>>3],c=(6-se|0)%4|0,A[F+((X|4)<<3)>>3]=+A[a+(l<<8)+168+(c<<4)>>3],A[F+((X|5)<<3)>>3]=+A[a+(l<<8)+168+(c<<4)+8>>3],se=(7-se|0)%4|0,A[F+((X|6)<<3)>>3]=+A[a+(l<<8)+168+(se<<4)>>3],A[F+((X|7)<<3)>>3]=+A[a+(l<<8)+168+(se<<4)+8>>3],X=h*12|0,A[R+(X<<3)>>3]=+A[f+(y*320|0)+208>>3],A[R+((X|1)<<3)>>3]=+A[f+(y*320|0)+216>>3],A[R+((X|2)<<3)>>3]=+A[f+(y*320|0)+224>>3],A[R+((X|3)<<3)>>3]=+A[f+(y*320|0)+232>>3],A[R+(X+4<<3)>>3]=+A[f+(y*320|0)+240>>3],A[R+(X+5<<3)>>3]=+A[f+(y*320|0)+248>>3],A[R+(X+6<<3)>>3]=+A[f+(y*320|0)+256>>3],A[R+(X+7<<3)>>3]=+A[f+(y*320|0)+264>>3],A[R+(X+8<<3)>>3]=+A[f+(y*320|0)+272>>3],A[R+(X+9<<3)>>3]=+A[f+(y*320|0)+280>>3],se=e[o>>2]|0,A[R+(X+10<<3)>>3]=+A[se+(y*320|0)+288>>3],A[R+(X+11<<3)>>3]=+A[se+(y*320|0)+296>>3],h=h+1|0),y=y+1|0;while((y|0)<(d|0))}if(f=o+104|0,l=(r|0)!=0,!(e[f>>2]|0))h=o+8|0,t=+oo(s,Ae,F,R,_,h),l&t>=20&&(Es(e[s>>2]|0,.8)|0,t=+Kn(s,Ae,F,R,_,h),t>=20&&(Es(e[s>>2]|0,.6)|0,t=+Kn(s,Ae,F,R,_,h),t>=20&&(Es(e[s>>2]|0,.4)|0,t=+Kn(s,Ae,F,R,_,h),t>=20&&(Es(e[s>>2]|0,0)|0,t=+Kn(s,Ae,F,R,_,h))))),li(R),li(F);else{t=+oo(s,Ae,F,R,_,U),d=o+8|0,g=+oo(s,d,F,R,_,d),h=t<g;do if(l){if(h){h=0;do A[o+8+(h<<5)>>3]=+A[U+(h<<5)>>3],A[o+8+(h<<5)+8>>3]=+A[U+(h<<5)+8>>3],A[o+8+(h<<5)+16>>3]=+A[U+(h<<5)+16>>3],A[o+8+(h<<5)+24>>3]=+A[U+(h<<5)+24>>3],h=h+1|0;while((h|0)!=3)}else t=g;if(t>=20){if(Es(e[s>>2]|0,.8)|0,t=+Kn(s,Ae,F,R,_,U),g=+Kn(s,d,F,R,_,d),t<g){h=0;do A[o+8+(h<<5)>>3]=+A[U+(h<<5)>>3],A[o+8+(h<<5)+8>>3]=+A[U+(h<<5)+8>>3],A[o+8+(h<<5)+16>>3]=+A[U+(h<<5)+16>>3],A[o+8+(h<<5)+24>>3]=+A[U+(h<<5)+24>>3],h=h+1|0;while((h|0)!=3)}else t=g;if(t>=20){if(Es(e[s>>2]|0,.6)|0,t=+Kn(s,Ae,F,R,_,U),g=+Kn(s,d,F,R,_,d),t<g){h=0;do A[o+8+(h<<5)>>3]=+A[U+(h<<5)>>3],A[o+8+(h<<5)+8>>3]=+A[U+(h<<5)+8>>3],A[o+8+(h<<5)+16>>3]=+A[U+(h<<5)+16>>3],A[o+8+(h<<5)+24>>3]=+A[U+(h<<5)+24>>3],h=h+1|0;while((h|0)!=3)}else t=g;if(t>=20){if(Es(e[s>>2]|0,.4)|0,t=+Kn(s,Ae,F,R,_,U),g=+Kn(s,d,F,R,_,d),t<g){h=0;do A[o+8+(h<<5)>>3]=+A[U+(h<<5)>>3],A[o+8+(h<<5)+8>>3]=+A[U+(h<<5)+8>>3],A[o+8+(h<<5)+16>>3]=+A[U+(h<<5)+16>>3],A[o+8+(h<<5)+24>>3]=+A[U+(h<<5)+24>>3],h=h+1|0;while((h|0)!=3)}else t=g;if(t>=20){if(Es(e[s>>2]|0,0)|0,t=+Kn(s,Ae,F,R,_,U),g=+Kn(s,d,F,R,_,d),t<g)h=0;else{t=g;break}do A[o+8+(h<<5)>>3]=+A[U+(h<<5)>>3],A[o+8+(h<<5)+8>>3]=+A[U+(h<<5)+8>>3],A[o+8+(h<<5)+16>>3]=+A[U+(h<<5)+16>>3],A[o+8+(h<<5)+24>>3]=+A[U+(h<<5)+24>>3],h=h+1|0;while((h|0)!=3)}}}}}else if(h){h=0;do A[o+8+(h<<5)>>3]=+A[U+(h<<5)>>3],A[o+8+(h<<5)+8>>3]=+A[U+(h<<5)+8>>3],A[o+8+(h<<5)+16>>3]=+A[U+(h<<5)+16>>3],A[o+8+(h<<5)+24>>3]=+A[U+(h<<5)+24>>3],h=h+1|0;while((h|0)!=3)}else t=g;while(!1);li(R),li(F)}if(t<20){e[f>>2]=1;break}if(e[f>>2]=0,f=e[We>>2]|0,(f|0)>0){h=e[o>>2]|0,d=0;do l=e[h+(d*320|0)+304>>2]|0,(l|0)>=0&&(Ze=a+(l<<8)+236|0,(e[Ze>>2]|0)==0)&&(e[Ze>>2]=8),d=d+1|0;while((d|0)<(f|0))}}else nt=38;while(!1);return(nt|0)==38&&(e[o+104>>2]=0,t=-1),C=lt,+t}function o2(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0,Ze=0,nt=0,lt=0,Ye=0,Qt=0,Et=0,Ft=0,Ht=0,St=0,Ge=0,mt=0,qe=0,Ei=0,ri=0,Yi=0,Er=0,ji=0,Rt=0,Gt=0,ii=0;Rt=C,C=C+2544|0,Er=Rt+208|0,Yi=Rt+200|0,Ye=Rt+184|0,ri=Rt+176|0,lt=Rt+168|0,nt=Rt+152|0,Ei=Rt+144|0,Ze=Rt+136|0,Ge=Rt+128|0,St=Rt+120|0,Ht=Rt+112|0,We=Rt+104|0,h=Rt+96|0,t=Rt+88|0,r=Rt+80|0,o=Rt+72|0,c=Rt+64|0,Qt=Rt,Et=Rt+2280|0,Ft=Rt+232|0,X=Rt+224|0,qe=Rt+220|0,U=Rt+216|0,Ae=Rt+212|0,ji=k1(s,5306)|0;e:do if(!ji)e[c>>2]=s,ft(3,5308,c),c=ts(e[(Or()|0)>>2]|0)|0,e[o>>2]=5367,e[o+4>>2]=c,ft(3,5361,o),c=0;else{if(o1(Et,ji),e[r>>2]=qe,(en(Et,5368,r)|0)!=1){e[t>>2]=s,ft(3,5371,t),eo(ji)|0,c=0;break}c=e[qe>>2]|0,mt=Pi(c*320|0)|0,mt||(ft(3,5472,h),yt(1)),F=Qt+8|0,ne=Qt+16|0,J=Qt+24|0,W=Qt+32|0,q=Qt+40|0,ie=Qt+48|0,ae=Qt+56|0,se=(a|0)==0;t:do if((c|0)>0){c=0,r=0;i:for(;;){if(o1(Et,ji),o=mt+(c*320|0)|0,t=mt+(c*320|0)+312|0,e[We>>2]=t,e[We+4>>2]=X,(en(Et,5489,We)|0)==1)R=e[t>>2]|0,e[o>>2]=(R&-32768|0)==0&!0?R&32767:0,e[mt+(c*320|0)+4>>2]=1,r=r|2;else{if(se){o=10;break}if(!(jc(Ft,s,2048,1)|0)){o=12;break}if(vi(Ft,Et,2047-(xo(Ft)|0)|0)|0,R=h0(a,Ft)|0,e[o>>2]=R,(R|0)<0){o=14;break}e[mt+(c*320|0)+4>>2]=0,r=r|1}if(o1(Et,ji),o=mt+(c*320|0)+8|0,e[Ze>>2]=o,(en(Et,5785,Ze)|0)!=1){o=18;break}if(o1(Et,ji),y=mt+(c*320|0)+16|0,_=mt+(c*320|0)+24|0,R=mt+(c*320|0)+40|0,e[nt>>2]=y,e[nt+4>>2]=_,e[nt+8>>2]=mt+(c*320|0)+32,e[nt+12>>2]=R,(en(Et,5894,nt)|0)!=4)if(e[lt>>2]=U,e[lt+4>>2]=Ae,(en(Et,5910,lt)|0)==2)t=0;else{o=21;break}else t=1;do{if(o1(Et,ji),e[Ye>>2]=mt+(c*320|0)+16+(t<<5),e[Ye+4>>2]=mt+(c*320|0)+16+(t<<5)+8,e[Ye+8>>2]=mt+(c*320|0)+16+(t<<5)+16,e[Ye+12>>2]=mt+(c*320|0)+16+(t<<5)+24,(en(Et,5894,Ye)|0)!=4){o=23;break i}t=t+1|0}while((t|0)<3);X1(y,mt+(c*320|0)+112|0)|0,ii=+A[o>>3],Gt=ii*-.5,A[Qt>>3]=Gt,ii=ii*.5,A[F>>3]=ii,A[ne>>3]=ii,A[J>>3]=ii,A[W>>3]=ii,A[q>>3]=Gt,A[ie>>3]=Gt,A[ae>>3]=Gt,o=mt+(c*320|0)+48|0,t=mt+(c*320|0)+56|0,h=mt+(c*320|0)+72|0,l=mt+(c*320|0)+80|0,d=mt+(c*320|0)+88|0,f=mt+(c*320|0)+104|0,g=0;do Gt=+A[Qt+(g<<4)>>3],ii=+A[Qt+(g<<4)+8>>3],A[mt+(c*320|0)+208+(g*24|0)>>3]=+A[R>>3]+(+A[y>>3]*Gt+ +A[_>>3]*ii),A[mt+(c*320|0)+208+(g*24|0)+8>>3]=+A[h>>3]+(+A[o>>3]*Gt+ +A[t>>3]*ii),A[mt+(c*320|0)+208+(g*24|0)+16>>3]=+A[f>>3]+(+A[l>>3]*Gt+ +A[d>>3]*ii),g=g+1|0;while((g|0)!=4);if(c=c+1|0,(c|0)>=(e[qe>>2]|0))break t}(o|0)==10?(e[Ht>>2]=s,e[Ht+4>>2]=Et,ft(3,5496,Ht)):(o|0)==12?(e[St>>2]=s,ft(3,5624,St)):(o|0)==14?(e[Ge>>2]=s,e[Ge+4>>2]=Ft,ft(3,5708,Ge)):(o|0)==18?(e[Ei>>2]=s,e[Ei+4>>2]=c+1,ft(3,5789,Ei)):(o|0)==21?(e[ri>>2]=s,e[ri+4>>2]=c+1,ft(3,5916,ri)):(o|0)==23&&(e[Yi>>2]=s,e[Yi+4>>2]=c+1,ft(3,5916,Yi)),eo(ji)|0,li(mt),c=0;break e}else r=0;while(!1);eo(ji)|0,c=Pi(136)|0,c||(ft(3,5472,Er),yt(1)),e[c>>2]=mt,e[c+4>>2]=e[qe>>2],e[c+104>>2]=0;do if((r&3|0)!=3)if(o=c+108|0,r&1){e[o>>2]=0;break}else{e[o>>2]=1;break}else e[c+108>>2]=2;while(!1);A[c+112>>3]=.5,A[c+120>>3]=.5}while(!1);return C=Rt,c|0}function o1(s,a){s=s|0,a=a|0;var c=0,o=0;e:do if(Co(s,256,a)|0)for(;;){c=xo(s)|0;t:do if(c)for(;;){switch(c=c+-1|0,o=s+c|0,M[o>>0]|0){case 13:case 10:break;default:break t}if(M[o>>0]=0,!c)break t}while(!1);switch(M[s>>0]|0){case 0:case 35:break;default:break e}if(!(Co(s,256,a)|0))break e}while(!1)}function a2(s,a,c,o){s=s|0,a=+a,c=+c,o=o|0;var r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0;if(F=C,C=C+400|0,g=F+296|0,R=F+200|0,y=F+128|0,_=F,l=e[s>>2]|0,r=e[s+4>>2]|0,(r1(s+8|0,g,R)|0)<0)ft(3,6025,F+392|0);else{h=+(r+-1|0),r=g+32|0,A[r>>3]=h*+A[g+64>>3]-+A[r>>3],r=g+40|0,A[r>>3]=h*+A[g+72>>3]-+A[r>>3],r=g+48|0,A[r>>3]=h*+A[g+80>>3]-+A[r>>3],r=g+56|0,A[r>>3]=h*+A[g+88>>3]-+A[r>>3],t=+A[g+80>>3],r=0;do A[y+(r*24|0)>>3]=+A[g+(r<<5)>>3]/t,A[y+(r*24|0)+8>>3]=+A[g+(r<<5)+8>>3]/t,A[y+(r*24|0)+16>>3]=+A[g+(r<<5)+16>>3]/t,r=r+1|0;while((r|0)!=3);t=+(l+-1|0),A[_>>3]=+A[y>>3]*2/t,A[_+8>>3]=+A[y+8>>3]*2/t,A[_+16>>3]=+A[y+16>>3]*2/t+-1,l=_+24|0,e[l>>2]=0,e[l+4>>2]=0,e[l+8>>2]=0,e[l+12>>2]=0,A[_+40>>3]=+A[y+32>>3]*2/h,A[_+48>>3]=+A[y+40>>3]*2/h+-1,l=_+56|0,t=c-a,e[l>>2]=0,e[l+4>>2]=0,e[l+8>>2]=0,e[l+12>>2]=0,e[l+16>>2]=0,e[l+20>>2]=0,A[_+80>>3]=(a+c)/t,A[_+88>>3]=c*-2*a/t,l=_+96|0,e[l>>2]=0,e[l+4>>2]=0,e[l+8>>2]=0,e[l+12>>2]=0,A[_+112>>3]=1,A[_+120>>3]=0,t=+A[R+24>>3],h=+A[R+56>>3],c=+A[R+88>>3],l=0;do{a=+A[_+(l<<5)>>3],r=_+(l<<5)+8|0,s=_+(l<<5)+16|0,d=+A[r>>3],f=+A[s>>3],g=0;do A[o+((g<<2)+l<<3)>>3]=a*+A[R+(g<<3)>>3]+d*+A[R+32+(g<<3)>>3]+f*+A[R+64+(g<<3)>>3],g=g+1|0;while((g|0)!=3);A[o+(l+12<<3)>>3]=+A[_+(l<<5)+24>>3]+(a*t+ +A[r>>3]*h+ +A[s>>3]*c),l=l+1|0}while((l|0)!=4)}C=F}function l2(s){s=s|0,e[496]=s}function c2(){return e[496]|0}function sh(s){s=s|0;var a=0,c=0;a=s+212|0,c=e[a>>2]|0,c&&(Nh(c)|0,ic(e[a>>2]|0)|0,e[a>>2]=0),a=s+224|0,e[a>>2]|0&&(ld(a)|0,e[a>>2]=0),a=s+192|0,e[a>>2]|0&&(Bo(a)|0,e[a>>2]=0)}function h2(s){s=s|0;var a=0,c=0,o=0,r=0,t=0;if(t=C,C=C+16|0,c=t,e[c>>2]=s,!(Ar(2044,c)|0))s=-1;else{if(r=mr(2044,c)|0,s=r+196|0,a=e[s>>2]|0,a&&(li(a),e[s>>2]=0,e[r+200>>2]=0),sh(r),ll(e[r+216>>2]|0)|0,F2(2044,c)|0,c=r+248|0,o=r+252|0,s=e[c>>2]|0,(e[o>>2]|0)!=(s|0)){a=0;do rh(e[s+(a<<3)+4>>2]|0)|0,a=a+1|0,s=e[c>>2]|0;while(a>>>0<(e[o>>2]|0)-s>>3>>>0)}j1(c),gn(c),j1(r+248|0),gn(r),s=0}return C=t,s|0}function u2(s){s=s|0;var a=0,c=0,o=0,r=0,t=0;return t=C,C=C+208|0,r=t+192|0,o=t,c=t+196|0,M[s>>0]&1?a=e[s+8>>2]|0:a=s+1|0,(ca(a,1,o,t+184|0)|0)<0?(M[s>>0]&1?a=e[s+8>>2]|0:a=s+1|0,e[r>>2]=a,ft(3,6093,r),a=-1):(a=e[521]|0,e[521]=a+1,e[c>>2]=a,un(mh(2064,c)|0,o|0,184)|0),C=t,a|0}function Yl(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0;g=C,C=C+48|0,f=g+24|0,d=g+16|0,h=g+8|0,r=g,c=g+32|0,o=g+28|0,e[c>>2]=s,e[o>>2]=a;do if(Ar(2044,c)|0&&(l=mr(2044,c)|0,(gh(2064,o)|0)!=0)){if(t=l+8|0,un(t|0,mh(2064,o)|0,184)|0,o=e[t>>2]|0,c=l+204|0,a=e[l+12>>2]|0,s=l+208|0,(o|0)==(e[c>>2]|0)&&(a|0)==(e[s>>2]|0)||(e[r>>2]=o,e[r+4>>2]=a,ft(2,6152,r),Y1(t,e[c>>2]|0,e[s>>2]|0,t)|0),sh(l),c=K1(t,15)|0,s=l+192|0,e[s>>2]=c,!c){ft(3,6199,h),c=-1;break}if(c=cd(c)|0,a=l+212|0,e[a>>2]=c,!c){ft(3,6237,d),c=-1;break}if(Rh(c,2)|0,d=jl(t)|0,e[l+224>>2]=d,d){al(e[a>>2]|0,e[l+216>>2]|0)|0,a2(e[s>>2]|0,+A[l+232>>3],+A[l+240>>3],l+264|0),c=0;break}else{ft(3,6274,f),c=-1;break}}else c=-1;while(!1);return C=g,c|0}function oh(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0;return h=C,C=C+16|0,t=h+8|0,r=h,c=h+12|0,e[c>>2]=s,Ar(2044,c)|0?(o=mr(2044,c)|0,M[a>>0]&1?a=e[a+8>>2]|0:a=a+1|0,s=o+216|0,c=h0(e[s>>2]|0,a)|0,e[o+260>>2]=c,(c|0)<0&&(e[r>>2]=a,ft(3,6312,r),ll(e[s>>2]|0)|0,ft(3,6358,t),c=-1)):c=-1,C=h,c|0}function ah(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0,l=0,d=0;d=C,C=C+32|0,r=d+16|0,o=d+8|0,c=d+20|0,l=d,e[c>>2]=s;do if(Ar(2044,c)|0){if(h=mr(2044,c)|0,M[a>>0]&1?c=e[a+8>>2]|0:c=a+1|0,s=e[h+212>>2]|0,a=h+216|0,t=h+220|0,c=o2(c,e[a>>2]|0)|0,e[t>>2]=c,!c){ft(3,6402,o),ll(e[a>>2]|0)|0,ft(3,6429,r),c=-1;break}switch(e[c+108>>2]|0){case 0:{ys(s,0)|0;break}case 1:{ys(s,2)|0;break}default:ys(s,3)|0}if(s=h+248|0,a=h+252|0,o=e[a>>2]|0,c=o-(e[s>>2]|0)>>3,r=l,e[r>>2]=0,e[r+4>>2]=0,e[l>>2]=c,e[l+4>>2]=e[t>>2],(o|0)==(e[h+256>>2]|0)){O2(s,l);break}else{h=l,c=e[h>>2]|0,h=e[h+4>>2]|0,l=o,e[l>>2]=c,e[l+4>>2]=h,e[a>>2]=(e[a>>2]|0)+8;break}}else c=-1;while(!1);return C=d,c|0}function lh(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0;return t=C,C=C+16|0,c=t,e[c>>2]=s,Ar(2044,c)|0&&(o=mr(2044,c)|0,(a|0)>=0)&&(r=e[o+248>>2]|0,(e[o+252>>2]|0)-r>>3>>>0>a>>>0)?c=e[(e[r+(a<<3)+4>>2]|0)+4>>2]|0:c=-1,C=t,c|0}function ch(s){s=s|0;var a=0,c=0;return c=C,C=C+16|0,a=c,e[a>>2]=s,Ar(2044,a)|0?(a=mr(2044,a)|0,a=(e[a+252>>2]|0)-(e[a+248>>2]|0)>>3):a=-1,C=c,a|0}function hh(s,a){s=s|0,a=+a;var c=0,o=0;o=C,C=C+16|0,c=o,e[c>>2]=s,Ar(2044,c)|0&&(A[(mr(2044,c)|0)+232>>3]=a),C=o}function uh(s){s=s|0;var a=0,c=0,o=0;return o=C,C=C+16|0,c=o,e[c>>2]=s,Ar(2044,c)|0?a=+A[(mr(2044,c)|0)+232>>3]:a=-1,C=o,+a}function dh(s,a){s=s|0,a=+a;var c=0,o=0;o=C,C=C+16|0,c=o,e[c>>2]=s,Ar(2044,c)|0&&(A[(mr(2044,c)|0)+240>>3]=a),C=o}function fh(s){s=s|0;var a=0,c=0,o=0;return o=C,C=C+16|0,c=o,e[c>>2]=s,Ar(2044,c)|0?a=+A[(mr(2044,c)|0)+240>>3]:a=-1,C=o,+a}function ph(s,a){s=s|0,a=a|0;var c=0,o=0,r=0;r=C,C=C+16|0,o=r,c=r+4|0,e[c>>2]=s,Ar(2044,c)|0&&!(ys(e[(mr(2044,c)|0)+212>>2]|0,a)|0)&&(e[o>>2]=a,ft(1,6478,o)),C=r}function Ah(s){s=s|0;var a=0,c=0,o=0;return o=C,C=C+16|0,a=o+4|0,c=o,e[a>>2]=s,Ar(2044,a)|0?(s=(Ad(e[(mr(2044,a)|0)+212>>2]|0,c)|0)==0,C=o,(s?e[c>>2]|0:-1)|0):(C=o,-1)}function fa(s,a){s=s|0,a=+a;var c=0,o=0,r=0,t=0,h=0,l=0;l=C,C=C+16|0,h=l,c=l+8|0,e[c>>2]=s,Ar(2044,c)|0&&(o=mr(2044,c)|0,!(a<=0|a>=1))&&(r=a,t=e[o+212>>2]|0,(t|0)!=0)&&!(md(t,r)|0)&&(A[h>>3]=r,ft(1,6513,h)),C=l}function kn(s){s=s|0;var a=0,c=0,o=0,r=0;return r=C,C=C+16|0,a=r+8|0,o=r,e[a>>2]=s,Ar(2044,a)|0&&(c=e[(mr(2044,a)|0)+212>>2]|0,(c|0)!=0)?(s=(il(c,o)|0)==0,C=r,+(s?+A[o>>3]:-1)):(C=r,-1)}function Nn(s,a){s=s|0,a=a|0;var c=0,o=0;o=C,C=C+16|0,c=o,e[c>>2]=s,Ar(2044,c)|0&&fd(e[(mr(2044,c)|0)+212>>2]|0,a)|0,C=o}function $1(s){s=s|0;var a=0,c=0,o=0;return o=C,C=C+16|0,a=o+4|0,c=o,e[a>>2]=s,Ar(2044,a)|0?(pd(e[(mr(2044,a)|0)+212>>2]|0,c)|0,a=e[c>>2]|0):a=-1,C=o,a|0}function d2(s,a){s=s|0,a=a|0;var c=0,o=0,r=0;r=C,C=C+16|0,o=r,c=r+4|0,e[c>>2]=s,Ar(2044,c)|0&&!(Dh(e[(mr(2044,c)|0)+212>>2]|0,a)|0)&&(e[o>>2]=a,ft(1,6544,o)),C=r}function f2(s){s=s|0;var a=0,c=0,o=0;return o=C,C=C+16|0,a=o+4|0,c=o,e[a>>2]=s,Ar(2044,a)|0?(s=(Lh(e[(mr(2044,a)|0)+212>>2]|0,c)|0)==0,C=o,(s?e[c>>2]|0:-1)|0):(C=o,-1)}function p2(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0;t=C,C=C+16|0,r=t,c=t+4|0,e[c>>2]=s,Ar(2044,c)|0&&(o=mr(2044,c)|0,a>>>0<=255)&&!(Ph(e[o+212>>2]|0,a)|0)&&(e[r>>2]=a,ft(1,6569,r)),C=t}function A2(s){s=s|0;var a=0,c=0,o=0;return o=C,C=C+16|0,a=o+4|0,c=o,e[a>>2]=s,Ar(2044,a)|0?(s=(hd(e[(mr(2044,a)|0)+212>>2]|0,c)|0)==0,C=o,(s?e[c>>2]|0:-1)|0):(C=o,-1)}function m2(s,a){s=s|0,a=a|0;var c=0,o=0,r=0;r=C,C=C+16|0,o=r,c=r+4|0,e[c>>2]=s,Ar(2044,c)|0&&!(Y0(e[(mr(2044,c)|0)+212>>2]|0,a)|0)&&(e[o>>2]=a,ft(1,6590,o)),C=r}function g2(s){s=s|0;var a=0,c=0,o=0;return o=C,C=C+16|0,a=o+4|0,c=o,e[a>>2]=s,Ar(2044,a)|0?(s=(rc(e[(mr(2044,a)|0)+212>>2]|0,c)|0)==0,C=o,(s?e[c>>2]|0:-1)|0):(C=o,-1)}function v2(s,a){s=s|0,a=a|0;var c=0,o=0,r=0;return r=C,C=C+16|0,o=r,c=r+4|0,e[c>>2]=s,Ar(2044,c)|0?(s=(a|0)!=0,tc(e[(mr(2044,c)|0)+212>>2]|0,s&1)|0,e[o>>2]=s?6616:6620,ft(1,6625,o)):a=0,C=r,a|0}function E2(s){s=s|0;var a=0,c=0;return c=C,C=C+16|0,a=c,e[a>>2]=s,Ar(2044,a)|0?a=e[(e[(mr(2044,a)|0)+212>>2]|0)+4834148>>2]|0:a=0,C=c,a|0}function y2(s){s=s|0;var a=0,c=0,o=0;return o=C,C=C+16|0,a=o+4|0,c=o,e[a>>2]=s,Ar(2044,a)|0?(Bh(e[(mr(2044,a)|0)+212>>2]|0,c)|0,a=e[c>>2]|0):a=0,C=o,a|0}function w2(s,a){s=s|0,a=a|0;var c=0,o=0,r=0;r=C,C=C+16|0,o=r,c=r+4|0,e[c>>2]=s,Ar(2044,c)|0&&!(ud(e[(mr(2044,c)|0)+212>>2]|0,a)|0)&&(e[o>>2]=a,ft(1,6647,o)),C=r}function b2(s){s=s|0;var a=0,c=0,o=0;return o=C,C=C+16|0,a=o+4|0,c=o,e[a>>2]=s,Ar(2044,a)|0?(s=(dd(e[(mr(2044,a)|0)+212>>2]|0,c)|0)==0,C=o,(s?e[c>>2]|0:-1)|0):(C=o,-1)}function Kl(s,a){s=s|0,a=a|0;var c=0;c=0;do A[a+(c<<5)>>3]=+A[s+(c<<5)>>3],A[a+(c<<5)+8>>3]=+A[s+(c<<5)+8>>3],A[a+(c<<5)+16>>3]=+A[s+(c<<5)+16>>3],A[a+(c<<5)+24>>3]=+A[s+(c<<5)+24>>3],c=c+1|0;while((c|0)!=3)}function C2(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0;r=C,C=C+16|0,o=r,e[o>>2]=s;do if(Ar(2044,o)|0)if(o=mr(2044,o)|0,s=e[o+212>>2]|0,(e[s+44>>2]|0)>(a|0)){+ma(e[o+224>>2]|0,(a|0)<0?8:s+48+(a<<8)|0,+(c|0),264),o=0;break}else{o=e[523]|0;break}else o=e[522]|0;while(!1);return C=r,o|0}function x2(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0;r=C,C=C+16|0,o=r,e[o>>2]=s;do if(Ar(2044,o)|0)if(o=mr(2044,o)|0,s=e[o+212>>2]|0,(e[s+44>>2]|0)>(a|0)){+ga(e[o+224>>2]|0,(a|0)<0?8:s+48+(a<<8)|0,264,+(c|0),264),o=0;break}else{o=e[523]|0;break}else o=e[522]|0;while(!1);return C=r,o|0}function _2(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0;r=C,C=C+16|0,o=r,e[o>>2]=s;do if(Ar(2044,o)|0)if(o=e[(mr(2044,o)|0)+212>>2]|0,(e[o+44>>2]|0)>(a|0)){e[((a|0)<0?8:o+48+(a<<8)|0)+16>>2]=c,o=0;break}else{o=e[523]|0;break}else o=e[522]|0;while(!1);return C=r,o|0}function M2(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0;o=C,C=C+16|0,c=o,e[c>>2]=s;do if(Ar(2044,c)|0)if(c=e[(mr(2044,c)|0)+212>>2]|0,(e[c+44>>2]|0)>(a|0)){c=(a|0)<0?8:c+48+(a<<8)|0,y=+A[33],A[c+168>>3]=y,l=+A[34],A[c+176>>3]=l,g=+A[35],A[c+184>>3]=g,h=+A[36],A[c+192>>3]=h,f=+A[37],A[c+200>>3]=f,t=+A[38],A[c+208>>3]=t,d=+A[39],A[c+216>>3]=d,r=+A[40],A[c+224>>3]=r,A[c+56>>3]=(y+g+f+d)*.25,A[c+64>>3]=(l+h+t+r)*.25,c=0;break}else{c=e[523]|0;break}else c=e[522]|0;while(!1);return C=o,c|0}function S2(s,a){s=s|0,a=a|0;var c=0,o=0;o=C,C=C+16|0,c=o,e[c>>2]=s;do if(Ar(2044,c)|0)if(c=mr(2044,c)|0,s=e[c+248>>2]|0,(a|0)<0||(e[c+252>>2]|0)-s>>3>>>0<=a>>>0){c=e[524]|0;break}else{a=e[s+(a<<3)+4>>2]|0,s=e[c+212>>2]|0,+nh(e[c+224>>2]|0,s+48|0,e[s+44>>2]|0,a),Kl(a+8|0,264),c=0;break}else c=e[522]|0;while(!1);return C=o,c|0}function T2(s,a){s=s|0,a=a|0;var c=0,o=0;o=C,C=C+16|0,c=o,e[c>>2]=s;do if(Ar(2044,c)|0)if(c=mr(2044,c)|0,s=e[c+248>>2]|0,(a|0)<0||(e[c+252>>2]|0)-s>>3>>>0<=a>>>0){c=e[524]|0;break}else{a=e[s+(a<<3)+4>>2]|0,s=e[c+212>>2]|0,+Z1(e[c+224>>2]|0,s+48|0,e[s+44>>2]|0,a),Kl(a+8|0,264),c=0;break}else c=e[522]|0;while(!1);return C=o,c|0}function I2(s){s=s|0;var a=0,c=0;return c=C,C=C+16|0,a=c,e[a>>2]=s,Ar(2044,a)|0?(a=mr(2044,a)|0,a=rl(e[a+212>>2]|0,e[a+196>>2]|0)|0):a=e[522]|0,C=c,a|0}function R2(s){s=s|0;var a=0,c=0;return c=C,C=C+16|0,a=c,e[a>>2]=s,Ar(2044,a)|0?a=(e[(mr(2044,a)|0)+212>>2]|0)+44|0:a=2088,C=c,e[a>>2]|0}function B2(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0;r=C,C=C+16|0,o=r,e[o>>2]=s;do if(Ar(2044,o)|0){if(s=mr(2044,o)|0,o=e[s+248>>2]|0,(a|0)<0||(e[s+252>>2]|0)-o>>3>>>0<=a>>>0){o=e[524]|0;break}if(o=e[o+(a<<3)+4>>2]|0,(c|0)<0||(e[o+4>>2]|0)<=(c|0)){o=e[523]|0;break}else{o=e[o>>2]|0,Kl(o+(c*320|0)+16|0,264),a0(0,e[o+(c*320|0)+304>>2]|0,e[o+(c*320|0)>>2]|0,e[o+(c*320|0)+4>>2]|0,+ +A[o+(c*320|0)+8>>3])|0,o=0;break}}else o=e[522]|0;while(!1);return C=r,o|0}function D2(s,a){s=s|0,a=a|0;var c=0,o=0;o=C,C=C+16|0,c=o,e[c>>2]=s;do if(Ar(2044,c)|0)if(c=e[(mr(2044,c)|0)+212>>2]|0,(e[c+44>>2]|0)>(a|0)){c=(a|0)<0?8:c+48+(a<<8)|0,Xr(1,e[c>>2]|0,e[c+4>>2]|0,e[c+8>>2]|0,e[c+12>>2]|0,e[c+16>>2]|0,e[c+20>>2]|0,e[c+24>>2]|0,+ +A[c+32>>3],+ +A[c+40>>3],+ +A[c+48>>3],+ +A[c+56>>3],+ +A[c+64>>3],+ +A[c+72>>3],+ +A[c+80>>3],+ +A[c+88>>3],+ +A[c+96>>3],+ +A[c+104>>3],+ +A[c+112>>3],+ +A[c+120>>3],+ +A[c+128>>3],+ +A[c+136>>3],+ +A[c+144>>3],+ +A[c+152>>3],+ +A[c+160>>3],+ +A[c+168>>3],+ +A[c+176>>3],+ +A[c+184>>3],+ +A[c+192>>3],+ +A[c+200>>3],+ +A[c+208>>3],+ +A[c+216>>3],+ +A[c+224>>3],e[c+240>>2]|0)|0,c=0;break}else{c=e[523]|0;break}else c=e[522]|0;while(!1);return C=o,c|0}function L2(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0,l=0;return h=C,C=C+16|0,t=h+8|0,r=h+12|0,o=e[525]|0,e[525]=o+1,e[r>>2]=o,r=mr(2044,r)|0,e[r>>2]=o,e[r+204>>2]=s,e[r+208>>2]=a,l=Oe(s<<2,a)|0,a=r+200|0,e[a>>2]=l,s=r+196|0,e[s>>2]=Pi(l)|0,l=Uh()|0,e[r+216>>2]=l,l||ft(3,8285,h),Yl(o,c)|0,e[t>>2]=e[a>>2],ft(1,8322,t),sn(2,e[r>>2]|0,e[s>>2]|0,e[a>>2]|0,r+264|0,264)|0,C=h,e[r>>2]|0}function P2(s){s=s|0;var a=0;s=C,C=C+16|0,a=s,a1(8591,7),X0(8597,3),vh(8606,2),vh(8617,3),pa(8633,4),X0(8651,4),k2(8671,5),a1(8683,8),pa(8700,5),a1(8720,9),a1(8738,10),pa(8760,6),pa(8783,7),X0(8812,6),X0(8825,7),a1(8838,11),pa(8857,8),pa(8867,9),X0(8880,8),X0(8893,9),N2(8912,10),U2(8924,1),Eh(8936,1),Jl(8959,1),Eh(8982,2),Jl(9004,2),Aa(9026,1),X0(9043,10),Aa(9060,2),X0(9073,11),Aa(9086,3),X0(9110,12),Zl(9134,3),Jl(9147,3),Aa(9160,4),X0(9178,13),Aa(9196,5),X0(9212,14),Aa(9228,6),X0(9245,15),el(9262,2088),el(9291,2096),el(9319,2092),di(9352,680,0),di(9369,680,1),di(9385,680,0),di(9407,680,0),di(9432,680,1),di(9457,680,1),di(9482,680,100),di(9509,680,0),di(9535,680,1),di(9561,680,0),di(9588,680,0),di(9615,680,1),di(9641,680,2),di(9666,680,3),di(9704,680,4),di(9741,680,0),di(9775,680,0),di(9799,680,1),di(9825,680,2),di(9852,680,2),di(9886,680,5),A[a>>3]=.5,Q2(9904,a),di(9925,680,0),di(9944,680,1),di(9962,680,2),di(9980,680,3),di(9999,680,4),di(10021,680,3),di(10040,680,515),di(10069,680,259),di(10097,680,4),di(10116,680,772),di(10146,680,1028),di(10176,680,0),di(10207,680,1),di(10243,680,2),di(10277,680,3),di(10315,680,0),di(10348,680,1),di(10395,680,2),di(10437,680,3),di(10480,680,4),di(10532,680,5),di(10583,680,6),di(10628,680,7),di(10667,680,8),di(10712,680,9),C=s}function Ar(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0;c=e[a>>2]|0,r=e[s+4>>2]|0;e:do if(r)if(t=r+-1|0,h=(t&r|0)==0,h?o=t&c:o=(c>>>0)%(r>>>0)|0,a=e[(e[s>>2]|0)+(o<<2)>>2]|0,a)do{if(a=e[a>>2]|0,!a){a=0;break e}if(s=e[a+4>>2]|0,h?s=s&t:s=(s>>>0)%(r>>>0)|0,(s|0)!=(o|0)){a=0;break e}}while((e[a+8>>2]|0)!=(c|0));else a=0;else a=0;while(!1);return a|0}function mr(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0;return t=C,C=C+32|0,r=t+8|0,o=t,c=Ar(s,a)|0,c||(B1(r,s,a),Vu(o,s,e[r>>2]|0),c=e[o>>2]|0,e[r>>2]=0),C=t,c+16|0}function F2(s,a){s=s|0,a=a|0;var c=0,o=0,r=0;return r=C,C=C+16|0,c=r+4|0,o=r,a=Ar(s,a)|0,a?(e[o>>2]=a,e[c>>2]=e[o>>2],Oc(s,c)|0,a=1):a=0,C=r,a|0}function j1(s){s=s|0;var a=0,c=0;if(c=e[s>>2]|0,c){if(a=s+4|0,s=e[a>>2]|0,(s|0)!=(c|0)){do s=s+-8|0;while((s|0)!=(c|0));e[a>>2]=s}gn(c)}}function mh(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0;return t=C,C=C+32|0,r=t+8|0,o=t,c=gh(s,a)|0,c||(j2(r,s,a),ed(o,s,e[r>>2]|0),c=e[o>>2]|0,e[r>>2]=0),C=t,c+16|0}function gh(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0;c=e[a>>2]|0,r=e[s+4>>2]|0;e:do if(r)if(t=r+-1|0,h=(t&r|0)==0,h?o=t&c:o=(c>>>0)%(r>>>0)|0,a=e[(e[s>>2]|0)+(o<<2)>>2]|0,a)do{if(a=e[a>>2]|0,!a){a=0;break e}if(s=e[a+4>>2]|0,h?s=s&t:s=(s>>>0)%(r>>>0)|0,(s|0)!=(o|0)){a=0;break e}}while((e[a+8>>2]|0)!=(c|0));else a=0;else a=0;while(!1);return a|0}function O2(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0,l=0;l=C,C=C+32|0,h=l,t=s+4|0,c=e[s>>2]|0,r=((e[t>>2]|0)-c>>3)+1|0,r>>>0>536870911&&Hc(s),o=c,c=(e[s+8>>2]|0)-o|0,c>>3>>>0<268435455?(c=c>>2,c=c>>>0<r>>>0?r:c):c=536870911,J2(h,c,(e[t>>2]|0)-o>>3,s+8|0),t=h+8|0,r=e[t>>2]|0,c=a,o=e[c+4>>2]|0,a=r,e[a>>2]=e[c>>2],e[a+4>>2]=o,e[t>>2]=r+8,Z2(s,h),$2(h),C=l}function a1(s,a){s=s|0,a=a|0,ki(s|0,4,2200,10911,1,a|0)}function X0(s,a){s=s|0,a=a|0,ki(s|0,2,2192,10801,10,a|0)}function vh(s,a){s=s|0,a=a|0,ki(s|0,3,2180,10906,12,a|0)}function pa(s,a){s=s|0,a=a|0,ki(s|0,3,2168,10906,13,a|0)}function k2(s,a){s=s|0,a=a|0,ki(s|0,2,2160,10801,11,a|0)}function N2(s,a){s=s|0,a=a|0,ki(s|0,2,2152,10797,7,a|0)}function U2(s,a){s=s|0,a=a|0,ki(s|0,1,2148,10794,16,a|0)}function Eh(s,a){s=s|0,a=a|0,ki(s|0,3,2136,10789,1,a|0)}function Jl(s,a){s=s|0,a=a|0,ki(s|0,2,2128,10785,1,a|0)}function Aa(s,a){s=s|0,a=a|0,ki(s|0,3,2116,10780,1,a|0)}function Zl(s,a){s=s|0,a=a|0,ki(s|0,3,2104,10775,2,a|0)}function el(s,a){s=s|0,a=a|0,di(s|0,680,e[a>>2]|0)}function Q2(s,a){s=s|0,a=a|0,di(s|0,720,~~+A[a>>3]>>>0|0)}function tl(){e[511]=0,e[512]=0,e[513]=0,e[514]=0,P[515]=1,_t(11,2044,$|0)|0,e[516]=0,e[517]=0,e[518]=0,e[519]=0,P[520]=1,_t(12,2064,$|0)|0,P2(0)}function yh(s){s=s|0,G2(s)}function H2(s){s=s|0,z2(s)}function z2(s){s=s|0;var a=0;wh(s,e[s+8>>2]|0),a=e[s>>2]|0,e[s>>2]=0,a&&gn(a)}function wh(s,a){if(s=s|0,a=a|0,a)do s=a,a=e[a>>2]|0,gn(s);while(a|0)}function G2(s){s=s|0;var a=0;V2(s,e[s+8>>2]|0),a=e[s>>2]|0,e[s>>2]=0,a&&gn(a)}function V2(s,a){if(s=s|0,a=a|0,a)do s=a,a=e[a>>2]|0,j1(s+264|0),gn(s);while(a|0)}function l1(s,a,c){s=s|0,a=a|0,c=+c,Ca[s&3](a,c)}function bh(s,a,c){s=s|0,a=a|0,c=c|0,Jh[s&7](a,c)}function Ch(s,a){return s=s|0,a=a|0,+ +f1[s&3](a)}function W2(s,a,c){s=s|0,a=a|0,c=+c,Ca[s&3](a,c)}function $l(s){return s=s|0,No[s&1]()|0}function q2(s,a){s=s|0,a=a|0,xa[s&15](a)}function X2(s,a){s=s|0,a=a|0;var c=0,o=0;return c=C,C=C+16|0,o=c,xh(o,a),s=El[s&31](o)|0,ul(o),C=c,s|0}function xh(s,a){s=s|0,a=a|0,hl(s,a+4|0,e[a>>2]|0)}function _h(s,a,c){return s=s|0,a=a|0,c=c|0,z0[s&15](a,c)|0}function Y2(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0;return o=C,C=C+16|0,r=o,xh(r,c),s=z0[s&15](a,r)|0,ul(r),C=o,s|0}function Mh(s,a){return s=s|0,a=a|0,El[s&31](a)|0}function K2(s,a,c,o){return s=s|0,a=a|0,c=c|0,o=o|0,Bn[s&15](a,c,o)|0}function J2(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0,e[s+12>>2]=0,e[s+16>>2]=o,a?o=Wn(a<<3)|0:o=0,e[s>>2]=o,c=o+(c<<3)|0,e[s+8>>2]=c,e[s+4>>2]=c,e[s+12>>2]=o+(a<<3)}function Z2(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0;o=e[s>>2]|0,t=s+4|0,c=a+4|0,r=(e[t>>2]|0)-o|0,h=(e[c>>2]|0)+(0-(r>>3)<<3)|0,e[c>>2]=h,un(h|0,o|0,r|0)|0,r=e[s>>2]|0,e[s>>2]=e[c>>2],e[c>>2]=r,r=a+8|0,o=e[t>>2]|0,e[t>>2]=e[r>>2],e[r>>2]=o,r=s+8|0,s=a+12|0,o=e[r>>2]|0,e[r>>2]=e[s>>2],e[s>>2]=o,e[a>>2]=e[c>>2]}function $2(s){s=s|0;var a=0,c=0,o=0;if(c=e[s+4>>2]|0,o=s+8|0,a=e[o>>2]|0,(a|0)!=(c|0)){do a=a+-8|0;while((a|0)!=(c|0));e[o>>2]=a}a=e[s>>2]|0,a&&gn(a)}function j2(s,a,c){s=s|0,a=a|0,c=c|0;var o=0;o=Wn(200)|0,e[o+8>>2]=e[c>>2],gt(o+16|0,0,184)|0,e[s>>2]=o,s=s+4|0,e[s>>2]=a+8,e[s+4>>2]=257}function ed(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0;f=e[c+8>>2]|0,ne=c+4|0,e[ne>>2]=f,F=a+4|0,d=e[F>>2]|0,R=(d|0)==0;e:do if(R)r=0,_=12;else if(g=d+-1|0,y=(g&d|0)==0,y?r=g&f:r=(f>>>0)%(d>>>0)|0,o=e[(e[a>>2]|0)+(r<<2)>>2]|0,!o)_=12;else for(;;){if(t=e[o>>2]|0,!t){_=12;break e}if(o=e[t+4>>2]|0,y?o=o&g:o=(o>>>0)%(d>>>0)|0,(o|0)!=(r|0)){_=12;break e}if((e[t+8>>2]|0)==(f|0)){o=0,c=t;break}else o=t}while(!1);if((_|0)==12){f=a+12|0,h=+(((e[f>>2]|0)+1|0)>>>0),l=+P[a+16>>2];do if(R|h>+(d>>>0)*l)if(d>>>0>2?o=(d+-1&d|0)==0:o=0,t=(o&1|d<<1)^1,o=~~+tn(+(h/l))>>>0,Fc(a,t>>>0<o>>>0?o:t),t=e[F>>2]|0,o=e[ne>>2]|0,r=t+-1|0,r&t){d=t,r=(o>>>0)%(t>>>0)|0;break}else{d=t,r=r&o;break}while(!1);o=e[(e[a>>2]|0)+(r<<2)>>2]|0,o?(e[c>>2]=e[o>>2],e[o>>2]=c):(o=a+8|0,e[c>>2]=e[o>>2],e[o>>2]=c,e[(e[a>>2]|0)+(r<<2)>>2]=o,o=e[c>>2]|0,o&&(o=e[o+4>>2]|0,r=d+-1|0,r&d?o=(o>>>0)%(d>>>0)|0:o=o&r,e[(e[a>>2]|0)+(o<<2)>>2]=c)),e[f>>2]=(e[f>>2]|0)+1,o=1}e[s>>2]=c,M[s+4>>0]=o}function td(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,X=Ae,f=e[r>>2]|0,se=c+-1|0,(a|0)>0)for(t=0,h=f,l=f+((Oe(se,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ae=o*3|0,ie=a+-1|0,(c|0)>0)for(t=0,o=f,h=f+(ie<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(c|0));)o=o+(a<<1)|0,h=h+(a<<1)|0;h=r+1179664|0,t=a+1|0,J=0-a|0,F=1-a|0,ne=~a;e:do if((se|0)>1){W=(ie|0)>1,d=(e[r+4>>2]|0)+t|0,q=1,l=s+(t*3|0)|0,s=f+(t<<1)|0,o=0;t:for(;;){if(W)for(t=d,R=1,_=l,y=o;;){do if(((B[_+1>>0]|0)+(B[_>>0]|0)+(B[_+2>>0]|0)|0)>(ae|0)){if(M[t>>0]=-1,o=E[s+(J<<1)>>1]|0,o<<16>>16>0){E[s>>1]=o,o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(d=E[s+(F<<1)>>1]|0,f=d<<16>>16,o=E[s+(ne<<1)>>1]|0,g=o<<16>>16,l=o<<16>>16>0,d<<16>>16<=0){if(l){E[s>>1]=o,o=g*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+R,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=r+1310736+(o+-3<<2)|0,(e[l>>2]|0)<(R|0)&&(e[l>>2]=R),e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(o=E[s+-2>>1]|0,o<<16>>16>0){if(E[s>>1]=o,o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,o=r+1310736+(o+-3<<2)|0,(e[o>>2]|0)>=(R|0)){o=y;break}e[o>>2]=R,o=y;break}else{if(o=y+1|0,(y|0)>32767)break t;E[s>>1]=o,e[r+1179664+(y<<2)>>2]=o<<16>>16,y=y*7|0,e[r+1310736+(y<<2)>>2]=1,e[r+1310736+(y+1<<2)>>2]=R,e[r+1310736+(y+2<<2)>>2]=q,e[r+1310736+(y+3<<2)>>2]=R,e[r+1310736+(y+4<<2)>>2]=R,e[r+1310736+(y+5<<2)>>2]=q,e[r+1310736+(y+6<<2)>>2]=q;break}}if(l){if(o=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+(g+-1<<2)>>2]|0,(o|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(l=0,d=h;;)if((e[d>>2]|0)==(o|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(y|0)){o=f;break}else d=d+4|0;else o=f;else if(E[s>>1]=o,(o|0)<(f|0)&(y|0)>0)for(l=0,d=h;(e[d>>2]|0)==(f|0)&&(e[d>>2]=o),l=l+1|0,!((l|0)>=(y|0));)d=d+4|0;o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(l=E[s+-2>>1]|0,l<<16>>16<=0){E[s>>1]=d,o=f*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+R,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=r+1310736+(o+-4<<2)|0,(e[l>>2]|0)>(R|0)&&(e[l>>2]=R),e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(o=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(o|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(l=0,d=h;;)if((e[d>>2]|0)==(o|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(y|0)){o=f;break}else d=d+4|0;else o=f;else if(E[s>>1]=o,(o|0)<(f|0)&(y|0)>0)for(l=0,d=h;(e[d>>2]|0)==(f|0)&&(e[d>>2]=o),l=l+1|0,!((l|0)>=(y|0));)d=d+4|0;o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,o=r+1310736+(o+-5<<2)|0,e[o>>2]=(e[o>>2]|0)+q,o=y}else E[s>>1]=0,M[t>>0]=0,o=y;while(!1);if(R=R+1|0,l=_+3|0,s=s+2|0,t=t+1|0,(R|0)>=(ie|0))break;_=l,y=o}else t=d;if(q=q+1|0,(q|0)>=(se|0)){f=o,U=52;break e}else d=t+2|0,l=l+6|0,s=s+4|0}ft(3,3904,X),t=-1}else f=0,U=52;while(!1);if((U|0)==52){if(s=r+12|0,(f|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(f|0);)l=l+1|0,h=h+4|0;if(d=r+8|0,t=o+-1|0,e[d>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do U=t<<2,e[r+131084+(U<<2)>>2]=a,e[r+131084+((U|1)<<2)>>2]=0,e[r+131084+((U|2)<<2)>>2]=c,e[r+131084+((U|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){s=0;do h=(e[r+1179664+(s<<2)>>2]|0)+-1|0,l=s*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),s=s+1|0;while((s|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,U=r+655376+(c<<3)|0,A[U>>3]=+A[U>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function Sh(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,X=Ae,f=e[r>>2]|0,se=c+-1|0,(a|0)>0)for(t=0,h=f,l=f+((Oe(se,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ae=o*3|0,ie=a+-1|0,(c|0)>0)for(t=0,o=f,h=f+(ie<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(c|0));)o=o+(a<<1)|0,h=h+(a<<1)|0;h=r+1179664|0,t=a+1|0,J=0-a|0,F=1-a|0,ne=~a;e:do if((se|0)>1){W=(ie|0)>1,d=(e[r+4>>2]|0)+t|0,q=1,l=s+(t<<1)|0,s=f+(t<<1)|0,o=0;t:for(;;){if(W)for(t=d,R=1,_=l,y=o;;){f=B[_>>0]|0,g=B[_+1>>0]|0;do if(((f&248)+10+(f<<5&224)+(g>>>3&28)+(g<<3&248)|0)>(ae|0)){if(M[t>>0]=-1,o=E[s+(J<<1)>>1]|0,o<<16>>16>0){E[s>>1]=o,o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(d=E[s+(F<<1)>>1]|0,f=d<<16>>16,o=E[s+(ne<<1)>>1]|0,g=o<<16>>16,l=o<<16>>16>0,d<<16>>16<=0){if(l){E[s>>1]=o,o=g*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+R,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=r+1310736+(o+-3<<2)|0,(e[l>>2]|0)<(R|0)&&(e[l>>2]=R),e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(o=E[s+-2>>1]|0,o<<16>>16>0){if(E[s>>1]=o,o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,o=r+1310736+(o+-3<<2)|0,(e[o>>2]|0)>=(R|0)){o=y;break}e[o>>2]=R,o=y;break}else{if(o=y+1|0,(y|0)>32767)break t;E[s>>1]=o,e[r+1179664+(y<<2)>>2]=o<<16>>16,y=y*7|0,e[r+1310736+(y<<2)>>2]=1,e[r+1310736+(y+1<<2)>>2]=R,e[r+1310736+(y+2<<2)>>2]=q,e[r+1310736+(y+3<<2)>>2]=R,e[r+1310736+(y+4<<2)>>2]=R,e[r+1310736+(y+5<<2)>>2]=q,e[r+1310736+(y+6<<2)>>2]=q;break}}if(l){if(o=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+(g+-1<<2)>>2]|0,(o|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(l=0,d=h;;)if((e[d>>2]|0)==(o|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(y|0)){o=f;break}else d=d+4|0;else o=f;else if(E[s>>1]=o,(o|0)<(f|0)&(y|0)>0)for(l=0,d=h;(e[d>>2]|0)==(f|0)&&(e[d>>2]=o),l=l+1|0,!((l|0)>=(y|0));)d=d+4|0;o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(l=E[s+-2>>1]|0,l<<16>>16<=0){E[s>>1]=d,o=f*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+R,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=r+1310736+(o+-4<<2)|0,(e[l>>2]|0)>(R|0)&&(e[l>>2]=R),e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(o=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(o|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(l=0,d=h;;)if((e[d>>2]|0)==(o|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(y|0)){o=f;break}else d=d+4|0;else o=f;else if(E[s>>1]=o,(o|0)<(f|0)&(y|0)>0)for(l=0,d=h;(e[d>>2]|0)==(f|0)&&(e[d>>2]=o),l=l+1|0,!((l|0)>=(y|0));)d=d+4|0;o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,o=r+1310736+(o+-5<<2)|0,e[o>>2]=(e[o>>2]|0)+q,o=y}else E[s>>1]=0,M[t>>0]=0,o=y;while(!1);if(R=R+1|0,l=_+2|0,s=s+2|0,t=t+1|0,(R|0)>=(ie|0))break;_=l,y=o}else t=d;if(q=q+1|0,(q|0)>=(se|0)){f=o,U=52;break e}else d=t+2|0,l=l+4|0,s=s+4|0}ft(3,3904,X),t=-1}else f=0,U=52;while(!1);if((U|0)==52){if(s=r+12|0,(f|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(f|0);)l=l+1|0,h=h+4|0;if(d=r+8|0,t=o+-1|0,e[d>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do U=t<<2,e[r+131084+(U<<2)>>2]=a,e[r+131084+((U|1)<<2)>>2]=0,e[r+131084+((U|2)<<2)>>2]=c,e[r+131084+((U|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){s=0;do h=(e[r+1179664+(s<<2)>>2]|0)+-1|0,l=s*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),s=s+1|0;while((s|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,U=r+655376+(c<<3)|0,A[U>>3]=+A[U>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function Th(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,X=Ae,f=e[r>>2]|0,se=c+-1|0,(a|0)>0)for(t=0,h=f,l=f+((Oe(se,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ae=o*3|0,ie=a+-1|0,(c|0)>0)for(t=0,o=f,h=f+(ie<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(c|0));)o=o+(a<<1)|0,h=h+(a<<1)|0;h=r+1179664|0,t=a+1|0,J=0-a|0,F=1-a|0,ne=~a;e:do if((se|0)>1){W=(ie|0)>1,d=(e[r+4>>2]|0)+t|0,q=1,l=s+(t<<2)|0,s=f+(t<<1)|0,o=0;t:for(;;){if(W)for(t=d,R=1,_=l,y=o;;){do if(((B[_+1>>0]|0)+(B[_>>0]|0)+(B[_+2>>0]|0)|0)>(ae|0)){if(M[t>>0]=-1,o=E[s+(J<<1)>>1]|0,o<<16>>16>0){E[s>>1]=o,o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(d=E[s+(F<<1)>>1]|0,f=d<<16>>16,o=E[s+(ne<<1)>>1]|0,g=o<<16>>16,l=o<<16>>16>0,d<<16>>16<=0){if(l){E[s>>1]=o,o=g*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+R,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=r+1310736+(o+-3<<2)|0,(e[l>>2]|0)<(R|0)&&(e[l>>2]=R),e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(o=E[s+-2>>1]|0,o<<16>>16>0){if(E[s>>1]=o,o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,o=r+1310736+(o+-3<<2)|0,(e[o>>2]|0)>=(R|0)){o=y;break}e[o>>2]=R,o=y;break}else{if(o=y+1|0,(y|0)>32767)break t;E[s>>1]=o,e[r+1179664+(y<<2)>>2]=o<<16>>16,y=y*7|0,e[r+1310736+(y<<2)>>2]=1,e[r+1310736+(y+1<<2)>>2]=R,e[r+1310736+(y+2<<2)>>2]=q,e[r+1310736+(y+3<<2)>>2]=R,e[r+1310736+(y+4<<2)>>2]=R,e[r+1310736+(y+5<<2)>>2]=q,e[r+1310736+(y+6<<2)>>2]=q;break}}if(l){if(o=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+(g+-1<<2)>>2]|0,(o|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(l=0,d=h;;)if((e[d>>2]|0)==(o|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(y|0)){o=f;break}else d=d+4|0;else o=f;else if(E[s>>1]=o,(o|0)<(f|0)&(y|0)>0)for(l=0,d=h;(e[d>>2]|0)==(f|0)&&(e[d>>2]=o),l=l+1|0,!((l|0)>=(y|0));)d=d+4|0;o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(l=E[s+-2>>1]|0,l<<16>>16<=0){E[s>>1]=d,o=f*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+R,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=r+1310736+(o+-4<<2)|0,(e[l>>2]|0)>(R|0)&&(e[l>>2]=R),e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(o=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(o|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(l=0,d=h;;)if((e[d>>2]|0)==(o|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(y|0)){o=f;break}else d=d+4|0;else o=f;else if(E[s>>1]=o,(o|0)<(f|0)&(y|0)>0)for(l=0,d=h;(e[d>>2]|0)==(f|0)&&(e[d>>2]=o),l=l+1|0,!((l|0)>=(y|0));)d=d+4|0;o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,o=r+1310736+(o+-5<<2)|0,e[o>>2]=(e[o>>2]|0)+q,o=y}else E[s>>1]=0,M[t>>0]=0,o=y;while(!1);if(R=R+1|0,l=_+4|0,s=s+2|0,t=t+1|0,(R|0)>=(ie|0))break;_=l,y=o}else t=d;if(q=q+1|0,(q|0)>=(se|0)){f=o,U=52;break e}else d=t+2|0,l=l+8|0,s=s+4|0}ft(3,3904,X),t=-1}else f=0,U=52;while(!1);if((U|0)==52){if(s=r+12|0,(f|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(f|0);)l=l+1|0,h=h+4|0;if(d=r+8|0,t=o+-1|0,e[d>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do U=t<<2,e[r+131084+(U<<2)>>2]=a,e[r+131084+((U|1)<<2)>>2]=0,e[r+131084+((U|2)<<2)>>2]=c,e[r+131084+((U|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){s=0;do h=(e[r+1179664+(s<<2)>>2]|0)+-1|0,l=s*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),s=s+1|0;while((s|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,U=r+655376+(c<<3)|0,A[U>>3]=+A[U>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function id(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,X=Ae,f=e[r>>2]|0,se=c+-1|0,(a|0)>0)for(t=0,h=f,l=f+((Oe(se,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ae=o*3|0,ie=a+-1|0,(c|0)>0)for(t=0,o=f,h=f+(ie<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(c|0));)o=o+(a<<1)|0,h=h+(a<<1)|0;h=r+1179664|0,t=a+1|0,J=0-a|0,F=1-a|0,ne=~a;e:do if((se|0)>1){W=(ie|0)>1,d=(e[r+4>>2]|0)+t|0,q=1,l=s+(t<<1)|0,s=f+(t<<1)|0,o=0;t:for(;;){if(W)for(t=d,R=1,_=l,y=o;;){g=B[_>>0]|0;do if(((g&240)+24+(g<<4&240)+((B[_+1>>0]|0)&240)|0)>(ae|0)){if(M[t>>0]=-1,o=E[s+(J<<1)>>1]|0,o<<16>>16>0){E[s>>1]=o,o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(d=E[s+(F<<1)>>1]|0,f=d<<16>>16,o=E[s+(ne<<1)>>1]|0,g=o<<16>>16,l=o<<16>>16>0,d<<16>>16<=0){if(l){E[s>>1]=o,o=g*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+R,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=r+1310736+(o+-3<<2)|0,(e[l>>2]|0)<(R|0)&&(e[l>>2]=R),e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(o=E[s+-2>>1]|0,o<<16>>16>0){if(E[s>>1]=o,o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,o=r+1310736+(o+-3<<2)|0,(e[o>>2]|0)>=(R|0)){o=y;break}e[o>>2]=R,o=y;break}else{if(o=y+1|0,(y|0)>32767)break t;E[s>>1]=o,e[r+1179664+(y<<2)>>2]=o<<16>>16,y=y*7|0,e[r+1310736+(y<<2)>>2]=1,e[r+1310736+(y+1<<2)>>2]=R,e[r+1310736+(y+2<<2)>>2]=q,e[r+1310736+(y+3<<2)>>2]=R,e[r+1310736+(y+4<<2)>>2]=R,e[r+1310736+(y+5<<2)>>2]=q,e[r+1310736+(y+6<<2)>>2]=q;break}}if(l){if(o=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+(g+-1<<2)>>2]|0,(o|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(l=0,d=h;;)if((e[d>>2]|0)==(o|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(y|0)){o=f;break}else d=d+4|0;else o=f;else if(E[s>>1]=o,(o|0)<(f|0)&(y|0)>0)for(l=0,d=h;(e[d>>2]|0)==(f|0)&&(e[d>>2]=o),l=l+1|0,!((l|0)>=(y|0));)d=d+4|0;o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(l=E[s+-2>>1]|0,l<<16>>16<=0){E[s>>1]=d,o=f*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+R,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=r+1310736+(o+-4<<2)|0,(e[l>>2]|0)>(R|0)&&(e[l>>2]=R),e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(o=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(o|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(l=0,d=h;;)if((e[d>>2]|0)==(o|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(y|0)){o=f;break}else d=d+4|0;else o=f;else if(E[s>>1]=o,(o|0)<(f|0)&(y|0)>0)for(l=0,d=h;(e[d>>2]|0)==(f|0)&&(e[d>>2]=o),l=l+1|0,!((l|0)>=(y|0));)d=d+4|0;o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,o=r+1310736+(o+-5<<2)|0,e[o>>2]=(e[o>>2]|0)+q,o=y}else E[s>>1]=0,M[t>>0]=0,o=y;while(!1);if(R=R+1|0,l=_+2|0,s=s+2|0,t=t+1|0,(R|0)>=(ie|0))break;_=l,y=o}else t=d;if(q=q+1|0,(q|0)>=(se|0)){f=o,U=52;break e}else d=t+2|0,l=l+4|0,s=s+4|0}ft(3,3904,X),t=-1}else f=0,U=52;while(!1);if((U|0)==52){if(s=r+12|0,(f|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(f|0);)l=l+1|0,h=h+4|0;if(d=r+8|0,t=o+-1|0,e[d>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do U=t<<2,e[r+131084+(U<<2)>>2]=a,e[r+131084+((U|1)<<2)>>2]=0,e[r+131084+((U|2)<<2)>>2]=c,e[r+131084+((U|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){s=0;do h=(e[r+1179664+(s<<2)>>2]|0)+-1|0,l=s*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),s=s+1|0;while((s|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,U=r+655376+(c<<3)|0,A[U>>3]=+A[U>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function rd(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,X=Ae,f=e[r>>2]|0,se=c+-1|0,(a|0)>0)for(t=0,h=f,l=f+((Oe(se,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ae=o*3|0,ie=a+-1|0,(c|0)>0)for(t=0,o=f,h=f+(ie<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(c|0));)o=o+(a<<1)|0,h=h+(a<<1)|0;h=r+1179664|0,t=a+1|0,J=0-a|0,F=1-a|0,ne=~a;e:do if((se|0)>1){W=(ie|0)>1,d=(e[r+4>>2]|0)+t|0,q=1,l=s+(t<<1)|0,s=f+(t<<1)|0,o=0;t:for(;;){if(W)for(t=d,R=1,_=l,y=o;;){f=B[_>>0]|0,g=B[_+1>>0]|0;do if(((f&248)+12+(f<<5&224)+(g>>>3&24)+(g<<2&248)|0)>(ae|0)){if(M[t>>0]=-1,o=E[s+(J<<1)>>1]|0,o<<16>>16>0){E[s>>1]=o,o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(d=E[s+(F<<1)>>1]|0,f=d<<16>>16,o=E[s+(ne<<1)>>1]|0,g=o<<16>>16,l=o<<16>>16>0,d<<16>>16<=0){if(l){E[s>>1]=o,o=g*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+R,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=r+1310736+(o+-3<<2)|0,(e[l>>2]|0)<(R|0)&&(e[l>>2]=R),e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(o=E[s+-2>>1]|0,o<<16>>16>0){if(E[s>>1]=o,o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,o=r+1310736+(o+-3<<2)|0,(e[o>>2]|0)>=(R|0)){o=y;break}e[o>>2]=R,o=y;break}else{if(o=y+1|0,(y|0)>32767)break t;E[s>>1]=o,e[r+1179664+(y<<2)>>2]=o<<16>>16,y=y*7|0,e[r+1310736+(y<<2)>>2]=1,e[r+1310736+(y+1<<2)>>2]=R,e[r+1310736+(y+2<<2)>>2]=q,e[r+1310736+(y+3<<2)>>2]=R,e[r+1310736+(y+4<<2)>>2]=R,e[r+1310736+(y+5<<2)>>2]=q,e[r+1310736+(y+6<<2)>>2]=q;break}}if(l){if(o=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+(g+-1<<2)>>2]|0,(o|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(l=0,d=h;;)if((e[d>>2]|0)==(o|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(y|0)){o=f;break}else d=d+4|0;else o=f;else if(E[s>>1]=o,(o|0)<(f|0)&(y|0)>0)for(l=0,d=h;(e[d>>2]|0)==(f|0)&&(e[d>>2]=o),l=l+1|0,!((l|0)>=(y|0));)d=d+4|0;o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(l=E[s+-2>>1]|0,l<<16>>16<=0){E[s>>1]=d,o=f*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+R,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=r+1310736+(o+-4<<2)|0,(e[l>>2]|0)>(R|0)&&(e[l>>2]=R),e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(o=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(o|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(l=0,d=h;;)if((e[d>>2]|0)==(o|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(y|0)){o=f;break}else d=d+4|0;else o=f;else if(E[s>>1]=o,(o|0)<(f|0)&(y|0)>0)for(l=0,d=h;(e[d>>2]|0)==(f|0)&&(e[d>>2]=o),l=l+1|0,!((l|0)>=(y|0));)d=d+4|0;o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,o=r+1310736+(o+-5<<2)|0,e[o>>2]=(e[o>>2]|0)+q,o=y}else E[s>>1]=0,M[t>>0]=0,o=y;while(!1);if(R=R+1|0,l=_+2|0,s=s+2|0,t=t+1|0,(R|0)>=(ie|0))break;_=l,y=o}else t=d;if(q=q+1|0,(q|0)>=(se|0)){f=o,U=52;break e}else d=t+2|0,l=l+4|0,s=s+4|0}ft(3,3904,X),t=-1}else f=0,U=52;while(!1);if((U|0)==52){if(s=r+12|0,(f|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(f|0);)l=l+1|0,h=h+4|0;if(d=r+8|0,t=o+-1|0,e[d>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do U=t<<2,e[r+131084+(U<<2)>>2]=a,e[r+131084+((U|1)<<2)>>2]=0,e[r+131084+((U|2)<<2)>>2]=c,e[r+131084+((U|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){s=0;do h=(e[r+1179664+(s<<2)>>2]|0)+-1|0,l=s*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),s=s+1|0;while((s|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,U=r+655376+(c<<3)|0,A[U>>3]=+A[U>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function nd(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,X=Ae,f=e[r>>2]|0,se=c+-1|0,(a|0)>0)for(t=0,h=f,l=f+((Oe(se,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ae=o*3|0,ie=a+-1|0,(c|0)>0)for(t=0,o=f,h=f+(ie<<1)|0;E[h>>1]=0,E[o>>1]=0,t=t+1|0,!((t|0)>=(c|0));)o=o+(a<<1)|0,h=h+(a<<1)|0;h=r+1179664|0,t=a+1|0,J=0-a|0,F=1-a|0,ne=~a;e:do if((se|0)>1){W=(ie|0)>1,d=(e[r+4>>2]|0)+t|0,q=1,l=s+(t<<2)|0,s=f+(t<<1)|0,o=0;t:for(;;){if(W)for(t=d,R=1,_=l,y=o;;){do if(((B[_+2>>0]|0)+(B[_+1>>0]|0)+(B[_+3>>0]|0)|0)>(ae|0)){if(M[t>>0]=-1,o=E[s+(J<<1)>>1]|0,o<<16>>16>0){E[s>>1]=o,o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(d=E[s+(F<<1)>>1]|0,f=d<<16>>16,o=E[s+(ne<<1)>>1]|0,g=o<<16>>16,l=o<<16>>16>0,d<<16>>16<=0){if(l){E[s>>1]=o,o=g*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+R,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=r+1310736+(o+-3<<2)|0,(e[l>>2]|0)<(R|0)&&(e[l>>2]=R),e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(o=E[s+-2>>1]|0,o<<16>>16>0){if(E[s>>1]=o,o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,o=r+1310736+(o+-3<<2)|0,(e[o>>2]|0)>=(R|0)){o=y;break}e[o>>2]=R,o=y;break}else{if(o=y+1|0,(y|0)>32767)break t;E[s>>1]=o,e[r+1179664+(y<<2)>>2]=o<<16>>16,y=y*7|0,e[r+1310736+(y<<2)>>2]=1,e[r+1310736+(y+1<<2)>>2]=R,e[r+1310736+(y+2<<2)>>2]=q,e[r+1310736+(y+3<<2)>>2]=R,e[r+1310736+(y+4<<2)>>2]=R,e[r+1310736+(y+5<<2)>>2]=q,e[r+1310736+(y+6<<2)>>2]=q;break}}if(l){if(o=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+(g+-1<<2)>>2]|0,(o|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(l=0,d=h;;)if((e[d>>2]|0)==(o|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(y|0)){o=f;break}else d=d+4|0;else o=f;else if(E[s>>1]=o,(o|0)<(f|0)&(y|0)>0)for(l=0,d=h;(e[d>>2]|0)==(f|0)&&(e[d>>2]=o),l=l+1|0,!((l|0)>=(y|0));)d=d+4|0;o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,g=r+1310736+(o+-5<<2)|0,e[g>>2]=(e[g>>2]|0)+q,e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(l=E[s+-2>>1]|0,l<<16>>16<=0){E[s>>1]=d,o=f*7|0,l=r+1310736+(o+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=r+1310736+(o+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+R,l=r+1310736+(o+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=r+1310736+(o+-4<<2)|0,(e[l>>2]|0)>(R|0)&&(e[l>>2]=R),e[r+1310736+(o+-1<<2)>>2]=q,o=y;break}if(o=e[r+1179664+(f+-1<<2)>>2]|0,f=e[r+1179664+((l<<16>>16)+-1<<2)>>2]|0,(o|0)>(f|0))if(E[s>>1]=f,(y|0)>0)for(l=0,d=h;;)if((e[d>>2]|0)==(o|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(y|0)){o=f;break}else d=d+4|0;else o=f;else if(E[s>>1]=o,(o|0)<(f|0)&(y|0)>0)for(l=0,d=h;(e[d>>2]|0)==(f|0)&&(e[d>>2]=o),l=l+1|0,!((l|0)>=(y|0));)d=d+4|0;o=(o<<16>>16)*7|0,g=r+1310736+(o+-7<<2)|0,e[g>>2]=(e[g>>2]|0)+1,g=r+1310736+(o+-6<<2)|0,e[g>>2]=(e[g>>2]|0)+R,o=r+1310736+(o+-5<<2)|0,e[o>>2]=(e[o>>2]|0)+q,o=y}else E[s>>1]=0,M[t>>0]=0,o=y;while(!1);if(R=R+1|0,l=_+4|0,s=s+2|0,t=t+1|0,(R|0)>=(ie|0))break;_=l,y=o}else t=d;if(q=q+1|0,(q|0)>=(se|0)){f=o,U=52;break e}else d=t+2|0,l=l+8|0,s=s+4|0}ft(3,3904,X),t=-1}else f=0,U=52;while(!1);if((U|0)==52){if(s=r+12|0,(f|0)<1)o=1;else for(l=1,o=1;t=e[h>>2]|0,(t|0)==(l|0)?(t=o,o=o+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[h>>2]=t,(l|0)<(f|0);)l=l+1|0,h=h+4|0;if(d=r+8|0,t=o+-1|0,e[d>>2]=t,t){if(gt(s|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(o|0)>1){t=0;do U=t<<2,e[r+131084+(U<<2)>>2]=a,e[r+131084+((U|1)<<2)>>2]=0,e[r+131084+((U|2)<<2)>>2]=c,e[r+131084+((U|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){s=0;do h=(e[r+1179664+(s<<2)>>2]|0)+-1|0,l=s*7|0,t=r+12+(h<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(l<<2)>>2]|0),t=h<<1,o=r+655376+(t<<3)|0,A[o>>3]=+A[o>>3]+ +(e[r+1310736+(l+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(l+2<<2)>>2]|0),h=h<<2,t=r+131084+(h<<2)|0,o=e[r+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),t=r+131084+((h|1)<<2)|0,o=e[r+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(o|0)&&(e[t>>2]=o),t=r+131084+((h|2)<<2)|0,o=e[r+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(o|0)&&(e[t>>2]=o),o=r+131084+((h|3)<<2)|0,t=e[r+1310736+(l+6<<2)>>2]|0,(e[o>>2]|0)<(t|0)&&(e[o>>2]=t),s=s+1|0;while((s|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,U=r+655376+(c<<3)|0,A[U>>3]=+A[U>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function sd(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,X=Ae,d=e[r>>2]|0,se=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(se,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ae=a+-1|0,(c|0)>0)for(t=0,h=d,l=d+(ae<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(c|0));)h=h+(a<<1)|0,l=l+(a<<1)|0;l=r+1179664|0,t=a+1|0,W=0-a|0,ne=1-a|0,J=~a;e:do if((se|0)>1){q=(ae|0)>1,f=(e[r+4>>2]|0)+t|0,ie=1,s=s+t|0,d=d+(t<<1)|0,h=0;t:for(;;){if(q)for(t=f,F=1,R=s,_=h;;){do if((B[R>>0]|0|0)>(o|0)){if(M[t>>0]=-1,h=E[d+(W<<1)>>1]|0,h<<16>>16>0){E[d>>1]=h,h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,y=r+1310736+(h+-5<<2)|0,e[y>>2]=(e[y>>2]|0)+ie,e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(f=E[d+(ne<<1)>>1]|0,g=f<<16>>16,h=E[d+(J<<1)>>1]|0,y=h<<16>>16,s=h<<16>>16>0,f<<16>>16<=0){if(s){E[d>>1]=h,h=y*7|0,s=r+1310736+(h+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(h+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+F,s=r+1310736+(h+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+ie,s=r+1310736+(h+-3<<2)|0,(e[s>>2]|0)<(F|0)&&(e[s>>2]=F),e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(h=E[d+-2>>1]|0,h<<16>>16>0){if(E[d>>1]=h,h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,y=r+1310736+(h+-5<<2)|0,e[y>>2]=(e[y>>2]|0)+ie,h=r+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(F|0)){h=_;break}e[h>>2]=F,h=_;break}else{if(h=_+1|0,(_|0)>32767)break t;E[d>>1]=h,e[r+1179664+(_<<2)>>2]=h<<16>>16,_=_*7|0,e[r+1310736+(_<<2)>>2]=1,e[r+1310736+(_+1<<2)>>2]=F,e[r+1310736+(_+2<<2)>>2]=ie,e[r+1310736+(_+3<<2)>>2]=F,e[r+1310736+(_+4<<2)>>2]=F,e[r+1310736+(_+5<<2)>>2]=ie,e[r+1310736+(_+6<<2)>>2]=ie;break}}if(s){if(h=e[r+1179664+(g+-1<<2)>>2]|0,g=e[r+1179664+(y+-1<<2)>>2]|0,(h|0)>(g|0))if(E[d>>1]=g,(_|0)>0)for(s=0,f=l;;)if((e[f>>2]|0)==(h|0)&&(e[f>>2]=g),s=s+1|0,(s|0)>=(_|0)){h=g;break}else f=f+4|0;else h=g;else if(E[d>>1]=h,(h|0)<(g|0)&(_|0)>0)for(s=0,f=l;(e[f>>2]|0)==(g|0)&&(e[f>>2]=h),s=s+1|0,!((s|0)>=(_|0));)f=f+4|0;h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,y=r+1310736+(h+-5<<2)|0,e[y>>2]=(e[y>>2]|0)+ie,e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(s=E[d+-2>>1]|0,s<<16>>16<=0){E[d>>1]=f,h=g*7|0,s=r+1310736+(h+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(h+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+F,s=r+1310736+(h+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+ie,s=r+1310736+(h+-4<<2)|0,(e[s>>2]|0)>(F|0)&&(e[s>>2]=F),e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(h=e[r+1179664+(g+-1<<2)>>2]|0,g=e[r+1179664+((s<<16>>16)+-1<<2)>>2]|0,(h|0)>(g|0))if(E[d>>1]=g,(_|0)>0)for(s=0,f=l;;)if((e[f>>2]|0)==(h|0)&&(e[f>>2]=g),s=s+1|0,(s|0)>=(_|0)){h=g;break}else f=f+4|0;else h=g;else if(E[d>>1]=h,(h|0)<(g|0)&(_|0)>0)for(s=0,f=l;(e[f>>2]|0)==(g|0)&&(e[f>>2]=h),s=s+1|0,!((s|0)>=(_|0));)f=f+4|0;h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,h=r+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+ie,h=_}else E[d>>1]=0,M[t>>0]=0,h=_;while(!1);if(F=F+1|0,s=R+1|0,d=d+2|0,t=t+1|0,(F|0)>=(ae|0))break;R=s,_=h}else t=f;if(ie=ie+1|0,(ie|0)>=(se|0)){g=h,U=52;break e}else f=t+2|0,s=s+2|0,d=d+4|0}ft(3,3904,X),t=-1}else g=0,U=52;while(!1);if((U|0)==52){if(d=r+12|0,(g|0)<1)h=1;else for(s=1,h=1;t=e[l>>2]|0,(t|0)==(s|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(s|0)<(g|0);)s=s+1|0,l=l+4|0;if(f=r+8|0,t=h+-1|0,e[f>>2]=t,t){if(gt(d|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do U=t<<2,e[r+131084+(U<<2)>>2]=a,e[r+131084+((U|1)<<2)>>2]=0,e[r+131084+((U|2)<<2)>>2]=c,e[r+131084+((U|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[f>>2]|0))}if((g|0)>0){d=0;do l=(e[r+1179664+(d<<2)>>2]|0)+-1|0,s=d*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(s<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(s+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(s+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(s+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(s+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(s+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(s+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),d=d+1|0;while((d|0)<(g|0))}if((e[f>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,U=r+655376+(c<<3)|0,A[U>>3]=+A[U>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[f>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function od(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,X=Ae,d=e[r>>2]|0,se=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(se,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ae=a+-1|0,(c|0)>0)for(t=0,h=d,l=d+(ae<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(c|0));)h=h+(a<<1)|0,l=l+(a<<1)|0;l=r+1179664|0,t=a+1|0,W=0-a|0,ne=1-a|0,J=~a;e:do if((se|0)>1){q=(ae|0)>1,f=(e[r+4>>2]|0)+t|0,ie=1,s=s+(t<<1)|0,d=d+(t<<1)|0,h=0;t:for(;;){if(q)for(t=f,F=1,R=s,_=h;;){do if((B[R+1>>0]|0|0)>(o|0)){if(M[t>>0]=-1,h=E[d+(W<<1)>>1]|0,h<<16>>16>0){E[d>>1]=h,h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,y=r+1310736+(h+-5<<2)|0,e[y>>2]=(e[y>>2]|0)+ie,e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(f=E[d+(ne<<1)>>1]|0,g=f<<16>>16,h=E[d+(J<<1)>>1]|0,y=h<<16>>16,s=h<<16>>16>0,f<<16>>16<=0){if(s){E[d>>1]=h,h=y*7|0,s=r+1310736+(h+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(h+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+F,s=r+1310736+(h+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+ie,s=r+1310736+(h+-3<<2)|0,(e[s>>2]|0)<(F|0)&&(e[s>>2]=F),e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(h=E[d+-2>>1]|0,h<<16>>16>0){if(E[d>>1]=h,h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,y=r+1310736+(h+-5<<2)|0,e[y>>2]=(e[y>>2]|0)+ie,h=r+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(F|0)){h=_;break}e[h>>2]=F,h=_;break}else{if(h=_+1|0,(_|0)>32767)break t;E[d>>1]=h,e[r+1179664+(_<<2)>>2]=h<<16>>16,_=_*7|0,e[r+1310736+(_<<2)>>2]=1,e[r+1310736+(_+1<<2)>>2]=F,e[r+1310736+(_+2<<2)>>2]=ie,e[r+1310736+(_+3<<2)>>2]=F,e[r+1310736+(_+4<<2)>>2]=F,e[r+1310736+(_+5<<2)>>2]=ie,e[r+1310736+(_+6<<2)>>2]=ie;break}}if(s){if(h=e[r+1179664+(g+-1<<2)>>2]|0,g=e[r+1179664+(y+-1<<2)>>2]|0,(h|0)>(g|0))if(E[d>>1]=g,(_|0)>0)for(s=0,f=l;;)if((e[f>>2]|0)==(h|0)&&(e[f>>2]=g),s=s+1|0,(s|0)>=(_|0)){h=g;break}else f=f+4|0;else h=g;else if(E[d>>1]=h,(h|0)<(g|0)&(_|0)>0)for(s=0,f=l;(e[f>>2]|0)==(g|0)&&(e[f>>2]=h),s=s+1|0,!((s|0)>=(_|0));)f=f+4|0;h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,y=r+1310736+(h+-5<<2)|0,e[y>>2]=(e[y>>2]|0)+ie,e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(s=E[d+-2>>1]|0,s<<16>>16<=0){E[d>>1]=f,h=g*7|0,s=r+1310736+(h+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(h+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+F,s=r+1310736+(h+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+ie,s=r+1310736+(h+-4<<2)|0,(e[s>>2]|0)>(F|0)&&(e[s>>2]=F),e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(h=e[r+1179664+(g+-1<<2)>>2]|0,g=e[r+1179664+((s<<16>>16)+-1<<2)>>2]|0,(h|0)>(g|0))if(E[d>>1]=g,(_|0)>0)for(s=0,f=l;;)if((e[f>>2]|0)==(h|0)&&(e[f>>2]=g),s=s+1|0,(s|0)>=(_|0)){h=g;break}else f=f+4|0;else h=g;else if(E[d>>1]=h,(h|0)<(g|0)&(_|0)>0)for(s=0,f=l;(e[f>>2]|0)==(g|0)&&(e[f>>2]=h),s=s+1|0,!((s|0)>=(_|0));)f=f+4|0;h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,h=r+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+ie,h=_}else E[d>>1]=0,M[t>>0]=0,h=_;while(!1);if(F=F+1|0,s=R+2|0,d=d+2|0,t=t+1|0,(F|0)>=(ae|0))break;R=s,_=h}else t=f;if(ie=ie+1|0,(ie|0)>=(se|0)){g=h,U=52;break e}else f=t+2|0,s=s+4|0,d=d+4|0}ft(3,3904,X),t=-1}else g=0,U=52;while(!1);if((U|0)==52){if(d=r+12|0,(g|0)<1)h=1;else for(s=1,h=1;t=e[l>>2]|0,(t|0)==(s|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(s|0)<(g|0);)s=s+1|0,l=l+4|0;if(f=r+8|0,t=h+-1|0,e[f>>2]=t,t){if(gt(d|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do U=t<<2,e[r+131084+(U<<2)>>2]=a,e[r+131084+((U|1)<<2)>>2]=0,e[r+131084+((U|2)<<2)>>2]=c,e[r+131084+((U|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[f>>2]|0))}if((g|0)>0){d=0;do l=(e[r+1179664+(d<<2)>>2]|0)+-1|0,s=d*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(s<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(s+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(s+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(s+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(s+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(s+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(s+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),d=d+1|0;while((d|0)<(g|0))}if((e[f>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,U=r+655376+(c<<3)|0,A[U>>3]=+A[U>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[f>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function Ih(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,X=Ae,d=e[r>>2]|0,se=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(se,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ae=a+-1|0,(c|0)>0)for(t=0,h=d,l=d+(ae<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(c|0));)h=h+(a<<1)|0,l=l+(a<<1)|0;l=r+1179664|0,t=a+1|0,W=0-a|0,ne=1-a|0,J=~a;e:do if((se|0)>1){q=(ae|0)>1,f=(e[r+4>>2]|0)+t|0,ie=1,s=s+(t<<1)|0,d=d+(t<<1)|0,h=0;t:for(;;){if(q)for(t=f,F=1,R=s,_=h;;){do if((B[R>>0]|0|0)>(o|0)){if(M[t>>0]=-1,h=E[d+(W<<1)>>1]|0,h<<16>>16>0){E[d>>1]=h,h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,y=r+1310736+(h+-5<<2)|0,e[y>>2]=(e[y>>2]|0)+ie,e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(f=E[d+(ne<<1)>>1]|0,g=f<<16>>16,h=E[d+(J<<1)>>1]|0,y=h<<16>>16,s=h<<16>>16>0,f<<16>>16<=0){if(s){E[d>>1]=h,h=y*7|0,s=r+1310736+(h+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(h+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+F,s=r+1310736+(h+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+ie,s=r+1310736+(h+-3<<2)|0,(e[s>>2]|0)<(F|0)&&(e[s>>2]=F),e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(h=E[d+-2>>1]|0,h<<16>>16>0){if(E[d>>1]=h,h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,y=r+1310736+(h+-5<<2)|0,e[y>>2]=(e[y>>2]|0)+ie,h=r+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(F|0)){h=_;break}e[h>>2]=F,h=_;break}else{if(h=_+1|0,(_|0)>32767)break t;E[d>>1]=h,e[r+1179664+(_<<2)>>2]=h<<16>>16,_=_*7|0,e[r+1310736+(_<<2)>>2]=1,e[r+1310736+(_+1<<2)>>2]=F,e[r+1310736+(_+2<<2)>>2]=ie,e[r+1310736+(_+3<<2)>>2]=F,e[r+1310736+(_+4<<2)>>2]=F,e[r+1310736+(_+5<<2)>>2]=ie,e[r+1310736+(_+6<<2)>>2]=ie;break}}if(s){if(h=e[r+1179664+(g+-1<<2)>>2]|0,g=e[r+1179664+(y+-1<<2)>>2]|0,(h|0)>(g|0))if(E[d>>1]=g,(_|0)>0)for(s=0,f=l;;)if((e[f>>2]|0)==(h|0)&&(e[f>>2]=g),s=s+1|0,(s|0)>=(_|0)){h=g;break}else f=f+4|0;else h=g;else if(E[d>>1]=h,(h|0)<(g|0)&(_|0)>0)for(s=0,f=l;(e[f>>2]|0)==(g|0)&&(e[f>>2]=h),s=s+1|0,!((s|0)>=(_|0));)f=f+4|0;h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,y=r+1310736+(h+-5<<2)|0,e[y>>2]=(e[y>>2]|0)+ie,e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(s=E[d+-2>>1]|0,s<<16>>16<=0){E[d>>1]=f,h=g*7|0,s=r+1310736+(h+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(h+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+F,s=r+1310736+(h+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+ie,s=r+1310736+(h+-4<<2)|0,(e[s>>2]|0)>(F|0)&&(e[s>>2]=F),e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(h=e[r+1179664+(g+-1<<2)>>2]|0,g=e[r+1179664+((s<<16>>16)+-1<<2)>>2]|0,(h|0)>(g|0))if(E[d>>1]=g,(_|0)>0)for(s=0,f=l;;)if((e[f>>2]|0)==(h|0)&&(e[f>>2]=g),s=s+1|0,(s|0)>=(_|0)){h=g;break}else f=f+4|0;else h=g;else if(E[d>>1]=h,(h|0)<(g|0)&(_|0)>0)for(s=0,f=l;(e[f>>2]|0)==(g|0)&&(e[f>>2]=h),s=s+1|0,!((s|0)>=(_|0));)f=f+4|0;h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,h=r+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+ie,h=_}else E[d>>1]=0,M[t>>0]=0,h=_;while(!1);if(F=F+1|0,s=R+2|0,d=d+2|0,t=t+1|0,(F|0)>=(ae|0))break;R=s,_=h}else t=f;if(ie=ie+1|0,(ie|0)>=(se|0)){g=h,U=52;break e}else f=t+2|0,s=s+4|0,d=d+4|0}ft(3,3904,X),t=-1}else g=0,U=52;while(!1);if((U|0)==52){if(d=r+12|0,(g|0)<1)h=1;else for(s=1,h=1;t=e[l>>2]|0,(t|0)==(s|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(s|0)<(g|0);)s=s+1|0,l=l+4|0;if(f=r+8|0,t=h+-1|0,e[f>>2]=t,t){if(gt(d|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do U=t<<2,e[r+131084+(U<<2)>>2]=a,e[r+131084+((U|1)<<2)>>2]=0,e[r+131084+((U|2)<<2)>>2]=c,e[r+131084+((U|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[f>>2]|0))}if((g|0)>0){d=0;do l=(e[r+1179664+(d<<2)>>2]|0)+-1|0,s=d*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(s<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(s+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(s+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(s+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(s+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(s+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(s+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),d=d+1|0;while((d|0)<(g|0))}if((e[f>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,U=r+655376+(c<<3)|0,A[U>>3]=+A[U>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[f>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function ad(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0;if(Ae=C,C=C+16|0,X=Ae,d=e[r>>2]|0,se=c+-1|0,(a|0)>0)for(t=0,h=d,l=d+((Oe(se,a)|0)<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(a|0));)h=h+2|0,l=l+2|0;if(ae=a+-1|0,(c|0)>0)for(t=0,h=d,l=d+(ae<<1)|0;E[l>>1]=0,E[h>>1]=0,t=t+1|0,!((t|0)>=(c|0));)h=h+(a<<1)|0,l=l+(a<<1)|0;l=r+1179664|0,h=a+1|0,W=0-a|0,ne=1-a|0,J=~a;e:do if((se|0)>1){q=(ae|0)>1,t=(e[r+4>>2]|0)+h|0,ie=1,s=s+h|0,d=d+(h<<1)|0,o=o+h|0,h=0;t:for(;;){if(q)for(F=1,R=s,_=h;;){do if((B[R>>0]|0)>(B[o>>0]|0)){if(M[t>>0]=-1,h=E[d+(W<<1)>>1]|0,h<<16>>16>0){E[d>>1]=h,h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,y=r+1310736+(h+-5<<2)|0,e[y>>2]=(e[y>>2]|0)+ie,e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(f=E[d+(ne<<1)>>1]|0,g=f<<16>>16,h=E[d+(J<<1)>>1]|0,y=h<<16>>16,s=h<<16>>16>0,f<<16>>16<=0){if(s){E[d>>1]=h,h=y*7|0,s=r+1310736+(h+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(h+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+F,s=r+1310736+(h+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+ie,s=r+1310736+(h+-3<<2)|0,(e[s>>2]|0)<(F|0)&&(e[s>>2]=F),e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(h=E[d+-2>>1]|0,h<<16>>16>0){if(E[d>>1]=h,h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,y=r+1310736+(h+-5<<2)|0,e[y>>2]=(e[y>>2]|0)+ie,h=r+1310736+(h+-3<<2)|0,(e[h>>2]|0)>=(F|0)){h=_;break}e[h>>2]=F,h=_;break}else{if(h=_+1|0,(_|0)>32767)break t;E[d>>1]=h,e[r+1179664+(_<<2)>>2]=h<<16>>16,_=_*7|0,e[r+1310736+(_<<2)>>2]=1,e[r+1310736+(_+1<<2)>>2]=F,e[r+1310736+(_+2<<2)>>2]=ie,e[r+1310736+(_+3<<2)>>2]=F,e[r+1310736+(_+4<<2)>>2]=F,e[r+1310736+(_+5<<2)>>2]=ie,e[r+1310736+(_+6<<2)>>2]=ie;break}}if(s){if(h=e[r+1179664+(g+-1<<2)>>2]|0,g=e[r+1179664+(y+-1<<2)>>2]|0,(h|0)>(g|0))if(E[d>>1]=g,(_|0)>0)for(s=0,f=l;;)if((e[f>>2]|0)==(h|0)&&(e[f>>2]=g),s=s+1|0,(s|0)>=(_|0)){h=g;break}else f=f+4|0;else h=g;else if(E[d>>1]=h,(h|0)<(g|0)&(_|0)>0)for(s=0,f=l;(e[f>>2]|0)==(g|0)&&(e[f>>2]=h),s=s+1|0,!((s|0)>=(_|0));)f=f+4|0;h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,y=r+1310736+(h+-5<<2)|0,e[y>>2]=(e[y>>2]|0)+ie,e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(s=E[d+-2>>1]|0,s<<16>>16<=0){E[d>>1]=f,h=g*7|0,s=r+1310736+(h+-7<<2)|0,e[s>>2]=(e[s>>2]|0)+1,s=r+1310736+(h+-6<<2)|0,e[s>>2]=(e[s>>2]|0)+F,s=r+1310736+(h+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+ie,s=r+1310736+(h+-4<<2)|0,(e[s>>2]|0)>(F|0)&&(e[s>>2]=F),e[r+1310736+(h+-1<<2)>>2]=ie,h=_;break}if(h=e[r+1179664+(g+-1<<2)>>2]|0,g=e[r+1179664+((s<<16>>16)+-1<<2)>>2]|0,(h|0)>(g|0))if(E[d>>1]=g,(_|0)>0)for(s=0,f=l;;)if((e[f>>2]|0)==(h|0)&&(e[f>>2]=g),s=s+1|0,(s|0)>=(_|0)){h=g;break}else f=f+4|0;else h=g;else if(E[d>>1]=h,(h|0)<(g|0)&(_|0)>0)for(s=0,f=l;(e[f>>2]|0)==(g|0)&&(e[f>>2]=h),s=s+1|0,!((s|0)>=(_|0));)f=f+4|0;h=(h<<16>>16)*7|0,y=r+1310736+(h+-7<<2)|0,e[y>>2]=(e[y>>2]|0)+1,y=r+1310736+(h+-6<<2)|0,e[y>>2]=(e[y>>2]|0)+F,h=r+1310736+(h+-5<<2)|0,e[h>>2]=(e[h>>2]|0)+ie,h=_}else E[d>>1]=0,M[t>>0]=0,h=_;while(!1);if(F=F+1|0,s=R+1|0,o=o+1|0,d=d+2|0,t=t+1|0,(F|0)>=(ae|0))break;R=s,_=h}if(ie=ie+1|0,(ie|0)>=(se|0)){f=h,U=52;break e}else t=t+2|0,s=s+2|0,d=d+4|0,o=o+2|0}ft(3,3904,X),t=-1}else f=0,U=52;while(!1);if((U|0)==52){if(d=r+12|0,(f|0)<1)h=1;else for(s=1,h=1;t=e[l>>2]|0,(t|0)==(s|0)?(t=h,h=h+1|0):t=e[r+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(s|0)<(f|0);)s=s+1|0,l=l+4|0;if(o=r+8|0,t=h+-1|0,e[o>>2]=t,t){if(gt(d|0,0,t<<2|0)|0,gt(r+655376|0,0,t<<4|0)|0,(h|0)>1){t=0;do U=t<<2,e[r+131084+(U<<2)>>2]=a,e[r+131084+((U|1)<<2)>>2]=0,e[r+131084+((U|2)<<2)>>2]=c,e[r+131084+((U|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[o>>2]|0))}if((f|0)>0){d=0;do l=(e[r+1179664+(d<<2)>>2]|0)+-1|0,s=d*7|0,t=r+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[r+1310736+(s<<2)>>2]|0),t=l<<1,h=r+655376+(t<<3)|0,A[h>>3]=+A[h>>3]+ +(e[r+1310736+(s+1<<2)>>2]|0),t=r+655376+((t|1)<<3)|0,A[t>>3]=+A[t>>3]+ +(e[r+1310736+(s+2<<2)>>2]|0),l=l<<2,t=r+131084+(l<<2)|0,h=e[r+1310736+(s+3<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),t=r+131084+((l|1)<<2)|0,h=e[r+1310736+(s+4<<2)>>2]|0,(e[t>>2]|0)<(h|0)&&(e[t>>2]=h),t=r+131084+((l|2)<<2)|0,h=e[r+1310736+(s+5<<2)>>2]|0,(e[t>>2]|0)>(h|0)&&(e[t>>2]=h),h=r+131084+((l|3)<<2)|0,t=e[r+1310736+(s+6<<2)>>2]|0,(e[h>>2]|0)<(t|0)&&(e[h>>2]=t),d=d+1|0;while((d|0)<(f|0))}if((e[o>>2]|0)>0){t=0;do a=r+12+(t<<2)|0,c=t<<1,U=r+655376+(c<<3)|0,A[U>>3]=+A[U>>3]/+(e[a>>2]|0),c=r+655376+((c|1)<<3)|0,A[c>>3]=+A[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[o>>2]|0));t=0}else t=0}else t=0}return C=Ae,t|0}function jl(s){return s=s|0,ec(s+8|0)|0}function ec(s){s=s|0;var a=0,c=0;return c=C,C=C+16|0,a=Pi(4)|0,a||(ft(3,5472,c),yt(1)),s=th(s)|0,e[a>>2]=s,s||(li(a),a=0),C=c,a|0}function ld(s){s=s|0;var a=0;return a=e[s>>2]|0,a?(Wl(a)|0,li(e[s>>2]|0),e[s>>2]=0,a=0):a=-1,a|0}function cd(s){s=s|0;var a=0,c=0,o=0;if(c=C,C=C+16|0,a=Pi(7062432)|0,a||(ft(3,5472,c),yt(1)),e[a>>2]=0,e[a+4834148>>2]=0,e[a+7062408>>2]=0,e[a+4>>2]=-1,e[a+8>>2]=0,e[a+12>>2]=1,e[a+16>>2]=100,e[a+20>>2]=0,e[a+24>>2]=0,e[a+28>>2]=2,A[a+7062416>>3]=.5,e[a+7062424>>2]=3,e[a+32>>2]=s,o=e[s>>2]|0,e[a+36>>2]=o,s=e[s+4>>2]|0,e[a+40>>2]=s,e[a+44>>2]=0,e[a+15408>>2]=0,e[a+4834152>>2]=0,e[a+4818296>>2]=0,s=Pi(Oe(o<<1,s)|0)|0,e[a+4834144>>2]=s,!s)ft(3,5472,c+8|0),yt(1);else return e[a+7062384>>2]=0,Rh(a,2)|0,tc(a,0)|0,e[a+7062388>>2]=-1,Y0(a,0)|0,e[a+7062392>>2]=7,e[a+7062396>>2]=0,C=c,a|0;return 0}function Rh(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0;t=C,C=C+16|0,c=t;e:do if(s)if(o=s+4|0,(e[o>>2]|0)!=(a|0)){switch(a|0){case 11:case 10:case 9:case 8:case 7:case 6:case 4:case 3:case 2:case 1:case 0:{r=0;break}case 14:case 13:case 12:case 5:{r=1;break}default:{e[c>>2]=a,ft(3,3936,c),c=-1;break e}}if(e[o>>2]=a,e[s+8>>2]=so(a)|0,c=s+7062408|0,a=e[c>>2]|0,a&&(nl(a),e[c>>2]=va(e[s+36>>2]|0,e[s+40>>2]|0,e[o>>2]|0,0)|0),c=s+24|0,a=e[c>>2]|0,r)switch(a|0){case 0:{e[c>>2]=1,c=0;break e}case 3:{e[c>>2]=4,c=0;break e}default:{c=0;break e}}else switch(a|0){case 1:{e[c>>2]=4,c=0;break e}case 4:{e[c>>2]=3,c=0;break e}default:{c=0;break e}}}else c=0;else c=-1;while(!1);return C=t,c|0}function tc(s,a){s=s|0,a=a|0;var c=0,o=0,r=0;r=C,C=C+16|0,o=r;do if(s)if((e[s>>2]|0)!=(a|0)){if(e[s>>2]=a,!a){c=s+4834148|0,li(e[c>>2]|0),e[c>>2]=0,c=0;break}a=Pi(Oe(e[s+40>>2]|0,e[s+36>>2]|0)|0)|0,e[s+4834148>>2]=a,a?c=0:(ft(3,5472,o),yt(1))}else c=0;else c=-1;while(!1);return C=r,c|0}function Y0(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0,l=0;if(l=C,C=C+16|0,h=l+8|0,r=l,s)if(t=s+7062388|0,(e[t>>2]|0)!=(a|0)){switch(c=s+7062408|0,o=e[c>>2]|0,o&&(nl(o),e[c>>2]=0),a|0){case 3:case 2:case 1:{e[c>>2]=va(e[s+36>>2]|0,e[s+40>>2]|0,e[s+4>>2]|0,0)|0;break}case 4:{e[s+7062404>>2]=1,e[s+7062400>>2]=1,a=4;break}case 0:{a=0;break}default:ft(3,3985,r),a=0}e[t>>2]=a,(e[s>>2]|0)==1&&(e[h>>2]=e[760+(a<<2)>>2],ft(3,4059,h)),a=0}else a=0;else a=-1;return C=l,a|0}function ic(s){s=s|0;var a=0,c=0;return s?(a=s+7062408|0,c=e[a>>2]|0,c&&(nl(c),e[a>>2]=0),li(e[s+4834144>>2]|0),li(e[s+4834148>>2]|0),li(s),a=0):a=-1,a|0}function Bh(s,a){return s=s|0,a=a|0,(s|0)!=0&(a|0)!=0?(e[a>>2]=e[s>>2],s=0):s=-1,s|0}function Dh(s,a){return s=s|0,a=a|0,(s|0)!=0&a>>>0<2?(e[s+12>>2]=a,s=0):s=-1,s|0}function Lh(s,a){return s=s|0,a=a|0,(s|0)!=0&(a|0)!=0?(e[a>>2]=e[s+12>>2],s=0):s=-1,s|0}function Ph(s,a){return s=s|0,a=a|0,(s|0)==0|a>>>0>255?s=-1:(e[s+16>>2]=a,s=0),s|0}function hd(s,a){return s=s|0,a=a|0,(s|0)!=0&(a|0)!=0?(e[a>>2]=e[s+16>>2],s=0):s=-1,s|0}function rc(s,a){return s=s|0,a=a|0,(s|0)!=0&(a|0)!=0?(e[a>>2]=e[s+7062388>>2],s=0):s=-1,s|0}function ud(s,a){return s=s|0,a=a|0,(s|0)!=0&a>>>0<2?(e[s+20>>2]=a,s=0):s=-1,s|0}function dd(s,a){return s=s|0,a=a|0,s?(e[a>>2]=e[s+20>>2],s=0):s=-1,s|0}function ys(s,a){return s=s|0,a=a|0,(s|0)!=0&a>>>0<5?(e[s+24>>2]=a,s=0):s=-1,s|0}function fd(s,a){return s=s|0,a=a|0,s?(e[s+7062424>>2]=a,s=0):s=-1,s|0}function pd(s,a){return s=s|0,a=a|0,(s|0)!=0&(a|0)!=0?(e[a>>2]=e[s+7062424>>2],s=0):s=-1,s|0}function Ad(s,a){return s=s|0,a=a|0,s?(e[a>>2]=e[s+24>>2],s=0):s=-1,s|0}function md(s,a){return s=s|0,a=+a,s|0&&!(a<=0|a>=1)?(A[s+7062416>>3]=a,s=0):s=-1,s|0}function il(s,a){return s=s|0,a=a|0,s?(A[a>>3]=+A[s+7062416>>3],s=0):s=-1,s|0}function rl(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0,Ze=0,nt=0,lt=0,Ye=0,Qt=0,Et=0,Ft=0,Ht=0,St=0,Ge=0,mt=0,qe=0,Ei=0,ri=0,Yi=0;Ei=C,C=C+80|0,St=Ei+32|0,lt=Ei+24|0,se=Ei,ae=Ei+52|0,We=Ei+40|0,Ht=Ei+64|0,qe=s+44|0,e[qe>>2]=0,Et=s+7062388|0,o=e[Et>>2]|0;e:do if((o|0)==4){Qt=s+7062396|0,c=e[Qt>>2]|0;do if((c|0)>0)o=4,c=c+-1|0;else{Ae=s+16|0,nt=e[Ae>>2]|0,Ze=s+7062400|0,X=(e[Ze>>2]|0)+nt|0,X=(X|0)>255?255:X,e[ae>>2]=X,Ye=s+7062404|0,U=nt-(e[Ye>>2]|0)|0,U=(U|0)<0?0:U,e[ae+4>>2]=U,e[ae+8>>2]=nt,c=s+36|0,o=s+40|0,r=s+4|0,h=s+12|0,l=s+20|0,d=s+4834144|0,y=s+15416|0,_=s+15408|0,R=s+7062384|0,F=s+24|0,ne=s+32|0,J=s+7062416|0,W=s+48|0,q=s+7062424|0,ie=0;do{if((Ea(a,e[c>>2]|0,e[o>>2]|0,e[r>>2]|0,e[s>>2]|0,e[h>>2]|0,e[ae+(ie<<2)>>2]|0,e[l>>2]|0,d,0)|0)<0){c=-1;break e}if((Lo(e[c>>2]|0,e[o>>2]|0,d,e[l>>2]|0,1e6,70,1,y,_)|0)<0){c=-1;break e}if((Po(a,e[c>>2]|0,e[o>>2]|0,e[r>>2]|0,y,e[_>>2]|0,e[R>>2]|0,e[l>>2]|0,e[F>>2]|0,(e[ne>>2]|0)+184|0,+A[J>>3],W,qe,e[q>>2]|0)|0)<0){c=-1;break e}e[We+(ie<<2)>>2]=e[qe>>2],ie=ie+1|0}while((ie|0)<3);if((e[s>>2]|0)==1?(Ge=e[We+4>>2]|0,r=e[We+8>>2]|0,o=e[We>>2]|0,e[se>>2]=U,e[se+4>>2]=Ge,e[se+8>>2]=nt,e[se+12>>2]=r,e[se+16>>2]=X,e[se+20>>2]=o,ft(3,4153,se)):(o=e[We>>2]|0,r=e[We+8>>2]|0),c=e[We+4>>2]|0,(o|0)>(r|0)|(c|0)>(r|0)){o=(o|0)>=(c|0)?X:U,e[Ae>>2]=o,c=o-nt|0,(c|0)>0?(e[Ze>>2]=c,c=1):(e[Ze>>2]=1,c=0-c|0),e[Ye>>2]=c,(e[s>>2]|0)==1&&(e[lt>>2]=o,ft(3,4229,lt)),o=e[Et>>2]|0,c=e[s+7062392>>2]|0;break}c=e[Ze>>2]|0,o=e[Ye>>2]|0;do if((c|0)>=(o|0))if((c|0)>(o|0)){e[Ye>>2]=o+1;break}else{c=c+1|0,e[Ze>>2]=c,e[Ye>>2]=o+1;break}else c=c+1|0,e[Ze>>2]=c;while(!1);(c+nt|0)>254&&(e[Ze>>2]=1,c=1),(nt|0)<=(c|0)&&(e[Ye>>2]=1),e[Qt>>2]=e[s+7062392>>2],Ge=47;break e}while(!1);e[Qt>>2]=c,Ge=30}else Ge=30;while(!1);e:do if((Ge|0)==30){t:do switch(o|0){case 3:{if(o=s+7062408|0,c=kh(e[o>>2]|0,a,9,-7)|0,(c|0)<0||(c=e[o>>2]|0,o=s+4834144|0,c=Ea(e[c>>2]|0,e[c+8>>2]|0,e[c+12>>2]|0,5,e[s>>2]|0,e[s+12>>2]|0,0,0,o,e[c+4>>2]|0)|0,(c|0)<0))break e;c=s+36|0,r=s+40|0,h=s+20|0;break}case 2:case 1:{if(r=s+7062396|0,c=e[r>>2]|0,(c|0)>0){e[r>>2]=c+-1,Ge=44;break t}if(c=e[s+7062408>>2]|0,(o|0)==1?c=oc(c,a,Ht)|0:c=Oh(c,a,Ht)|0,(c|0)<0)break e;c=s+16|0,(e[s>>2]|0)==1&&(Ft=B[Ht>>0]|0,(e[c>>2]|0)!=(Ft|0))&&(e[St>>2]=(e[Et>>2]|0)==1?4281:4288,e[St+4>>2]=Ft,ft(3,4293,St)),e[c>>2]=B[Ht>>0],e[r>>2]=e[s+7062392>>2],Ge=44;break}default:Ge=44}while(!1);if((Ge|0)==44&&(c=s+36|0,r=s+40|0,h=s+20|0,o=s+4834144|0,(Ea(a,e[c>>2]|0,e[r>>2]|0,e[s+4>>2]|0,e[s>>2]|0,e[s+12>>2]|0,e[s+16>>2]|0,e[h>>2]|0,o,0)|0)<0)){c=-1;break}l=s+15416|0,d=s+15408|0,(Lo(e[c>>2]|0,e[r>>2]|0,o,e[h>>2]|0,1e6,70,1,l,d)|0)>=0&&(Po(a,e[c>>2]|0,e[r>>2]|0,e[s+4>>2]|0,l,e[d>>2]|0,e[s+7062384>>2]|0,e[h>>2]|0,e[s+24>>2]|0,(e[s+32>>2]|0)+184|0,+A[s+7062416>>3],s+48|0,qe,e[s+7062424>>2]|0)|0)>=0?Ge=47:c=-1}while(!1);e:do if((Ge|0)==47){if(ne=s+28|0,(e[ne>>2]|0)==1){nc(s),c=0;break}if(J=s+4818296|0,R=s+24|0,_=e[J>>2]|0,(_|0)>0){F=0;do{if(o=e[qe>>2]|0,r=s+4818304+(F*264|0)+56|0,h=s+4818304+(F*264|0)+64|0,(o|0)>0)for(g=+(e[s+4818304+(F*264|0)>>2]|0),c=-1,l=0,f=.5;;)if(t=+(e[s+48+(l<<8)>>2]|0),ri=g/t,!(ri<.7|ri>1.43)&&(ri=+A[s+48+(l<<8)+56>>3]-+A[r>>3],mt=+A[s+48+(l<<8)+64>>3]-+A[h>>3],mt=(ri*ri+mt*mt)/t,mt<f)?(c=l,t=mt):t=f,l=l+1|0,(l|0)>=(o|0)){y=c;break}else f=t;else y=-1;t:do if((y|0)>-1){switch(d=e[R>>2]|0,d|0){case 2:case 1:case 0:break;case 4:case 3:{if(r=s+48+(y<<8)+40|0,t=+A[s+4818304+(F*264|0)+40>>3],+A[r>>3]<t)o=s+4818304+(F*264|0)+48|0,c=s+48+(y<<8)+48|0;else if(c=s+48+(y<<8)+48|0,o=s+4818304+(F*264|0)+48|0,!(+A[c>>3]<+A[o>>3]))break t;for(A[r>>3]=t,e[s+48+(y<<8)+8>>2]=e[s+4818304+(F*264|0)+8>>2],A[c>>3]=+A[o>>3],e[s+48+(y<<8)+12>>2]=e[s+4818304+(F*264|0)+12>>2],c=-1,f=1e8,r=0;;){t=0,o=0;do a=(o+r|0)%4|0,g=+A[s+4818304+(F*264|0)+168+(o<<4)>>3]-+A[s+48+(y<<8)+168+(a<<4)>>3],ri=+A[s+4818304+(F*264|0)+168+(o<<4)+8>>3]-+A[s+48+(y<<8)+168+(a<<4)+8>>3],t=t+(g*g+ri*ri),o=o+1|0;while((o|0)!=4);if(o=t<f,c=o?r:c,r=r+1|0,(r|0)==4)break;f=o?t:f}a=4-c|0,e[s+48+(y<<8)+20>>2]=(a+(e[s+4818304+(F*264|0)+20>>2]|0)|0)%4|0,e[s+48+(y<<8)+24>>2]=(a+(e[s+4818304+(F*264|0)+24>>2]|0)|0)%4|0;break t}default:{c=-1;break e}}if(c=s+48+(y<<8)+32|0,g=+A[s+4818304+(F*264|0)+32>>3],+A[c>>3]<g){for(A[c>>3]=g,l=e[s+4818304+(F*264|0)+4>>2]|0,e[s+48+(y<<8)+4>>2]=l,r=s+4818304+(F*264|0)+16|0,c=-1,f=1e8,h=0;;){t=0,o=0;do a=(o+h|0)%4|0,Yi=+A[s+4818304+(F*264|0)+168+(o<<4)>>3]-+A[s+48+(y<<8)+168+(a<<4)>>3],ri=+A[s+4818304+(F*264|0)+168+(o<<4)+8>>3]-+A[s+48+(y<<8)+168+(a<<4)+8>>3],t=t+(Yi*Yi+ri*ri),o=o+1|0;while((o|0)!=4);if(t<f?c=(4-h+(e[r>>2]|0)|0)%4|0:t=f,h=h+1|0,(h|0)==4)break;f=t}if(e[s+48+(y<<8)+16>>2]=c,d>>>0<2){e[s+48+(y<<8)+8>>2]=l,A[s+48+(y<<8)+40>>3]=g,e[s+48+(y<<8)+20>>2]=c;break}else{e[s+48+(y<<8)+12>>2]=l,A[s+48+(y<<8)+48>>3]=g,e[s+48+(y<<8)+24>>2]=c;break}}}while(!1);F=F+1|0}while((F|0)<(_|0))}if(nc(s),(e[J>>2]|0)>0){r=0,c=0;do o=s+4818304+(r*264|0)|0,Ge=s+4818304+(r*264|0)+256|0,a=(e[Ge>>2]|0)+1|0,e[Ge>>2]=a,(a|0)<4&&((r|0)!=(c|0)&&un(s+4818304+(c*264|0)|0,o|0,264)|0,c=c+1|0),r=r+1|0;while((r|0)<(e[J>>2]|0))}else c=0;e[J>>2]=c,c=e[qe>>2]|0;t:do if((c|0)>0){d=0;do{if(h=s+48+(d<<8)|0,r=e[s+48+(d<<8)+4>>2]|0,(r|0)>=0){l=e[J>>2]|0;i:do if((l|0)>0){o=0;do{if((e[s+4818304+(o*264|0)+4>>2]|0)==(r|0))break i;o=o+1|0}while((o|0)<(l|0))}else o=0;while(!1);if((o|0)==(l|0)){if((l|0)==60)break t;e[J>>2]=l+1}un(s+4818304+(o*264|0)|0,h|0,256)|0,e[s+4818304+(o*264|0)+256>>2]=1}d=d+1|0,c=e[qe>>2]|0}while((d|0)<(c|0))}while(!1);if((e[ne>>2]|0)!=2&&(e[J>>2]|0)>0)for(l=0;;){r=s+4818304+(l*264|0)+56|0,h=s+4818304+(l*264|0)+64|0;t:do if((c|0)>0){f=+(e[s+4818304+(l*264|0)>>2]|0),o=0;do{if(t=+(e[s+48+(o<<8)>>2]|0),Yi=f/t,!(Yi<.7|Yi>1.43)&&(ri=+A[s+48+(o<<8)+56>>3]-+A[r>>3],Yi=+A[s+48+(o<<8)+64>>3]-+A[h>>3],(ri*ri+Yi*Yi)/t<.5))break t;o=o+1|0}while((o|0)<(c|0))}else o=0;while(!1);if((o|0)==(c|0)&&(un(s+48+(c<<8)|0,s+4818304+(l*264|0)|0,256)|0,c=(e[qe>>2]|0)+1|0,e[qe>>2]=c),l=l+1|0,(l|0)>=(e[J>>2]|0)){c=0;break}}else c=0}while(!1);return C=Ei,c|0}function nc(s){s=s|0;var a=0,c=0,o=0,r=0;switch(e[s+24>>2]|0){case 1:case 0:{if(c=e[s+44>>2]|0,(c|0)>0){o=0;do a=s+48+(o<<8)+4|0,(e[a>>2]|0)>-1&&+A[s+48+(o<<8)+32>>3]<.5&&(e[s+48+(o<<8)+8>>2]=-1,e[a>>2]=-1,e[s+48+(o<<8)+236>>2]=6),o=o+1|0;while((o|0)<(c|0))}break}case 2:{if(c=e[s+44>>2]|0,(c|0)>0){o=0;do a=s+48+(o<<8)+4|0,(e[a>>2]|0)>-1&&+A[s+48+(o<<8)+32>>3]<.5&&(e[s+48+(o<<8)+12>>2]=-1,e[a>>2]=-1,e[s+48+(o<<8)+236>>2]=6),o=o+1|0;while((o|0)<(c|0))}break}default:if(o=e[s+44>>2]|0,(o|0)>0){r=0;do a=s+48+(r<<8)+8|0,(e[a>>2]|0)>-1&&+A[s+48+(r<<8)+40>>3]<.5?(e[a>>2]=-1,c=0):c=1,a=s+48+(r<<8)+12|0,(e[a>>2]|0)>-1&&+A[s+48+(r<<8)+48>>3]<.5&&(e[a>>2]=-1,(c|0)==0)&&(e[s+48+(r<<8)+236>>2]=6),r=r+1|0;while((r|0)<(o|0))}}}function Lo(s,a,c,o,r,t,h,l,d){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0,t=t|0,h=+h,l=l|0,d=d|0;var f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0,Ze=0,nt=0,lt=0,Ye=0,Qt=0,Et=0,Ft=0,Ht=0,St=0,Ge=0;St=C,C=C+96|0,lt=St+56|0,Qt=St+48|0,Ye=St+8|0,Et=St,Ht=(o|0)==1,Ht&&(s=(s|0)/2|0,a=(a|0)/2|0,r=(r|0)/4|0,t=(t|0)/4|0),e[d>>2]=0,We=c+8|0,Ze=s+-2|0,X=a+-2|0,U=c+1179664|0;e:do if((e[We>>2]|0)>0)for(Ae=0;;){ie=c+12+(Ae<<2)|0,se=e[ie>>2]|0;t:do if(!((se|0)<(t|0)|(se|0)>(r|0))&&(nt=c+131084+(Ae<<4)|0,(e[nt>>2]|0)!=1)&&(e[c+131084+(Ae<<4)+4>>2]|0)!=(Ze|0)&&(e[c+131084+(Ae<<4)+8>>2]|0)!=1&&(e[c+131084+(Ae<<4)+12>>2]|0)!=(X|0)&&(b0(e[c>>2]|0,s,0,U,Ae+1|0,nt,l+((e[d>>2]|0)*80048|0)|0)|0)>=0){if(J=e[ie>>2]|0,ae=e[d>>2]|0,W=l+(ae*80048|0)+28|0,a=e[W>>2]|0,q=l+(ae*80048|0)+40028|0,g=e[q>>2]|0,se=l+(ae*80048|0)+24|0,y=(e[se>>2]|0)+-1|0,(y|0)>1)for(F=0,ne=1,o=0;_=(e[l+(ae*80048|0)+28+(ne<<2)>>2]|0)-a|0,_=Oe(_,_)|0,R=(e[l+(ae*80048|0)+40028+(ne<<2)>>2]|0)-g|0,_=(Oe(R,R)|0)+_|0,R=(_|0)>(F|0),o=R?ne:o,ne=ne+1|0,!((ne|0)>=(y|0));)F=R?_:F;else o=0;f=+(J|0)/.75*.01*h,e[Qt>>2]=0,e[Et>>2]=0;i:do if((u0(W,q,0,o,f,lt,Qt)|0)>=0&&(u0(W,q,o,(e[se>>2]|0)+-1|0,f,Ye,Et)|0)>=0){a=e[Qt>>2]|0,g=e[Et>>2]|0;do if((a|0)==1&(g|0)==1)a=e[Ye>>2]|0,g=e[lt>>2]|0;else{if((a|0)>1&(g|0)==0){if(a=(o|0)/2|0,e[Et>>2]=0,e[Qt>>2]=0,(u0(W,q,0,a,f,lt,Qt)|0)<0||(u0(W,q,a,o,f,Ye,Et)|0)<0||!((e[Qt>>2]|0)==1&(e[Et>>2]|0)==1))break i;a=o,g=e[lt>>2]|0,o=e[Ye>>2]|0;break}if(!((a|0)==0&(g|0)>1)||(a=(o+-1+(e[se>>2]|0)|0)/2|0,e[Et>>2]=0,e[Qt>>2]=0,(u0(W,q,o,a,f,lt,Qt)|0)<0)||(u0(W,q,a,(e[se>>2]|0)+-1|0,f,Ye,Et)|0)<0||!((e[Qt>>2]|0)==1&(e[Et>>2]|0)==1))break i;a=e[Ye>>2]|0,g=o,o=e[lt>>2]|0}while(!1);if(e[l+(ae*80048|0)+80028>>2]=0,e[l+(ae*80048|0)+80032>>2]=g,e[l+(ae*80048|0)+80036>>2]=o,e[l+(ae*80048|0)+80040>>2]=a,e[l+(ae*80048|0)+80044>>2]=(e[se>>2]|0)+-1,e[l+((e[d>>2]|0)*80048|0)>>2]=e[ie>>2],se=e[d>>2]|0,A[l+(se*80048|0)+8>>3]=+A[c+655376+(Ae<<4)>>3],A[l+(se*80048|0)+16>>3]=+A[c+655376+(Ae<<4)+8>>3],se=se+1|0,e[d>>2]=se,(se|0)==60){o=60;break e}else break t}while(!1)}while(!1);if(Ae=Ae+1|0,(Ae|0)>=(e[We>>2]|0)){Ft=4;break}}else Ft=4;while(!1);if((Ft|0)==4&&(o=e[d>>2]|0),(o|0)>0){y=0;do if(s=y,y=y+1|0,t=l+(s*80048|0)+16|0,g=l+(s*80048|0)|0,(y|0)<(o|0)){h=+A[l+(s*80048|0)+8>>3],r=y;do Ge=h-+A[l+(r*80048|0)+8>>3],f=+A[t>>3]-+A[l+(r*80048|0)+16>>3],f=Ge*Ge+f*f,o=e[g>>2]|0,s=l+(r*80048|0)|0,a=e[s>>2]|0,(o|0)>(a|0)?f<+((o|0)/4|0|0)&&(e[s>>2]=0):f<+((a|0)/4|0|0)&&(e[g>>2]=0),r=r+1|0,o=e[d>>2]|0;while((r|0)<(o|0))}while((y|0)<(o|0))}if((o|0)>0){r=0;do{if(!(e[l+(r*80048|0)>>2]|0)){if(s=r+1|0,(s|0)<(o|0))for(o=r,a=s;un(l+(o*80048|0)|0,l+(a*80048|0)|0,80048)|0,o=e[d>>2]|0,s=a+1|0,(s|0)<(o|0);)o=a,a=s;o=o+-1|0,e[d>>2]=o}r=r+1|0}while((r|0)<(o|0))}if(Ht&(o|0)>0)for(a=0;;){if(e[l>>2]=e[l>>2]<<2,o=l+8|0,A[o>>3]=+A[o>>3]*2,o=l+16|0,A[o>>3]=+A[o>>3]*2,o=l+24|0,(e[o>>2]|0)>0){s=0;do Ht=l+28+(s<<2)|0,e[Ht>>2]=e[Ht>>2]<<1,Ht=l+40028+(s<<2)|0,e[Ht>>2]=e[Ht>>2]<<1,s=s+1|0;while((s|0)<(e[o>>2]|0))}if(a=a+1|0,(a|0)>=(e[d>>2]|0))break;l=l+80048|0}return C=St,0}function b0(s,a,c,o,r,t,h){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0,t=t|0,h=h|0;var l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0;ie=C,C=C+80032|0,_=ie+16|0,y=ie+8|0,d=ie,W=ie+40024|0,q=ie+24|0,J=e[t+8>>2]|0,c=e[t>>2]|0,t=e[t+4>>2]|0;e:do if((c|0)<=(t|0)){for(l=c,c=s+((Oe(J,a)|0)+c<<1)|0;;){if(ne=E[c>>1]|0,ne<<16>>16>0&&(e[o+((ne<<16>>16)+-1<<2)>>2]|0)==(r|0)){g=l;break}if((l|0)<(t|0))l=l+1|0,c=c+2|0;else{ae=6;break e}}for(R=h+24|0,e[R>>2]=1,F=h+28|0,e[F>>2]=g,ne=h+40028|0,e[ne>>2]=J,o=J,f=g,l=1,c=5;;){for(t=(c+5|0)%8|0,c=0;;){if(r=e[776+(t<<2)>>2]|0,d=e[808+(t<<2)>>2]|0,(E[s+(d+f+(Oe(r+o|0,a)|0)<<1)>>1]|0)>0){c=r,r=t;break}if(c=c+1|0,t=(t+1|0)%8|0,(c|0)>=8){ae=11;break}}if((ae|0)==11){if(ae=0,(c|0)==8){ae=13;break}d=e[808+(t<<2)>>2]|0,c=e[776+(t<<2)>>2]|0,r=t}if(e[h+28+(l<<2)>>2]=d+f,t=e[R>>2]|0,e[h+40028+(t<<2)>>2]=c+(e[h+40028+(t+-1<<2)>>2]|0),c=e[R>>2]|0,t=h+28+(c<<2)|0,(e[t>>2]|0)==(g|0)&&(e[h+40028+(c<<2)>>2]|0)==(J|0)){o=c,ae=16;break}if(l=c+1|0,e[R>>2]=l,(l|0)==9999){ae=19;break}o=e[h+40028+(c<<2)>>2]|0,f=e[t>>2]|0,c=r}if((ae|0)==13){ft(3,4347,y),c=-1;break}else if((ae|0)==16){if((o|0)>1)for(d=0,r=1,t=0;c=(e[h+28+(r<<2)>>2]|0)-g|0,c=Oe(c,c)|0,l=(e[h+40028+(r<<2)>>2]|0)-J|0,c=(Oe(l,l)|0)+c|0,l=(c|0)>(d|0),t=l?r:t,r=r+1|0,!((r|0)>=(o|0));)d=l?c:d;else t=0;if((t|0)>0){c=0;do e[W+(c<<2)>>2]=e[h+28+(c<<2)>>2],e[q+(c<<2)>>2]=e[h+40028+(c<<2)>>2],c=c+1|0;while((c|0)<(t|0))}if((t|0)<(o|0)){c=t;do J=c-t|0,e[h+28+(J<<2)>>2]=e[h+28+(c<<2)>>2],e[h+40028+(J<<2)>>2]=e[h+40028+(c<<2)>>2],c=c+1|0;while((c|0)<(e[R>>2]|0))}if((t|0)>0){c=0;do J=c-t|0,e[h+28+((e[R>>2]|0)+J<<2)>>2]=e[W+(c<<2)>>2],e[h+40028+((e[R>>2]|0)+J<<2)>>2]=e[q+(c<<2)>>2],c=c+1|0;while((c|0)<(t|0))}e[h+28+(e[R>>2]<<2)>>2]=e[F>>2],e[h+40028+(e[R>>2]<<2)>>2]=e[ne>>2],e[R>>2]=(e[R>>2]|0)+1,c=0;break}else if((ae|0)==19){ft(3,4354,_),c=-1;break}}else ae=6;while(!1);return(ae|0)==6&&(ft(3,4340,d),c=-1),C=ie,c|0}function u0(s,a,c,o,r,t,h){s=s|0,a=a|0,c=c|0,o=o|0,r=+r,t=t|0,h=h|0;var l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0;if(l=e[a+(o<<2)>>2]|0,ne=e[a+(c<<2)>>2]|0,R=+(l-ne|0),g=e[s+(c<<2)>>2]|0,J=e[s+(o<<2)>>2]|0,y=+(g-J|0),f=+((Oe(J,ne)|0)-(Oe(g,l)|0)|0),l=c+1|0,(l|0)<(o|0)){d=0,g=l;do W=f+(R*+(e[s+(g<<2)>>2]|0)+y*+(e[a+(g<<2)>>2]|0)),W=W*W,J=W>d,d=J?W:d,l=J?g:l,g=g+1|0;while((g|0)<(o|0))}else d=0;return d/(R*R+y*y)>r?(u0(s,a,c,l,r,t,h)|0)>=0&&(_=e[h>>2]|0,(_|0)<=5)&&(e[t+(_<<2)>>2]=l,e[h>>2]=(e[h>>2]|0)+1,(u0(s,a,l,o,r,t,h)|0)>=0)?F=7:l=-1:F=7,(F|0)==7&&(l=0),l|0}function sc(s,a,c,o,r,t,h){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0,t=t|0,h=h|0;var l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0;ae=C,C=C+16|0,ne=ae+4|0,J=ae,W=zl(2)|0,q=zl(2)|0,ie=H0(2,2)|0,_=0;e:for(;;){if(R=_,_=_+1|0,F=e[o+(_<<2)>>2]|0,l=e[o+(R<<2)>>2]|0,y=+(F+1-l|0)*.05+.5,l=~~(+(l|0)+y),F=~~(+(F|0)-y)-l|0,f=F+1|0,c=H0(f,2)|0,(F|0)>-1){F=0;do{if(se=F+l|0,(eh(r,+(e[s+(se<<2)>>2]|0),+(e[a+(se<<2)>>2]|0),ne,J)|0)<0){l=10;break e}se=F<<1,X=e[c>>2]|0,A[X+(se<<3)>>3]=+P[ne>>2],A[X+((se|1)<<3)>>3]=+P[J>>2],F=F+1|0}while((F|0)<(f|0))}if((t2(c,ie,W,q)|0)<0){l=10;break}if(X=e[ie>>2]|0,g=+A[X+8>>3],A[t+(R*24|0)>>3]=g,y=-+A[X>>3],A[t+(R*24|0)+8>>3]=y,X=e[q>>2]|0,A[t+(R*24|0)+16>>3]=-(g*+A[X>>3]+ +A[X+8>>3]*y),Fi(c)|0,(_|0)>=4){l=7;break}}e:do if((l|0)==7)for(Fi(ie)|0,ha(q)|0,ha(W)|0,_=0;;){if(c=(_+3|0)%4|0,l=t+(c*24|0)|0,d=+A[t+(_*24|0)+8>>3],f=t+(_*24|0)|0,g=+A[t+(c*24|0)+8>>3],y=+A[l>>3]*d-+A[f>>3]*g,+Ur(+y)<1e-4){c=-1;break e}if(X=t+(_*24|0)+16|0,se=t+(c*24|0)+16|0,A[h+(_<<4)>>3]=(g*+A[X>>3]-d*+A[se>>3])/y,A[h+(_<<4)+8>>3]=(+A[f>>3]*+A[se>>3]-+A[l>>3]*+A[X>>3])/y,_=_+1|0,(_|0)>=4){c=0;break}}else(l|0)==10&&(Fi(c)|0,Fi(ie)|0,ha(q)|0,ha(W)|0,c=-1);while(!1);return C=ae,c|0}function Po(s,a,c,o,r,t,h,l,d,f,g,y,_,R){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0,t=t|0,h=h|0,l=l|0,d=d|0,f=f|0,g=+g,y=y|0,_=_|0,R=R|0;var F=0,ne=0,J=0,W=0,q=0,ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0,Ze=0,nt=0;if(nt=C,C=C+16|0,We=nt+4|0,Ze=nt,se=d>>>0<2,X=(d|0)==2,(t|0)>0){Ae=0,F=0;do{if(e[y+(F<<8)>>2]=e[r+(Ae*80048|0)>>2],(eh(f,+A[r+(Ae*80048|0)+8>>3],+A[r+(Ae*80048|0)+16>>3],We,Ze)|0)>=0&&(A[y+(F<<8)+56>>3]=+P[We>>2],A[y+(F<<8)+64>>3]=+P[Ze>>2],U=y+(F<<8)+168|0,(sc(r+(Ae*80048|0)+28|0,r+(Ae*80048|0)+40028|0,e[r+(Ae*80048|0)+24>>2]|0,r+(Ae*80048|0)+80028|0,f,y+(F<<8)+72|0,U)|0)>=0)){switch(ne=y+(F<<8)+8|0,J=y+(F<<8)+20|0,W=y+(F<<8)+40|0,q=y+(F<<8)+12|0,ie=y+(F<<8)+24|0,ae=y+(F<<8)+48|0,Hh(h,l,d,s,a,c,o,f,U,g,ne,J,W,q,ie,ae,R,y+(F<<8)+240|0,y+(F<<8)+248|0)|0){case 0:{e[y+(F<<8)+236>>2]=0;break}case-1:{e[y+(F<<8)+236>>2]=2;break}case-2:{e[y+(F<<8)+236>>2]=3;break}case-3:{e[y+(F<<8)+236>>2]=4;break}case-4:{e[y+(F<<8)+236>>2]=5;break}case-5:{e[y+(F<<8)+236>>2]=9;break}case-6:{e[y+(F<<8)+236>>2]=1;break}default:}se?(e[y+(F<<8)+4>>2]=e[ne>>2],e[y+(F<<8)+16>>2]=e[J>>2],A[y+(F<<8)+32>>3]=+A[W>>3]):X&&(e[y+(F<<8)+4>>2]=e[q>>2],e[y+(F<<8)+16>>2]=e[ie>>2],A[y+(F<<8)+32>>3]=+A[ae>>3]),F=F+1|0}Ae=Ae+1|0}while((Ae|0)<(t|0))}else F=0;return e[_>>2]=F,C=nt,0}function ma(s,a,c,o){s=s|0,a=a|0,c=+c,o=o|0;var r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0;return l=C,C=C+288|0,f=l+200|0,d=l+104|0,r=l+264|0,h=l+8|0,t=l,y=e[a+16>>2]|0,_=(4-y|0)%4|0,A[f>>3]=+A[a+168+(_<<4)>>3],A[f+8>>3]=+A[a+168+(_<<4)+8>>3],_=(5-y|0)%4|0,A[f+16>>3]=+A[a+168+(_<<4)>>3],A[f+24>>3]=+A[a+168+(_<<4)+8>>3],_=(6-y|0)%4|0,A[f+32>>3]=+A[a+168+(_<<4)>>3],A[f+40>>3]=+A[a+168+(_<<4)+8>>3],y=(7-y|0)%4|0,A[f+48>>3]=+A[a+168+(y<<4)>>3],A[f+56>>3]=+A[a+168+(y<<4)+8>>3],g=c*-.5,A[d>>3]=g,c=c*.5,A[d+8>>3]=c,A[d+16>>3]=0,A[d+24>>3]=c,A[d+32>>3]=c,A[d+40>>3]=0,A[d+48>>3]=c,A[d+56>>3]=g,A[d+64>>3]=0,A[d+72>>3]=g,A[d+80>>3]=g,A[d+88>>3]=0,e[r>>2]=f,e[r+4>>2]=d,e[r+8>>2]=4,(ql(e[s>>2]|0,f,d,4,h)|0)<0?c=1e8:(_=(n1(e[s>>2]|0,r,h,o,t)|0)<0,c=_?1e8:+A[t>>3]),C=l,+c}function ga(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=+o,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0;return h=C,C=C+192|0,f=h+104|0,d=h+8|0,l=h+168|0,t=h,y=e[a+16>>2]|0,_=(4-y|0)%4|0,A[f>>3]=+A[a+168+(_<<4)>>3],A[f+8>>3]=+A[a+168+(_<<4)+8>>3],_=(5-y|0)%4|0,A[f+16>>3]=+A[a+168+(_<<4)>>3],A[f+24>>3]=+A[a+168+(_<<4)+8>>3],_=(6-y|0)%4|0,A[f+32>>3]=+A[a+168+(_<<4)>>3],A[f+40>>3]=+A[a+168+(_<<4)+8>>3],y=(7-y|0)%4|0,A[f+48>>3]=+A[a+168+(y<<4)>>3],A[f+56>>3]=+A[a+168+(y<<4)+8>>3],g=o*-.5,A[d>>3]=g,o=o*.5,A[d+8>>3]=o,A[d+16>>3]=0,A[d+24>>3]=o,A[d+32>>3]=o,A[d+40>>3]=0,A[d+48>>3]=o,A[d+56>>3]=g,A[d+64>>3]=0,A[d+72>>3]=g,A[d+80>>3]=g,A[d+88>>3]=0,e[l>>2]=f,e[l+4>>2]=d,e[l+8>>2]=4,a=(n1(e[s>>2]|0,l,c,r,t)|0)<0,C=h,+(a?1e8:+A[t>>3])}function oo(s,a,c,o,r,t){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0,t=t|0;var h=0,l=0,d=0,f=0,g=0,y=0,_=0;if(_=C,C=C+32|0,f=_+20|0,g=_,h=Pi(r<<4)|0,e[f>>2]=h,h||(ft(3,5472,_+8|0),yt(1)),l=Pi(r*24|0)|0,d=f+4|0,e[d>>2]=l,l||(ft(3,5472,_+16|0),yt(1)),(r|0)>0){y=0;do A[h+(y<<4)>>3]=+A[c+(y<<4)>>3],A[h+(y<<4)+8>>3]=+A[c+(y<<4)+8>>3],A[l+(y*24|0)>>3]=+A[o+(y*24|0)>>3],A[l+(y*24|0)+8>>3]=+A[o+(y*24|0)+8>>3],A[l+(y*24|0)+16>>3]=+A[o+(y*24|0)+16>>3],y=y+1|0;while((y|0)<(r|0))}return e[f+8>>2]=r,(n1(e[s>>2]|0,f,a,t,g)|0)<0&&(A[g>>3]=1e8),li(e[f>>2]|0),li(e[d>>2]|0),C=_,+ +A[g>>3]}function Kn(s,a,c,o,r,t){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0,t=t|0;var h=0,l=0,d=0,f=0,g=0,y=0,_=0;if(_=C,C=C+32|0,f=_+20|0,g=_,h=Pi(r<<4)|0,e[f>>2]=h,h||(ft(3,5472,_+8|0),yt(1)),l=Pi(r*24|0)|0,d=f+4|0,e[d>>2]=l,l||(ft(3,5472,_+16|0),yt(1)),(r|0)>0){y=0;do A[h+(y<<4)>>3]=+A[c+(y<<4)>>3],A[h+(y<<4)+8>>3]=+A[c+(y<<4)+8>>3],A[l+(y*24|0)>>3]=+A[o+(y*24|0)>>3],A[l+(y*24|0)+8>>3]=+A[o+(y*24|0)+8>>3],A[l+(y*24|0)+16>>3]=+A[o+(y*24|0)+16>>3],y=y+1|0;while((y|0)<(r|0))}return e[f+8>>2]=r,(Do(e[s>>2]|0,f,a,t,g)|0)<0&&(A[g>>3]=1e8),li(e[f>>2]|0),li(e[d>>2]|0),C=_,+ +A[g>>3]}function va(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0;var r=0,t=0;r=Pi(2080)|0;e:do if(r){e[r+2068>>2]=c;t:do if(o)t=4;else{switch(c|0){case 5:case 12:case 13:case 14:break;default:{t=4;break t}}e[r+2076>>2]=0}while(!1);do if((t|0)==4)if(t=Pi(Oe(a,s)|0)|0,e[r>>2]=t,t){e[r+2076>>2]=1;break}else{li(r),r=0;break e}while(!1);e[r+2072>>2]=o,e[r+4>>2]=0,e[r+8>>2]=s,e[r+12>>2]=a}while(!1);return r|0}function nl(s){s=s|0,s&&(e[s+2076>>2]|0&&li(e[s>>2]|0),li(e[s+4>>2]|0),li(s))}function sl(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0,l=0,d=0;h=C,C=C+16|0,o=h,c=e[s+2068>>2]|0;e:do switch(c|0){case 5:case 12:case 13:case 14:if(e[s+2072>>2]|0){un(e[s>>2]|0,a|0,Oe(e[s+12>>2]|0,e[s+8>>2]|0)|0)|0,c=0;break e}else{e[s>>2]=a,c=0;break e}default:{if((c&-2|0)==2){if(c=s+8|0,o=s+12|0,Oe(e[o>>2]|0,e[c>>2]|0)|0)r=0,t=0;else{c=0;break e}for(;;)if(M[(e[s>>2]|0)+r>>0]=(((B[a+(t|1)>>0]|0)+(B[a+t>>0]|0)+(B[a+(t|2)>>0]|0)|0)>>>0)/3|0,r=r+1|0,r>>>0>=(Oe(e[o>>2]|0,e[c>>2]|0)|0)>>>0){c=0;break e}else t=t+4|0}if((c&-3|0)==4){if(c=s+8|0,o=s+12|0,Oe(e[o>>2]|0,e[c>>2]|0)|0)r=0,t=0;else{c=0;break e}for(;;)if(M[(e[s>>2]|0)+r>>0]=(((B[a+(t|2)>>0]|0)+(B[a+(t|1)>>0]|0)+(B[a+(t|3)>>0]|0)|0)>>>0)/3|0,r=r+1|0,r>>>0>=(Oe(e[o>>2]|0,e[c>>2]|0)|0)>>>0){c=0;break e}else t=t+4|0}if(c>>>0<2){if(c=s+8|0,o=s+12|0,Oe(e[o>>2]|0,e[c>>2]|0)|0)r=0,t=0;else{c=0;break e}for(;;)if(M[(e[s>>2]|0)+r>>0]=(((B[a+(t+1)>>0]|0)+(B[a+t>>0]|0)+(B[a+(t+2)>>0]|0)|0)>>>0)/3|0,r=r+1|0,r>>>0>=(Oe(e[o>>2]|0,e[c>>2]|0)|0)>>>0){c=0;break e}else t=t+3|0}switch(c|0){case 8:{if(c=s+8|0,o=s+12|0,Oe(e[o>>2]|0,e[c>>2]|0)|0)r=0,t=0;else{c=0;break e}for(;;)if(M[(e[s>>2]|0)+r>>0]=M[a+t>>0]|0,r=r+1|0,r>>>0>=(Oe(e[o>>2]|0,e[c>>2]|0)|0)>>>0){c=0;break}else t=t+2|0;break}case 7:{if(c=s+8|0,o=s+12|0,Oe(e[o>>2]|0,e[c>>2]|0)|0)r=0,t=0;else{c=0;break e}for(;;)if(M[(e[s>>2]|0)+r>>0]=M[a+(t|1)>>0]|0,r=r+1|0,r>>>0>=(Oe(e[o>>2]|0,e[c>>2]|0)|0)>>>0){c=0;break}else t=t+2|0;break}case 9:{if(c=s+8|0,o=s+12|0,Oe(e[o>>2]|0,e[c>>2]|0)|0)r=0,t=0;else{c=0;break e}for(;;)if(d=B[a+t>>0]|0,l=B[a+(t|1)>>0]|0,M[(e[s>>2]|0)+r>>0]=(((d&248)+10+(d<<5&224)+(l>>>3&28)+(l<<3&248)|0)>>>0)/3|0,r=r+1|0,r>>>0>=(Oe(e[o>>2]|0,e[c>>2]|0)|0)>>>0){c=0;break}else t=t+2|0;break}case 10:{if(c=s+8|0,o=s+12|0,Oe(e[o>>2]|0,e[c>>2]|0)|0)r=0,t=0;else{c=0;break e}for(;;)if(l=B[a+t>>0]|0,d=B[a+(t|1)>>0]|0,M[(e[s>>2]|0)+r>>0]=(((l&248)+12+(l<<5&224)+(d>>>3&24)+(d<<2&248)|0)>>>0)/3|0,r=r+1|0,r>>>0>=(Oe(e[o>>2]|0,e[c>>2]|0)|0)>>>0){c=0;break}else t=t+2|0;break}case 11:{if(c=s+8|0,o=s+12|0,Oe(e[o>>2]|0,e[c>>2]|0)|0)r=0,t=0;else{c=0;break e}for(;;)if(d=B[a+t>>0]|0,M[(e[s>>2]|0)+r>>0]=(((d&240)+24+(d<<4&240)+((B[a+(t|1)>>0]|0)&240)|0)>>>0)/3|0,r=r+1|0,r>>>0>=(Oe(e[o>>2]|0,e[c>>2]|0)|0)>>>0){c=0;break}else t=t+2|0;break}default:{ft(3,4361,o),c=-1;break e}}}}while(!1);return C=h,c|0}function Fo(s,a){s=s|0,a=a|0;var c=0,o=0;if((s|0)!=0&(a|0)!=0&&(sl(s,a)|0)>=0)if(gt(s+16|0,0,1024)|0,a=e[s>>2]|0,o=Oe(e[s+12>>2]|0,e[s+8>>2]|0)|0,c=a+o|0,(o|0)>0){do o=s+16+((B[a>>0]|0)<<2)|0,e[o>>2]=(e[o>>2]|0)+1,a=a+1|0;while(a>>>0<c>>>0);a=0}else a=0;else a=-1;return a|0}function ol(s,a){s=s|0,a=a|0;var c=0;if(a=Fo(s,a)|0,(a|0)>=0){a=0,c=0;do a=(e[s+16+(c<<2)>>2]|0)+a|0,e[s+1040+(c<<2)>>2]=a,c=c+1|0;while((c|0)!=256);a=0}return a|0}function Fh(s,a,c,o){s=s|0,a=a|0,c=+c,o=o|0;var r=0,t=0,h=0;if(c<0|c>1)a=-1;else if(a=ol(s,a)|0,(a|0)>=0){for(h=~~(+(Oe(e[s+12>>2]|0,e[s+8>>2]|0)|0)*c)>>>0,a=0;t=a&255,r=e[s+1040+(t<<2)>>2]|0,r>>>0<h>>>0;)a=a+1<<24>>24;if((r|0)==(h|0))do a=a+1<<24>>24;while((e[s+1040+((a&255)<<2)>>2]|0)==(h|0));M[o>>0]=((a&255)+t|0)>>>1,a=0}return a|0}function oc(s,a,c){return s=s|0,a=a|0,c=c|0,Fh(s,a,.5,c)|0}function Oh(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0;if(a=Fo(s,a)|0,(a|0)>=0){a=1,o=0;do o=o+ +((Oe(e[s+16+(a<<2)>>2]|0,a)|0)>>>0),a=a+1|0;while((a|0)!=256);for(d=+(Oe(e[s+12>>2]|0,e[s+8>>2]|0)|0),f=0,t=0,a=0,l=0,g=0;;){if(r=e[s+16+(f<<2)>>2]|0,g=g+ +(r>>>0),g!=0){if(h=d-g,h==0)break;t=t+ +((Oe(f,r)|0)>>>0),y=t/g-(o-t)/h,h=y*(g*h*y),h>l?a=f&255:h=l}else h=l;if((f&255)<<24>>24==-1)break;f=f+1|0,l=h}M[c>>0]=a,a=0}return a|0}function kh(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0;var r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0,J=0,W=0;a=Fo(s,a)|0;do if((a|0)>=0){if(J=s+4|0,e[J>>2]|0)ne=s+8|0,r=s+12|0;else if(a=s+8|0,r=s+12|0,ne=Pi(Oe(e[r>>2]|0,e[a>>2]|0)|0)|0,e[J>>2]=ne,ne)ne=a;else{a=-1;break}if(R=c>>1,F=0-R|0,a=e[r>>2]|0,(a|0)>0){g=(R|0)<(F|0),y=(R|0)<(F|0),_=0;do{if(a=e[ne>>2]|0,(a|0)>0){f=0;do{if(g)t=0,c=0;else for(t=0,d=F,c=0;;){if(h=d+_|0,(h|0)>=0&&(h|0)<(e[r>>2]|0)&&(W=Oe(a,h)|0,!y))for(l=F;h=l+f|0,(h|0)>-1&(h|0)<(a|0)&&(t=t+1|0,c=(B[(e[s>>2]|0)+(W+h)>>0]|0)+c|0),(l|0)<(R|0);)l=l+1|0;if((d|0)<(R|0))d=d+1|0;else break}d=(Oe(a,_)|0)+f|0,M[(e[J>>2]|0)+d>>0]=(c|0)/(t|0)|0,f=f+1|0,a=e[ne>>2]|0}while((f|0)<(a|0))}_=_+1|0,a=e[r>>2]|0}while((_|0)<(a|0))}if(o|0&&(Oe(a,e[ne>>2]|0)|0)>0){a=0;do s=(e[J>>2]|0)+a|0,M[s>>0]=(B[s>>0]|0)+o,a=a+1|0;while((a|0)<(Oe(e[r>>2]|0,e[ne>>2]|0)|0));a=0}else a=0}while(!1);return a|0}function Ea(s,a,c,o,r,t,h,l,d,f){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0,t=t|0,h=h|0,l=l|0,d=d|0,f=f|0;var g=0;e:do switch(r|0){case 0:{switch(t|0){case 1:{if(f){g=Qu(s,a,c,f,d)|0;break e}switch(l|0){case 0:{if(o>>>0<2){g=Rc(s,a,c,h,d)|0;break e}if((o&-2|0)==2){g=Na(s,a,c,h,d)|0;break e}if((o&-3|0)==4){g=Ou(s,a,c,h,d)|0;break e}switch(o|0){case 5:case 12:case 13:case 14:{g=ku(s,a,c,h,d)|0;break e}case 8:{g=Uu(s,a,c,h,d)|0;break e}case 7:{g=Nu(s,a,c,h,d)|0;break e}case 9:{g=Bc(s,a,c,h,d)|0;break e}case 10:{g=Fu(s,a,c,h,d)|0;break e}case 11:{g=Pu(s,a,c,h,d)|0;break e}default:yt(0)}break}case 1:{if(o>>>0<2){g=Du(s,a,c,h,d)|0;break e}if((o&-2|0)==2){g=xl(s,a,c,h,d)|0;break e}if((o&-3|0)==4){g=Sc(s,a,c,h,d)|0;break e}switch(o|0){case 5:case 12:case 13:case 14:{g=_l(s,a,c,h,d)|0;break e}case 8:{g=Ic(s,a,c,h,d)|0;break e}case 7:{g=Tc(s,a,c,h,d)|0;break e}case 9:{g=Lu(s,a,c,h,d)|0;break e}case 10:{g=Mc(s,a,c,h,d)|0;break e}case 11:{g=_c(s,a,c,h,d)|0;break e}default:yt(0)}break}default:yt(0)}break}case 0:{if(f){g=$i(s,a,c,f,d)|0;break e}switch(l|0){case 0:{if(o>>>0<2){g=Ko(s,a,c,h,d)|0;break e}if((o&-2|0)==2){g=mn(s,a,c,h,d)|0;break e}if((o&-3|0)==4){g=y0(s,a,c,h,d)|0;break e}switch(o|0){case 5:case 12:case 13:case 14:{g=ar(s,a,c,h,d)|0;break e}case 8:{g=zt(s,a,c,h,d)|0;break e}case 7:{g=Ha(s,a,c,h,d)|0;break e}case 9:{g=F0(s,a,c,h,d)|0;break e}case 10:{g=Qa(s,a,c,h,d)|0;break e}case 11:{g=Sl(s,a,c,h,d)|0;break e}default:yt(0)}break}case 1:{if(o>>>0<2){g=Hu(s,a,c,h,d)|0;break e}if((o&-2|0)==2){g=Ml(s,a,c,h,d)|0;break e}if((o&-3|0)==4){g=P0(s,a,c,h,d)|0;break e}switch(o|0){case 5:case 12:case 13:case 14:{g=l0(s,a,c,h,d)|0;break e}case 8:{g=mo(s,a,c,h,d)|0;break e}case 7:{g=Dc(s,a,c,h,d)|0;break e}case 9:{g=zu(s,a,c,h,d)|0;break e}case 10:{g=Ua(s,a,c,h,d)|0;break e}case 11:{g=ps(s,a,c,h,d)|0;break e}default:yt(0)}break}default:yt(0)}break}default:yt(0)}break}case 1:{switch(t|0){case 1:{if(f){g=Pa(s,a,c,f,d)|0;break e}switch(l|0){case 0:{if(o>>>0<2){g=Ls(s,a,c,h,d)|0;break e}if((o&-2|0)==2){g=Ys(s,a,c,h,d)|0;break e}if((o&-3|0)==4){g=xc(s,a,c,h,d)|0;break e}switch(o|0){case 5:case 12:case 13:case 14:{g=j0(s,a,c,h,d)|0;break e}case 8:{g=Cn(s,a,c,h,d)|0;break e}case 7:{g=An(s,a,c,h,d)|0;break e}case 9:{g=ds(s,a,c,h,d)|0;break e}case 10:{g=Kr(s,a,c,h,d)|0;break e}case 11:{g=Ks(s,a,c,h,d)|0;break e}default:yt(0)}break}case 1:{if(o>>>0<2){g=Tl(s,a,c,h,d)|0;break e}if((o&-2|0)==2){g=Gu(s,a,c,h,d)|0;break e}if((o&-3|0)==4){g=Pc(s,a,c,h,d)|0;break e}switch(o|0){case 5:case 12:case 13:case 14:{g=Bs(s,a,c,h,d)|0;break e}case 8:{g=Xs(s,a,c,h,d)|0;break e}case 7:{g=Ds(s,a,c,h,d)|0;break e}case 9:{g=Lc(s,a,c,h,d)|0;break e}case 10:{g=za(s,a,c,h,d)|0;break e}case 11:{g=Jo(s,a,c,h,d)|0;break e}default:yt(0)}break}default:yt(0)}break}case 0:{if(f){g=ad(s,a,c,f,d)|0;break e}switch(l|0){case 0:{if(o>>>0<2){g=td(s,a,c,h,d)|0;break e}if((o&-2|0)==2){g=Th(s,a,c,h,d)|0;break e}if((o&-3|0)==4){g=nd(s,a,c,h,d)|0;break e}switch(o|0){case 5:case 12:case 13:case 14:{g=sd(s,a,c,h,d)|0;break e}case 8:{g=Ih(s,a,c,h,d)|0;break e}case 7:{g=od(s,a,c,h,d)|0;break e}case 9:{g=Sh(s,a,c,h,d)|0;break e}case 10:{g=rd(s,a,c,h,d)|0;break e}case 11:{g=id(s,a,c,h,d)|0;break e}default:yt(0)}break}case 1:{if(o>>>0<2){g=Yo(s,a,c,h,d)|0;break e}if((o&-2|0)==2){g=jr(s,a,c,h,d)|0;break e}if((o&-3|0)==4){g=bu(s,a,c,h,d)|0;break e}switch(o|0){case 5:case 12:case 13:case 14:{g=Ao(s,a,c,h,d)|0;break e}case 8:{g=xu(s,a,c,h,d)|0;break e}case 7:{g=Cu(s,a,c,h,d)|0;break e}case 9:{g=Fa(s,a,c,h,d)|0;break e}case 10:{g=ka(s,a,c,h,d)|0;break e}case 11:{g=Oa(s,a,c,h,d)|0;break e}default:yt(0)}break}default:yt(0)}break}default:yt(0)}break}default:yt(0)}while(!1);return g|0}function al(s,a){s=s|0,a=a|0;var c=0;return s|0&&(c=s+7062384|0,(e[c>>2]|0)==0)?(e[c>>2]=a,c=0):c=-1,c|0}function Nh(s){s=s|0;var a=0;return s|0&&(a=s+7062384|0,(e[a>>2]|0)!=0)?(e[a>>2]=0,a=0):a=-1,a|0}function Uh(){return Qh(16,50)|0}function Qh(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0,ne=0;ne=C,C=C+64|0,F=ne+56|0,R=ne+48|0,l=ne+40|0,h=ne+32|0,t=ne+24|0,r=ne+16|0,o=ne+8|0,c=ne;e:do if((s+-16|0)>>>0>48|(a|0)<1)_=0;else if(y=Pi(32)|0,y||(ft(3,5472,c),yt(1)),e[y>>2]=0,e[y+4>>2]=a,e[y+28>>2]=s,g=Pi(a<<2)|0,e[y+8>>2]=g,g||(ft(3,5472,o),yt(1)),c=a<<4,f=Pi(c)|0,e[y+12>>2]=f,f||(ft(3,5472,r),yt(1)),r=Pi(c)|0,d=y+20|0,e[d>>2]=r,r||(ft(3,5472,t),yt(1)),c=a<<5,t=Pi(c)|0,e[y+16>>2]=t,t||(ft(3,5472,h),yt(1)),h=Pi(c)|0,e[y+24>>2]=h,h||(ft(3,5472,l),yt(1)),o=Oe(s,s)|0,c=o*12|0,o=o<<2,(a|0)>0){s=0;t:for(;;){for(e[g+(s<<2)>>2]=0,r=s<<2,h=0;!((h|0)>=4);){if(l=Pi(c)|0,t=h+r|0,e[f+(t<<2)>>2]=l,!l){c=18;break t}if(l=Pi(o)|0,e[(e[d>>2]|0)+(t<<2)>>2]=l,l)h=h+1|0;else{c=20;break t}}if(s=s+1|0,(s|0)>=(a|0)){_=y;break e}}(c|0)==18?(ft(3,5472,R),yt(1)):(c|0)==20&&(ft(3,5472,F),yt(1))}else _=y;while(!1);return C=ne,_|0}function ll(s){s=s|0;var a=0,c=0,o=0,r=0,t=0,h=0,l=0;if(!s)a=-1;else{if(a=s+4|0,c=s+8|0,o=s+12|0,r=s+20|0,(e[a>>2]|0)>0){t=0;do e[(e[c>>2]|0)+(t<<2)>>2]|0&&$c(s,t)|0,h=t<<2,li(e[(e[o>>2]|0)+(h<<2)>>2]|0),li(e[(e[r>>2]|0)+(h<<2)>>2]|0),l=1+h|0,li(e[(e[o>>2]|0)+(l<<2)>>2]|0),li(e[(e[r>>2]|0)+(l<<2)>>2]|0),l=2+h|0,li(e[(e[o>>2]|0)+(l<<2)>>2]|0),li(e[(e[r>>2]|0)+(l<<2)>>2]|0),h=3+h|0,li(e[(e[o>>2]|0)+(h<<2)>>2]|0),li(e[(e[r>>2]|0)+(h<<2)>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0))}li(s),a=0}return a|0}function Hh(s,a,c,o,r,t,h,l,d,f,g,y,_,R,F,ne,J,W,q){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0,t=t|0,h=h|0,l=l|0,d=d|0,f=+f,g=g|0,y=y|0,_=_|0,R=R|0,F=F|0,ne=ne|0,J=J|0,W=W|0,q=q|0;var ie=0,ae=0,se=0,X=0,U=0,Ae=0,We=0,Ze=0,nt=0,lt=0,Ye=0,Qt=0,Et=0,Ft=0;Ft=C,C=C+12448|0,se=Ft+12440|0,ae=Ft+8|0,Qt=Ft,Ye=Ft+12312|0,Et=Ft+24|0;do if((c+-2|0)>>>0<3){if((J|0)!=2830){if(ie=J&255,(Io(a,2,ie,ie*3|0,o,r,t,h,l,d,f,Et)|0)<0){e[R>>2]=-1,ie=-6;break}if(ie=W1(Et,ie,R,F,ne,J,W)|0,!q)break;e[q>>2]=0,e[q+4>>2]=0;break}if((Io(a,2,14,42,o,r,t,h,l,d,.875,Et)|0)<0){e[R>>2]=-1,ie=-6;break}e[ae>>2]=0,e[ae+4>>2]=182,e[ae+8>>2]=195,e[ae+12>>2]=13,J=M[Et+(e[ae>>2]|0)>>0]|0,ie=(J&255)>0?J:0,J=(J&255)<255?J:-1,lt=M[Et+(e[ae+4>>2]|0)>>0]|0,ie=(lt&255)>(ie&255)?lt:ie,J=(lt&255)<(J&255)?lt:J,lt=M[Et+(e[ae+8>>2]|0)>>0]|0,ie=(lt&255)>(ie&255)?lt:ie,J=(lt&255)<(J&255)?lt:J,lt=M[Et+(e[ae+12>>2]|0)>>0]|0,ie=((lt&255)>(ie&255)?lt:ie)&255,J=((lt&255)<(J&255)?lt:J)&255;e:do if((ie-J|0)>=30){for(lt=(ie+J|0)>>>1,M[se>>0]=(B[Et+(e[ae>>2]|0)>>0]|0)>>>0<lt>>>0&1,M[se+1>>0]=(B[Et+(e[ae+4>>2]|0)>>0]|0)>>>0<lt>>>0&1,M[se+2>>0]=(B[Et+(e[ae+8>>2]|0)>>0]|0)>>>0<lt>>>0&1,M[se+3>>0]=(B[Et+(e[ae+12>>2]|0)>>0]|0)>>>0<lt>>>0&1,J=0;;){if(ie=J+1|0,(M[se+J>>0]|0)==1&&(M[se+((ie|0)%4|0)>>0]|0)==1&&!(M[se+((J+2|0)%4|0)>>0]|0)){nt=J;break}if((ie|0)<4)J=ie;else{nt=ie;break}}switch(nt|0){case 4:{e[F>>2]=0,A[ne>>3]=-1,ie=-3,J=0,ae=0;break e}case 0:{ae=119,ie=255,J=0;do{Ae=J+-3|0,X=(J&-2|0)==12,U=J*14|0,se=0;do(se+-3|Ae)>>>0>=8&&(Ze=se&-2,(se|J)>>>0>=2)&&!(X&((Ze|0)==0|(Ze|0)==12))&&(We=(B[Et+(se+U)>>0]|0)-lt|0,M[Ye+ae>>0]=We>>>31,We=(We|0)>-1?We:0-We|0,ae=ae+-1|0,ie=(We|0)<(ie|0)?We:ie),se=se+1|0;while((se|0)!=14);J=J+1|0}while((J|0)!=14);break}case 1:{ae=119,ie=255,J=0;do{for(Ae=J+-3|0,U=J&-2,X=(U|0)==0,U=(U|0)==12,se=13;(se+-3|Ae)>>>0>=8&&(We=(se&-2|0)==12,!(X&We))&&!(U&(se>>>0<2|We))&&(Ze=(B[Et+((se*14|0)+J)>>0]|0)-lt|0,M[Ye+ae>>0]=Ze>>>31,Ze=(Ze|0)>-1?Ze:0-Ze|0,ae=ae+-1|0,ie=(Ze|0)<(ie|0)?Ze:ie),(se|0)>0;)se=se+-1|0;J=J+1|0}while((J|0)!=14);break}case 2:{for(J=119,ie=255,Ae=13;;){for(X=Ae+-3|0,U=Ae>>>0<2|(Ae&-2|0)==12,se=Ae*14|0,ae=13;(ae+-3|X)>>>0>=8&&!((ae|Ae)>>>0<2|U&(ae&-2|0)==12)&&(Ze=(B[Et+(ae+se)>>0]|0)-lt|0,M[Ye+J>>0]=Ze>>>31,Ze=(Ze|0)>-1?Ze:0-Ze|0,J=J+-1|0,ie=(Ze|0)<(ie|0)?Ze:ie),(ae|0)>0;)ae=ae+-1|0;if((Ae|0)>0)Ae=Ae+-1|0;else break}break}case 3:{for(J=119,ie=255,Ae=13;;){U=Ae+-3|0,X=Ae&-2,se=(X|0)==12,X=(X|0)==0,ae=0;do(ae+-3|U)>>>0>=8&&!(se&ae>>>0<2|(ae|Ae)>>>0<2)&&!(X&(ae&-2|0)==12)&&(Ze=(B[Et+((ae*14|0)+Ae)>>0]|0)-lt|0,M[Ye+J>>0]=Ze>>>31,Ze=(Ze|0)>-1?Ze:0-Ze|0,J=J+-1|0,ie=(Ze|0)<(ie|0)?Ze:ie),ae=ae+1|0;while((ae|0)!=14);if((Ae|0)>0)Ae=Ae+-1|0;else break}break}default:ie=255}e[F>>2]=nt,A[ne>>3]=(ie|0)>30?1:+(ie|0)/30,ie=no(2830,0,0,Ye,Qt)|0,(ie|0)<0?(ie=-4,J=0,ae=0):(W&&(e[W>>2]=ie),ae=Qt,ie=0,J=e[ae>>2]|0,ae=e[ae+4>>2]|0)}else e[F>>2]=0,A[ne>>3]=-1,ie=-2,J=0,ae=0;while(!1);if((ie|0)<0){e[R>>2]=-1;break}if((J|0)==-1&(ae|0)==-1){e[R>>2]=-1,ie=-5;break}e[R>>2]=(J&-32768|0)==0&!0?J&32767:0,q&&(ie=q,e[ie>>2]=J,e[ie+4>>2]=ae),ie=0}else ie=1;while(!1);e:do switch(c|0){case 0:case 1:case 3:case 4:{if(!s){e[g>>2]=-1,J=-1;break e}switch(J=s+28|0,ae=e[J>>2]|0,se=ae<<2,c|0){case 0:case 3:if((Io(a,0,ae,se,o,r,t,h,l,d,f,Et)|0)<0){e[g>>2]=-1,J=-6;break e}else{J=cn(s,0,Et,e[J>>2]|0,g,y,_)|0;break e}default:if((Io(a,1,ae,se,o,r,t,h,l,d,f,Et)|0)<0){e[g>>2]=-1,J=-6;break e}else{J=cn(s,1,Et,e[J>>2]|0,g,y,_)|0;break e}}}default:J=1}while(!1);return(ie|0)!=1?(J|0)!=1&&(ie=(J&ie|0)<0?J:0):ie=J,C=Ft,ie|0}function cl(s){s=s|0;var a=0,c=0,o=0,r=0,t=0,h=0,l=0,d=0;d=C,C=C+16|0,a=d+8|0,h=d+4|0,c=d,e[h>>2]=s;do if(s>>>0>=212){t=(s>>>0)/210|0,o=t*210|0,e[c>>2]=s-o,a=(ac(3712,3904,c,a)|0)-3712>>2,r=a,a=(e[3712+(a<<2)>>2]|0)+o|0;e:for(;;){for(o=5;;){if(o>>>0>=47){o=211,l=8;break}if(c=e[3520+(o<<2)>>2]|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=106;break e}if((a|0)==(Oe(s,c)|0))break;o=o+1|0}t:do if((l|0)==8)for(;;){if(l=0,c=(a>>>0)/(o>>>0)|0,c>>>0<o>>>0){l=105;break e}if((a|0)==(Oe(c,o)|0))break t;if(c=o+10|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+12|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+16|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+18|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+22|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+28|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+30|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+36|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+40|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+42|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+46|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+52|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+58|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+60|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+66|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+70|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+72|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+78|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+82|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+88|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+96|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+100|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+102|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+106|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+108|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+112|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+120|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+126|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+130|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+136|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+138|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+142|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+148|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+150|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+156|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+162|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+166|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+168|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+172|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+178|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+180|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+186|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+190|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+192|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+196|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+198|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break t;if(c=o+208|0,s=(a>>>0)/(c>>>0)|0,s>>>0<c>>>0){l=105;break e}if((a|0)==(Oe(s,c)|0))break;o=o+210|0,l=8}while(!1);o=r+1|0,a=(o|0)==48,o=a?0:o,a=(a&1)+t|0,r=o,t=a,a=(e[3712+(o<<2)>>2]|0)+(a*210|0)|0}if((l|0)==105){e[h>>2]=a;break}else if((l|0)==106){e[h>>2]=a;break}}else a=e[(ac(3520,3712,h,a)|0)>>2]|0;while(!1);return C=d,a|0}function ac(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0;var r=0;r=e[c>>2]|0,o=s,c=a-s>>2;e:for(;;){for(;;){if(!c)break e;if(s=(c|0)/2|0,(e[o+(s<<2)>>2]|0)>>>0<r>>>0)break;c=s}o=o+(s+1<<2)|0,c=c+-1-s|0}return o|0}function hl(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0;c>>>0>4294967279&&Dl(s),c>>>0<11?(M[s>>0]=c<<1,s=s+1|0):(r=c+16&-16,o=Wn(r)|0,e[s+8>>2]=o,e[s>>2]=r|1,e[s+4>>2]=c,s=o),un(s|0,a|0,c|0)|0,M[s+c>>0]=0}function ul(s){s=s|0,M[s>>0]&1&&gn(e[s+8>>2]|0)}function zh(){}function Jn(s,a,c,o){return s=s|0,a=a|0,c=c|0,o=o|0,o=a-o-(c>>>0>s>>>0|0)>>>0,Je=o,s-c>>>0|0|0}function gt(s,a,c){s=s|0,a=a|0,c=c|0;var o=0,r=0,t=0,h=0;if(o=s+c|0,(c|0)>=20){if(a=a&255,t=s&3,h=a|a<<8|a<<16|a<<24,r=o&-4,t)for(t=s+4-t|0;(s|0)<(t|0);)M[s>>0]=a,s=s+1|0;for(;(s|0)<(r|0);)e[s>>2]=h,s=s+4|0}for(;(s|0)<(o|0);)M[s>>0]=a,s=s+1|0;return s-c|0}function an(s,a,c){return s=s|0,a=a|0,c=c|0,(c|0)<32?(Je=a<<c|(s&(1<<c)-1<<32-c)>>>32-c,s<<c):(Je=s<<c-32,0)}function Gr(s,a,c,o){return s=s|0,a=a|0,c=c|0,o=o|0,c=s+c>>>0,Je=a+o+(c>>>0<s>>>0|0)>>>0,c|0|0}function ws(s,a,c){return s=s|0,a=a|0,c=c|0,(c|0)<32?(Je=a>>>c,s>>>c|(a&(1<<c)-1)<<32-c):(Je=0,a>>>c-32|0)}function un(s,a,c){s=s|0,a=a|0,c=c|0;var o=0;if((c|0)>=4096)return r0(s|0,a|0,c|0)|0;if(o=s|0,(s&3)==(a&3)){for(;s&3;){if(!c)return o|0;M[s>>0]=M[a>>0]|0,s=s+1|0,a=a+1|0,c=c-1|0}for(;(c|0)>=4;)e[s>>2]=e[a>>2],s=s+4|0,a=a+4|0,c=c-4|0}for(;(c|0)>0;)M[s>>0]=M[a>>0]|0,s=s+1|0,a=a+1|0,c=c-1|0;return o|0}function dl(s,a,c){return s=s|0,a=a|0,c=c|0,(c|0)<32?(Je=a>>c,s>>>c|(a&(1<<c)-1)<<32-c):(Je=(a|0)<0?-1:0,a>>c-32|0)}function bs(s){s=s|0;var a=0;return a=M[G+(s&255)>>0]|0,(a|0)<8?a|0:(a=M[G+(s>>8&255)>>0]|0,(a|0)<8?a+8|0:(a=M[G+(s>>16&255)>>0]|0,(a|0)<8?a+16|0:(M[G+(s>>>24)>>0]|0)+24|0))}function ya(s,a){s=s|0,a=a|0;var c=0,o=0,r=0,t=0;return t=s&65535,r=a&65535,c=Oe(r,t)|0,o=s>>>16,s=(c>>>16)+(Oe(r,o)|0)|0,r=a>>>16,a=Oe(r,t)|0,Je=(s>>>16)+(Oe(r,o)|0)+(((s&65535)+a|0)>>>16)|0,s+a<<16|c&65535|0|0}function gd(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0;var r=0,t=0,h=0,l=0,d=0,f=0;return f=a>>31|((a|0)<0?-1:0)<<1,d=((a|0)<0?-1:0)>>31|((a|0)<0?-1:0)<<1,t=o>>31|((o|0)<0?-1:0)<<1,r=((o|0)<0?-1:0)>>31|((o|0)<0?-1:0)<<1,l=Jn(f^s,d^a,f,d)|0,h=Je,s=t^f,a=r^d,Jn((ao(l,h,Jn(t^c,r^o,t,r)|0,Je,0)|0)^s,Je^a,s,a)|0}function lc(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0;var r=0,t=0,h=0,l=0,d=0,f=0;return r=C,C=C+16|0,l=r|0,h=a>>31|((a|0)<0?-1:0)<<1,t=((a|0)<0?-1:0)>>31|((a|0)<0?-1:0)<<1,f=o>>31|((o|0)<0?-1:0)<<1,d=((o|0)<0?-1:0)>>31|((o|0)<0?-1:0)<<1,s=Jn(h^s,t^a,h,t)|0,a=Je,ao(s,a,Jn(f^c,d^o,f,d)|0,Je,l)|0,o=Jn(e[l>>2]^h,e[l+4>>2]^t,h,t)|0,c=Je,C=r,Je=c,o|0}function c1(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0;var r=0,t=0;return r=s,t=c,c=ya(r,t)|0,s=Je,Je=(Oe(a,t)|0)+(Oe(o,r)|0)+s|s&0,c|0|0|0}function fl(s,a,c,o){return s=s|0,a=a|0,c=c|0,o=o|0,ao(s,a,c,o,0)|0}function Oo(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0;var r=0,t=0;return t=C,C=C+16|0,r=t|0,ao(s,a,c,o,r)|0,C=t,Je=e[r+4>>2]|0,e[r>>2]|0|0}function ao(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0;var t=0,h=0,l=0,d=0,f=0,g=0,y=0,_=0,R=0,F=0;if(g=s,d=a,f=d,h=c,_=o,l=_,!f)return t=(r|0)!=0,l?t?(e[r>>2]=s|0,e[r+4>>2]=a&0,_=0,r=0,Je=_,r|0):(_=0,r=0,Je=_,r|0):(t&&(e[r>>2]=(g>>>0)%(h>>>0),e[r+4>>2]=0),_=0,r=(g>>>0)/(h>>>0)>>>0,Je=_,r|0);t=(l|0)==0;do if(h){if(!t){if(t=(Ee(l|0)|0)-(Ee(f|0)|0)|0,t>>>0<=31){y=t+1|0,l=31-t|0,a=t-31>>31,h=y,s=g>>>(y>>>0)&a|f<<l,a=f>>>(y>>>0)&a,t=0,l=g<<l;break}return r?(e[r>>2]=s|0,e[r+4>>2]=d|a&0,_=0,r=0,Je=_,r|0):(_=0,r=0,Je=_,r|0)}if(t=h-1|0,t&h){l=(Ee(h|0)|0)+33-(Ee(f|0)|0)|0,F=64-l|0,y=32-l|0,d=y>>31,R=l-32|0,a=R>>31,h=l,s=y-1>>31&f>>>(R>>>0)|(f<<y|g>>>(l>>>0))&a,a=a&f>>>(l>>>0),t=g<<F&d,l=(f<<F|g>>>(R>>>0))&d|g<<y&l-33>>31;break}return r&&(e[r>>2]=t&g,e[r+4>>2]=0),(h|0)==1?(R=d|a&0,F=s|0|0,Je=R,F|0):(F=bs(h|0)|0,R=f>>>(F>>>0)|0,F=f<<32-F|g>>>(F>>>0)|0,Je=R,F|0)}else{if(t)return r&&(e[r>>2]=(f>>>0)%(h>>>0),e[r+4>>2]=0),R=0,F=(f>>>0)/(h>>>0)>>>0,Je=R,F|0;if(!g)return r&&(e[r>>2]=0,e[r+4>>2]=(f>>>0)%(l>>>0)),R=0,F=(f>>>0)/(l>>>0)>>>0,Je=R,F|0;if(t=l-1|0,!(t&l))return r&&(e[r>>2]=s|0,e[r+4>>2]=t&f|a&0),R=0,F=f>>>((bs(l|0)|0)>>>0),Je=R,F|0;if(t=(Ee(l|0)|0)-(Ee(f|0)|0)|0,t>>>0<=30){a=t+1|0,l=31-t|0,h=a,s=f<<l|g>>>(a>>>0),a=f>>>(a>>>0),t=0,l=g<<l;break}return r?(e[r>>2]=s|0,e[r+4>>2]=d|a&0,R=0,F=0,Je=R,F|0):(R=0,F=0,Je=R,F|0)}while(!1);if(!h)f=l,d=0,l=0;else{y=c|0|0,g=_|o&0,f=Gr(y|0,g|0,-1,-1)|0,c=Je,d=l,l=0;do o=d,d=t>>>31|d<<1,t=l|t<<1,o=s<<1|o>>>31|0,_=s>>>31|a<<1|0,Jn(f,c,o,_)|0,F=Je,R=F>>31|((F|0)<0?-1:0)<<1,l=R&1,s=Jn(o,_,R&y,(((F|0)<0?-1:0)>>31|((F|0)<0?-1:0)<<1)&g)|0,a=Je,h=h-1|0;while(h|0);f=d,d=0}return h=0,r&&(e[r>>2]=s,e[r+4>>2]=a),R=(t|0)>>>31|(f|h)<<1|(h<<1|t>>>31)&0|d,F=(t<<1|0)&-2|l,Je=R,F|0}function cc(s,a,c,o){return s=s|0,a=a|0,c=c|0,o=o|0,Bn[s&15](a|0,c|0,o|0)|0}function vd(s,a,c,o,r,t){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0,t=t|0,d1[s&3](a|0,c|0,o|0,r|0,t|0)}function Ed(s,a,c){return s=s|0,a=a|0,c=c|0,+fc[s&1](a|0,c|0)}function yd(s,a,c){s=s|0,a=a|0,c=+c,Ca[s&3](a|0,+c)}function wa(s,a){return s=s|0,a=a|0,+f1[s&3](a|0)}function lo(s){return s=s|0,No[s&1]()|0}function Gh(s,a){s=s|0,a=a|0,xa[s&15](a|0)}function wd(s,a,c){s=s|0,a=a|0,c=c|0,Jh[s&7](a|0,c|0)}function Vh(s,a){return s=s|0,a=a|0,El[s&31](a|0)|0}function hc(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0,_a[s&1](a|0,c|0,o|0)}function pl(s){s=s|0,pc[s&0]()}function ko(s,a,c,o){s=s|0,a=a|0,c=c|0,o=+o,Zh[s&3](a|0,c|0,+o)}function h1(s,a,c,o,r){return s=s|0,a=a|0,c=c|0,o=o|0,r=r|0,Cd[s&1](a|0,c|0,o|0,r|0)|0}function uc(s,a,c,o,r,t,h){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0,t=t|0,h=h|0,C0[s&3](a|0,c|0,o|0,r|0,t|0,h|0)}function d0(s,a,c){return s=s|0,a=a|0,c=c|0,z0[s&15](a|0,c|0)|0}function Al(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0,p1[s&3](a|0,c|0,o|0,r|0)}function bd(s,a,c){return s=s|0,a=a|0,c=c|0,_e(0),0}function Wh(s,a,c,o,r){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0,_e(1)}function Un(s,a){return s=s|0,a=a|0,_e(2),0}function ml(s,a){s=s|0,a=+a,_e(3)}function gl(s){return s=s|0,_e(4),0}function qh(){return _e(5),0}function ba(s){s=s|0,_e(6)}function vl(s,a){s=s|0,a=a|0,_e(7)}function Gn(s){return s=s|0,_e(8),0}function Xh(s,a,c){s=s|0,a=a|0,c=c|0,_e(9)}function Hs(){_e(10)}function u1(s,a,c){s=s|0,a=a|0,c=+c,_e(11)}function Yh(s,a,c,o){return s=s|0,a=a|0,c=c|0,o=o|0,_e(12),0}function Kh(s,a,c,o,r,t){s=s|0,a=a|0,c=c|0,o=o|0,r=r|0,t=t|0,_e(13)}function Zn(s,a){return s=s|0,a=a|0,_e(14),0}function dc(s,a,c,o){s=s|0,a=a|0,c=c|0,o=o|0,_e(15)}var Bn=[bd,ea,Zs,aa,Kc,Yc,na,L2,_2,C2,x2,B2,Y2,_h,Xc,Mo],d1=[Wh,Fs,Yn,Xu],fc=[Un,Ch],Ca=[ml,hh,dh,fa],f1=[gl,uh,fh,kn],No=[qh,c2],xa=[ba,Wu,L1,Gc,es,Xn,Ps,P1,$o,jo,l2,yh,H2,$a,zn,ba],Jh=[vl,m2,p2,ph,Nn,d2,w2,q2],El=[Gn,qu,qc,h2,ch,u2,I2,R2,y2,E2,g2,A2,Ah,$1,f2,b2,$l,Gn,Gn,Gn,Gn,Gn,Gn,Gn,Gn,Gn,Gn,Gn,Gn,Gn,Gn,Gn],_a=[Xh,bh],pc=[Hs],Zh=[u1,W2,l1,u1],Cd=[Yh,K2],C0=[Kh,$s,O1,Bl],z0=[Zn,ih,oh,ah,lh,M2,T2,S2,D2,v2,Mh,X2,Zn,Zn,Zn,Zn],p1=[dc,vo,Ga,F1];return{_i64Subtract:Jn,_fflush:to,_i64Add:Gr,_memset:gt,_malloc:Pi,_memcpy:un,___getTypeName:Rl,_bitshift64Lshr:ws,_free:li,___errno_location:Or,_bitshift64Shl:an,__GLOBAL__sub_I_ARToolKitJS_cpp:tl,__GLOBAL__sub_I_bind_cpp:Nc,runPostSets:zh,stackAlloc:_u,stackSave:Mu,stackRestore:Su,establishStackSpace:Tu,setThrew:Iu,setTempRet0:Ru,getTempRet0:Bu,dynCall_iiii:cc,dynCall_viiiii:vd,dynCall_dii:Ed,dynCall_vid:yd,dynCall_di:wa,dynCall_i:lo,dynCall_vi:Gh,dynCall_vii:wd,dynCall_ii:Vh,dynCall_viii:hc,dynCall_v:pl,dynCall_viid:ko,dynCall_iiiii:h1,dynCall_viiiiii:uc,dynCall_iii:d0,dynCall_viiii:Al}}(Module.asmGlobalArg,Module.asmLibraryArg,buffer),_i64Subtract=Module._i64Subtract=asm._i64Subtract,__GLOBAL__sub_I_bind_cpp=Module.__GLOBAL__sub_I_bind_cpp=asm.__GLOBAL__sub_I_bind_cpp,_fflush=Module._fflush=asm._fflush,__GLOBAL__sub_I_ARToolKitJS_cpp=Module.__GLOBAL__sub_I_ARToolKitJS_cpp=asm.__GLOBAL__sub_I_ARToolKitJS_cpp,_i64Add=Module._i64Add=asm._i64Add,_memset=Module._memset=asm._memset,runPostSets=Module.runPostSets=asm.runPostSets,_malloc=Module._malloc=asm._malloc,_memcpy=Module._memcpy=asm._memcpy,___getTypeName=Module.___getTypeName=asm.___getTypeName,_bitshift64Lshr=Module._bitshift64Lshr=asm._bitshift64Lshr,_free=Module._free=asm._free,___errno_location=Module.___errno_location=asm.___errno_location,_bitshift64Shl=Module._bitshift64Shl=asm._bitshift64Shl,dynCall_iiii=Module.dynCall_iiii=asm.dynCall_iiii,dynCall_viiiii=Module.dynCall_viiiii=asm.dynCall_viiiii,dynCall_dii=Module.dynCall_dii=asm.dynCall_dii,dynCall_vid=Module.dynCall_vid=asm.dynCall_vid,dynCall_di=Module.dynCall_di=asm.dynCall_di,dynCall_i=Module.dynCall_i=asm.dynCall_i,dynCall_vi=Module.dynCall_vi=asm.dynCall_vi,dynCall_vii=Module.dynCall_vii=asm.dynCall_vii,dynCall_ii=Module.dynCall_ii=asm.dynCall_ii,dynCall_viii=Module.dynCall_viii=asm.dynCall_viii,dynCall_v=Module.dynCall_v=asm.dynCall_v,dynCall_viid=Module.dynCall_viid=asm.dynCall_viid,dynCall_iiiii=Module.dynCall_iiiii=asm.dynCall_iiiii,dynCall_viiiiii=Module.dynCall_viiiiii=asm.dynCall_viiiiii,dynCall_iii=Module.dynCall_iii=asm.dynCall_iii,dynCall_viiii=Module.dynCall_viiii=asm.dynCall_viiii;Runtime.stackAlloc=asm.stackAlloc,Runtime.stackSave=asm.stackSave,Runtime.stackRestore=asm.stackRestore,Runtime.establishStackSpace=asm.establishStackSpace,Runtime.setTempRet0=asm.setTempRet0,Runtime.getTempRet0=asm.getTempRet0;function ExitStatus(x){this.name="ExitStatus",this.message="Program terminated with exit("+x+")",this.status=x}ExitStatus.prototype=new Error,ExitStatus.prototype.constructor=ExitStatus;var initialStackTop,preloadStartTime=null,calledMain=!1;dependenciesFulfilled=function x(){Module.calledRun||run(),Module.calledRun||(dependenciesFulfilled=x)},Module.callMain=Module.callMain=function x(T){assert(runDependencies==0,"cannot call main when async dependencies remain! (listen on __ATMAIN__)"),assert(__ATPRERUN__.length==0,"cannot call main when preRun functions remain to be called"),T=T||[],ensureInitRuntime();var O=T.length+1;function M(){for(var N=0;N<3;N++)E.push(0)}var E=[allocate(intArrayFromString(Module.thisProgram),"i8",ALLOC_NORMAL)];M();for(var e=0;e<O-1;e=e+1)E.push(allocate(intArrayFromString(T[e]),"i8",ALLOC_NORMAL)),M();E.push(0),E=allocate(E,"i32",ALLOC_NORMAL);try{var B=Module._main(O,E,0);exit(B,!0)}catch(N){if(N instanceof ExitStatus)return;if(N=="SimulateInfiniteLoop"){Module.noExitRuntime=!0;return}else throw N&&typeof N=="object"&&N.stack&&Module.printErr("exception thrown: "+[N,N.stack]),N}finally{calledMain=!0}};function run(x){if(x=x||Module.arguments,preloadStartTime===null&&(preloadStartTime=Date.now()),runDependencies>0||(preRun(),runDependencies>0)||Module.calledRun)return;function T(){Module.calledRun||(Module.calledRun=!0,!ABORT&&(ensureInitRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),Module._main&&shouldRunNow&&Module.callMain(x),postRun()))}Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),T()},1)):T()}Module.run=Module.run=run;function exit(x,T){if(!(T&&Module.noExitRuntime))throw Module.noExitRuntime||(ABORT=!0,EXITSTATUS=x,STACKTOP=initialStackTop,exitRuntime(),Module.onExit&&Module.onExit(x)),ENVIRONMENT_IS_NODE?(process.stdout.once("drain",function(){process.exit(x)}),console.log(" "),setTimeout(function(){process.exit(x)},500)):ENVIRONMENT_IS_SHELL&&typeof quit=="function"&&quit(x),new ExitStatus(x)}Module.exit=Module.exit=exit;var abortDecorators=[];function abort(x){x!==void 0?(Module.print(x),Module.printErr(x),x=JSON.stringify(x)):x="",ABORT=!0,EXITSTATUS=1;var T=`
If this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.`,O="abort("+x+") at "+stackTrace()+T;throw abortDecorators&&abortDecorators.forEach(function(M){O=M(O,x)}),O}if(Module.abort=Module.abort=abort,Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run(),function(){"use strict";var x=function(k,K,Z){var ee,he=k,ue=K;if(this.orientation="landscape",this.listeners={},typeof k!="number"){var ve=k;Z=K,he=ve.videoWidth||ve.width,ue=ve.videoHeight||ve.height,this.image=ve}if(this.defaultMarkerWidth=1,this.patternMarkers={},this.barcodeMarkers={},this.transform_mat=new Float32Array(16),this.canvas=document.createElement("canvas"),this.canvas.width=he,this.canvas.height=ue,this.ctx=this.canvas.getContext("2d"),this.videoWidth=he,this.videoHeight=ue,typeof Z=="string"){var be=this;this.cameraParam=new T(Z,function(){be._initialize()},function(Te){console.error("ARController: Failed to load ARCameraParam",Te)})}else this.cameraParam=Z,this._initialize()};x.prototype.dispose=function(){O.teardown(this.id);for(var k in this)this[k]=null},x.prototype.process=function(k){this.detectMarker(k);var K=this.getMarkerNum(),Z,ee;for(Z in this.patternMarkers)ee=this.patternMarkers[Z],ee.inPrevious=ee.inCurrent,ee.inCurrent=!1;for(Z in this.barcodeMarkers)ee=this.barcodeMarkers[Z],ee.inPrevious=ee.inCurrent,ee.inCurrent=!1;for(var he=0;he<K;he++){var ue=this.getMarker(he),ve=O.UNKNOWN_MARKER,be=this.trackPatternMarkerId(-1);ue.idPatt>-1&&(ue.id===ue.idPatt||ue.idMatrix===-1)?(be=this.trackPatternMarkerId(ue.idPatt),ve=O.PATTERN_MARKER,ue.dir!==ue.dirPatt&&this.setMarkerInfoDir(he,ue.dirPatt)):ue.idMatrix>-1&&(be=this.trackBarcodeMarkerId(ue.idMatrix),ve=O.BARCODE_MARKER,ue.dir!==ue.dirMatrix&&this.setMarkerInfoDir(he,ue.dirMatrix)),ve!==O.UNKNOWN_MARKER&&be.inPrevious?this.getTransMatSquareCont(he,be.markerWidth,be.matrix,be.matrix):this.getTransMatSquare(he,be.markerWidth,be.matrix),be.inCurrent=!0,this.transMatToGLMat(be.matrix,this.transform_mat),this.dispatchEvent({name:"getMarker",target:this,data:{index:he,type:ve,marker:ue,matrix:this.transform_mat}})}for(var Te=this.getMultiMarkerCount(),he=0;he<Te;he++){var ye=this.getMultiMarkerPatternCount(he),be=!1;O.getTransMatMultiSquareRobust(this.id,he),this.transMatToGLMat(this.marker_transform_mat,this.transform_mat);for(var De=0;De<ye;De++){var Ce=this.getMultiEachMarker(he,De);if(Ce.visible>=0){be=!0,this.dispatchEvent({name:"getMultiMarker",target:this,data:{multiMarkerId:he,matrix:this.transform_mat}});break}}if(be)for(var De=0;De<ye;De++){var Ce=this.getMultiEachMarker(he,De);this.transMatToGLMat(this.marker_transform_mat,this.transform_mat),this.dispatchEvent({name:"getMultiMarkerSub",target:this,data:{multiMarkerId:he,markerIndex:De,marker:Ce,matrix:this.transform_mat}})}}this._bwpointer&&this.debugDraw()},x.prototype.trackPatternMarkerId=function(k,K){var Z=this.patternMarkers[k];return Z||(this.patternMarkers[k]=Z={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:K||this.defaultMarkerWidth}),K&&(Z.markerWidth=K),Z},x.prototype.trackBarcodeMarkerId=function(k,K){var Z=this.barcodeMarkers[k];return Z||(this.barcodeMarkers[k]=Z={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:K||this.defaultMarkerWidth}),K&&(Z.markerWidth=K),Z},x.prototype.getMultiMarkerCount=function(){return O.getMultiMarkerCount(this.id)},x.prototype.getMultiMarkerPatternCount=function(k){return O.getMultiMarkerNum(this.id,k)},x.prototype.addEventListener=function(k,K){this.listeners[k]||(this.listeners[k]=[]),this.listeners[k].push(K)},x.prototype.removeEventListener=function(k,K){if(this.listeners[k]){var Z=this.listeners[k].indexOf(K);Z>-1&&this.listeners[k].splice(Z,1)}},x.prototype.dispatchEvent=function(k){var K=this.listeners[k.name];if(K)for(var Z=0;Z<K.length;Z++)K[Z].call(this,k)},x.prototype.debugSetup=function(){document.body.appendChild(this.canvas),this.setDebugMode(1),this._bwpointer=this.getProcessingImage()},x.prototype.loadMarker=function(k,K,Z){return O.addMarker(this.id,k,K,Z)},x.prototype.loadMultiMarker=function(k,K,Z){return O.addMultiMarker(this.id,k,K,Z)},x.prototype.getTransMatSquare=function(k,K,Z){return O.getTransMatSquare(this.id,k,K),Z.set(this.marker_transform_mat),Z},x.prototype.getTransMatSquareCont=function(k,K,Z,ee){return this.marker_transform_mat.set(Z),O.getTransMatSquareCont(this.id,k,K),ee.set(this.marker_transform_mat),ee},x.prototype.getTransMatMultiSquare=function(k,K){return O.getTransMatMultiSquare(this.id,k),K.set(this.marker_transform_mat),K},x.prototype.getTransMatMultiSquareRobust=function(k,K){return O.getTransMatMultiSquare(this.id,k),K.set(this.marker_transform_mat),K},x.prototype.transMatToGLMat=function(k,K,Z){return K[0+0*4]=k[0],K[0+1*4]=k[1],K[0+2*4]=k[2],K[0+3*4]=k[3],K[1+0*4]=k[4],K[1+1*4]=k[5],K[1+2*4]=k[6],K[1+3*4]=k[7],K[2+0*4]=k[8],K[2+1*4]=k[9],K[2+2*4]=k[10],K[2+3*4]=k[11],K[3+0*4]=0,K[3+1*4]=0,K[3+2*4]=0,K[3+3*4]=1,Z!=null&&Z!==0&&(K[12]*=Z,K[13]*=Z,K[14]*=Z),K},x.prototype.detectMarker=function(k){return this._copyImageToHeap(k)?O.detectMarker(this.id):-99},x.prototype.getMarkerNum=function(){return O.getMarkerNum(this.id)},x.prototype.getMarker=function(k){if(O.getMarker(this.id,k)===0)return O.markerInfo},x.prototype.setMarkerInfoVertex=function(k,K){for(var Z=0;Z<K.length;Z++)this.marker_transform_mat[Z*2+0]=K[Z][0],this.marker_transform_mat[Z*2+1]=K[Z][1];return O.setMarkerInfoVertex(this.id,k)},x.prototype.cloneMarkerInfo=function(k){return JSON.parse(JSON.stringify(k))},x.prototype.getMultiEachMarker=function(k,K){if(O.getMultiEachMarker(this.id,k,K)===0)return O.multiEachMarkerInfo},x.prototype.getTransformationMatrix=function(){return this.transform_mat},x.prototype.getCameraMatrix=function(){return this.camera_mat},x.prototype.getMarkerTransformationMatrix=function(){return this.marker_transform_mat},x.prototype.setDebugMode=function(k){return O.setDebugMode(this.id,k)},x.prototype.getDebugMode=function(){return O.getDebugMode(this.id)},x.prototype.getProcessingImage=function(){return O.getProcessingImage(this.id)},x.prototype.setLogLevel=function(k){return O.setLogLevel(k)},x.prototype.getLogLevel=function(){return O.getLogLevel()},x.prototype.setMarkerInfoDir=function(k,K){return O.setMarkerInfoDir(this.id,k,K)},x.prototype.setProjectionNearPlane=function(k){return O.setProjectionNearPlane(this.id,k)},x.prototype.getProjectionNearPlane=function(){return O.getProjectionNearPlane(this.id)},x.prototype.setProjectionFarPlane=function(k){return O.setProjectionFarPlane(this.id,k)},x.prototype.getProjectionFarPlane=function(){return O.getProjectionFarPlane(this.id)},x.prototype.setThresholdMode=function(k){return O.setThresholdMode(this.id,k)},x.prototype.getThresholdMode=function(){return O.getThresholdMode(this.id)},x.prototype.setThreshold=function(k){return O.setThreshold(this.id,k)},x.prototype.getThreshold=function(){return O.getThreshold(this.id)},x.prototype.setPatternDetectionMode=function(k){return O.setPatternDetectionMode(this.id,k)},x.prototype.getPatternDetectionMode=function(){return O.getPatternDetectionMode(this.id)},x.prototype.setMatrixCodeType=function(k){return O.setMatrixCodeType(this.id,k)},x.prototype.getMatrixCodeType=function(){return O.getMatrixCodeType(this.id)},x.prototype.setLabelingMode=function(k){return O.setLabelingMode(this.id,k)},x.prototype.getLabelingMode=function(){return O.getLabelingMode(this.id)},x.prototype.setPattRatio=function(k){return O.setPattRatio(this.id,k)},x.prototype.getPattRatio=function(){return O.getPattRatio(this.id)},x.prototype.setImageProcMode=function(k){return O.setImageProcMode(this.id,k)},x.prototype.getImageProcMode=function(){return O.getImageProcMode(this.id)},x.prototype.debugDraw=function(){var k=new Uint8ClampedArray(Module.HEAPU8.buffer,this._bwpointer,this.framesize),K=new ImageData(k,this.canvas.width,this.canvas.height);this.ctx.putImageData(K,0,0);for(var Z=this.getMarkerNum(),ee=0;ee<Z;ee++)this._debugMarker(this.getMarker(ee))},x.prototype._initialize=function(){this.id=O.setup(this.canvas.width,this.canvas.height,this.cameraParam.id);var k=O.frameMalloc;this.framepointer=k.framepointer,this.framesize=k.framesize,this.dataHeap=new Uint8Array(Module.HEAPU8.buffer,this.framepointer,this.framesize),this.camera_mat=new Float64Array(Module.HEAPU8.buffer,k.camera,16),this.marker_transform_mat=new Float64Array(Module.HEAPU8.buffer,k.transform,12),this.setProjectionNearPlane(.1),this.setProjectionFarPlane(1e3);var K=this;setTimeout(function(){K.onload&&K.onload(),K.dispatchEvent({name:"load",target:K})},1)},x.prototype._copyImageToHeap=function(k){if(k||(k=this.image),k.nodeName==="IMG"&&k.width>k.height||k.nodeName==="VIDEO"&&k.videoWidth>k.videoHeight)this.ctx.drawImage(k,0,0,this.canvas.width,this.canvas.height);else{this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);var K=this.canvas.height/this.canvas.width,Z=this.canvas.width*K,ee=this.canvas.height*K,he=(this.canvas.width-ee)/2;this.ctx.drawImage(k,he,0,ee,Z)}var ue=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),ve=ue.data;return this.dataHeap?(this.dataHeap.set(ve),!0):!1},x.prototype._debugMarker=function(k){var K,Z;K=k.vertex;var ee=this.ctx;ee.strokeStyle="red",ee.beginPath(),ee.moveTo(K[0][0],K[0][1]),ee.lineTo(K[1][0],K[1][1]),ee.stroke(),ee.beginPath(),ee.moveTo(K[2][0],K[2][1]),ee.lineTo(K[3][0],K[3][1]),ee.stroke(),ee.strokeStyle="green",ee.beginPath(),ee.lineTo(K[1][0],K[1][1]),ee.lineTo(K[2][0],K[2][1]),ee.stroke(),ee.beginPath(),ee.moveTo(K[3][0],K[3][1]),ee.lineTo(K[0][0],K[0][1]),ee.stroke(),Z=k.pos,ee.beginPath(),ee.arc(Z[0],Z[1],8,0,Math.PI*2),ee.fillStyle="red",ee.fill()},x.getUserMedia=function(k){var K=k.facingMode||"environment",Z=k.onSuccess,ee=k.onError||function(Qe){console.error("ARController.getUserMedia",Qe)},he=document.createElement("video"),ue=function(){this.videoWidth!==0&&Z(he)},ve=!1,be=["touchstart","touchend","touchmove","touchcancel","click","mousedown","mouseup","mousemove","keydown","keyup","keypress","scroll"],Te=function(Qe){ve&&(he.play(),he.paused||be.forEach(function(ot){window.removeEventListener(ot,Te,!0)}))};be.forEach(function(Qe){window.addEventListener(Qe,Te,!0)});var ye=function(Qe){he.addEventListener("loadedmetadata",ue,!1),he.src=window.URL.createObjectURL(Qe),ve=!0,Te()},De={},Ce={};k.width&&(Ce.width=k.width,typeof k.width=="object"?(k.width.max&&(De.maxWidth=k.width.max),k.width.min&&(De.minWidth=k.width.max)):De.maxWidth=k.width),k.height&&(Ce.height=k.height,typeof k.height=="object"?(k.height.max&&(De.maxHeight=k.height.max),k.height.min&&(De.minHeight=k.height.max)):De.maxHeight=k.height),Ce.facingMode=K,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var Re={audio:!1,video:{mandatory:De}};return navigator.getUserMedia?navigator.getUserMedia(Re,ye,ee):ee("navigator.getUserMedia is not supported on your browser"),he},x.getUserMediaARController=function(k){var K={};for(var Z in k)K[Z]=k[Z];var ee=k.onSuccess,he=k.cameraParam;K.onSuccess=function(){new T(he,function(){var ve=this,be=k.maxARVideoSize||Math.max(ue.videoWidth,ue.videoHeight),Te=be/Math.max(ue.videoWidth,ue.videoHeight),ye=Te*ue.videoWidth,De=Te*ue.videoHeight;if(ue.videoWidth<ue.videoHeight){var Ce=ye;ye=De,De=Ce}var Re=new x(ye,De,ve);Re.image=ue,ue.videoWidth<ue.videoHeight?(Re.orientation="portrait",Re.videoWidth=ue.videoHeight,Re.videoHeight=ue.videoWidth):(Re.orientation="landscape",Re.videoWidth=ue.videoWidth,Re.videoHeight=ue.videoHeight),ee(Re,ve)},function(ve){console.error("ARController: Failed to load ARCameraParam",ve)})};var ue=this.getUserMedia(K);return ue};var T=function(k,K,Z){this.id=-1,this._src="",this.complete=!1,this.onload=K,this.onerror=Z,k&&this.load(k)};T.prototype.load=function(k){if(this._src!=="")throw"ARCameraParam: Trying to load camera parameters twice.";if(this._src=k,k){var K=this;O.loadCamera(k,function(Z){K.id=Z,K.complete=!0,K.onload()},function(Z){K.onerror(Z)})}},Object.defineProperty(T.prototype,"src",{set:function(k){this.load(k)},get:function(){return this._src}}),T.prototype.dispose=function(){this.id!==-1&&O.deleteCamera(this.id),this.id=-1,this._src="",this.complete=!1};var O={UNKNOWN_MARKER:-1,PATTERN_MARKER:0,BARCODE_MARKER:1,loadCamera:V,addMarker:B,addMultiMarker:A},M=["setup","teardown","setLogLevel","getLogLevel","setDebugMode","getDebugMode","getProcessingImage","setMarkerInfoDir","setMarkerInfoVertex","getTransMatSquare","getTransMatSquareCont","getTransMatMultiSquare","getTransMatMultiSquareRobust","getMultiMarkerNum","getMultiMarkerCount","detectMarker","getMarkerNum","getMarker","getMultiEachMarker","setProjectionNearPlane","getProjectionNearPlane","setProjectionFarPlane","getProjectionFarPlane","setThresholdMode","getThresholdMode","setThreshold","getThreshold","setPatternDetectionMode","getPatternDetectionMode","setMatrixCodeType","getMatrixCodeType","setLabelingMode","getLabelingMode","setPattRatio","getPattRatio","setImageProcMode","getImageProcMode"];function E(){M.forEach(function(K){O[K]=Module[K]});for(var k in Module)k.match(/^AR/)&&(O[k]=Module[k])}var e=0;function B(k,K,Z){var ee="/marker_"+e++;G(K,ee,function(){var he=Module._addMarker(k,ee);Z&&Z(he)})}function N(k){return String.fromCharCode.apply(String,k)}function Q(k){var K=N(k),Z=K.split(`
`),ee=[],he=0,ue=0;return Z.forEach(function(ve){if(ve=ve.trim(),!(!ve||ve.startsWith("#")))switch(he){case 0:ue=+ve,he=1;return;case 1:ve.match(/^\d+$/)||ee.push(ve);case 2:case 3:case 4:he++;return;case 5:he=1;return}}),ee}var P=0;function A(k,K,Z){var ee="/multi_marker_"+P++;G(K,ee,function(he){var ue=Q(he);function ve(){var Te=Module._addMultiMarker(k,ee),ye=Module.getMultiMarkerNum(k,Te);Z&&Z(Te,ye)}if(!ue.length)return ve();var be=K.split("/").slice(0,-1).join("/");ue=ue.map(function(Te){return Te==="patt.hiro"||Te==="patt.kanji"||Te==="patt2.hiro"||Te==="patt2.kanji"?["http://127.0.0.1:8080/data/data/"+Te,Te]:[be+"/"+Te,Te]}),$(ue,ve)})}var C=0;function V(k,K){var Z="/camera_param_"+C++,ee=function(){var he=Module._loadCamera(Z);K&&K(he)};typeof k=="object"?H(Z,k,ee):k.indexOf(`
`)>-1?z(Z,k,ee):G(k,Z,ee)}function z(k,K,Z){for(var ee=new Uint8Array(K.length),he=0;he<ee.length;he++)ee[he]=K.charCodeAt(he)&255;H(k,ee,Z)}function H(k,K,Z){FS.writeFile(k,K,{encoding:"binary"}),Z(K)}function G(k,K,Z){var ee=new XMLHttpRequest;ee.open("GET",k,!0),ee.responseType="arraybuffer",ee.onload=function(he){var ue=ee.response,ve=new Uint8Array(ue);H(K,ve,Z)},ee.send()}function $(k,K){var Z=k.pop();Z?G(Z[0],Z[1],function(){$(k,K)}):K()}window.artoolkit=O,window.ARController=x,window.ARCameraParam=T,window.Module?E():window.Module={onRuntimeInitialized:function(){E()}}}();var THREEx=THREEx||{};THREEx.ArBaseControls=function(x){this.id=THREEx.ArBaseControls.id++,this.object3d=x,this.object3d.matrixAutoUpdate=!1,this.object3d.visible=!1},THREEx.ArBaseControls.id=0,Object.assign(THREEx.ArBaseControls.prototype,THREE.EventDispatcher.prototype),THREEx.ArBaseControls.prototype.update=function(){console.assert(!1,"you need to implement your own update")},THREEx.ArBaseControls.prototype.name=function(){return console.assert(!1,"you need to implement your own .name()"),"Not yet implemented - name()"};var THREEx=THREEx||{};THREEx.ARClickability=function(x){this._sourceElement=x;var T=parseInt(x.style.width),O=parseInt(x.style.height);this._cameraPicking=new THREE.PerspectiveCamera(42,T/O,.1,100),console.warn("THREEx.ARClickability works only in modelViewMatrix"),console.warn("OBSOLETE OBSOLETE! instead use THREEx.HitTestingPlane or THREEx.HitTestingTango")},THREEx.ARClickability.prototype.onResize=function(){var x=this._sourceElement,T=this._cameraPicking,O=parseInt(x.style.width),M=parseInt(x.style.height);T.aspect=O/M,T.updateProjectionMatrix()},THREEx.ARClickability.prototype.computeIntersects=function(x,T){var O=this._sourceElement,M=this._cameraPicking,E=new THREE.Vector3;E.x=x.layerX/parseInt(O.style.width)*2-1,E.y=-(x.layerY/parseInt(O.style.height))*2+1;var e=new THREE.Raycaster;e.setFromCamera(E,M);var B=e.intersectObjects(T);return B},THREEx.ARClickability.prototype.update=function(){};var THREEx=THREEx||{};THREEx.ArMarkerCloak=function(x){var T=!0,V=new THREE.PlaneGeometry(1.3+.25,1.85+.25,1,8).translate(0,-.3,0),C=new THREE.ShaderMaterial({vertexShader:THREEx.ArMarkerCloak.vertexShader,fragmentShader:THREEx.ArMarkerCloak.fragmentShader,transparent:!0,uniforms:{texture:{value:x},opacity:{value:.5}},defines:{updateInShaderEnabled:T?1:0}}),O=new THREE.Mesh(V,C);O.rotation.x=-Math.PI/2,this.object3d=O;for(var M=-.65,E=.65,e=.65+.1,B=.95+.1,N=[[]],Q=0;Q<O.geometry.faces.length;Q++)N[0][Q]=[],N[0][Q][0]=new THREE.Vector2,N[0][Q][1]=new THREE.Vector2,N[0][Q][2]=new THREE.Vector2;for(var P=0;P<O.geometry.parameters.heightSegments/2;P++)N[0][P*4+0][0].set(M/2+.5,B/2+.5),N[0][P*4+0][1].set(M/2+.5,e/2+.5),N[0][P*4+0][2].set(E/2+.5,B/2+.5),N[0][P*4+1][0].set(M/2+.5,e/2+.5),N[0][P*4+1][1].set(E/2+.5,e/2+.5),N[0][P*4+1][2].set(E/2+.5,B/2+.5),N[0][P*4+2][0].set(M/2+.5,e/2+.5),N[0][P*4+2][1].set(M/2+.5,B/2+.5),N[0][P*4+2][2].set(E/2+.5,e/2+.5),N[0][P*4+3][0].set(M/2+.5,B/2+.5),N[0][P*4+3][1].set(E/2+.5,B/2+.5),N[0][P*4+3][2].set(E/2+.5,e/2+.5);T===!0&&(O.geometry.faceVertexUvs=N,O.geometry.uvsNeedUpdate=!0);var A=[];A.push(new THREE.Vector3(M,B,0)),A.push(new THREE.Vector3(E,B,0)),A.push(new THREE.Vector3(M,e,0)),A.push(new THREE.Vector3(E,e,0));var C=new THREE.MeshNormalMaterial({transparent:!0,opacity:.5,side:THREE.DoubleSide}),V=new THREE.PlaneGeometry(1,1),z=new THREE.Mesh(V,C);this.orthoMesh=z,this.update=function($,k){G($,k),T===!1&&H($,k)};return;function H($,k){var K=new THREE.Vector3;N[0].forEach(function(Z,ee){Z.forEach(function(he,ue){K.x=he.x*2-1,K.y=he.y*2-1,K.z=0,K.applyMatrix4($),K.applyMatrix4(k),K.x/=K.z,K.y/=K.z,K.x=K.x/2+.5,K.y=K.y/2+.5,O.geometry.faceVertexUvs[0][ee][ue].set(K.x,K.y)})}),O.geometry.uvsNeedUpdate=!0}function G($,k){var K=[];A.forEach(function(ee,he){var ue=ee.clone();ue.applyMatrix4($),ue.applyMatrix4(k),ue.x/=ue.z,ue.y/=ue.z,K.push(ue)});for(var Z=0;Z<K.length;Z++)z.geometry.vertices[Z].copy(K[Z]);z.geometry.computeBoundingSphere(),z.geometry.verticesNeedUpdate=!0}},THREEx.ArMarkerCloak.markerSpaceShaderFunction=`
        vec2 transformUvToMarkerSpace(vec2 originalUv){
                vec3 transformedUv;
                // set transformedUv - from UV coord to clip coord
                transformedUv.x = originalUv.x * 2.0 - 1.0;
                transformedUv.y = originalUv.y * 2.0 - 1.0;
                transformedUv.z = 0.0;

		// apply modelViewMatrix and projectionMatrix
                transformedUv = (projectionMatrix * modelViewMatrix * vec4( transformedUv, 1.0 ) ).xyz;

		// apply perspective
		transformedUv.x /= transformedUv.z;
		transformedUv.y /= transformedUv.z;

                // set back from clip coord to Uv coord
                transformedUv.x = transformedUv.x / 2.0 + 0.5;
                transformedUv.y = transformedUv.y / 2.0 + 0.5;

                // return the result
                return transformedUv.xy;
        }`,THREEx.ArMarkerCloak.vertexShader=THREEx.ArMarkerCloak.markerSpaceShaderFunction+`	varying vec2 vUv;

	void main(){
                // pass the UV to the fragment
                #if (updateInShaderEnabled == 1)
		        vUv = transformUvToMarkerSpace(uv);
                #else
		        vUv = uv;
                #endif

                // compute gl_Position
		vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
		gl_Position = projectionMatrix * mvPosition;
	}`,THREEx.ArMarkerCloak.fragmentShader=`
	varying vec2 vUv;
	uniform sampler2D texture;
	uniform float opacity;

	void main(void){
		vec3 color = texture2D( texture, vUv ).rgb;

		gl_FragColor = vec4( color, opacity);
	}`;var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkerControls=THREEx.ArMarkerControls=function(x,T,O){var M=this;THREEx.ArBaseControls.call(this,T),this.context=x,this.parameters={size:1,type:"unknown",patternUrl:null,barcodeValue:null,changeMatrixMode:"modelViewMatrix",minConfidence:.6,smooth:!1,smoothCount:5,smoothTolerance:.01,smoothThreshold:2};var E=["pattern","barcode","unknown"];console.assert(E.indexOf(this.parameters.type)!==-1,"illegal value",this.parameters.type);var E=["modelViewMatrix","cameraTransformMatrix"];console.assert(E.indexOf(this.parameters.changeMatrixMode)!==-1,"illegal value",this.parameters.changeMatrixMode),this.object3d=T,this.object3d.matrixAutoUpdate=!1,this.object3d.visible=!1,e(O);function e(B){if(B!==void 0)for(var N in B){var Q=B[N];if(Q===void 0){console.warn("THREEx.ArMarkerControls: '"+N+"' parameter is undefined.");continue}var P=M.parameters[N];if(P===void 0){console.warn("THREEx.ArMarkerControls: '"+N+"' is not a property of this material.");continue}M.parameters[N]=Q}}this.parameters.smooth&&(this.smoothMatrices=[]),x.addMarker(this),M.context.parameters.trackingBackend==="artoolkit"?this._initArtoolkit():M.context.parameters.trackingBackend==="aruco"?this._arucoPosit=new POS.Posit(this.parameters.size,M.context.arucoContext.canvas.width):M.context.parameters.trackingBackend==="tango"?this._initTango():console.assert(!1)},ARjs.MarkerControls.prototype=Object.create(THREEx.ArBaseControls.prototype),ARjs.MarkerControls.prototype.constructor=THREEx.ArMarkerControls,ARjs.MarkerControls.prototype.dispose=function(){this.context.removeMarker(this)},ARjs.MarkerControls.prototype.updateWithModelViewMatrix=function(x){var T=this.object3d;if(T.visible=!0,this.context.parameters.trackingBackend==="artoolkit"){var O=new THREE.Matrix4().copy(this.context._artoolkitProjectionAxisTransformMatrix);O.multiply(x),x.copy(O)}else this.context.parameters.trackingBackend==="aruco"||this.context.parameters.trackingBackend==="tango"||console.assert(!1);if(this.context.parameters.trackingBackend!=="tango"){var M=new THREE.Matrix4().makeRotationX(Math.PI/2);x.multiply(M)}var E=!1;if(this.parameters.changeMatrixMode==="modelViewMatrix")if(this.parameters.smooth){var e,B,N,Q,P=0;if(this.smoothMatrices.push(x.elements.slice()),this.smoothMatrices.length<this.parameters.smoothCount+1)T.matrix.copy(x);else{this.smoothMatrices.shift(),Q=[];for(B in x.elements){e=0;for(N in this.smoothMatrices)e+=this.smoothMatrices[N][B];Q[B]=e/this.parameters.smoothCount,Math.abs(Q[B]-x.elements[B])>=this.parameters.smoothTolerance&&P++}if(P>=this.parameters.smoothThreshold){for(B in x.elements)x.elements[B]=Q[B];T.matrix.copy(x),E=!0}}}else T.matrix.copy(x);else this.parameters.changeMatrixMode==="cameraTransformMatrix"?T.matrix.getInverse(x):console.assert(!1);return T.matrix.decompose(T.position,T.quaternion,T.scale),this.dispatchEvent({type:"markerFound"}),E},ARjs.MarkerControls.prototype.name=function(){var x="";if(x+=this.parameters.type,this.parameters.type==="pattern"){var T=this.parameters.patternUrl,O=T.replace(/^.*\//g,"");x+=" - "+O}else this.parameters.type==="barcode"?x+=" - "+this.parameters.barcodeValue:console.assert(!1,"no .name() implemented for this marker controls");return x},ARjs.MarkerControls.prototype._initArtoolkit=function(){var x=this,T=null,O=setInterval(function(){var e=x.context.arController;e!==null&&(clearInterval(O),O=null,M())},1e3/50);return;function M(){var e=x.context.arController;console.assert(e!==null),x.parameters.type==="pattern"?e.loadMarker(x.parameters.patternUrl,function(B){T=B,e.trackPatternMarkerId(T,x.parameters.size)}):x.parameters.type==="barcode"?(T=x.parameters.barcodeValue,e.trackBarcodeMarkerId(T,x.parameters.size)):x.parameters.type==="unknown"?T=null:console.log(!1,"invalid marker type",x.parameters.type),e.addEventListener("getMarker",function(B){if(B.data.type===artoolkit.PATTERN_MARKER&&x.parameters.type==="pattern"){if(T===null)return;B.data.marker.idPatt===T&&E(B)}else if(B.data.type===artoolkit.BARCODE_MARKER&&x.parameters.type==="barcode"){if(T===null)return;B.data.marker.idMatrix===T&&E(B)}else B.data.type===artoolkit.UNKNOWN_MARKER&&x.parameters.type==="unknown"&&E(B)})}function E(e){if(!(e.data.type===artoolkit.PATTERN_MARKER&&e.data.marker.cfPatt<x.parameters.minConfidence)&&!(e.data.type===artoolkit.BARCODE_MARKER&&e.data.marker.cfMatt<x.parameters.minConfidence)){var B=new THREE.Matrix4().fromArray(e.data.matrix);x.updateWithModelViewMatrix(B)}}},ARjs.MarkerControls.prototype._initAruco=function(){this._arucoPosit=new POS.Posit(this.parameters.size,_this.context.arucoContext.canvas.width)},ARjs.MarkerControls.prototype._initTango=function(){var x=this;console.log("init tango ArMarkerControls")};var THREEx=THREEx||{};THREEx.ArMarkerHelper=function(x){this.object3d=new THREE.Group;var N=new THREE.AxesHelper;this.object3d.add(N);var T=x.id,O=document.createElement("canvas");O.width=64,O.height=64;var M=O.getContext("2d"),E=new THREE.CanvasTexture(O);M.font="48px monospace",M.fillStyle="rgba(192,192,255, 0.5)",M.fillRect(0,0,O.width,O.height),M.fillStyle="darkblue",M.fillText(T,O.width/4,3*O.height/4),E.needsUpdate=!0;var e=new THREE.PlaneGeometry(1,1),B=new THREE.MeshBasicMaterial({map:E,transparent:!0}),N=new THREE.Mesh(e,B);N.rotation.x=-Math.PI/2,this.object3d.add(N)};var THREEx=THREEx||{};THREEx.ArSmoothedControls=function(x,T){var O=this;THREEx.ArBaseControls.call(this,x),this.object3d.visible=!1,this._lastLerpStepAt=null,this._visibleStartedAt=null,this._unvisibleStartedAt=null,T=T||{},this.parameters={lerpPosition:.8,lerpQuaternion:.2,lerpScale:.7,lerpStepDelay:1/60,minVisibleDelay:0,minUnvisibleDelay:.2},M(T);function M(E){if(E!==void 0)for(var e in E){var B=E[e];if(B===void 0){console.warn("THREEx.ArSmoothedControls: '"+e+"' parameter is undefined.");continue}var N=O.parameters[e];if(N===void 0){console.warn("THREEx.ArSmoothedControls: '"+e+"' is not a property of this material.");continue}O.parameters[e]=B}}},THREEx.ArSmoothedControls.prototype=Object.create(THREEx.ArBaseControls.prototype),THREEx.ArSmoothedControls.prototype.constructor=THREEx.ArSmoothedControls,THREEx.ArSmoothedControls.prototype.update=function(x){var T=this.object3d,O=this.parameters,M=T.visible,E=performance.now()/1e3;if(x.visible===!1&&(this._visibleStartedAt=null),x.visible===!0&&(this._unvisibleStartedAt=null),x.visible===!0&&this._visibleStartedAt===null&&(this._visibleStartedAt=E),x.visible===!1&&this._unvisibleStartedAt===null&&(this._unvisibleStartedAt=E),M===!1&&x.visible===!0){var e=E-this._visibleStartedAt;e>=this.parameters.minVisibleDelay&&(T.visible=!0,P())}if(M===!0&&x.visible===!1){var B=E-this._unvisibleStartedAt;B>=this.parameters.minUnvisibleDelay&&(T.visible=!1)}if(this._lastLerpStepAt===null)A(),this._lastLerpStepAt=E;else for(var N=Math.floor((E-this._lastLerpStepAt)/this.parameters.lerpStepDelay),Q=0;Q<N;Q++)A(),this._lastLerpStepAt+=this.parameters.lerpStepDelay;this.object3d.updateMatrix(),M===!1&&T.visible===!0&&this.dispatchEvent({type:"becameVisible"}),M===!0&&T.visible===!1&&this.dispatchEvent({type:"becameUnVisible"});return;function P(){T.position.copy(x.position),T.quaternion.copy(x.quaternion),T.scale.copy(x.scale)}function A(){T.position.lerp(x.position,O.lerpPosition),T.quaternion.slerp(x.quaternion,O.lerpQuaternion),T.scale.lerp(x.scale,O.lerpScale)}};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.Context=THREEx.ArToolkitContext=function(x){var T=this;T._updatedAt=null,this.parameters={trackingBackend:"artoolkit",debug:!1,detectionMode:"mono",matrixCodeType:"3x3",cameraParametersUrl:ARjs.Context.baseURL+"parameters/camera_para.dat",maxDetectionRate:60,canvasWidth:640,canvasHeight:480,patternRatio:.5,labelingMode:"black_region",imageSmoothingEnabled:!1},console.assert(["artoolkit","aruco"].indexOf(this.parameters.trackingBackend)!==-1,"invalid parameter trackingBackend",this.parameters.trackingBackend),console.assert(["color","color_and_matrix","mono","mono_and_matrix"].indexOf(this.parameters.detectionMode)!==-1,"invalid parameter detectionMode",this.parameters.detectionMode),console.assert(["black_region","white_region"].indexOf(this.parameters.labelingMode)!==-1,"invalid parameter labelingMode",this.parameters.labelingMode),this.arController=null,this.arucoContext=null,T.initialized=!1,this._arMarkersControls=[],O(x);function O(M){if(M!==void 0)for(var E in M){var e=M[E];if(e===void 0){console.warn("THREEx.ArToolkitContext: '"+E+"' parameter is undefined.");continue}var B=T.parameters[E];if(B===void 0){console.warn("THREEx.ArToolkitContext: '"+E+"' is not a property of this material.");continue}T.parameters[E]=e}}},Object.assign(ARjs.Context.prototype,THREE.EventDispatcher.prototype),ARjs.Context.baseURL="https://jeromeetienne.github.io/AR.js/three.js/",ARjs.Context.REVISION="2.2.2",ARjs.Context.createDefaultCamera=function(x){if(console.assert(!1,"use ARjs.Utils.createDefaultCamera instead"),x==="artoolkit")var T=new THREE.Camera;else if(x==="aruco")var T=new THREE.PerspectiveCamera(42,renderer.domElement.width/renderer.domElement.height,.01,100);else console.assert(!1);return T},ARjs.Context.prototype.init=function(x){var T=this;this.parameters.trackingBackend==="artoolkit"?this._initArtoolkit(O):this.parameters.trackingBackend==="aruco"?this._initAruco(O):console.assert(!1);return;function O(){T.dispatchEvent({type:"initialized"}),T.initialized=!0,x&&x()}},ARjs.Context.prototype.update=function(x){if(this.parameters.trackingBackend==="artoolkit"&&this.arController===null)return!1;var T=performance.now();return this._updatedAt!==null&&T-this._updatedAt<1e3/this.parameters.maxDetectionRate?!1:(this._updatedAt=T,this._arMarkersControls.forEach(function(O){O.object3d.visible=!1}),this.parameters.trackingBackend==="artoolkit"?this._updateArtoolkit(x):this.parameters.trackingBackend==="aruco"?this._updateAruco(x):console.assert(!1),this.dispatchEvent({type:"sourceProcessed"}),!0)},ARjs.Context.prototype.addMarker=function(x){console.assert(x instanceof THREEx.ArMarkerControls),this._arMarkersControls.push(x)},ARjs.Context.prototype.removeMarker=function(x){console.assert(x instanceof THREEx.ArMarkerControls);var T=this.arMarkerControlss.indexOf(artoolkitMarker);console.assert(T!==T),this._arMarkersControls.splice(T,1)},ARjs.Context.prototype._initArtoolkit=function(x){var T=this;this._artoolkitProjectionAxisTransformMatrix=new THREE.Matrix4,this._artoolkitProjectionAxisTransformMatrix.multiply(new THREE.Matrix4().makeRotationY(Math.PI)),this._artoolkitProjectionAxisTransformMatrix.multiply(new THREE.Matrix4().makeRotationZ(Math.PI));var O=new ARCameraParam(T.parameters.cameraParametersUrl,function(){var M=new ARController(T.parameters.canvasWidth,T.parameters.canvasHeight,O);T.arController=M,M.ctx.mozImageSmoothingEnabled=T.parameters.imageSmoothingEnabled,M.ctx.webkitImageSmoothingEnabled=T.parameters.imageSmoothingEnabled,M.ctx.msImageSmoothingEnabled=T.parameters.imageSmoothingEnabled,M.ctx.imageSmoothingEnabled=T.parameters.imageSmoothingEnabled,T.parameters.debug===!0&&(M.debugSetup(),M.canvas.style.position="absolute",M.canvas.style.top="0px",M.canvas.style.opacity="0.6",M.canvas.style.pointerEvents="none",M.canvas.style.zIndex="-1");var E={color:artoolkit.AR_TEMPLATE_MATCHING_COLOR,color_and_matrix:artoolkit.AR_TEMPLATE_MATCHING_COLOR_AND_MATRIX,mono:artoolkit.AR_TEMPLATE_MATCHING_MONO,mono_and_matrix:artoolkit.AR_TEMPLATE_MATCHING_MONO_AND_MATRIX},e=E[T.parameters.detectionMode];console.assert(e!==void 0),M.setPatternDetectionMode(e);var B={"3x3":artoolkit.AR_MATRIX_CODE_3x3,"3x3_HAMMING63":artoolkit.AR_MATRIX_CODE_3x3_HAMMING63,"3x3_PARITY65":artoolkit.AR_MATRIX_CODE_3x3_PARITY65,"4x4":artoolkit.AR_MATRIX_CODE_4x4,"4x4_BCH_13_9_3":artoolkit.AR_MATRIX_CODE_4x4_BCH_13_9_3,"4x4_BCH_13_5_5":artoolkit.AR_MATRIX_CODE_4x4_BCH_13_5_5},N=B[T.parameters.matrixCodeType];console.assert(N!==void 0),M.setMatrixCodeType(N),M.setPattRatio(T.parameters.patternRatio);var Q={black_region:artoolkit.AR_LABELING_BLACK_REGION,white_region:artoolkit.AR_LABELING_WHITE_REGION},P=Q[T.parameters.labelingMode];console.assert(P!==void 0),M.setLabelingMode(P),x()});return this},ARjs.Context.prototype.getProjectionMatrix=function(x){console.assert(this.parameters.trackingBackend==="artoolkit"),console.assert(this.arController,"arController MUST be initialized to call this function");var T=this.arController.getCameraMatrix(),O=new THREE.Matrix4().fromArray(T);return O.multiply(this._artoolkitProjectionAxisTransformMatrix),O},ARjs.Context.prototype._updateArtoolkit=function(x){this.arController.process(x)},ARjs.Context.prototype._initAruco=function(x){this.arucoContext=new THREEx.ArucoContext,this.arucoContext.canvas.width=this.parameters.canvasWidth,this.arucoContext.canvas.height=this.parameters.canvasHeight;var T=this.arucoContext.canvas.getContext("2d");T.webkitImageSmoothingEnabled=this.parameters.imageSmoothingEnabled,T.msImageSmoothingEnabled=this.parameters.imageSmoothingEnabled,T.imageSmoothingEnabled=this.parameters.imageSmoothingEnabled,setTimeout(function(){x()},0)},ARjs.Context.prototype._updateAruco=function(x){var T=this,O=this._arMarkersControls,M=this.arucoContext.detect(x);M.forEach(function(E){for(var e=null,B=0;B<O.length;B++)if(console.assert(O[B].parameters.type==="barcode"),O[B].parameters.barcodeValue===E.id){e=O[B];break}if(e!==null){var N=new THREE.Object3D;T.arucoContext.updateObject3D(N,e._arucoPosit,e.parameters.size,E),N.updateMatrix(),e.updateWithModelViewMatrix(N.matrix)}})};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.Profile=THREEx.ArToolkitProfile=function(){this.reset(),this.performance("default")},ARjs.Profile.prototype._guessPerformanceLabel=function(){var x=!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i));return x===!0?"phone-normal":"desktop-normal"},ARjs.Profile.prototype.reset=function(){return this.sourceParameters={sourceType:"webcam"},this.contextParameters={cameraParametersUrl:THREEx.ArToolkitContext.baseURL+"../data/data/camera_para.dat",detectionMode:"mono",labelingMode:"black_region"},this.defaultMarkerParameters={type:"pattern",patternUrl:THREEx.ArToolkitContext.baseURL+"../data/data/patt.hiro",changeMatrixMode:"modelViewMatrix"},this},ARjs.Profile.prototype.performance=function(x){return x==="default"&&(x=this._guessPerformanceLabel()),x==="desktop-fast"?(this.contextParameters.canvasWidth=640*3,this.contextParameters.canvasHeight=480*3,this.contextParameters.maxDetectionRate=30):x==="desktop-normal"?(this.contextParameters.canvasWidth=640,this.contextParameters.canvasHeight=480,this.contextParameters.maxDetectionRate=60):x==="phone-normal"?(this.contextParameters.canvasWidth=80*4,this.contextParameters.canvasHeight=60*4,this.contextParameters.maxDetectionRate=30):x==="phone-slow"?(this.contextParameters.canvasWidth=80*3,this.contextParameters.canvasHeight=60*3,this.contextParameters.maxDetectionRate=30):console.assert(!1,"unknonwn label "+x),this},ARjs.Profile.prototype.defaultMarker=function(x){return x=x||this.contextParameters.trackingBackend,x==="artoolkit"?(this.contextParameters.detectionMode="mono",this.defaultMarkerParameters.type="pattern",this.defaultMarkerParameters.patternUrl=THREEx.ArToolkitContext.baseURL+"../data/data/patt.hiro",this.contextParameters.labelingMode="black_region"):x==="aruco"?(this.contextParameters.detectionMode="mono",this.defaultMarkerParameters.type="barcode",this.defaultMarkerParameters.barcodeValue=1001,this.contextParameters.labelingMode="black_region"):console.assert(!1),this},ARjs.Profile.prototype.sourceWebcam=function(){return this.sourceParameters.sourceType="webcam",delete this.sourceParameters.sourceUrl,this},ARjs.Profile.prototype.sourceVideo=function(x){return this.sourceParameters.sourceType="video",this.sourceParameters.sourceUrl=x,this},ARjs.Profile.prototype.sourceImage=function(x){return this.sourceParameters.sourceType="image",this.sourceParameters.sourceUrl=x,this},ARjs.Profile.prototype.trackingBackend=function(x){return console.warn("stop profile.trackingBackend() obsolete function. use .trackingMethod instead"),this.contextParameters.trackingBackend=x,this},ARjs.Profile.prototype.changeMatrixMode=function(x){return this.defaultMarkerParameters.changeMatrixMode=x,this},ARjs.Profile.prototype.trackingMethod=function(x){var T=ARjs.Utils.parseTrackingMethod(x);return this.defaultMarkerParameters.markersAreaEnabled=T.markersAreaEnabled,this.contextParameters.trackingBackend=T.trackingBackend,this},ARjs.Profile.prototype.checkIfValid=function(){return this};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.Source=THREEx.ArToolkitSource=function(x){var T=this;this.ready=!1,this.domElement=null,this.parameters={sourceType:"webcam",sourceUrl:null,deviceId:null,sourceWidth:640,sourceHeight:480,displayWidth:640,displayHeight:480},O(x);function O(M){if(M!==void 0)for(var E in M){var e=M[E];if(e===void 0){console.warn("THREEx.ArToolkitSource: '"+E+"' parameter is undefined.");continue}var B=T.parameters[E];if(B===void 0){console.warn("THREEx.ArToolkitSource: '"+E+"' is not a property of this material.");continue}T.parameters[E]=e}}},ARjs.Source.prototype.init=function(x,T){var O=this;if(this.parameters.sourceType==="image")var M=this._initSourceImage(E,T);else if(this.parameters.sourceType==="video")var M=this._initSourceVideo(E,T);else if(this.parameters.sourceType==="webcam")var M=this._initSourceWebcam(E,T);else console.assert(!1);return this.domElement=M,this.domElement.style.position="absolute",this.domElement.style.top="0px",this.domElement.style.left="0px",this.domElement.style.zIndex="-2",this.domElement.setAttribute("id","arjs-video"),this;function E(){document.body.appendChild(O.domElement),window.dispatchEvent(new CustomEvent("arjs-video-loaded",{detail:{component:document.querySelector("#arjs-video")}})),O.ready=!0,x&&x()}},ARjs.Source.prototype._initSourceImage=function(x){var T=document.createElement("img");return T.src=this.parameters.sourceUrl,T.width=this.parameters.sourceWidth,T.height=this.parameters.sourceHeight,T.style.width=this.parameters.displayWidth+"px",T.style.height=this.parameters.displayHeight+"px",T.onload=x,T},ARjs.Source.prototype._initSourceVideo=function(x){var T=document.createElement("video");return T.src=this.parameters.sourceUrl,T.style.objectFit="initial",T.autoplay=!0,T.webkitPlaysinline=!0,T.controls=!1,T.loop=!0,T.muted=!0,document.body.addEventListener("click",function O(){document.body.removeEventListener("click",O),T.play()}),T.width=this.parameters.sourceWidth,T.height=this.parameters.sourceHeight,T.style.width=this.parameters.displayWidth+"px",T.style.height=this.parameters.displayHeight+"px",T.onloadeddata=x,T},ARjs.Source.prototype._initSourceWebcam=function(x,T){var O=this;T=T||function(e){alert(`Webcam Error
Name: `+e.name+`
Message: `+e.message);var B=new CustomEvent("camera-error",{error:e});window.dispatchEvent(B)};var M=document.createElement("video");if(M.setAttribute("autoplay",""),M.setAttribute("muted",""),M.setAttribute("playsinline",""),M.style.width=this.parameters.displayWidth+"px",M.style.height=this.parameters.displayHeight+"px",navigator.mediaDevices===void 0||navigator.mediaDevices.enumerateDevices===void 0||navigator.mediaDevices.getUserMedia===void 0){if(navigator.mediaDevices===void 0)var E="navigator.mediaDevices";else if(navigator.mediaDevices.enumerateDevices===void 0)var E="navigator.mediaDevices.enumerateDevices";else if(navigator.mediaDevices.getUserMedia===void 0)var E="navigator.mediaDevices.getUserMedia";else console.assert(!1);return T({name:"",message:"WebRTC issue-! "+E+" not present in your browser"}),null}return navigator.mediaDevices.enumerateDevices().then(function(e){var B={audio:!1,video:{facingMode:"environment",width:{ideal:O.parameters.sourceWidth},height:{ideal:O.parameters.sourceHeight}}};O.parameters.deviceId!==null&&(B.video.deviceId={exact:O.parameters.deviceId}),navigator.mediaDevices.getUserMedia(B).then(function(Q){M.srcObject=Q;var P=new CustomEvent("camera-init",{stream:Q});window.dispatchEvent(P),document.body.addEventListener("click",function(){M.play()}),x()}).catch(function(N){T({name:N.name,message:N.message})})}).catch(function(e){T({message:e.message})}),M},ARjs.Source.prototype.hasMobileTorch=function(){var x=arToolkitSource.domElement.srcObject;if(!(x instanceof MediaStream))return!1;this._currentTorchStatus===void 0&&(this._currentTorchStatus=!1);var T=x.getVideoTracks()[0];if(T.getCapabilities===void 0)return!1;var O=T.getCapabilities();return!!O.torch},ARjs.Source.prototype.toggleMobileTorch=function(){console.assert(this.hasMobileTorch()===!0);var x=arToolkitSource.domElement.srcObject;if(!(x instanceof MediaStream)){alert("enabling mobile torch is available only on webcam");return}this._currentTorchStatus===void 0&&(this._currentTorchStatus=!1);var T=x.getVideoTracks()[0],O=T.getCapabilities();if(!O.torch){alert("no mobile torch is available on your camera");return}this._currentTorchStatus=this._currentTorchStatus===!1,T.applyConstraints({advanced:[{torch:this._currentTorchStatus}]}).catch(function(M){console.log(M)})},ARjs.Source.prototype.domElementWidth=function(){return parseInt(this.domElement.style.width)},ARjs.Source.prototype.domElementHeight=function(){return parseInt(this.domElement.style.height)},ARjs.Source.prototype.onResizeElement=function(){var x=this,T=window.innerWidth,O=window.innerHeight;if(console.assert(arguments.length===0),this.domElement.nodeName==="IMG")var M=this.domElement.naturalWidth,E=this.domElement.naturalHeight;else if(this.domElement.nodeName==="VIDEO")var M=this.domElement.videoWidth,E=this.domElement.videoHeight;else console.assert(!1);var e=M/E,B=T/O;if(B<e){var N=e*O;this.domElement.style.width=N+"px",this.domElement.style.marginLeft=-(N-T)/2+"px",this.domElement.style.height=O+"px",this.domElement.style.marginTop="0px"}else{var Q=1/(e/T);this.domElement.style.height=Q+"px",this.domElement.style.marginTop=-(Q-O)/2+"px",this.domElement.style.width=T+"px",this.domElement.style.marginLeft="0px"}},ARjs.Source.prototype.copyElementSizeTo=function(x){window.innerWidth>window.innerHeight?(x.style.width=this.domElement.style.width,x.style.height=this.domElement.style.height,x.style.marginLeft=this.domElement.style.marginLeft,x.style.marginTop=this.domElement.style.marginTop):(x.style.height=this.domElement.style.height,x.style.width=parseInt(x.style.height)*4/3+"px",x.style.marginLeft=(window.innerWidth-parseInt(x.style.width))/2+"px",x.style.marginTop=0)},ARjs.Source.prototype.copySizeTo=function(){console.warn("obsolete function arToolkitSource.copySizeTo. Use arToolkitSource.copyElementSizeTo"),this.copyElementSizeTo.apply(this,arguments)},ARjs.Source.prototype.onResize=function(x,T,O){if(arguments.length!==3)return console.warn("obsolete function arToolkitSource.onResize. Use arToolkitSource.onResizeElement"),this.onResizeElement.apply(this,arguments);var M=x.parameters.trackingBackend;if(M==="artoolkit"){this.onResizeElement();var E=!!T.domElement.dataset.aframeCanvas;E===!1&&this.copyElementSizeTo(T.domElement),x.arController!==null&&this.copyElementSizeTo(x.arController.canvas)}else M==="aruco"?(this.onResizeElement(),this.copyElementSizeTo(T.domElement),this.copyElementSizeTo(x.arucoContext.canvas)):console.assert(!1,"unhandled trackingBackend "+M);M==="artoolkit"?x.arController!==null&&O.projectionMatrix.copy(x.getProjectionMatrix()):M==="aruco"?(O.aspect=T.domElement.width/T.domElement.height,O.updateProjectionMatrix()):console.assert(!1,"unhandled trackingBackend "+M)};var THREEx=THREEx||{};THREEx.ArVideoInWebgl=function(x){var T=this,O=new THREE.PlaneGeometry(2,2),M=new THREE.MeshBasicMaterial({map:x}),E=new THREE.Mesh(O,M);this.object3d=E,this.update=function(e){e.updateMatrixWorld(!0);var B=new THREE.Vector3(-0,0,-20),B=new THREE.Vector3(-0,0,-20);E.position.copy(B),e.localToWorld(E.position),e.matrixWorld.decompose(e.position,e.quaternion,e.scale),E.quaternion.copy(e.quaternion);var N=THREE.Math.radToDeg(Math.atan(1/e.projectionMatrix.elements[5]))*2,Q=parseFloat(arToolkitSource.domElement.style.width.replace(/px$/,""),10),P=parseFloat(arToolkitSource.domElement.style.height.replace(/px$/,""),10),A=Q/P;E.scale.y=Math.tan(THREE.Math.DEG2RAD*N/2)*B.length(),E.scale.x=E.scale.y*A}};var THREEx=THREEx||{};THREEx.HitTestingPlane=function(x){this._sourceElement=x,this._pickingScene=new THREE.Scene;var T=new THREE.PlaneGeometry(20,20,19,19).rotateX(-Math.PI/2),O=new THREE.MeshBasicMaterial({wireframe:!0});this._pickingPlane=new THREE.Mesh(T,O),this._pickingScene.add(this._pickingPlane);var M=parseInt(x.style.width),E=parseInt(x.style.height);this._pickingCamera=new THREE.PerspectiveCamera(42,M/E,.1,30)},THREEx.HitTestingPlane.prototype.update=function(x,T,O){if(this.onResize(),O==="modelViewMatrix"){var M=this._pickingPlane;T.parent.updateMatrixWorld(),M.matrix.copy(T.parent.matrixWorld),M.matrix.decompose(M.position,M.quaternion,M.scale)}else if(O==="cameraTransformMatrix"){var E=this._pickingCamera;x.updateMatrixWorld(),E.matrix.copy(x.matrixWorld),E.matrix.decompose(E.position,E.quaternion,E.scale)}else console.assert(!1)},THREEx.HitTestingPlane.prototype.onResize=function(){var x=this._sourceElement,T=this._pickingCamera,O=parseInt(x.style.width),M=parseInt(x.style.height);T.aspect=O/M,T.updateProjectionMatrix()},THREEx.HitTestingPlane.prototype.test=function(x,T){x=(x-.5)*2,T=-(T-.5)*2,this._pickingScene.updateMatrixWorld(!0);var O=new THREE.Raycaster,M=new THREE.Vector3(x,T,1);O.setFromCamera(M,this._pickingCamera);var E=O.intersectObjects([this._pickingPlane]);if(E.length===0)return null;var e=this._pickingPlane.worldToLocal(E[0].point.clone()),B=new THREE.Quaternion,N=new THREE.Vector3(1,1,1);return{position:e,quaternion:B,scale:N}},THREEx.HitTestingPlane.prototype.renderDebug=function(x){x.render(this._pickingScene,this._pickingCamera)};var ARjs=ARjs||{};ARjs.Anchor=function(x,T){var O=this,M=x.arContext,E=x.parameters.scene,e=x.parameters.camera;this.arSession=x,this.parameters=T,console.log("ARjs.Anchor -","changeMatrixMode:",this.parameters.changeMatrixMode,"/ markersAreaEnabled:",T.markersAreaEnabled);var B=new THREE.Group;if(E.add(B),T.changeMatrixMode==="modelViewMatrix")var N=B;else if(T.changeMatrixMode==="cameraTransformMatrix")var N=e;else console.assert(!1);if(T.markersAreaEnabled===!1){var Q=new THREEx.ArMarkerControls(M,N,T);this.controls=Q}else{if(console.assert(M.parameters.trackingBackend==="artoolkit"||M.parameters.trackingBackend==="aruco"),location.hash.substring(1).startsWith("markers-page-resolution=")===!0){var P=location.hash.substring(1),A=P.match(/markers-page-resolution=(\d+)x(\d+)/);console.assert(A.length===3);var C=parseInt(A[1]),V=parseInt(A[2]),M=x.arContext;ARjs.MarkersAreaUtils.storeMarkersAreaFileFromResolution(M.parameters.trackingBackend,C,V)}localStorage.getItem("ARjsMultiMarkerFile")===null&&ARjs.MarkersAreaUtils.storeDefaultMultiMarkerFile(M.parameters.trackingBackend),console.assert(localStorage.getItem("ARjsMultiMarkerFile")!==null);var z=localStorage.getItem("ARjsMultiMarkerFile");if(T.changeMatrixMode==="modelViewMatrix")var H=E;else if(T.changeMatrixMode==="cameraTransformMatrix")var H=e;else console.assert(!1);var G=ARjs.MarkersAreaControls.fromJSON(M,H,N,z);this.controls=G,G.parameters.changeMatrixMode=T.changeMatrixMode;var $=[];G.subMarkersControls.forEach(function(ee){var he=new THREEx.ArMarkerHelper(ee);he.object3d.visible=!1,ee.object3d.add(he.object3d),$.push(he)}),this.markersArea={},this.markersArea.setSubMarkersVisibility=function(ee){$.forEach(function(he){he.object3d.visible=ee})}}this.object3d=new THREE.Group;var k=!0;if(k===!0){var K=new THREE.Group;E.add(K);var Z=new THREEx.ArSmoothedControls(K);K.add(this.object3d)}else B.add(this.object3d);this.update=function(){O.object3d.visible=O.object3d.parent.visible,Z!==void 0&&(G!==void 0&&G.updateSmoothedControls(Z),Z.update(B))}};var ARjs=ARjs||{};ARjs.SessionDebugUI=function(x){var T=x.arContext.parameters.trackingBackend;this.domElement=document.createElement("div"),this.domElement.style.color="rgba(0,0,0,0.9)",this.domElement.style.backgroundColor="rgba(127,127,127,0.5)",this.domElement.style.display="block",this.domElement.style.padding="0.5em",this.domElement.style.position="fixed",this.domElement.style.left="5px",this.domElement.style.bottom="10px",this.domElement.style.textAlign="right";var O=document.createElement("span");O.style.display="block",O.innerHTML="<b>trackingBackend</b> : "+T,this.domElement.appendChild(O)},ARjs.SessionDebugUI.AugmentedWebsiteURL="https://webxr.io/augmented-website",ARjs.AnchorDebugUI=function(x){var T=x.arSession,O=T.arContext.parameters.trackingBackend;this.domElement=document.createElement("div"),this.domElement.style.color="rgba(0,0,0,0.9)",this.domElement.style.backgroundColor="rgba(127,127,127,0.5)",this.domElement.style.display="inline-block",this.domElement.style.padding="0.5em",this.domElement.style.margin="0.5em",this.domElement.style.textAlign="left";var M=document.createElement("span");if(M.style.display="block",M.style.padding="0.5em",M.style.color="rgba(0,0,0,0.9)",M.style.backgroundColor="rgba(127,127,127,0.5)",M.style.position="fixed",M.style.left="5px",M.style.bottom="40px",this.domElement.appendChild(M),M.innerHTML="<b>markersAreaEnabled</b> :"+x.parameters.markersAreaEnabled,x.parameters.markersAreaEnabled){var M=document.createElement("button");M.style.display="block",this.domElement.style.padding="0.5em",this.domElement.style.position="fixed",this.domElement.style.textAlign="left",this.domElement.appendChild(M),M.id="buttonToggleMarkerHelpers",M.innerHTML="toggle-marker-helper",M.href="javascript:void(0)";var E=!1;M.addEventListener("click",function(){E=!E,x.markersArea.setSubMarkersVisibility(E)})}if(x.parameters.markersAreaEnabled){var M=document.createElement("button");M.style.display="block",this.domElement.appendChild(M),M.id="buttonMarkersAreaLearner",M.innerHTML="Learn-new-marker-area",M.href="javascript:void(0)",M.addEventListener("click",function(){if(ARjs.AnchorDebugUI.MarkersAreaLearnerURL!==null)var B=ARjs.AnchorDebugUI.MarkersAreaLearnerURL;else var B=ARjs.Context.baseURL+"examples/multi-markers/examples/learner.html";ARjs.MarkersAreaUtils.navigateToLearnerPage(B,O)})}if(x.parameters.markersAreaEnabled){var M=document.createElement("button");M.style.display="block",this.domElement.appendChild(M),M.id="buttonMarkersAreaReset",M.innerHTML="Reset-marker-area",M.href="javascript:void(0)",M.addEventListener("click",function(){ARjs.MarkersAreaUtils.storeDefaultMultiMarkerFile(O),location.reload()})}},ARjs.AnchorDebugUI.MarkersAreaLearnerURL=null;var ARjs=ARjs||{};ARjs.HitTesting=function(x){var T=this,O=x.arContext,M=O.parameters.trackingBackend;this.enabled=!0,this._arSession=x,this._hitTestingPlane=null,T._hitTestingPlane=new THREEx.HitTestingPlane(x.arSource.domElement)},ARjs.HitTesting.prototype.update=function(x,T,O){this.enabled!==!1&&(this._hitTestingPlane!==null?this._hitTestingPlane.update(x,T,O):console.assert(!1))},ARjs.HitTesting.prototype.testDomEvent=function(x){var T=this._arSession.arContext.parameters.trackingBackend,O=this._arSession.arSource;if(this.enabled===!1)return[];var M=x.clientX/O.domElementWidth(),E=x.clientY/O.domElementHeight();return this.test(M,E)},ARjs.HitTesting.prototype.test=function(x,T){var O=this._arSession.arContext,M=O.parameters.trackingBackend,E=[];if(this.enabled===!1)return[];var e=this._hitTestingPlane.test(x,T);if(e===null)return E;var B=new ARjs.HitTesting.Result(e.position,e.quaternion,e.scale);return E.push(B),E},ARjs.HitTesting.Result=function(x,T,O){this.position=x,this.quaternion=T,this.scale=O},ARjs.HitTesting.Result.prototype.apply=function(x){x.position.copy(this.position),x.quaternion.copy(this.quaternion),x.scale.copy(this.scale),x.updateMatrix()},ARjs.HitTesting.Result.prototype.applyPosition=function(x){return x.position.copy(this.position),x.updateMatrix(),this},ARjs.HitTesting.Result.prototype.applyQuaternion=function(x){return x.quaternion.copy(this.quaternion),x.updateMatrix(),this};var ARjs=ARjs||{};ARjs.Session=function(x){var T=this;this.parameters={renderer:null,camera:null,scene:null,sourceParameters:{},contextParameters:{}},O(x);function O(e){if(e!==void 0)for(var B in e){var N=e[B];if(N===void 0){console.warn("THREEx.Session: '"+B+"' parameter is undefined.");continue}var Q=T.parameters[B];if(Q===void 0){console.warn("THREEx.Session: '"+B+"' is not a property of this material.");continue}T.parameters[B]=N}}console.assert(this.parameters.renderer instanceof THREE.WebGLRenderer),console.assert(this.parameters.camera instanceof THREE.Camera),console.assert(this.parameters.scene instanceof THREE.Scene),Object.defineProperty(this,"renderer",{get:function(){return console.warn("use .parameters.renderer renderer"),this.parameters.renderer}}),Object.defineProperty(this,"camera",{get:function(){return console.warn("use .parameters.camera instead"),this.parameters.camera}}),Object.defineProperty(this,"scene",{get:function(){return console.warn("use .parameters.scene instead"),this.parameters.scene}}),console.log("AR.js",ARjs.Context.REVISION,"- trackingBackend:",x.contextParameters.trackingBackend);var M=T.arSource=new ARjs.Source(x.sourceParameters);M.init(function(){M.onResize(E,T.parameters.renderer,T.parameters.camera)}),window.addEventListener("resize",function(){M.onResize(E,T.parameters.renderer,T.parameters.camera)});var E=T.arContext=new ARjs.Context(x.contextParameters);T.arContext.init(),E.addEventListener("initialized",function(e){M.onResize(E,T.parameters.renderer,T.parameters.camera)}),this.update=function(){M.ready!==!1&&E.update(M.domElement)}},ARjs.Session.prototype.onResize=function(){this.arSource.onResize(this.arContext,this.parameters.renderer,this.parameters.camera)};var ARjs=ARjs||{};ARjs.Utils={},ARjs.Utils.createDefaultCamera=function(x){var T=this.parseTrackingMethod(x).trackingBackend;if(T==="artoolkit")var O=new THREE.Camera;else if(T==="aruco")var O=new THREE.PerspectiveCamera(42,window.innerWidth/window.innerHeight,.01,100);else console.assert(!1,"unknown trackingBackend: "+T);return O},ARjs.Utils.parseTrackingMethod=function(x){return x==="best"&&(x="area-artoolkit"),x.startsWith("area-")?{trackingBackend:x.replace("area-",""),markersAreaEnabled:!0}:{trackingBackend:x,markersAreaEnabled:!1}};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkersAreaControls=THREEx.ArMultiMarkerControls=function(x,T,O){var M=this;THREEx.ArBaseControls.call(this,T),arguments.length>3&&console.assert("wrong api for",THREEx.ArMultiMarkerControls),this.parameters={subMarkersControls:O.subMarkersControls,subMarkerPoses:O.subMarkerPoses,changeMatrixMode:O.changeMatrixMode!==void 0?O.changeMatrixMode:"modelViewMatrix"},this.object3d.visible=!1,this.subMarkersControls=this.parameters.subMarkersControls,this.subMarkerPoses=this.parameters.subMarkerPoses,x.addEventListener("sourceProcessed",function(){M._onSourceProcessed()})},ARjs.MarkersAreaControls.prototype=Object.create(THREEx.ArBaseControls.prototype),ARjs.MarkersAreaControls.prototype.constructor=ARjs.MarkersAreaControls,ARjs.MarkersAreaControls.prototype._onSourceProcessed=function(){var x=this,T={count:0,position:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)},quaternion:{sum:new THREE.Quaternion(0,0,0,0),average:new THREE.Quaternion(0,0,0,0)},scale:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)}},O=x.parameters.subMarkersControls[0].object3d.quaternion;if(this.parameters.subMarkersControls.forEach(function(E,e){var B=E.object3d;if(B.visible!==!1){var N=B.matrix.clone(),Q=x.parameters.subMarkerPoses[e];N.multiply(new THREE.Matrix4().getInverse(Q));var P=new THREE.Vector3,A=new THREE.Quaternion,C=new THREE.Vector3;N.decompose(P,A,C),T.count++,ARjs.MarkersAreaControls.averageVector3(T.position.sum,P,T.count,T.position.average),ARjs.MarkersAreaControls.averageQuaternion(T.quaternion.sum,A,O,T.count,T.quaternion.average),ARjs.MarkersAreaControls.averageVector3(T.scale.sum,C,T.count,T.scale.average)}}),T.count>0?x.object3d.visible=!0:x.object3d.visible=!1,T.count>0){var M=new THREE.Matrix4;M.compose(T.position.average,T.quaternion.average,T.scale.average),this.parameters.changeMatrixMode==="modelViewMatrix"?x.object3d.matrix.copy(M):this.parameters.changeMatrixMode==="cameraTransformMatrix"?x.object3d.matrix.getInverse(M):console.assert(!1),x.object3d.matrix.decompose(x.object3d.position,x.object3d.quaternion,x.object3d.scale)}},ARjs.MarkersAreaControls.averageQuaternion=function(x,T,O,M,E){return E=E||new THREE.Quaternion,console.assert(O instanceof THREE.Quaternion),T.dot(O)>0&&(T=new THREE.Quaternion(-T.x,-T.y,-T.z,-T.w)),x.x+=T.x,x.y+=T.y,x.z+=T.z,x.w+=T.w,E.x=x.x/M,E.y=x.y/M,E.z=x.z/M,E.w=x.w/M,E.normalize(),E},ARjs.MarkersAreaControls.averageVector3=function(x,T,O,M){return M=M||new THREE.Vector3,x.x+=T.x,x.y+=T.y,x.z+=T.z,M.x=x.x/O,M.y=x.y/O,M.z=x.z/O,M},ARjs.MarkersAreaControls.computeCenter=function(x){var T=JSON.parse(x),O={count:0,position:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)},quaternion:{sum:new THREE.Quaternion(0,0,0,0),average:new THREE.Quaternion(0,0,0,0)},scale:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)}},M=new THREE.Quaternion;T.subMarkersControls.forEach(function(e){var B=new THREE.Matrix4().fromArray(e.poseMatrix),N=new THREE.Vector3,Q=new THREE.Quaternion,P=new THREE.Vector3;B.decompose(N,Q,P),O.count++,ARjs.MarkersAreaControls.averageVector3(O.position.sum,N,O.count,O.position.average),ARjs.MarkersAreaControls.averageQuaternion(O.quaternion.sum,Q,M,O.count,O.quaternion.average),ARjs.MarkersAreaControls.averageVector3(O.scale.sum,P,O.count,O.scale.average)});var E=new THREE.Matrix4;return E.compose(O.position.average,O.quaternion.average,O.scale.average),E},ARjs.MarkersAreaControls.computeBoundingBox=function(x){var T=JSON.parse(x),O=new THREE.Box3;return T.subMarkersControls.forEach(function(M){var E=new THREE.Matrix4().fromArray(M.poseMatrix),e=new THREE.Vector3,B=new THREE.Quaternion,N=new THREE.Vector3;E.decompose(e,B,N),O.expandByPoint(e)}),O},ARjs.MarkersAreaControls.prototype.updateSmoothedControls=function(x,T){T===void 0&&(T=[[.3+.1,.1,.3],[.4+.1,.1,.4],[.4+.1,.2,.5],[.5+.1,.2,.7],[.5+.1,.2,.7]]);var O=0;if(this.parameters.subMarkersControls.forEach(function(E,e){var B=E.object3d;B.visible===!0&&O++}),T[O-1]!==void 0)var M=T[O-1];else var M=T[T.length-1];x.parameters.lerpPosition=M[0],x.parameters.lerpQuaternion=M[1],x.parameters.lerpScale=M[2]},ARjs.MarkersAreaControls.fromJSON=function(x,T,O,M,E){var e=JSON.parse(M),B=[],N=[];E=E||{},e.subMarkersControls.forEach(function(P){var A=new THREE.Object3D;T.add(A);var C=new THREEx.ArMarkerControls(x,A,P.parameters);B.push(C),N.push(new THREE.Matrix4().fromArray(P.poseMatrix))}),E.subMarkersControls=B,E.subMarkerPoses=N;var Q=new THREEx.ArMultiMarkerControls(x,O,E);return Q};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkersAreaLearning=THREEx.ArMultiMakersLearning=function(x,T){var O=this;this._arToolkitContext=x,this.subMarkersControls=T,this.enabled=!0,x.addEventListener("sourceProcessed",function(){O._onSourceProcessed()})},ARjs.MarkersAreaLearning.prototype._onSourceProcessed=function(){var x=this.subMarkersControls[0].object3d.quaternion;if(this.enabled!==!1)for(var T=this.subMarkersControls.filter(function(z){return z.object3d.visible===!0}),O=Object.keys(T).length,M=new THREE.Vector3,E=new THREE.Quaternion,e=new THREE.Vector3,B=new THREE.Matrix4,N=0;N<O;N++)for(var Q=T[N],P=0;P<O;P++){var A=T[P];if(N!==P){Q.object3d.userData.seenCouples===void 0&&(Q.object3d.userData.seenCouples={});var C=Q.object3d.userData.seenCouples;C[A.id]===void 0&&(C[A.id]={count:0,position:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)},quaternion:{sum:new THREE.Quaternion(0,0,0,0),average:new THREE.Quaternion(0,0,0,0)},scale:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)}}),B.getInverse(Q.object3d.matrix),B.multiply(A.object3d.matrix),B.decompose(M,E,e);var V=C[A.id];V.count++,THREEx.ArMultiMarkerControls.averageVector3(V.position.sum,M,V.count,V.position.average),THREEx.ArMultiMarkerControls.averageQuaternion(V.quaternion.sum,E,x,V.count,V.quaternion.average),THREEx.ArMultiMarkerControls.averageVector3(V.scale.sum,e,V.count,V.scale.average)}}},ARjs.MarkersAreaLearning.prototype.computeResult=function(){var x=this,T=this.subMarkersControls[0];this.deleteResult(),T.object3d.userData.result={averageMatrix:new THREE.Matrix4,confidenceFactor:1};do{var O=!1;this.subMarkersControls.forEach(function(M){var E=M.object3d.userData.result,e=E!==void 0&&E.confidenceFactor>=1;if(e!==!0){var B=x._getLearnedCoupleStats(M);if(B!==null){var N=x._getSubMarkerControlsByID(B),Q=M.object3d.userData.seenCouples[B],P=new THREE.Matrix4;P.compose(Q.position.average,Q.quaternion.average,Q.scale.average);var A=N.object3d.userData.result.averageMatrix,C=new THREE.Matrix4().getInverse(A).multiply(P);C=new THREE.Matrix4().getInverse(C),console.assert(M.object3d.userData.result===void 0),M.object3d.userData.result={averageMatrix:C,confidenceFactor:1},O=!0}}})}while(O===!0)},ARjs.MarkersAreaLearning.prototype._getLearnedCoupleStats=function(x){if(x.object3d.userData.seenCouples===void 0)return null;for(var T=x.object3d.userData.seenCouples,O=Object.keys(T).map(Number),M=0;M<O.length;M++){var E=O[M],e=this._getSubMarkerControlsByID(E),B=e.object3d.userData.result,N=B!==void 0&&B.confidenceFactor>=1;if(N!==!1)return E}return null},ARjs.MarkersAreaLearning.prototype._getSubMarkerControlsByID=function(x){for(var T=0;T<this.subMarkersControls.length;T++){var O=this.subMarkersControls[T];if(O.id===x)return O}return null},ARjs.MarkersAreaLearning.prototype.toJSON=function(){this.computeResult();var x={meta:{createdBy:"Area Learning - AR.js "+THREEx.ArToolkitContext.REVISION,createdAt:new Date().toJSON()},trackingBackend:this._arToolkitContext.parameters.trackingBackend,subMarkersControls:[]},T=this.subMarkersControls[0],O=new THREE.Matrix4().getInverse(T.object3d.matrix);this.subMarkersControls.forEach(function(B,N){if(B.object3d.userData.result!==void 0){var Q=B.object3d.userData.result.averageMatrix;console.assert(Q instanceof THREE.Matrix4);var P={parameters:{},poseMatrix:Q.toArray()};B.parameters.type==="pattern"?(P.parameters.type=B.parameters.type,P.parameters.patternUrl=B.parameters.patternUrl):B.parameters.type==="barcode"?(P.parameters.type=B.parameters.type,P.parameters.barcodeValue=B.parameters.barcodeValue):console.assert(!1),x.subMarkersControls.push(P)}});var M=JSON.stringify(x,null,"	"),E=!1;if(E===!0){var e=JSON.parse(M);e.subMarkersControls.forEach(function(B){B.poseMatrix=B.poseMatrix.map(function(N){var Q=100;return Math.round(N*Q)/Q})}),M=JSON.stringify(e,null,"	")}return M},ARjs.MarkersAreaLearning.prototype.resetStats=function(){this.deleteResult(),this.subMarkersControls.forEach(function(x){delete x.object3d.userData.seenCouples})},ARjs.MarkersAreaLearning.prototype.deleteResult=function(){this.subMarkersControls.forEach(function(x){delete x.object3d.userData.result})};var THREEx=THREEx||{},ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkersAreaUtils=THREEx.ArMultiMarkerUtils={},ARjs.MarkersAreaUtils.navigateToLearnerPage=function(x,T){var O={backURL:location.href,trackingBackend:T,markersControlsParameters:ARjs.MarkersAreaUtils.createDefaultMarkersControlsParameters(T)};location.href=x+"?"+encodeURIComponent(JSON.stringify(O))},ARjs.MarkersAreaUtils.storeDefaultMultiMarkerFile=function(x){var T=ARjs.MarkersAreaUtils.createDefaultMultiMarkerFile(x);localStorage.setItem("ARjsMultiMarkerFile",JSON.stringify(T))},ARjs.MarkersAreaUtils.createDefaultMultiMarkerFile=function(x){if(console.assert(x),x===void 0)debugger;var T=document.createElement("a");T.href=ARjs.Context.baseURL;var O=T.href,M={meta:{createdBy:"AR.js "+ARjs.Context.REVISION+" - Default Marker",createdAt:new Date().toJSON()},trackingBackend:x,subMarkersControls:[]};return M.subMarkersControls[0]={parameters:{},poseMatrix:new THREE.Matrix4().makeTranslation(0,0,0).toArray()},x==="artoolkit"?(M.subMarkersControls[0].parameters.type="pattern",M.subMarkersControls[0].parameters.patternUrl=O+"examples/marker-training/examples/pattern-files/pattern-hiro.patt"):x==="aruco"?(M.subMarkersControls[0].parameters.type="barcode",M.subMarkersControls[0].parameters.barcodeValue=1001):console.assert(!1),M},ARjs.MarkersAreaUtils.createDefaultMarkersControlsParameters=function(x){var T=document.createElement("a");T.href=ARjs.Context.baseURL;var O=T.href;if(x==="artoolkit")var M=[{type:"pattern",patternUrl:O+"examples/marker-training/examples/pattern-files/pattern-hiro.patt"},{type:"pattern",patternUrl:O+"examples/marker-training/examples/pattern-files/pattern-kanji.patt"},{type:"pattern",patternUrl:O+"examples/marker-training/examples/pattern-files/pattern-letterA.patt"},{type:"pattern",patternUrl:O+"examples/marker-training/examples/pattern-files/pattern-letterB.patt"},{type:"pattern",patternUrl:O+"examples/marker-training/examples/pattern-files/pattern-letterC.patt"},{type:"pattern",patternUrl:O+"examples/marker-training/examples/pattern-files/pattern-letterF.patt"}];else if(x==="aruco")var M=[{type:"barcode",barcodeValue:1001},{type:"barcode",barcodeValue:1002},{type:"barcode",barcodeValue:1003},{type:"barcode",barcodeValue:1004},{type:"barcode",barcodeValue:1005},{type:"barcode",barcodeValue:1006}];else console.assert(!1);return M},ARjs.MarkersAreaUtils.storeMarkersAreaFileFromResolution=function(x,T,O){var M=this.buildMarkersAreaFileFromResolution(x,T,O);localStorage.setItem("ARjsMultiMarkerFile",JSON.stringify(M))},ARjs.MarkersAreaUtils.buildMarkersAreaFileFromResolution=function(x,T,O){var M={meta:{createdBy:"AR.js - Augmented Website",createdAt:new Date().toJSON()},trackingBackend:x,subMarkersControls:[]},E=.1;if(T>O)var e=.4*O;else if(T<O)var e=.4*T;else if(T===O)var e=.33*T;else console.assert(!1);var B=e*(1-2*E),N=(T-e)/2/B,Q=(O-e)/2/B,P=A("center",0,0);M.subMarkersControls.push(P);var P=A("topleft",-N,-Q);M.subMarkersControls.push(P);var P=A("topright",+N,-Q);M.subMarkersControls.push(P);var P=A("bottomleft",-N,+Q);M.subMarkersControls.push(P);var P=A("bottomright",+N,+Q);return M.subMarkersControls.push(P),M;function A(z,H,G){console.log("buildSubMarkerControls",z,H,G);var $={parameters:{},poseMatrix:new THREE.Matrix4().makeTranslation(H,0,G).toArray()};return x==="artoolkit"?C($.parameters,z):x==="aruco"?V($.parameters,z):console.assert(!1),$}function C(z,H){var G=document.createElement("a");G.href=ARjs.Context.baseURL;var $=G.href,k={center:K($+"examples/marker-training/examples/pattern-files/pattern-hiro.patt"),topleft:K($+"examples/marker-training/examples/pattern-files/pattern-letterA.patt"),topright:K($+"examples/marker-training/examples/pattern-files/pattern-letterB.patt"),bottomleft:K($+"examples/marker-training/examples/pattern-files/pattern-letterC.patt"),bottomright:K($+"examples/marker-training/examples/pattern-files/pattern-letterF.patt")};console.assert(k[H]!==void 0),z.type="pattern",z.patternUrl=k[H];return;function K(Z){var ee=document.createElement("a");return ee.href=Z,ee.href}}function V(z,H){var G={center:1001,topleft:1002,topright:1003,bottomleft:1004,bottomright:1005};console.assert(G[H]),z.type="barcode",z.barcodeValue=G[H]}},AFRAME.registerComponent("arjs-anchor",{dependencies:["arjs","artoolkit"],schema:{preset:{type:"string"},markerhelpers:{type:"boolean",default:!1},size:{type:"number",default:1},type:{type:"string"},patternUrl:{type:"string"},barcodeValue:{type:"number"},changeMatrixMode:{type:"string",default:"modelViewMatrix"},minConfidence:{type:"number",default:.6},smooth:{type:"boolean",default:!1},smoothCount:{type:"number",default:5},smoothTolerance:{type:"number",default:.01},smoothThreshold:{type:"number",default:2}},init:function(){var x=this,T=this.el.sceneEl.systems.arjs||this.el.sceneEl.systems.artoolkit;x.isReady=!1,x._arAnchor=null,x.data.changeMatrixMode==="modelViewMatrix"?x.el.object3D.visible=!1:x.data.changeMatrixMode==="cameraTransformMatrix"?x.el.sceneEl.object3D.visible=!1:console.assert(!1);var O=Date.now(),M=setInterval(function(){if(T.isReady!==!1){clearInterval(M);var E=T._arProfile;E.changeMatrixMode(x.data.changeMatrixMode);var e=Object.assign({},E.defaultMarkerParameters);x.data.preset==="hiro"?(e.type="pattern",e.patternUrl=THREEx.ArToolkitContext.baseURL+"examples/marker-training/examples/pattern-files/pattern-hiro.patt",e.markersAreaEnabled=!1):x.data.preset==="kanji"?(e.type="pattern",e.patternUrl=THREEx.ArToolkitContext.baseURL+"examples/marker-training/examples/pattern-files/pattern-kanji.patt",e.markersAreaEnabled=!1):x.data.preset==="area"?(e.type="barcode",e.barcodeValue=1001,e.markersAreaEnabled=!0):x.data.type==="barcode"?e={type:x.data.type,changeMatrixMode:"modelViewMatrix",barcodeValue:x.data.barcodeValue,markersAreaEnabled:!1}:x.data.type==="pattern"&&(e.type=x.data.type,e.patternUrl=x.data.patternUrl,e.markersAreaEnabled=!1),e.smooth=x.data.smooth,e.smoothCount=x.data.smoothCount,e.smoothTolerance=x.data.smoothTolerance,e.smoothThreshold=x.data.smoothThreshold;var B=T._arSession,N=x._arAnchor=new ARjs.Anchor(B,e);if(x.isReady=!0,T.data.debugUIEnabled){var Q=document.querySelector("#arjsDebugUIContainer");Q===null&&(Q=document.createElement("div"),Q.id="arjsDebugUIContainer",Q.setAttribute("style","position: fixed; bottom: 10px; width:100%; text-align: center; z-index: 1; color: grey;"),document.body.appendChild(Q));var P=new ARjs.AnchorDebugUI(N);Q.appendChild(P.domElement)}}},1e3/60)},remove:function(){},update:function(){},tick:function(){var x=this;if(this.isReady!==!1){var T=this.el.sceneEl.systems.arjs||this.el.sceneEl.systems.artoolkit;this._arAnchor.update();var O=this._arAnchor.object3d;if(O.updateMatrixWorld(!0),O.matrixWorld.decompose(this.el.object3D.position,this.el.object3D.quaternion,this.el.object3D.scale),x._arAnchor.parameters.changeMatrixMode==="modelViewMatrix"){var M=x.el.object3D.visible;x.el.object3D.visible=this._arAnchor.object3d.visible}else if(x._arAnchor.parameters.changeMatrixMode==="cameraTransformMatrix"){var M=x.el.sceneEl.object3D.visible;x.el.sceneEl.object3D.visible=this._arAnchor.object3d.visible}else console.assert(!1);x._arAnchor.object3d.visible===!0&&M===!1?x.el.emit("markerFound"):x._arAnchor.object3d.visible===!1&&M===!0&&x.el.emit("markerLost")}}}),AFRAME.registerPrimitive("a-anchor",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{"arjs-anchor":{},"arjs-hit-testing":{}},mappings:{type:"arjs-anchor.type",size:"arjs-anchor.size",url:"arjs-anchor.patternUrl",value:"arjs-anchor.barcodeValue",preset:"arjs-anchor.preset","min-confidence":"arjs-anchor.minConfidence","marker-helpers":"arjs-anchor.markerhelpers",smooth:"arjs-anchor.smooth","smooth-count":"arjs-anchor.smoothCount","smooth-tolerance":"arjs-anchor.smoothTolerance","smooth-threshold":"arjs-anchor.smoothThreshold","hit-testing-render-debug":"arjs-hit-testing.renderDebug","hit-testing-enabled":"arjs-hit-testing.enabled"}})),AFRAME.registerPrimitive("a-camera-static",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{camera:{}},mappings:{}})),AFRAME.registerPrimitive("a-marker",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{"arjs-anchor":{},"arjs-hit-testing":{}},mappings:{type:"arjs-anchor.type",size:"arjs-anchor.size",url:"arjs-anchor.patternUrl",value:"arjs-anchor.barcodeValue",preset:"arjs-anchor.preset","min-confidence":"arjs-anchor.minConfidence","marker-helpers":"arjs-anchor.markerhelpers",smooth:"arjs-anchor.smooth","smooth-count":"arjs-anchor.smoothCount","smooth-tolerance":"arjs-anchor.smoothTolerance","smooth-threshold":"arjs-anchor.smoothThreshold","hit-testing-render-debug":"arjs-hit-testing.renderDebug","hit-testing-enabled":"arjs-hit-testing.enabled"}})),AFRAME.registerPrimitive("a-marker-camera",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{"arjs-anchor":{changeMatrixMode:"cameraTransformMatrix"},camera:{}},mappings:{type:"arjs-anchor.type",size:"arjs-anchor.size",url:"arjs-anchor.patternUrl",value:"arjs-anchor.barcodeValue",preset:"arjs-anchor.preset","min-confidence":"arjs-anchor.minConfidence","marker-helpers":"arjs-anchor.markerhelpers"}})),AFRAME.registerComponent("arjs-hit-testing",{dependencies:["arjs","artoolkit"],schema:{enabled:{type:"boolean",default:!1},renderDebug:{type:"boolean",default:!1}},init:function(){var x=this,T=this.el.sceneEl.systems.arjs||this.el.sceneEl.systems.artoolkit;x.isReady=!1,x._arAnchor=null,x._arHitTesting=null;var O=Date.now(),M=setInterval(function(){var E=x.el,e=E.components["arjs-anchor"];if(!(e===void 0||e.isReady===!1)){clearInterval(M);var B=e._arAnchor,N=T._arSession,Q=N.parameters.renderer,P=x._arHitTesting=new ARjs.HitTesting(N);P.enabled=x.data.enabled,x.isReady=!0}},1e3/60)},remove:function(){},update:function(){},tick:function(){var x=this;if(this.isReady!==!1){var T=this.el.sceneEl.systems.arjs||this.el.sceneEl.systems.artoolkit,O=T._arSession,M=x.el,E=M.components["arjs-anchor"],e=E._arAnchor,B=this._arHitTesting,N=O.parameters.camera;B.update(N,e.object3d,e.parameters.changeMatrixMode)}}}),AFRAME.registerComponent("gps-camera-debug",{init:function(){this.current_coords_latitude,this.current_coords_longitude,this.origin_coords_latitude,this.origin_coords_longitude,this.camera_p_x,this.camera_p_z,this.entities=0,this._buildCameraDebugUI(document.body),this.current_coords_latitude=document.querySelector("#current_coords_latitude"),this.current_coords_longitude=document.querySelector("#current_coords_longitude"),this.origin_coords_latitude=document.querySelector("#origin_coords_latitude"),this.origin_coords_longitude=document.querySelector("#origin_coords_longitude"),this.camera_p_x=document.querySelector("#camera_p_x"),this.camera_p_z=document.querySelector("#camera_p_z"),this.placesLoadedEventHandler=function(){this.entities++;var x=document.querySelectorAll("[gps-entity-place]")&&document.querySelectorAll("[gps-entity-place]").length||0;x===this.entities&&(this._buildDistancesDebugUI(),window.removeEventListener("gps-entity-place-loaded",this.placesLoadedEventHandler.bind(this)),window.dispatchEvent(new CustomEvent("debug-ui-added")))},window.addEventListener("gps-entity-place-loaded",this.placesLoadedEventHandler.bind(this))},tick:function(){var x=document.querySelector("[gps-camera]"),T=x.getAttribute("position");this.camera_p_x.innerText=T.x.toFixed(6),this.camera_p_z.innerText=T.z.toFixed(6);var O=x.components["gps-camera"];O&&(O.currentCoords&&(this.current_coords_longitude.innerText=O.currentCoords.longitude.toFixed(6),this.current_coords_latitude.innerText=O.currentCoords.latitude.toFixed(6)),O.originCoords&&(this.origin_coords_longitude.innerText=O.originCoords.longitude.toFixed(6),this.origin_coords_latitude.innerText=O.originCoords.latitude.toFixed(6)))},_buildCameraDebugUI:function(x){var T=document.createElement("div");T.classList.add("debug");var O=document.createElement("div");O.innerText="current lng/lat coords: ";var M=document.createElement("span");M.id="current_coords_longitude";var E=document.createElement("span");E.id="current_coords_latitude",O.appendChild(M),O.appendChild(E),T.appendChild(O);var e=document.createElement("div");e.innerText="origin lng/lat coords: ";var B=document.createElement("span");B.id="origin_coords_longitude";var N=document.createElement("span");N.id="origin_coords_latitude",e.appendChild(B),e.appendChild(N),T.appendChild(e);var Q=document.createElement("div");Q.innerText="camera 3d position: ";var P=document.createElement("span");P.id="camera_p_x";var A=document.createElement("span");A.id="camera_p_z",Q.appendChild(P),Q.appendChild(A),T.appendChild(Q),x.appendChild(T)},_buildDistancesDebugUI:function(){var x=document.querySelector(".debug");document.querySelectorAll("[gps-entity-place]").forEach(function(T){var O=document.createElement("div");O.classList.add("debug-distance"),O.innerHTML=T.getAttribute("value"),console.log(T.getAttribute("value")),O.setAttribute("value",T.getAttribute("value")),x.appendChild(O)})}}),AFRAME.registerComponent("gps-camera",{_watchPositionId:null,originCoords:null,currentCoords:null,lookControls:null,heading:null,schema:{simulateLatitude:{type:"number",default:0},simulateLongitude:{type:"number",default:0},simulateAltitude:{type:"number",default:0},positionMinAccuracy:{type:"int",default:100},alert:{type:"boolean",default:!1},minDistance:{type:"int",default:0}},init:function(){if(this.el.components["look-controls"]){this.loader=document.createElement("DIV"),this.loader.classList.add("arjs-loader"),document.body.appendChild(this.loader),window.addEventListener("gps-entity-place-added",function(){this.originCoords&&(window.dispatchEvent(new CustomEvent("gps-camera-origin-coord-set")),console.debug("gps-camera-origin-coord-set")),this.loader&&this.loader.parentElement&&document.body.removeChild(this.loader)}.bind(this)),this.lookControls=this.el.components["look-controls"];var x=this._getDeviceOrientationEventName();if(this._onDeviceOrientation=this._onDeviceOrientation.bind(this),navigator.userAgent.match(/Version\/[\d.]+.*Safari/))if(typeof DeviceOrientationEvent.requestPermission=="function"){var T=function(){console.log("Requesting device orientation permissions..."),DeviceOrientationEvent.requestPermission(),document.removeEventListener("touchend",T)};document.addEventListener("touchend",function(){T()},!1),alert("After camera permission prompt, please tap the screen to activate geolocation.")}else{var O=setTimeout(function(){alert("Please enable device orientation in Settings > Safari > Motion & Orientation Access.")},750);window.addEventListener(x,function(){clearTimeout(O)})}window.addEventListener(x,this._onDeviceOrientation,!1),this._watchPositionId=this._initWatchGPS(function(M){this.data.simulateLatitude!==0&&this.data.simulateLongitude!==0?(localPosition=Object.assign({},M.coords),localPosition.longitude=this.data.simulateLongitude,localPosition.latitude=this.data.simulateLatitude,localPosition.altitude=this.data.simulateAltitude,this.currentCoords=localPosition):this.currentCoords=M.coords,this._updatePosition()}.bind(this))}},tick:function(){this.heading!==null&&this._updateRotation()},remove:function(){this._watchPositionId&&navigator.geolocation.clearWatch(this._watchPositionId),this._watchPositionId=null;var x=this._getDeviceOrientationEventName();window.removeEventListener(x,this._onDeviceOrientation,!1)},_getDeviceOrientationEventName:function(){if("ondeviceorientationabsolute"in window)var x="deviceorientationabsolute";else if("ondeviceorientation"in window)var x="deviceorientation";else{var x="";console.error("Compass not supported")}return x},_initWatchGPS:function(x,T){return T||(T=function(O){if(console.warn("ERROR("+O.code+"): "+O.message),O.code===1){alert("Please activate Geolocation and refresh the page. If it is already active, please check permissions for this website.");return}if(O.code===3){alert("Cannot retrieve GPS position. Signal is absent.");return}}),"geolocation"in navigator?navigator.geolocation.watchPosition(x,T,{enableHighAccuracy:!0,maximumAge:0,timeout:27e3}):(T({code:0,message:"Geolocation is not supported by your browser"}),Promise.resolve())},_updatePosition:function(){if(this.currentCoords.accuracy>this.data.positionMinAccuracy){if(this.data.alert&&!document.getElementById("alert-popup")){var x=document.createElement("div");x.innerHTML="GPS signal is very poor. Try move outdoor or to an area with a better signal.",x.setAttribute("id","alert-popup"),document.body.appendChild(x)}return}var T=document.getElementById("alert-popup");if(this.currentCoords.accuracy<=this.data.positionMinAccuracy&&T&&document.body.removeChild(T),this.originCoords)this._setPosition();else{this.originCoords=this.currentCoords,this._setPosition();var O=document.querySelector(".arjs-loader");O&&document.body.removeChild(O),window.dispatchEvent(new CustomEvent("gps-camera-origin-coord-set")),console.debug("gps-camera-origin-coord-set")}},_setPosition:function(){var x=this.el.getAttribute("position"),T={longitude:this.currentCoords.longitude,latitude:this.originCoords.latitude};x.x=this.computeDistanceMeters(this.originCoords,T),x.x*=this.currentCoords.longitude>this.originCoords.longitude?1:-1;var T={longitude:this.originCoords.longitude,latitude:this.currentCoords.latitude};x.z=this.computeDistanceMeters(this.originCoords,T),x.z*=this.currentCoords.latitude>this.originCoords.latitude?-1:1,this.el.setAttribute("position",x),window.dispatchEvent(new CustomEvent("gps-camera-update-position",{detail:{position:this.currentCoords,origin:this.originCoords}}))},computeDistanceMeters:function(x,T,O){var M=THREE.Math.degToRad(T.longitude-x.longitude),E=THREE.Math.degToRad(T.latitude-x.latitude),e=Math.sin(E/2)*Math.sin(E/2)+Math.cos(THREE.Math.degToRad(x.latitude))*Math.cos(THREE.Math.degToRad(T.latitude))*(Math.sin(M/2)*Math.sin(M/2)),B=2*Math.atan2(Math.sqrt(e),Math.sqrt(1-e)),N=B*6378160;return O&&this.data.minDistance&&this.data.minDistance>0&&N<this.data.minDistance?Number.MAX_SAFE_INTEGER:N},_computeCompassHeading:function(x,T,O){var M=x*(Math.PI/180),E=T*(Math.PI/180),e=O*(Math.PI/180),B=Math.cos(M),N=Math.sin(M),Q=Math.sin(E),P=Math.cos(e),A=Math.sin(e),C=-B*A-N*Q*P,V=-N*A+B*Q*P,z=Math.atan(C/V);return V<0?z+=Math.PI:C<0&&(z+=2*Math.PI),z*=180/Math.PI,z},_onDeviceOrientation:function(x){x.webkitCompassHeading!==void 0?x.webkitCompassAccuracy<50?this.heading=x.webkitCompassHeading:console.warn("webkitCompassAccuracy is event.webkitCompassAccuracy"):x.alpha!==null?x.absolute===!0||x.absolute===void 0?this.heading=this._computeCompassHeading(x.alpha,x.beta,x.gamma):console.warn("event.absolute === false"):console.warn("event.alpha === null")},_updateRotation:function(){var x=360-this.heading,T=this.el.getAttribute("rotation").y,O=THREE.Math.radToDeg(this.lookControls.yawObject.rotation.y),M=(x-(T-O))%360;this.lookControls.yawObject.rotation.y=THREE.Math.degToRad(M)}}),AFRAME.registerComponent("gps-entity-place",{_cameraGps:null,schema:{longitude:{type:"number",default:0},latitude:{type:"number",default:0}},init:function(){window.addEventListener("gps-camera-origin-coord-set",function(){if(!this._cameraGps){var x=document.querySelector("[gps-camera]");if(!x.components["gps-camera"]){console.error("gps-camera not initialized");return}this._cameraGps=x.components["gps-camera"]}this._updatePosition()}.bind(this)),window.addEventListener("gps-camera-update-position",function(x){if(!(!this.data||!this._cameraGps)){var T={longitude:this.data.longitude,latitude:this.data.latitude},O=this._cameraGps.computeDistanceMeters(x.detail.position,T);this.el.setAttribute("distance",O),this.el.setAttribute("distanceMsg",formatDistance(O)),this.el.dispatchEvent(new CustomEvent("gps-entity-place-update-positon",{detail:{distance:O}}))}}.bind(this)),this._positionXDebug=0,window.dispatchEvent(new CustomEvent("gps-entity-place-added")),console.debug("gps-entity-place-added"),this.debugUIAddedHandler=function(){this.setDebugData(this.el),window.removeEventListener("debug-ui-added",this.debugUIAddedHandler.bind(this))},window.addEventListener("debug-ui-added",this.debugUIAddedHandler.bind(this))},_updatePosition:function(){var x={x:0,y:this.el.getAttribute("position").y||0,z:0},T=!1,O={longitude:this.data.longitude,latitude:this._cameraGps.originCoords.latitude};x.x=this._cameraGps.computeDistanceMeters(this._cameraGps.originCoords,O,!0),x.x===Number.MAX_SAFE_INTEGER&&(T=!0),this._positionXDebug=x.x,x.x*=this.data.longitude>this._cameraGps.originCoords.longitude?1:-1;var O={longitude:this._cameraGps.originCoords.longitude,latitude:this.data.latitude};x.z=this._cameraGps.computeDistanceMeters(this._cameraGps.originCoords,O,!0),x.z===Number.MAX_SAFE_INTEGER&&(T=!0),x.z*=this.data.latitude>this._cameraGps.originCoords.latitude?-1:1,x.y!==0&&(x.y=x.y-this._cameraGps.originCoords.altitude),T?this.el.setAttribute("visible",!1):this.el.setAttribute("visible",!0),this.el.setAttribute("position",x)},setDebugData:function(x){var T=document.querySelectorAll(".debug-distance");T.forEach(function(O){var M=formatDistance(this._positionXDebug);x.getAttribute("value")==O.getAttribute("value")&&(O.innerHTML=O.getAttribute("value")+": "+M+"far")})}});function formatDistance(x){return x=x.toFixed(0),x>=1e3?x/1e3+" kilometers":x+" meters"}AFRAME.registerSystem("arjs",{schema:{trackingMethod:{type:"string",default:"best"},debugUIEnabled:{type:"boolean",default:!0},areaLearningButton:{type:"boolean",default:!0},performanceProfile:{type:"string",default:"default"},debug:{type:"boolean",default:!1},detectionMode:{type:"string",default:""},matrixCodeType:{type:"string",default:""},patternRatio:{type:"number",default:-1},labelingMode:{type:"string",default:""},cameraParametersUrl:{type:"string",default:""},maxDetectionRate:{type:"number",default:-1},sourceType:{type:"string",default:""},sourceUrl:{type:"string",default:""},sourceWidth:{type:"number",default:-1},sourceHeight:{type:"number",default:-1},deviceId:{type:"string",default:""},displayWidth:{type:"number",default:-1},displayHeight:{type:"number",default:-1},canvasWidth:{type:"number",default:-1},canvasHeight:{type:"number",default:-1}},init:function(){var x=this,T=this._arProfile=new ARjs.Profile().trackingMethod(this.data.trackingMethod).performance(this.data.performanceProfile).defaultMarker();this.data.debug!==!1&&(T.contextParameters.debug=this.data.debug),this.data.detectionMode!==""&&(T.contextParameters.detectionMode=this.data.detectionMode),this.data.matrixCodeType!==""&&(T.contextParameters.matrixCodeType=this.data.matrixCodeType),this.data.patternRatio!==-1&&(T.contextParameters.patternRatio=this.data.patternRatio),this.data.labelingMode!==""&&(T.contextParameters.labelingMode=this.data.labelingMode),this.data.cameraParametersUrl!==""&&(T.contextParameters.cameraParametersUrl=this.data.cameraParametersUrl),this.data.maxDetectionRate!==-1&&(T.contextParameters.maxDetectionRate=this.data.maxDetectionRate),this.data.canvasWidth!==-1&&(T.contextParameters.canvasWidth=this.data.canvasWidth),this.data.canvasHeight!==-1&&(T.contextParameters.canvasHeight=this.data.canvasHeight),this.data.sourceType!==""&&(T.sourceParameters.sourceType=this.data.sourceType),this.data.sourceUrl!==""&&(T.sourceParameters.sourceUrl=this.data.sourceUrl),this.data.sourceWidth!==-1&&(T.sourceParameters.sourceWidth=this.data.sourceWidth),this.data.sourceHeight!==-1&&(T.sourceParameters.sourceHeight=this.data.sourceHeight),this.data.deviceId!==""&&(T.sourceParameters.deviceId=this.data.deviceId),this.data.displayWidth!==-1&&(T.sourceParameters.displayWidth=this.data.displayWidth),this.data.displayHeight!==-1&&(T.sourceParameters.displayHeight=this.data.displayHeight),T.checkIfValid(),this._arSession=null,x.isReady=!1,x.needsOverride=!0,this.el.sceneEl.addEventListener("renderstart",function(){var E=x.el.sceneEl.object3D,e=x.el.sceneEl.camera,B=x.el.sceneEl.renderer,N=x._arSession=new ARjs.Session({scene:E,renderer:B,camera:e,sourceParameters:T.sourceParameters,contextParameters:T.contextParameters});x.isReady=!0,window.addEventListener("resize",Q);function Q(){var A=x._arSession.arSource;T.contextParameters.trackingBackend!=="tango"&&A.copyElementSizeTo(document.body);var C=document.querySelector(".a-enter-vr");C&&(C.style.position="fixed")}x.data.debugUIEnabled&&P();function P(){var A=document.querySelector("#arjsDebugUIContainer");A===null&&(A=document.createElement("div"),A.id="arjsDebugUIContainer",A.setAttribute("style","position: fixed; bottom: 10px; width:100%; text-align: center; z-index: 1;color: grey;"),document.body.appendChild(A));var C=new ARjs.SessionDebugUI(N);A.appendChild(C.domElement)}});var O=Date.now(),M=setInterval(function(){if(Date.now()-O>1e4*1e3){clearInterval(M);return}window.dispatchEvent(new Event("resize"))},1e3/30)},tick:function(x,T){var O=this;if(this.isReady!==!1){var M=this._arSession;this._arSession.update(),this._arSession.onResize()}}});
